var cc = cc || {};
cc._tmp = cc._tmp || {};
cc._LogInfos = {};
var _p = window,
    _p = Object.prototype,
    _p = null;
cc._drawingUtil = null;
cc._renderContext = null;
cc._supportRender = !1;
cc._canvas = null;
cc.container = null;
cc._gameDiv = null;
cc.each = function (a, b, c) {
    if (a)
        if (a instanceof Array)
            for (var d = 0, f = a.length; d < f && !1 !== b.call(c, a[d], d); d++);
        else
            for (d in a)
                if (!1 === b.call(c, a[d], d)) break
};
cc.extend = function (a) {
    var b = 2 <= arguments.length ? Array.prototype.slice.call(arguments, 1) : [];
    cc.each(b, function (b) {
        for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d])
    });
    return a
};
cc.inherits = function (a, b) {
    function c() {}
    c.prototype = b.prototype;
    a.superClass_ = b.prototype;
    a.prototype = new c;
    a.prototype.constructor = a
};
cc.isFunction = function (a) {
    return "function" === typeof a
};
cc.isNumber = function (a) {
    return "number" === typeof a || "[object Number]" === Object.prototype.toString.call(a)
};
cc.isString = function (a) {
    return "string" === typeof a || "[object String]" === Object.prototype.toString.call(a)
};
cc.isArray = function (a) {
    return Array.isArray(a) || "object" === typeof a && "[object Array]" === Object.prototype.toString.call(a)
};
cc.isUndefined = function (a) {
    return "undefined" === typeof a
};
cc.isObject = function (a) {
    return "object" === typeof a && "[object Object]" === Object.prototype.toString.call(a)
};
cc.isCrossOrigin = function (a) {
    if (!a) return cc.log("invalid URL"), !1;
    var b = a.indexOf("://");
    if (-1 === b) return !1;
    b = a.indexOf("/", b + 3);
    return (-1 === b ? a : a.substring(0, b)) !== location.origin
};
cc.AsyncPool = function (a, b, c, d, f) {
    var g = this;
    g._finished = !1;
    g._srcObj = a;
    g._limit = b;
    g._pool = [];
    g._iterator = c;
    g._iteratorTarget = f;
    g._onEnd = d;
    g._onEndTarget = f;
    g._results = a instanceof Array ? [] : {};
    g._errors = a instanceof Array ? [] : {};
    cc.each(a, function (a, b) {
        g._pool.push({
            index: b,
            value: a
        })
    });
    g.size = g._pool.length;
    g.finishedSize = 0;
    g._workingSize = 0;
    g._limit = g._limit || g.size;
    g.onIterator = function (a, b) {
        g._iterator = a;
        g._iteratorTarget = b
    };
    g.onEnd = function (a, b) {
        g._onEnd = a;
        g._onEndTarget = b
    };
    g._handleItem = function () {
        var a =
            this;
        if (!(0 === a._pool.length || a._workingSize >= a._limit)) {
            var b = a._pool.shift(),
                c = b.value,
                d = b.index;
            a._workingSize++;
            a._iterator.call(a._iteratorTarget, c, d, function (b, c) {
                if (!a._finished)
                    if (b ? a._errors[this.index] = b : a._results[this.index] = c, a.finishedSize++, a._workingSize--, a.finishedSize === a.size) a.onEnd(0 === a._errors.length ? null : a._errors, a._results);
                    else a._handleItem()
            }.bind(b), a)
        }
    };
    g.flow = function () {
        if (0 === this._pool.length) this._onEnd && this._onEnd.call(this._onEndTarget, null, []);
        else
            for (var a =
                    0; a < this._limit; a++) this._handleItem()
    };
    g.onEnd = function (a, b) {
        g._finished = !0;
        if (g._onEnd) {
            var c = g._onEnd,
                d = g._onEndTarget;
            g._onEnd = null;
            g._onEndTarget = null;
            c.call(d, a, b)
        }
    }
};
cc.async = {
    series: function (a, b, c) {
        a = new cc.AsyncPool(a, 1, function (a, b, g) {
            a.call(c, g)
        }, b, c);
        a.flow();
        return a
    },
    parallel: function (a, b, c) {
        a = new cc.AsyncPool(a, 0, function (a, b, g) {
            a.call(c, g)
        }, b, c);
        a.flow();
        return a
    },
    waterfall: function (a, b, c) {
        var d = [],
            f = [null],
            g = new cc.AsyncPool(a, 1, function (b, g, n) {
                d.push(function (b) {
                    d = Array.prototype.slice.call(arguments, 1);
                    a.length - 1 === g && (f = f.concat(d));
                    n.apply(null, arguments)
                });
                b.apply(c, d)
            }, function (a) {
                if (b) {
                    if (a) return b.call(c, a);
                    b.apply(c, f)
                }
            });
        g.flow();
        return g
    },
    map: function (a, b, c, d) {
        var f = b;
        "object" === typeof b && (c = b.cb, d = b.iteratorTarget, f = b.iterator);
        a = new cc.AsyncPool(a, 0, f, c, d);
        a.flow();
        return a
    },
    mapLimit: function (a, b, c, d, f) {
        a = new cc.AsyncPool(a, b, c, d, f);
        a.flow();
        return a
    }
};
cc.path = {
    normalizeRE: /[^\.\/]+\/\.\.\//,
    join: function () {
        for (var a = arguments.length, b = "", c = 0; c < a; c++) b = (b + ("" === b ? "" : "/") + arguments[c]).replace(/(\/|\\\\)$/, "");
        return b
    },
    extname: function (a) {
        return (a = /(\.[^\.\/\?\\]*)(\?.*)?$/.exec(a)) ? a[1] : null
    },
    mainFileName: function (a) {
        if (a) {
            var b = a.lastIndexOf(".");
            if (-1 !== b) return a.substring(0, b)
        }
        return a
    },
    basename: function (a, b) {
        var c = a.indexOf("?");
        0 < c && (a = a.substring(0, c));
        c = /(\/|\\\\)([^(\/|\\\\)]+)$/g.exec(a.replace(/(\/|\\\\)$/, ""));
        if (!c) return null;
        c = c[2];
        return b && a.substring(a.length - b.length).toLowerCase() === b.toLowerCase() ? c.substring(0, c.length - b.length) : c
    },
    dirname: function (a) {
        return a.replace(/((.*)(\/|\\|\\\\))?(.*?\..*$)?/, "$2")
    },
    changeExtname: function (a, b) {
        b = b || "";
        var c = a.indexOf("?"),
            d = "";
        0 < c && (d = a.substring(c), a = a.substring(0, c));
        c = a.lastIndexOf(".");
        return 0 > c ? a + b + d : a.substring(0, c) + b + d
    },
    changeBasename: function (a, b, c) {
        if (0 === b.indexOf(".")) return this.changeExtname(a, b);
        var d = a.indexOf("?"),
            f = "";
        c = c ? this.extname(a) : "";
        0 < d && (f = a.substring(d),
            a = a.substring(0, d));
        d = a.lastIndexOf("/");
        return a.substring(0, 0 >= d ? 0 : d + 1) + b + c + f
    },
    _normalize: function (a) {
        var b = a = String(a);
        do b = a, a = a.replace(this.normalizeRE, ""); while (b.length !== a.length);
        return a
    }
};
cc.loader = function () {
    var a = {},
        b = {},
        c = {},
        d = {},
        f = {},
        g = /^(?:https?|ftp):\/\/\S*$/i;
    return {
        resPath: "",
        audioPath: "",
        cache: {},
        getXMLHttpRequest: function () {
            var a = window.XMLHttpRequest ? new window.XMLHttpRequest : new ActiveXObject("MSXML2.XMLHTTP");
            a.timeout = 1E4;
            void 0 === a.ontimeout && (a._timeoutId = -1);
            return a
        },
        _getArgs4Js: function (a) {
            var b = a[0],
                c = a[1],
                d = a[2],
                f = ["", null, null];
            if (1 === a.length) f[1] = b instanceof Array ? b : [b];
            else if (2 === a.length) "function" === typeof c ? (f[1] = b instanceof Array ? b : [b], f[2] = c) : (f[0] =
                b || "", f[1] = c instanceof Array ? c : [c]);
            else if (3 === a.length) f[0] = b || "", f[1] = c instanceof Array ? c : [c], f[2] = d;
            else throw Error("arguments error to load js!");
            return f
        },
        isLoading: function (a) {
            return void 0 !== f[a]
        },
        loadJs: function (b, c, d) {
            var f = this,
                g = f._getArgs4Js(arguments),
                v = g[0],
                x = g[1],
                g = g[2]; - 1 < navigator.userAgent.indexOf("Trident/5") ? f._loadJs4Dependency(v, x, 0, g) : cc.async.map(x, function (b, c, d) {
                b = cc.path.join(v, b);
                if (a[b]) return d(null);
                f._createScript(b, !1, d)
            }, g)
        },
        loadJsWithImg: function (a, b, c) {
            var d =
                this._loadJsImg(),
                f = this._getArgs4Js(arguments);
            this.loadJs(f[0], f[1], function (a) {
                if (a) throw Error(a);
                d.parentNode.removeChild(d);
                if (f[2]) f[2]()
            })
        },
        _createScript: function (b, c, d) {
            var f = document,
                g = document.createElement("script");
            g.async = c;
            a[b] = !0;
            cc.game.config.noCache && "string" === typeof b ? this._noCacheRex.test(b) ? g.src = b + "&_t=" + (new Date - 0) : g.src = b + "?_t=" + (new Date - 0) : g.src = b;
            g.addEventListener("load", function () {
                g.parentNode.removeChild(g);
                this.removeEventListener("load", arguments.callee,
                    !1);
                d()
            }, !1);
            g.addEventListener("error", function () {
                g.parentNode.removeChild(g);
                d("Load " + b + " failed!")
            }, !1);
            f.body.appendChild(g)
        },
        _loadJs4Dependency: function (a, b, c, d) {
            if (c >= b.length) d && d();
            else {
                var f = this;
                f._createScript(cc.path.join(a, b[c]), !1, function (g) {
                    if (g) return d(g);
                    f._loadJs4Dependency(a, b, c + 1, d)
                })
            }
        },
        _loadJsImg: function () {
            var a = document,
                b = a.getElementById("cocos2d_loadJsImg");
            if (!b) {
                b = document.createElement("img");
                cc._loadingImage && (b.src = cc._loadingImage);
                a = a.getElementById(cc.game.config.id);
                a.style.backgroundColor = "transparent";
                a.parentNode.appendChild(b);
                var c = getComputedStyle ? getComputedStyle(a) : a.currentStyle;
                c || (c = {
                    width: a.width,
                    height: a.height
                });
                b.style.left = a.offsetLeft + (parseFloat(c.width) - b.width) / 2 + "px";
                b.style.top = a.offsetTop + (parseFloat(c.height) - b.height) / 2 + "px";
                b.style.position = "absolute"
            }
            return b
        },
        loadTxt: function (a, b) {
            if (cc._isNodeJs) require("fs").readFile(a, function (a, c) {
                a ? b(a) : b(null, c.toString())
            });
            else {
                var c = this.getXMLHttpRequest(),
                    d = "load " + a + " failed!";
                c.open("GET",
                    a, !0);
                /msie/i.test(navigator.userAgent) && !/opera/i.test(navigator.userAgent) ? (c.setRequestHeader("Accept-Charset", "utf-8"), c.onreadystatechange = function () {
                    4 === c.readyState && (200 === c.status ? b(null, c.responseText) : b({
                        status: c.status,
                        errorMessage: d
                    }, null))
                }) : (c.overrideMimeType && c.overrideMimeType("text/plain; charset=utf-8"), c.onload = function () {
                        0 <= c._timeoutId && clearTimeout(c._timeoutId);
                        4 === c.readyState && (200 === c.status ? b(null, c.responseText) : b({
                            status: c.status,
                            errorMessage: d
                        }, null))
                    }, c.onerror =
                    function () {
                        b({
                            status: c.status,
                            errorMessage: d
                        }, null)
                    }, void 0 === c.ontimeout && (c._timeoutId = setTimeout(function () {
                        c.ontimeout()
                    }, c.timeout)), c.ontimeout = function () {
                        b({
                            status: c.status,
                            errorMessage: "Request timeout: " + d
                        }, null)
                    });
                c.send(null)
            }
        },
        loadCsb: function (a, b) {
            var c = cc.loader.getXMLHttpRequest(),
                d = "load " + a + " failed!";
            c.open("GET", a, !0);
            c.responseType = "arraybuffer";
            c.onload = function () {
                0 <= c._timeoutId && clearTimeout(c._timeoutId);
                var a = c.response;
                a && (window.msg = a);
                4 === c.readyState && (200 === c.status ?
                    b(null, c.response) : b({
                        status: c.status,
                        errorMessage: d
                    }, null))
            };
            c.onerror = function () {
                b({
                    status: c.status,
                    errorMessage: d
                }, null)
            };
            void 0 === c.ontimeout && (c._timeoutId = setTimeout(function () {
                c.ontimeout()
            }, c.timeout));
            c.ontimeout = function () {
                b({
                    status: c.status,
                    errorMessage: "Request timeout: " + d
                }, null)
            };
            c.send(null)
        },
        loadJson: function (a, b) {
            this.loadTxt(a, function (c, d) {
                if (c) b(c);
                else {
                    try {
                        var f = JSON.parse(d)
                    } catch (g) {
                        throw Error("parse json [" + a + "] failed : " + g);
                    }
                    b(null, f)
                }
            })
        },
        _checkIsImageURL: function (a) {
            return null !=
                /(\.png)|(\.jpg)|(\.bmp)|(\.jpeg)|(\.gif)/.exec(a)
        },
        loadImg: function (a, b, c) {
            var d = {
                isCrossOrigin: !0
            };
            void 0 !== c ? d.isCrossOrigin = void 0 === b.isCrossOrigin ? d.isCrossOrigin : b.isCrossOrigin : void 0 !== b && (c = b);
            var u = this.getRes(a);
            if (u) return c && c(null, u), u;
            if (b = f[a]) return b.callbacks.push(c), b.img;
            u = new Image;
            d.isCrossOrigin && "file://" !== location.origin && (u.crossOrigin = "Anonymous");
            var v = function () {
                    this.removeEventListener("load", v, !1);
                    this.removeEventListener("error", y, !1);
                    g.test(a) || (cc.loader.cache[a] =
                        u);
                    var b = f[a];
                    if (b) {
                        for (var c = b.callbacks, d = 0; d < c.length; ++d) {
                            var m = c[d];
                            m && m(null, u)
                        }
                        b.img = null;
                        delete f[a]
                    }
                },
                x = this,
                y = function () {
                    this.removeEventListener("load", v, !1);
                    this.removeEventListener("error", y, !1);
                    if (u.crossOrigin && "anonymous" === u.crossOrigin.toLowerCase()) d.isCrossOrigin = !1, x.release(a), cc.loader.loadImg(a, d, c);
                    else {
                        var b = f[a];
                        if (b) {
                            for (var g = b.callbacks, m = 0; m < g.length; ++m) {
                                var w = g[m];
                                w && w("load image failed")
                            }
                            b.img = null;
                            delete f[a]
                        }
                    }
                };
            f[a] = {
                img: u,
                callbacks: c ? [c] : []
            };
            u.addEventListener("load",
                v);
            u.addEventListener("error", y);
            u.src = a;
            return u
        },
        _loadResIterator: function (a, c, d) {
            var f = this,
                u = null,
                v = a.type;
            v ? (v = "." + v.toLowerCase(), u = a.src ? a.src : a.name + v) : (u = a, v = cc.path.extname(u));
            if (c = f.getRes(u)) return d(null, c);
            c = null;
            v && (c = b[v.toLowerCase()]);
            if (!c) return cc.error("loader for [" + v + "] not exists!"), d();
            v = u;
            g.test(u) || (v = c.getBasePath ? c.getBasePath() : f.resPath, v = f.getUrl(v, u));
            cc.game.config.noCache && "string" === typeof v && (v = f._noCacheRex.test(v) ? v + ("&_t=" + (new Date - 0)) : v + ("?_t=" +
                (new Date - 0)));
            c.load(v, u, a, function (a, b) {
                a ? (cc.log(a), f.cache[u] = null, delete f.cache[u], d({
                    status: 520,
                    errorMessage: a
                }, null)) : (f.cache[u] = b, d(null, b))
            })
        },
        _noCacheRex: /\?/,
        getUrl: function (a, d) {
            var f = cc.path;
            if (void 0 !== a && void 0 === d) {
                d = a;
                var g = f.extname(d),
                    g = g ? g.toLowerCase() : "";
                a = (g = b[g]) ? g.getBasePath ? g.getBasePath() : this.resPath : this.resPath
            }
            d = cc.path.join(a || "", d);
            if (d.match(/[\/(\\\\)]lang[\/(\\\\)]/i)) {
                if (c[d]) return c[d];
                f = f.extname(d) || "";
                d = c[d] = d.substring(0, d.length - f.length) + "_" + cc.sys.language +
                    f
            }
            return d
        },
        load: function (a, b, c) {
            var d = this,
                f = arguments.length;
            if (0 === f) throw Error("arguments error!");
            3 === f ? "function" === typeof b && (b = "function" === typeof c ? {
                trigger: b,
                cb: c
            } : {
                cb: b,
                cbTarget: c
            }) : 2 === f ? "function" === typeof b && (b = {
                cb: b
            }) : 1 === f && (b = {});
            a instanceof Array || (a = [a]);
            f = new cc.AsyncPool(a, cc.CONCURRENCY_HTTP_REQUEST_COUNT, function (a, c, f, g) {
                d._loadResIterator(a, c, function (a) {
                    var c = Array.prototype.slice.call(arguments, 1);
                    b.trigger && b.trigger.call(b.triggerTarget, c[0], g.size, g.finishedSize);
                    f(a,
                        c[0])
                })
            }, b.cb, b.cbTarget);
            f.flow();
            return f
        },
        _handleAliases: function (a, b) {
            var c = [],
                f;
            for (f in a) {
                var g = a[f];
                d[f] = g;
                c.push(g)
            }
            this.load(c, b)
        },
        loadAliases: function (a, b) {
            var c = this,
                d = c.getRes(a);
            d ? c._handleAliases(d.filenames, b) : c.load(a, function (a, d) {
                c._handleAliases(d[0].filenames, b)
            })
        },
        register: function (a, c) {
            if (a && c) {
                if ("string" === typeof a) return b[a.trim().toLowerCase()] = c;
                for (var d = 0, f = a.length; d < f; d++) b["." + a[d].trim().toLowerCase()] = c
            }
        },
        getRes: function (a) {
            return this.cache[a] || this.cache[d[a]]
        },
        _getAliase: function (a) {
            return d[a]
        },
        release: function (a) {
            var b = this.cache,
                c = f[a];
            c && (c.img = null, delete f[a]);
            delete b[a];
            delete b[d[a]];
            delete d[a]
        },
        releaseAll: function () {
            var a = this.cache,
                b;
            for (b in a) delete a[b];
            for (b in d) delete d[b]
        }
    }
}();
cc.formatStr = function () {
    var a = arguments,
        b = a.length;
    if (1 > b) return "";
    var c = a[0],
        d = !0;
    "object" === typeof c && (d = !1);
    for (var f = 1; f < b; ++f) {
        var g = a[f];
        if (d)
            for (;;) {
                var h = null;
                if ("number" === typeof g && (h = c.match(/(%d)|(%s)/))) {
                    c = c.replace(/(%d)|(%s)/, g);
                    break
                }
                c = (h = c.match(/%s/)) ? c.replace(/%s/, g) : c + ("    " + g);
                break
            } else c += "    " + g
    }
    return c
};
(function () {
    function a(a) {
        var b = cc.game.CONFIG_KEY,
            c = parseInt(a[b.renderMode]) || 0;
        if (isNaN(c) || 2 < c || 0 > c) a[b.renderMode] = 0;
        cc._renderType = cc.game.RENDER_TYPE_CANVAS;
        cc._supportRender = !1;
        0 === c ? cc.sys.capabilities.opengl ? (cc._renderType = cc.game.RENDER_TYPE_WEBGL, cc._supportRender = !0) : cc.sys.capabilities.canvas && (cc._renderType = cc.game.RENDER_TYPE_CANVAS, cc._supportRender = !0) : 1 === c && cc.sys.capabilities.canvas ? (cc._renderType = cc.game.RENDER_TYPE_CANVAS, cc._supportRender = !0) : 2 === c && cc.sys.capabilities.opengl &&
            (cc._renderType = cc.game.RENDER_TYPE_WEBGL, cc._supportRender = !0)
    }

    function b(a, c, d) {
        if (m[c]) return null;
        d = d || "";
        var f = [],
            g = a[c];
        if (!g) throw Error("can not find module [" + c + "]");
        c = cc.path;
        for (var h = 0, n = g.length; h < n; h++) {
            var p = g[h];
            if (!m[p]) {
                var B = c.extname(p);
                B ? ".js" === B.toLowerCase() && f.push(c.join(d, p)) : (B = b(a, p, d)) && (f = f.concat(B));
                m[p] = 1
            }
        }
        return f
    }

    function c(a) {
        cc._initDebugSetting && cc._initDebugSetting(a[cc.game.CONFIG_KEY.debugMode]);
        cc._engineLoaded = !0;
        console.log(cc.ENGINE_VERSION);
        p && p()
    }

    function d(a) {
        var d =
            a[cc.game.CONFIG_KEY.engineDir],
            f = cc.loader;
        if (cc.Class) c(a);
        else {
            var g = cc.path.join(d, "moduleConfig.json");
            f.loadJson(g, function (f, g) {
                if (f) throw Error(f);
                var h = a.modules || [],
                    m = g.module,
                    n = [];
                cc.sys.capabilities.opengl && 0 > h.indexOf("base4webgl") ? h.splice(0, 0, "base4webgl") : 0 > h.indexOf("core") && h.splice(0, 0, "core");
                for (var p = 0, y = h.length; p < y; p++) {
                    var x = b(m, h[p], d);
                    x && (n = n.concat(x))
                }
                cc.loader.loadJsWithImg(n, function (b) {
                    if (b) throw b;
                    c(a)
                })
            })
        }
    }

    function f() {
        this.removeEventListener("load", f, !1);
        d(cc.game.config)
    }
    var g = document.createElement("canvas"),
        h = document.createElement("canvas");
    cc.create3DContext = function (a, b) {
        for (var c = ["webgl", "experimental-webgl", "webkit-3d", "moz-webgl"], d = null, f = 0; f < c.length; ++f) {
            try {
                d = a.getContext(c[f], b)
            } catch (g) {}
            if (d) break
        }
        return d
    };
    (function () {
        cc.sys = {};
        var a = cc.sys;
        a.LANGUAGE_ENGLISH = "en";
        a.LANGUAGE_CHINESE = "zh";
        a.LANGUAGE_FRENCH = "fr";
        a.LANGUAGE_ITALIAN = "it";
        a.LANGUAGE_GERMAN = "de";
        a.LANGUAGE_SPANISH = "es";
        a.LANGUAGE_DUTCH = "du";
        a.LANGUAGE_RUSSIAN = "ru";
        a.LANGUAGE_KOREAN = "ko";
        a.LANGUAGE_JAPANESE = "ja";
        a.LANGUAGE_HUNGARIAN = "hu";
        a.LANGUAGE_PORTUGUESE = "pt";
        a.LANGUAGE_ARABIC = "ar";
        a.LANGUAGE_NORWEGIAN = "no";
        a.LANGUAGE_POLISH = "pl";
        a.LANGUAGE_UNKNOWN = "unkonwn";
        a.OS_IOS = "iOS";
        a.OS_ANDROID = "Android";
        a.OS_WINDOWS = "Windows";
        a.OS_MARMALADE = "Marmalade";
        a.OS_LINUX = "Linux";
        a.OS_BADA = "Bada";
        a.OS_BLACKBERRY = "Blackberry";
        a.OS_OSX = "OS X";
        a.OS_WP8 = "WP8";
        a.OS_WINRT = "WINRT";
        a.OS_UNKNOWN = "Unknown";
        a.UNKNOWN = -1;
        a.WIN32 = 0;
        a.LINUX = 1;
        a.MACOS = 2;
        a.ANDROID = 3;
        a.IPHONE = 4;
        a.IPAD = 5;
        a.BLACKBERRY = 6;
        a.NACL =
            7;
        a.EMSCRIPTEN = 8;
        a.TIZEN = 9;
        a.WINRT = 10;
        a.WP8 = 11;
        a.MOBILE_BROWSER = 100;
        a.DESKTOP_BROWSER = 101;
        a.BROWSER_TYPE_WECHAT = "wechat";
        a.BROWSER_TYPE_ANDROID = "androidbrowser";
        a.BROWSER_TYPE_IE = "ie";
        a.BROWSER_TYPE_QQ_APP = "qq";
        a.BROWSER_TYPE_QQ = "qqbrowser";
        a.BROWSER_TYPE_MOBILE_QQ = "mqqbrowser";
        a.BROWSER_TYPE_UC = "ucbrowser";
        a.BROWSER_TYPE_360 = "360browser";
        a.BROWSER_TYPE_BAIDU_APP = "baiduboxapp";
        a.BROWSER_TYPE_BAIDU = "baidubrowser";
        a.BROWSER_TYPE_MAXTHON = "maxthon";
        a.BROWSER_TYPE_OPERA = "opera";
        a.BROWSER_TYPE_OUPENG = "oupeng";
        a.BROWSER_TYPE_MIUI = "miuibrowser";
        a.BROWSER_TYPE_FIREFOX = "firefox";
        a.BROWSER_TYPE_SAFARI = "safari";
        a.BROWSER_TYPE_CHROME = "chrome";
        a.BROWSER_TYPE_LIEBAO = "liebao";
        a.BROWSER_TYPE_QZONE = "qzone";
        a.BROWSER_TYPE_SOUGOU = "sogou";
        a.BROWSER_TYPE_UNKNOWN = "unknown";
        a.isNative = !1;
        var b = window,
            c = b.navigator,
            d = document,
            f = d.documentElement,
            m = c.userAgent.toLowerCase();
        a.isMobile = /mobile|android|iphone|ipad/.test(m);
        a.platform = a.isMobile ? a.MOBILE_BROWSER : a.DESKTOP_BROWSER;
        var n = c.language,
            n = (n = n ? n : c.browserLanguage) ?
            n.split("-")[0] : a.LANGUAGE_ENGLISH;
        a.language = n;
        var p = !1,
            n = !1,
            B = "",
            F = 0,
            C = /android (\d+(?:\.\d+)+)/i.exec(m) || /android (\d+(?:\.\d+)+)/i.exec(c.platform);
        C && (p = !0, B = C[1] || "", F = parseInt(B) || 0);
        (C = /(iPad|iPhone|iPod).*OS ((\d+_?){2,3})/i.exec(m)) ? (n = !0, B = C[2] || "", F = parseInt(B) || 0) : /(iPhone|iPad|iPod)/.exec(c.platform) && (n = !0, B = "", F = 0);
        C = a.OS_UNKNOWN; - 1 !== c.appVersion.indexOf("Win") ? C = a.OS_WINDOWS : n ? C = a.OS_IOS : -1 !== c.appVersion.indexOf("Mac") ? C = a.OS_OSX : -1 !== c.appVersion.indexOf("X11") && -1 === c.appVersion.indexOf("Linux") ?
            C = a.OS_UNIX : p ? C = a.OS_ANDROID : -1 !== c.appVersion.indexOf("Linux") && (C = a.OS_LINUX);
        a.os = C;
        a.osVersion = B;
        a.osMainVersion = F;
        a.browserType = a.BROWSER_TYPE_UNKNOWN;
        (function () {
            var b = /qqbrowser|qq|chrome|safari|firefox|opr|oupeng|opera/i,
                c = /micromessenger|mqqbrowser|sogou|qzone|liebao|ucbrowser|360 aphone|360browser|baiduboxapp|baidubrowser|maxthon|mxbrowser|trident|miuibrowser/i.exec(m);
            c || (c = b.exec(m));
            b = c ? c[0] : a.BROWSER_TYPE_UNKNOWN;
            "micromessenger" === b ? b = a.BROWSER_TYPE_WECHAT : "safari" === b && p ? b = a.BROWSER_TYPE_ANDROID :
                "trident" === b ? b = a.BROWSER_TYPE_IE : "360 aphone" === b ? b = a.BROWSER_TYPE_360 : "mxbrowser" === b ? b = a.BROWSER_TYPE_MAXTHON : "opr" === b && (b = a.BROWSER_TYPE_OPERA);
            a.browserType = b
        })();
        a.browserVersion = "";
        (function () {
            var b = /(msie |rv:|firefox|chrome|ucbrowser|qq|oupeng|opera|opr|safari|miui)(mobile)?(browser)?\/?([\d.]+)/i,
                c = m.match(/(mqqbrowser|micromessenger|sogou|qzone|liebao|maxthon|mxbrowser|baidu)(mobile)?(browser)?\/?([\d.]+)/i);
            c || (c = m.match(b));
            a.browserVersion = c ? c[4] : ""
        })();
        n = window.devicePixelRatio || 1;
        a.windowPixelResolution = {
            width: n * (window.innerWidth || document.documentElement.clientWidth),
            height: n * (window.innerHeight || document.documentElement.clientHeight)
        };
        a._checkWebGLRenderMode = function () {
            if (cc._renderType !== cc.game.RENDER_TYPE_WEBGL) throw Error("This feature supports WebGL render mode only.");
        };
        a._supportCanvasNewBlendModes = function () {
            var a = g;
            a.width = 1;
            a.height = 1;
            a = a.getContext("2d");
            a.fillStyle = "#000";
            a.fillRect(0, 0, 1, 1);
            a.globalCompositeOperation = "multiply";
            var b = h;
            b.width = 1;
            b.height = 1;
            var c = b.getContext("2d");
            c.fillStyle = "#fff";
            c.fillRect(0, 0, 1, 1);
            a.drawImage(b, 0, 0, 1, 1);
            return 0 === a.getImageData(0, 0, 1, 1).data[0]
        }();
        cc.sys.isMobile && (n = document.createElement("style"), n.type = "text/css", document.body.appendChild(n), n.textContent = "body,canvas,div{ -moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;-khtml-user-select: none;-webkit-tap-highlight-color:rgba(0,0,0,0);}");
        try {
            var D = a.localStorage = b.localStorage;
            D.setItem("storage", "");
            D.removeItem("storage");
            D = null
        } catch (E) {
            D =
                function () {
                    cc.warn("Warning: localStorage isn't enabled. Please confirm browser cookie or privacy option")
                }, a.localStorage = {
                    getItem: D,
                    setItem: D,
                    removeItem: D,
                    clear: D
                }
        }
        D = !!g.getContext("2d");
        n = !1;
        if (b.WebGLRenderingContext) {
            B = document.createElement("CANVAS");
            try {
                if (cc.create3DContext(B) && (n = !0), n && (a.os === a.OS_IOS && 9 === a.osMainVersion) && (window.indexedDB || (n = !1)), n && a.os === a.OS_ANDROID) {
                    var G = parseFloat(a.browserVersion);
                    switch (a.browserType) {
                    case a.BROWSER_TYPE_MOBILE_QQ:
                    case a.BROWSER_TYPE_BAIDU:
                    case a.BROWSER_TYPE_BAIDU_APP:
                        n =
                            6.2 <= G ? !0 : !1;
                        break;
                    case a.BROWSER_TYPE_CHROME:
                        n = 30 <= G ? !0 : !1;
                        break;
                    case a.BROWSER_TYPE_ANDROID:
                        a.osMainVersion && 5 <= a.osMainVersion && (n = !0);
                        break;
                    case a.BROWSER_TYPE_UNKNOWN:
                    case a.BROWSER_TYPE_360:
                    case a.BROWSER_TYPE_MIUI:
                    case a.BROWSER_TYPE_UC:
                        n = !1
                    }
                }
            } catch (H) {}
            B = null
        }
        G = a.capabilities = {
            canvas: D,
            opengl: n
        };
        if (void 0 !== f.ontouchstart || void 0 !== d.ontouchstart || c.msPointerEnabled) G.touches = !0;
        void 0 !== f.onmouseup && (G.mouse = !0);
        void 0 !== f.onkeyup && (G.keyboard = !0);
        if (b.DeviceMotionEvent || b.DeviceOrientationEvent) G.accelerometer = !0;
        a.garbageCollect = function () {};
        a.dumpRoot = function () {};
        a.restartVM = function () {};
        a.cleanScript = function (a) {};
        a.isObjectValid = function (a) {
            return a ? !0 : !1
        };
        a.dump = function () {
            var a;
            a = "" + ("isMobile : " + this.isMobile + "\r\n");
            a += "language : " + this.language + "\r\n";
            a += "browserType : " + this.browserType + "\r\n";
            a += "browserVersion : " + this.browserVersion + "\r\n";
            a += "capabilities : " + JSON.stringify(this.capabilities) + "\r\n";
            a += "os : " + this.os + "\r\n";
            a += "osVersion : " + this.osVersion + "\r\n";
            a += "platform : " + this.platform +
                "\r\n";
            a += "Using " + (cc._renderType === cc.game.RENDER_TYPE_WEBGL ? "WEBGL" : "CANVAS") + " renderer.\r\n";
            cc.log(a)
        };
        a.openURL = function (a) {
            window.open(a)
        };
        a.now = function () {
            return Date.now ? Date.now() : +new Date
        }
    })();
    h = g = null;
    cc.log = cc.warn = cc.error = cc.assert = function () {};
    var m = {},
        n = !1,
        p = null;
    cc._engineLoaded = !1;
    cc.initEngine = function (b, c) {
        if (n) {
            var g = p;
            p = function () {
                g && g();
                c && c()
            }
        } else p = c, !cc.game.config && b ? cc.game.config = b : cc.game.config || cc.game._loadConfig(), b = cc.game.config, a(b), document.body ? d(b) : cc._addEventListener(window,
            "load", f, !1), n = !0
    }
})();
cc.game = {
    DEBUG_MODE_NONE: 0,
    DEBUG_MODE_INFO: 1,
    DEBUG_MODE_WARN: 2,
    DEBUG_MODE_ERROR: 3,
    DEBUG_MODE_INFO_FOR_WEB_PAGE: 4,
    DEBUG_MODE_WARN_FOR_WEB_PAGE: 5,
    DEBUG_MODE_ERROR_FOR_WEB_PAGE: 6,
    EVENT_HIDE: "game_on_hide",
    EVENT_SHOW: "game_on_show",
    EVENT_RESIZE: "game_on_resize",
    EVENT_RENDERER_INITED: "renderer_inited",
    RENDER_TYPE_CANVAS: 0,
    RENDER_TYPE_WEBGL: 1,
    RENDER_TYPE_OPENGL: 2,
    _eventHide: null,
    _eventShow: null,
    CONFIG_KEY: {
        width: "width",
        height: "height",
        engineDir: "engineDir",
        modules: "modules",
        debugMode: "debugMode",
        exposeClassName: "exposeClassName",
        showFPS: "showFPS",
        frameRate: "frameRate",
        id: "id",
        renderMode: "renderMode",
        jsList: "jsList"
    },
    _paused: !0,
    _configLoaded: !1,
    _prepareCalled: !1,
    _prepared: !1,
    _rendererInitialized: !1,
    _renderContext: null,
    _intervalId: null,
    _lastTime: null,
    _frameTime: null,
    frame: null,
    container: null,
    canvas: null,
    config: null,
    onStart: null,
    onStop: null,
    setFrameRate: function (a) {
        this.config[this.CONFIG_KEY.frameRate] = a;
        this._intervalId && window.cancelAnimationFrame(this._intervalId);
        this._intervalId = 0;
        this._paused = !0;
        this._setAnimFrame();
        this._runMainLoop()
    },
    step: function () {
        cc.director.mainLoop()
    },
    pause: function () {
        this._paused || (this._paused = !0, cc.audioEngine && cc.audioEngine._pausePlaying(), this._intervalId && window.cancelAnimationFrame(this._intervalId), this._intervalId = 0)
    },
    resume: function () {
        this._paused && (this._paused = !1, cc.audioEngine && cc.audioEngine._resumePlaying(), this._runMainLoop())
    },
    isPaused: function () {
        return this._paused
    },
    restart: function () {
        cc.director.popToSceneStackLevel(0);
        cc.audioEngine && cc.audioEngine.end();
        cc.game.onStart()
    },
    end: function () {
        close()
    },
    prepare: function (a) {
        var b = this,
            c = b.config,
            d = b.CONFIG_KEY;
        this._configLoaded ? this._prepared ? a && a() : this._prepareCalled || (cc._engineLoaded ? (this._prepareCalled = !0, this._initRenderer(c[d.width], c[d.height]), cc.view = cc.EGLView._getInstance(), cc.director = cc.Director._getInstance(), cc.director.setOpenGLView && cc.director.setOpenGLView(cc.view), cc.winSize = cc.director.getWinSize(), this._initEvents(), this._setAnimFrame(), this._runMainLoop(), (c = c[d.jsList]) ? cc.loader.loadJsWithImg(c,
            function (c) {
                if (c) throw Error(c);
                b._prepared = !0;
                a && a()
            }) : a && a()) : cc.initEngine(this.config, function () {
            b.prepare(a)
        })) : this._loadConfig(function () {
            b.prepare(a)
        })
    },
    run: function (a, b) {
        "function" === typeof a ? cc.game.onStart = a : (a && ("string" === typeof a ? (cc.game.config || this._loadConfig(), cc.game.config[cc.game.CONFIG_KEY.id] = a) : cc.game.config = a), "function" === typeof b && (cc.game.onStart = b));
        this.prepare(cc.game.onStart && cc.game.onStart.bind(cc.game))
    },
    _setAnimFrame: function () {
        this._lastTime = new Date;
        var a = cc.game.config[cc.game.CONFIG_KEY.frameRate];
        this._frameTime = 1E3 / a;
        60 !== a && 30 !== a ? (window.requestAnimFrame = this._stTime, window.cancelAnimationFrame = this._ctTime) : (window.requestAnimFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || this._stTime, window.cancelAnimationFrame = window.cancelAnimationFrame || window.cancelRequestAnimationFrame || window.msCancelRequestAnimationFrame || window.mozCancelRequestAnimationFrame || window.oCancelRequestAnimationFrame ||
            window.webkitCancelRequestAnimationFrame || window.msCancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.oCancelAnimationFrame || this._ctTime)
    },
    _stTime: function (a) {
        var b = (new Date).getTime(),
            c = Math.max(0, cc.game._frameTime - (b - cc.game._lastTime)),
            d = window.setTimeout(function () {
                a()
            }, c);
        cc.game._lastTime = b + c;
        return d
    },
    _ctTime: function (a) {
        window.clearTimeout(a)
    },
    _runMainLoop: function () {
        var a = this,
            b, c = a.config,
            d = a.CONFIG_KEY,
            f = cc.director,
            g = !0,
            h = c[d.frameRate];
        f.setDisplayStats(c[d.showFPS]);
        b = function () {
            a._paused || (30 === h && (g = !g) || f.mainLoop(), a._intervalId = window.requestAnimFrame(b))
        };
        a._intervalId = window.requestAnimFrame(b);
        a._paused = !1
    },
    _loadConfig: function (a) {
        var b = this.config || document.ccConfig;
        if (b) this._initConfig(b), a && a();
        else {
            for (var c = document.getElementsByTagName("script"), d = 0; d < c.length && !(b = c[d].getAttribute("cocos"), "" === b || b); d++);
            var f = this,
                b = function (b, c) {
                    var d = JSON.parse(c);
                    f._initConfig(d);
                    a && a()
                };
            if (d < c.length) {
                if (c = c[d].src) c = /(.*)\//.exec(c)[0],
                    cc.loader.resPath = c, c = cc.path.join(c, "project.json");
                cc.loader.loadTxt(c, b)
            }
            cc.loader.loadTxt("project.json", b)
        }
    },
    _initConfig: function (a) {
        var b = this.CONFIG_KEY,
            c = a[b.modules];
        a[b.showFPS] = "undefined" === typeof a[b.showFPS] ? !0 : a[b.showFPS];
        a[b.engineDir] = a[b.engineDir] || "frameworks/cocos2d-html5";
        null == a[b.debugMode] && (a[b.debugMode] = 0);
        a[b.exposeClassName] = !!a[b.exposeClassName];
        a[b.frameRate] = a[b.frameRate] || 60;
        null == a[b.renderMode] && (a[b.renderMode] = 0);
        null == a[b.registerSystemEvent] && (a[b.registerSystemEvent] = !0);
        c && 0 > c.indexOf("core") && c.splice(0, 0, "core");
        c && (a[b.modules] = c);
        this.config = a;
        this._configLoaded = !0
    },
    _initRenderer: function (a, b) {
        if (!this._rendererInitialized) {
            if (!cc._supportRender) throw Error("The renderer doesn't support the renderMode " + this.config[this.CONFIG_KEY.renderMode]);
            var c = this.config[cc.game.CONFIG_KEY.id],
                d = window,
                c = cc.$(c) || cc.$("#" + c),
                f, g;
            "CANVAS" === c.tagName ? (a = a || c.width, b = b || c.height, this.canvas = cc._canvas = f = c, this.container = cc.container = g = document.createElement("DIV"), f.parentNode &&
                f.parentNode.insertBefore(g, f)) : ("DIV" !== c.tagName && cc.log("Warning: target element is not a DIV or CANVAS"), a = a || c.clientWidth, b = b || c.clientHeight, this.canvas = cc._canvas = f = document.createElement("CANVAS"), this.container = cc.container = g = document.createElement("DIV"), c.appendChild(g));
            g.setAttribute("id", "Cocos2dGameContainer");
            g.appendChild(f);
            this.frame = g.parentNode === document.body ? document.documentElement : g.parentNode;
            f.addClass("gameCanvas");
            f.setAttribute("width", a || 480);
            f.setAttribute("height",
                b || 320);
            f.setAttribute("tabindex", 99);
            cc._renderType === cc.game.RENDER_TYPE_WEBGL && (this._renderContext = cc._renderContext = cc.webglContext = cc.create3DContext(f, {
                stencil: !0,
                alpha: !1
            }));
            this._renderContext ? (cc.renderer = cc.rendererWebGL, d.gl = this._renderContext, cc.renderer.init(), cc._drawingUtil = new cc.DrawingPrimitiveWebGL(this._renderContext), cc.textureCache._initializingRenderer(), cc.glExt = {}, cc.glExt.instanced_arrays = d.gl.getExtension("ANGLE_instanced_arrays"), cc.glExt.element_uint = d.gl.getExtension("OES_element_index_uint")) :
                (cc._renderType = cc.game.RENDER_TYPE_CANVAS, cc.renderer = cc.rendererCanvas, this._renderContext = cc._renderContext = new cc.CanvasContextWrapper(f.getContext("2d")), cc._drawingUtil = cc.DrawingPrimitiveCanvas ? new cc.DrawingPrimitiveCanvas(this._renderContext) : null);
            cc._gameDiv = g;
            cc.game.canvas.oncontextmenu = function () {
                if (!cc._isContextMenuEnable) return !1
            };
            this.dispatchEvent(this.EVENT_RENDERER_INITED, !0);
            this._rendererInitialized = !0
        }
    },
    _initEvents: function () {
        var a = window,
            b;
        this._eventHide = this._eventHide ||
            new cc.EventCustom(this.EVENT_HIDE);
        this._eventHide.setUserData(this);
        this._eventShow = this._eventShow || new cc.EventCustom(this.EVENT_SHOW);
        this._eventShow.setUserData(this);
        this.config[this.CONFIG_KEY.registerSystemEvent] && cc.inputManager.registerSystemEvent(this.canvas);
        cc.isUndefined(document.hidden) ? cc.isUndefined(document.mozHidden) ? cc.isUndefined(document.msHidden) ? cc.isUndefined(document.webkitHidden) || (b = "webkitHidden") : b = "msHidden" : b = "mozHidden" : b = "hidden";
        var c = ["visibilitychange", "mozvisibilitychange",
                "msvisibilitychange", "webkitvisibilitychange", "qbrowserVisibilityChange"
            ],
            d = function () {
                cc.eventManager && cc.game._eventHide && cc.eventManager.dispatchEvent(cc.game._eventHide)
            },
            f = function () {
                cc.eventManager && cc.game._eventShow && cc.eventManager.dispatchEvent(cc.game._eventShow)
            };
        if (b)
            for (var g = 0; g < c.length; g++) document.addEventListener(c[g], function (a) {
                var c = document[b];
                (c = c || a.hidden) ? d(): f()
            }, !1);
        else a.addEventListener("blur", d, !1), a.addEventListener("focus", f, !1); - 1 < navigator.userAgent.indexOf("MicroMessenger") &&
            (a.onfocus = function () {
                f()
            });
        "onpageshow" in window && "onpagehide" in window && (a.addEventListener("pagehide", d, !1), a.addEventListener("pageshow", f, !1));
        cc.eventManager.addCustomListener(cc.game.EVENT_HIDE, function () {
            cc.game.pause()
        });
        cc.eventManager.addCustomListener(cc.game.EVENT_SHOW, function () {
            cc.game.resume()
        })
    }
};
Function.prototype.bind = Function.prototype.bind || function (a) {
    if (!cc.isFunction(this)) throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
    var b = Array.prototype.slice.call(arguments, 1),
        c = this,
        d = function () {},
        f = function () {
            return c.apply(this instanceof d && a ? this : a, b.concat(Array.prototype.slice.call(arguments)))
        };
    d.prototype = this.prototype;
    f.prototype = new d;
    return f
};
cc.EventHelper = function () {};
cc.EventHelper.prototype = {
    constructor: cc.EventHelper,
    apply: function (a) {
        a.addEventListener = cc.EventHelper.prototype.addEventListener;
        a.hasEventListener = cc.EventHelper.prototype.hasEventListener;
        a.removeEventListener = cc.EventHelper.prototype.removeEventListener;
        a.dispatchEvent = cc.EventHelper.prototype.dispatchEvent
    },
    addEventListener: function (a, b, c) {
        if ("load" === a && this._textureLoaded) setTimeout(function () {
            b.call(c)
        }, 0);
        else {
            void 0 === this._listeners && (this._listeners = {});
            var d = this._listeners;
            void 0 ===
                d[a] && (d[a] = []);
            this.hasEventListener(a, b, c) || d[a].push({
                callback: b,
                eventTarget: c
            })
        }
    },
    hasEventListener: function (a, b, c) {
        if (void 0 === this._listeners) return !1;
        var d = this._listeners;
        if (void 0 !== d[a]) {
            a = 0;
            for (var f = d.length; a < f; a++) {
                var g = d[a];
                if (g.callback === b && g.eventTarget === c) return !0
            }
        }
        return !1
    },
    removeEventListener: function (a, b, c) {
        if (void 0 !== this._listeners && (a = this._listeners[a], void 0 !== a))
            for (var d = 0; d < a.length;) {
                var f = a[d];
                f.eventTarget === c && f.callback === b ? a.splice(d, 1) : d++
            }
    },
    removeEventTarget: function (a,
        b, c) {
        if (void 0 !== this._listeners && (a = this._listeners[a], void 0 !== a))
            for (b = 0; b < a.length;) a[b].eventTarget === c ? a.splice(b, 1) : b++
    },
    dispatchEvent: function (a, b) {
        if (void 0 !== this._listeners) {
            null == b && (b = !0);
            var c = this._listeners[a];
            if (void 0 !== c) {
                for (var d = [], f = c.length, g = 0; g < f; g++) d[g] = c[g];
                for (g = 0; g < f; g++) d[g].callback.call(d[g].eventTarget, this);
                b && (c.length = 0)
            }
        }
    }
};
cc.EventHelper.prototype.apply(cc.game);
cc._LogInfos = {
    ActionManager_addAction: "cc.ActionManager.addAction(): action must be non-null",
    ActionManager_removeAction: "cocos2d: removeAction: Target not found",
    ActionManager_removeActionByTag: "cc.ActionManager.removeActionByTag(): an invalid tag",
    ActionManager_removeActionByTag_2: "cc.ActionManager.removeActionByTag(): target must be non-null",
    ActionManager_getActionByTag: "cc.ActionManager.getActionByTag(): an invalid tag",
    ActionManager_getActionByTag_2: "cocos2d : getActionByTag(tag = %s): Action not found",
    configuration_dumpInfo: "cocos2d: **** WARNING **** CC_ENABLE_PROFILERS is defined. Disable it when you finish profiling (from ccConfig.js)",
    configuration_loadConfigFile: "Expected 'data' dict, but not found. Config file: %s",
    configuration_loadConfigFile_2: "Please load the resource first : %s",
    Director_resume: "cocos2d: Director: Error in gettimeofday",
    Director_setProjection: "cocos2d: Director: unrecognized projection",
    Director_popToSceneStackLevel: "cocos2d: Director: unrecognized projection",
    Director_popToSceneStackLevel_2: "cocos2d: Director: Error in gettimeofday",
    Director_popScene: "running scene should not null",
    Director_pushScene: "the scene should not null",
    arrayVerifyType: "element type is wrong!",
    Scheduler_scheduleCallbackForTarget: "CCSheduler#scheduleCallback. Callback already scheduled. Updating interval from:%s to %s",
    Scheduler_scheduleCallbackForTarget_2: "cc.scheduler.scheduleCallbackForTarget(): callback_fn should be non-null.",
    Scheduler_scheduleCallbackForTarget_3: "cc.scheduler.scheduleCallbackForTarget(): target should be non-null.",
    Scheduler_pauseTarget: "cc.Scheduler.pauseTarget():target should be non-null",
    Scheduler_resumeTarget: "cc.Scheduler.resumeTarget():target should be non-null",
    Scheduler_isTargetPaused: "cc.Scheduler.isTargetPaused():target should be non-null",
    Node_getZOrder: "getZOrder is deprecated. Please use getLocalZOrder instead.",
    Node_setZOrder: "setZOrder is deprecated. Please use setLocalZOrder instead.",
    Node_getRotation: "RotationX != RotationY. Don't know which one to return",
    Node_getScale: "ScaleX != ScaleY. Don't know which one to return",
    Node_addChild: "An Node can't be added as a child of itself.",
    Node_addChild_2: "child already added. It can't be added again",
    Node_addChild_3: "child must be non-null",
    Node_removeFromParentAndCleanup: "removeFromParentAndCleanup is deprecated. Use removeFromParent instead",
    Node_boundingBox: "boundingBox is deprecated. Use getBoundingBox instead",
    Node_removeChildByTag: "argument tag is an invalid tag",
    Node_removeChildByTag_2: "cocos2d: removeChildByTag(tag = %s): child not found!",
    Node_removeAllChildrenWithCleanup: "removeAllChildrenWithCleanup is deprecated. Use removeAllChildren instead",
    Node_stopActionByTag: "cc.Node.stopActionBy(): argument tag an invalid tag",
    Node_getActionByTag: "cc.Node.getActionByTag(): argument tag is an invalid tag",
    Node_resumeSchedulerAndActions: "resumeSchedulerAndActions is deprecated, please use resume instead.",
    Node_pauseSchedulerAndActions: "pauseSchedulerAndActions is deprecated, please use pause instead.",
    Node__arrayMakeObjectsPerformSelector: "Unknown callback function",
    Node_reorderChild: "cc.Node.reorderChild(): child must be non-null",
    Node_reorderChild_2: "cc.Node.reorderChild(): this child is not in children list",
    Node_runAction: "cc.Node.runAction(): action must be non-null",
    Node_schedule: "callback function must be non-null",
    Node_schedule_2: "interval must be positive",
    Node_initWithTexture: "cocos2d: Could not initialize cc.AtlasNode. Invalid Texture.",
    AtlasNode_updateAtlasValues: "cc.AtlasNode.updateAtlasValues(): Shall be overridden in subclasses",
    AtlasNode_initWithTileFile: "",
    AtlasNode__initWithTexture: "cocos2d: Could not initialize cc.AtlasNode. Invalid Texture.",
    _EventListenerKeyboard_checkAvailable: "cc._EventListenerKeyboard.checkAvailable(): Invalid EventListenerKeyboard!",
    _EventListenerTouchOneByOne_checkAvailable: "cc._EventListenerTouchOneByOne.checkAvailable(): Invalid EventListenerTouchOneByOne!",
    _EventListenerTouchAllAtOnce_checkAvailable: "cc._EventListenerTouchAllAtOnce.checkAvailable(): Invalid EventListenerTouchAllAtOnce!",
    _EventListenerAcceleration_checkAvailable: "cc._EventListenerAcceleration.checkAvailable(): _onAccelerationEvent must be non-nil",
    EventListener_create: "Invalid parameter.",
    __getListenerID: "Don't call this method if the event is for touch.",
    eventManager__forceAddEventListener: "Invalid scene graph priority!",
    eventManager_addListener: "0 priority is forbidden for fixed priority since it's used for scene graph based priority.",
    eventManager_removeListeners: "Invalid listener type!",
    eventManager_setPriority: "Can't set fixed priority with scene graph based listener.",
    eventManager_addListener_2: "Invalid parameters.",
    eventManager_addListener_3: "listener must be a cc.EventListener object when adding a fixed priority listener",
    eventManager_addListener_4: "The listener has been registered, please don't register it again.",
    LayerMultiplex_initWithLayers: "parameters should not be ending with null in Javascript",
    LayerMultiplex_switchTo: "Invalid index in MultiplexLayer switchTo message",
    LayerMultiplex_switchToAndReleaseMe: "Invalid index in MultiplexLayer switchTo message",
    LayerMultiplex_addLayer: "cc.Layer.addLayer(): layer should be non-null",
    EGLView_setDesignResolutionSize: "Resolution not valid",
    EGLView_setDesignResolutionSize_2: "should set resolutionPolicy",
    inputManager_handleTouchesBegin: "The touches is more than MAX_TOUCHES, nUnusedIndex = %s",
    swap: "cc.swap is being modified from original macro, please check usage",
    checkGLErrorDebug: "WebGL error %s",
    animationCache__addAnimationsWithDictionary: "cocos2d: cc.AnimationCache: No animations were found in provided dictionary.",
    animationCache__addAnimationsWithDictionary_2: "cc.AnimationCache. Invalid animation format",
    animationCache_addAnimations: "cc.AnimationCache.addAnimations(): File could not be found",
    animationCache__parseVersion1: "cocos2d: cc.AnimationCache: Animation '%s' found in dictionary without any frames - cannot add to animation cache.",
    animationCache__parseVersion1_2: "cocos2d: cc.AnimationCache: Animation '%s' refers to frame '%s' which is not currently in the cc.SpriteFrameCache. This frame will not be added to the animation.",
    animationCache__parseVersion1_3: "cocos2d: cc.AnimationCache: None of the frames for animation '%s' were found in the cc.SpriteFrameCache. Animation is not being added to the Animation Cache.",
    animationCache__parseVersion1_4: "cocos2d: cc.AnimationCache: An animation in your dictionary refers to a frame which is not in the cc.SpriteFrameCache. Some or all of the frames for the animation '%s' may be missing.",
    animationCache__parseVersion2: "cocos2d: CCAnimationCache: Animation '%s' found in dictionary without any frames - cannot add to animation cache.",
    animationCache__parseVersion2_2: "cocos2d: cc.AnimationCache: Animation '%s' refers to frame '%s' which is not currently in the cc.SpriteFrameCache. This frame will not be added to the animation.",
    animationCache_addAnimations_2: "cc.AnimationCache.addAnimations(): Invalid texture file name",
    Sprite_ignoreAnchorPointForPosition: "cc.Sprite.ignoreAnchorPointForPosition(): it is invalid in cc.Sprite when using SpriteBatchNode",
    Sprite_setDisplayFrameWithAnimationName: "cc.Sprite.setDisplayFrameWithAnimationName(): Frame not found",
    Sprite_setDisplayFrameWithAnimationName_2: "cc.Sprite.setDisplayFrameWithAnimationName(): Invalid frame index",
    Sprite_setDisplayFrame: "setDisplayFrame is deprecated, please use setSpriteFrame instead.",
    Sprite__updateBlendFunc: "cc.Sprite._updateBlendFunc(): _updateBlendFunc doesn't work when the sprite is rendered using a cc.CCSpriteBatchNode",
    Sprite_initWithSpriteFrame: "cc.Sprite.initWithSpriteFrame(): spriteFrame should be non-null",
    Sprite_initWithSpriteFrameName: "cc.Sprite.initWithSpriteFrameName(): spriteFrameName should be non-null",
    Sprite_initWithSpriteFrameName1: " is null, please check.",
    Sprite_initWithFile: "cc.Sprite.initWithFile(): filename should be non-null",
    Sprite_setDisplayFrameWithAnimationName_3: "cc.Sprite.setDisplayFrameWithAnimationName(): animationName must be non-null",
    Sprite_addChild: "cc.Sprite.addChild(): cc.Sprite only supports cc.Sprites as children when using cc.SpriteBatchNode",
    Sprite_addChild_2: "cc.Sprite.addChild(): cc.Sprite only supports a sprite using same texture as children when using cc.SpriteBatchNode",
    Sprite_addChild_3: "cc.Sprite.addChild(): child should be non-null",
    Sprite_setTexture: "cc.Sprite.texture setter: Batched sprites should use the same texture as the batchnode",
    Sprite_updateQuadFromSprite: "cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",
    Sprite_insertQuadFromSprite: "cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",
    Sprite_addChild_4: "cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",
    Sprite_addChild_5: "cc.SpriteBatchNode.addChild(): cc.Sprite is not using the same texture",
    Sprite_initWithTexture: "Sprite.initWithTexture(): Argument must be non-nil ",
    Sprite_setSpriteFrame: "Invalid spriteFrameName",
    Sprite_setTexture_2: "Invalid argument: cc.Sprite.texture setter expects a CCTexture2D.",
    Sprite_updateQuadFromSprite_2: "cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",
    Sprite_insertQuadFromSprite_2: "cc.SpriteBatchNode.insertQuadFromSprite(): sprite should be non-null",
    SpriteBatchNode_addSpriteWithoutQuad: "cc.SpriteBatchNode.addQuadFromSprite(): SpriteBatchNode only supports cc.Sprites as children",
    SpriteBatchNode_increaseAtlasCapacity: "cocos2d: CCSpriteBatchNode: resizing TextureAtlas capacity from %s to %s.",
    SpriteBatchNode_increaseAtlasCapacity_2: "cocos2d: WARNING: Not enough memory to resize the atlas",
    SpriteBatchNode_reorderChild: "cc.SpriteBatchNode.addChild(): Child doesn't belong to Sprite",
    SpriteBatchNode_removeChild: "cc.SpriteBatchNode.addChild(): sprite batch node should contain the child",
    SpriteBatchNode_addSpriteWithoutQuad_2: "cc.SpriteBatchNode.addQuadFromSprite(): child should be non-null",
    SpriteBatchNode_reorderChild_2: "cc.SpriteBatchNode.addChild(): child should be non-null",
    spriteFrameCache__getFrameConfig: "cocos2d: WARNING: originalWidth/Height not found on the cc.SpriteFrame. AnchorPoint won't work as expected. Regenrate the .plist",
    spriteFrameCache_addSpriteFrames: "cocos2d: WARNING: an alias with name %s already exists",
    spriteFrameCache__checkConflict: "cocos2d: WARNING: Sprite frame: %s has already been added by another source, please fix name conflit",
    spriteFrameCache_getSpriteFrame: "cocos2d: cc.SpriteFrameCahce: Frame %s not found",
    spriteFrameCache__getFrameConfig_2: "Please load the resource first : %s",
    spriteFrameCache_addSpriteFrames_2: "cc.SpriteFrameCache.addSpriteFrames(): plist should be non-null",
    spriteFrameCache_addSpriteFrames_3: "Argument must be non-nil",
    CCSpriteBatchNode_updateQuadFromSprite: "cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",
    CCSpriteBatchNode_insertQuadFromSprite: "cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",
    CCSpriteBatchNode_addChild: "cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",
    CCSpriteBatchNode_initWithTexture: "Sprite.initWithTexture(): Argument must be non-nil ",
    CCSpriteBatchNode_addChild_2: "cc.Sprite.addChild(): child should be non-null",
    CCSpriteBatchNode_setSpriteFrame: "Invalid spriteFrameName",
    CCSpriteBatchNode_setTexture: "Invalid argument: cc.Sprite texture setter expects a CCTexture2D.",
    CCSpriteBatchNode_updateQuadFromSprite_2: "cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",
    CCSpriteBatchNode_insertQuadFromSprite_2: "cc.SpriteBatchNode.insertQuadFromSprite(): sprite should be non-null",
    CCSpriteBatchNode_addChild_3: "cc.SpriteBatchNode.addChild(): child should be non-null",
    TextureAtlas_initWithFile: "cocos2d: Could not open file: %s",
    TextureAtlas_insertQuad: "cc.TextureAtlas.insertQuad(): invalid totalQuads",
    TextureAtlas_initWithTexture: "cc.TextureAtlas.initWithTexture():texture should be non-null",
    TextureAtlas_updateQuad: "cc.TextureAtlas.updateQuad(): quad should be non-null",
    TextureAtlas_updateQuad_2: "cc.TextureAtlas.updateQuad(): Invalid index",
    TextureAtlas_insertQuad_2: "cc.TextureAtlas.insertQuad(): Invalid index",
    TextureAtlas_insertQuads: "cc.TextureAtlas.insertQuad(): Invalid index + amount",
    TextureAtlas_insertQuadFromIndex: "cc.TextureAtlas.insertQuadFromIndex(): Invalid newIndex",
    TextureAtlas_insertQuadFromIndex_2: "cc.TextureAtlas.insertQuadFromIndex(): Invalid fromIndex",
    TextureAtlas_removeQuadAtIndex: "cc.TextureAtlas.removeQuadAtIndex(): Invalid index",
    TextureAtlas_removeQuadsAtIndex: "cc.TextureAtlas.removeQuadsAtIndex(): index + amount out of bounds",
    TextureAtlas_moveQuadsFromIndex: "cc.TextureAtlas.moveQuadsFromIndex(): move is out of bounds",
    TextureAtlas_moveQuadsFromIndex_2: "cc.TextureAtlas.moveQuadsFromIndex(): Invalid newIndex",
    TextureAtlas_moveQuadsFromIndex_3: "cc.TextureAtlas.moveQuadsFromIndex(): Invalid oldIndex",
    textureCache_addPVRTCImage: "TextureCache:addPVRTCImage does not support on HTML5",
    textureCache_addETCImage: "TextureCache:addPVRTCImage does not support on HTML5",
    textureCache_textureForKey: "textureForKey is deprecated. Please use getTextureForKey instead.",
    textureCache_addPVRImage: "addPVRImage does not support on HTML5",
    textureCache_addUIImage: "cocos2d: Couldn't add UIImage in TextureCache",
    textureCache_dumpCachedTextureInfo: "cocos2d: '%s' id=%s %s x %s",
    textureCache_dumpCachedTextureInfo_2: "cocos2d: '%s' id= HTMLCanvasElement %s x %s",
    textureCache_dumpCachedTextureInfo_3: "cocos2d: TextureCache dumpDebugInfo: %s textures, HTMLCanvasElement for %s KB (%s MB)",
    textureCache_addUIImage_2: "cc.Texture.addUIImage(): image should be non-null",
    Texture2D_initWithETCFile: "initWithETCFile does not support on HTML5",
    Texture2D_initWithPVRFile: "initWithPVRFile does not support on HTML5",
    Texture2D_initWithPVRTCData: "initWithPVRTCData does not support on HTML5",
    Texture2D_addImage: "cc.Texture.addImage(): path should be non-null",
    Texture2D_initWithImage: "cocos2d: cc.Texture2D. Can't create Texture. UIImage is nil",
    Texture2D_initWithImage_2: "cocos2d: WARNING: Image (%s x %s) is bigger than the supported %s x %s",
    Texture2D_initWithString: "initWithString isn't supported on cocos2d-html5",
    Texture2D_initWithETCFile_2: "initWithETCFile does not support on HTML5",
    Texture2D_initWithPVRFile_2: "initWithPVRFile does not support on HTML5",
    Texture2D_initWithPVRTCData_2: "initWithPVRTCData does not support on HTML5",
    Texture2D_bitsPerPixelForFormat: "bitsPerPixelForFormat: %s, cannot give useful result, it's a illegal pixel format",
    Texture2D__initPremultipliedATextureWithImage: "cocos2d: cc.Texture2D: Using RGB565 texture since image has no alpha",
    Texture2D_addImage_2: "cc.Texture.addImage(): path should be non-null",
    Texture2D_initWithData: "NSInternalInconsistencyException",
    MissingFile: "Missing file: %s",
    radiansToDegress: "cc.radiansToDegress() should be called cc.radiansToDegrees()",
    RectWidth: "Rect width exceeds maximum margin: %s",
    RectHeight: "Rect height exceeds maximum margin: %s",
    EventManager__updateListeners: "If program goes here, there should be event in dispatch.",
    EventManager__updateListeners_2: "_inDispatch should be 1 here."
};
cc._logToWebPage = function (a) {
    if (cc._canvas) {
        var b = cc._logList,
            c = document;
        if (!b) {
            var d = c.createElement("Div"),
                b = d.style;
            d.setAttribute("id", "logInfoDiv");
            cc._canvas.parentNode.appendChild(d);
            d.setAttribute("width", "200");
            d.setAttribute("height", cc._canvas.height);
            b.zIndex = "99999";
            b.position = "absolute";
            b.top = "0";
            b.left = "0";
            b = cc._logList = c.createElement("textarea");
            c = b.style;
            b.setAttribute("rows", "20");
            b.setAttribute("cols", "30");
            b.setAttribute("disabled", !0);
            d.appendChild(b);
            c.backgroundColor = "transparent";
            c.borderBottom = "1px solid #cccccc";
            c.borderRightWidth = "0px";
            c.borderLeftWidth = "0px";
            c.borderTopWidth = "0px";
            c.borderTopStyle = "none";
            c.borderRightStyle = "none";
            c.borderLeftStyle = "none";
            c.padding = "0px";
            c.margin = 0
        }
        b.value = b.value + a + "\r\n";
        b.scrollTop = b.scrollHeight
    }
};
cc._formatString = function (a) {
    if (cc.isObject(a)) try {
        return JSON.stringify(a)
    } catch (b) {
        return ""
    } else return a
};
cc._initDebugSetting = function (a) {
    var b = cc.game;
    if (a !== b.DEBUG_MODE_NONE) {
        var c;
        a > b.DEBUG_MODE_ERROR ? (c = cc._logToWebPage.bind(cc), cc.error = function () {
            c("ERROR :  " + cc.formatStr.apply(cc, arguments))
        }, cc.assert = function (a, b) {
            if (!a && b) {
                for (var g = 2; g < arguments.length; g++) b = b.replace(/(%s)|(%d)/, cc._formatString(arguments[g]));
                c("Assert: " + b)
            }
        }, a !== b.DEBUG_MODE_ERROR_FOR_WEB_PAGE && (cc.warn = function () {
            c("WARN :  " + cc.formatStr.apply(cc, arguments))
        }), a === b.DEBUG_MODE_INFO_FOR_WEB_PAGE && (cc.log = function () {
            c(cc.formatStr.apply(cc,
                arguments))
        })) : console && console.log.apply && (cc.error = Function.prototype.bind.call(console.error, console), cc.assert = console.assert ? Function.prototype.bind.call(console.assert, console) : function (a, b) {
            if (!a && b) {
                for (var c = 2; c < arguments.length; c++) b = b.replace(/(%s)|(%d)/, cc._formatString(arguments[c]));
                throw Error(b);
            }
        }, a !== b.DEBUG_MODE_ERROR && (cc.warn = Function.prototype.bind.call(console.warn, console)), a === b.DEBUG_MODE_INFO && (cc.log = Function.prototype.bind.call(console.log, console)))
    }
};
cc.loader.loadBinary = function (a, b) {
    var c = this,
        d = this.getXMLHttpRequest(),
        f = "load " + a + " failed!";
    d.open("GET", a, !0);
    cc.loader.loadBinary._IEFilter ? (d.setRequestHeader("Accept-Charset", "x-user-defined"), d.onreadystatechange = function () {
        if (4 === d.readyState && 200 === d.status) {
            var a = cc._convertResponseBodyToText(d.responseBody);
            b(null, c._str2Uint8Array(a))
        } else b(f)
    }) : (d.overrideMimeType && d.overrideMimeType("text/plain; charset=x-user-defined"), d.onload = function () {
        4 === d.readyState && 200 === d.status ? b(null,
            c._str2Uint8Array(d.responseText)) : b(f)
    });
    d.send(null)
};
cc.loader.loadBinary._IEFilter = /msie/i.test(navigator.userAgent) && !/opera/i.test(navigator.userAgent) && window.IEBinaryToArray_ByteStr && window.IEBinaryToArray_ByteStr_Last;
cc.loader._str2Uint8Array = function (a) {
    if (!a) return null;
    for (var b = new Uint8Array(a.length), c = 0; c < a.length; c++) b[c] = a.charCodeAt(c) & 255;
    return b
};
cc.loader.loadBinarySync = function (a) {
    var b = this.getXMLHttpRequest();
    b.timeout = 0;
    var c = "load " + a + " failed!";
    b.open("GET", a, !1);
    a = null;
    if (cc.loader.loadBinary._IEFilter) {
        b.setRequestHeader("Accept-Charset", "x-user-defined");
        b.send(null);
        if (200 !== b.status) return cc.log(c), null;
        (b = cc._convertResponseBodyToText(b.responseBody)) && (a = this._str2Uint8Array(b))
    } else {
        b.overrideMimeType && b.overrideMimeType("text/plain; charset=x-user-defined");
        b.send(null);
        if (200 !== b.status) return cc.log(c), null;
        a = this._str2Uint8Array(b.responseText)
    }
    return a
};
window.Uint8Array = window.Uint8Array || window.Array;
if (cc.loader.loadBinary._IEFilter) {
    var IEBinaryToArray_ByteStr_Script = '<!-- IEBinaryToArray_ByteStr -->\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = ""\r\n   End If\r\nEnd Function\r\n',
        myVBScript =
        document.createElement("script");
    myVBScript.type = "text/vbscript";
    myVBScript.textContent = IEBinaryToArray_ByteStr_Script;
    document.body.appendChild(myVBScript);
    cc._convertResponseBodyToText = function (a) {
        for (var b = {}, c = 0; 256 > c; c++)
            for (var d = 0; 256 > d; d++) b[String.fromCharCode(c + 256 * d)] = String.fromCharCode(c) + String.fromCharCode(d);
        c = IEBinaryToArray_ByteStr(a);
        a = IEBinaryToArray_ByteStr_Last(a);
        return c.replace(/[\s\S]/g, function (a) {
            return b[a]
        }) + a
    }
};
cc = cc || {};
cc._loadingImage = "data:image/gif;base64,R0lGODlhEAAQALMNAD8/P7+/vyoqKlVVVX9/fxUVFUBAQGBgYMDAwC8vL5CQkP///wAAAP///wAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAAANACwAAAAAEAAQAAAEO5DJSau9OOvNex0IMnDIsiCkiW6g6BmKYlBFkhSUEgQKlQCARG6nEBwOgl+QApMdCIRD7YZ5RjlGpCUCACH5BAUAAA0ALAAAAgAOAA4AAAQ6kLGB0JA4M7QW0hrngRllkYyhKAYqKUGguAws0ypLS8JxCLQDgXAIDg+FRKIA6v0SAECCBpXSkstMBAAh+QQFAAANACwAAAAACgAQAAAEOJDJORAac6K1kDSKYmydpASBUl0mqmRfaGTCcQgwcxDEke+9XO2WkxQSiUIuAQAkls0n7JgsWq8RACH5BAUAAA0ALAAAAAAOAA4AAAQ6kMlplDIzTxWC0oxwHALnDQgySAdBHNWFLAvCukc215JIZihVIZEogDIJACBxnCSXTcmwGK1ar1hrBAAh+QQFAAANACwAAAAAEAAKAAAEN5DJKc4RM+tDyNFTkSQF5xmKYmQJACTVpQSBwrpJNteZSGYoFWjIGCAQA2IGsVgglBOmEyoxIiMAIfkEBQAADQAsAgAAAA4ADgAABDmQSVZSKjPPBEDSGucJxyGA1XUQxAFma/tOpDlnhqIYN6MEAUXvF+zldrMBAjHoIRYLhBMqvSmZkggAIfkEBQAADQAsBgAAAAoAEAAABDeQyUmrnSWlYhMASfeFVbZdjHAcgnUQxOHCcqWylKEohqUEAYVkgEAMfkEJYrFA6HhKJsJCNFoiACH5BAUAAA0ALAIAAgAOAA4AAAQ3kMlJq704611SKloCAEk4lln3DQgyUMJxCBKyLAh1EMRR3wiDQmHY9SQslyIQUMRmlmVTIyRaIgA7";
cc._fpsImage = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAgCAYAAAD9qabkAAAKQ2lDQ1BJQ0MgcHJvZmlsZQAAeNqdU3dYk/cWPt/3ZQ9WQtjwsZdsgQAiI6wIyBBZohCSAGGEEBJAxYWIClYUFRGcSFXEgtUKSJ2I4qAouGdBiohai1VcOO4f3Ke1fXrv7e371/u855zn/M55zw+AERImkeaiagA5UoU8Otgfj09IxMm9gAIVSOAEIBDmy8JnBcUAAPADeXh+dLA//AGvbwACAHDVLiQSx+H/g7pQJlcAIJEA4CIS5wsBkFIAyC5UyBQAyBgAsFOzZAoAlAAAbHl8QiIAqg0A7PRJPgUA2KmT3BcA2KIcqQgAjQEAmShHJAJAuwBgVYFSLALAwgCgrEAiLgTArgGAWbYyRwKAvQUAdo5YkA9AYACAmUIszAAgOAIAQx4TzQMgTAOgMNK/4KlfcIW4SAEAwMuVzZdL0jMUuJXQGnfy8ODiIeLCbLFCYRcpEGYJ5CKcl5sjE0jnA0zODAAAGvnRwf44P5Dn5uTh5mbnbO/0xaL+a/BvIj4h8d/+vIwCBAAQTs/v2l/l5dYDcMcBsHW/a6lbANpWAGjf+V0z2wmgWgrQevmLeTj8QB6eoVDIPB0cCgsL7SViob0w44s+/zPhb+CLfvb8QB7+23rwAHGaQJmtwKOD/XFhbnauUo7nywRCMW735yP+x4V//Y4p0eI0sVwsFYrxWIm4UCJNx3m5UpFEIcmV4hLpfzLxH5b9CZN3DQCshk/ATrYHtctswH7uAQKLDljSdgBAfvMtjBoLkQAQZzQyefcAAJO/+Y9AKwEAzZek4wAAvOgYXKiUF0zGCAAARKCBKrBBBwzBFKzADpzBHbzAFwJhBkRADCTAPBBCBuSAHAqhGJZBGVTAOtgEtbADGqARmuEQtMExOA3n4BJcgetwFwZgGJ7CGLyGCQRByAgTYSE6iBFijtgizggXmY4EImFINJKApCDpiBRRIsXIcqQCqUJqkV1II/ItchQ5jVxA+pDbyCAyivyKvEcxlIGyUQPUAnVAuagfGorGoHPRdDQPXYCWomvRGrQePYC2oqfRS+h1dAB9io5jgNExDmaM2WFcjIdFYIlYGibHFmPlWDVWjzVjHVg3dhUbwJ5h7wgkAouAE+wIXoQQwmyCkJBHWExYQ6gl7CO0EroIVwmDhDHCJyKTqE+0JXoS+cR4YjqxkFhGrCbuIR4hniVeJw4TX5NIJA7JkuROCiElkDJJC0lrSNtILaRTpD7SEGmcTCbrkG3J3uQIsoCsIJeRt5APkE+S+8nD5LcUOsWI4kwJoiRSpJQSSjVlP+UEpZ8yQpmgqlHNqZ7UCKqIOp9aSW2gdlAvU4epEzR1miXNmxZDy6Qto9XQmmlnafdoL+l0ugndgx5Fl9CX0mvoB+nn6YP0dwwNhg2Dx0hiKBlrGXsZpxi3GS+ZTKYF05eZyFQw1zIbmWeYD5hvVVgq9ip8FZHKEpU6lVaVfpXnqlRVc1U/1XmqC1SrVQ+rXlZ9pkZVs1DjqQnUFqvVqR1Vu6k2rs5Sd1KPUM9RX6O+X/2C+mMNsoaFRqCGSKNUY7fGGY0hFsYyZfFYQtZyVgPrLGuYTWJbsvnsTHYF+xt2L3tMU0NzqmasZpFmneZxzQEOxrHg8DnZnErOIc4NznstAy0/LbHWaq1mrX6tN9p62r7aYu1y7Rbt69rvdXCdQJ0snfU6bTr3dQm6NrpRuoW623XP6j7TY+t56Qn1yvUO6d3RR/Vt9KP1F+rv1u/RHzcwNAg2kBlsMThj8MyQY+hrmGm40fCE4agRy2i6kcRoo9FJoye4Ju6HZ+M1eBc+ZqxvHGKsNN5l3Gs8YWJpMtukxKTF5L4pzZRrmma60bTTdMzMyCzcrNisyeyOOdWca55hvtm82/yNhaVFnMVKizaLx5balnzLBZZNlvesmFY+VnlW9VbXrEnWXOss623WV2xQG1ebDJs6m8u2qK2brcR2m23fFOIUjynSKfVTbtox7PzsCuya7AbtOfZh9iX2bfbPHcwcEh3WO3Q7fHJ0dcx2bHC866ThNMOpxKnD6VdnG2ehc53zNRemS5DLEpd2lxdTbaeKp26fesuV5RruutK10/Wjm7ub3K3ZbdTdzD3Ffav7TS6bG8ldwz3vQfTw91jicczjnaebp8LzkOcvXnZeWV77vR5Ps5wmntYwbcjbxFvgvct7YDo+PWX6zukDPsY+Ap96n4e+pr4i3z2+I37Wfpl+B/ye+zv6y/2P+L/hefIW8U4FYAHBAeUBvYEagbMDawMfBJkEpQc1BY0FuwYvDD4VQgwJDVkfcpNvwBfyG/ljM9xnLJrRFcoInRVaG/owzCZMHtYRjobPCN8Qfm+m+UzpzLYIiOBHbIi4H2kZmRf5fRQpKjKqLupRtFN0cXT3LNas5Fn7Z72O8Y+pjLk722q2cnZnrGpsUmxj7Ju4gLiquIF4h/hF8ZcSdBMkCe2J5MTYxD2J43MC52yaM5zkmlSWdGOu5dyiuRfm6c7Lnnc8WTVZkHw4hZgSl7I/5YMgQlAvGE/lp25NHRPyhJuFT0W+oo2iUbG3uEo8kuadVpX2ON07fUP6aIZPRnXGMwlPUit5kRmSuSPzTVZE1t6sz9lx2S05lJyUnKNSDWmWtCvXMLcot09mKyuTDeR55m3KG5OHyvfkI/lz89sVbIVM0aO0Uq5QDhZML6greFsYW3i4SL1IWtQz32b+6vkjC4IWfL2QsFC4sLPYuHhZ8eAiv0W7FiOLUxd3LjFdUrpkeGnw0n3LaMuylv1Q4lhSVfJqedzyjlKD0qWlQyuCVzSVqZTJy26u9Fq5YxVhlWRV72qX1VtWfyoXlV+scKyorviwRrjm4ldOX9V89Xlt2treSrfK7etI66Trbqz3Wb+vSr1qQdXQhvANrRvxjeUbX21K3nShemr1js20zcrNAzVhNe1bzLas2/KhNqP2ep1/XctW/a2rt77ZJtrWv913e/MOgx0VO97vlOy8tSt4V2u9RX31btLugt2PGmIbur/mft24R3dPxZ6Pe6V7B/ZF7+tqdG9s3K+/v7IJbVI2jR5IOnDlm4Bv2pvtmne1cFoqDsJB5cEn36Z8e+NQ6KHOw9zDzd+Zf7f1COtIeSvSOr91rC2jbaA9ob3v6IyjnR1eHUe+t/9+7zHjY3XHNY9XnqCdKD3x+eSCk+OnZKeenU4/PdSZ3Hn3TPyZa11RXb1nQ8+ePxd07ky3X/fJ897nj13wvHD0Ivdi2yW3S609rj1HfnD94UivW2/rZffL7Vc8rnT0Tes70e/Tf/pqwNVz1/jXLl2feb3vxuwbt24m3Ry4Jbr1+Hb27Rd3Cu5M3F16j3iv/L7a/eoH+g/qf7T+sWXAbeD4YMBgz8NZD+8OCYee/pT/04fh0kfMR9UjRiONj50fHxsNGr3yZM6T4aeypxPPyn5W/3nrc6vn3/3i+0vPWPzY8Av5i8+/rnmp83Lvq6mvOscjxx+8znk98ab8rc7bfe+477rfx70fmSj8QP5Q89H6Y8en0E/3Pud8/vwv94Tz+4A5JREAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfcAgcQLxxUBNp/AAAQZ0lEQVR42u2be3QVVZbGv1N17829eRLyIKAEOiISEtPhJTJAYuyBDmhWjAEx4iAGBhxA4wABbVAMWUAeykMCM+HRTcBRWkNH2l5moS0LCCrQTkYeQWBQSCAIgYRXEpKbW/XNH5zS4noR7faPEeu31l0h4dSpvc+t/Z199jkFWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhY/H9D/MR9qfKnLj/00U71aqfJn9+HCkCR/Wk36ddsgyJ/1wF4fkDfqqm9/gPsUeTnVr6a2xlQfnxdI7zs0W7irzD17Ytb2WT7EeNv/r4ox1O3Quf2QP2pgt9utwfout4FQE8AVBSlnaRmfvAURQkg2RlAbwB9AThlW5L0GaiKojhJhgOIBqDa7XaPrusdPtr5kQwF0BVAAoBIABRCKDd5aFUhRDAAw57eAOwAhKIoupft3zoqhB1AqLwuHIBut9uFt02qqvqRDJR2dAEQJj/BAOjn56dqmma+xiaECAEQAWAggLsB6A6HQ2iaZggBhBAqgEAAnQB0kzaEmT4hAITT6VQ8Ho/HJAKKECJQtr8LwD1y/A1/vcdfEUIEyfZ9AcQbYvZ942Px88L2UwlJR0dH0EMPPbRj5syZPUeNGrXR7Xb/641xIwJ1XY9NSUlZm52dfW+XLl1w8uRJzJ8//+OGhoYJqqqe1TSt1Wsm9NN1PSIqKmr12rVrR5WUlHy1bdu2AQCumWc3IYRD1/UwVVXnFRQUTIuNjUVzczN2797dWFJSkq8oymZd15sAGAEnFEUJ1nX9nzIzM1dnZmZGh4SE4OTJk5g5c+Zf29vbp9pstrMej6fVOyhIhgAYU1hY+B+hoaGoqKg4XVlZea+XTULTNFdCQsLGiRMnPuR2u3UhBOV9eeDAAWXTpk095DUe6WsoyRE5OTlr0tLSAux2O/bs2cO5c+e+pijKUpIXSHaQVAGkvPLKK++6XK4OksJLCFlXV2cvKSlJBFAjhU+x2WwhHo9nUHp6+urMzMy7wsLCUF9fjxdffPHjxsbGiTab7WuPx9NiEutOuq4PyMjI+M+srKyYqKgoHD58GDNmzNjq8XhyVFU9b/q+LH7hBAEYu3PnTlZVVRFAGgCX6f/tAHoOHDjwa0p27txp/JO9e/f+QM7cipw9nfL3kQBKt2zZQpJ87rnn6mQmoHilw2EACs+cOUOSrK+vZ1NTE0nyo48+IoBpxswoBcMJ4Ndjx471kOTFixe5d+9ekqTH42H//v13A4jyzpAURfEH0H/OnDnthu1z5sw558MmFUCPWbNmnaMP3nrrLZoyDmP8Hl68eDFJ8siRI9/Yc+zYMQKYKdtAztrTrl27xptRXV1NAKMAOAyBBBA/Y8aMdpLs6Ojgxx9//E37+++//29yvFXppwvAwMcee8xjtDHsuXLlCqOjo//ia3wsfpkoALqFhoZuIckJEyackimm3dQmEMDUmpoakmRISMhhAHOHDx/eQJIbN24kgKEyMAHAFRMTs2XXrl1saWkhSZ0kp0+ffhrAr3wEW/S8efOukORLL72kA1gKYMPWrVtJkk899dRJAHeYrgsEsIQkjx8/TgDvAPjd448/3kaSb7zxBmUa7vC6z53BwcFbSHL9+vU6Sc6aNes8gF5ewWAH0PfVV18lSQL4DMBGIcQ6AKtcLleBFC2jXtFt8ODBe0iyoqKCAJYByC8qKmJDQwOzsrK+MAmqo1OnTveHhoa+GRkZ+XZkZOSWiIiIvzgcjk9mzpypkWRmZuZpmbYbGV4AgPnNzc1sa2sjgN0A5iQmJtaSZHl5OQHcb/K3s81mW0uSTU1NBFAFYFbfvn1Pk+Tbb79NAA8IIVzW42/hByA+Pz/fLR/2ZXIda05NI/z9/TeR5J49ewhgqlxTrtI0jY2NjQQw3zTLuWJiYjaUlJToS5Ys6fjkk080kwDEeAmADcA9GzZsIElGRUW9CyAWwLApU6Y0kOSKFSsog9QICGdERMTGsrIyZmVlEcC9AB4IDw/fTpLbtm0jgN94CUAnAJmVlZVcs2aNZ/LkyRdJcvbs2b4EwAkgZfPmzTxw4AABFAN4BkC6vFeUSewcAO5duXIlSTIhIaEawGMAxgKYAmAGgCS73e5vrKVk/yGythANYEhCQsIhkly+fDkBpKqqGmL6DgIALDKN/3yZpVWQZGVlJQE8aPI3KiMjo5okV61aRQAjAPQBMPfIkSN0u90EUCBtsPiFEwpgbn19PdetW2fM5N4zQ9ekpKQqkty0aRMBpMjiWM6JEydIkoqirJUFJ6iq6pAPVy8A6cZMehMBUACEuVyuFwG8HBwcPEIWx367ZMkSjSQXLVrUJouTRorrkAHdA8BdQogsAOsKCwtJkmPGjDkvMw2bDDo/ADEjRoz4XylyFbm5uY0mAbjLyyZ/AOOrq6tZVlbWsWDBgo69e/eyoqKCgwcPPg4gSQaoIRbp27dvN7KF+tLSUr28vJwFBQXtMpvpYRIM7+wrAkDeqVOnePbsWQIoNKfzpiXPg8uXLydJJicnNwF4f+nSpW6STEtLq5fjYwhk1wkTJtSQ5Ouvv04AqTKj+N2xY8dIkgEBAW/Ie1v8wncRegwZMmQvSfbr12+3Ua33WqPfOWbMmP0kWVpaSgCDZAqcfejQIWNZsEGKgvnh9gfQb9myZd8nAEJVVZtMkUNk8CcNHTq0liR1XWdYWNhmH1mJIme80OnTp18x1rp5eXkEsNJms92Fb7e/IgEsvHz5Mp999tkmAI/l5uZeMC0B7vEqqAYAyL106RJJsra2lpWVld+sucePH38ZQG+5NncBeOrgwYMkqbe3t/Po0aOsra011wAWyl0H7x0JJ4DE+fPnu0kyPT29DsDdUrBuyNKEEAkAdpw/f/6GeoEM8GUmfwEgPCIiopwkGxsbabPZPgOw6L777vvm4p49e26VGYjFLxUhhD+ApLKyMp44ccIoVnXybgbgzkcfffRzklyzZg0BDJYCMMmoCwQFBXkLgLGWvvcWAgBToSsKwNPTp09vMR7UuLi4rwH0lgU8c/Db5ezbeeTIkRWzZ8++aMxu+fn5BPCADBwHgP4LFy701NXVEUAJgAnPP/98kyxMNgHo53A4zH77BQQETMvPz7+Um5vbBuAlAFMSExPPmdbVL0qh8Acw8fDhw5SCchVAEYAVb775JknyhRdeaJYztHfxMwLAaqNwCGC2FArv8x0hAHKNLGPKlCme5OTk/Zs3bzb7O0wKiiG8KXl5ed8IxenTp0mSR48e1UmyW7duWywBuD2xyQcgFECgoih+8H1gyJgZV5Lkyy+/3CbTRIePtl2HDBmyw1QBHyGDdXZdXR1JUghRKkXBjOMHCoBdpr0L3nvvPZLkF198wejo6O0A4lVVDTb74HQ6AwD8Wq7Jh8rgGgDgQ13XjVR8qaxJuADMbmlpYXl5uV5UVNRWUFDgfv/993Vj/ZydnU1c37eHXML4S3viAcQqitJD2l104cIFY8lTKsXSBWBMVVWVcd9yed2A1NTUQ6Zl00CvLMMOoHdubm6zFIlWOf5+PsY/Kj09vdrU11QAwwGsv3jxIk21m2DZr10I0RXAuAcffPBgaWkpV69eTYfDcdiwUxY0w6xw+flX8L1xApjevXv3lREREaW6rofB93aPDUDQpEmTMgHgtddeqwBwEd/utZvpqK6uPgEAcXFxkA94NwB9unfvjrNnz4LklwDcf08iIqv66Zs2bXrl4YcfxooVKxAbG7uqrq5uAYA2TdOEqqpGYIi2tjbl6aeffu/YsWPv5uTk7JaC1wHg4Pnz542MwoVvTx+21dbWYvjw4WLixIl+2dnZ9lGjRgmSTE1NRUpKCkwFTGiaxtTU1OXTpk3707Bhw/6g67pDipnT4biuj7qut+Lbk3Vf1tTUXI9qu91Pjq1QFEUBgJaWFgBo8yGOQ8eNGxcAAOvXr/8QwBUfYygAKL169eoCABcuXACAWtn2hOGv0+kMNO1KiPDw8F4A4rZv3/7R1KlTR0+bNu1ht9u9r1+/fqitrQXJgwDarRC6/QjPzs4+QJIffPCB9/aQmSAA43ft2mW0e1QGoi8CAPyLsZccExNTC2BlRkbGRdOyYJCP2csBIN6UAZzCd7cBbQCijYp/dXU1ExMTz6SmptaMHj36f9LS0vYlJCRsl6mxIWSdu3fv/g5J7t+/nwC2AShMTk6+SJKff/45AWRLYbD7+fndAeDf5BJnLoCCyZMnt5JkdnZ2C4B/F0KEm1Pu+Pj4rST55ZdfEsBWAK+mpaVdMo3raDn7KwDuSEpK+m+S3LBhAwG8DuCtHTt2UBbpjgC408vvcFVV15HkuXPnjMp+p5uMf0RcXNyHJNnQ0EBVVfcCWBQXF3fG+Jv0yxABPwB5LS0tRmFxN4BlTzzxxGWSXLx4sS5F3GGFy+1Hp5SUlJq6ujoWFxdTpsZ2H+0iIyMj/0iSWVlZX5mr5jfJFroPGzasxlhTnjp1iiTZ3NxMl8tlrCd9pfa9SkpKSJI5OTmnZOageLUZZqxvfVFWVkZcPwdgNwnSCKPqb17jkmR8fPzfZMDZ5CRsFBmNI7h95s2b1yhT7/MAYmStwCx4vy0uLqa3v5qmEcCfvSr1QQAeXb16NY3Cm3HQ55133iGAp+SxZTNhKSkpfzUddkrFjYevzAQCeGjp0qXfsYckY2NjTwD4leGDLCL2HTdunNtoY+zWSHFcIHdsFCtcfuZ1vO9Eqs3m7/F47sb1k2qX/f3997W2tl7BjWfpBYDOzzzzzIVJkyZh0KBBCwEsB3AJvl9AETabLcDj8dwRFRW1ctasWb8JCgpSzp07d62wsPC/Wltb8xRFadR1/ZqPXYbgAQMGbI2Pjw/+6quv9ldVVT0r01ezuPRJSUn5Y9euXXVd11WzDaqq6kePHm3+7LPPRgO4KlNuxWazhXo8nuTk5OSXMjIyEl0uFxoaGtqKior+dPXq1VdUVT0jj7r68ieoT58+vx8yZMjdx48fP1JVVTVF9m20VW02WyfZf97YsWPjXS4X6urqWvPy8jYCWCyEuEDS8FdVFKWzruv//OSTTy5OTk7uqWkaPv3007qysrJ8RVH+LI8ym8/rB3Tu3HnRI488knLo0KG2ffv2ZQI4C98vP6mqqoZqmpaclpa2cOTIkX39/f3R0NDQUVxc/G5TU9PLqqrWa5rWLH1QVFUN0TStX1JSUvH48eP7BwYG4uDBg1cKCgpeBbBe2u+2Qug2EwD5N5sMPuNtMe8XP4TT6Qxoa2sbIGeXvUKIK7d4IISiKC5d1wPljOfA9bPwzYqiXNV13dd6Uqiq6qdpml2mpe02m63d4/G4vcTF5fF47LJf71nJA6BZVVW3pmntuPHlmAD5wk6Q9NnbHp9vHaqq6tA0zU/64PZhk1FfCZB9G/23ALiqKEqzD39tpvbGUqoFwFUhRLP3yzpCCDtJpxyXDulfG27+pqRR3DXsUWVd4Yq0x/taVQjhIhksC8L+ABpM9ljBf5sKwI8pIBr75L5E4vvu+UNeG/a+hv+AL7yFH8qPtOfHjtOP6V/Bja8D6z/B2Nys/1u9Xv33tLf4GfF/LC4GCJwByWIAAAAASUVORK5CYII=";
cc._loaderImage = "data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAlAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MCA2MS4xMzQ3NzcsIDIwMTAvMDIvMTItMTc6MzI6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjM4MDBEMDY2QTU1MjExRTFBQTAzQjEzMUNFNzMxRkQwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM4MDBEMDY1QTU1MjExRTFBQTAzQjEzMUNFNzMxRkQwIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU2RTk0OEM4OERCNDExRTE5NEUyRkE3M0M3QkE1NTlEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU2RTk0OEM5OERCNDExRTE5NEUyRkE3M0M3QkE1NTlEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQADQkJCQoJDQoKDRMMCwwTFhENDREWGhUVFhUVGhkUFhUVFhQZGR0fIB8dGScnKionJzk4ODg5QEBAQEBAQEBAQAEODAwOEA4RDw8RFA4RDhQVERISERUfFRUXFRUfKB0ZGRkZHSgjJiAgICYjLCwoKCwsNzc1NzdAQEBAQEBAQEBA/8AAEQgAyACgAwEiAAIRAQMRAf/EALAAAAEFAQEAAAAAAAAAAAAAAAQAAgMFBgcBAQEAAwEBAAAAAAAAAAAAAAAAAQMEAgUQAAIBAgIEBwoLBgQGAwAAAAECAwAEEQUhMRIGQVFxsTITFGGBwdEiQlKSMzWRoeFicqKyI1NzFYJjJDQWB9KjVCbxwkNkJWXik3QRAAIBAgMFBQcDBQEAAAAAAAABAhEDIRIEMUFRcTJhwVIUBZGhsSJyEzOB0ULhYpIjUxX/2gAMAwEAAhEDEQA/AMJSpUqAVKlXuFAeUq9wpUB5XuFe4V6ooDzZHDox0CnGMinzwl7Z8NajaHeoO3vmTBZBtp9YUIqTEV5ROxHKnWRnaU8VRMhFBUjpV7hSoSeUq9pUB5Sr2lhQHlKvcK8oBV7hSFSRrtaKAZs07YNPM1pG2xJIAw1jSeandry/8X4m8VCKkWwaWwam7Xl/4v1W8VLtmX/i/VbxUoKkWwakSM407tmX/i/VbxUmzGwjQsjdY41IARie/U0IbZO0kNtCXnOCkEBeFu4KI3Bs7DNb27ya+jDx3kJeEnpJJEcQVbWDsk17u5urd591ucZkWhym2Vnd9RkCDEpFxDRpbw0bunu5mlp2De2FMLYXOD2wB2xbOeraUcYGJ72mlSUiqzzdzMd3Z3mixltA2yzcK/NlHM1DQyRXce1HocdNOEfJXZ88y9ZojOqhiBszIRiHQ8Y4cK5TvHuzLljHNMqxNoDjLFraHHnjPxcNCGVbxEUzYNTx5jZSxhpW6qTzlwJ+DCvO2Zf+L9VvFSgqyHYNLYNTdssPxfibxUu15f8Ai/VPiqCakOwa82DU/a8v/F+JvFTDdWPBL8R8VKCvYRYV5UzoMAy6QdIIqI0B4KJtxiRQwou16QoGUkntH5Tz0RbZbmF2hktraSVBo2lUkY8tDye0flPPXTslVUyiyVRsjqUOA4yMT8dW2ram2m6UVTNq9S7EIyUVJydMTn/6DnP+im9Wl+g5z/opvVrpteEhQWY4AaSTwAVf5WPiZh/9S5/zj7zltzlmYWkfWXNvJDGTgGcYDHirR7i7mSbwXParsFMrgb7w6jKw/wCmnc9I14kF3vpvCljbMyWMOJL4aEiB8qU/ObUK7HYWVrl1pFZWiCOCBQqKOLjPGTrNZZqKbUXVHq2nNwTuJRk1VpbgXN8s7Rk5ym0UQQzhIG2NAjhxHWbI+gCBVjBBFbwxwQqEiiUJGg1BVGAFe7dV28WYLYZFmF2Th1UD7JGjymGyn1iK5OyzIBGB1HgrLZhamzumQAGJwSqnSCh1q3GOCodxt4cxurdcpzuN4cyhiWaF5Bg09udUmnWw1H/jV9nFuJ7Quo+8h8peThFA+047vduyMtk7fYqTl07YFdfUufMPzT5p71UdtlmYXaGS2t3mQHAsgxANdadYJopLe4QS2867EsZ4QfCNYrCFbjdDPmgkYyWFxgVf04ifJf6ScNdRUW1XBb6FU5TjF5EpSSrGu/s5lN+g5z/opvVpfoOc/wCim9WtdHnatvObJXDW7xLGhB8nrPaY9/HCr+tEdPCVaSeDoYLnqF63lzW4/PFSW3ecxbI84VSzWUwUaSdg0DXXK5nvAipnd6qgKvWnQO7pri9ZUEmm3Vl2j1kr8pRlFRyquBNZjGxQ/S56Y1S2fu9OVueon11Szahoou06QoQUXadIVCD2FJJ7R+U89dMydv8Axdn+TH9muZye0flPPXQstlK5Tbka1gUjlC1q0vVLkeb6r+O3Tx9xcY1nt8c0NrZCyiOE1108NYjGv1joo7Js1jzKyScYLIvkzL6LDwHXVJksH9Sb49dKNq0tj1jA6uriOCL+02FWX7iVtZX1/AzaHTyeoauKn2MX9W79zebiZCuR5MjSrhfXuEtwTrUeZH+yNfdrRNcxI6IzhXlJEak6WIGJ2Rw4ChWnChndtlVBLMdQA0k1gbXNMzzDfDLs6mjaPKppJbWwJ1bOwwxw43OnHh71YT3DpfWUJmFlb5jHHDdeXBHIsrRea5TSqvxqG04cNN62vetoCS4tre5mgnkGE9q+3DKOkuI2WX6LDQRRHWDh1UCtwj7QRg2wdl8Djgw1qe7XvW0BQ3kfZ7mSLgU+T9E6RVbnuVrnWVSWqj+Lt8ZbRuHEdKPkYVcZ2MJY5fSGyeVar45+rkWQHAqccalPE5km1htWK5nK4Wnt5FuUBUwOMG4nGkA/BXUrW4S6torlOjMgcd/xVn7rLo7zKs0uEjCNeSvdwoBhgsZxX1l2j36k3Lu+uyprdj5Vs5A+i/lD48a0aaVJOPi7jB6lbzWozpjB48pf1NDXNN4vfl7+Z4BXS65pvF78vfzPAK71XTHmZ/S/yT+jvJ7L3fHytz1E+upbL+Qj5W56jfXWRnsIYKLtekKEFGWvSFQgyjk9o/Keet3YthlMP/5x9msJJ7R+U89biyb/AMXEv7gD6tadL1T+kwepRrC39ZkLDMbiwMvUHRPG0bjlGg8ore/23sxBldxfMPLupNhT8yL/AORNZbdzJ484scytxgLqJY5LZj6Q2sV5G1Vud1mjjyG0ij0NEGSZToKyhjtqw4waztuiXA3qKTbSxltfGhbZlE95ZtZqxVbgiOZhrER9ph3Svk9+pJILZ4Y4DGBFCUMKjRsGPobPFhUfW0NJmljE2xJcIrcI2vFUEln1lRXd6lrazXT9GCNpD+yNqoI7mOVduNw6nzlOIoPOUa6yye1XXcbMR5GdQ3xY0BSbj31/FcTQZirJ+q431q7anbHCTZ72Bw7lbPrKBMcBWNNgbMBBh+bsjBdni0VJ1lARZs6yWiupxCuMDy6KpS2IwOo6DTr3Mre3e5tZZVUM4ZBjqOOJoWO4jkXajcOOMHGgDISvWIrdAkKR80+TzVl908bPPL3LzxOuHdifxVfiTAg92qI/w+/8gGgSyN/mR7XPVlp0lF/3L3mbVKtu5Hjbk/8AHE2Fc03i9+Xv5ngFdKNc13i9+Xv5ngFaNV0x5nn+l/kn9HeEWXu+PlbnqJ9dS2Xu9OVueon11kZ7CGCjLXpCgxRlr0hUIPYUcntH5Tz1s8vb+Bt1/dqPirGSe0flPPWusG/g4Py15q06XqlyMWvVYQ+ruI9xJOqzO9hOto/sP8tbGOFIrmWeM7IuMDMnAXXQJOUjQeOsJk0nY96ip0CYunrjaHx1t+srPJUbXBm2LrFPikwTOb+T+VhbZxGMrDXp83x1QSy2tucJpUjPETp+Cn5/ftaRvKvtp3Kx48HG3erHMzOxZiWZtLMdJNQSbbL71Vk6yynViOkqnEEfOWtPbXi3EQkGg6mXiNckjeSJxJGxR10qw0GtxuxmvbImD4CZMFlA4fRfv0BqesqqzTMZNMEDbIHtHH2QeCiZJSqMQdOGiue53mz3czQwsRbIcNHnkec3c4qAMuriz68gTIToxwOOnlp0MjxMJYW741Gs3RVldtbygE/dMcHX/moDaxTiWNZB53B3arb8/wC+4SOF4sf/AKxU9kcBsfOGHfoUHtG/RbzY5Die5HHhXdvavqiZ9Q8Jdlq4/gbKua7xe/L38zwCuhpf2Uk/Zo50kmwJKIdogDjw1VzzeL35e/meAVp1LTgqY4nn+mRauzqmqwrjzCLL3fHytz1E+upLL+Qj5W56jfXWRnroYKLtekKEFF2vSFQg9hSSe0flPPWosm/hIfoLzVl5PaPynnrRWb/w0X0F5q06XqlyM2sVYx5gmbFre/t71NY2T+0h8VbSO5SWNJUOKSAMp7jDGspmMPaLRlXS6eWve1/FRO7WYdbZm1Y/eW/R7qHxHRXGojlm3ulid6aVbaW+OALvgCLq2Hm9WxHKWqjhj6xsK1e8dm15l4niG1LZkswGsxtrPeOmsvayBJA1VItlWjptLuTdPMo7LtjRDq9naK4+WF9IrUW7BaHOljGqVHB7w2hzVoZt87d8vaNYSLl02CcRsDEbJbj71Uu7UBkvJ7/D7q2QoDxySaAO8MTXdxRVMpRp5XZOWdF/ms7R5XdyKfKWJsO/5PhrG5XlNxmEywW6bTnTxAAcJNbGSMXkM1pjgbiNo1PziPJ+Os7u7m/6ReM00ZOgxSpqYYHT3wRXMKN4ll9zUG4bQfNshu8sZVuEA2hirA4qe/VOwwrVbzbww5mI44UKRRYkbWG0S3JWctbd7u5WFfOOLHiUdJqmaipfLsIsObhWe001lMkMVvJNjhghIALMcBxCs7fxXQmkupx1bXDswGPlaTidVaEyKNXkoo4eBV+Sq7L7Vs9zcBgeyQ4GQ/MB1crmoim2orezqcowTuSeEY48jQ7oZX2PLzdyLhNd6RjrEY6I7+uspvH78vfzPAK6UAAAFGAGgAcArmu8Xvy9/M8ArTfio24RW5nnaG67uou3H/KPuqT2X8hHytz1G+upLL3enK3PUb66ys9RDBRdr0hQgou06QqEGUkntH5Tz1e238vF9BeaqKT2j8p56vbb+Xi+gvNWjTdUuRn1XTHmTh8KrJTJlt8t1CPIY44cGnpJVjTJYkmjaN9Ib4u7V923njTethRauZJV3PaW1rfLIiXEDYg6R4VYc9CXW7thfOZbKdbGZtLW8uPVY/u3GrkNUkM9zlcxUjbhfWOA90cRq4gv4LhdqN+VToNYWmnRm9NNVWNTyHc6VWBv8wt4YeHqm6xyPmroq1Z7WGFLSxTq7WLSuPSdjrkfumq5yHXDUeA92oO2SKpVumNAaoJLMXH3myp0rpJ4uKhc3tbDM5BMri1zAj79j7KTiY8TcdBpcsith0286o+sPCagEX9Pzg4zXUCp6QYse8oouCG3tk6m1BYv05W6T+IdyolxbHDAAa2OgDlNCz3ryN2WxBd5PJMg1t81eId2ukqnLlTBbfcuY+9uJLiRcvtPvHdsHK+cfRHcHDWsyawjyy0WBcDI3lTP6TeIcFV+S5OmXx9bJg1048o8Cj0V8Jq2DVu09nL80up7OxHi+oal3P8AXB/IsZS8T/YOV65zvCcc7vfzPAK3ivWCz445zeH954BXOr6I8yfSfyz+jvCLP3fHytz1G+upLP3fHytz1E+usbPaQ0UXadIUIKLtekKhB7Ckk9o/Keer22/l4/oLzVRSe0flPPV7b/y8X0F5q0abqlyM+q6Y8yQsBTDMor1o8aiaE1pbluMqS3sbLLHIhSRQyngqukhaJ9uBjo+H5aOa3ao2t34qouRlLajTalGP8v0IY8ylXQ+PKPFU/bYXOLPge6CKia0LaxTOxHu1Q7cuBd9yPEJ7TbjXKO8CajbMIF6CNIeNvJHjqIWJ7tSpYkalqVblwIdyG+RGXur0hXYJFxal+Dhq5y3slkv3Y2pD0pTr+QUClpJRUdo9XW4OLrTHtM16cZLLWkeC7y4jvlNEpcRtw1Ux27Ci448NZrTFy3nn3IQWxlgGrDZ3pza7/M8ArZo+ArF5171uvp+CqdV0R5l/psUrs2vB3hdl7vTlbnqJ9dS2Xu+PlbnqJ9dY2eshooq16QoQUXa9IVCD2FLJ7RuU89WNtmUSQqkgYMgw0accKrpPaPynnrZWG4Vi+VWmY5tnMWXG+XrIYnA0rhj0mdcTgdNdwnKDqjmduM1SRR/qlr8/4KX6pa8T/BVzDuLZXudRZblmbxXcPUNPc3KqCIwrbOzgrHEnHjoyD+3eSXkht7DeKG4umDGOJVUklfouThXfmbnZ7Cvy1vt9pmv1W1+d8FL9VteJvgq5yrcOGfLmzHN80iyyETPbptAEFo2ZG8pmUa1OFNn3Ky6W/sbDKM5hv5bx2WTZA+7RF2y52WOPJTzE+z2Dy1vt9pT/AKpacTerS/U7Tib1a04/t7kDXPY03jhN0W6sQ7K7W3q2dnrMccaDy/8At80kuZfqWYxWNtlcvUPPhiGYhWDeUy7IwYU8xPs9g8tb7faUn6pacTerTxm9oOBvVq3v9z927aynuId44LiWKNnjhAXF2UYhRg516qpsryjLr21665zFLSTaK9U2GOA87SwqY37knRU+BzOzags0s1Oyr+BKM6sxwP6tSDPLMen6vy0rvdm3Sxlu7K/S7WDDrFUDUTxgnTU826eXW7KlxmqQuwDBXUKcD+1Xee/wXuKX5XDGWLapSVcOyhEM/seJ/V+WnjeGx4pPV+Wkm6kKZlFay3Jlt7iFpYZY8ASVK6DjtDDA0f8A0Tl340/1f8Ndx8xJVWXB0KbktFFpNzdVXAC/qOwA0CQni2flrO3Vwbm5lnI2TKxbDirX/wBE5d+NcfV/wVR7xZPa5U9utvI8nWhmbbw0YEAYYAVxfhfy5rlKR4Fulu6X7mW1mzT8S4Yis/5CPlbnqJ9dSWfu9OVueon11mZvQ2i7XpChKKtekKhBlNJ7R+U89bDfGTb3a3ZX0Lcj6kdY+T2j8p560288m1kWQr6MJ+ylSAr+2cnV5renjs3H1loX+3j9XvbbtxLN9lqW4UnV5jdnjtXHxihtyZNjeSBu5J9k1BJe7xy7W5CJ/wCzuD/mTVTf2+fq97LJuLrPsNRueS7W6aJ/38x+vLVXuY+xvHaNxbf2GoCezf8A36j/APsSf8w1sLnqczTefJluYoLm5uo5F61sBshItP1cNFYe1f8A3ir/APfE/wCZUe9bB94r5jwuPsrQFhmG4l/Z2M17HdW90tuu3IkTHaCjWdIw0VVZdks9/C06yJFEp2dp+E1bbqybGTZ8vpQD7L1XRv8A7blT96Oda7tpNuuNE37Cq9KSisjyuUoxrStKllHbLlWTXsMs8chuSuwEPDqwoLe5y+YRE/gLzmqRekvKKtd4327yM/ulHxmrHJStySWVRyrjxKI2XC/CTlnlPPKTpTdFbP0L1bgrf5Lp0G3dPhQHwV0S1lzBsns3sESR8Crh9WAJGjSOKuU3E+zdZQ3oJh8IArdZXFDmOTpHa3i2+YrI2KtKy4ricBsBuHHgFXSo440+Wa2qqxjvM9uMoy+WvzWpLCWWWE28HxL6e43ojgkeSCBY1Ri5BGIUDT51cl3vm276BBqSEH4WbxV0tlkyXJcxTMb+OW6uY9mGHrCzDQwwAbTp2uKuTZ9N1uYsfRRR8WPhrm419mSSjRyiqxVK7y23B/ftuTm2oSdJyzNVw3BFn7vTlbnqF9dS2fu9OVueon11lZuQ2iLdsGFD05H2dNQGV0ntG5Tz1dWm9N1b2kVq8EVwsI2UaQaQOKhmitZGLOmk68DhSFvY+gfWNSAg7z3Qvo7yKCKIohiaNR5LKxx8qpxvjcqS0VpbxvwOAcRQPZ7D0G9Y0uz2HoH1jUCpLY7zXlpbm3eKO5QuzjrBqZji3x17PvNcyT288VvDBJbMWUovS2hslW7mFQ9nsPQPrGl2ew9A+saCod/WNxtbYsrfb17WBxx5ddD2281xC88klvDcSXEnWuzrqOGGC9zRUPZ7D0G9Y0uzWHoH1jQVCLreq6ntZbaO3it1mGy7RjTs1X2mYy20ZiCq8ZOODcdEdmsPQb1jS7PYegfWNdJuLqnQiSUlRqpFLmryxtH1Ma7Qw2gNNPOdSt0oI27p007s9h6B9Y0uz2HoH1jXX3Z+I4+1b8IJdX89xLHKQFMXQUahpxoiPN5P+onfU+A0/s9h6DesaXZ7D0D6xpG7OLbUtu0StW5JJx2bBsmbtiSiEk+cxoCWWSaVpZOk2vDVo0VYdnsPQb1jSNvZcCH1jSd2c+p1XAmFqEOmOPEfaH+BQd1ueo211IzrgFUYKNAAqI1WztCpUqVCRUqVKgFSpUqAVKlSoBUqVKgFSpUqAVKlSoBUqVKgFSpUqAVKlSoD/9k=";
cc = cc || {};
cc.defineGetterSetter = function (a, b, c, d, f, g) {
    if (a.__defineGetter__) c && a.__defineGetter__(b, c), d && a.__defineSetter__(b, d);
    else if (Object.defineProperty) {
        var h = {
            enumerable: !1,
            configurable: !0
        };
        c && (h.get = c);
        d && (h.set = d);
        Object.defineProperty(a, b, h)
    } else throw Error("browser does not support getters");
    if (!f && !g)
        for (var h = null != c, m = void 0 != d, n = Object.getOwnPropertyNames(a), p = 0; p < n.length; p++) {
            var u = n[p];
            if (!((a.__lookupGetter__ ? a.__lookupGetter__(u) : Object.getOwnPropertyDescriptor(a, u)) || "function" !== typeof a[u])) {
                var v =
                    a[u];
                if (h && v === c && (f = u, !m || g)) break;
                if (m && v === d && (g = u, !h || f)) break
            }
        }
    a = a.constructor;
    f && (a.__getters__ || (a.__getters__ = {}), a.__getters__[f] = b);
    g && (a.__setters__ || (a.__setters__ = {}), a.__setters__[g] = b)
};
cc.clone = function (a) {
    var b = a.constructor ? new a.constructor : {},
        c;
    for (c in a) {
        var d = a[c];
        b[c] = "object" === typeof d && d && !(d instanceof cc.Node) && !(d instanceof HTMLElement) ? cc.clone(d) : d
    }
    return b
};
cc.inject = function (a, b) {
    for (var c in a) b[c] = a[c]
};
var ClassManager = {
    id: 0 | 998 * Math.random(),
    instanceId: 0 | 998 * Math.random(),
    getNewID: function () {
        return this.id++
    },
    getNewInstanceId: function () {
        return this.instanceId++
    }
};
(function () {
    var a = /\b_super\b/;
    cc.Class = function () {};
    cc.Class.extend = function (b) {
        var c = this.prototype,
            d = Object.create(c),
            f = {
                writable: !0,
                enumerable: !1,
                configurable: !0
            },
            g;
        cc.game.config && cc.game.config[cc.game.CONFIG_KEY.exposeClassName] ? (g = "(function " + (b._className || "Class") + " (arg0, arg1, arg2, arg3, arg4, arg5) {\n", g += "    this.__instanceId = ClassManager.getNewInstanceId();\n    if (this.ctor) {\n", g += "        switch (arguments.length) {\n", g += "        case 0: this.ctor(); break;\n", g += "        case 1: this.ctor(arg0); break;\n",
            g += "        case 3: this.ctor(arg0, arg1, arg2); break;\n", g += "        case 4: this.ctor(arg0, arg1, arg2, arg3); break;\n", g += "        case 5: this.ctor(arg0, arg1, arg2, arg3, arg4); break;\n", g += "        default: this.ctor.apply(this, arguments);\n", g += "        }\n", g += "    }\n", g += "})", g = eval(g)) : g = function (a, b, c, d, f) {
            this.__instanceId = ClassManager.getNewInstanceId();
            if (this.ctor) switch (arguments.length) {
            case 0:
                this.ctor();
                break;
            case 1:
                this.ctor(a);
                break;
            case 2:
                this.ctor(a, b);
                break;
            case 3:
                this.ctor(a,
                    b, c);
                break;
            case 4:
                this.ctor(a, b, c, d);
                break;
            case 5:
                this.ctor(a, b, c, d, f);
                break;
            default:
                this.ctor.apply(this, arguments)
            }
        };
        f.value = ClassManager.getNewID();
        Object.defineProperty(d, "__pid", f);
        g.prototype = d;
        f.value = g;
        Object.defineProperty(d, "constructor", f);
        this.__getters__ && (g.__getters__ = cc.clone(this.__getters__));
        this.__setters__ && (g.__setters__ = cc.clone(this.__setters__));
        for (var h = 0, m = arguments.length; h < m; ++h) {
            var n = arguments[h],
                p;
            for (p in n) {
                var u = "function" === typeof n[p],
                    v = "function" === typeof c[p],
                    x = a.test(n[p]);
                u && v && x ? (f.value = function (a, b) {
                    return function () {
                        var d = this._super;
                        this._super = c[a];
                        var f = b.apply(this, arguments);
                        this._super = d;
                        return f
                    }
                }(p, n[p]), Object.defineProperty(d, p, f)) : u ? (f.value = n[p], Object.defineProperty(d, p, f)) : d[p] = n[p];
                if (u) {
                    var y, z;
                    if (this.__getters__ && this.__getters__[p]) {
                        var u = this.__getters__[p],
                            t;
                        for (t in this.__setters__)
                            if (this.__setters__[t] === u) {
                                z = t;
                                break
                            } cc.defineGetterSetter(d, u, n[p], n[z] ? n[z] : d[z], p, z)
                    }
                    if (this.__setters__ && this.__setters__[p]) {
                        u = this.__setters__[p];
                        for (t in this.__getters__)
                            if (this.__getters__[t] === u) {
                                y = t;
                                break
                            } cc.defineGetterSetter(d, u, n[y] ? n[y] : d[y], n[p], y, p)
                    }
                }
            }
        }
        g.extend = cc.Class.extend;
        g.implement = function (a) {
            for (var b in a) d[b] = a[b]
        };
        return g
    }
})();
cc = cc || {};
cc._tmp = cc._tmp || {};
cc.associateWithNative = function (a, b) {};
cc.KEY = {
    none: 0,
    back: 6,
    menu: 18,
    backspace: 8,
    tab: 9,
    enter: 13,
    shift: 16,
    ctrl: 17,
    alt: 18,
    pause: 19,
    capslock: 20,
    escape: 27,
    space: 32,
    pageup: 33,
    pagedown: 34,
    end: 35,
    home: 36,
    left: 37,
    up: 38,
    right: 39,
    down: 40,
    select: 41,
    insert: 45,
    Delete: 46,
    "0": 48,
    1: 49,
    2: 50,
    3: 51,
    4: 52,
    5: 53,
    6: 54,
    7: 55,
    8: 56,
    9: 57,
    a: 65,
    b: 66,
    c: 67,
    d: 68,
    e: 69,
    f: 70,
    g: 71,
    h: 72,
    i: 73,
    j: 74,
    k: 75,
    l: 76,
    m: 77,
    n: 78,
    o: 79,
    p: 80,
    q: 81,
    r: 82,
    s: 83,
    t: 84,
    u: 85,
    v: 86,
    w: 87,
    x: 88,
    y: 89,
    z: 90,
    num0: 96,
    num1: 97,
    num2: 98,
    num3: 99,
    num4: 100,
    num5: 101,
    num6: 102,
    num7: 103,
    num8: 104,
    num9: 105,
    "*": 106,
    "+": 107,
    "-": 109,
    numdel: 110,
    "/": 111,
    f1: 112,
    f2: 113,
    f3: 114,
    f4: 115,
    f5: 116,
    f6: 117,
    f7: 118,
    f8: 119,
    f9: 120,
    f10: 121,
    f11: 122,
    f12: 123,
    numlock: 144,
    scrolllock: 145,
    ";": 186,
    semicolon: 186,
    equal: 187,
    "=": 187,
    ",": 188,
    comma: 188,
    dash: 189,
    ".": 190,
    period: 190,
    forwardslash: 191,
    grave: 192,
    "[": 219,
    openbracket: 219,
    backslash: 220,
    "]": 221,
    closebracket: 221,
    quote: 222,
    dpadLeft: 1E3,
    dpadRight: 1001,
    dpadUp: 1003,
    dpadDown: 1004,
    dpadCenter: 1005
};
cc.FMT_JPG = 0;
cc.FMT_PNG = 1;
cc.FMT_TIFF = 2;
cc.FMT_RAWDATA = 3;
cc.FMT_WEBP = 4;
cc.FMT_UNKNOWN = 5;
cc.getImageFormatByData = function (a) {
    return 8 < a.length && 137 === a[0] && 80 === a[1] && 78 === a[2] && 71 === a[3] && 13 === a[4] && 10 === a[5] && 26 === a[6] && 10 === a[7] ? cc.FMT_PNG : 2 < a.length && (73 === a[0] && 73 === a[1] || 77 === a[0] && 77 === a[1] || 255 === a[0] && 216 === a[1]) ? cc.FMT_TIFF : cc.FMT_UNKNOWN
};
cc.Point = function (a, b) {
    this.x = a || 0;
    this.y = b || 0
};
cc.p = function (a, b) {
    return void 0 === a ? {
        x: 0,
        y: 0
    } : void 0 === b ? {
        x: a.x,
        y: a.y
    } : {
        x: a,
        y: b
    }
};
cc.pointEqualToPoint = function (a, b) {
    return a && b && a.x === b.x && a.y === b.y
};
cc.Size = function (a, b) {
    this.width = a || 0;
    this.height = b || 0
};
cc.size = function (a, b) {
    return void 0 === a ? {
        width: 0,
        height: 0
    } : void 0 === b ? {
        width: a.width,
        height: a.height
    } : {
        width: a,
        height: b
    }
};
cc.sizeEqualToSize = function (a, b) {
    return a && b && a.width === b.width && a.height === b.height
};
cc.Rect = function (a, b, c, d) {
    this.x = a || 0;
    this.y = b || 0;
    this.width = c || 0;
    this.height = d || 0
};
cc.rect = function (a, b, c, d) {
    return void 0 === a ? {
        x: 0,
        y: 0,
        width: 0,
        height: 0
    } : void 0 === b ? {
        x: a.x,
        y: a.y,
        width: a.width,
        height: a.height
    } : {
        x: a,
        y: b,
        width: c,
        height: d
    }
};
cc.rectEqualToRect = function (a, b) {
    return a && b && a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height
};
cc._rectEqualToZero = function (a) {
    return a && 0 === a.x && 0 === a.y && 0 === a.width && 0 === a.height
};
cc.rectContainsRect = function (a, b) {
    return !a || !b ? !1 : !(a.x >= b.x || a.y >= b.y || a.x + a.width <= b.x + b.width || a.y + a.height <= b.y + b.height)
};
cc.rectGetMaxX = function (a) {
    return a.x + a.width
};
cc.rectGetMidX = function (a) {
    return a.x + a.width / 2
};
cc.rectGetMinX = function (a) {
    return a.x
};
cc.rectGetMaxY = function (a) {
    return a.y + a.height
};
cc.rectGetMidY = function (a) {
    return a.y + a.height / 2
};
cc.rectGetMinY = function (a) {
    return a.y
};
cc.rectContainsPoint = function (a, b) {
    return b.x >= cc.rectGetMinX(a) && b.x <= cc.rectGetMaxX(a) && b.y >= cc.rectGetMinY(a) && b.y <= cc.rectGetMaxY(a)
};
cc.rectIntersectsRect = function (a, b) {
    var c = a.y + a.height,
        d = b.x + b.width,
        f = b.y + b.height;
    return !(a.x + a.width < b.x || d < a.x || c < b.y || f < a.y)
};
cc.rectOverlapsRect = function (a, b) {
    return !(a.x + a.width < b.x || b.x + b.width < a.x || a.y + a.height < b.y || b.y + b.height < a.y)
};
cc.rectUnion = function (a, b) {
    var c = cc.rect(0, 0, 0, 0);
    c.x = Math.min(a.x, b.x);
    c.y = Math.min(a.y, b.y);
    c.width = Math.max(a.x + a.width, b.x + b.width) - c.x;
    c.height = Math.max(a.y + a.height, b.y + b.height) - c.y;
    return c
};
cc.rectIntersection = function (a, b) {
    var c = cc.rect(Math.max(cc.rectGetMinX(a), cc.rectGetMinX(b)), Math.max(cc.rectGetMinY(a), cc.rectGetMinY(b)), 0, 0);
    c.width = Math.min(cc.rectGetMaxX(a), cc.rectGetMaxX(b)) - cc.rectGetMinX(c);
    c.height = Math.min(cc.rectGetMaxY(a), cc.rectGetMaxY(b)) - cc.rectGetMinY(c);
    return c
};
cc.SAXParser = cc.Class.extend({
    _parser: null,
    _isSupportDOMParser: null,
    ctor: function () {
        window.DOMParser ? (this._isSupportDOMParser = !0, this._parser = new DOMParser) : this._isSupportDOMParser = !1
    },
    parse: function (a) {
        return this._parseXML(a)
    },
    _parseXML: function (a) {
        var b;
        this._isSupportDOMParser ? b = this._parser.parseFromString(a, "text/xml") : (b = new ActiveXObject("Microsoft.XMLDOM"), b.async = "false", b.loadXML(a));
        return b
    }
});
cc.PlistParser = cc.SAXParser.extend({
    parse: function (a) {
        a = this._parseXML(a).documentElement;
        if ("plist" !== a.tagName) return cc.warn("Not a plist file!"), {};
        for (var b = null, c = 0, d = a.childNodes.length; c < d && !(b = a.childNodes[c], 1 === b.nodeType); c++);
        return this._parseNode(b)
    },
    _parseNode: function (a) {
        var b = null,
            c = a.tagName;
        if ("dict" === c) b = this._parseDict(a);
        else if ("array" === c) b = this._parseArray(a);
        else if ("string" === c)
            if (1 === a.childNodes.length) b = a.firstChild.nodeValue;
            else {
                b = "";
                for (c = 0; c < a.childNodes.length; c++) b +=
                    a.childNodes[c].nodeValue
            }
        else "false" === c ? b = !1 : "true" === c ? b = !0 : "real" === c ? b = parseFloat(a.firstChild.nodeValue) : "integer" === c && (b = parseInt(a.firstChild.nodeValue, 10));
        return b
    },
    _parseArray: function (a) {
        for (var b = [], c = 0, d = a.childNodes.length; c < d; c++) {
            var f = a.childNodes[c];
            1 === f.nodeType && b.push(this._parseNode(f))
        }
        return b
    },
    _parseDict: function (a) {
        for (var b = {}, c = null, d = 0, f = a.childNodes.length; d < f; d++) {
            var g = a.childNodes[d];
            1 === g.nodeType && ("key" === g.tagName ? c = g.firstChild.nodeValue : b[c] = this._parseNode(g))
        }
        return b
    }
});
cc.saxParser = new cc.SAXParser;
cc.plistParser = new cc.PlistParser;
cc._txtLoader = {
    load: function (a, b, c, d) {
        cc.loader.loadTxt(a, d)
    }
};
cc.loader.register(["txt", "xml", "vsh", "fsh", "atlas"], cc._txtLoader);
cc._jsonLoader = {
    load: function (a, b, c, d) {
        cc.loader.loadJson(a, d)
    }
};
cc.loader.register(["json", "ExportJson"], cc._jsonLoader);
cc._jsLoader = {
    load: function (a, b, c, d) {
        cc.loader.loadJs(a, d)
    }
};
cc.loader.register(["js"], cc._jsLoader);
cc._imgLoader = {
    load: function (a, b, c, d) {
        c = cc.loader.isLoading(a) ? d : function (a, c) {
            if (a) return d(a);
            cc.loader.cache[b] = c;
            cc.textureCache.handleLoadedTexture(b);
            d(null, c)
        };
        cc.loader.loadImg(a, c)
    }
};
cc.loader.register("png jpg bmp jpeg gif ico tiff webp".split(" "), cc._imgLoader);
cc._serverImgLoader = {
    load: function (a, b, c, d) {
        cc._imgLoader.load(c.src, b, c, d)
    }
};
cc.loader.register(["serverImg"], cc._serverImgLoader);
cc._plistLoader = {
    load: function (a, b, c, d) {
        cc.loader.loadTxt(a, function (a, b) {
            if (a) return d(a);
            d(null, cc.plistParser.parse(b))
        })
    }
};
cc.loader.register(["plist"], cc._plistLoader);
cc._fontLoader = {
    TYPE: {
        ".eot": "embedded-opentype",
        ".ttf": "truetype",
        ".ttc": "truetype",
        ".woff": "woff",
        ".svg": "svg"
    },
    _loadFont: function (a, b, c) {
        var d = document,
            f = cc.path,
            g = this.TYPE,
            h = document.createElement("style");
        h.type = "text/css";
        d.body.appendChild(h);
        var m = "",
            m = isNaN(a - 0) ? m + ("@font-face { font-family:" + a + "; src:") : m + ("@font-face { font-family:'" + a + "'; src:");
        if (b instanceof Array)
            for (var n = 0, p = b.length; n < p; n++) c = f.extname(b[n]).toLowerCase(), m += "url('" + b[n] + "') format('" + g[c] + "')", m += n === p - 1 ? ";" :
                ",";
        else c = c.toLowerCase(), m += "url('" + b + "') format('" + g[c] + "');";
        h.textContent += m + "}";
        b = document.createElement("div");
        c = b.style;
        c.fontFamily = a;
        b.innerHTML = ".";
        c.position = "absolute";
        c.left = "-100px";
        c.top = "-100px";
        d.body.appendChild(b)
    },
    load: function (a, b, c, d) {
        b = c.type;
        a = c.name;
        b = c.srcs;
        cc.isString(c) ? (b = cc.path.extname(c), a = cc.path.basename(c, b), this._loadFont(a, c, b)) : this._loadFont(a, b);
        document.fonts ? document.fonts.load("1em " + a).then(function () {
            d(null, !0)
        }, function (a) {
            d(a)
        }) : d(null, !0)
    }
};
cc.loader.register("font eot ttf woff svg ttc".split(" "), cc._fontLoader);
cc._binaryLoader = {
    load: function (a, b, c, d) {
        cc.loader.loadBinary(a, d)
    }
};
cc._csbLoader = {
    load: function (a, b, c, d) {
        cc.loader.loadCsb(a, d)
    }
};
cc.loader.register(["csb"], cc._csbLoader);
window.CocosEngine = cc.ENGINE_VERSION = "Cocos2d-JS v3.15";
cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL = 0;
cc.DIRECTOR_STATS_POSITION = cc.p(0, 0);
cc.DIRECTOR_FPS_INTERVAL = 0.5;
cc.COCOSNODE_RENDER_SUBPIXEL = 1;
cc.SPRITEBATCHNODE_RENDER_SUBPIXEL = 1;
cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA = 1;
cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP = 0;
cc.TEXTURE_ATLAS_USE_VAO = 0;
cc.TEXTURE_NPOT_SUPPORT = 0;
cc.RETINA_DISPLAY_FILENAME_SUFFIX = "-hd";
cc.USE_LA88_LABELS = 1;
cc.SPRITE_DEBUG_DRAW = 0;
cc.SPRITEBATCHNODE_DEBUG_DRAW = 0;
cc.LABELBMFONT_DEBUG_DRAW = 0;
cc.LABELATLAS_DEBUG_DRAW = 0;
cc.DRAWNODE_TOTAL_VERTICES = 2E4;
cc.DEFAULT_ENGINE = cc.ENGINE_VERSION + "-canvas";
cc.ENABLE_STACKABLE_ACTIONS = 1;
cc.ENABLE_GL_STATE_CACHE = 1;
cc.$ = function (a) {
    var b = this === cc ? document : this;
    if (a = a instanceof HTMLElement ? a : b.querySelector(a)) a.find = a.find || cc.$, a.hasClass = a.hasClass || function (a) {
            return this.className.match(RegExp("(\\s|^)" + a + "(\\s|$)"))
        }, a.addClass = a.addClass || function (a) {
            this.hasClass(a) || (this.className && (this.className += " "), this.className += a);
            return this
        }, a.removeClass = a.removeClass || function (a) {
            this.hasClass(a) && (this.className = this.className.replace(a, ""));
            return this
        }, a.remove = a.remove || function () {
            this.parentNode &&
                this.parentNode.removeChild(this);
            return this
        }, a.appendTo = a.appendTo || function (a) {
            a.appendChild(this);
            return this
        }, a.prependTo = a.prependTo || function (a) {
            a.childNodes[0] ? a.insertBefore(this, a.childNodes[0]) : a.appendChild(this);
            return this
        }, a.transforms = a.transforms || function () {
            this.style[cc.$.trans] = cc.$.translate(this.position) + cc.$.rotate(this.rotation) + cc.$.scale(this.scale) + cc.$.skew(this.skew);
            return this
        }, a.position = a.position || {
            x: 0,
            y: 0
        }, a.rotation = a.rotation || 0, a.scale = a.scale || {
            x: 1,
            y: 1
        }, a.skew =
        a.skew || {
            x: 0,
            y: 0
        }, a.translates = function (a, b) {
            this.position.x = a;
            this.position.y = b;
            this.transforms();
            return this
        }, a.rotate = function (a) {
            this.rotation = a;
            this.transforms();
            return this
        }, a.resize = function (a, b) {
            this.scale.x = a;
            this.scale.y = b;
            this.transforms();
            return this
        }, a.setSkew = function (a, b) {
            this.skew.x = a;
            this.skew.y = b;
            this.transforms();
            return this
        };
    return a
};
switch (cc.sys.browserType) {
case cc.sys.BROWSER_TYPE_FIREFOX:
    cc.$.pfx = "Moz";
    cc.$.hd = !0;
    break;
case cc.sys.BROWSER_TYPE_CHROME:
case cc.sys.BROWSER_TYPE_SAFARI:
    cc.$.pfx = "webkit";
    cc.$.hd = !0;
    break;
case cc.sys.BROWSER_TYPE_OPERA:
    cc.$.pfx = "O";
    cc.$.hd = !1;
    break;
case cc.sys.BROWSER_TYPE_IE:
    cc.$.pfx = "ms";
    cc.$.hd = !1;
    break;
default:
    cc.$.pfx = "webkit", cc.$.hd = !0
}
cc.$.trans = cc.$.pfx + "Transform";
cc.$.translate = cc.$.hd ? function (a) {
    return "translate3d(" + a.x + "px, " + a.y + "px, 0) "
} : function (a) {
    return "translate(" + a.x + "px, " + a.y + "px) "
};
cc.$.rotate = cc.$.hd ? function (a) {
    return "rotateZ(" + a + "deg) "
} : function (a) {
    return "rotate(" + a + "deg) "
};
cc.$.scale = function (a) {
    return "scale(" + a.x + ", " + a.y + ") "
};
cc.$.skew = function (a) {
    return "skewX(" + -a.x + "deg) skewY(" + a.y + "deg)"
};
cc.$new = function (a) {
    return cc.$(document.createElement(a))
};
cc.$.findpos = function (a) {
    var b = 0,
        c = 0;
    do b += a.offsetLeft, c += a.offsetTop; while (a = a.offsetParent);
    return {
        x: b,
        y: c
    }
};
cc.INVALID_INDEX = -1;
cc.PI = Math.PI;
cc.FLT_MAX = parseFloat("3.402823466e+38F");
cc.FLT_MIN = parseFloat("1.175494351e-38F");
cc.RAD = cc.PI / 180;
cc.DEG = 180 / cc.PI;
cc.UINT_MAX = 4294967295;
cc.swap = function (a, b, c) {
    if (cc.isObject(c) && !cc.isUndefined(c.x) && !cc.isUndefined(c.y)) {
        var d = c[a];
        c[a] = c[b];
        c[b] = d
    } else cc.log(cc._LogInfos.swap)
};
cc.lerp = function (a, b, c) {
    return a + (b - a) * c
};
cc.rand = function () {
    return 16777215 * Math.random()
};
cc.randomMinus1To1 = function () {
    return 2 * (Math.random() - 0.5)
};
cc.random0To1 = Math.random;
cc.degreesToRadians = function (a) {
    return a * cc.RAD
};
cc.radiansToDegrees = function (a) {
    return a * cc.DEG
};
cc.radiansToDegress = function (a) {
    cc.log(cc._LogInfos.radiansToDegress);
    return a * cc.DEG
};
cc.REPEAT_FOREVER = Number.MAX_VALUE - 1;
cc.nodeDrawSetup = function (a) {
    a._shaderProgram && (a._shaderProgram.use(), a._shaderProgram.setUniformForModelViewAndProjectionMatrixWithMat4())
};
cc.enableDefaultGLStates = function () {};
cc.disableDefaultGLStates = function () {};
cc.incrementGLDraws = function (a) {
    cc.g_NumberOfDraws += a
};
cc.FLT_EPSILON = 1.192092896E-7;
cc.contentScaleFactor = function () {
    return cc.director._contentScaleFactor
};
cc.pointPointsToPixels = function (a) {
    var b = cc.contentScaleFactor();
    return cc.p(a.x * b, a.y * b)
};
cc.pointPixelsToPoints = function (a) {
    var b = cc.contentScaleFactor();
    return cc.p(a.x / b, a.y / b)
};
cc._pointPixelsToPointsOut = function (a, b) {
    var c = cc.contentScaleFactor();
    b.x = a.x / c;
    b.y = a.y / c
};
cc.sizePointsToPixels = function (a) {
    var b = cc.contentScaleFactor();
    return cc.size(a.width * b, a.height * b)
};
cc.sizePixelsToPoints = function (a) {
    var b = cc.contentScaleFactor();
    return cc.size(a.width / b, a.height / b)
};
cc._sizePixelsToPointsOut = function (a, b) {
    var c = cc.contentScaleFactor();
    b.width = a.width / c;
    b.height = a.height / c
};
cc.rectPixelsToPoints = function (a) {
    var b = cc.contentScaleFactor();
    return cc.rect(a.x / b, a.y / b, a.width / b, a.height / b)
};
cc.rectPointsToPixels = function (a) {
    var b = cc.contentScaleFactor();
    return cc.rect(a.x * b, a.y * b, a.width * b, a.height * b)
};
cc.ONE = 1;
cc.ZERO = 0;
cc.SRC_ALPHA = 770;
cc.SRC_ALPHA_SATURATE = 776;
cc.SRC_COLOR = 768;
cc.DST_ALPHA = 772;
cc.DST_COLOR = 774;
cc.ONE_MINUS_SRC_ALPHA = 771;
cc.ONE_MINUS_SRC_COLOR = 769;
cc.ONE_MINUS_DST_ALPHA = 773;
cc.ONE_MINUS_DST_COLOR = 775;
cc.ONE_MINUS_CONSTANT_ALPHA = 32772;
cc.ONE_MINUS_CONSTANT_COLOR = 32770;
cc.LINEAR = 9729;
cc.REPEAT = 10497;
cc.CLAMP_TO_EDGE = 33071;
cc.MIRRORED_REPEAT = 33648;
cc.BLEND_SRC = cc.SRC_ALPHA;
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
    cc._renderType === cc.game.RENDER_TYPE_WEBGL && cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA && (cc.BLEND_SRC = cc.ONE)
});
cc.BLEND_DST = cc.ONE_MINUS_SRC_ALPHA;
cc.checkGLErrorDebug = function () {
    if (cc.renderMode === cc.game.RENDER_TYPE_WEBGL) {
        var a = cc._renderContext.getError();
        a && cc.log(cc._LogInfos.checkGLErrorDebug, a)
    }
};
cc.ORIENTATION_PORTRAIT = 1;
cc.ORIENTATION_LANDSCAPE = 2;
cc.ORIENTATION_AUTO = 3;
cc.CONCURRENCY_HTTP_REQUEST_COUNT = cc.sys.isMobile ? 20 : 0;
cc.VERTEX_ATTRIB_FLAG_NONE = 0;
cc.VERTEX_ATTRIB_FLAG_POSITION = 1;
cc.VERTEX_ATTRIB_FLAG_COLOR = 2;
cc.VERTEX_ATTRIB_FLAG_TEX_COORDS = 4;
cc.VERTEX_ATTRIB_FLAG_POS_COLOR_TEX = cc.VERTEX_ATTRIB_FLAG_POSITION | cc.VERTEX_ATTRIB_FLAG_COLOR | cc.VERTEX_ATTRIB_FLAG_TEX_COORDS;
cc.GL_ALL = 0;
cc.VERTEX_ATTRIB_POSITION = 0;
cc.VERTEX_ATTRIB_COLOR = 1;
cc.VERTEX_ATTRIB_TEX_COORDS = 2;
cc.VERTEX_ATTRIB_MAX = 7;
cc.UNIFORM_PMATRIX = 0;
cc.UNIFORM_MVMATRIX = 1;
cc.UNIFORM_MVPMATRIX = 2;
cc.UNIFORM_TIME = 3;
cc.UNIFORM_SINTIME = 4;
cc.UNIFORM_COSTIME = 5;
cc.UNIFORM_RANDOM01 = 6;
cc.UNIFORM_SAMPLER = 7;
cc.UNIFORM_MAX = 8;
cc.SHADER_POSITION_TEXTURECOLOR = "ShaderPositionTextureColor";
cc.SHADER_SPRITE_POSITION_TEXTURECOLOR = "ShaderSpritePositionTextureColor";
cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY = "ShaderSpritePositionTextureColorGray";
cc.SHADER_POSITION_TEXTURECOLORALPHATEST = "ShaderPositionTextureColorAlphaTest";
cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST = "ShaderSpritePositionTextureColorAlphaTest";
cc.SHADER_POSITION_COLOR = "ShaderPositionColor";
cc.SHADER_SPRITE_POSITION_COLOR = "ShaderSpritePositionColor";
cc.SHADER_POSITION_TEXTURE = "ShaderPositionTexture";
cc.SHADER_POSITION_TEXTURE_UCOLOR = "ShaderPositionTextureUColor";
cc.SHADER_POSITION_TEXTUREA8COLOR = "ShaderPositionTextureA8Color";
cc.SHADER_POSITION_UCOLOR = "ShaderPositionUColor";
cc.SHADER_POSITION_LENGTHTEXTURECOLOR = "ShaderPositionLengthTextureColor";
cc.UNIFORM_PMATRIX_S = "CC_PMatrix";
cc.UNIFORM_MVMATRIX_S = "CC_MVMatrix";
cc.UNIFORM_MVPMATRIX_S = "CC_MVPMatrix";
cc.UNIFORM_TIME_S = "CC_Time";
cc.UNIFORM_SINTIME_S = "CC_SinTime";
cc.UNIFORM_COSTIME_S = "CC_CosTime";
cc.UNIFORM_RANDOM01_S = "CC_Random01";
cc.UNIFORM_SAMPLER_S = "CC_Texture0";
cc.UNIFORM_ALPHA_TEST_VALUE_S = "CC_alpha_value";
cc.ATTRIBUTE_NAME_COLOR = "a_color";
cc.ATTRIBUTE_NAME_POSITION = "a_position";
cc.ATTRIBUTE_NAME_TEX_COORD = "a_texCoord";
cc.ATTRIBUTE_NAME_MVMAT = "a_mvMatrix";
cc.ITEM_SIZE = 32;
cc.CURRENT_ITEM = 3233828865;
cc.ZOOM_ACTION_TAG = 3233828866;
cc.NORMAL_TAG = 8801;
cc.SELECTED_TAG = 8802;
cc.DISABLE_TAG = 8803;
cc.arrayVerifyType = function (a, b) {
    if (a && 0 < a.length)
        for (var c = 0; c < a.length; c++)
            if (!(a[c] instanceof b)) return cc.log("element type is wrong!"), !1;
    return !0
};
cc.arrayRemoveObject = function (a, b) {
    for (var c = 0, d = a.length; c < d; c++)
        if (a[c] === b) {
            a.splice(c, 1);
            break
        }
};
cc.arrayRemoveArray = function (a, b) {
    for (var c = 0, d = b.length; c < d; c++) cc.arrayRemoveObject(a, b[c])
};
cc.arrayAppendObjectsToIndex = function (a, b, c) {
    a.splice.apply(a, [c, 0].concat(b));
    return a
};
cc.copyArray = function (a) {
    var b, c = a.length,
        d = Array(c);
    for (b = 0; b < c; b += 1) d[b] = a[b];
    return d
};
cc.Color = function (a, b, c, d) {
    this._val = ((a || 0) << 24 >>> 0) + ((b || 0) << 16) + ((c || 0) << 8) + ("number" === typeof d ? d : 255)
};
_p = cc.Color.prototype;
_p._getR = function () {
    return (this._val & 4278190080) >>> 24
};
_p._setR = function (a) {
    this._val = this._val & 16777215 | a << 24 >>> 0
};
_p._getG = function () {
    return (this._val & 16711680) >> 16
};
_p._setG = function (a) {
    this._val = this._val & 4278255615 | a << 16
};
_p._getB = function () {
    return (this._val & 65280) >> 8
};
_p._setB = function (a) {
    this._val = this._val & 4294902015 | a << 8
};
_p._getA = function () {
    return this._val & 255
};
_p._setA = function (a) {
    this._val = this._val & 4294967040 | a
};
cc.defineGetterSetter(_p, "r", _p._getR, _p._setR);
cc.defineGetterSetter(_p, "g", _p._getG, _p._setG);
cc.defineGetterSetter(_p, "b", _p._getB, _p._setB);
cc.defineGetterSetter(_p, "a", _p._getA, _p._setA);
cc.color = function (a, b, c, d) {
    return void 0 === a ? new cc.Color(0, 0, 0, 255) : "object" === typeof a ? new cc.Color(a.r, a.g, a.b, null == a.a ? 255 : a.a) : "string" === typeof a ? cc.hexToColor(a) : new cc.Color(a, b, c, null == d ? 255 : d)
};
cc.colorEqual = function (a, b) {
    return a.r === b.r && a.g === b.g && a.b === b.b
};
cc.Acceleration = function (a, b, c, d) {
    this.x = a || 0;
    this.y = b || 0;
    this.z = c || 0;
    this.timestamp = d || 0
};
cc.Vertex2F = function (a, b, c, d) {
    this._arrayBuffer = c || new ArrayBuffer(cc.Vertex2F.BYTES_PER_ELEMENT);
    this._offset = d || 0;
    this._view = new Float32Array(this._arrayBuffer, this._offset, 2);
    this._view[0] = a || 0;
    this._view[1] = b || 0
};
cc.Vertex2F.BYTES_PER_ELEMENT = 8;
_p = cc.Vertex2F.prototype;
_p._getX = function () {
    return this._view[0]
};
_p._setX = function (a) {
    this._view[0] = a
};
_p._getY = function () {
    return this._view[1]
};
_p._setY = function (a) {
    this._view[1] = a
};
cc.defineGetterSetter(_p, "x", _p._getX, _p._setX);
cc.defineGetterSetter(_p, "y", _p._getY, _p._setY);
cc.Vertex3F = function (a, b, c, d, f) {
    this._arrayBuffer = d || new ArrayBuffer(cc.Vertex3F.BYTES_PER_ELEMENT);
    this._offset = f || 0;
    this._view = new Float32Array(this._arrayBuffer, this._offset, 3);
    this._view[0] = a || 0;
    this._view[1] = b || 0;
    this._view[2] = c || 0
};
cc.Vertex3F.BYTES_PER_ELEMENT = 12;
_p = cc.Vertex3F.prototype;
_p._getX = function () {
    return this._view[0]
};
_p._setX = function (a) {
    this._view[0] = a
};
_p._getY = function () {
    return this._view[1]
};
_p._setY = function (a) {
    this._view[1] = a
};
_p._getZ = function () {
    return this._view[2]
};
_p._setZ = function (a) {
    this._view[2] = a
};
cc.defineGetterSetter(_p, "x", _p._getX, _p._setX);
cc.defineGetterSetter(_p, "y", _p._getY, _p._setY);
cc.defineGetterSetter(_p, "z", _p._getZ, _p._setZ);
cc.Tex2F = function (a, b, c, d) {
    this._arrayBuffer = c || new ArrayBuffer(cc.Tex2F.BYTES_PER_ELEMENT);
    this._offset = d || 0;
    this._view = new Float32Array(this._arrayBuffer, this._offset, 2);
    this._view[0] = a || 0;
    this._view[1] = b || 0
};
cc.Tex2F.BYTES_PER_ELEMENT = 8;
_p = cc.Tex2F.prototype;
_p._getU = function () {
    return this._view[0]
};
_p._setU = function (a) {
    this._view[0] = a
};
_p._getV = function () {
    return this._view[1]
};
_p._setV = function (a) {
    this._view[1] = a
};
cc.defineGetterSetter(_p, "u", _p._getU, _p._setU);
cc.defineGetterSetter(_p, "v", _p._getV, _p._setV);
cc.Quad2 = function (a, b, c, d, f, g) {
    this._arrayBuffer = f || new ArrayBuffer(cc.Quad2.BYTES_PER_ELEMENT);
    this._offset = g || 0;
    f = this._arrayBuffer;
    g = this._offset;
    var h = cc.Vertex2F.BYTES_PER_ELEMENT;
    this._tl = a ? new cc.Vertex2F(a.x, a.y, f, g) : new cc.Vertex2F(0, 0, f, g);
    g += h;
    this._tr = b ? new cc.Vertex2F(b.x, b.y, f, g) : new cc.Vertex2F(0, 0, f, g);
    g += h;
    this._bl = c ? new cc.Vertex2F(c.x, c.y, f, g) : new cc.Vertex2F(0, 0, f, g);
    g += h;
    this._br = d ? new cc.Vertex2F(d.x, d.y, f, g) : new cc.Vertex2F(0, 0, f, g)
};
cc.Quad2.BYTES_PER_ELEMENT = 32;
_p = cc.Quad2.prototype;
_p._getTL = function () {
    return this._tl
};
_p._setTL = function (a) {
    this._tl._view[0] = a.x;
    this._tl._view[1] = a.y
};
_p._getTR = function () {
    return this._tr
};
_p._setTR = function (a) {
    this._tr._view[0] = a.x;
    this._tr._view[1] = a.y
};
_p._getBL = function () {
    return this._bl
};
_p._setBL = function (a) {
    this._bl._view[0] = a.x;
    this._bl._view[1] = a.y
};
_p._getBR = function () {
    return this._br
};
_p._setBR = function (a) {
    this._br._view[0] = a.x;
    this._br._view[1] = a.y
};
cc.defineGetterSetter(_p, "tl", _p._getTL, _p._setTL);
cc.defineGetterSetter(_p, "tr", _p._getTR, _p._setTR);
cc.defineGetterSetter(_p, "bl", _p._getBL, _p._setBL);
cc.defineGetterSetter(_p, "br", _p._getBR, _p._setBR);
cc.Quad3 = function (a, b, c, d, f, g) {
    this._arrayBuffer = f || new ArrayBuffer(cc.Quad3.BYTES_PER_ELEMENT);
    this._offset = g || 0;
    f = this._arrayBuffer;
    g = this._offset;
    var h = cc.Vertex3F.BYTES_PER_ELEMENT;
    this.bl = a ? new cc.Vertex3F(a.x, a.y, a.z, f, g) : new cc.Vertex3F(0, 0, 0, f, g);
    g += h;
    this.br = b ? new cc.Vertex3F(b.x, b.y, b.z, f, g) : new cc.Vertex3F(0, 0, 0, f, g);
    g += h;
    this.tl = c ? new cc.Vertex3F(c.x, c.y, c.z, f, g) : new cc.Vertex3F(0, 0, 0, f, g);
    g += h;
    this.tr = d ? new cc.Vertex3F(d.x, d.y, d.z, f, g) : new cc.Vertex3F(0, 0, 0, f, g)
};
cc.Quad3.BYTES_PER_ELEMENT = 48;
cc.V3F_C4B_T2F = function (a, b, c, d, f) {
    this._arrayBuffer = d || new ArrayBuffer(cc.V3F_C4B_T2F.BYTES_PER_ELEMENT);
    this._offset = f || 0;
    d = this._arrayBuffer;
    f = this._offset;
    this._vertices = a ? new cc.Vertex3F(a.x, a.y, a.z, d, f) : new cc.Vertex3F(0, 0, 0, d, f);
    f += cc.Vertex3F.BYTES_PER_ELEMENT;
    this._colors = b ? new cc._WebGLColor(b.r, b.g, b.b, b.a, d, f) : new cc._WebGLColor(0, 0, 0, 0, d, f);
    f += cc._WebGLColor.BYTES_PER_ELEMENT;
    this._texCoords = c ? new cc.Tex2F(c.u, c.v, d, f) : new cc.Tex2F(0, 0, d, f)
};
cc.V3F_C4B_T2F.BYTES_PER_ELEMENT = 24;
_p = cc.V3F_C4B_T2F.prototype;
_p._getVertices = function () {
    return this._vertices
};
_p._setVertices = function (a) {
    var b = this._vertices;
    b._view[0] = a.x;
    b._view[1] = a.y;
    b._view[2] = a.z
};
_p._getColor = function () {
    return this._colors
};
_p._setColor = function (a) {
    var b = this._colors;
    b._view[0] = a.r;
    b._view[1] = a.g;
    b._view[2] = a.b;
    b._view[3] = a.a
};
_p._getTexCoords = function () {
    return this._texCoords
};
_p._setTexCoords = function (a) {
    this._texCoords._view[0] = a.u;
    this._texCoords._view[1] = a.v
};
cc.defineGetterSetter(_p, "vertices", _p._getVertices, _p._setVertices);
cc.defineGetterSetter(_p, "colors", _p._getColor, _p._setColor);
cc.defineGetterSetter(_p, "texCoords", _p._getTexCoords, _p._setTexCoords);
cc.V3F_C4B_T2F_Quad = function (a, b, c, d, f, g) {
    this._arrayBuffer = f || new ArrayBuffer(cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT);
    this._offset = g || 0;
    f = this._arrayBuffer;
    g = this._offset;
    var h = cc.V3F_C4B_T2F.BYTES_PER_ELEMENT;
    this._tl = a ? new cc.V3F_C4B_T2F(a.vertices, a.colors, a.texCoords, f, g) : new cc.V3F_C4B_T2F(null, null, null, f, g);
    g += h;
    this._bl = b ? new cc.V3F_C4B_T2F(b.vertices, b.colors, b.texCoords, f, g) : new cc.V3F_C4B_T2F(null, null, null, f, g);
    g += h;
    this._tr = c ? new cc.V3F_C4B_T2F(c.vertices, c.colors, c.texCoords, f, g) : new cc.V3F_C4B_T2F(null,
        null, null, f, g);
    g += h;
    this._br = d ? new cc.V3F_C4B_T2F(d.vertices, d.colors, d.texCoords, f, g) : new cc.V3F_C4B_T2F(null, null, null, f, g)
};
cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT = 96;
_p = cc.V3F_C4B_T2F_Quad.prototype;
_p._getTL = function () {
    return this._tl
};
_p._setTL = function (a) {
    var b = this._tl;
    b.vertices = a.vertices;
    b.colors = a.colors;
    b.texCoords = a.texCoords
};
_p._getBL = function () {
    return this._bl
};
_p._setBL = function (a) {
    var b = this._bl;
    b.vertices = a.vertices;
    b.colors = a.colors;
    b.texCoords = a.texCoords
};
_p._getTR = function () {
    return this._tr
};
_p._setTR = function (a) {
    var b = this._tr;
    b.vertices = a.vertices;
    b.colors = a.colors;
    b.texCoords = a.texCoords
};
_p._getBR = function () {
    return this._br
};
_p._setBR = function (a) {
    var b = this._br;
    b.vertices = a.vertices;
    b.colors = a.colors;
    b.texCoords = a.texCoords
};
_p._getArrayBuffer = function () {
    return this._arrayBuffer
};
cc.defineGetterSetter(_p, "tl", _p._getTL, _p._setTL);
cc.defineGetterSetter(_p, "tr", _p._getTR, _p._setTR);
cc.defineGetterSetter(_p, "bl", _p._getBL, _p._setBL);
cc.defineGetterSetter(_p, "br", _p._getBR, _p._setBR);
cc.defineGetterSetter(_p, "arrayBuffer", _p._getArrayBuffer, null);
cc.V3F_C4B_T2F_QuadZero = function () {
    return new cc.V3F_C4B_T2F_Quad
};
cc.V3F_C4B_T2F_QuadCopy = function (a) {
    if (!a) return cc.V3F_C4B_T2F_QuadZero();
    var b = a.tl,
        c = a.bl,
        d = a.tr;
    a = a.br;
    return {
        tl: {
            vertices: {
                x: b.vertices.x,
                y: b.vertices.y,
                z: b.vertices.z
            },
            colors: {
                r: b.colors.r,
                g: b.colors.g,
                b: b.colors.b,
                a: b.colors.a
            },
            texCoords: {
                u: b.texCoords.u,
                v: b.texCoords.v
            }
        },
        bl: {
            vertices: {
                x: c.vertices.x,
                y: c.vertices.y,
                z: c.vertices.z
            },
            colors: {
                r: c.colors.r,
                g: c.colors.g,
                b: c.colors.b,
                a: c.colors.a
            },
            texCoords: {
                u: c.texCoords.u,
                v: c.texCoords.v
            }
        },
        tr: {
            vertices: {
                x: d.vertices.x,
                y: d.vertices.y,
                z: d.vertices.z
            },
            colors: {
                r: d.colors.r,
                g: d.colors.g,
                b: d.colors.b,
                a: d.colors.a
            },
            texCoords: {
                u: d.texCoords.u,
                v: d.texCoords.v
            }
        },
        br: {
            vertices: {
                x: a.vertices.x,
                y: a.vertices.y,
                z: a.vertices.z
            },
            colors: {
                r: a.colors.r,
                g: a.colors.g,
                b: a.colors.b,
                a: a.colors.a
            },
            texCoords: {
                u: a.texCoords.u,
                v: a.texCoords.v
            }
        }
    }
};
cc.V3F_C4B_T2F_QuadsCopy = function (a) {
    if (!a) return [];
    for (var b = [], c = 0; c < a.length; c++) b.push(cc.V3F_C4B_T2F_QuadCopy(a[c]));
    return b
};
cc.V2F_C4B_T2F = function (a, b, c, d, f) {
    this._arrayBuffer = d || new ArrayBuffer(cc.V2F_C4B_T2F.BYTES_PER_ELEMENT);
    this._offset = f || 0;
    d = this._arrayBuffer;
    f = this._offset;
    this._vertices = a ? new cc.Vertex2F(a.x, a.y, d, f) : new cc.Vertex2F(0, 0, d, f);
    f += cc.Vertex2F.BYTES_PER_ELEMENT;
    this._colors = b ? new cc._WebGLColor(b.r, b.g, b.b, b.a, d, f) : new cc._WebGLColor(0, 0, 0, 0, d, f);
    f += cc._WebGLColor.BYTES_PER_ELEMENT;
    this._texCoords = c ? new cc.Tex2F(c.u, c.v, d, f) : new cc.Tex2F(0, 0, d, f)
};
cc.V2F_C4B_T2F.BYTES_PER_ELEMENT = 20;
_p = cc.V2F_C4B_T2F.prototype;
_p._getVertices = function () {
    return this._vertices
};
_p._setVertices = function (a) {
    this._vertices._view[0] = a.x;
    this._vertices._view[1] = a.y
};
_p._getColor = function () {
    return this._colors
};
_p._setColor = function (a) {
    var b = this._colors;
    b._view[0] = a.r;
    b._view[1] = a.g;
    b._view[2] = a.b;
    b._view[3] = a.a
};
_p._getTexCoords = function () {
    return this._texCoords
};
_p._setTexCoords = function (a) {
    this._texCoords._view[0] = a.u;
    this._texCoords._view[1] = a.v
};
cc.defineGetterSetter(_p, "vertices", _p._getVertices, _p._setVertices);
cc.defineGetterSetter(_p, "colors", _p._getColor, _p._setColor);
cc.defineGetterSetter(_p, "texCoords", _p._getTexCoords, _p._setTexCoords);
cc.V2F_C4B_T2F_Triangle = function (a, b, c, d, f) {
    this._arrayBuffer = d || new ArrayBuffer(cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT);
    this._offset = f || 0;
    d = this._arrayBuffer;
    f = this._offset;
    var g = cc.V2F_C4B_T2F.BYTES_PER_ELEMENT;
    this._a = a ? new cc.V2F_C4B_T2F(a.vertices, a.colors, a.texCoords, d, f) : new cc.V2F_C4B_T2F(null, null, null, d, f);
    f += g;
    this._b = b ? new cc.V2F_C4B_T2F(b.vertices, b.colors, b.texCoords, d, f) : new cc.V2F_C4B_T2F(null, null, null, d, f);
    f += g;
    this._c = c ? new cc.V2F_C4B_T2F(c.vertices, c.colors, c.texCoords, d, f) :
        new cc.V2F_C4B_T2F(null, null, null, d, f)
};
cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT = 60;
_p = cc.V2F_C4B_T2F_Triangle.prototype;
_p._getA = function () {
    return this._a
};
_p._setA = function (a) {
    var b = this._a;
    b.vertices = a.vertices;
    b.colors = a.colors;
    b.texCoords = a.texCoords
};
_p._getB = function () {
    return this._b
};
_p._setB = function (a) {
    var b = this._b;
    b.vertices = a.vertices;
    b.colors = a.colors;
    b.texCoords = a.texCoords
};
_p._getC = function () {
    return this._c
};
_p._setC = function (a) {
    var b = this._c;
    b.vertices = a.vertices;
    b.colors = a.colors;
    b.texCoords = a.texCoords
};
cc.defineGetterSetter(_p, "a", _p._getA, _p._setA);
cc.defineGetterSetter(_p, "b", _p._getB, _p._setB);
cc.defineGetterSetter(_p, "c", _p._getC, _p._setC);
cc.vertex2 = function (a, b) {
    return new cc.Vertex2F(a, b)
};
cc.vertex3 = function (a, b, c) {
    return new cc.Vertex3F(a, b, c)
};
cc.tex2 = function (a, b) {
    return new cc.Tex2F(a, b)
};
cc.BlendFunc = function (a, b) {
    this.src = a;
    this.dst = b
};
cc.blendFuncDisable = function () {
    return new cc.BlendFunc(cc.ONE, cc.ZERO)
};
cc.hexToColor = function (a) {
    a = a.replace(/^#?/, "0x");
    a = parseInt(a);
    return new cc.Color(a >> 16, (a >> 8) % 256, a % 256)
};
cc.colorToHex = function (a) {
    var b = a.r.toString(16),
        c = a.g.toString(16),
        d = a.b.toString(16);
    return "#" + (16 > a.r ? "0" + b : b) + (16 > a.g ? "0" + c : c) + (16 > a.b ? "0" + d : d)
};
cc.TEXT_ALIGNMENT_LEFT = 0;
cc.TEXT_ALIGNMENT_CENTER = 1;
cc.TEXT_ALIGNMENT_RIGHT = 2;
cc.VERTICAL_TEXT_ALIGNMENT_TOP = 0;
cc.VERTICAL_TEXT_ALIGNMENT_CENTER = 1;
cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM = 2;
cc._Dictionary = cc.Class.extend({
    _keyMapTb: null,
    _valueMapTb: null,
    __currId: 0,
    ctor: function () {
        this._keyMapTb = {};
        this._valueMapTb = {};
        this.__currId = 2 << (0 | 10 * Math.random())
    },
    __getKey: function () {
        this.__currId++;
        return "key_" + this.__currId
    },
    setObject: function (a, b) {
        if (null != b) {
            var c = this.__getKey();
            this._keyMapTb[c] = b;
            this._valueMapTb[c] = a
        }
    },
    objectForKey: function (a) {
        if (null == a) return null;
        var b = this._keyMapTb,
            c;
        for (c in b)
            if (b[c] === a) return this._valueMapTb[c];
        return null
    },
    valueForKey: function (a) {
        return this.objectForKey(a)
    },
    removeObjectForKey: function (a) {
        if (null != a) {
            var b = this._keyMapTb,
                c;
            for (c in b)
                if (b[c] === a) {
                    delete this._valueMapTb[c];
                    delete b[c];
                    break
                }
        }
    },
    removeObjectsForKeys: function (a) {
        if (null != a)
            for (var b = 0; b < a.length; b++) this.removeObjectForKey(a[b])
    },
    allKeys: function () {
        var a = [],
            b = this._keyMapTb,
            c;
        for (c in b) a.push(b[c]);
        return a
    },
    removeAllObjects: function () {
        this._keyMapTb = {};
        this._valueMapTb = {}
    },
    count: function () {
        return this.allKeys().length
    }
});
cc.FontDefinition = function (a) {
    this.fontName = "Arial";
    this.fontSize = 12;
    this.textAlign = cc.TEXT_ALIGNMENT_CENTER;
    this.verticalAlign = cc.VERTICAL_TEXT_ALIGNMENT_TOP;
    this.fillStyle = cc.color(255, 255, 255, 255);
    this.boundingHeight = this.boundingWidth = 0;
    this.strokeEnabled = !1;
    this.strokeStyle = cc.color(255, 255, 255, 255);
    this.lineWidth = 1;
    this.fontWeight = this.fontStyle = this.lineHeight = "normal";
    this.shadowEnabled = !1;
    this.shadowBlur = this.shadowOffsetY = this.shadowOffsetX = 0;
    this.shadowOpacity = 1;
    if (a && a instanceof Object)
        for (var b in a) this[b] =
            a[b]
};
cc.FontDefinition.prototype._getCanvasFontStr = function () {
    return this.fontStyle + " " + this.fontWeight + " " + this.fontSize + "px/" + (!this.lineHeight.charAt ? this.lineHeight + "px" : this.lineHeight) + " '" + this.fontName + "'"
};
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
    cc._renderType === cc.game.RENDER_TYPE_WEBGL && (cc._WebGLColor = function (a, b, c, d, f, g) {
            this._arrayBuffer = f || new ArrayBuffer(cc._WebGLColor.BYTES_PER_ELEMENT);
            this._offset = g || 0;
            this._view = new Uint8Array(this._arrayBuffer, this._offset, 4);
            this._view[0] = a || 0;
            this._view[1] = b || 0;
            this._view[2] = c || 0;
            this._view[3] = null == d ? 255 : d;
            void 0 === d && (this.a_undefined = !0)
        }, cc._WebGLColor.BYTES_PER_ELEMENT = 4, _p = cc._WebGLColor.prototype, _p._getR = function () {
            return this._view[0]
        },
        _p._setR = function (a) {
            this._view[0] = 0 > a ? 0 : a
        }, _p._getG = function () {
            return this._view[1]
        }, _p._setG = function (a) {
            this._view[1] = 0 > a ? 0 : a
        }, _p._getB = function () {
            return this._view[2]
        }, _p._setB = function (a) {
            this._view[2] = 0 > a ? 0 : a
        }, _p._getA = function () {
            return this._view[3]
        }, _p._setA = function (a) {
            this._view[3] = 0 > a ? 0 : a
        }, cc.defineGetterSetter(_p, "r", _p._getR, _p._setR), cc.defineGetterSetter(_p, "g", _p._getG, _p._setG), cc.defineGetterSetter(_p, "b", _p._getB, _p._setB), cc.defineGetterSetter(_p, "a", _p._getA, _p._setA))
});
_p = cc.color;
_p._getWhite = function () {
    return cc.color(255, 255, 255)
};
_p._getYellow = function () {
    return cc.color(255, 255, 0)
};
_p._getBlue = function () {
    return cc.color(0, 0, 255)
};
_p._getGreen = function () {
    return cc.color(0, 255, 0)
};
_p._getRed = function () {
    return cc.color(255, 0, 0)
};
_p._getMagenta = function () {
    return cc.color(255, 0, 255)
};
_p._getBlack = function () {
    return cc.color(0, 0, 0)
};
_p._getOrange = function () {
    return cc.color(255, 127, 0)
};
_p._getGray = function () {
    return cc.color(166, 166, 166)
};
cc.defineGetterSetter(_p, "WHITE", _p._getWhite);
cc.defineGetterSetter(_p, "YELLOW", _p._getYellow);
cc.defineGetterSetter(_p, "BLUE", _p._getBlue);
cc.defineGetterSetter(_p, "GREEN", _p._getGreen);
cc.defineGetterSetter(_p, "RED", _p._getRed);
cc.defineGetterSetter(_p, "MAGENTA", _p._getMagenta);
cc.defineGetterSetter(_p, "BLACK", _p._getBlack);
cc.defineGetterSetter(_p, "ORANGE", _p._getOrange);
cc.defineGetterSetter(_p, "GRAY", _p._getGray);
cc.BlendFunc._disable = function () {
    return new cc.BlendFunc(cc.ONE, cc.ZERO)
};
cc.BlendFunc._alphaPremultiplied = function () {
    return new cc.BlendFunc(cc.ONE, cc.ONE_MINUS_SRC_ALPHA)
};
cc.BlendFunc._alphaNonPremultiplied = function () {
    return new cc.BlendFunc(cc.SRC_ALPHA, cc.ONE_MINUS_SRC_ALPHA)
};
cc.BlendFunc._additive = function () {
    return new cc.BlendFunc(cc.SRC_ALPHA, cc.ONE)
};
cc.defineGetterSetter(cc.BlendFunc, "DISABLE", cc.BlendFunc._disable);
cc.defineGetterSetter(cc.BlendFunc, "ALPHA_PREMULTIPLIED", cc.BlendFunc._alphaPremultiplied);
cc.defineGetterSetter(cc.BlendFunc, "ALPHA_NON_PREMULTIPLIED", cc.BlendFunc._alphaNonPremultiplied);
cc.defineGetterSetter(cc.BlendFunc, "ADDITIVE", cc.BlendFunc._additive);
cc.Touches = [];
cc.TouchesIntergerDict = {};
cc.DENSITYDPI_DEVICE = "device-dpi";
cc.DENSITYDPI_HIGH = "high-dpi";
cc.DENSITYDPI_MEDIUM = "medium-dpi";
cc.DENSITYDPI_LOW = "low-dpi";
var __BrowserGetter = {
    init: function () {
        this.html = document.documentElement
    },
    availWidth: function (a) {
        return !a || a === this.html ? window.innerWidth : a.clientWidth
    },
    availHeight: function (a) {
        return !a || a === this.html ? window.innerHeight : a.clientHeight
    },
    meta: {
        width: "device-width"
    },
    adaptationType: cc.sys.browserType
}; -
1 < window.navigator.userAgent.indexOf("OS 8_1_") && (__BrowserGetter.adaptationType = cc.sys.BROWSER_TYPE_MIUI);
cc.sys.os === cc.sys.OS_IOS && (__BrowserGetter.adaptationType = cc.sys.BROWSER_TYPE_SAFARI);
switch (__BrowserGetter.adaptationType) {
case cc.sys.BROWSER_TYPE_SAFARI:
    __BrowserGetter.meta["minimal-ui"] = "true";
    break;
case cc.sys.BROWSER_TYPE_CHROME:
    __BrowserGetter.__defineGetter__("target-densitydpi", function () {
        return cc.view._targetDensityDPI
    });
    break;
case cc.sys.BROWSER_TYPE_MIUI:
    __BrowserGetter.init = function (a) {
        if (!a.__resizeWithBrowserSize) {
            var b = function () {
                a.setDesignResolutionSize(a._designResolutionSize.width, a._designResolutionSize.height, a._resolutionPolicy);
                window.removeEventListener("resize",
                    b, !1)
            };
            window.addEventListener("resize", b, !1)
        }
    }
}
var _scissorRect = null;
cc.EGLView = cc.Class.extend({
    _delegate: null,
    _frameSize: null,
    _designResolutionSize: null,
    _originalDesignResolutionSize: null,
    _viewPortRect: null,
    _visibleRect: null,
    _retinaEnabled: !1,
    _autoFullScreen: !1,
    _devicePixelRatio: 1,
    _viewName: "",
    _resizeCallback: null,
    _orientationChanging: !1,
    _resizing: !1,
    _scaleX: 1,
    _originalScaleX: 1,
    _scaleY: 1,
    _originalScaleY: 1,
    _isRotated: !1,
    _orientation: 3,
    _resolutionPolicy: null,
    _rpExactFit: null,
    _rpShowAll: null,
    _rpNoBorder: null,
    _rpFixedHeight: null,
    _rpFixedWidth: null,
    _initialized: !1,
    _contentTranslateLeftTop: null,
    _frame: null,
    _frameZoomFactor: 1,
    __resizeWithBrowserSize: !1,
    _isAdjustViewPort: !0,
    _targetDensityDPI: null,
    ctor: function () {
        var a = document,
            b = cc.ContainerStrategy,
            c = cc.ContentStrategy;
        __BrowserGetter.init(this);
        this._frame = cc.container.parentNode === a.body ? a.documentElement : cc.container.parentNode;
        this._frameSize = cc.size(0, 0);
        this._initFrameSize();
        var a = cc._canvas.width,
            d = cc._canvas.height;
        this._designResolutionSize = cc.size(a, d);
        this._originalDesignResolutionSize = cc.size(a, d);
        this._viewPortRect = cc.rect(0,
            0, a, d);
        this._visibleRect = cc.rect(0, 0, a, d);
        this._contentTranslateLeftTop = {
            left: 0,
            top: 0
        };
        this._viewName = "Cocos2dHTML5";
        cc.visibleRect && cc.visibleRect.init(this._visibleRect);
        this._rpExactFit = new cc.ResolutionPolicy(b.EQUAL_TO_FRAME, c.EXACT_FIT);
        this._rpShowAll = new cc.ResolutionPolicy(b.PROPORTION_TO_FRAME, c.SHOW_ALL);
        this._rpNoBorder = new cc.ResolutionPolicy(b.EQUAL_TO_FRAME, c.NO_BORDER);
        this._rpFixedHeight = new cc.ResolutionPolicy(b.EQUAL_TO_FRAME, c.FIXED_HEIGHT);
        this._rpFixedWidth = new cc.ResolutionPolicy(b.EQUAL_TO_FRAME,
            c.FIXED_WIDTH);
        this._targetDensityDPI = cc.DENSITYDPI_HIGH
    },
    _resizeEvent: function () {
        var a;
        a = this.setDesignResolutionSize ? this : cc.view;
        if (!a._orientationChanging) {
            var b = a._frameSize.width,
                c = a._frameSize.height,
                d = a._isRotated;
            if (cc.sys.isMobile) {
                var f = cc.game.container.style,
                    g = f.margin;
                f.margin = "0";
                f.display = "none";
                a._initFrameSize();
                f.margin = g;
                f.display = "block"
            } else a._initFrameSize();
            a._isRotated === d && a._frameSize.width === b && a._frameSize.height === c || (b = a._originalDesignResolutionSize.width, c = a._originalDesignResolutionSize.height,
                a._resizing = !0, 0 < b && a.setDesignResolutionSize(b, c, a._resolutionPolicy), a._resizing = !1, cc.eventManager.dispatchCustomEvent("canvas-resize"), a._resizeCallback && a._resizeCallback.call())
        }
    },
    _orientationChange: function () {
        cc.view._orientationChanging = !0;
        cc.sys.isMobile && (cc.game.container.style.display = "none");
        setTimeout(function () {
            cc.view._orientationChanging = !1;
            cc.view._resizeEvent()
        }, 300)
    },
    setTargetDensityDPI: function (a) {
        this._targetDensityDPI = a;
        this._adjustViewportMeta()
    },
    getTargetDensityDPI: function () {
        return this._targetDensityDPI
    },
    resizeWithBrowserSize: function (a) {
        a ? this.__resizeWithBrowserSize || (this.__resizeWithBrowserSize = !0, window.addEventListener("resize", this._resizeEvent), window.addEventListener("orientationchange", this._orientationChange)) : this.__resizeWithBrowserSize && (this.__resizeWithBrowserSize = !1, window.removeEventListener("resize", this._resizeEvent), window.removeEventListener("orientationchange", this._orientationChange))
    },
    setResizeCallback: function (a) {
        if ("function" === typeof a || null == a) this._resizeCallback = a
    },
    setOrientation: function (a) {
        if ((a &= cc.ORIENTATION_AUTO) && this._orientation !== a) this._orientation = a, this._resolutionPolicy && this.setDesignResolutionSize(this._originalDesignResolutionSize.width, this._originalDesignResolutionSize.height, this._resolutionPolicy)
    },
    setDocumentPixelWidth: function (a) {
        this._setViewportMeta({
            width: a
        }, !0);
        document.documentElement.style.width = a + "px";
        document.body.style.width = "100%";
        this.setDesignResolutionSize(this._designResolutionSize.width, this._designResolutionSize.height,
            this._resolutionPolicy)
    },
    _initFrameSize: function () {
        var a = this._frameSize,
            b = __BrowserGetter.availWidth(this._frame),
            c = __BrowserGetter.availHeight(this._frame),
            d = b >= c;
        !cc.sys.isMobile || d && this._orientation & cc.ORIENTATION_LANDSCAPE || !d && this._orientation & cc.ORIENTATION_PORTRAIT ? (a.width = b, a.height = c, cc.container.style["-webkit-transform"] = "rotate(0deg)", cc.container.style.transform = "rotate(0deg)", this._isRotated = !1) : (a.width = c, a.height = b, cc.container.style["-webkit-transform"] = "rotate(90deg)", cc.container.style.transform =
            "rotate(90deg)", cc.container.style["-webkit-transform-origin"] = "0px 0px 0px", cc.container.style.transformOrigin = "0px 0px 0px", this._isRotated = !0)
    },
    _adjustSizeKeepCanvasSize: function () {
        var a = this._originalDesignResolutionSize.width,
            b = this._originalDesignResolutionSize.height;
        0 < a && this.setDesignResolutionSize(a, b, this._resolutionPolicy)
    },
    _setViewportMeta: function (a, b) {
        var c = document.getElementById("cocosMetaElement");
        c && b && document.head.removeChild(c);
        var d = document.getElementsByName("viewport"),
            d =
            d ? d[0] : null,
            f, g, h;
        f = d ? d.content : "";
        c = c || document.createElement("meta");
        c.id = "cocosMetaElement";
        c.name = "viewport";
        c.content = "";
        for (g in a) - 1 == f.indexOf(g) ? f += "," + g + "=" + a[g] : b && (h = RegExp(g + "s*=s*[^,]+"), f.replace(h, g + "=" + a[g]));
        /^,/.test(f) && (f = f.substr(1));
        c.content = f;
        d && (d.content = f);
        document.head.appendChild(c)
    },
    _adjustViewportMeta: function () {
        this._isAdjustViewPort && (this._setViewportMeta(__BrowserGetter.meta, !1), this._isAdjustViewPort = !1)
    },
    _setScaleXYForRenderTexture: function () {
        var a = cc.contentScaleFactor();
        this._scaleY = this._scaleX = a
    },
    _resetScale: function () {
        this._scaleX = this._originalScaleX;
        this._scaleY = this._originalScaleY
    },
    _adjustSizeToBrowser: function () {},
    initialize: function () {
        this._initialized = !0
    },
    adjustViewPort: function (a) {
        this._isAdjustViewPort = a
    },
    enableRetina: function (a) {
        this._retinaEnabled = !!a
    },
    isRetinaEnabled: function () {
        return this._retinaEnabled
    },
    enableAutoFullScreen: function (a) {
        a && a !== this._autoFullScreen && cc.sys.isMobile && this._frame === document.documentElement ? (this._autoFullScreen = !0, cc.screen.autoFullScreen(this._frame)) :
            this._autoFullScreen = !1
    },
    isAutoFullScreenEnabled: function () {
        return this._autoFullScreen
    },
    isOpenGLReady: function () {
        return cc.game.canvas && cc._renderContext
    },
    setFrameZoomFactor: function (a) {
        this._frameZoomFactor = a;
        this.centerWindow();
        cc.director.setProjection(cc.director.getProjection())
    },
    swapBuffers: function () {},
    setIMEKeyboardState: function (a) {},
    setContentTranslateLeftTop: function (a, b) {
        this._contentTranslateLeftTop = {
            left: a,
            top: b
        }
    },
    getContentTranslateLeftTop: function () {
        return this._contentTranslateLeftTop
    },
    getCanvasSize: function () {
        return cc.size(cc._canvas.width, cc._canvas.height)
    },
    getFrameSize: function () {
        return cc.size(this._frameSize.width, this._frameSize.height)
    },
    setFrameSize: function (a, b) {
        this._frameSize.width = a;
        this._frameSize.height = b;
        this._frame.style.width = a + "px";
        this._frame.style.height = b + "px";
        this._resizeEvent();
        cc.director.setProjection(cc.director.getProjection())
    },
    getVisibleSize: function () {
        return cc.size(this._visibleRect.width, this._visibleRect.height)
    },
    getVisibleSizeInPixel: function () {
        return cc.size(this._visibleRect.width *
            this._scaleX, this._visibleRect.height * this._scaleY)
    },
    getVisibleOrigin: function () {
        return cc.p(this._visibleRect.x, this._visibleRect.y)
    },
    getVisibleOriginInPixel: function () {
        return cc.p(this._visibleRect.x * this._scaleX, this._visibleRect.y * this._scaleY)
    },
    canSetContentScaleFactor: function () {
        return !0
    },
    getResolutionPolicy: function () {
        return this._resolutionPolicy
    },
    setResolutionPolicy: function (a) {
        if (a instanceof cc.ResolutionPolicy) this._resolutionPolicy = a;
        else {
            var b = cc.ResolutionPolicy;
            a === b.EXACT_FIT && (this._resolutionPolicy =
                this._rpExactFit);
            a === b.SHOW_ALL && (this._resolutionPolicy = this._rpShowAll);
            a === b.NO_BORDER && (this._resolutionPolicy = this._rpNoBorder);
            a === b.FIXED_HEIGHT && (this._resolutionPolicy = this._rpFixedHeight);
            a === b.FIXED_WIDTH && (this._resolutionPolicy = this._rpFixedWidth)
        }
    },
    setDesignResolutionSize: function (a, b, c) {
        if (0 < a || 0 < b)
            if (this.setResolutionPolicy(c), (c = this._resolutionPolicy) && c.preApply(this), cc.sys.isMobile && this._adjustViewportMeta(), this._resizing || this._initFrameSize(), c) {
                this._originalDesignResolutionSize.width =
                    this._designResolutionSize.width = a;
                this._originalDesignResolutionSize.height = this._designResolutionSize.height = b;
                var d = c.apply(this, this._designResolutionSize);
                d.scale && 2 === d.scale.length && (this._scaleX = d.scale[0], this._scaleY = d.scale[1]);
                d.viewport && (a = this._viewPortRect, b = this._visibleRect, d = d.viewport, a.x = d.x, a.y = d.y, a.width = d.width, a.height = d.height, b.x = -a.x / this._scaleX, b.y = -a.y / this._scaleY, b.width = cc._canvas.width / this._scaleX, b.height = cc._canvas.height / this._scaleY, cc._renderContext.setOffset &&
                    cc._renderContext.setOffset(a.x, -a.y));
                a = cc.director;
                a._winSizeInPoints.width = this._designResolutionSize.width;
                a._winSizeInPoints.height = this._designResolutionSize.height;
                c.postApply(this);
                cc.winSize.width = a._winSizeInPoints.width;
                cc.winSize.height = a._winSizeInPoints.height;
                cc._renderType === cc.game.RENDER_TYPE_WEBGL ? a.setGLDefaultValues() : cc._renderType === cc.game.RENDER_TYPE_CANVAS && (cc.renderer._allNeedDraw = !0);
                this._originalScaleX = this._scaleX;
                this._originalScaleY = this._scaleY;
                cc.visibleRect && cc.visibleRect.init(this._visibleRect)
            } else cc.log(cc._LogInfos.EGLView_setDesignResolutionSize_2);
        else cc.log(cc._LogInfos.EGLView_setDesignResolutionSize)
    },
    getDesignResolutionSize: function () {
        return cc.size(this._designResolutionSize.width, this._designResolutionSize.height)
    },
    setRealPixelResolution: function (a, b, c) {
        this._setViewportMeta({
            width: a
        }, !0);
        document.documentElement.style.width = a + "px";
        document.body.style.width = a + "px";
        document.body.style.left = "0px";
        document.body.style.top = "0px";
        this.setDesignResolutionSize(a, b, c)
    },
    setViewPortInPoints: function (a, b, c, d) {
        var f = this._frameZoomFactor,
            g = this._scaleX,
            h = this._scaleY;
        cc._renderContext.viewport(a * g * f + this._viewPortRect.x * f, b * h * f + this._viewPortRect.y * f, c * g * f, d * h * f)
    },
    setScissorInPoints: function (a, b, c, d) {
        var f = this._frameZoomFactor,
            g = this._scaleX,
            h = this._scaleY;
        a = Math.ceil(a * g * f + this._viewPortRect.x * f);
        b = Math.ceil(b * h * f + this._viewPortRect.y * f);
        c = Math.ceil(c * g * f);
        d = Math.ceil(d * h * f);
        _scissorRect || (f = gl.getParameter(gl.SCISSOR_BOX), _scissorRect = cc.rect(f[0], f[1], f[2], f[3]));
        if (_scissorRect.x != a || _scissorRect.y != b || _scissorRect.width != c || _scissorRect.height !=
            d) _scissorRect.x = a, _scissorRect.y = b, _scissorRect.width = c, _scissorRect.height = d, cc._renderContext.scissor(a, b, c, d)
    },
    isScissorEnabled: function () {
        return cc._renderContext.isEnabled(gl.SCISSOR_TEST)
    },
    getScissorRect: function () {
        if (!_scissorRect) {
            var a = gl.getParameter(gl.SCISSOR_BOX);
            _scissorRect = cc.rect(a[0], a[1], a[2], a[3])
        }
        var a = 1 / this._scaleX,
            b = 1 / this._scaleY;
        return cc.rect((_scissorRect.x - this._viewPortRect.x) * a, (_scissorRect.y - this._viewPortRect.y) * b, _scissorRect.width * a, _scissorRect.height * b)
    },
    setViewName: function (a) {
        null !=
            a && 0 < a.length && (this._viewName = a)
    },
    getViewName: function () {
        return this._viewName
    },
    getViewPortRect: function () {
        return this._viewPortRect
    },
    getScaleX: function () {
        return this._scaleX
    },
    getScaleY: function () {
        return this._scaleY
    },
    getDevicePixelRatio: function () {
        return this._devicePixelRatio
    },
    convertToLocationInView: function (a, b, c) {
        a = this._devicePixelRatio * (a - c.left);
        b = this._devicePixelRatio * (c.top + c.height - b);
        return this._isRotated ? {
            x: this._viewPortRect.width - b,
            y: a
        } : {
            x: a,
            y: b
        }
    },
    _convertMouseToLocationInView: function (a,
        b) {
        var c = this._viewPortRect;
        a.x = (this._devicePixelRatio * (a.x - b.left) - c.x) / this._scaleX;
        a.y = (this._devicePixelRatio * (b.top + b.height - a.y) - c.y) / this._scaleY
    },
    _convertPointWithScale: function (a) {
        var b = this._viewPortRect;
        a.x = (a.x - b.x) / this._scaleX;
        a.y = (a.y - b.y) / this._scaleY
    },
    _convertTouchesWithScale: function (a) {
        for (var b = this._viewPortRect, c = this._scaleX, d = this._scaleY, f, g, h = 0; h < a.length; h++) f = a[h], g = f._point, f = f._prevPoint, g.x = (g.x - b.x) / c, g.y = (g.y - b.y) / d, f.x = (f.x - b.x) / c, f.y = (f.y - b.y) / d
    }
});
cc.EGLView._getInstance = function () {
    this._instance || (this._instance = this._instance || new cc.EGLView, this._instance.initialize());
    return this._instance
};
cc.ContainerStrategy = cc.Class.extend({
    preApply: function (a) {},
    apply: function (a, b) {},
    postApply: function (a) {},
    _setupContainer: function (a, b, c) {
        var d = cc.game.canvas,
            f = cc.game.container;
        cc.sys.os === cc.sys.OS_ANDROID && (document.body.style.width = (a._isRotated ? c : b) + "px", document.body.style.height = (a._isRotated ? b : c) + "px");
        f.style.width = d.style.width = b + "px";
        f.style.height = d.style.height = c + "px";
        f = a._devicePixelRatio = 1;
        a.isRetinaEnabled() && (f = a._devicePixelRatio = Math.min(2, window.devicePixelRatio || 1));
        d.width =
            b * f;
        d.height = c * f;
        cc._renderContext.resetCache && cc._renderContext.resetCache()
    },
    _fixContainer: function () {
        document.body.insertBefore(cc.container, document.body.firstChild);
        var a = document.body.style;
        a.width = window.innerWidth + "px";
        a.height = window.innerHeight + "px";
        a.overflow = "hidden";
        a = cc.container.style;
        a.position = "fixed";
        a.left = a.top = "0px";
        document.body.scrollTop = 0
    }
});
cc.ContentStrategy = cc.Class.extend({
    _result: {
        scale: [1, 1],
        viewport: null
    },
    _buildResult: function (a, b, c, d, f, g) {
        2 > Math.abs(a - c) && (c = a);
        2 > Math.abs(b - d) && (d = b);
        a = cc.rect(Math.round((a - c) / 2), Math.round((b - d) / 2), c, d);
        this._result.scale = [f, g];
        this._result.viewport = a;
        return this._result
    },
    preApply: function (a) {},
    apply: function (a, b) {
        return {
            scale: [1, 1]
        }
    },
    postApply: function (a) {}
});
(function () {
    var a = cc.ContainerStrategy.extend({
            apply: function (a) {
                var b = a._frameSize.height,
                    c = cc.container.style;
                this._setupContainer(a, a._frameSize.width, a._frameSize.height);
                c.margin = a._isRotated ? "0 0 0 " + b + "px" : "0px"
            }
        }),
        b = cc.ContainerStrategy.extend({
            apply: function (a, b) {
                var c = a._frameSize.width,
                    d = a._frameSize.height,
                    f = cc.container.style,
                    u = b.width,
                    v = b.height,
                    x = c / u,
                    y = d / v,
                    z, t;
                x < y ? (z = c, t = v * x) : (z = u * y, t = d);
                u = Math.round((c - z) / 2);
                t = Math.round((d - t) / 2);
                this._setupContainer(a, c - 2 * u, d - 2 * t);
                f.margin = a._isRotated ?
                    "0 0 0 " + d + "px" : "0px";
                f.paddingLeft = u + "px";
                f.paddingRight = u + "px";
                f.paddingTop = t + "px";
                f.paddingBottom = t + "px"
            }
        });
    a.extend({
        preApply: function (a) {
            this._super(a);
            a._frame = document.documentElement
        },
        apply: function (a) {
            this._super(a);
            this._fixContainer()
        }
    });
    b.extend({
        preApply: function (a) {
            this._super(a);
            a._frame = document.documentElement
        },
        apply: function (a, b) {
            this._super(a, b);
            this._fixContainer()
        }
    });
    var c = cc.ContainerStrategy.extend({
        apply: function (a) {
            this._setupContainer(a, cc._canvas.width, cc._canvas.height)
        }
    });
    cc.ContainerStrategy.EQUAL_TO_FRAME = new a;
    cc.ContainerStrategy.PROPORTION_TO_FRAME = new b;
    cc.ContainerStrategy.ORIGINAL_CONTAINER = new c;
    var a = cc.ContentStrategy.extend({
            apply: function (a, b) {
                var c = cc._canvas.width,
                    d = cc._canvas.height;
                return this._buildResult(c, d, c, d, c / b.width, d / b.height)
            }
        }),
        b = cc.ContentStrategy.extend({
            apply: function (a, b) {
                var c = cc._canvas.width,
                    d = cc._canvas.height,
                    f = b.width,
                    u = b.height,
                    v = c / f,
                    x = d / u,
                    y = 0,
                    z, t;
                v < x ? (y = v, z = c, t = u * y) : (y = x, z = f * y, t = d);
                return this._buildResult(c, d, z, t, y, y)
            }
        }),
        c =
        cc.ContentStrategy.extend({
            apply: function (a, b) {
                var c = cc._canvas.width,
                    d = cc._canvas.height,
                    f = b.width,
                    u = b.height,
                    v = c / f,
                    x = d / u,
                    y, z, t;
                v < x ? (y = x, z = f * y, t = d) : (y = v, z = c, t = u * y);
                return this._buildResult(c, d, z, t, y, y)
            }
        }),
        d = cc.ContentStrategy.extend({
            apply: function (a, b) {
                var c = cc._canvas.width,
                    d = cc._canvas.height,
                    f = d / b.height;
                return this._buildResult(c, d, c, d, f, f)
            },
            postApply: function (a) {
                cc.director._winSizeInPoints = a.getVisibleSize()
            }
        }),
        f = cc.ContentStrategy.extend({
            apply: function (a, b) {
                var c = cc._canvas.width,
                    d = cc._canvas.height,
                    f = c / b.width;
                return this._buildResult(c, d, c, d, f, f)
            },
            postApply: function (a) {
                cc.director._winSizeInPoints = a.getVisibleSize()
            }
        });
    cc.ContentStrategy.EXACT_FIT = new a;
    cc.ContentStrategy.SHOW_ALL = new b;
    cc.ContentStrategy.NO_BORDER = new c;
    cc.ContentStrategy.FIXED_HEIGHT = new d;
    cc.ContentStrategy.FIXED_WIDTH = new f
})();
cc.ResolutionPolicy = cc.Class.extend({
    _containerStrategy: null,
    _contentStrategy: null,
    ctor: function (a, b) {
        this.setContainerStrategy(a);
        this.setContentStrategy(b)
    },
    preApply: function (a) {
        this._containerStrategy.preApply(a);
        this._contentStrategy.preApply(a)
    },
    apply: function (a, b) {
        this._containerStrategy.apply(a, b);
        return this._contentStrategy.apply(a, b)
    },
    postApply: function (a) {
        this._containerStrategy.postApply(a);
        this._contentStrategy.postApply(a)
    },
    setContainerStrategy: function (a) {
        a instanceof cc.ContainerStrategy &&
            (this._containerStrategy = a)
    },
    setContentStrategy: function (a) {
        a instanceof cc.ContentStrategy && (this._contentStrategy = a)
    }
});
cc.ResolutionPolicy.EXACT_FIT = 0;
cc.ResolutionPolicy.NO_BORDER = 1;
cc.ResolutionPolicy.SHOW_ALL = 2;
cc.ResolutionPolicy.FIXED_HEIGHT = 3;
cc.ResolutionPolicy.FIXED_WIDTH = 4;
cc.ResolutionPolicy.UNKNOWN = 5;
cc.screen = {
    _supportsFullScreen: !1,
    _preOnFullScreenChange: null,
    _touchEvent: "",
    _fn: null,
    _fnMap: [
        ["requestFullscreen", "exitFullscreen", "fullscreenchange", "fullscreenEnabled", "fullscreenElement"],
        ["requestFullScreen", "exitFullScreen", "fullScreenchange", "fullScreenEnabled", "fullScreenElement"],
        ["webkitRequestFullScreen", "webkitCancelFullScreen", "webkitfullscreenchange", "webkitIsFullScreen", "webkitCurrentFullScreenElement"],
        ["mozRequestFullScreen", "mozCancelFullScreen", "mozfullscreenchange", "mozFullScreen",
            "mozFullScreenElement"
        ],
        ["msRequestFullscreen", "msExitFullscreen", "MSFullscreenChange", "msFullscreenEnabled", "msFullscreenElement"]
    ],
    init: function () {
        this._fn = {};
        var a, b, c = this._fnMap,
            d;
        a = 0;
        for (l = c.length; a < l; a++)
            if ((b = c[a]) && b[1] in document) {
                a = 0;
                for (d = b.length; a < d; a++) this._fn[c[0][a]] = b[a];
                break
            } this._supportsFullScreen = "undefined" !== typeof this._fn.requestFullscreen;
        this._touchEvent = "ontouchstart" in window ? "touchstart" : "mousedown"
    },
    fullScreen: function () {
        return this._supportsFullScreen ? void 0 ===
            document[this._fn.fullscreenElement] || null === document[this._fn.fullscreenElement] ? !1 : !0 : !1
    },
    requestFullScreen: function (a, b) {
        if (this._supportsFullScreen) {
            a = a || document.documentElement;
            if (b) {
                var c = this._fn.fullscreenchange;
                this._preOnFullScreenChange && document.removeEventListener(c, this._preOnFullScreenChange);
                this._preOnFullScreenChange = b;
                document.addEventListener(c, b, !1)
            }
            return a[this._fn.requestFullscreen]()
        }
    },
    exitFullScreen: function () {
        return this._supportsFullScreen ? document[this._fn.exitFullscreen]() :
            !0
    },
    autoFullScreen: function (a, b) {
        function c() {
            d.removeEventListener(f._touchEvent, c);
            f.requestFullScreen(a, b)
        }
        a = a || document.body;
        var d = cc.game.canvas || a,
            f = this;
        this.requestFullScreen(a, b);
        d.addEventListener(this._touchEvent, c)
    }
};
cc.screen.init();
cc.visibleRect = {
    topLeft: cc.p(0, 0),
    topRight: cc.p(0, 0),
    top: cc.p(0, 0),
    bottomLeft: cc.p(0, 0),
    bottomRight: cc.p(0, 0),
    bottom: cc.p(0, 0),
    center: cc.p(0, 0),
    left: cc.p(0, 0),
    right: cc.p(0, 0),
    width: 0,
    height: 0,
    init: function (a) {
        var b = this.width = a.width,
            c = this.height = a.height,
            d = a.x;
        a = a.y;
        var f = a + c,
            g = d + b;
        this.topLeft.x = d;
        this.topLeft.y = f;
        this.topRight.x = g;
        this.topRight.y = f;
        this.top.x = d + b / 2;
        this.top.y = f;
        this.bottomLeft.x = d;
        this.bottomLeft.y = a;
        this.bottomRight.x = g;
        this.bottomRight.y = a;
        this.bottom.x = d + b / 2;
        this.bottom.y =
            a;
        this.center.x = d + b / 2;
        this.center.y = a + c / 2;
        this.left.x = d;
        this.left.y = a + c / 2;
        this.right.x = g;
        this.right.y = a + c / 2
    }
};
cc.UIInterfaceOrientationLandscapeLeft = -90;
cc.UIInterfaceOrientationLandscapeRight = 90;
cc.UIInterfaceOrientationPortraitUpsideDown = 180;
cc.UIInterfaceOrientationPortrait = 0;
cc.inputManager = {
    TOUCH_TIMEOUT: 5E3,
    _mousePressed: !1,
    _isRegisterEvent: !1,
    _preTouchPoint: cc.p(0, 0),
    _prevMousePoint: cc.p(0, 0),
    _preTouchPool: [],
    _preTouchPoolPointer: 0,
    _touches: [],
    _touchesIntegerDict: {},
    _indexBitsUsed: 0,
    _maxTouches: 5,
    _accelEnabled: !1,
    _accelInterval: 1 / 30,
    _accelMinus: 1,
    _accelCurTime: 0,
    _acceleration: null,
    _accelDeviceEvent: null,
    _getUnUsedIndex: function () {
        for (var a = this._indexBitsUsed, b = cc.sys.now(), c = 0; c < this._maxTouches; c++) {
            if (a & 1) {
                var d = this._touches[c];
                if (b - d._lastModified > this.TOUCH_TIMEOUT) return this._removeUsedIndexBit(c),
                    delete this._touchesIntegerDict[d.getID()], c
            } else return this._indexBitsUsed |= 1 << c, c;
            a >>= 1
        }
        return -1
    },
    _removeUsedIndexBit: function (a) {
        0 > a || a >= this._maxTouches || (a = ~(1 << a), this._indexBitsUsed &= a)
    },
    _glView: null,
    handleTouchesBegin: function (a) {
        for (var b, c, d, f = [], g = this._touchesIntegerDict, h = cc.sys.now(), m = 0, n = a.length; m < n; m++)
            if (b = a[m], d = b.getID(), c = g[d], null == c) {
                var p = this._getUnUsedIndex(); - 1 === p ? cc.log(cc._LogInfos.inputManager_handleTouchesBegin, p) : (c = this._touches[p] = new cc.Touch(b._point.x, b._point.y,
                    b.getID()), c._lastModified = h, c._setPrevPoint(b._prevPoint), g[d] = p, f.push(c))
            } 0 < f.length && (this._glView._convertTouchesWithScale(f), a = new cc.EventTouch(f), a._eventCode = cc.EventTouch.EventCode.BEGAN, cc.eventManager.dispatchEvent(a))
    },
    handleTouchesMove: function (a) {
        for (var b, c, d = [], f = this._touches, g = cc.sys.now(), h = 0, m = a.length; h < m; h++) b = a[h], c = b.getID(), c = this._touchesIntegerDict[c], null != c && f[c] && (f[c]._setPoint(b._point), f[c]._setPrevPoint(b._prevPoint), f[c]._lastModified = g, d.push(f[c]));
        0 < d.length &&
            (this._glView._convertTouchesWithScale(d), a = new cc.EventTouch(d), a._eventCode = cc.EventTouch.EventCode.MOVED, cc.eventManager.dispatchEvent(a))
    },
    handleTouchesEnd: function (a) {
        a = this.getSetOfTouchesEndOrCancel(a);
        0 < a.length && (this._glView._convertTouchesWithScale(a), a = new cc.EventTouch(a), a._eventCode = cc.EventTouch.EventCode.ENDED, cc.eventManager.dispatchEvent(a))
    },
    handleTouchesCancel: function (a) {
        a = this.getSetOfTouchesEndOrCancel(a);
        0 < a.length && (this._glView._convertTouchesWithScale(a), a = new cc.EventTouch(a),
            a._eventCode = cc.EventTouch.EventCode.CANCELLED, cc.eventManager.dispatchEvent(a))
    },
    getSetOfTouchesEndOrCancel: function (a) {
        for (var b, c, d, f = [], g = this._touches, h = this._touchesIntegerDict, m = 0, n = a.length; m < n; m++) b = a[m], d = b.getID(), c = h[d], null != c && g[c] && (g[c]._setPoint(b._point), g[c]._setPrevPoint(b._prevPoint), f.push(g[c]), this._removeUsedIndexBit(c), delete h[d]);
        return f
    },
    getHTMLElementPosition: function (a) {
        var b = document.documentElement,
            c = window,
            d = null,
            d = cc.isFunction(a.getBoundingClientRect) ? a.getBoundingClientRect() : {
                left: 0,
                top: 0,
                width: parseInt(a.style.width),
                height: parseInt(a.style.height)
            };
        return {
            left: d.left + c.pageXOffset - b.clientLeft,
            top: d.top + c.pageYOffset - b.clientTop,
            width: d.width,
            height: d.height
        }
    },
    getPreTouch: function (a) {
        for (var b = null, c = this._preTouchPool, d = a.getID(), f = c.length - 1; 0 <= f; f--)
            if (c[f].getID() === d) {
                b = c[f];
                break
            } b || (b = a);
        return b
    },
    setPreTouch: function (a) {
        for (var b = !1, c = this._preTouchPool, d = a.getID(), f = c.length - 1; 0 <= f; f--)
            if (c[f].getID() === d) {
                c[f] = a;
                b = !0;
                break
            } b || (50 >= c.length ? c.push(a) : (c[this._preTouchPoolPointer] =
            a, this._preTouchPoolPointer = (this._preTouchPoolPointer + 1) % 50))
    },
    getTouchByXY: function (a, b, c) {
        var d = this._preTouchPoint;
        a = this._glView.convertToLocationInView(a, b, c);
        b = new cc.Touch(a.x, a.y);
        b._setPrevPoint(d.x, d.y);
        d.x = a.x;
        d.y = a.y;
        return b
    },
    getMouseEvent: function (a, b, c) {
        var d = this._prevMousePoint;
        this._glView._convertMouseToLocationInView(a, b);
        b = new cc.EventMouse(c);
        b.setLocation(a.x, a.y);
        b._setPrevCursor(d.x, d.y);
        d.x = a.x;
        d.y = a.y;
        return b
    },
    getPointByEvent: function (a, b) {
        if (null != a.pageX) return {
            x: a.pageX,
            y: a.pageY
        };
        b.left -= document.body.scrollLeft;
        b.top -= document.body.scrollTop;
        return {
            x: a.clientX,
            y: a.clientY
        }
    },
    getTouchesByEvent: function (a, b) {
        for (var c = [], d = this._glView, f, g, h = this._preTouchPoint, m = a.changedTouches.length, n = 0; n < m; n++)
            if (f = a.changedTouches[n]) {
                var p;
                p = cc.sys.BROWSER_TYPE_FIREFOX === cc.sys.browserType ? d.convertToLocationInView(f.pageX, f.pageY, b) : d.convertToLocationInView(f.clientX, f.clientY, b);
                null != f.identifier ? (f = new cc.Touch(p.x, p.y, f.identifier), g = this.getPreTouch(f).getLocation(),
                    f._setPrevPoint(g.x, g.y), this.setPreTouch(f)) : (f = new cc.Touch(p.x, p.y), f._setPrevPoint(h.x, h.y));
                h.x = p.x;
                h.y = p.y;
                c.push(f)
            } return c
    },
    registerSystemEvent: function (a) {
        if (!this._isRegisterEvent) {
            this._glView = cc.view;
            var b = this,
                c = "mouse" in cc.sys.capabilities,
                d = "touches" in cc.sys.capabilities,
                f = !1;
            cc.sys.isMobile && (f = !0);
            c && (window.addEventListener("mousedown", function () {
                b._mousePressed = !0
            }, !1), window.addEventListener("mouseup", function (c) {
                if (!f) {
                    var d = b._mousePressed;
                    b._mousePressed = !1;
                    if (d) {
                        var d = b.getHTMLElementPosition(a),
                            g = b.getPointByEvent(c, d);
                        cc.rectContainsPoint(new cc.Rect(d.left, d.top, d.width, d.height), g) || (b.handleTouchesEnd([b.getTouchByXY(g.x, g.y, d)]), d = b.getMouseEvent(g, d, cc.EventMouse.UP), d.setButton(c.button), cc.eventManager.dispatchEvent(d))
                    }
                }
            }, !1), a.addEventListener("mousedown", function (c) {
                if (!f) {
                    b._mousePressed = !0;
                    var d = b.getHTMLElementPosition(a),
                        g = b.getPointByEvent(c, d);
                    b.handleTouchesBegin([b.getTouchByXY(g.x, g.y, d)]);
                    d = b.getMouseEvent(g, d, cc.EventMouse.DOWN);
                    d.setButton(c.button);
                    cc.eventManager.dispatchEvent(d);
                    c.stopPropagation();
                    c.preventDefault();
                    a.focus()
                }
            }, !1), a.addEventListener("mouseup", function (c) {
                if (!f) {
                    b._mousePressed = !1;
                    var d = b.getHTMLElementPosition(a),
                        g = b.getPointByEvent(c, d);
                    b.handleTouchesEnd([b.getTouchByXY(g.x, g.y, d)]);
                    d = b.getMouseEvent(g, d, cc.EventMouse.UP);
                    d.setButton(c.button);
                    cc.eventManager.dispatchEvent(d);
                    c.stopPropagation();
                    c.preventDefault()
                }
            }, !1), a.addEventListener("mousemove", function (c) {
                if (!f) {
                    var d = b.getHTMLElementPosition(a),
                        g = b.getPointByEvent(c, d);
                    b.handleTouchesMove([b.getTouchByXY(g.x,
                        g.y, d)]);
                    d = b.getMouseEvent(g, d, cc.EventMouse.MOVE);
                    b._mousePressed ? d.setButton(c.button) : d.setButton(null);
                    cc.eventManager.dispatchEvent(d);
                    c.stopPropagation();
                    c.preventDefault()
                }
            }, !1), a.addEventListener("mousewheel", function (c) {
                var d = b.getHTMLElementPosition(a),
                    f = b.getPointByEvent(c, d),
                    d = b.getMouseEvent(f, d, cc.EventMouse.SCROLL);
                d.setButton(c.button);
                d.setScrollData(0, c.wheelDelta);
                cc.eventManager.dispatchEvent(d);
                c.stopPropagation();
                c.preventDefault()
            }, !1), a.addEventListener("DOMMouseScroll", function (c) {
                var d =
                    b.getHTMLElementPosition(a),
                    f = b.getPointByEvent(c, d),
                    d = b.getMouseEvent(f, d, cc.EventMouse.SCROLL);
                d.setButton(c.button);
                d.setScrollData(0, -120 * c.detail);
                cc.eventManager.dispatchEvent(d);
                c.stopPropagation();
                c.preventDefault()
            }, !1));
            if (window.navigator.msPointerEnabled) {
                var c = {
                        MSPointerDown: b.handleTouchesBegin,
                        MSPointerMove: b.handleTouchesMove,
                        MSPointerUp: b.handleTouchesEnd,
                        MSPointerCancel: b.handleTouchesCancel
                    },
                    g;
                for (g in c)(function (c, d) {
                    a.addEventListener(c, function (c) {
                        var f = b.getHTMLElementPosition(a);
                        f.left -= document.documentElement.scrollLeft;
                        f.top -= document.documentElement.scrollTop;
                        d.call(b, [b.getTouchByXY(c.clientX, c.clientY, f)]);
                        c.stopPropagation()
                    }, !1)
                })(g, c[g])
            }
            d && (a.addEventListener("touchstart", function (c) {
                if (c.changedTouches) {
                    var d = b.getHTMLElementPosition(a);
                    d.left -= document.body.scrollLeft;
                    d.top -= document.body.scrollTop;
                    b.handleTouchesBegin(b.getTouchesByEvent(c, d));
                    c.stopPropagation();
                    c.preventDefault();
                    a.focus()
                }
            }, !1), a.addEventListener("touchmove", function (c) {
                if (c.changedTouches) {
                    var d =
                        b.getHTMLElementPosition(a);
                    d.left -= document.body.scrollLeft;
                    d.top -= document.body.scrollTop;
                    b.handleTouchesMove(b.getTouchesByEvent(c, d));
                    c.stopPropagation();
                    c.preventDefault()
                }
            }, !1), a.addEventListener("touchend", function (c) {
                if (c.changedTouches) {
                    var d = b.getHTMLElementPosition(a);
                    d.left -= document.body.scrollLeft;
                    d.top -= document.body.scrollTop;
                    b.handleTouchesEnd(b.getTouchesByEvent(c, d));
                    c.stopPropagation();
                    c.preventDefault()
                }
            }, !1), a.addEventListener("touchcancel", function (c) {
                if (c.changedTouches) {
                    var d =
                        b.getHTMLElementPosition(a);
                    d.left -= document.body.scrollLeft;
                    d.top -= document.body.scrollTop;
                    b.handleTouchesCancel(b.getTouchesByEvent(c, d));
                    c.stopPropagation();
                    c.preventDefault()
                }
            }, !1));
            this._registerKeyboardEvent();
            this._registerAccelerometerEvent();
            this._isRegisterEvent = !0
        }
    },
    _registerKeyboardEvent: function () {},
    _registerAccelerometerEvent: function () {},
    update: function (a) {
        this._accelCurTime > this._accelInterval && (this._accelCurTime -= this._accelInterval, cc.eventManager.dispatchEvent(new cc.EventAcceleration(this._acceleration)));
        this._accelCurTime += a
    }
};
_p = cc.inputManager;
_p.setAccelerometerEnabled = function (a) {
    this._accelEnabled !== a && (this._accelEnabled = a, a = cc.director.getScheduler(), this._accelCurTime = 0, a.scheduleUpdate(this))
};
_p.setAccelerometerInterval = function (a) {
    this._accelInterval !== a && (this._accelInterval = a)
};
_p._registerKeyboardEvent = function () {
    cc._canvas.addEventListener("keydown", function (a) {
        cc.eventManager.dispatchEvent(new cc.EventKeyboard(a.keyCode, !0));
        a.stopPropagation();
        a.preventDefault()
    }, !1);
    cc._canvas.addEventListener("keyup", function (a) {
        cc.eventManager.dispatchEvent(new cc.EventKeyboard(a.keyCode, !1));
        a.stopPropagation();
        a.preventDefault()
    }, !1)
};
_p._registerAccelerometerEvent = function () {
    var a = window;
    this._acceleration = new cc.Acceleration;
    this._accelDeviceEvent = a.DeviceMotionEvent || a.DeviceOrientationEvent;
    cc.sys.browserType === cc.sys.BROWSER_TYPE_MOBILE_QQ && (this._accelDeviceEvent = window.DeviceOrientationEvent);
    var b = this._accelDeviceEvent === a.DeviceMotionEvent ? "devicemotion" : "deviceorientation",
        c = navigator.userAgent;
    if (/Android/.test(c) || /Adr/.test(c) && cc.sys.browserType === cc.BROWSER_TYPE_UC) this._minus = -1;
    a.addEventListener(b, this.didAccelerate.bind(this),
        !1)
};
_p.didAccelerate = function (a) {
    var b = window;
    if (this._accelEnabled) {
        var c = this._acceleration,
            d, f, g;
        this._accelDeviceEvent === window.DeviceMotionEvent ? (g = a.accelerationIncludingGravity, d = 0.1 * this._accelMinus * g.x, f = 0.1 * this._accelMinus * g.y, g = 0.1 * g.z) : (d = 0.981 * (a.gamma / 90), f = 0.981 * -(a.beta / 90), g = 0.981 * (a.alpha / 90));
        c.x = d;
        c.y = f;
        c.z = g;
        c.timestamp = a.timeStamp || Date.now();
        a = c.x;
        b.orientation === cc.UIInterfaceOrientationLandscapeRight ? (c.x = -c.y, c.y = a) : b.orientation === cc.UIInterfaceOrientationLandscapeLeft ? (c.x =
            c.y, c.y = -a) : b.orientation === cc.UIInterfaceOrientationPortraitUpsideDown && (c.x = -c.x, c.y = -c.y)
    }
};
delete _p;
cc.AffineTransform = function (a, b, c, d, f, g) {
    this.a = a;
    this.b = b;
    this.c = c;
    this.d = d;
    this.tx = f;
    this.ty = g
};
cc.affineTransformMake = function (a, b, c, d, f, g) {
    return {
        a: a,
        b: b,
        c: c,
        d: d,
        tx: f,
        ty: g
    }
};
cc.pointApplyAffineTransform = function (a, b, c) {
    var d;
    void 0 === c ? (c = b, d = a.x, a = a.y) : (d = a, a = b);
    return {
        x: c.a * d + c.c * a + c.tx,
        y: c.b * d + c.d * a + c.ty
    }
};
cc._pointApplyAffineTransform = function (a, b, c) {
    return cc.pointApplyAffineTransform(a, b, c)
};
cc.sizeApplyAffineTransform = function (a, b) {
    return {
        width: b.a * a.width + b.c * a.height,
        height: b.b * a.width + b.d * a.height
    }
};
cc.affineTransformMakeIdentity = function () {
    return {
        a: 1,
        b: 0,
        c: 0,
        d: 1,
        tx: 0,
        ty: 0
    }
};
cc.affineTransformIdentity = function () {
    return {
        a: 1,
        b: 0,
        c: 0,
        d: 1,
        tx: 0,
        ty: 0
    }
};
cc.rectApplyAffineTransform = function (a, b) {
    var c = cc.rectGetMinY(a),
        d = cc.rectGetMinX(a),
        f = cc.rectGetMaxX(a),
        g = cc.rectGetMaxY(a),
        h = cc.pointApplyAffineTransform(d, c, b),
        c = cc.pointApplyAffineTransform(f, c, b),
        d = cc.pointApplyAffineTransform(d, g, b),
        m = cc.pointApplyAffineTransform(f, g, b),
        f = Math.min(h.x, c.x, d.x, m.x),
        g = Math.max(h.x, c.x, d.x, m.x),
        n = Math.min(h.y, c.y, d.y, m.y),
        h = Math.max(h.y, c.y, d.y, m.y);
    return cc.rect(f, n, g - f, h - n)
};
cc._rectApplyAffineTransformIn = function (a, b) {
    var c = cc.rectGetMinY(a),
        d = cc.rectGetMinX(a),
        f = cc.rectGetMaxX(a),
        g = cc.rectGetMaxY(a),
        h = cc.pointApplyAffineTransform(d, c, b),
        c = cc.pointApplyAffineTransform(f, c, b),
        d = cc.pointApplyAffineTransform(d, g, b),
        m = cc.pointApplyAffineTransform(f, g, b),
        f = Math.min(h.x, c.x, d.x, m.x),
        g = Math.max(h.x, c.x, d.x, m.x),
        n = Math.min(h.y, c.y, d.y, m.y),
        h = Math.max(h.y, c.y, d.y, m.y);
    a.x = f;
    a.y = n;
    a.width = g - f;
    a.height = h - n;
    return a
};
cc.affineTransformTranslate = function (a, b, c) {
    return {
        a: a.a,
        b: a.b,
        c: a.c,
        d: a.d,
        tx: a.tx + a.a * b + a.c * c,
        ty: a.ty + a.b * b + a.d * c
    }
};
cc.affineTransformScale = function (a, b, c) {
    return {
        a: a.a * b,
        b: a.b * b,
        c: a.c * c,
        d: a.d * c,
        tx: a.tx,
        ty: a.ty
    }
};
cc.affineTransformRotate = function (a, b) {
    var c = Math.sin(b),
        d = Math.cos(b);
    return {
        a: a.a * d + a.c * c,
        b: a.b * d + a.d * c,
        c: a.c * d - a.a * c,
        d: a.d * d - a.b * c,
        tx: a.tx,
        ty: a.ty
    }
};
cc.affineTransformConcat = function (a, b) {
    return {
        a: a.a * b.a + a.b * b.c,
        b: a.a * b.b + a.b * b.d,
        c: a.c * b.a + a.d * b.c,
        d: a.c * b.b + a.d * b.d,
        tx: a.tx * b.a + a.ty * b.c + b.tx,
        ty: a.tx * b.b + a.ty * b.d + b.ty
    }
};
cc.affineTransformConcatIn = function (a, b) {
    var c = a.a,
        d = a.b,
        f = a.c,
        g = a.d,
        h = a.tx,
        m = a.ty;
    a.a = c * b.a + d * b.c;
    a.b = c * b.b + d * b.d;
    a.c = f * b.a + g * b.c;
    a.d = f * b.b + g * b.d;
    a.tx = h * b.a + m * b.c + b.tx;
    a.ty = h * b.b + m * b.d + b.ty;
    return a
};
cc.affineTransformEqualToTransform = function (a, b) {
    return a.a === b.a && a.b === b.b && a.c === b.c && a.d === b.d && a.tx === b.tx && a.ty === b.ty
};
cc.affineTransformInvert = function (a) {
    var b = 1 / (a.a * a.d - a.b * a.c);
    return {
        a: b * a.d,
        b: -b * a.b,
        c: -b * a.c,
        d: b * a.a,
        tx: b * (a.c * a.ty - a.d * a.tx),
        ty: b * (a.b * a.tx - a.a * a.ty)
    }
};
cc.affineTransformInvertOut = function (a, b) {
    var c = a.a,
        d = a.b,
        f = a.c,
        g = a.d,
        h = 1 / (c * g - d * f);
    b.a = h * g;
    b.b = -h * d;
    b.c = -h * f;
    b.d = h * c;
    b.tx = h * (f * a.ty - g * a.tx);
    b.ty = h * (d * a.tx - c * a.ty)
};
cc.POINT_EPSILON = parseFloat("1.192092896e-07F");
cc.pNeg = function (a) {
    return cc.p(-a.x, -a.y)
};
cc.pAdd = function (a, b) {
    return cc.p(a.x + b.x, a.y + b.y)
};
cc.pSub = function (a, b) {
    return cc.p(a.x - b.x, a.y - b.y)
};
cc.pMult = function (a, b) {
    return cc.p(a.x * b, a.y * b)
};
cc.pMidpoint = function (a, b) {
    return cc.pMult(cc.pAdd(a, b), 0.5)
};
cc.pDot = function (a, b) {
    return a.x * b.x + a.y * b.y
};
cc.pCross = function (a, b) {
    return a.x * b.y - a.y * b.x
};
cc.pPerp = function (a) {
    return cc.p(-a.y, a.x)
};
cc.pRPerp = function (a) {
    return cc.p(a.y, -a.x)
};
cc.pProject = function (a, b) {
    return cc.pMult(b, cc.pDot(a, b) / cc.pDot(b, b))
};
cc.pRotate = function (a, b) {
    return cc.p(a.x * b.x - a.y * b.y, a.x * b.y + a.y * b.x)
};
cc.pUnrotate = function (a, b) {
    return cc.p(a.x * b.x + a.y * b.y, a.y * b.x - a.x * b.y)
};
cc.pLengthSQ = function (a) {
    return cc.pDot(a, a)
};
cc.pDistanceSQ = function (a, b) {
    return cc.pLengthSQ(cc.pSub(a, b))
};
cc.pLength = function (a) {
    return Math.sqrt(cc.pLengthSQ(a))
};
cc.pDistance = function (a, b) {
    return cc.pLength(cc.pSub(a, b))
};
cc.pNormalize = function (a) {
    var b = cc.pLength(a);
    return 0 === b ? cc.p(a) : cc.pMult(a, 1 / b)
};
cc.pForAngle = function (a) {
    return cc.p(Math.cos(a), Math.sin(a))
};
cc.pToAngle = function (a) {
    return Math.atan2(a.y, a.x)
};
cc.clampf = function (a, b, c) {
    if (b > c) {
        var d = b;
        b = c;
        c = d
    }
    return a < b ? b : a < c ? a : c
};
cc.pClamp = function (a, b, c) {
    return cc.p(cc.clampf(a.x, b.x, c.x), cc.clampf(a.y, b.y, c.y))
};
cc.pFromSize = function (a) {
    return cc.p(a.width, a.height)
};
cc.pCompOp = function (a, b) {
    return cc.p(b(a.x), b(a.y))
};
cc.pLerp = function (a, b, c) {
    return cc.pAdd(cc.pMult(a, 1 - c), cc.pMult(b, c))
};
cc.pFuzzyEqual = function (a, b, c) {
    return a.x - c <= b.x && b.x <= a.x + c && a.y - c <= b.y && b.y <= a.y + c ? !0 : !1
};
cc.pCompMult = function (a, b) {
    return cc.p(a.x * b.x, a.y * b.y)
};
cc.pAngleSigned = function (a, b) {
    var c = cc.pNormalize(a),
        d = cc.pNormalize(b),
        c = Math.atan2(c.x * d.y - c.y * d.x, cc.pDot(c, d));
    return Math.abs(c) < cc.POINT_EPSILON ? 0 : c
};
cc.pAngle = function (a, b) {
    var c = Math.acos(cc.pDot(cc.pNormalize(a), cc.pNormalize(b)));
    return Math.abs(c) < cc.POINT_EPSILON ? 0 : c
};
cc.pRotateByAngle = function (a, b, c) {
    a = cc.pSub(a, b);
    var d = Math.cos(c);
    c = Math.sin(c);
    var f = a.x;
    a.x = f * d - a.y * c + b.x;
    a.y = f * c + a.y * d + b.y;
    return a
};
cc.pLineIntersect = function (a, b, c, d, f) {
    if (a.x === b.x && a.y === b.y || c.x === d.x && c.y === d.y) return !1;
    var g = b.x - a.x;
    b = b.y - a.y;
    var h = d.x - c.x;
    d = d.y - c.y;
    var m = a.x - c.x;
    a = a.y - c.y;
    c = d * g - h * b;
    f.x = h * a - d * m;
    f.y = g * a - b * m;
    if (0 === c) return 0 === f.x || 0 === f.y ? !0 : !1;
    f.x /= c;
    f.y /= c;
    return !0
};
cc.pSegmentIntersect = function (a, b, c, d) {
    var f = cc.p(0, 0);
    return cc.pLineIntersect(a, b, c, d, f) && 0 <= f.x && 1 >= f.x && 0 <= f.y && 1 >= f.y ? !0 : !1
};
cc.pIntersectPoint = function (a, b, c, d) {
    var f = cc.p(0, 0);
    return cc.pLineIntersect(a, b, c, d, f) ? (c = cc.p(0, 0), c.x = a.x + f.x * (b.x - a.x), c.y = a.y + f.x * (b.y - a.y), c) : cc.p(0, 0)
};
cc.pSameAs = function (a, b) {
    return null != a && null != b ? a.x === b.x && a.y === b.y : !1
};
cc.pZeroIn = function (a) {
    a.x = 0;
    a.y = 0
};
cc.pIn = function (a, b) {
    a.x = b.x;
    a.y = b.y
};
cc.pMultIn = function (a, b) {
    a.x *= b;
    a.y *= b
};
cc.pSubIn = function (a, b) {
    a.x -= b.x;
    a.y -= b.y
};
cc.pAddIn = function (a, b) {
    a.x += b.x;
    a.y += b.y
};
cc.pNormalizeIn = function (a) {
    var b = Math.sqrt(a.x * a.x + a.y * a.y);
    0 !== b && cc.pMultIn(a, 1 / b)
};
cc.vertexLineToPolygon = function (a, b, c, d, f) {
    f += d;
    if (!(1 >= f)) {
        b *= 0.5;
        for (var g, h = f - 1, m = d; m < f; m++) {
            g = 2 * m;
            var n = cc.p(a[2 * m], a[2 * m + 1]),
                p;
            if (0 === m) p = cc.pPerp(cc.pNormalize(cc.pSub(n, cc.p(a[2 * (m + 1)], a[2 * (m + 1) + 1]))));
            else if (m === h) p = cc.pPerp(cc.pNormalize(cc.pSub(cc.p(a[2 * (m - 1)], a[2 * (m - 1) + 1]), n)));
            else {
                p = cc.p(a[2 * (m - 1)], a[2 * (m - 1) + 1]);
                var u = cc.p(a[2 * (m + 1)], a[2 * (m + 1) + 1]),
                    v = cc.pNormalize(cc.pSub(u, n)),
                    x = cc.pNormalize(cc.pSub(p, n)),
                    y = Math.acos(cc.pDot(v, x));
                p = y < cc.degreesToRadians(70) ? cc.pPerp(cc.pNormalize(cc.pMidpoint(v,
                    x))) : y < cc.degreesToRadians(170) ? cc.pNormalize(cc.pMidpoint(v, x)) : cc.pPerp(cc.pNormalize(cc.pSub(u, p)))
            }
            p = cc.pMult(p, b);
            c[2 * g] = n.x + p.x;
            c[2 * g + 1] = n.y + p.y;
            c[2 * (g + 1)] = n.x - p.x;
            c[2 * (g + 1) + 1] = n.y - p.y
        }
        for (m = 0 === d ? 0 : d - 1; m < h; m++) {
            g = 2 * m;
            a = g + 2;
            b = cc.vertex2(c[2 * g], c[2 * g + 1]);
            f = cc.vertex2(c[2 * (g + 1)], c[2 * (g + 1) + 1]);
            g = cc.vertex2(c[2 * a], c[2 * a]);
            d = cc.vertex2(c[2 * (a + 1)], c[2 * (a + 1) + 1]);
            b = !cc.vertexLineIntersect(b.x, b.y, d.x, d.y, f.x, f.y, g.x, g.y);
            if (!b.isSuccess && (0 > b.value || 1 < b.value)) b.isSuccess = !0;
            b.isSuccess && (c[2 * a] = d.x,
                c[2 * a + 1] = d.y, c[2 * (a + 1)] = g.x, c[2 * (a + 1) + 1] = g.y)
        }
    }
};
cc.vertexLineIntersect = function (a, b, c, d, f, g, h, m) {
    if (a === c && b === d || f === h && g === m) return {
        isSuccess: !1,
        value: 0
    };
    c -= a;
    d -= b;
    f -= a;
    g -= b;
    h -= a;
    m -= b;
    a = Math.sqrt(c * c + d * d);
    c /= a;
    d /= a;
    b = f * c + g * d;
    g = g * c - f * d;
    f = b;
    b = h * c + m * d;
    m = m * c - h * d;
    h = b;
    return g === m ? {
        isSuccess: !1,
        value: 0
    } : {
        isSuccess: !0,
        value: (h + (f - h) * m / (m - g)) / a
    }
};
cc.vertexListIsClockwise = function (a) {
    for (var b = 0, c = a.length; b < c; b++) {
        var d = a[(b + 1) % c],
            f = a[(b + 2) % c];
        if (0 < cc.pCross(cc.pSub(d, a[b]), cc.pSub(f, d))) return !1
    }
    return !0
};
cc.CGAffineToGL = function (a, b) {
    b[2] = b[3] = b[6] = b[7] = b[8] = b[9] = b[11] = b[14] = 0;
    b[10] = b[15] = 1;
    b[0] = a.a;
    b[4] = a.c;
    b[12] = a.tx;
    b[1] = a.b;
    b[5] = a.d;
    b[13] = a.ty
};
cc.GLToCGAffine = function (a, b) {
    b.a = a[0];
    b.c = a[4];
    b.tx = a[12];
    b.b = a[1];
    b.d = a[5];
    b.ty = a[13]
};
cc.Touch = cc.Class.extend({
    _lastModified: 0,
    _point: null,
    _prevPoint: null,
    _id: 0,
    _startPointCaptured: !1,
    _startPoint: null,
    ctor: function (a, b, c) {
        this.setTouchInfo(c, a, b)
    },
    getLocation: function () {
        return {
            x: this._point.x,
            y: this._point.y
        }
    },
    getLocationX: function () {
        return this._point.x
    },
    getLocationY: function () {
        return this._point.y
    },
    getPreviousLocation: function () {
        return {
            x: this._prevPoint.x,
            y: this._prevPoint.y
        }
    },
    getStartLocation: function () {
        return {
            x: this._startPoint.x,
            y: this._startPoint.y
        }
    },
    getDelta: function () {
        return cc.pSub(this._point,
            this._prevPoint)
    },
    getLocationInView: function () {
        return {
            x: this._point.x,
            y: this._point.y
        }
    },
    getPreviousLocationInView: function () {
        return {
            x: this._prevPoint.x,
            y: this._prevPoint.y
        }
    },
    getStartLocationInView: function () {
        return {
            x: this._startPoint.x,
            y: this._startPoint.y
        }
    },
    getID: function () {
        return this._id
    },
    getId: function () {
        cc.log("getId is deprecated. Please use getID instead.");
        return this._id
    },
    setTouchInfo: function (a, b, c) {
        this._prevPoint = this._point;
        this._point = cc.p(b || 0, c || 0);
        this._id = a;
        this._startPointCaptured ||
            (this._startPoint = cc.p(this._point), cc.view._convertPointWithScale(this._startPoint), this._startPointCaptured = !0)
    },
    _setPoint: function (a, b) {
        void 0 === b ? (this._point.x = a.x, this._point.y = a.y) : (this._point.x = a, this._point.y = b)
    },
    _setPrevPoint: function (a, b) {
        this._prevPoint = void 0 === b ? cc.p(a.x, a.y) : cc.p(a || 0, b || 0)
    }
});
cc.Event = cc.Class.extend({
    _type: 0,
    _isStopped: !1,
    _currentTarget: null,
    _setCurrentTarget: function (a) {
        this._currentTarget = a
    },
    ctor: function (a) {
        this._type = a
    },
    getType: function () {
        return this._type
    },
    stopPropagation: function () {
        this._isStopped = !0
    },
    isStopped: function () {
        return this._isStopped
    },
    getCurrentTarget: function () {
        return this._currentTarget
    }
});
cc.Event.TOUCH = 0;
cc.Event.KEYBOARD = 1;
cc.Event.ACCELERATION = 2;
cc.Event.MOUSE = 3;
cc.Event.FOCUS = 4;
cc.Event.CUSTOM = 6;
cc.EventCustom = cc.Event.extend({
    _eventName: null,
    _userData: null,
    ctor: function (a) {
        cc.Event.prototype.ctor.call(this, cc.Event.CUSTOM);
        this._eventName = a
    },
    setUserData: function (a) {
        this._userData = a
    },
    getUserData: function () {
        return this._userData
    },
    getEventName: function () {
        return this._eventName
    }
});
cc.EventMouse = cc.Event.extend({
    _eventType: 0,
    _button: 0,
    _x: 0,
    _y: 0,
    _prevX: 0,
    _prevY: 0,
    _scrollX: 0,
    _scrollY: 0,
    ctor: function (a) {
        cc.Event.prototype.ctor.call(this, cc.Event.MOUSE);
        this._eventType = a
    },
    setScrollData: function (a, b) {
        this._scrollX = a;
        this._scrollY = b
    },
    getScrollX: function () {
        return this._scrollX
    },
    getScrollY: function () {
        return this._scrollY
    },
    setLocation: function (a, b) {
        this._x = a;
        this._y = b
    },
    getLocation: function () {
        return {
            x: this._x,
            y: this._y
        }
    },
    getLocationInView: function () {
        return {
            x: this._x,
            y: cc.view._designResolutionSize.height -
                this._y
        }
    },
    _setPrevCursor: function (a, b) {
        this._prevX = a;
        this._prevY = b
    },
    getDelta: function () {
        return {
            x: this._x - this._prevX,
            y: this._y - this._prevY
        }
    },
    getDeltaX: function () {
        return this._x - this._prevX
    },
    getDeltaY: function () {
        return this._y - this._prevY
    },
    setButton: function (a) {
        this._button = a
    },
    getButton: function () {
        return this._button
    },
    getLocationX: function () {
        return this._x
    },
    getLocationY: function () {
        return this._y
    }
});
cc.EventMouse.NONE = 0;
cc.EventMouse.DOWN = 1;
cc.EventMouse.UP = 2;
cc.EventMouse.MOVE = 3;
cc.EventMouse.SCROLL = 4;
cc.EventMouse.BUTTON_LEFT = 0;
cc.EventMouse.BUTTON_RIGHT = 2;
cc.EventMouse.BUTTON_MIDDLE = 1;
cc.EventMouse.BUTTON_4 = 3;
cc.EventMouse.BUTTON_5 = 4;
cc.EventMouse.BUTTON_6 = 5;
cc.EventMouse.BUTTON_7 = 6;
cc.EventMouse.BUTTON_8 = 7;
cc.EventTouch = cc.Event.extend({
    _eventCode: 0,
    _touches: null,
    ctor: function (a) {
        cc.Event.prototype.ctor.call(this, cc.Event.TOUCH);
        this._touches = a || []
    },
    getEventCode: function () {
        return this._eventCode
    },
    getTouches: function () {
        return this._touches
    },
    _setEventCode: function (a) {
        this._eventCode = a
    },
    _setTouches: function (a) {
        this._touches = a
    }
});
cc.EventTouch.MAX_TOUCHES = 5;
cc.EventTouch.EventCode = {
    BEGAN: 0,
    MOVED: 1,
    ENDED: 2,
    CANCELLED: 3
};
cc.EventFocus = cc.Event.extend({
    _widgetGetFocus: null,
    _widgetLoseFocus: null,
    ctor: function (a, b) {
        cc.Event.prototype.ctor.call(this, cc.Event.FOCUS);
        this._widgetGetFocus = b;
        this._widgetLoseFocus = a
    }
});
cc.EventListener = cc.Class.extend({
    _onEvent: null,
    _type: 0,
    _listenerID: null,
    _registered: !1,
    _fixedPriority: 0,
    _node: null,
    _paused: !0,
    _isEnabled: !0,
    ctor: function (a, b, c) {
        this._onEvent = c;
        this._type = a || 0;
        this._listenerID = b || ""
    },
    _setPaused: function (a) {
        this._paused = a
    },
    _isPaused: function () {
        return this._paused
    },
    _setRegistered: function (a) {
        this._registered = a
    },
    _isRegistered: function () {
        return this._registered
    },
    _getType: function () {
        return this._type
    },
    _getListenerID: function () {
        return this._listenerID
    },
    _setFixedPriority: function (a) {
        this._fixedPriority =
            a
    },
    _getFixedPriority: function () {
        return this._fixedPriority
    },
    _setSceneGraphPriority: function (a) {
        this._node = a
    },
    _getSceneGraphPriority: function () {
        return this._node
    },
    checkAvailable: function () {
        return null !== this._onEvent
    },
    clone: function () {
        return null
    },
    setEnabled: function (a) {
        this._isEnabled = a
    },
    isEnabled: function () {
        return this._isEnabled
    },
    retain: function () {},
    release: function () {}
});
cc.EventListener.UNKNOWN = 0;
cc.EventListener.TOUCH_ONE_BY_ONE = 1;
cc.EventListener.TOUCH_ALL_AT_ONCE = 2;
cc.EventListener.KEYBOARD = 3;
cc.EventListener.MOUSE = 4;
cc.EventListener.ACCELERATION = 6;
cc.EventListener.FOCUS = 7;
cc.EventListener.CUSTOM = 8;
cc._EventListenerCustom = cc.EventListener.extend({
    _onCustomEvent: null,
    ctor: function (a, b) {
        this._onCustomEvent = b;
        var c = this;
        cc.EventListener.prototype.ctor.call(this, cc.EventListener.CUSTOM, a, function (a) {
            null !== c._onCustomEvent && c._onCustomEvent(a)
        })
    },
    checkAvailable: function () {
        return cc.EventListener.prototype.checkAvailable.call(this) && null !== this._onCustomEvent
    },
    clone: function () {
        return new cc._EventListenerCustom(this._listenerID, this._onCustomEvent)
    }
});
cc._EventListenerCustom.create = function (a, b) {
    return new cc._EventListenerCustom(a, b)
};
cc._EventListenerMouse = cc.EventListener.extend({
    onMouseDown: null,
    onMouseUp: null,
    onMouseMove: null,
    onMouseScroll: null,
    ctor: function () {
        var a = this;
        cc.EventListener.prototype.ctor.call(this, cc.EventListener.MOUSE, cc._EventListenerMouse.LISTENER_ID, function (b) {
            var c = cc.EventMouse;
            switch (b._eventType) {
            case c.DOWN:
                if (a.onMouseDown) a.onMouseDown(b);
                break;
            case c.UP:
                if (a.onMouseUp) a.onMouseUp(b);
                break;
            case c.MOVE:
                if (a.onMouseMove) a.onMouseMove(b);
                break;
            case c.SCROLL:
                if (a.onMouseScroll) a.onMouseScroll(b)
            }
        })
    },
    clone: function () {
        var a = new cc._EventListenerMouse;
        a.onMouseDown = this.onMouseDown;
        a.onMouseUp = this.onMouseUp;
        a.onMouseMove = this.onMouseMove;
        a.onMouseScroll = this.onMouseScroll;
        return a
    },
    checkAvailable: function () {
        return !0
    }
});
cc._EventListenerMouse.LISTENER_ID = "__cc_mouse";
cc._EventListenerMouse.create = function () {
    return new cc._EventListenerMouse
};
cc._EventListenerTouchOneByOne = cc.EventListener.extend({
    _claimedTouches: null,
    swallowTouches: !1,
    onTouchBegan: null,
    onTouchMoved: null,
    onTouchEnded: null,
    onTouchCancelled: null,
    ctor: function () {
        cc.EventListener.prototype.ctor.call(this, cc.EventListener.TOUCH_ONE_BY_ONE, cc._EventListenerTouchOneByOne.LISTENER_ID, null);
        this._claimedTouches = []
    },
    setSwallowTouches: function (a) {
        this.swallowTouches = a
    },
    isSwallowTouches: function () {
        return this.swallowTouches
    },
    clone: function () {
        var a = new cc._EventListenerTouchOneByOne;
        a.onTouchBegan = this.onTouchBegan;
        a.onTouchMoved = this.onTouchMoved;
        a.onTouchEnded = this.onTouchEnded;
        a.onTouchCancelled = this.onTouchCancelled;
        a.swallowTouches = this.swallowTouches;
        return a
    },
    checkAvailable: function () {
        return !this.onTouchBegan ? (cc.log(cc._LogInfos._EventListenerTouchOneByOne_checkAvailable), !1) : !0
    }
});
cc._EventListenerTouchOneByOne.LISTENER_ID = "__cc_touch_one_by_one";
cc._EventListenerTouchOneByOne.create = function () {
    return new cc._EventListenerTouchOneByOne
};
cc._EventListenerTouchAllAtOnce = cc.EventListener.extend({
    onTouchesBegan: null,
    onTouchesMoved: null,
    onTouchesEnded: null,
    onTouchesCancelled: null,
    ctor: function () {
        cc.EventListener.prototype.ctor.call(this, cc.EventListener.TOUCH_ALL_AT_ONCE, cc._EventListenerTouchAllAtOnce.LISTENER_ID, null)
    },
    clone: function () {
        var a = new cc._EventListenerTouchAllAtOnce;
        a.onTouchesBegan = this.onTouchesBegan;
        a.onTouchesMoved = this.onTouchesMoved;
        a.onTouchesEnded = this.onTouchesEnded;
        a.onTouchesCancelled = this.onTouchesCancelled;
        return a
    },
    checkAvailable: function () {
        return null === this.onTouchesBegan && null === this.onTouchesMoved && null === this.onTouchesEnded && null === this.onTouchesCancelled ? (cc.log(cc._LogInfos._EventListenerTouchAllAtOnce_checkAvailable), !1) : !0
    }
});
cc._EventListenerTouchAllAtOnce.LISTENER_ID = "__cc_touch_all_at_once";
cc._EventListenerTouchAllAtOnce.create = function () {
    return new cc._EventListenerTouchAllAtOnce
};
cc.EventListener.create = function (a) {
    cc.assert(a && a.event, cc._LogInfos.EventListener_create);
    var b = a.event;
    delete a.event;
    var c = null;
    b === cc.EventListener.TOUCH_ONE_BY_ONE ? c = new cc._EventListenerTouchOneByOne : b === cc.EventListener.TOUCH_ALL_AT_ONCE ? c = new cc._EventListenerTouchAllAtOnce : b === cc.EventListener.MOUSE ? c = new cc._EventListenerMouse : b === cc.EventListener.CUSTOM ? (c = new cc._EventListenerCustom(a.eventName, a.callback), delete a.eventName, delete a.callback) : b === cc.EventListener.KEYBOARD ? c = new cc._EventListenerKeyboard :
        b === cc.EventListener.ACCELERATION ? (c = new cc._EventListenerAcceleration(a.callback), delete a.callback) : b === cc.EventListener.FOCUS && (c = new cc._EventListenerFocus);
    for (var d in a) c[d] = a[d];
    return c
};
cc._EventListenerFocus = cc.EventListener.extend({
    clone: function () {
        var a = new cc._EventListenerFocus;
        a.onFocusChanged = this.onFocusChanged;
        return a
    },
    checkAvailable: function () {
        return !this.onFocusChanged ? (cc.log("Invalid EventListenerFocus!"), !1) : !0
    },
    onFocusChanged: null,
    ctor: function () {
        cc.EventListener.prototype.ctor.call(this, cc.EventListener.FOCUS, cc._EventListenerFocus.LISTENER_ID, function (a) {
            if (this.onFocusChanged) this.onFocusChanged(a._widgetLoseFocus, a._widgetGetFocus)
        })
    }
});
cc._EventListenerFocus.LISTENER_ID = "__cc_focus_event";
(function () {
    function a(a) {
        var c = cc.Event,
            d = a._type;
        if (d === c.ACCELERATION) return cc._EventListenerAcceleration.LISTENER_ID;
        if (d === c.CUSTOM) return a._eventName;
        if (d === c.KEYBOARD) return cc._EventListenerKeyboard.LISTENER_ID;
        if (d === c.MOUSE) return cc._EventListenerMouse.LISTENER_ID;
        if (d === c.FOCUS) return cc._EventListenerFocus.LISTENER_ID;
        d === c.TOUCH && cc.log(cc._LogInfos.__getListenerID);
        return ""
    }
    cc._EventListenerVector = cc.Class.extend({
        _fixedListeners: null,
        _sceneGraphListeners: null,
        gt0Index: 0,
        ctor: function () {
            this._fixedListeners = [];
            this._sceneGraphListeners = []
        },
        size: function () {
            return this._fixedListeners.length + this._sceneGraphListeners.length
        },
        empty: function () {
            return 0 === this._fixedListeners.length && 0 === this._sceneGraphListeners.length
        },
        push: function (a) {
            0 === a._getFixedPriority() ? this._sceneGraphListeners.push(a) : this._fixedListeners.push(a)
        },
        clearSceneGraphListeners: function () {
            this._sceneGraphListeners.length = 0
        },
        clearFixedListeners: function () {
            this._fixedListeners.length = 0
        },
        clear: function () {
            this._sceneGraphListeners.length =
                0;
            this._fixedListeners.length = 0
        },
        getFixedPriorityListeners: function () {
            return this._fixedListeners
        },
        getSceneGraphPriorityListeners: function () {
            return this._sceneGraphListeners
        }
    });
    cc.eventManager = {
        DIRTY_NONE: 0,
        DIRTY_FIXED_PRIORITY: 1,
        DIRTY_SCENE_GRAPH_PRIORITY: 2,
        DIRTY_ALL: 3,
        _listenersMap: {},
        _priorityDirtyFlagMap: {},
        _nodeListenersMap: {},
        _nodePriorityMap: {},
        _globalZOrderNodeMap: {},
        _toAddedListeners: [],
        _toRemovedListeners: [],
        _dirtyNodes: [],
        _inDispatch: 0,
        _isEnabled: !1,
        _nodePriorityIndex: 0,
        _internalCustomListenerIDs: [cc.game.EVENT_HIDE,
            cc.game.EVENT_SHOW
        ],
        _setDirtyForNode: function (a) {
            null != this._nodeListenersMap[a.__instanceId] && this._dirtyNodes.push(a);
            a = a.getChildren();
            for (var c = 0, d = a.length; c < d; c++) this._setDirtyForNode(a[c])
        },
        pauseTarget: function (a, c) {
            var d = this._nodeListenersMap[a.__instanceId],
                f, g;
            if (d) {
                f = 0;
                for (g = d.length; f < g; f++) d[f]._setPaused(!0)
            }
            if (!0 === c) {
                d = a.getChildren();
                f = 0;
                for (g = d.length; f < g; f++) this.pauseTarget(d[f], !0)
            }
        },
        resumeTarget: function (a, c) {
            var d = this._nodeListenersMap[a.__instanceId],
                f, g;
            if (d) {
                f = 0;
                for (g =
                    d.length; f < g; f++) d[f]._setPaused(!1)
            }
            this._setDirtyForNode(a);
            if (!0 === c) {
                d = a.getChildren();
                f = 0;
                for (g = d.length; f < g; f++) this.resumeTarget(d[f], !0)
            }
        },
        _addListener: function (a) {
            0 === this._inDispatch ? this._forceAddEventListener(a) : this._toAddedListeners.push(a)
        },
        _forceAddEventListener: function (a) {
            var c = a._getListenerID(),
                d = this._listenersMap[c];
            d || (d = new cc._EventListenerVector, this._listenersMap[c] = d);
            d.push(a);
            0 === a._getFixedPriority() ? (this._setDirty(c, this.DIRTY_SCENE_GRAPH_PRIORITY), c = a._getSceneGraphPriority(),
                null === c && cc.log(cc._LogInfos.eventManager__forceAddEventListener), this._associateNodeAndEventListener(c, a), c.isRunning() && this.resumeTarget(c)) : this._setDirty(c, this.DIRTY_FIXED_PRIORITY)
        },
        _getListeners: function (a) {
            return this._listenersMap[a]
        },
        _updateDirtyFlagForSceneGraph: function () {
            if (0 !== this._dirtyNodes.length) {
                for (var a = this._dirtyNodes, c, d, f = this._nodeListenersMap, g = 0, h = a.length; g < h; g++)
                    if (c = f[a[g].__instanceId])
                        for (var m = 0, n = c.length; m < n; m++)(d = c[m]) && this._setDirty(d._getListenerID(), this.DIRTY_SCENE_GRAPH_PRIORITY);
                this._dirtyNodes.length = 0
            }
        },
        _removeAllListenersInVector: function (a) {
            if (a)
                for (var c, d = 0; d < a.length;) c = a[d], c._setRegistered(!1), null != c._getSceneGraphPriority() && (this._dissociateNodeAndEventListener(c._getSceneGraphPriority(), c), c._setSceneGraphPriority(null)), 0 === this._inDispatch ? cc.arrayRemoveObject(a, c) : ++d
        },
        _removeListenersForListenerID: function (a) {
            var c = this._listenersMap[a];
            if (c) {
                var d = c.getFixedPriorityListeners(),
                    f = c.getSceneGraphPriorityListeners();
                this._removeAllListenersInVector(f);
                this._removeAllListenersInVector(d);
                delete this._priorityDirtyFlagMap[a];
                this._inDispatch || (c.clear(), delete this._listenersMap[a])
            }
            d = this._toAddedListeners;
            for (c = 0; c < d.length;)(f = d[c]) && f._getListenerID() === a ? cc.arrayRemoveObject(d, f) : ++c
        },
        _sortEventListeners: function (a) {
            var c = this.DIRTY_NONE,
                d = this._priorityDirtyFlagMap;
            d[a] && (c = d[a]);
            c !== this.DIRTY_NONE && (d[a] = this.DIRTY_NONE, c & this.DIRTY_FIXED_PRIORITY && this._sortListenersOfFixedPriority(a), c & this.DIRTY_SCENE_GRAPH_PRIORITY && ((c = cc.director.getRunningScene()) ? this._sortListenersOfSceneGraphPriority(a,
                c) : d[a] = this.DIRTY_SCENE_GRAPH_PRIORITY))
        },
        _sortListenersOfSceneGraphPriority: function (a, c) {
            var d = this._getListeners(a);
            if (d) {
                var f = d.getSceneGraphPriorityListeners();
                f && 0 !== f.length && (this._nodePriorityIndex = 0, this._nodePriorityMap = {}, this._visitTarget(c, !0), d.getSceneGraphPriorityListeners().sort(this._sortEventListenersOfSceneGraphPriorityDes))
            }
        },
        _sortEventListenersOfSceneGraphPriorityDes: function (a, c) {
            var d = cc.eventManager._nodePriorityMap,
                f = a._getSceneGraphPriority(),
                g = c._getSceneGraphPriority();
            return !c || !g || !d[g.__instanceId] ? -1 : !a || !f || !d[f.__instanceId] ? 1 : d[c._getSceneGraphPriority().__instanceId] - d[a._getSceneGraphPriority().__instanceId]
        },
        _sortListenersOfFixedPriority: function (a) {
            if (a = this._listenersMap[a]) {
                var c = a.getFixedPriorityListeners();
                if (c && 0 !== c.length) {
                    c.sort(this._sortListenersOfFixedPriorityAsc);
                    for (var d = 0, f = c.length; d < f && !(0 <= c[d]._getFixedPriority());) ++d;
                    a.gt0Index = d
                }
            }
        },
        _sortListenersOfFixedPriorityAsc: function (a, c) {
            return a._getFixedPriority() - c._getFixedPriority()
        },
        _onUpdateListeners: function (a) {
            var c = a.getFixedPriorityListeners(),
                d = a.getSceneGraphPriorityListeners(),
                f, g, h = this._toRemovedListeners;
            if (d)
                for (f = 0; f < d.length;) g = d[f], g._isRegistered() ? ++f : (cc.arrayRemoveObject(d, g), g = h.indexOf(g), -1 !== g && h.splice(g, 1));
            if (c)
                for (f = 0; f < c.length;) g = c[f], g._isRegistered() ? ++f : (cc.arrayRemoveObject(c, g), g = h.indexOf(g), -1 !== g && h.splice(g, 1));
            d && 0 === d.length && a.clearSceneGraphListeners();
            c && 0 === c.length && a.clearFixedListeners()
        },
        frameUpdateListeners: function () {
            var a = this._listenersMap,
                c = this._priorityDirtyFlagMap,
                d;
            for (d in a) a[d].empty() && (delete c[d], delete a[d]);
            a = this._toAddedListeners;
            if (0 !== a.length) {
                c = 0;
                for (d = a.length; c < d; c++) this._forceAddEventListener(a[c]);
                a.length = 0
            }
            0 !== this._toRemovedListeners.length && this._cleanToRemovedListeners()
        },
        _updateTouchListeners: function (a) {
            a = this._inDispatch;
            cc.assert(0 < a, cc._LogInfos.EventManager__updateListeners);
            if (!(1 < a)) {
                var c;
                (c = this._listenersMap[cc._EventListenerTouchOneByOne.LISTENER_ID]) && this._onUpdateListeners(c);
                (c = this._listenersMap[cc._EventListenerTouchAllAtOnce.LISTENER_ID]) &&
                this._onUpdateListeners(c);
                cc.assert(1 === a, cc._LogInfos.EventManager__updateListeners_2);
                a = this._toAddedListeners;
                if (0 !== a.length) {
                    c = 0;
                    for (var d = a.length; c < d; c++) this._forceAddEventListener(a[c]);
                    a.length = 0
                }
                0 !== this._toRemovedListeners.length && this._cleanToRemovedListeners()
            }
        },
        _cleanToRemovedListeners: function () {
            for (var a = this._toRemovedListeners, c = 0; c < a.length; c++) {
                var d = a[c],
                    f = this._listenersMap[d._getListenerID()];
                if (f) {
                    var g = f.getFixedPriorityListeners(),
                        h = f.getSceneGraphPriorityListeners();
                    h &&
                        (f = h.indexOf(d), -1 !== f && h.splice(f, 1));
                    g && (f = g.indexOf(d), -1 !== f && g.splice(f, 1))
                }
            }
            a.length = 0
        },
        _onTouchEventCallback: function (a, c) {
            if (!a._isRegistered) return !1;
            var d = c.event,
                f = c.selTouch;
            d._setCurrentTarget(a._node);
            var g = !1,
                h, m = d.getEventCode(),
                n = cc.EventTouch.EventCode;
            if (m === n.BEGAN) a.onTouchBegan && (g = a.onTouchBegan(f, d)) && a._registered && a._claimedTouches.push(f);
            else if (0 < a._claimedTouches.length && -1 !== (h = a._claimedTouches.indexOf(f)))
                if (g = !0, m === n.MOVED && a.onTouchMoved) a.onTouchMoved(f, d);
                else if (m ===
                n.ENDED) {
                if (a.onTouchEnded) a.onTouchEnded(f, d);
                a._registered && a._claimedTouches.splice(h, 1)
            } else if (m === n.CANCELLED) {
                if (a.onTouchCancelled) a.onTouchCancelled(f, d);
                a._registered && a._claimedTouches.splice(h, 1)
            }
            return d.isStopped() ? (cc.eventManager._updateTouchListeners(d), !0) : g && a._registered && a.swallowTouches ? (c.needsMutableSet && c.touches.splice(f, 1), !0) : !1
        },
        _dispatchTouchEvent: function (a) {
            this._sortEventListeners(cc._EventListenerTouchOneByOne.LISTENER_ID);
            this._sortEventListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID);
            var c = this._getListeners(cc._EventListenerTouchOneByOne.LISTENER_ID),
                d = this._getListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID);
            if (!(null === c && null === d)) {
                var f = a.getTouches(),
                    g = cc.copyArray(f),
                    h = {
                        event: a,
                        needsMutableSet: c && d,
                        touches: g,
                        selTouch: null
                    };
                if (c)
                    for (var m = 0; m < f.length; m++)
                        if (h.selTouch = f[m], this._dispatchEventToListeners(c, this._onTouchEventCallback, h), a.isStopped()) return;
                if (d && 0 < g.length && (this._dispatchEventToListeners(d, this._onTouchesEventCallback, {
                        event: a,
                        touches: g
                    }), a.isStopped())) return;
                this._updateTouchListeners(a)
            }
        },
        _onTouchesEventCallback: function (a, c) {
            if (!a._registered) return !1;
            var d = cc.EventTouch.EventCode,
                f = c.event,
                g = c.touches,
                h = f.getEventCode();
            f._setCurrentTarget(a._node);
            if (h === d.BEGAN && a.onTouchesBegan) a.onTouchesBegan(g, f);
            else if (h === d.MOVED && a.onTouchesMoved) a.onTouchesMoved(g, f);
            else if (h === d.ENDED && a.onTouchesEnded) a.onTouchesEnded(g, f);
            else if (h === d.CANCELLED && a.onTouchesCancelled) a.onTouchesCancelled(g, f);
            return f.isStopped() ? (cc.eventManager._updateTouchListeners(f),
                !0) : !1
        },
        _associateNodeAndEventListener: function (a, c) {
            var d = this._nodeListenersMap[a.__instanceId];
            d || (d = [], this._nodeListenersMap[a.__instanceId] = d);
            d.push(c)
        },
        _dissociateNodeAndEventListener: function (a, c) {
            var d = this._nodeListenersMap[a.__instanceId];
            d && (cc.arrayRemoveObject(d, c), 0 === d.length && delete this._nodeListenersMap[a.__instanceId])
        },
        _dispatchEventToListeners: function (a, c, d) {
            var f = !1,
                g = a.getFixedPriorityListeners(),
                h = a.getSceneGraphPriorityListeners(),
                m = 0,
                n;
            if (g && 0 !== g.length)
                for (; m < a.gt0Index; ++m)
                    if (n =
                        g[m], n.isEnabled() && !n._isPaused() && n._isRegistered() && c(n, d)) {
                        f = !0;
                        break
                    } if (h && !f)
                for (a = 0; a < h.length; a++)
                    if (n = h[a], n.isEnabled() && !n._isPaused() && n._isRegistered() && c(n, d)) {
                        f = !0;
                        break
                    } if (g && !f)
                for (; m < g.length && !(n = g[m], n.isEnabled() && !n._isPaused() && n._isRegistered() && c(n, d)); ++m);
        },
        _setDirty: function (a, c) {
            var d = this._priorityDirtyFlagMap;
            d[a] = null == d[a] ? c : c | d[a]
        },
        _visitTarget: function (a, c) {
            var d = a.getChildren(),
                f = 0,
                g = d.length,
                h = this._globalZOrderNodeMap,
                m = this._nodeListenersMap;
            if (0 < g) {
                for (var n; f <
                    g; f++)
                    if ((n = d[f]) && 0 > n.getLocalZOrder()) this._visitTarget(n, !1);
                    else break;
                null != m[a.__instanceId] && (h[a.getGlobalZOrder()] || (h[a.getGlobalZOrder()] = []), h[a.getGlobalZOrder()].push(a.__instanceId));
                for (; f < g; f++)(n = d[f]) && this._visitTarget(n, !1)
            } else null != m[a.__instanceId] && (h[a.getGlobalZOrder()] || (h[a.getGlobalZOrder()] = []), h[a.getGlobalZOrder()].push(a.__instanceId));
            if (c) {
                var d = [],
                    p;
                for (p in h) d.push(p);
                d.sort(this._sortNumberAsc);
                p = d.length;
                n = this._nodePriorityMap;
                for (f = 0; f < p; f++) {
                    g = h[d[f]];
                    for (m = 0; m < g.length; m++) n[g[m]] = ++this._nodePriorityIndex
                }
                this._globalZOrderNodeMap = {}
            }
        },
        _sortNumberAsc: function (a, c) {
            return a - c
        },
        addListener: function (a, c) {
            cc.assert(a && c, cc._LogInfos.eventManager_addListener_2);
            if (a instanceof cc.EventListener) {
                if (a._isRegistered()) {
                    cc.log(cc._LogInfos.eventManager_addListener_4);
                    return
                }
            } else cc.assert(!cc.isNumber(c), cc._LogInfos.eventManager_addListener_3), a = cc.EventListener.create(a);
            if (a.checkAvailable()) {
                if (cc.isNumber(c)) {
                    if (0 === c) {
                        cc.log(cc._LogInfos.eventManager_addListener);
                        return
                    }
                    a._setSceneGraphPriority(null);
                    a._setFixedPriority(c);
                    a._setRegistered(!0);
                    a._setPaused(!1)
                } else a._setSceneGraphPriority(c), a._setFixedPriority(0), a._setRegistered(!0);
                this._addListener(a);
                return a
            }
        },
        addCustomListener: function (a, c) {
            var d = new cc._EventListenerCustom(a, c);
            this.addListener(d, 1);
            return d
        },
        removeListener: function (a) {
            if (null != a) {
                var c, d = this._listenersMap,
                    f;
                for (f in d) {
                    var g = d[f],
                        h = g.getFixedPriorityListeners();
                    c = g.getSceneGraphPriorityListeners();
                    (c = this._removeListenerInVector(c,
                        a)) ? this._setDirty(a._getListenerID(), this.DIRTY_SCENE_GRAPH_PRIORITY): (c = this._removeListenerInVector(h, a)) && this._setDirty(a._getListenerID(), this.DIRTY_FIXED_PRIORITY);
                    g.empty() && (delete this._priorityDirtyFlagMap[a._getListenerID()], delete d[f]);
                    if (c) break
                }
                if (!c) {
                    d = this._toAddedListeners;
                    f = 0;
                    for (g = d.length; f < g; f++)
                        if (h = d[f], h === a) {
                            cc.arrayRemoveObject(d, h);
                            h._setRegistered(!1);
                            break
                        }
                }
            }
        },
        _removeListenerInCallback: function (a, c) {
            if (null == a) return !1;
            for (var d = 0, f = a.length; d < f; d++) {
                var g = a[d];
                if (g._onCustomEvent ===
                    c || g._onEvent === c) return g._setRegistered(!1), null != g._getSceneGraphPriority() && (this._dissociateNodeAndEventListener(g._getSceneGraphPriority(), g), g._setSceneGraphPriority(null)), 0 === this._inDispatch && cc.arrayRemoveObject(a, g), !0
            }
            return !1
        },
        _removeListenerInVector: function (a, c) {
            if (null == a) return !1;
            for (var d = 0, f = a.length; d < f; d++) {
                var g = a[d];
                if (g === c) return g._setRegistered(!1), null != g._getSceneGraphPriority() && (this._dissociateNodeAndEventListener(g._getSceneGraphPriority(), g), g._setSceneGraphPriority(null)),
                    0 === this._inDispatch ? cc.arrayRemoveObject(a, g) : this._toRemovedListeners.push(g), !0
            }
            return !1
        },
        removeListeners: function (a, c) {
            if (a instanceof cc.Node) {
                delete this._nodePriorityMap[a.__instanceId];
                cc.arrayRemoveObject(this._dirtyNodes, a);
                var d = this._nodeListenersMap[a.__instanceId];
                if (d) {
                    for (var f = cc.copyArray(d), d = 0; d < f.length; d++) this.removeListener(f[d]);
                    f.length = 0
                }
                f = this._toAddedListeners;
                for (d = 0; d < f.length;) {
                    var g = f[d];
                    g._getSceneGraphPriority() === a ? (g._setSceneGraphPriority(null), g._setRegistered(!1),
                        f.splice(d, 1)) : ++d
                }
                if (!0 === c) {
                    f = a.getChildren();
                    d = 0;
                    for (g = f.length; d < g; d++) this.removeListeners(f[d], !0)
                }
            } else a === cc.EventListener.TOUCH_ONE_BY_ONE ? this._removeListenersForListenerID(cc._EventListenerTouchOneByOne.LISTENER_ID) : a === cc.EventListener.TOUCH_ALL_AT_ONCE ? this._removeListenersForListenerID(cc._EventListenerTouchAllAtOnce.LISTENER_ID) : a === cc.EventListener.MOUSE ? this._removeListenersForListenerID(cc._EventListenerMouse.LISTENER_ID) : a === cc.EventListener.ACCELERATION ? this._removeListenersForListenerID(cc._EventListenerAcceleration.LISTENER_ID) :
                a === cc.EventListener.KEYBOARD ? this._removeListenersForListenerID(cc._EventListenerKeyboard.LISTENER_ID) : cc.log(cc._LogInfos.eventManager_removeListeners)
        },
        removeCustomListeners: function (a) {
            this._removeListenersForListenerID(a)
        },
        removeAllListeners: function () {
            var a = this._listenersMap,
                c = this._internalCustomListenerIDs,
                d;
            for (d in a) - 1 === c.indexOf(d) && this._removeListenersForListenerID(d)
        },
        setPriority: function (a, c) {
            if (null != a) {
                var d = this._listenersMap,
                    f;
                for (f in d) {
                    var g = d[f].getFixedPriorityListeners();
                    if (g && -1 !== g.indexOf(a)) {
                        null != a._getSceneGraphPriority() && cc.log(cc._LogInfos.eventManager_setPriority);
                        a._getFixedPriority() !== c && (a._setFixedPriority(c), this._setDirty(a._getListenerID(), this.DIRTY_FIXED_PRIORITY));
                        break
                    }
                }
            }
        },
        setEnabled: function (a) {
            this._isEnabled = a
        },
        isEnabled: function () {
            return this._isEnabled
        },
        dispatchEvent: function (b) {
            if (this._isEnabled) {
                this._updateDirtyFlagForSceneGraph();
                this._inDispatch++;
                if (!b || !b.getType) throw Error("event is undefined");
                if (b._type === cc.Event.TOUCH) this._dispatchTouchEvent(b);
                else {
                    var c = a(b);
                    this._sortEventListeners(c);
                    if (c = this._listenersMap[c]) this._dispatchEventToListeners(c, this._onListenerCallback, b), this._onUpdateListeners(c)
                }
                this._inDispatch--
            }
        },
        _onListenerCallback: function (a, c) {
            c._setCurrentTarget(a._getSceneGraphPriority());
            a._onEvent(c);
            return c.isStopped()
        },
        dispatchCustomEvent: function (a, c) {
            var d = new cc.EventCustom(a);
            d.setUserData(c);
            this.dispatchEvent(d)
        }
    }
})();
cc.EventAcceleration = cc.Event.extend({
    _acc: null,
    ctor: function (a) {
        cc.Event.prototype.ctor.call(this, cc.Event.ACCELERATION);
        this._acc = a
    }
});
cc.EventKeyboard = cc.Event.extend({
    _keyCode: 0,
    _isPressed: !1,
    ctor: function (a, b) {
        cc.Event.prototype.ctor.call(this, cc.Event.KEYBOARD);
        this._keyCode = a;
        this._isPressed = b
    }
});
cc._EventListenerAcceleration = cc.EventListener.extend({
    _onAccelerationEvent: null,
    ctor: function (a) {
        this._onAccelerationEvent = a;
        var b = this;
        cc.EventListener.prototype.ctor.call(this, cc.EventListener.ACCELERATION, cc._EventListenerAcceleration.LISTENER_ID, function (a) {
            b._onAccelerationEvent(a._acc, a)
        })
    },
    checkAvailable: function () {
        cc.assert(this._onAccelerationEvent, cc._LogInfos._EventListenerAcceleration_checkAvailable);
        return !0
    },
    clone: function () {
        return new cc._EventListenerAcceleration(this._onAccelerationEvent)
    }
});
cc._EventListenerAcceleration.LISTENER_ID = "__cc_acceleration";
cc._EventListenerAcceleration.create = function (a) {
    return new cc._EventListenerAcceleration(a)
};
cc._EventListenerKeyboard = cc.EventListener.extend({
    onKeyPressed: null,
    onKeyReleased: null,
    ctor: function () {
        var a = this;
        cc.EventListener.prototype.ctor.call(this, cc.EventListener.KEYBOARD, cc._EventListenerKeyboard.LISTENER_ID, function (b) {
            if (b._isPressed) {
                if (a.onKeyPressed) a.onKeyPressed(b._keyCode, b)
            } else if (a.onKeyReleased) a.onKeyReleased(b._keyCode, b)
        })
    },
    clone: function () {
        var a = new cc._EventListenerKeyboard;
        a.onKeyPressed = this.onKeyPressed;
        a.onKeyReleased = this.onKeyReleased;
        return a
    },
    checkAvailable: function () {
        return null ===
            this.onKeyPressed && null === this.onKeyReleased ? (cc.log(cc._LogInfos._EventListenerKeyboard_checkAvailable), !1) : !0
    }
});
cc._EventListenerKeyboard.LISTENER_ID = "__cc_keyboard";
cc._EventListenerKeyboard.create = function () {
    return new cc._EventListenerKeyboard
};
var GlobalVertexBuffer = function () {
    var a = function (a, c) {
        this.gl = a;
        this.vertexBuffer = a.createBuffer();
        this.size = 888;
        this.byteLength = c || 3552 * cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;
        this.data = new ArrayBuffer(this.byteLength);
        this.dataArray = new Float32Array(this.data);
        a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer);
        a.bufferData(a.ARRAY_BUFFER, this.dataArray, a.DYNAMIC_DRAW);
        this._dirty = !1;
        this._spaces = {
            "0": this.byteLength
        }
    };
    a.prototype = {
        constructor: a,
        allocBuffer: function (a, c) {
            var d = this._spaces[a];
            return d &&
                d >= c ? (delete this._spaces[a], d > c && (this._spaces[a + c] = d - c), !0) : !1
        },
        requestBuffer: function (a) {
            var c, d, f;
            for (c in this._spaces)
                if (d = parseInt(c), f = this._spaces[c], f >= a && this.allocBuffer(d, a)) return d;
            return -1
        },
        freeBuffer: function (a, c) {
            var d = this._spaces,
                f, g;
            for (g in d) {
                f = parseInt(g);
                if (f > a) break;
                if (f + d[g] >= a) {
                    c = c + a - f;
                    a = f;
                    break
                }
            }
            d = a + c;
            this._spaces[d] && (c += this._spaces[d], delete this._spaces[d]);
            this._spaces[a] = c
        },
        setDirty: function () {
            this._dirty = !0
        },
        update: function () {
            this._dirty && (this.gl.bindBuffer(gl.ARRAY_BUFFER,
                this.vertexBuffer), this.gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.dataArray), this._dirty = !1)
        },
        updateSubData: function (a, c) {
            this.gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
            this.gl.bufferSubData(gl.ARRAY_BUFFER, a, c)
        },
        destroy: function () {
            this.gl.deleteBuffer(this.vertexBuffer);
            this.vertexBuffer = this.texCoords = this.colors = this.positions = this.data = null
        }
    };
    return a
}();
cc.rendererCanvas = {
    childrenOrderDirty: !0,
    assignedZ: 0,
    assignedZStep: 1E-4,
    _transformNodePool: [],
    _renderCmds: [],
    _isCacheToCanvasOn: !1,
    _cacheToCanvasCmds: {},
    _cacheInstanceIds: [],
    _currentID: 0,
    _clearColor: cc.color(),
    _clearFillStyle: "rgb(0, 0, 0)",
    _dirtyRegion: null,
    _allNeedDraw: !0,
    _enableDirtyRegion: !1,
    _debugDirtyRegion: !1,
    _canUseDirtyRegion: !1,
    _dirtyRegionCountThreshold: 10,
    getRenderCmd: function (a) {
        return a._createRenderCmd()
    },
    enableDirtyRegion: function (a) {
        this._enableDirtyRegion = a
    },
    isDirtyRegionEnabled: function () {
        return this._enableDirtyRegion
    },
    setDirtyRegionCountThreshold: function (a) {
        this._dirtyRegionCountThreshold = a
    },
    _collectDirtyRegion: function () {
        var a = this._renderCmds,
            b, c, d = this._dirtyRegion,
            f = 0,
            g = !0,
            h = cc.Node.CanvasRenderCmd.RegionStatus;
        b = 0;
        for (c = a.length; b < c; b++) {
            var m = a[b],
                n = m._oldRegion,
                p = m._currentRegion;
            m._regionFlag > h.NotDirty && (++f, f > this._dirtyRegionCountThreshold && (g = !1), g && (!p.isEmpty() && d.addRegion(p), m._regionFlag > h.Dirty && !n.isEmpty() && d.addRegion(n)), m._regionFlag = h.NotDirty)
        }
        return g
    },
    _beginDrawDirtyRegion: function (a) {
        var b =
            a.getContext(),
            c = this._dirtyRegion.getDirtyRegions();
        b.save();
        a.setTransform({
            a: 1,
            b: 0,
            c: 0,
            d: 1,
            tx: 0,
            ty: 0
        }, a._scaleX, a._scaleY);
        b.beginPath();
        a = 0;
        for (var d = c.length; a < d; ++a) {
            var f = c[a];
            b.rect(f._minX, -f._maxY, f._width, f._height)
        }
        b.clip()
    },
    _endDrawDirtyRegion: function (a) {
        a.restore()
    },
    _debugDrawDirtyRegion: function (a) {
        if (this._debugDirtyRegion) {
            var b = a.getContext(),
                c = this._dirtyRegion.getDirtyRegions();
            a.setTransform({
                a: 1,
                b: 0,
                c: 0,
                d: 1,
                tx: 0,
                ty: 0
            }, a._scaleX, a._scaleY);
            b.beginPath();
            a = 0;
            for (var d = c.length; a <
                d; ++a) {
                var f = c[a];
                b.rect(f._minX, -f._maxY, f._width, f._height)
            }
            c = b.fillStyle;
            b.fillStyle = "green";
            b.fill();
            b.fillStyle = c
        }
    },
    rendering: function (a) {
        var b = this._dirtyRegion = this._dirtyRegion || new cc.DirtyRegion,
            c = cc._canvas;
        a = a || cc._renderContext;
        var d = a.getContext(),
            f = cc.view.getScaleX(),
            g = cc.view.getScaleY();
        a.setViewScale(f, g);
        a.computeRealOffsetY();
        var h = this._dirtyRegion.getDirtyRegions(),
            m = this._renderCmds,
            n, p = this._allNeedDraw || !this._enableDirtyRegion || !this._canUseDirtyRegion;
        n = !0;
        p || (n = this._collectDirtyRegion());
        (p = p || !n) || this._beginDrawDirtyRegion(a);
        d.setTransform(1, 0, 0, 1, 0, 0);
        d.clearRect(0, 0, c.width, c.height);
        if (255 !== this._clearColor.r || 255 !== this._clearColor.g || 255 !== this._clearColor.b) a.setFillStyle(this._clearFillStyle), a.setGlobalAlpha(this._clearColor.a), d.fillRect(0, 0, c.width, c.height);
        c = 0;
        for (n = m.length; c < n; c++) {
            var u = m[c],
                v = !1,
                x = u._currentRegion;
            if (!x || p) v = !0;
            else
                for (var y = 0, z = h.length; y < z; ++y)
                    if (h[y].intersects(x)) {
                        v = !0;
                        break
                    } v && u.rendering(a, f, g)
        }
        p || (this._debugDrawDirtyRegion(a), this._endDrawDirtyRegion(d));
        b.clear();
        this._allNeedDraw = !1
    },
    _renderingToCacheCanvas: function (a, b, c, d) {
        a || cc.log("The context of RenderTexture is invalid.");
        c = cc.isUndefined(c) ? 1 : c;
        d = cc.isUndefined(d) ? 1 : d;
        b = b || this._currentID;
        var f, g = this._cacheToCanvasCmds[b],
            h;
        a.computeRealOffsetY();
        f = 0;
        for (h = g.length; f < h; f++) g[f].rendering(a, c, d);
        this._removeCache(b);
        a = this._cacheInstanceIds;
        0 === a.length ? this._isCacheToCanvasOn = !1 : this._currentID = a[a.length - 1]
    },
    _turnToCacheMode: function (a) {
        this._isCacheToCanvasOn = !0;
        a = a || 0;
        this._cacheToCanvasCmds[a] = []; - 1 === this._cacheInstanceIds.indexOf(a) && this._cacheInstanceIds.push(a);
        this._currentID = a
    },
    _turnToNormalMode: function () {
        this._isCacheToCanvasOn = !1
    },
    _removeCache: function (a) {
        a = a || this._currentID;
        var b = this._cacheToCanvasCmds[a];
        b && (b.length = 0, delete this._cacheToCanvasCmds[a]);
        cc.arrayRemoveObject(this._cacheInstanceIds, a)
    },
    resetFlag: function () {
        this.childrenOrderDirty = !1;
        this._transformNodePool.length = 0
    },
    transform: function () {
        var a = this._transformNodePool;
        a.sort(this._sortNodeByLevelAsc);
        for (var b =
                0, c = a.length; b < c; b++) 0 !== a[b]._dirtyFlag && a[b].updateStatus();
        a.length = 0
    },
    transformDirty: function () {
        return 0 < this._transformNodePool.length
    },
    _sortNodeByLevelAsc: function (a, b) {
        return a._curLevel - b._curLevel
    },
    pushDirtyNode: function (a) {
        this._transformNodePool.push(a)
    },
    clear: function () {},
    clearRenderCommands: function () {
        this._renderCmds.length = 0;
        this._cacheInstanceIds.length = 0;
        this._isCacheToCanvasOn = !1;
        this._canUseDirtyRegion = this._allNeedDraw = !0
    },
    pushRenderCommand: function (a) {
        if (a.needDraw())
            if (a._canUseDirtyRegion ||
                (this._canUseDirtyRegion = !1), this._isCacheToCanvasOn) {
                var b = this._cacheToCanvasCmds[this._currentID]; - 1 === b.indexOf(a) && b.push(a)
            } else -1 === this._renderCmds.indexOf(a) && this._renderCmds.push(a)
    }
};
(function () {
    cc.CanvasContextWrapper = function (a) {
        this._context = a;
        this._saveCount = 0;
        this._currentAlpha = a.globalAlpha;
        this._currentCompositeOperation = a.globalCompositeOperation;
        this._currentFillStyle = a.fillStyle;
        this._currentStrokeStyle = a.strokeStyle;
        this._offsetY = this._offsetX = 0;
        this._realOffsetY = this.height;
        this._armatureMode = 0
    };
    var a = cc.CanvasContextWrapper.prototype;
    a.resetCache = function () {
        var a = this._context;
        this._currentAlpha = a.globalAlpha;
        this._currentCompositeOperation = a.globalCompositeOperation;
        this._currentFillStyle = a.fillStyle;
        this._currentStrokeStyle = a.strokeStyle;
        this._realOffsetY = this._context.canvas.height + this._offsetY
    };
    a.setOffset = function (a, c) {
        this._offsetX = a;
        this._offsetY = c;
        this._realOffsetY = this._context.canvas.height + this._offsetY
    };
    a.computeRealOffsetY = function () {
        this._realOffsetY = this._context.canvas.height + this._offsetY
    };
    a.setViewScale = function (a, c) {
        this._scaleX = a;
        this._scaleY = c
    };
    a.getContext = function () {
        return this._context
    };
    a.save = function () {
        this._context.save();
        this._saveCount++
    };
    a.restore = function () {
        this._context.restore();
        this._saveCount--
    };
    a.setGlobalAlpha = function (a) {
        0 < this._saveCount ? this._context.globalAlpha = a : this._currentAlpha !== a && (this._currentAlpha = a, this._context.globalAlpha = a)
    };
    a.setCompositeOperation = function (a) {
        0 < this._saveCount ? this._context.globalCompositeOperation = a : this._currentCompositeOperation !== a && (this._currentCompositeOperation = a, this._context.globalCompositeOperation = a)
    };
    a.setFillStyle = function (a) {
        0 < this._saveCount ? this._context.fillStyle = a : this._currentFillStyle !==
            a && (this._currentFillStyle = a, this._context.fillStyle = a)
    };
    a.setStrokeStyle = function (a) {
        0 < this._saveCount ? this._context.strokeStyle = a : this._currentStrokeStyle !== a && (this._currentStrokeStyle = a, this._context.strokeStyle = a)
    };
    a.setTransform = function (a, c, d) {
        0 < this._armatureMode ? (this.restore(), this.save(), this._context.transform(a.a * c, -a.b * d, -a.c * c, a.d * d, a.tx * c, -(a.ty * d))) : this._context.setTransform(a.a * c, -a.b * d, -a.c * c, a.d * d, this._offsetX + a.tx * c, this._realOffsetY - a.ty * d)
    };
    a._switchToArmatureMode = function (a,
        c, d, f) {
        a ? (this._armatureMode++, this._context.setTransform(c.a, c.c, c.b, c.d, this._offsetX + c.tx * d, this._realOffsetY - c.ty * f), this.save()) : (this._armatureMode--, this.restore())
    }
})();
cc.rendererWebGL = function () {
    var a = {
            texture: null,
            blendSrc: null,
            blendDst: null,
            shader: null
        },
        b = !1,
        c = null,
        d = null,
        f = 0,
        g = 0,
        h = 0,
        m = null,
        n = 0,
        p = null,
        u = null,
        v = null,
        x = 0,
        y = !0,
        z = {
            QUAD: 0,
            TRIANGLE: 1,
            CUSTOM: 2
        };
    return {
        mat4Identity: null,
        childrenOrderDirty: !0,
        assignedZ: 0,
        assignedZStep: 0.01,
        VertexType: z,
        _transformNodePool: [],
        _renderCmds: [],
        _isCacheToBufferOn: !1,
        _cacheToBufferCmds: {},
        _cacheInstanceIds: [],
        _currentID: 0,
        _clearColor: cc.color(),
        init: function () {
            var a = cc._renderContext;
            a.disable(a.CULL_FACE);
            a.disable(a.DEPTH_TEST);
            this.mat4Identity = new cc.math.Matrix4;
            this.mat4Identity.identity();
            a = cc._renderContext;
            null === c && (d = a.createBuffer(), c = a.createBuffer());
            a = cc._renderContext;
            if (c) {
                var b = 6 * Math.ceil(500);
                a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, c);
                v = new Uint16Array(b);
                for (var g = 0, h = 0; h < b; h += 6) v[h] = g + 0, v[h + 1] = g + 1, v[h + 2] = g + 2, v[h + 3] = g + 1, v[h + 4] = g + 2, v[h + 5] = g + 3, g += 4;
                a.bufferData(a.ELEMENT_ARRAY_BUFFER, v, a.DYNAMIC_DRAW)
            }
            d && (n = 12E3, m = new ArrayBuffer(4 * n), p = new Float32Array(m), u = new Uint32Array(m), a.bindBuffer(a.ARRAY_BUFFER, d),
                a.bufferData(a.ARRAY_BUFFER, p, a.DYNAMIC_DRAW));
            f = 1800
        },
        getVertexSize: function () {
            return f
        },
        getRenderCmd: function (a) {
            return a._createRenderCmd()
        },
        _turnToCacheMode: function (a) {
            this._isCacheToBufferOn = !0;
            a = a || 0;
            this._cacheToBufferCmds[a] ? this._cacheToBufferCmds[a].length = 0 : this._cacheToBufferCmds[a] = []; - 1 === this._cacheInstanceIds.indexOf(a) && this._cacheInstanceIds.push(a);
            this._currentID = a
        },
        _turnToNormalMode: function () {
            this._isCacheToBufferOn = !1
        },
        _removeCache: function (a) {
            a = a || this._currentID;
            var b = this._cacheToBufferCmds[a];
            b && (b.length = 0, delete this._cacheToBufferCmds[a]);
            cc.arrayRemoveObject(this._cacheInstanceIds, a)
        },
        _renderingToBuffer: function (a) {
            a = a || this._currentID;
            this.rendering(cc._renderContext, this._cacheToBufferCmds[a]);
            this._removeCache(a);
            a = this._cacheInstanceIds;
            0 === a.length ? this._isCacheToBufferOn = !1 : this._currentID = a[a.length - 1]
        },
        resetFlag: function () {
            this.childrenOrderDirty && (this.childrenOrderDirty = !1);
            this._transformNodePool.length = 0
        },
        transform: function () {
            var a = this._transformNodePool;
            a.sort(this._sortNodeByLevelAsc);
            var b, c, d;
            b = 0;
            for (c = a.length; b < c; b++) d = a[b], d.updateStatus();
            a.length = 0
        },
        transformDirty: function () {
            return 0 < this._transformNodePool.length
        },
        _sortNodeByLevelAsc: function (a, b) {
            return a._curLevel - b._curLevel
        },
        pushDirtyNode: function (a) {
            this._transformNodePool.push(a)
        },
        clearRenderCommands: function () {
            this._renderCmds.length = 0
        },
        clear: function () {
            var a = cc._renderContext;
            a.clearColor(this._clearColor.r / 255, this._clearColor.g / 255, this._clearColor.b / 255, this._clearColor.a / 255);
            a.clear(a.COLOR_BUFFER_BIT | a.DEPTH_BUFFER_BIT)
        },
        setDepthTest: function (a) {
            var b = cc._renderContext;
            a ? (b.clearDepth(1), b.enable(b.DEPTH_TEST), b.depthFunc(b.LEQUAL)) : b.disable(b.DEPTH_TEST)
        },
        pushRenderCommand: function (a) {
            if (a.rendering || a.uploadData)
                if (this._isCacheToBufferOn) {
                    var b = this._cacheToBufferCmds[this._currentID]; - 1 === b.indexOf(a) && b.push(a)
                } else -1 === this._renderCmds.indexOf(a) && this._renderCmds.push(a)
        },
        _increaseBatchingSize: function (a, b, c) {
            b = b || z.QUAD;
            switch (b) {
            case z.QUAD:
                for (b = 0; b < a; b += 4) c = g + b, v[h++] = c + 0, v[h++] = c + 1, v[h++] = c + 2, v[h++] =
                    c + 1, v[h++] = c + 2, v[h++] = c + 3;
                break;
            case z.TRIANGLE:
                y = !1;
                for (b = 0; b < a; b += 3) c = g + b, v[h++] = c + 0, v[h++] = c + 1, v[h++] = c + 2;
                break;
            case z.CUSTOM:
                y = !1;
                var d = c.length;
                for (b = 0; b < d; b++) v[h++] = g + c[b];
                break;
            default:
                return
            }
            g += a
        },
        _updateBatchedInfo: function (b, c, d) {
            b && (a.texture = b);
            c && (a.blendSrc = c.src, a.blendDst = c.dst);
            d && (a.shader = d)
        },
        _breakBatch: function () {
            b = !0
        },
        _uploadBufferData: function (c) {
            g >= f && this._batchRendering();
            var d = c._node,
                m = d._texture || (d._spriteFrame ? d._spriteFrame._texture : null),
                n = d._blendFunc.src,
                d = d._blendFunc.dst,
                x = c._shaderProgram;
            if (b || a.texture !== m || a.blendSrc !== n || a.blendDst !== d || a.shader !== x) this._batchRendering(), a.texture = m, a.blendSrc = n, a.blendDst = d, a.shader = x, b = !1;
            m = c.uploadData(p, u, 6 * g);
            if (0 < m) {
                switch (c.vertexType || z.QUAD) {
                case z.QUAD:
                    for (c = 0; c < m; c += 4) n = g + c, v[h++] = n + 0, v[h++] = n + 1, v[h++] = n + 2, v[h++] = n + 1, v[h++] = n + 2, v[h++] = n + 3;
                    break;
                case z.TRIANGLE:
                    y = !1;
                    for (c = 0; c < m; c += 3) n = g + c, v[h++] = n + 0, v[h++] = n + 1, v[h++] = n + 2;
                    break;
                case z.CUSTOM:
                    y = !1;
                    c.uploadIndexData && (h += c.uploadIndexData(v, h, g));
                    break;
                default:
                    return
                }
                g +=
                    m
            }
        },
        _batchRendering: function () {
            if (0 !== g && a.texture) {
                var b = cc._renderContext,
                    m = a.texture,
                    n = a.shader,
                    u = g > 0.5 * f;
                n && (n.use(), n._updateProjectionUniform());
                cc.glBlendFunc(a.blendSrc, a.blendDst);
                cc.glBindTexture2DN(0, m);
                b.bindBuffer(b.ARRAY_BUFFER, d);
                u ? b.bufferData(b.ARRAY_BUFFER, p, b.DYNAMIC_DRAW) : (m = p.subarray(0, 6 * g), b.bufferData(b.ARRAY_BUFFER, m, b.DYNAMIC_DRAW));
                b.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
                b.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR);
                b.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
                b.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 3, b.FLOAT, !1, 24, 0);
                b.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR, 4, b.UNSIGNED_BYTE, !0, 24, 12);
                b.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, b.FLOAT, !1, 24, 16);
                b.bindBuffer(b.ELEMENT_ARRAY_BUFFER, c);
                if (!x || !y || h > x) u ? b.bufferData(b.ELEMENT_ARRAY_BUFFER, v, b.DYNAMIC_DRAW) : b.bufferData(b.ELEMENT_ARRAY_BUFFER, v.subarray(0, h), b.DYNAMIC_DRAW);
                b.drawElements(b.TRIANGLES, h, b.UNSIGNED_SHORT, 0);
                cc.g_NumberOfDraws++;
                y ? x = h : (x = 0, y = !0);
                h = g = 0
            }
        },
        rendering: function (b,
            c) {
            var d = c || this._renderCmds,
                f, h, m, n = b || cc._renderContext;
            n.bindBuffer(gl.ARRAY_BUFFER, null);
            f = 0;
            for (h = d.length; f < h; ++f) m = d[f], m.needDraw() && (m.uploadData ? this._uploadBufferData(m) : (0 < g && this._batchRendering(), m.rendering(n)));
            this._batchRendering();
            a.texture = null
        }
    }
}();
var Region = function () {
        this._area = this._height = this._width = this._maxY = this._maxX = this._minY = this._minX = 0
    },
    regionProto = Region.prototype,
    regionPool = [];

function regionCreate() {
    var a = regionPool.pop();
    a || (a = new Region);
    return a
}

function regionRelease(a) {
    regionPool.push(a)
}
regionProto.setTo = function (a, b, c, d) {
    this._minX = a;
    this._minY = b;
    this._maxX = c;
    this._maxY = d;
    this.updateArea();
    return this
};
regionProto.intValues = function () {
    this._minX = Math.floor(this._minX);
    this._minY = Math.floor(this._minY);
    this._maxX = Math.ceil(this._maxX);
    this._maxY = Math.ceil(this._maxY);
    this.updateArea()
};
regionProto.updateArea = function () {
    this._width = this._maxX - this._minX;
    this._height = this._maxY - this._minY;
    this._area = this._width * this._height
};
regionProto.union = function (a) {
    0 >= this._width || 0 >= this._height ? this.setTo(a._minX, a._minY, a._maxX, a._maxY) : (this._minX > a._minX && (this._minX = a._minX), this._minY > a._minY && (this._minY = a._minY), this._maxX < a._maxX && (this._maxX = a._maxX), this._maxY < a._maxY && (this._maxY = a._maxY), this.updateArea())
};
regionProto.setEmpty = function () {
    this._area = this._height = this._width = this._maxY = this._maxX = this._minY = this._minX = 0
};
regionProto.isEmpty = function () {
    return 0 >= this._width || 0 >= this._height
};
regionProto.intersects = function (a) {
    if (0 >= this._width || 0 >= this._height || 0 >= a._width || 0 >= a._height) return !1;
    var b = this._minX > a._minX ? this._minX : a._minX,
        c = this._maxX < a._maxX ? this._maxX : a._maxX;
    if (b > c) return !1;
    b = this._minY > a._minY ? this._minY : a._minY;
    c = this._maxY < a._maxY ? this._maxY : a._maxY;
    return b <= c
};
regionProto.updateRegion = function (a, b) {
    if (0 == a.width || 0 == a.height) this.setEmpty();
    else {
        var c = b.a,
            d = b.b,
            f = b.c,
            g = b.d,
            h = b.tx,
            m = b.ty,
            n = a.x,
            p = a.y,
            u = n + a.width,
            v = p + a.height,
            x, y, z;
        if (1 == c && 0 == d && 0 == f && 1 == g) x = n + h - 1, y = p + m - 1, z = u + h + 1, p = v + m + 1;
        else {
            x = c * n + f * p + h;
            y = d * n + g * p + m;
            z = c * u + f * p + h;
            var p = d * u + g * p + m,
                t = c * u + f * v + h,
                u = d * u + g * v + m,
                h = c * n + f * v + h,
                m = d * n + g * v + m,
                v = 0;
            x > z && (v = x, x = z, z = v);
            t > h && (v = t, t = h, h = v);
            x = (x < t ? x : t) - 1;
            z = (z > h ? z : h) + 1;
            y > p && (v = y, y = p, p = v);
            u > m && (v = u, u = m, m = v);
            y = (y < u ? y : u) - 1;
            p = (p > m ? p : m) + 1
        }
        this._minX = x;
        this._minY = y;
        this._maxX =
            z;
        this._maxY = p;
        this._width = z - x;
        this._height = p - y;
        this._area = this._width * this._height
    }
};

function unionArea(a, b) {
    return ((a._maxX > b._maxX ? a._maxX : b._maxX) - (a._minX < b._minX ? a._minX : b._minX)) * ((a._maxY > b._maxY ? a._maxY : b._maxY) - (a._minY < b._minY ? a._minY : b._minY))
}
var DirtyRegion = function () {
        this.dirtyList = [];
        this.hasClipRect = !1;
        this.clipArea = this.clipHeight = this.clipWidth = 0;
        this.clipRectChanged = !1
    },
    dirtyRegionProto = DirtyRegion.prototype;
dirtyRegionProto.setClipRect = function (a, b) {
    this.clipRectChanged = this.hasClipRect = !0;
    this.clipWidth = Math.ceil(a);
    this.clipHeight = Math.ceil(b);
    this.clipArea = this.clipWidth * this.clipHeight
};
dirtyRegionProto.addRegion = function (a) {
    var b = a._minX,
        c = a._minY,
        d = a._maxX;
    a = a._maxY;
    this.hasClipRect && (0 > b && (b = 0), 0 > c && (c = 0), d > this.clipWidth && (d = this.clipWidth), a > this.clipHeight && (a = this.clipHeight));
    if (b >= d || c >= a) return !1;
    if (this.clipRectChanged) return !0;
    var f = this.dirtyList,
        g = regionCreate();
    f.push(g.setTo(b, c, d, a));
    this.mergeDirtyList(f);
    return !0
};
dirtyRegionProto.clear = function () {
    for (var a = this.dirtyList, b = a.length, c = 0; c < b; c++) regionRelease(a[c]);
    a.length = 0
};
dirtyRegionProto.getDirtyRegions = function () {
    var a = this.dirtyList;
    if (this.clipRectChanged) {
        this.clipRectChanged = !1;
        this.clear();
        var b = regionCreate();
        a.push(b.setTo(0, 0, this.clipWidth, this.clipHeight))
    } else
        for (; this.mergeDirtyList(a););
    a = this.dirtyList.length;
    if (0 < a)
        for (b = 0; b < a; b++) this.dirtyList[b].intValues();
    return this.dirtyList
};
dirtyRegionProto.mergeDirtyList = function (a) {
    var b = a.length;
    if (2 > b) return !1;
    for (var c = this.hasClipRect, d = 3 < b ? Number.POSITIVE_INFINITY : 0, f = 0, g = 0, h = 0, m = 0; m < b - 1; m++) {
        var n = a[m];
        c && (h += n.area);
        for (var p = m + 1; p < b; p++) {
            var u = a[p],
                u = unionArea(n, u) - n.area - u.area;
            d > u && (f = m, g = p, d = u)
        }
    }
    c && 0.95 < h / this.clipArea && (this.clipRectChanged = !0);
    return f != g ? (b = a[g], a[f].union(b), regionRelease(b), a.splice(g, 1), !0) : !1
};
cc.Region = Region;
cc.DirtyRegion = DirtyRegion;
cc._tmp.PrototypeCCNode = function () {
    var a = cc.Node.prototype;
    cc.defineGetterSetter(a, "x", a.getPositionX, a.setPositionX);
    cc.defineGetterSetter(a, "y", a.getPositionY, a.setPositionY);
    cc.defineGetterSetter(a, "width", a._getWidth, a._setWidth);
    cc.defineGetterSetter(a, "height", a._getHeight, a._setHeight);
    cc.defineGetterSetter(a, "anchorX", a._getAnchorX, a._setAnchorX);
    cc.defineGetterSetter(a, "anchorY", a._getAnchorY, a._setAnchorY);
    cc.defineGetterSetter(a, "skewX", a.getSkewX, a.setSkewX);
    cc.defineGetterSetter(a, "skewY",
        a.getSkewY, a.setSkewY);
    cc.defineGetterSetter(a, "zIndex", a.getLocalZOrder, a.setLocalZOrder);
    cc.defineGetterSetter(a, "vertexZ", a.getVertexZ, a.setVertexZ);
    cc.defineGetterSetter(a, "rotation", a.getRotation, a.setRotation);
    cc.defineGetterSetter(a, "rotationX", a.getRotationX, a.setRotationX);
    cc.defineGetterSetter(a, "rotationY", a.getRotationY, a.setRotationY);
    cc.defineGetterSetter(a, "scale", a.getScale, a.setScale);
    cc.defineGetterSetter(a, "scaleX", a.getScaleX, a.setScaleX);
    cc.defineGetterSetter(a, "scaleY", a.getScaleY,
        a.setScaleY);
    cc.defineGetterSetter(a, "children", a.getChildren);
    cc.defineGetterSetter(a, "childrenCount", a.getChildrenCount);
    cc.defineGetterSetter(a, "parent", a.getParent, a.setParent);
    cc.defineGetterSetter(a, "visible", a.isVisible, a.setVisible);
    cc.defineGetterSetter(a, "running", a.isRunning);
    cc.defineGetterSetter(a, "ignoreAnchor", a.isIgnoreAnchorPointForPosition, a.ignoreAnchorPointForPosition);
    cc.defineGetterSetter(a, "actionManager", a.getActionManager, a.setActionManager);
    cc.defineGetterSetter(a, "scheduler",
        a.getScheduler, a.setScheduler);
    cc.defineGetterSetter(a, "shaderProgram", a.getShaderProgram, a.setShaderProgram);
    cc.defineGetterSetter(a, "opacity", a.getOpacity, a.setOpacity);
    cc.defineGetterSetter(a, "opacityModifyRGB", a.isOpacityModifyRGB);
    cc.defineGetterSetter(a, "cascadeOpacity", a.isCascadeOpacityEnabled, a.setCascadeOpacityEnabled);
    cc.defineGetterSetter(a, "color", a.getColor, a.setColor);
    cc.defineGetterSetter(a, "cascadeColor", a.isCascadeColorEnabled, a.setCascadeColorEnabled)
};
cc.NODE_TAG_INVALID = -1;
cc.s_globalOrderOfArrival = 1;
cc.Node = cc.Class.extend({
    _localZOrder: 0,
    _globalZOrder: 0,
    _vertexZ: 0,
    _customZ: NaN,
    _rotationX: 0,
    _rotationY: 0,
    _scaleX: 1,
    _scaleY: 1,
    _position: null,
    _normalizedPosition: null,
    _usingNormalizedPosition: !1,
    _normalizedPositionDirty: !1,
    _skewX: 0,
    _skewY: 0,
    _children: null,
    _visible: !0,
    _anchorPoint: null,
    _contentSize: null,
    _running: !1,
    _parent: null,
    _ignoreAnchorPointForPosition: !1,
    tag: cc.NODE_TAG_INVALID,
    userData: null,
    userObject: null,
    _reorderChildDirty: !1,
    arrivalOrder: 0,
    _actionManager: null,
    _scheduler: null,
    _additionalTransformDirty: !1,
    _additionalTransform: null,
    _componentContainer: null,
    _isTransitionFinished: !1,
    _className: "Node",
    _showNode: !1,
    _name: "",
    _realOpacity: 255,
    _realColor: null,
    _cascadeColorEnabled: !1,
    _cascadeOpacityEnabled: !1,
    _renderCmd: null,
    ctor: function () {
        this._anchorPoint = cc.p(0, 0);
        this._contentSize = cc.size(0, 0);
        this._position = cc.p(0, 0);
        this._normalizedPosition = cc.p(0, 0);
        this._children = [];
        this._additionalTransform = cc.affineTransformMakeIdentity();
        cc.ComponentContainer && (this._componentContainer = new cc.ComponentContainer(this));
        this._realColor = cc.color(255, 255, 255, 255);
        this._renderCmd = this._createRenderCmd()
    },
    init: function () {
        return !0
    },
    attr: function (a) {
        for (var b in a) this[b] = a[b]
    },
    getSkewX: function () {
        return this._skewX
    },
    setSkewX: function (a) {
        this._skewX = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    getSkewY: function () {
        return this._skewY
    },
    setSkewY: function (a) {
        this._skewY = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    setLocalZOrder: function (a) {
        this._parent ? this._parent.reorderChild(this,
            a) : this._localZOrder = a;
        cc.eventManager._setDirtyForNode(this)
    },
    _setLocalZOrder: function (a) {
        this._localZOrder = a
    },
    getLocalZOrder: function () {
        return this._localZOrder
    },
    getZOrder: function () {
        cc.log(cc._LogInfos.Node_getZOrder);
        return this.getLocalZOrder()
    },
    setZOrder: function (a) {
        cc.log(cc._LogInfos.Node_setZOrder);
        this.setLocalZOrder(a)
    },
    setGlobalZOrder: function (a) {
        this._globalZOrder !== a && (this._globalZOrder = a, cc.eventManager._setDirtyForNode(this))
    },
    getGlobalZOrder: function () {
        return this._globalZOrder
    },
    getVertexZ: function () {
        return this._vertexZ
    },
    setVertexZ: function (a) {
        this._customZ = this._vertexZ = a
    },
    getRotation: function () {
        this._rotationX !== this._rotationY && cc.log(cc._LogInfos.Node_getRotation);
        return this._rotationX
    },
    setRotation: function (a) {
        this._rotationX = this._rotationY = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    getRotationX: function () {
        return this._rotationX
    },
    setRotationX: function (a) {
        this._rotationX = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    getRotationY: function () {
        return this._rotationY
    },
    setRotationY: function (a) {
        this._rotationY = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    getScale: function () {
        this._scaleX !== this._scaleY && cc.log(cc._LogInfos.Node_getScale);
        return this._scaleX
    },
    setScale: function (a, b) {
        this._scaleX = a;
        this._scaleY = b || 0 === b ? b : a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    getScaleX: function () {
        return this._scaleX
    },
    setScaleX: function (a) {
        this._scaleX = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    getScaleY: function () {
        return this._scaleY
    },
    setScaleY: function (a) {
        this._scaleY = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    setPosition: function (a, b) {
        var c = this._position;
        if (void 0 === b) {
            if (c.x === a.x && c.y === a.y) return;
            c.x = a.x;
            c.y = a.y
        } else {
            if (c.x === a && c.y === b) return;
            c.x = a;
            c.y = b
        }
        this._usingNormalizedPosition = !1;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    setNormalizedPosition: function (a, b) {
        var c = this._normalizedPosition;
        void 0 === b ? (c.x = a.x, c.y = a.y) : (c.x = a, c.y = b);
        this._normalizedPositionDirty = this._usingNormalizedPosition = !0;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    getPosition: function () {
        return cc.p(this._position)
    },
    getNormalizedPosition: function () {
        return cc.p(this._normalizedPosition)
    },
    getPositionX: function () {
        return this._position.x
    },
    setPositionX: function (a) {
        this._position.x = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    getPositionY: function () {
        return this._position.y
    },
    setPositionY: function (a) {
        this._position.y = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    getChildrenCount: function () {
        return this._children.length
    },
    getChildren: function () {
        return this._children
    },
    isVisible: function () {
        return this._visible
    },
    setVisible: function (a) {
        this._visible !== a && (this._visible = a, this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty), cc.renderer.childrenOrderDirty = !0)
    },
    getAnchorPoint: function () {
        return cc.p(this._anchorPoint)
    },
    setAnchorPoint: function (a, b) {
        var c = this._anchorPoint;
        if (void 0 === b) {
            if (a.x === c.x && a.y === c.y) return;
            c.x = a.x;
            c.y = a.y
        } else {
            if (a === c.x && b ===
                c.y) return;
            c.x = a;
            c.y = b
        }
        this._renderCmd._updateAnchorPointInPoint()
    },
    _getAnchorX: function () {
        return this._anchorPoint.x
    },
    _setAnchorX: function (a) {
        this._anchorPoint.x !== a && (this._anchorPoint.x = a, this._renderCmd._updateAnchorPointInPoint())
    },
    _getAnchorY: function () {
        return this._anchorPoint.y
    },
    _setAnchorY: function (a) {
        this._anchorPoint.y !== a && (this._anchorPoint.y = a, this._renderCmd._updateAnchorPointInPoint())
    },
    getAnchorPointInPoints: function () {
        return this._renderCmd.getAnchorPointInPoints()
    },
    _getWidth: function () {
        return this._contentSize.width
    },
    _setWidth: function (a) {
        this._contentSize.width = a;
        this._renderCmd._updateAnchorPointInPoint()
    },
    _getHeight: function () {
        return this._contentSize.height
    },
    _setHeight: function (a) {
        this._contentSize.height = a;
        this._renderCmd._updateAnchorPointInPoint()
    },
    getContentSize: function () {
        return cc.size(this._contentSize)
    },
    setContentSize: function (a, b) {
        var c = this._contentSize;
        if (void 0 === b) {
            if (a.width === c.width && a.height === c.height) return;
            c.width = a.width;
            c.height = a.height
        } else {
            if (a === c.width && b === c.height) return;
            c.width =
                a;
            c.height = b
        }
        this._renderCmd._updateAnchorPointInPoint()
    },
    isRunning: function () {
        return this._running
    },
    getParent: function () {
        return this._parent
    },
    setParent: function (a) {
        this._parent = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    isIgnoreAnchorPointForPosition: function () {
        return this._ignoreAnchorPointForPosition
    },
    ignoreAnchorPointForPosition: function (a) {
        a !== this._ignoreAnchorPointForPosition && (this._ignoreAnchorPointForPosition = a, this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty))
    },
    getTag: function () {
        return this.tag
    },
    setTag: function (a) {
        this.tag = a
    },
    setName: function (a) {
        this._name = a
    },
    getName: function () {
        return this._name
    },
    getUserData: function () {
        return this.userData
    },
    setUserData: function (a) {
        this.userData = a
    },
    getUserObject: function () {
        return this.userObject
    },
    setUserObject: function (a) {
        this.userObject !== a && (this.userObject = a)
    },
    getOrderOfArrival: function () {
        return this.arrivalOrder
    },
    setOrderOfArrival: function (a) {
        this.arrivalOrder = a
    },
    getActionManager: function () {
        return this._actionManager ||
            cc.director.getActionManager()
    },
    setActionManager: function (a) {
        this._actionManager !== a && (this.stopAllActions(), this._actionManager = a)
    },
    getScheduler: function () {
        return this._scheduler || cc.director.getScheduler()
    },
    setScheduler: function (a) {
        this._scheduler !== a && (this.unscheduleAllCallbacks(), this._scheduler = a)
    },
    boundingBox: function () {
        cc.log(cc._LogInfos.Node_boundingBox);
        return this.getBoundingBox()
    },
    getBoundingBox: function () {
        var a = cc.rect(0, 0, this._contentSize.width, this._contentSize.height);
        return cc._rectApplyAffineTransformIn(a,
            this.getNodeToParentTransform())
    },
    cleanup: function () {
        this.stopAllActions();
        this.unscheduleAllCallbacks();
        cc.eventManager.removeListeners(this)
    },
    getChildByTag: function (a) {
        var b = this._children;
        if (null !== b)
            for (var c = 0; c < b.length; c++) {
                var d = b[c];
                if (d && d.tag === a) return d
            }
        return null
    },
    getChildByName: function (a) {
        if (!a) return cc.log("Invalid name"), null;
        for (var b = this._children, c = 0, d = b.length; c < d; c++)
            if (b[c]._name === a) return b[c];
        return null
    },
    addChild: function (a, b, c) {
        b = void 0 === b ? a._localZOrder : b;
        var d, f = !1;
        void 0 === c ? d = a._name : "string" === typeof c ? (d = c, c = void 0) : "number" === typeof c && (f = !0, d = "");
        cc.assert(a, cc._LogInfos.Node_addChild_3);
        cc.assert(null === a._parent, "child already added. It can't be added again");
        this._addChildHelper(a, b, c, d, f)
    },
    _addChildHelper: function (a, b, c, d, f) {
        this._children || (this._children = []);
        this._insertChild(a, b);
        f ? a.setTag(c) : a.setName(d);
        a.setParent(this);
        a.setOrderOfArrival(cc.s_globalOrderOfArrival++);
        this._running && (a._performRecursive(cc.Node._stateCallbackType.onEnter),
            this._isTransitionFinished && a._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish));
        a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
        this._cascadeColorEnabled && a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty);
        this._cascadeOpacityEnabled && a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)
    },
    removeFromParent: function (a) {
        this._parent && (void 0 === a && (a = !0), this._parent.removeChild(this, a))
    },
    removeFromParentAndCleanup: function (a) {
        cc.log(cc._LogInfos.Node_removeFromParentAndCleanup);
        this.removeFromParent(a)
    },
    removeChild: function (a, b) {
        0 !== this._children.length && (void 0 === b && (b = !0), -1 < this._children.indexOf(a) && this._detachChild(a, b), cc.renderer.childrenOrderDirty = !0)
    },
    removeChildByTag: function (a, b) {
        a === cc.NODE_TAG_INVALID && cc.log(cc._LogInfos.Node_removeChildByTag);
        var c = this.getChildByTag(a);
        c ? this.removeChild(c, b) : cc.log(cc._LogInfos.Node_removeChildByTag_2, a)
    },
    removeAllChildrenWithCleanup: function (a) {
        this.removeAllChildren(a)
    },
    removeAllChildren: function (a) {
        var b = this._children;
        if (null !== b) {
            void 0 === a && (a = !0);
            for (var c = 0; c < b.length; c++) {
                var d = b[c];
                d && (this._running && (d._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart), d._performRecursive(cc.Node._stateCallbackType.onExit)), a && d._performRecursive(cc.Node._stateCallbackType.cleanup), d.parent = null, d._renderCmd.detachFromParent())
            }
            this._children.length = 0;
            cc.renderer.childrenOrderDirty = !0
        }
    },
    _detachChild: function (a, b) {
        this._running && (a._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart),
            a._performRecursive(cc.Node._stateCallbackType.onExit));
        b && a._performRecursive(cc.Node._stateCallbackType.cleanup);
        a.parent = null;
        a._renderCmd.detachFromParent();
        cc.arrayRemoveObject(this._children, a)
    },
    _insertChild: function (a, b) {
        cc.renderer.childrenOrderDirty = this._reorderChildDirty = !0;
        this._children.push(a);
        a._setLocalZOrder(b)
    },
    setNodeDirty: function () {
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    reorderChild: function (a, b) {
        cc.assert(a, cc._LogInfos.Node_reorderChild); - 1 === this._children.indexOf(a) ?
            cc.log(cc._LogInfos.Node_reorderChild_2) : b !== a.zIndex && (cc.renderer.childrenOrderDirty = this._reorderChildDirty = !0, a.arrivalOrder = cc.s_globalOrderOfArrival, cc.s_globalOrderOfArrival++, a._setLocalZOrder(b), this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.orderDirty))
    },
    sortAllChildren: function () {
        if (this._reorderChildDirty) {
            var a = this._children,
                b = a.length,
                c, d, f;
            for (c = 1; c < b; c++) {
                f = a[c];
                for (d = c - 1; 0 <= d;) {
                    if (f._localZOrder < a[d]._localZOrder) a[d + 1] = a[d];
                    else if (f._localZOrder === a[d]._localZOrder && f.arrivalOrder <
                        a[d].arrivalOrder) a[d + 1] = a[d];
                    else break;
                    d--
                }
                a[d + 1] = f
            }
            this._reorderChildDirty = !1
        }
    },
    draw: function (a) {},
    transformAncestors: function () {
        null !== this._parent && (this._parent.transformAncestors(), this._parent.transform())
    },
    onEnter: function () {
        this._isTransitionFinished = !1;
        this._running = !0;
        this.resume()
    },
    _performRecursive: function (a) {
        var b = cc.Node._stateCallbackType;
        if (!(a >= b.max)) {
            var c = 0,
                d, f, g, h, m, n = cc.Node._performStacks[cc.Node._performing];
            n || (n = [], cc.Node._performStacks.push(n));
            n.length = 0;
            cc.Node._performing++;
            for (g = n[0] = this; g;) {
                if ((d = g._children) && 0 < d.length) {
                    h = 0;
                    for (m = d.length; h < m; ++h) f = d[h], n.push(f)
                }
                if ((d = g._protectedChildren) && 0 < d.length) {
                    h = 0;
                    for (m = d.length; h < m; ++h) f = d[h], n.push(f)
                }
                c++;
                g = n[c]
            }
            for (h = n.length - 1; 0 <= h; --h)
                if (g = n[h], n[h] = null, g) switch (a) {
                case b.onEnter:
                    g.onEnter();
                    break;
                case b.onExit:
                    g.onExit();
                    break;
                case b.onEnterTransitionDidFinish:
                    g.onEnterTransitionDidFinish();
                    break;
                case b.cleanup:
                    g.cleanup();
                    break;
                case b.onExitTransitionDidStart:
                    g.onExitTransitionDidStart()
                }
            cc.Node._performing--
        }
    },
    onEnterTransitionDidFinish: function () {
        this._isTransitionFinished = !0
    },
    onExitTransitionDidStart: function () {},
    onExit: function () {
        this._running = !1;
        this.pause();
        this.removeAllComponents()
    },
    runAction: function (a) {
        cc.assert(a, cc._LogInfos.Node_runAction);
        this.actionManager.addAction(a, this, !this._running);
        return a
    },
    stopAllActions: function () {
        this.actionManager && this.actionManager.removeAllActionsFromTarget(this)
    },
    stopAction: function (a) {
        this.actionManager.removeAction(a)
    },
    stopActionByTag: function (a) {
        a === cc.ACTION_TAG_INVALID ?
            cc.log(cc._LogInfos.Node_stopActionByTag) : this.actionManager.removeActionByTag(a, this)
    },
    getActionByTag: function (a) {
        return a === cc.ACTION_TAG_INVALID ? (cc.log(cc._LogInfos.Node_getActionByTag), null) : this.actionManager.getActionByTag(a, this)
    },
    getNumberOfRunningActions: function () {
        return this.actionManager.numberOfRunningActionsInTarget(this)
    },
    scheduleUpdate: function () {
        this.scheduleUpdateWithPriority(0)
    },
    scheduleUpdateWithPriority: function (a) {
        this.scheduler.scheduleUpdate(this, a, !this._running)
    },
    unscheduleUpdate: function () {
        this.scheduler.unscheduleUpdate(this)
    },
    schedule: function (a, b, c, d, f) {
        var g = arguments.length;
        "function" === typeof a ? 1 === g ? (b = 0, c = cc.REPEAT_FOREVER, d = 0, f = this.__instanceId) : 2 === g ? "number" === typeof b ? (c = cc.REPEAT_FOREVER, d = 0, f = this.__instanceId) : (f = b, b = 0, c = cc.REPEAT_FOREVER, d = 0) : 3 === g ? ("string" === typeof c ? (f = c, c = cc.REPEAT_FOREVER) : f = this.__instanceId, d = 0) : 4 === g && (f = this.__instanceId) : 1 === g ? (b = 0, c = cc.REPEAT_FOREVER, d = 0) : 2 === g && (c = cc.REPEAT_FOREVER, d = 0);
        cc.assert(a, cc._LogInfos.Node_schedule);
        cc.assert(0 <= b, cc._LogInfos.Node_schedule_2);
        b = b ||
            0;
        c = isNaN(c) ? cc.REPEAT_FOREVER : c;
        this.scheduler.schedule(a, this, b, c, d || 0, !this._running, f)
    },
    scheduleOnce: function (a, b, c) {
        void 0 === c && (c = this.__instanceId);
        this.schedule(a, 0, 0, b, c)
    },
    unschedule: function (a) {
        a && this.scheduler.unschedule(a, this)
    },
    unscheduleAllCallbacks: function () {
        this.scheduler.unscheduleAllForTarget(this)
    },
    resumeSchedulerAndActions: function () {
        cc.log(cc._LogInfos.Node_resumeSchedulerAndActions);
        this.resume()
    },
    resume: function () {
        this.scheduler.resumeTarget(this);
        this.actionManager && this.actionManager.resumeTarget(this);
        cc.eventManager.resumeTarget(this)
    },
    pauseSchedulerAndActions: function () {
        cc.log(cc._LogInfos.Node_pauseSchedulerAndActions);
        this.pause()
    },
    pause: function () {
        this.scheduler.pauseTarget(this);
        this.actionManager && this.actionManager.pauseTarget(this);
        cc.eventManager.pauseTarget(this)
    },
    setAdditionalTransform: function (a) {
        if (void 0 === a) return this._additionalTransformDirty = !1;
        this._additionalTransform = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
        this._additionalTransformDirty = !0
    },
    getParentToNodeTransform: function () {
        return this._renderCmd.getParentToNodeTransform()
    },
    parentToNodeTransform: function () {
        return this.getParentToNodeTransform()
    },
    getNodeToWorldTransform: function () {
        for (var a = this.getNodeToParentTransform(), b = this._parent; null !== b; b = b.parent) a = cc.affineTransformConcat(a, b.getNodeToParentTransform());
        return a
    },
    nodeToWorldTransform: function () {
        return this.getNodeToWorldTransform()
    },
    getWorldToNodeTransform: function () {
        return cc.affineTransformInvert(this.getNodeToWorldTransform())
    },
    worldToNodeTransform: function () {
        return this.getWorldToNodeTransform()
    },
    convertToNodeSpace: function (a) {
        return cc.pointApplyAffineTransform(a,
            this.getWorldToNodeTransform())
    },
    convertToWorldSpace: function (a) {
        a = a || cc.p(0, 0);
        return cc.pointApplyAffineTransform(a, this.getNodeToWorldTransform())
    },
    convertToNodeSpaceAR: function (a) {
        return cc.pSub(this.convertToNodeSpace(a), this._renderCmd.getAnchorPointInPoints())
    },
    convertToWorldSpaceAR: function (a) {
        a = a || cc.p(0, 0);
        a = cc.pAdd(a, this._renderCmd.getAnchorPointInPoints());
        return this.convertToWorldSpace(a)
    },
    _convertToWindowSpace: function (a) {
        a = this.convertToWorldSpace(a);
        return cc.director.convertToUI(a)
    },
    convertTouchToNodeSpace: function (a) {
        a = a.getLocation();
        return this.convertToNodeSpace(a)
    },
    convertTouchToNodeSpaceAR: function (a) {
        a = cc.director.convertToGL(a.getLocation());
        return this.convertToNodeSpaceAR(a)
    },
    update: function (a) {
        this._componentContainer && !this._componentContainer.isEmpty() && this._componentContainer.visit(a)
    },
    updateTransform: function () {
        for (var a = this._children, b, c = 0; c < a.length; c++)(b = a[c]) && b.updateTransform()
    },
    retain: function () {},
    release: function () {},
    getComponent: function (a) {
        return this._componentContainer ?
            this._componentContainer.getComponent(a) : null
    },
    addComponent: function (a) {
        this._componentContainer && this._componentContainer.add(a)
    },
    removeComponent: function (a) {
        return this._componentContainer ? this._componentContainer.remove(a) : !1
    },
    removeAllComponents: function () {
        this._componentContainer && this._componentContainer.removeAll()
    },
    grid: null,
    visit: function (a) {
        var b = this._renderCmd,
            c = a ? a._renderCmd : null;
        if (this._visible) {
            a = cc.renderer;
            b.visit(c);
            var d = this._children,
                f = d.length,
                g;
            if (0 < f) {
                this._reorderChildDirty &&
                    this.sortAllChildren();
                for (c = 0; c < f; c++)
                    if (g = d[c], 0 > g._localZOrder) g.visit(this);
                    else break;
                for (a.pushRenderCommand(b); c < f; c++) d[c].visit(this)
            } else a.pushRenderCommand(b);
            b._dirtyFlag = 0
        } else b._propagateFlagsDown(c)
    },
    transform: function (a, b) {
        this._renderCmd.transform(a, b)
    },
    nodeToParentTransform: function () {
        return this.getNodeToParentTransform()
    },
    getNodeToParentTransform: function (a) {
        var b = this._renderCmd.getNodeToParentTransform();
        if (a)
            for (var b = {
                    a: b.a,
                    b: b.b,
                    c: b.c,
                    d: b.d,
                    tx: b.tx,
                    ty: b.ty
                }, c = this._parent; null !=
                c && c != a; c = c.getParent()) cc.affineTransformConcatIn(b, c.getNodeToParentTransform());
        return b
    },
    getNodeToParentAffineTransform: function (a) {
        return this.getNodeToParentTransform(a)
    },
    getCamera: function () {
        return null
    },
    getGrid: function () {
        return this.grid
    },
    setGrid: function (a) {
        this.grid = a
    },
    getShaderProgram: function () {
        return this._renderCmd.getShaderProgram()
    },
    setShaderProgram: function (a) {
        this._renderCmd.setShaderProgram(a)
    },
    getGLServerState: function () {
        return 0
    },
    setGLServerState: function (a) {},
    getBoundingBoxToWorld: function () {
        var a =
            cc.rect(0, 0, this._contentSize.width, this._contentSize.height),
            b = this.getNodeToWorldTransform(),
            a = cc.rectApplyAffineTransform(a, b);
        if (!this._children) return a;
        for (var c = this._children, d = 0; d < c.length; d++) {
            var f = c[d];
            f && f._visible && (f = f._getBoundingBoxToCurrentNode(b)) && (a = cc.rectUnion(a, f))
        }
        return a
    },
    _getBoundingBoxToCurrentNode: function (a) {
        var b = cc.rect(0, 0, this._contentSize.width, this._contentSize.height);
        a = void 0 === a ? this.getNodeToParentTransform() : cc.affineTransformConcat(this.getNodeToParentTransform(),
            a);
        b = cc.rectApplyAffineTransform(b, a);
        if (!this._children) return b;
        for (var c = this._children, d = 0; d < c.length; d++) {
            var f = c[d];
            f && f._visible && (f = f._getBoundingBoxToCurrentNode(a)) && (b = cc.rectUnion(b, f))
        }
        return b
    },
    getOpacity: function () {
        return this._realOpacity
    },
    getDisplayedOpacity: function () {
        return this._renderCmd.getDisplayedOpacity()
    },
    setOpacity: function (a) {
        this._realOpacity = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)
    },
    updateDisplayedOpacity: function (a) {
        this._renderCmd._updateDisplayOpacity(a)
    },
    isCascadeOpacityEnabled: function () {
        return this._cascadeOpacityEnabled
    },
    setCascadeOpacityEnabled: function (a) {
        this._cascadeOpacityEnabled !== a && (this._cascadeOpacityEnabled = a, this._renderCmd.setCascadeOpacityEnabledDirty())
    },
    getColor: function () {
        var a = this._realColor;
        return cc.color(a.r, a.g, a.b, a.a)
    },
    getDisplayedColor: function () {
        return this._renderCmd.getDisplayedColor()
    },
    setColor: function (a) {
        var b = this._realColor;
        b.r = a.r;
        b.g = a.g;
        b.b = a.b;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)
    },
    updateDisplayedColor: function (a) {
        this._renderCmd._updateDisplayColor(a)
    },
    isCascadeColorEnabled: function () {
        return this._cascadeColorEnabled
    },
    setCascadeColorEnabled: function (a) {
        this._cascadeColorEnabled !== a && (this._cascadeColorEnabled = a, this._renderCmd.setCascadeColorEnabledDirty())
    },
    setOpacityModifyRGB: function (a) {},
    isOpacityModifyRGB: function () {
        return !1
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new cc.Node.CanvasRenderCmd(this) : new cc.Node.WebGLRenderCmd(this)
    },
    enumerateChildren: function (a, b) {
        cc.assert(a && 0 != a.length, "Invalid name");
        cc.assert(null != b, "Invalid callback function");
        var c = a.length,
            d = 0,
            f = c,
            g = !1;
        2 < c && ("/" === a[0] && "/" === a[1]) && (g = !0, d = 2, f -= 2);
        var h = !1;
        3 < c && ("/" === a[c - 3] && "." === a[c - 2] && "." === a[c - 1]) && (h = !0, f -= 3);
        c = a.substr(d, f);
        h && (c = "[[:alnum:]]+/" + c);
        g ? this.doEnumerateRecursive(this, c, b) : this.doEnumerate(c, b)
    },
    doEnumerateRecursive: function (a, b, c) {
        var d = !1;
        if (a.doEnumerate(b, c)) d = !0;
        else
            for (var f = a.getChildren(), g = f.length, h = 0; h < g; h++)
                if (a = f[h], this.doEnumerateRecursive(a, b, c)) {
                    d = !0;
                    break
                } return d
    },
    doEnumerate: function (a,
        b) {
        var c = a.indexOf("/"),
            d = a,
            f = !1; - 1 !== c && (d = a.substr(0, c), f = !0);
        for (var c = !1, g, h = this._children, m = h.length, n = 0; n < m; n++)
            if (g = h[n], -1 !== g._name.indexOf(d))
                if (f) {
                    if (c = g.doEnumerate(a, b)) break
                } else if (b(g)) {
            c = !0;
            break
        }
        return c
    }
});
cc.Node.create = function () {
    return new cc.Node
};
cc.Node._stateCallbackType = {
    onEnter: 1,
    onExit: 2,
    cleanup: 3,
    onEnterTransitionDidFinish: 4,
    onExitTransitionDidStart: 5,
    max: 6
};
cc.Node._performStacks = [
    []
];
cc.Node._performing = 0;
cc.assert(cc.isFunction(cc._tmp.PrototypeCCNode), cc._LogInfos.MissingFile, "BaseNodesPropertyDefine.js");
cc._tmp.PrototypeCCNode();
delete cc._tmp.PrototypeCCNode;
cc.CustomRenderCmd = function (a, b) {
    this._needDraw = !0;
    this._target = a;
    this._callback = b
};
cc.CustomRenderCmd.prototype.rendering = function (a, b, c) {
    this._callback && this._callback.call(this._target, a, b, c)
};
cc.CustomRenderCmd.prototype.needDraw = function () {
    return this._needDraw
};
var dirtyFlags = cc.Node._dirtyFlags = {
        transformDirty: 1,
        visibleDirty: 2,
        colorDirty: 4,
        opacityDirty: 8,
        cacheDirty: 16,
        orderDirty: 32,
        textDirty: 64,
        gradientDirty: 128,
        textureDirty: 256,
        contentDirty: 512,
        COUNT: 10,
        all: 1023
    },
    ONE_DEGREE = Math.PI / 180;

function transformChildTree(a) {
    var b = 1,
        c, d, f, g, h, m = cc.Node._performStacks[cc.Node._performing];
    m || (m = [], cc.Node._performStacks.push(m));
    m.length = 0;
    cc.Node._performing++;
    for (m[0] = a; b;)
        if (b--, d = m[b], m[b] = null, d) {
            if ((c = d._children) && 0 < c.length) {
                f = d._renderCmd;
                g = 0;
                for (h = c.length; g < h; ++g) a = c[g], m[b] = a, b++, a._renderCmd.transform(f)
            }
            if ((c = d._protectedChildren) && 0 < c.length) {
                f = d._renderCmd;
                g = 0;
                for (h = c.length; g < h; ++g) a = c[g], m[b] = a, b++, a._renderCmd.transform(f)
            }
        } cc.Node._performing--
}
cc.Node.RenderCmd = function (a) {
    this._node = a;
    this._anchorPointInPoints = {
        x: 0,
        y: 0
    };
    this._displayedColor = cc.color(255, 255, 255, 255)
};
cc.Node.RenderCmd.prototype = {
    constructor: cc.Node.RenderCmd,
    _needDraw: !1,
    _dirtyFlag: 1,
    _curLevel: -1,
    _displayedOpacity: 255,
    _cascadeColorEnabledDirty: !1,
    _cascadeOpacityEnabledDirty: !1,
    _transform: null,
    _worldTransform: null,
    _inverse: null,
    needDraw: function () {
        return this._needDraw
    },
    getAnchorPointInPoints: function () {
        return cc.p(this._anchorPointInPoints)
    },
    getDisplayedColor: function () {
        var a = this._displayedColor;
        return cc.color(a.r, a.g, a.b, a.a)
    },
    getDisplayedOpacity: function () {
        return this._displayedOpacity
    },
    setCascadeColorEnabledDirty: function () {
        this._cascadeColorEnabledDirty = !0;
        this.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)
    },
    setCascadeOpacityEnabledDirty: function () {
        this._cascadeOpacityEnabledDirty = !0;
        this.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)
    },
    getParentToNodeTransform: function () {
        this._inverse || (this._inverse = {
            a: 1,
            b: 0,
            c: 0,
            d: 1,
            tx: 0,
            ty: 0
        });
        this._dirtyFlag & cc.Node._dirtyFlags.transformDirty && cc.affineTransformInvertOut(this.getNodeToParentTransform(), this._inverse);
        return this._inverse
    },
    detachFromParent: function () {},
    _updateAnchorPointInPoint: function () {
        var a =
            this._anchorPointInPoints,
            b = this._node._contentSize,
            c = this._node._anchorPoint;
        a.x = b.width * c.x;
        a.y = b.height * c.y;
        this.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    setDirtyFlag: function (a) {
        0 === this._dirtyFlag && 0 !== a && cc.renderer.pushDirtyNode(this);
        this._dirtyFlag |= a
    },
    getParentRenderCmd: function () {
        return this._node && this._node._parent && this._node._parent._renderCmd ? this._node._parent._renderCmd : null
    },
    transform: function (a, b) {
        this._transform || (this._transform = {
            a: 1,
            b: 0,
            c: 0,
            d: 1,
            tx: 0,
            ty: 0
        }, this._worldTransform = {
            a: 1,
            b: 0,
            c: 0,
            d: 1,
            tx: 0,
            ty: 0
        });
        var c = this._node,
            d = a ? a._worldTransform : null,
            f = this._transform,
            g = this._worldTransform;
        if (c._usingNormalizedPosition && c._parent) {
            var h = c._parent._contentSize;
            c._position.x = c._normalizedPosition.x * h.width;
            c._position.y = c._normalizedPosition.y * h.height;
            c._normalizedPositionDirty = !1
        }
        var m = c._rotationX || c._rotationY,
            n = c._skewX || c._skewY,
            p = c._scaleX,
            u = c._scaleY,
            h = this._anchorPointInPoints.x,
            v = this._anchorPointInPoints.y,
            x = 1,
            y = 0,
            z = 0,
            t = 1;
        if (m || n) {
            f.tx = c._position.x;
            f.ty = c._position.y;
            m && (x = c._rotationX * ONE_DEGREE, z = Math.sin(x), t = Math.cos(x), c._rotationY === c._rotationX ? (x = t, y = -z) : (y = c._rotationY * ONE_DEGREE, x = Math.cos(y), y = -Math.sin(y)));
            f.a = x *= p;
            f.b = y *= p;
            f.c = z *= u;
            f.d = t *= u;
            n && (n = Math.tan(c._skewX * ONE_DEGREE), p = Math.tan(c._skewY * ONE_DEGREE), Infinity === n && (n = 99999999), Infinity === p && (p = 99999999), f.a = x + z * p, f.b = y + t * p, f.c = z + x * n, f.d = t + y * n);
            if (h || v) f.tx -= f.a * h + f.c * v, f.ty -= f.b * h + f.d * v, c._ignoreAnchorPointForPosition && (f.tx += h, f.ty += v);
            c._additionalTransformDirty && cc.affineTransformConcatIn(f,
                c._additionalTransform);
            d ? (g.a = f.a * d.a + f.b * d.c, g.b = f.a * d.b + f.b * d.d, g.c = f.c * d.a + f.d * d.c, g.d = f.c * d.b + f.d * d.d, g.tx = d.a * f.tx + d.c * f.ty + d.tx, g.ty = d.d * f.ty + d.ty + d.b * f.tx) : (g.a = f.a, g.b = f.b, g.c = f.c, g.d = f.d, g.tx = f.tx, g.ty = f.ty)
        } else {
            f.a = p;
            f.b = 0;
            f.c = 0;
            f.d = u;
            f.tx = c._position.x;
            f.ty = c._position.y;
            if (h || v) f.tx -= f.a * h, f.ty -= f.d * v, c._ignoreAnchorPointForPosition && (f.tx += h, f.ty += v);
            c._additionalTransformDirty && cc.affineTransformConcatIn(f, c._additionalTransform);
            d ? (g.a = f.a * d.a + f.b * d.c, g.b = f.a * d.b + f.b * d.d, g.c = f.c *
                d.a + f.d * d.c, g.d = f.c * d.b + f.d * d.d, g.tx = f.tx * d.a + f.ty * d.c + d.tx, g.ty = f.tx * d.b + f.ty * d.d + d.ty) : (g.a = f.a, g.b = f.b, g.c = f.c, g.d = f.d, g.tx = f.tx, g.ty = f.ty)
        }
        this._updateCurrentRegions && (this._updateCurrentRegions(), this._notifyRegionStatus && this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble));
        b && transformChildTree(c);
        this._cacheDirty = !0
    },
    getNodeToParentTransform: function () {
        (!this._transform || this._dirtyFlag & cc.Node._dirtyFlags.transformDirty) && this.transform();
        return this._transform
    },
    visit: function (a) {
        var b =
            this._node,
            c = cc.renderer;
        if (a = a || this.getParentRenderCmd()) this._curLevel = a._curLevel + 1;
        isNaN(b._customZ) && (b._vertexZ = c.assignedZ, c.assignedZ += c.assignedZStep);
        this._syncStatus(a)
    },
    _updateDisplayColor: function (a) {
        var b = this._node,
            c = this._displayedColor,
            d = b._realColor,
            f;
        this._notifyRegionStatus && this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty);
        if (this._cascadeColorEnabledDirty && !b._cascadeColorEnabled) {
            c.r = d.r;
            c.g = d.g;
            c.b = d.b;
            c = new cc.Color(255, 255, 255, 255);
            a = b._children;
            b = 0;
            for (d =
                a.length; b < d; b++)(f = a[b]) && f._renderCmd && f._renderCmd._updateDisplayColor(c);
            this._cascadeColorEnabledDirty = !1
        } else if (void 0 === a && (a = (a = b._parent) && a._cascadeColorEnabled ? a.getDisplayedColor() : cc.color.WHITE), c.r = 0 | d.r * a.r / 255, c.g = 0 | d.g * a.g / 255, c.b = 0 | d.b * a.b / 255, b._cascadeColorEnabled) {
            a = b._children;
            b = 0;
            for (d = a.length; b < d; b++)
                if ((f = a[b]) && f._renderCmd) f._renderCmd._updateDisplayColor(c), f._renderCmd._updateColor()
        }
        this._dirtyFlag &= ~dirtyFlags.colorDirty
    },
    _updateDisplayOpacity: function (a) {
        var b = this._node,
            c, d;
        this._notifyRegionStatus && this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty);
        if (this._cascadeOpacityEnabledDirty && !b._cascadeOpacityEnabled) {
            this._displayedOpacity = b._realOpacity;
            c = b._children;
            a = 0;
            for (b = c.length; a < b; a++)(d = c[a]) && d._renderCmd && d._renderCmd._updateDisplayOpacity(255);
            this._cascadeOpacityEnabledDirty = !1
        } else if (void 0 === a && (c = b._parent, a = 255, c && c._cascadeOpacityEnabled && (a = c.getDisplayedOpacity())), this._displayedOpacity = b._realOpacity * a / 255, b._cascadeOpacityEnabled) {
            c =
                b._children;
            a = 0;
            for (b = c.length; a < b; a++)
                if ((d = c[a]) && d._renderCmd) d._renderCmd._updateDisplayOpacity(this._displayedOpacity), d._renderCmd._updateColor()
        }
        this._dirtyFlag &= ~dirtyFlags.opacityDirty
    },
    _syncDisplayColor: function (a) {
        var b = this._node,
            c = this._displayedColor,
            d = b._realColor;
        void 0 === a && (a = (a = b._parent) && a._cascadeColorEnabled ? a.getDisplayedColor() : cc.color.WHITE);
        c.r = 0 | d.r * a.r / 255;
        c.g = 0 | d.g * a.g / 255;
        c.b = 0 | d.b * a.b / 255
    },
    _syncDisplayOpacity: function (a) {
        var b = this._node;
        if (void 0 === a) {
            var c = b._parent;
            a = 255;
            c && c._cascadeOpacityEnabled && (a = c.getDisplayedOpacity())
        }
        this._displayedOpacity = b._realOpacity * a / 255
    },
    _updateColor: function () {},
    _propagateFlagsDown: function (a) {
        var b = this._dirtyFlag,
            c = a ? a._node : null;
        c && (c._cascadeColorEnabled && a._dirtyFlag & dirtyFlags.colorDirty) && (b |= dirtyFlags.colorDirty);
        c && (c._cascadeOpacityEnabled && a._dirtyFlag & dirtyFlags.opacityDirty) && (b |= dirtyFlags.opacityDirty);
        a && a._dirtyFlag & dirtyFlags.transformDirty && (b |= dirtyFlags.transformDirty);
        this._dirtyFlag = b
    },
    updateStatus: function () {
        var a =
            this._dirtyFlag,
            b = a & dirtyFlags.colorDirty,
            c = a & dirtyFlags.opacityDirty;
        a & dirtyFlags.contentDirty && (this._notifyRegionStatus && this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty), this._dirtyFlag &= ~dirtyFlags.contentDirty);
        b && this._updateDisplayColor();
        c && this._updateDisplayOpacity();
        (b || c) && this._updateColor();
        a & dirtyFlags.transformDirty && (this.transform(this.getParentRenderCmd(), !0), this._dirtyFlag &= ~dirtyFlags.transformDirty);
        a & dirtyFlags.orderDirty && (this._dirtyFlag &= ~dirtyFlags.orderDirty)
    },
    _syncStatus: function (a) {
        var b = this._dirtyFlag,
            c = a ? a._node : null;
        c && (c._cascadeColorEnabled && a._dirtyFlag & dirtyFlags.colorDirty) && (b |= dirtyFlags.colorDirty);
        c && (c._cascadeOpacityEnabled && a._dirtyFlag & dirtyFlags.opacityDirty) && (b |= dirtyFlags.opacityDirty);
        a && a._dirtyFlag & dirtyFlags.transformDirty && (b |= dirtyFlags.transformDirty);
        this._dirtyFlag = b;
        var c = b & dirtyFlags.colorDirty,
            d = b & dirtyFlags.opacityDirty;
        c && this._syncDisplayColor();
        d && this._syncDisplayOpacity();
        (c || d) && this._updateColor();
        b & dirtyFlags.transformDirty &&
            this.transform(a);
        b & dirtyFlags.orderDirty && (this._dirtyFlag &= ~dirtyFlags.orderDirty)
    }
};
cc.Node.RenderCmd.prototype.originTransform = cc.Node.RenderCmd.prototype.transform;
cc.Node.RenderCmd.prototype.originUpdateStatus = cc.Node.RenderCmd.prototype.updateStatus;
cc.Node.RenderCmd.prototype._originSyncStatus = cc.Node.RenderCmd.prototype._syncStatus;
(function () {
    cc.Node.CanvasRenderCmd = function (a) {
        this._node = a;
        this._anchorPointInPoints = {
            x: 0,
            y: 0
        };
        this._displayedColor = cc.color(255, 255, 255, 255);
        this._cachedParent = null;
        this._cacheDirty = !1;
        this._currentRegion = new cc.Region;
        this._oldRegion = new cc.Region;
        this._regionFlag = 0;
        this._canUseDirtyRegion = !1
    };
    cc.Node.CanvasRenderCmd.RegionStatus = {
        NotDirty: 0,
        Dirty: 1,
        DirtyDouble: 2
    };
    var a = cc.Node.CanvasRenderCmd.prototype = Object.create(cc.Node.RenderCmd.prototype);
    a.constructor = cc.Node.CanvasRenderCmd;
    a._rootCtor =
        cc.Node.CanvasRenderCmd;
    a._notifyRegionStatus = function (a) {
        this._needDraw && this._regionFlag < a && (this._regionFlag = a)
    };
    var b = new cc.Rect;
    a.getLocalBB = function () {
        var a = this._node;
        b.x = b.y = 0;
        b.width = a._contentSize.width;
        b.height = a._contentSize.height;
        return b
    };
    a._updateCurrentRegions = function () {
        var a = this._currentRegion;
        this._currentRegion = this._oldRegion;
        this._oldRegion = a;
        cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble === this._regionFlag && !this._currentRegion.isEmpty() && this._oldRegion.union(this._currentRegion);
        this._currentRegion.updateRegion(this.getLocalBB(), this._worldTransform)
    };
    a.setDirtyFlag = function (a, b) {
        cc.Node.RenderCmd.prototype.setDirtyFlag.call(this, a, b);
        this._setCacheDirty(b);
        this._cachedParent && this._cachedParent.setDirtyFlag(a, !0)
    };
    a._setCacheDirty = function () {
        if (!1 === this._cacheDirty) {
            this._cacheDirty = !0;
            var a = this._cachedParent;
            a && a !== this && a._setNodeDirtyForCache && a._setNodeDirtyForCache()
        }
    };
    a._setCachedParent = function (a) {
        if (this._cachedParent !== a) {
            this._cachedParent = a;
            for (var b = this._node._children,
                    f = 0, g = b.length; f < g; f++) b[f]._renderCmd._setCachedParent(a)
        }
    };
    a.detachFromParent = function () {
        this._cachedParent = null;
        for (var a = this._node._children, b, f = 0, g = a.length; f < g; f++)(b = a[f]) && b._renderCmd && b._renderCmd.detachFromParent()
    };
    a.setShaderProgram = function (a) {};
    a.getShaderProgram = function () {
        return null
    };
    cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc = function (a) {
        return a ? a.src === cc.SRC_ALPHA && a.dst === cc.ONE || a.src === cc.ONE && a.dst === cc.ONE ? "lighter" : a.src === cc.ZERO && a.dst === cc.SRC_ALPHA ? "destination-in" :
            a.src === cc.ZERO && a.dst === cc.ONE_MINUS_SRC_ALPHA ? "destination-out" : "source-over" : "source-over"
    }
})();
(function () {
    cc.Node.WebGLRenderCmd = function (a) {
        this._node = a;
        this._anchorPointInPoints = {
            x: 0,
            y: 0
        };
        this._displayedColor = cc.color(255, 255, 255, 255);
        this._shaderProgram = null
    };
    var a = cc.Node.WebGLRenderCmd.prototype = Object.create(cc.Node.RenderCmd.prototype);
    a.constructor = cc.Node.WebGLRenderCmd;
    a._rootCtor = cc.Node.WebGLRenderCmd;
    a._updateColor = function () {};
    a.setShaderProgram = function (a) {
        this._shaderProgram = a
    };
    a.getShaderProgram = function () {
        return this._shaderProgram
    }
})();
cc.AtlasNode = cc.Node.extend({
    textureAtlas: null,
    quadsToDraw: 0,
    _itemsPerRow: 0,
    _itemsPerColumn: 0,
    _itemWidth: 0,
    _itemHeight: 0,
    _opacityModifyRGB: !1,
    _blendFunc: null,
    _ignoreContentScaleFactor: !1,
    _className: "AtlasNode",
    _texture: null,
    _textureForCanvas: null,
    ctor: function (a, b, c, d) {
        cc.Node.prototype.ctor.call(this);
        this._blendFunc = {
            src: cc.BLEND_SRC,
            dst: cc.BLEND_DST
        };
        this._ignoreContentScaleFactor = !1;
        void 0 !== d && this.initWithTileFile(a, b, c, d)
    },
    _createRenderCmd: function () {
        this._renderCmd = cc._renderType === cc.game.RENDER_TYPE_CANVAS ?
            new cc.AtlasNode.CanvasRenderCmd(this) : new cc.AtlasNode.WebGLRenderCmd(this)
    },
    updateAtlasValues: function () {
        cc.log(cc._LogInfos.AtlasNode_updateAtlasValues)
    },
    getColor: function () {
        return this._opacityModifyRGB ? this._renderCmd._colorUnmodified : cc.Node.prototype.getColor.call(this)
    },
    setOpacityModifyRGB: function (a) {
        var b = this.color;
        this._opacityModifyRGB = a;
        this.setColor(b)
    },
    isOpacityModifyRGB: function () {
        return this._opacityModifyRGB
    },
    getBlendFunc: function () {
        return this._blendFunc
    },
    setBlendFunc: function (a,
        b) {
        this._blendFunc = void 0 === b ? a : {
            src: a,
            dst: b
        }
    },
    setTextureAtlas: function (a) {
        this.textureAtlas = a
    },
    getTextureAtlas: function () {
        return this.textureAtlas
    },
    getQuadsToDraw: function () {
        return this.quadsToDraw
    },
    setQuadsToDraw: function (a) {
        this.quadsToDraw = a
    },
    initWithTileFile: function (a, b, c, d) {
        if (!a) throw Error("cc.AtlasNode.initWithTileFile(): title should not be null");
        a = cc.textureCache.addImage(a);
        return this.initWithTexture(a, b, c, d)
    },
    initWithTexture: function (a, b, c, d) {
        return this._renderCmd.initWithTexture(a,
            b, c, d)
    },
    setColor: function (a) {
        this._renderCmd.setColor(a)
    },
    setOpacity: function (a) {
        this._renderCmd.setOpacity(a)
    },
    getTexture: function () {
        return this._texture
    },
    setTexture: function (a) {
        this._texture = a
    },
    _setIgnoreContentScaleFactor: function (a) {
        this._ignoreContentScaleFactor = a
    }
});
_p = cc.AtlasNode.prototype;
cc.defineGetterSetter(_p, "opacity", _p.getOpacity, _p.setOpacity);
cc.defineGetterSetter(_p, "color", _p.getColor, _p.setColor);
cc.defineGetterSetter(_p, "texture", _p.getTexture, _p.setTexture);
cc.EventHelper.prototype.apply(_p);
cc.AtlasNode.create = function (a, b, c, d) {
    return new cc.AtlasNode(a, b, c, d)
};
(function () {
    cc.AtlasNode.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !1;
        this._colorUnmodified = cc.color.WHITE;
        this._textureToRender = null
    };
    var a = cc.AtlasNode.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    a.constructor = cc.AtlasNode.CanvasRenderCmd;
    a.initWithTexture = function (a, c, d, f) {
        var g = this._node;
        g._itemWidth = c;
        g._itemHeight = d;
        g._opacityModifyRGB = !0;
        g._texture = a;
        if (!g._texture) return cc.log(cc._LogInfos.AtlasNode__initWithTexture), !1;
        this._textureToRender =
            a;
        this._calculateMaxItems();
        g.quadsToDraw = f;
        return !0
    };
    a.setColor = function (a) {
        var c = this._node._realColor;
        c.r === a.r && c.g === a.g && c.b === a.b || (this._colorUnmodified = a, this._changeTextureColor())
    };
    a._changeTextureColor = function () {
        var a = this._node._texture,
            c = this._colorUnmodified,
            d = a.getHtmlElementObj(),
            d = cc.rect(0, 0, d.width, d.height);
        a === this._textureToRender ? this._textureToRender = a._generateColorTexture(c.r, c.g, c.b, d) : a._generateColorTexture(c.r, c.g, c.b, d, this._textureToRender.getHtmlElementObj())
    };
    a.setOpacity =
        function (a) {
            cc.Node.prototype.setOpacity.call(this._node, a)
        };
    a._calculateMaxItems = function () {
        var a = this._node,
            c = a._texture.getContentSize();
        a._itemsPerColumn = 0 | c.height / a._itemHeight;
        a._itemsPerRow = 0 | c.width / a._itemWidth
    }
})();
(function () {
    cc.AtlasNode.WebGLRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !0;
        this._textureAtlas = null;
        this._colorUnmodified = cc.color.WHITE;
        this._uniformColor = this._colorF32Array = null;
        this._matrix = new cc.math.Matrix4;
        this._matrix.identity();
        this._shaderProgram = cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURE_UCOLOR);
        this._uniformColor = cc._renderContext.getUniformLocation(this._shaderProgram.getProgram(), "u_color")
    };
    var a = cc.AtlasNode.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
    a.constructor = cc.AtlasNode.WebGLRenderCmd;
    a._updateBlendFunc = function () {
        var a = this._node;
        this._textureAtlas.texture.hasPremultipliedAlpha() || (a._blendFunc.src = cc.SRC_ALPHA, a._blendFunc.dst = cc.ONE_MINUS_SRC_ALPHA)
    };
    a._updateOpacityModifyRGB = function () {
        this._node._opacityModifyRGB = this._textureAtlas.texture.hasPremultipliedAlpha()
    };
    a.rendering = function (a) {
        a = a || cc._renderContext;
        var c = this._node,
            d = this._worldTransform;
        this._matrix.mat[0] = d.a;
        this._matrix.mat[4] = d.c;
        this._matrix.mat[12] = d.tx;
        this._matrix.mat[1] =
            d.b;
        this._matrix.mat[5] = d.d;
        this._matrix.mat[13] = d.ty;
        this._shaderProgram.use();
        this._shaderProgram._setUniformForMVPMatrixWithMat4(this._matrix);
        cc.glBlendFunc(c._blendFunc.src, c._blendFunc.dst);
        this._uniformColor && this._colorF32Array && (a.uniform4fv(this._uniformColor, this._colorF32Array), this._textureAtlas.drawNumberOfQuads(c.quadsToDraw, 0))
    };
    a.initWithTexture = function (a, c, d, f) {
        var g = this._node;
        g._itemWidth = c;
        g._itemHeight = d;
        this._colorUnmodified = cc.color.WHITE;
        g._opacityModifyRGB = !0;
        g._blendFunc.src =
            cc.BLEND_SRC;
        g._blendFunc.dst = cc.BLEND_DST;
        c = g._realColor;
        this._colorF32Array = new Float32Array([c.r / 255, c.g / 255, c.b / 255, g._realOpacity / 255]);
        this._textureAtlas = new cc.TextureAtlas;
        this._textureAtlas.initWithTexture(a, f);
        if (!this._textureAtlas) return cc.log(cc._LogInfos.AtlasNode__initWithTexture), !1;
        this._updateBlendFunc();
        this._updateOpacityModifyRGB();
        this._calculateMaxItems();
        g.quadsToDraw = f;
        return !0
    };
    a.setColor = function (a) {
        var c = cc.color(a.r, a.g, a.b),
            d = this._node;
        this._colorUnmodified = a;
        a = this._displayedOpacity;
        d._opacityModifyRGB && (c.r = c.r * a / 255, c.g = c.g * a / 255, c.b = c.b * a / 255);
        cc.Node.prototype.setColor.call(d, c)
    };
    a.setOpacity = function (a) {
        var c = this._node;
        cc.Node.prototype.setOpacity.call(c, a);
        c._opacityModifyRGB && (c.color = this._colorUnmodified)
    };
    a._updateColor = function () {
        if (this._colorF32Array) {
            var a = this._displayedColor;
            this._colorF32Array[0] = a.r / 255;
            this._colorF32Array[1] = a.g / 255;
            this._colorF32Array[2] = a.b / 255;
            this._colorF32Array[3] = this._displayedOpacity / 255
        }
    };
    a.getTexture = function () {
        return this._textureAtlas.texture
    };
    a.setTexture = function (a) {
        this._textureAtlas.texture = a;
        this._updateBlendFunc();
        this._updateOpacityModifyRGB()
    };
    a._calculateMaxItems = function () {
        var a = this._node,
            c = this._textureAtlas.texture,
            d = c.getContentSize();
        a._ignoreContentScaleFactor && (d = c.getContentSizeInPixels());
        a._itemsPerColumn = 0 | d.height / a._itemHeight;
        a._itemsPerRow = 0 | d.width / a._itemWidth
    }
})();
cc._tmp.WebGLTexture2D = function () {
    cc.Texture2D = cc.Class.extend({
        _pVRHaveAlphaPremultiplied: !0,
        _pixelFormat: null,
        _pixelsWide: 0,
        _pixelsHigh: 0,
        _name: "",
        _contentSize: null,
        maxS: 0,
        maxT: 0,
        _hasPremultipliedAlpha: !1,
        _hasMipmaps: !1,
        shaderProgram: null,
        _textureLoaded: !1,
        _htmlElementObj: null,
        _webTextureObj: null,
        url: null,
        ctor: function () {
            this._contentSize = cc.size(0, 0);
            this._pixelFormat = cc.Texture2D.defaultPixelFormat
        },
        releaseTexture: function () {
            this._webTextureObj && cc._renderContext.deleteTexture(this._webTextureObj);
            cc.loader.release(this.url)
        },
        getPixelFormat: function () {
            return this._pixelFormat
        },
        getPixelsWide: function () {
            return this._pixelsWide
        },
        getPixelsHigh: function () {
            return this._pixelsHigh
        },
        getName: function () {
            return this._webTextureObj
        },
        getContentSize: function () {
            return cc.size(this._contentSize.width / cc.contentScaleFactor(), this._contentSize.height / cc.contentScaleFactor())
        },
        _getWidth: function () {
            return this._contentSize.width / cc.contentScaleFactor()
        },
        _getHeight: function () {
            return this._contentSize.height / cc.contentScaleFactor()
        },
        getContentSizeInPixels: function () {
            return this._contentSize
        },
        getMaxS: function () {
            return this.maxS
        },
        setMaxS: function (a) {
            this.maxS = a
        },
        getMaxT: function () {
            return this.maxT
        },
        setMaxT: function (a) {
            this.maxT = a
        },
        getShaderProgram: function () {
            return this.shaderProgram
        },
        setShaderProgram: function (a) {
            this.shaderProgram = a
        },
        hasPremultipliedAlpha: function () {
            return this._hasPremultipliedAlpha
        },
        hasMipmaps: function () {
            return this._hasMipmaps
        },
        description: function () {
            return "<cc.Texture2D | Name = " + this._name + " | Dimensions = " +
                this._pixelsWide + " x " + this._pixelsHigh + " | Coordinates = (" + this.maxS + ", " + this.maxT + ")>"
        },
        releaseData: function (a) {},
        keepData: function (a, b) {
            return a
        },
        initWithData: function (a, b, c, d, f) {
            var g = cc.Texture2D,
                h = cc._renderContext,
                m = h.RGBA,
                n = h.UNSIGNED_BYTE,
                p = c * cc.Texture2D._B[b] / 8;
            0 === p % 8 ? h.pixelStorei(h.UNPACK_ALIGNMENT, 8) : 0 === p % 4 ? h.pixelStorei(h.UNPACK_ALIGNMENT, 4) : 0 === p % 2 ? h.pixelStorei(h.UNPACK_ALIGNMENT, 2) : h.pixelStorei(h.UNPACK_ALIGNMENT, 1);
            this._webTextureObj = h.createTexture();
            cc.glBindTexture2D(this);
            h.texParameteri(h.TEXTURE_2D, h.TEXTURE_MIN_FILTER, h.LINEAR);
            h.texParameteri(h.TEXTURE_2D, h.TEXTURE_MAG_FILTER, h.LINEAR);
            h.texParameteri(h.TEXTURE_2D, h.TEXTURE_WRAP_S, h.CLAMP_TO_EDGE);
            h.texParameteri(h.TEXTURE_2D, h.TEXTURE_WRAP_T, h.CLAMP_TO_EDGE);
            switch (b) {
            case g.PIXEL_FORMAT_RGBA8888:
                m = h.RGBA;
                break;
            case g.PIXEL_FORMAT_RGB888:
                m = h.RGB;
                break;
            case g.PIXEL_FORMAT_RGBA4444:
                n = h.UNSIGNED_SHORT_4_4_4_4;
                break;
            case g.PIXEL_FORMAT_RGB5A1:
                n = h.UNSIGNED_SHORT_5_5_5_1;
                break;
            case g.PIXEL_FORMAT_RGB565:
                n = h.UNSIGNED_SHORT_5_6_5;
                break;
            case g.PIXEL_FORMAT_AI88:
                m = h.LUMINANCE_ALPHA;
                break;
            case g.PIXEL_FORMAT_A8:
                m = h.ALPHA;
                break;
            case g.PIXEL_FORMAT_I8:
                m = h.LUMINANCE;
                break;
            default:
                cc.assert(0, cc._LogInfos.Texture2D_initWithData)
            }
            h.texImage2D(h.TEXTURE_2D, 0, m, c, d, 0, m, n, a);
            this._contentSize.width = f.width;
            this._contentSize.height = f.height;
            this._pixelsWide = c;
            this._pixelsHigh = d;
            this._pixelFormat = b;
            this.maxS = f.width / c;
            this.maxT = f.height / d;
            this._hasMipmaps = this._hasPremultipliedAlpha = !1;
            this.shaderProgram = cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURE);
            return this._textureLoaded = !0
        },
        drawAtPoint: function (a) {
            var b = [0, this.maxT, this.maxS, this.maxT, 0, 0, this.maxS, 0],
                c = cc._renderContext,
                d = this._pixelsWide * this.maxS,
                f = this._pixelsHigh * this.maxT;
            a = [a.x, a.y, 0, d + a.x, a.y, 0, a.x, f + a.y, 0, d + a.x, f + a.y, 0];
            this._shaderProgram.use();
            this._shaderProgram.setUniformsForBuiltins();
            cc.glBindTexture2D(this);
            c.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
            c.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
            c.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, c.FLOAT,
                !1, 0, a);
            c.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, c.FLOAT, !1, 0, b);
            c.drawArrays(c.TRIANGLE_STRIP, 0, 4)
        },
        drawInRect: function (a) {
            var b = [0, this.maxT, this.maxS, this.maxT, 0, 0, this.maxS, 0];
            a = [a.x, a.y, a.x + a.width, a.y, a.x, a.y + a.height, a.x + a.width, a.y + a.height];
            this._shaderProgram.use();
            this._shaderProgram.setUniformsForBuiltins();
            cc.glBindTexture2D(this);
            var c = cc._renderContext;
            c.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
            c.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
            c.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,
                2, c.FLOAT, !1, 0, a);
            c.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, c.FLOAT, !1, 0, b);
            c.drawArrays(c.TRIANGLE_STRIP, 0, 4)
        },
        initWithImage: function (a) {
            if (null == a) return cc.log(cc._LogInfos.Texture2D_initWithImage), !1;
            var b = a.getWidth(),
                c = a.getHeight(),
                d = cc.configuration.getMaxTextureSize();
            if (b > d || c > d) return cc.log(cc._LogInfos.Texture2D_initWithImage_2, b, c, d, d), !1;
            this._textureLoaded = !0;
            return this._initPremultipliedATextureWithImage(a, b, c)
        },
        initWithElement: function (a) {
            a && (this._webTextureObj = cc._renderContext.createTexture(),
                this._htmlElementObj = a, this._hasPremultipliedAlpha = this._textureLoaded = !0)
        },
        getHtmlElementObj: function () {
            return this._htmlElementObj
        },
        isLoaded: function () {
            return this._textureLoaded
        },
        handleLoadedTexture: function (a) {
            a = void 0 !== a ? a : this._hasPremultipliedAlpha;
            if (cc.game._rendererInitialized) {
                if (!this._htmlElementObj) {
                    var b = cc.loader.getRes(this.url);
                    if (!b) return;
                    this.initWithElement(b)
                }
                this._htmlElementObj.width && this._htmlElementObj.height && (b = cc._renderContext, cc.glBindTexture2D(this), b.pixelStorei(b.UNPACK_ALIGNMENT,
                    4), a && b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1), b.texImage2D(b.TEXTURE_2D, 0, b.RGBA, b.RGBA, b.UNSIGNED_BYTE, this._htmlElementObj), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MIN_FILTER, b.LINEAR), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MAG_FILTER, b.LINEAR), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_S, b.CLAMP_TO_EDGE), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_T, b.CLAMP_TO_EDGE), this.shaderProgram = cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURE), cc.glBindTexture2D(null), a && b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                    0), b = this._htmlElementObj.height, this._pixelsWide = this._contentSize.width = this._htmlElementObj.width, this._pixelsHigh = this._contentSize.height = b, this._pixelFormat = cc.Texture2D.PIXEL_FORMAT_RGBA8888, this.maxT = this.maxS = 1, this._hasPremultipliedAlpha = a, this._hasMipmaps = !1, this.dispatchEvent("load"))
            }
        },
        initWithString: function (a, b, c, d, f, g) {
            cc.log(cc._LogInfos.Texture2D_initWithString);
            return null
        },
        initWithETCFile: function (a) {
            cc.log(cc._LogInfos.Texture2D_initWithETCFile_2);
            return !1
        },
        initWithPVRFile: function (a) {
            cc.log(cc._LogInfos.Texture2D_initWithPVRFile_2);
            return !1
        },
        initWithPVRTCData: function (a, b, c, d, f, g) {
            cc.log(cc._LogInfos.Texture2D_initWithPVRTCData_2);
            return !1
        },
        setTexParameters: function (a, b, c, d) {
            var f = cc._renderContext;
            void 0 !== b && (a = {
                minFilter: a,
                magFilter: b,
                wrapS: c,
                wrapT: d
            });
            cc.assert(this._pixelsWide === cc.NextPOT(this._pixelsWide) && this._pixelsHigh === cc.NextPOT(this._pixelsHigh) || a.wrapS === f.CLAMP_TO_EDGE && a.wrapT === f.CLAMP_TO_EDGE, "WebGLRenderingContext.CLAMP_TO_EDGE should be used in NPOT textures");
            cc.glBindTexture2D(this);
            f.texParameteri(f.TEXTURE_2D,
                f.TEXTURE_MIN_FILTER, a.minFilter);
            f.texParameteri(f.TEXTURE_2D, f.TEXTURE_MAG_FILTER, a.magFilter);
            f.texParameteri(f.TEXTURE_2D, f.TEXTURE_WRAP_S, a.wrapS);
            f.texParameteri(f.TEXTURE_2D, f.TEXTURE_WRAP_T, a.wrapT)
        },
        setAntiAliasTexParameters: function () {
            var a = cc._renderContext;
            cc.glBindTexture2D(this);
            this._hasMipmaps ? a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.LINEAR_MIPMAP_NEAREST) : a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.LINEAR);
            a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, a.LINEAR)
        },
        setAliasTexParameters: function () {
            var a = cc._renderContext;
            cc.glBindTexture2D(this);
            this._hasMipmaps ? a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.NEAREST_MIPMAP_NEAREST) : a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.NEAREST);
            a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, a.NEAREST)
        },
        generateMipmap: function () {
            cc.assert(this._pixelsWide === cc.NextPOT(this._pixelsWide) && this._pixelsHigh === cc.NextPOT(this._pixelsHigh), "Mimpap texture only works in POT textures");
            cc.glBindTexture2D(this);
            cc._renderContext.generateMipmap(cc._renderContext.TEXTURE_2D);
            this._hasMipmaps = !0
        },
        stringForFormat: function () {
            return cc.Texture2D._M[this._pixelFormat]
        },
        bitsPerPixelForFormat: function (a) {
            a = a || this._pixelFormat;
            var b = cc.Texture2D._B[a];
            if (null != b) return b;
            cc.log(cc._LogInfos.Texture2D_bitsPerPixelForFormat, a);
            return -1
        },
        _initPremultipliedATextureWithImage: function (a, b, c) {
            var d = cc.Texture2D,
                f = a.getData(),
                g = null,
                g = null,
                h = a.hasAlpha(),
                m = cc.size(a.getWidth(), a.getHeight()),
                n = d.defaultPixelFormat,
                p = a.getBitsPerComponent();
            h || (8 <= p ? n = d.PIXEL_FORMAT_RGB888 : (cc.log(cc._LogInfos.Texture2D__initPremultipliedATextureWithImage), n = d.PIXEL_FORMAT_RGB565));
            var u = b * c;
            if (n === d.PIXEL_FORMAT_RGB565)
                if (h) {
                    f = new Uint16Array(b * c);
                    g = a.getData();
                    for (p = 0; p < u; ++p) f[p] = (g[p] >> 0 & 255) >> 3 << 11 | (g[p] >> 8 & 255) >> 2 << 5 | (g[p] >> 16 & 255) >> 3 << 0
                } else {
                    f = new Uint16Array(b * c);
                    g = a.getData();
                    for (p = 0; p < u; ++p) f[p] = (g[p] & 255) >> 3 << 11 | (g[p] & 255) >> 2 << 5 | (g[p] & 255) >> 3 << 0
                }
            else if (n === d.PIXEL_FORMAT_RGBA4444) {
                f = new Uint16Array(b * c);
                g = a.getData();
                for (p = 0; p < u; ++p) f[p] =
                    (g[p] >> 0 & 255) >> 4 << 12 | (g[p] >> 8 & 255) >> 4 << 8 | (g[p] >> 16 & 255) >> 4 << 4 | (g[p] >> 24 & 255) >> 4 << 0
            } else if (n === d.PIXEL_FORMAT_RGB5A1) {
                f = new Uint16Array(b * c);
                g = a.getData();
                for (p = 0; p < u; ++p) f[p] = (g[p] >> 0 & 255) >> 3 << 11 | (g[p] >> 8 & 255) >> 3 << 6 | (g[p] >> 16 & 255) >> 3 << 1 | (g[p] >> 24 & 255) >> 7 << 0
            } else if (n === d.PIXEL_FORMAT_A8) {
                f = new Uint8Array(b * c);
                g = a.getData();
                for (p = 0; p < u; ++p) f[p] = g >> 24 & 255
            }
            if (h && n === d.PIXEL_FORMAT_RGB888) {
                g = a.getData();
                f = new Uint8Array(3 * b * c);
                for (p = 0; p < u; ++p) f[3 * p] = g >> 0 & 255, f[3 * p + 1] = g >> 8 & 255, f[3 * p + 2] = g >> 16 & 255
            }
            this.initWithData(f,
                n, b, c, m);
            a.getData();
            this._hasPremultipliedAlpha = a.isPremultipliedAlpha();
            return !0
        },
        addLoadedEventListener: function (a, b) {
            this.addEventListener("load", a, b)
        },
        removeLoadedEventListener: function (a) {
            this.removeEventTarget("load", a)
        }
    })
};
cc._tmp.WebGLTextureAtlas = function () {
    var a = cc.TextureAtlas.prototype;
    a._setupVBO = function () {
        var a = cc._renderContext;
        this._buffersVBO[0] = a.createBuffer();
        this._buffersVBO[1] = a.createBuffer();
        this._quadsWebBuffer = a.createBuffer();
        this._mapBuffers()
    };
    a._mapBuffers = function () {
        var a = cc._renderContext;
        a.bindBuffer(a.ARRAY_BUFFER, this._quadsWebBuffer);
        a.bufferData(a.ARRAY_BUFFER, this._quadsArrayBuffer, a.DYNAMIC_DRAW);
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this._buffersVBO[1]);
        a.bufferData(a.ELEMENT_ARRAY_BUFFER,
            this._indices, a.STATIC_DRAW)
    };
    a.drawNumberOfQuads = function (a, c) {
        c = c || 0;
        if (!(0 === a || !this.texture || !this.texture.isLoaded())) {
            var d = cc._renderContext;
            cc.glBindTexture2D(this.texture);
            d.bindBuffer(d.ARRAY_BUFFER, this._quadsWebBuffer);
            this.dirty && (d.bufferData(d.ARRAY_BUFFER, this._quadsArrayBuffer, d.DYNAMIC_DRAW), this.dirty = !1);
            d.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
            d.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR);
            d.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
            d.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,
                3, d.FLOAT, !1, 24, 0);
            d.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR, 4, d.UNSIGNED_BYTE, !0, 24, 12);
            d.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, d.FLOAT, !1, 24, 16);
            d.bindBuffer(d.ELEMENT_ARRAY_BUFFER, this._buffersVBO[1]);
            cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP ? d.drawElements(d.TRIANGLE_STRIP, 6 * a, d.UNSIGNED_SHORT, 6 * c * this._indices.BYTES_PER_ELEMENT) : d.drawElements(d.TRIANGLES, 6 * a, d.UNSIGNED_SHORT, 6 * c * this._indices.BYTES_PER_ELEMENT);
            cc.g_NumberOfDraws++
        }
    }
};
cc._tmp.WebGLTextureCache = function () {
    var a = cc.textureCache;
    a.handleLoadedTexture = function (a) {
        var c = this._textures,
            d;
        cc.game._rendererInitialized || (c = this._loadedTexturesBefore);
        d = c[a];
        d || (d = c[a] = new cc.Texture2D, d.url = a);
        ".png" === cc.path.extname(a) ? d.handleLoadedTexture(!0) : d.handleLoadedTexture()
    };
    a.addImage = function (a, c, d) {
        cc.assert(a, cc._LogInfos.Texture2D_addImage_2);
        var f = this._textures;
        cc.game._rendererInitialized || (f = this._loadedTexturesBefore);
        var g = f[a] || f[cc.loader._getAliase(a)];
        if (g) return g.isLoaded() ?
            c && c.call(d, g) : g.addEventListener("load", function () {
                c && c.call(d, g)
            }, d), g;
        g = f[a] = new cc.Texture2D;
        g.url = a;
        var h = cc.loader.getBasePath ? cc.loader.getBasePath() : cc.loader.resPath;
        cc.loader.loadImg(cc.path.join(h || "", a), function (g, h) {
            if (g) return c && c.call(d, g);
            cc.loader.cache[a] || (cc.loader.cache[a] = h);
            cc.textureCache.handleLoadedTexture(a);
            var p = f[a];
            c && c.call(d, p)
        });
        return g
    };
    a.addImageAsync = a.addImage;
    a = null
};
cc._tmp.PrototypeTexture2D = function () {
    var a = cc.Texture2D;
    a.PVRImagesHavePremultipliedAlpha = function (a) {
        cc.PVRHaveAlphaPremultiplied_ = a
    };
    a.PIXEL_FORMAT_RGBA8888 = 2;
    a.PIXEL_FORMAT_RGB888 = 3;
    a.PIXEL_FORMAT_RGB565 = 4;
    a.PIXEL_FORMAT_A8 = 5;
    a.PIXEL_FORMAT_I8 = 6;
    a.PIXEL_FORMAT_AI88 = 7;
    a.PIXEL_FORMAT_RGBA4444 = 8;
    a.PIXEL_FORMAT_RGB5A1 = 7;
    a.PIXEL_FORMAT_PVRTC4 = 9;
    a.PIXEL_FORMAT_PVRTC2 = 10;
    a.PIXEL_FORMAT_DEFAULT = a.PIXEL_FORMAT_RGBA8888;
    a.defaultPixelFormat = a.PIXEL_FORMAT_DEFAULT;
    var b = cc.Texture2D._M = {};
    b[a.PIXEL_FORMAT_RGBA8888] =
        "RGBA8888";
    b[a.PIXEL_FORMAT_RGB888] = "RGB888";
    b[a.PIXEL_FORMAT_RGB565] = "RGB565";
    b[a.PIXEL_FORMAT_A8] = "A8";
    b[a.PIXEL_FORMAT_I8] = "I8";
    b[a.PIXEL_FORMAT_AI88] = "AI88";
    b[a.PIXEL_FORMAT_RGBA4444] = "RGBA4444";
    b[a.PIXEL_FORMAT_RGB5A1] = "RGB5A1";
    b[a.PIXEL_FORMAT_PVRTC4] = "PVRTC4";
    b[a.PIXEL_FORMAT_PVRTC2] = "PVRTC2";
    b = cc.Texture2D._B = {};
    b[a.PIXEL_FORMAT_RGBA8888] = 32;
    b[a.PIXEL_FORMAT_RGB888] = 24;
    b[a.PIXEL_FORMAT_RGB565] = 16;
    b[a.PIXEL_FORMAT_A8] = 8;
    b[a.PIXEL_FORMAT_I8] = 8;
    b[a.PIXEL_FORMAT_AI88] = 16;
    b[a.PIXEL_FORMAT_RGBA4444] =
        16;
    b[a.PIXEL_FORMAT_RGB5A1] = 16;
    b[a.PIXEL_FORMAT_PVRTC4] = 4;
    b[a.PIXEL_FORMAT_PVRTC2] = 3;
    a = cc.Texture2D.prototype;
    cc.defineGetterSetter(a, "name", a.getName);
    cc.defineGetterSetter(a, "pixelFormat", a.getPixelFormat);
    cc.defineGetterSetter(a, "pixelsWidth", a.getPixelsWide);
    cc.defineGetterSetter(a, "pixelsHeight", a.getPixelsHigh);
    cc.defineGetterSetter(a, "width", a._getWidth);
    cc.defineGetterSetter(a, "height", a._getHeight)
};
cc._tmp.PrototypeTextureAtlas = function () {
    var a = cc.TextureAtlas.prototype;
    cc.defineGetterSetter(a, "totalQuads", a.getTotalQuads);
    cc.defineGetterSetter(a, "capacity", a.getCapacity);
    cc.defineGetterSetter(a, "quads", a.getQuads, a.setQuads)
};
cc.ALIGN_CENTER = 51;
cc.ALIGN_TOP = 19;
cc.ALIGN_TOP_RIGHT = 18;
cc.ALIGN_RIGHT = 50;
cc.ALIGN_BOTTOM_RIGHT = 34;
cc.ALIGN_BOTTOM = 35;
cc.ALIGN_BOTTOM_LEFT = 33;
cc.ALIGN_LEFT = 49;
cc.ALIGN_TOP_LEFT = 17;
cc.PVRHaveAlphaPremultiplied_ = !1;
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
    if (cc._renderType === cc.game.RENDER_TYPE_CANVAS) {
        var a = {
            _contentSize: null,
            _textureLoaded: !1,
            _htmlElementObj: null,
            url: null,
            _pattern: null,
            ctor: function () {
                this._contentSize = cc.size(0, 0);
                this._textureLoaded = !1;
                this._htmlElementObj = null;
                this._pattern = "";
                this._pixelsHigh = this._pixelsWide = 0
            },
            getPixelsWide: function () {
                return this._pixelsWide
            },
            getPixelsHigh: function () {
                return this._pixelsHigh
            },
            getContentSize: function () {
                var a = cc.contentScaleFactor();
                return cc.size(this._contentSize.width / a, this._contentSize.height / a)
            },
            _getWidth: function () {
                return this._contentSize.width / cc.contentScaleFactor()
            },
            _getHeight: function () {
                return this._contentSize.height / cc.contentScaleFactor()
            },
            getContentSizeInPixels: function () {
                return this._contentSize
            },
            initWithElement: function (a) {
                a && (this._htmlElementObj = a, this._pixelsWide = this._contentSize.width = a.width, this._pixelsHigh = this._contentSize.height = a.height, this._textureLoaded = !0)
            },
            getHtmlElementObj: function () {
                return this._htmlElementObj
            },
            isLoaded: function () {
                return this._textureLoaded
            },
            handleLoadedTexture: function () {
                if (!this._textureLoaded) {
                    if (!this._htmlElementObj) {
                        var a = cc.loader.getRes(this.url);
                        if (!a) return;
                        this.initWithElement(a)
                    }
                    a = this._htmlElementObj;
                    this._pixelsWide = this._contentSize.width = a.width;
                    this._pixelsHigh = this._contentSize.height = a.height;
                    this.dispatchEvent("load")
                }
            },
            description: function () {
                return "<cc.Texture2D | width = " + this._contentSize.width + " height " + this._contentSize.height + ">"
            },
            initWithData: function (a,
                c, d, f, g) {
                return !1
            },
            initWithImage: function (a) {
                return !1
            },
            initWithString: function (a, c, d, f, g, h) {
                return !1
            },
            releaseTexture: function () {
                cc.loader.release(this.url)
            },
            getName: function () {
                return null
            },
            getMaxS: function () {
                return 1
            },
            setMaxS: function (a) {},
            getMaxT: function () {
                return 1
            },
            setMaxT: function (a) {},
            getPixelFormat: function () {
                return null
            },
            getShaderProgram: function () {
                return null
            },
            setShaderProgram: function (a) {},
            hasPremultipliedAlpha: function () {
                return !1
            },
            hasMipmaps: function () {
                return !1
            },
            releaseData: function (a) {},
            keepData: function (a, c) {
                return a
            },
            drawAtPoint: function (a) {},
            drawInRect: function (a) {},
            initWithETCFile: function (a) {
                cc.log(cc._LogInfos.Texture2D_initWithETCFile);
                return !1
            },
            initWithPVRFile: function (a) {
                cc.log(cc._LogInfos.Texture2D_initWithPVRFile);
                return !1
            },
            initWithPVRTCData: function (a, c, d, f, g, h) {
                cc.log(cc._LogInfos.Texture2D_initWithPVRTCData);
                return !1
            },
            setTexParameters: function (a, c, d, f) {
                void 0 !== c && (a = {
                    minFilter: a,
                    magFilter: c,
                    wrapS: d,
                    wrapT: f
                });
                this._pattern = a.wrapS === cc.REPEAT && a.wrapT === cc.REPEAT ?
                    "repeat" : a.wrapS === cc.REPEAT ? "repeat-x" : a.wrapT === cc.REPEAT ? "repeat-y" : ""
            },
            setAntiAliasTexParameters: function () {},
            setAliasTexParameters: function () {},
            generateMipmap: function () {},
            stringForFormat: function () {
                return ""
            },
            bitsPerPixelForFormat: function (a) {
                return -1
            },
            addLoadedEventListener: function (a, c) {
                this.addEventListener("load", a, c)
            },
            removeLoadedEventListener: function (a) {
                this.removeEventTarget("load", a)
            },
            _generateColorTexture: function () {},
            _generateTextureCacheForColor: function () {
                if (this.channelCache) return this.channelCache;
                var a = [document.createElement("canvas"), document.createElement("canvas"), document.createElement("canvas"), document.createElement("canvas")],
                    c = this._htmlElementObj,
                    d = c.width,
                    f = c.height;
                a[0].width = d;
                a[0].height = f;
                a[1].width = d;
                a[1].height = f;
                a[2].width = d;
                a[2].height = f;
                a[3].width = d;
                a[3].height = f;
                var g = a[3].getContext("2d");
                g.drawImage(c, 0, 0);
                for (var g = g.getImageData(0, 0, d, f).data, h, m = 0; 4 > m; m++) {
                    h = a[m].getContext("2d");
                    for (var n = h.getImageData(0, 0, d, f), p = n.data, u = 0; u < g.length; u += 4) p[u] = 0 === m ? g[u] : 0, p[u +
                        1] = 1 === m ? g[u + 1] : 0, p[u + 2] = 2 === m ? g[u + 2] : 0, p[u + 3] = g[u + 3];
                    h.putImageData(n, 0, 0)
                }
                c.onload = null;
                return this.channelCache = a
            },
            _grayElementObj: null,
            _backupElement: null,
            _isGray: !1,
            _switchToGray: function (a) {
                this._textureLoaded && this._isGray !== a && ((this._isGray = a) ? (this._backupElement = this._htmlElementObj, this._grayElementObj || (this._grayElementObj = cc.Texture2D._generateGrayTexture(this._htmlElementObj)), this._htmlElementObj = this._grayElementObj) : null !== this._backupElement && (this._htmlElementObj = this._backupElement))
            },
            _generateGrayTexture: function () {
                if (!this._textureLoaded) return null;
                var a = cc.Texture2D._generateGrayTexture(this._htmlElementObj),
                    c = new cc.Texture2D;
                c.initWithElement(a);
                c.handleLoadedTexture();
                return c
            }
        };
        a._generateColorTexture = cc.sys._supportCanvasNewBlendModes ? function (a, c, d, f, g) {
            var h = !1;
            g ? h = !0 : g = document.createElement("canvas");
            var m = this._htmlElementObj;
            f || (f = cc.rect(0, 0, m.width, m.height));
            g.width = f.width;
            g.height = f.height;
            var n = g.getContext("2d");
            n.globalCompositeOperation = "source-over";
            n.fillStyle =
                "rgb(" + (a | 0) + "," + (c | 0) + "," + (d | 0) + ")";
            n.fillRect(0, 0, f.width, f.height);
            n.globalCompositeOperation = "multiply";
            n.drawImage(m, f.x, f.y, f.width, f.height, 0, 0, f.width, f.height);
            n.globalCompositeOperation = "destination-atop";
            n.drawImage(m, f.x, f.y, f.width, f.height, 0, 0, f.width, f.height);
            if (h) return g;
            a = new cc.Texture2D;
            a.initWithElement(g);
            a.handleLoadedTexture();
            return a
        } : function (a, c, d, f, g) {
            var h = !1;
            g ? h = !0 : g = document.createElement("canvas");
            var m = this._htmlElementObj;
            f || (f = cc.rect(0, 0, m.width, m.height));
            var n,
                p, m = f.x;
            n = f.y;
            p = f.width;
            f = f.height;
            if (p && f) {
                g.width = p;
                g.height = f;
                var u = g.getContext("2d"),
                    v = cc.textureCache.getTextureColors(this);
                u.globalCompositeOperation = "lighter";
                u.drawImage(v[3], m, n, p, f, 0, 0, p, f);
                0 < a && (u.globalAlpha = a / 255, u.drawImage(v[0], m, n, p, f, 0, 0, p, f));
                0 < c && (u.globalAlpha = c / 255, u.drawImage(v[1], m, n, p, f, 0, 0, p, f));
                0 < d && (u.globalAlpha = d / 255, u.drawImage(v[2], m, n, p, f, 0, 0, p, f));
                if (h) return g;
                a = new cc.Texture2D;
                a.initWithElement(g);
                a.handleLoadedTexture();
                return a
            }
        };
        cc.Texture2D = cc.Class.extend(a);
        cc.Texture2D._generateGrayTexture = function (a, c, d) {
            if (null === a) return null;
            d = d || document.createElement("canvas");
            c = c || cc.rect(0, 0, a.width, a.height);
            d.width = c.width;
            d.height = c.height;
            var f = d.getContext("2d");
            f.drawImage(a, c.x, c.y, c.width, c.height, 0, 0, c.width, c.height);
            a = f.getImageData(0, 0, c.width, c.height);
            c = a.data;
            for (var g = 0, h = c.length; g < h; g += 4) c[g] = c[g + 1] = c[g + 2] = 0.34 * c[g] + 0.5 * c[g + 1] + 0.16 * c[g + 2];
            f.putImageData(a, 0, 0);
            return d
        }
    } else cc._renderType === cc.game.RENDER_TYPE_WEBGL && (cc.assert(cc.isFunction(cc._tmp.WebGLTexture2D),
        cc._LogInfos.MissingFile, "TexturesWebGL.js"), cc._tmp.WebGLTexture2D(), delete cc._tmp.WebGLTexture2D);
    cc.EventHelper.prototype.apply(cc.Texture2D.prototype);
    cc.assert(cc.isFunction(cc._tmp.PrototypeTexture2D), cc._LogInfos.MissingFile, "TexturesPropertyDefine.js");
    cc._tmp.PrototypeTexture2D();
    delete cc._tmp.PrototypeTexture2D
});
cc.textureCache = {
    _textures: {},
    _textureColorsCache: {},
    _textureKeySeq: 0 | 1E3 * Math.random(),
    _loadedTexturesBefore: {},
    _initializingRenderer: function () {
        var a, b = this._loadedTexturesBefore,
            c = this._textures;
        for (a in b) {
            var d = b[a];
            d.handleLoadedTexture();
            c[a] = d
        }
        this._loadedTexturesBefore = {}
    },
    addPVRTCImage: function (a) {
        cc.log(cc._LogInfos.textureCache_addPVRTCImage)
    },
    addETCImage: function (a) {
        cc.log(cc._LogInfos.textureCache_addETCImage)
    },
    description: function () {
        return "<TextureCache | Number of textures = " +
            this._textures.length + ">"
    },
    textureForKey: function (a) {
        cc.log(cc._LogInfos.textureCache_textureForKey);
        return this.getTextureForKey(a)
    },
    getTextureForKey: function (a) {
        return this._textures[a] || this._textures[cc.loader._getAliase(a)]
    },
    getKeyByTexture: function (a) {
        for (var b in this._textures)
            if (this._textures[b] === a) return b;
        return null
    },
    _generalTextureKey: function (a) {
        return "_textureKey_" + a
    },
    getTextureColors: function (a) {
        var b = a._htmlElementObj,
            c = this.getKeyByTexture(b);
        c || (c = b instanceof HTMLImageElement ?
            b.src : this._generalTextureKey(a.__instanceId));
        this._textureColorsCache[c] || (this._textureColorsCache[c] = a._generateTextureCacheForColor());
        return this._textureColorsCache[c]
    },
    addPVRImage: function (a) {
        cc.log(cc._LogInfos.textureCache_addPVRImage)
    },
    removeAllTextures: function () {
        var a = this._textures,
            b;
        for (b in a) a[b] && a[b].releaseTexture();
        this._textures = {}
    },
    removeTexture: function (a) {
        if (a) {
            var b = this._textures,
                c;
            for (c in b) b[c] === a && (b[c].releaseTexture(), delete b[c])
        }
    },
    removeTextureForKey: function (a) {
        if (null !=
            a) {
            var b = this._textures[a];
            b && (b.releaseTexture(), delete this._textures[a])
        }
    },
    cacheImage: function (a, b) {
        if (b instanceof cc.Texture2D) this._textures[a] = b;
        else {
            var c = new cc.Texture2D;
            c.initWithElement(b);
            c.handleLoadedTexture();
            this._textures[a] = c
        }
    },
    addUIImage: function (a, b) {
        cc.assert(a, cc._LogInfos.textureCache_addUIImage_2);
        if (b && this._textures[b]) return this._textures[b];
        var c = new cc.Texture2D;
        c.initWithImage(a);
        null != b ? this._textures[b] = c : cc.log(cc._LogInfos.textureCache_addUIImage);
        return c
    },
    dumpCachedTextureInfo: function () {
        var a =
            0,
            b = 0,
            c = this._textures,
            d;
        for (d in c) {
            var f = c[d];
            a++;
            f.getHtmlElementObj() instanceof HTMLImageElement ? cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo, d, f.getHtmlElementObj().src, f.pixelsWidth, f.pixelsHeight) : cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo_2, d, f.pixelsWidth, f.pixelsHeight);
            b += 4 * f.pixelsWidth * f.pixelsHeight
        }
        c = this._textureColorsCache;
        for (d in c) {
            var f = c[d],
                g;
            for (g in f) {
                var h = f[g];
                a++;
                cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo_2, d, h.width, h.height);
                b += 4 * h.width *
                    h.height
            }
        }
        cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo_3, a, b / 1024, (b / 1048576).toFixed(2))
    },
    _clear: function () {
        this._textures = {};
        this._textureColorsCache = {};
        this._textureKeySeq = 0 | 1E3 * Math.random();
        this._loadedTexturesBefore = {}
    }
};
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
    if (cc._renderType === cc.game.RENDER_TYPE_CANVAS) {
        var a = cc.textureCache;
        a.handleLoadedTexture = function (a) {
            var c = this._textures,
                d = c[a];
            d || (d = c[a] = new cc.Texture2D, d.url = a);
            d.handleLoadedTexture()
        };
        a.addImage = function (a, c, d) {
            cc.assert(a, cc._LogInfos.Texture2D_addImage);
            var f = this._textures,
                g = f[a] || f[cc.loader._getAliase(a)];
            if (g) return g.isLoaded() ? c && c.call(d, g) : g.addEventListener("load", function () {
                c && c.call(d, g)
            }, d), g;
            g = f[a] = new cc.Texture2D;
            g.url = a;
            var h = cc.loader.getBasePath ? cc.loader.getBasePath() : cc.loader.resPath;
            cc.loader.loadImg(cc.path.join(h || "", a), function (g, h) {
                if (g) return c && c.call(d, g);
                cc.loader.cache[a] || (cc.loader.cache[a] = h);
                cc.textureCache.handleLoadedTexture(a);
                var p = f[a];
                c && c.call(d, p)
            });
            return g
        };
        a.addImageAsync = a.addImage;
        a = null
    } else cc._renderType === cc.game.RENDER_TYPE_WEBGL && (cc.assert(cc.isFunction(cc._tmp.WebGLTextureCache), cc._LogInfos.MissingFile, "TexturesWebGL.js"), cc._tmp.WebGLTextureCache(), delete cc._tmp.WebGLTextureCache)
});
cc.TextureAtlas = cc.Class.extend({
    dirty: !1,
    texture: null,
    _indices: null,
    _buffersVBO: null,
    _capacity: 0,
    _quads: null,
    _quadsArrayBuffer: null,
    _quadsWebBuffer: null,
    _quadsReader: null,
    ctor: function (a, b) {
        this._buffersVBO = [];
        cc.isString(a) ? this.initWithFile(a, b) : a instanceof cc.Texture2D && this.initWithTexture(a, b)
    },
    getTotalQuads: function () {
        return this._totalQuads
    },
    getCapacity: function () {
        return this._capacity
    },
    getTexture: function () {
        return this.texture
    },
    setTexture: function (a) {
        this.texture = a
    },
    setDirty: function (a) {
        this.dirty =
            a
    },
    isDirty: function () {
        return this.dirty
    },
    getQuads: function () {
        return this._quads
    },
    setQuads: function (a) {
        this._quads = a
    },
    _copyQuadsToTextureAtlas: function (a, b) {
        if (a)
            for (var c = 0; c < a.length; c++) this._setQuadToArray(a[c], b + c)
    },
    _setQuadToArray: function (a, b) {
        var c = this._quads;
        c[b] ? (c[b].bl = a.bl, c[b].br = a.br, c[b].tl = a.tl, c[b].tr = a.tr) : c[b] = new cc.V3F_C4B_T2F_Quad(a.tl, a.bl, a.tr, a.br, this._quadsArrayBuffer, b * cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT)
    },
    description: function () {
        return "<cc.TextureAtlas | totalQuads =" +
            this._totalQuads + ">"
    },
    _setupIndices: function () {
        if (0 !== this._capacity)
            for (var a = this._indices, b = this._capacity, c = 0; c < b; c++) cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP ? (a[6 * c + 0] = 4 * c + 0, a[6 * c + 1] = 4 * c + 0, a[6 * c + 2] = 4 * c + 2, a[6 * c + 3] = 4 * c + 1, a[6 * c + 4] = 4 * c + 3, a[6 * c + 5] = 4 * c + 3) : (a[6 * c + 0] = 4 * c + 0, a[6 * c + 1] = 4 * c + 1, a[6 * c + 2] = 4 * c + 2, a[6 * c + 3] = 4 * c + 3, a[6 * c + 4] = 4 * c + 2, a[6 * c + 5] = 4 * c + 1)
    },
    _setupVBO: function () {
        var a = cc._renderContext;
        this._buffersVBO[0] = a.createBuffer();
        this._buffersVBO[1] = a.createBuffer();
        this._quadsWebBuffer = a.createBuffer();
        this._mapBuffers()
    },
    _mapBuffers: function () {
        var a = cc._renderContext;
        a.bindBuffer(a.ARRAY_BUFFER, this._quadsWebBuffer);
        a.bufferData(a.ARRAY_BUFFER, this._quadsArrayBuffer, a.DYNAMIC_DRAW);
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this._buffersVBO[1]);
        a.bufferData(a.ELEMENT_ARRAY_BUFFER, this._indices, a.STATIC_DRAW)
    },
    initWithFile: function (a, b) {
        var c = cc.textureCache.addImage(a);
        if (c) return this.initWithTexture(c, b);
        cc.log(cc._LogInfos.TextureAtlas_initWithFile, a);
        return !1
    },
    initWithTexture: function (a, b) {
        cc.assert(a,
            cc._LogInfos.TextureAtlas_initWithTexture);
        this._capacity = b |= 0;
        this._totalQuads = 0;
        this.texture = a;
        this._quads = [];
        this._indices = new Uint16Array(6 * b);
        var c = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;
        this._quadsArrayBuffer = new ArrayBuffer(c * b);
        this._quadsReader = new Uint8Array(this._quadsArrayBuffer);
        if ((!this._quads || !this._indices) && 0 < b) return !1;
        for (var d = this._quads, f = 0; f < b; f++) d[f] = new cc.V3F_C4B_T2F_Quad(null, null, null, null, this._quadsArrayBuffer, f * c);
        this._setupIndices();
        this._setupVBO();
        return this.dirty = !0
    },
    updateQuad: function (a, b) {
        cc.assert(a, cc._LogInfos.TextureAtlas_updateQuad);
        cc.assert(0 <= b && b < this._capacity, cc._LogInfos.TextureAtlas_updateQuad_2);
        this._totalQuads = Math.max(b + 1, this._totalQuads);
        this._setQuadToArray(a, b);
        this.dirty = !0
    },
    insertQuad: function (a, b) {
        cc.assert(b < this._capacity, cc._LogInfos.TextureAtlas_insertQuad_2);
        this._totalQuads++;
        if (this._totalQuads > this._capacity) cc.log(cc._LogInfos.TextureAtlas_insertQuad);
        else {
            var c = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
                d = b * c,
                f = (this._totalQuads -
                    1 - b) * c;
            this._quads[this._totalQuads - 1] = new cc.V3F_C4B_T2F_Quad(null, null, null, null, this._quadsArrayBuffer, (this._totalQuads - 1) * c);
            this._quadsReader.set(this._quadsReader.subarray(d, d + f), d + c);
            this._setQuadToArray(a, b);
            this.dirty = !0
        }
    },
    insertQuads: function (a, b, c) {
        c = c || a.length;
        cc.assert(b + c <= this._capacity, cc._LogInfos.TextureAtlas_insertQuads);
        var d = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;
        this._totalQuads += c;
        if (this._totalQuads > this._capacity) cc.log(cc._LogInfos.TextureAtlas_insertQuad);
        else {
            var f = b *
                d,
                g = (this._totalQuads - 1 - b - c) * d,
                h = this._totalQuads - 1 - c,
                m;
            for (m = 0; m < c; m++) this._quads[h + m] = new cc.V3F_C4B_T2F_Quad(null, null, null, null, this._quadsArrayBuffer, (this._totalQuads - 1) * d);
            this._quadsReader.set(this._quadsReader.subarray(f, f + g), f + d * c);
            for (m = 0; m < c; m++) this._setQuadToArray(a[m], b + m);
            this.dirty = !0
        }
    },
    insertQuadFromIndex: function (a, b) {
        if (a !== b) {
            cc.assert(0 <= b || b < this._totalQuads, cc._LogInfos.TextureAtlas_insertQuadFromIndex);
            cc.assert(0 <= a || a < this._totalQuads, cc._LogInfos.TextureAtlas_insertQuadFromIndex_2);
            var c = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
                d = this._quadsReader,
                f = d.subarray(a * c, c),
                g;
            a > b ? (g = b * c, d.set(d.subarray(g, g + (a - b) * c), g + c), d.set(f, g)) : (g = (a + 1) * c, d.set(d.subarray(g, g + (b - a) * c), g - c), d.set(f, b * c));
            this.dirty = !0
        }
    },
    removeQuadAtIndex: function (a) {
        cc.assert(a < this._totalQuads, cc._LogInfos.TextureAtlas_removeQuadAtIndex);
        var b = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;
        this._totalQuads--;
        this._quads.length = this._totalQuads;
        if (a !== this._totalQuads) {
            var c = (a + 1) * b;
            this._quadsReader.set(this._quadsReader.subarray(c,
                c + (this._totalQuads - a) * b), c - b)
        }
        this.dirty = !0
    },
    removeQuadsAtIndex: function (a, b) {
        cc.assert(a + b <= this._totalQuads, cc._LogInfos.TextureAtlas_removeQuadsAtIndex);
        this._totalQuads -= b;
        if (a !== this._totalQuads) {
            var c = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
                d = (a + b) * c;
            this._quadsReader.set(this._quadsReader.subarray(d, d + (this._totalQuads - a) * c), a * c)
        }
        this.dirty = !0
    },
    removeAllQuads: function () {
        this._totalQuads = this._quads.length = 0
    },
    _setDirty: function (a) {
        this.dirty = a
    },
    resizeCapacity: function (a) {
        if (a === this._capacity) return !0;
        var b = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
            c = this._capacity;
        this._totalQuads = Math.min(this._totalQuads, a);
        var d = this._capacity = 0 | a,
            f = this._totalQuads;
        if (null === this._quads) {
            this._quads = [];
            this._quadsArrayBuffer = new ArrayBuffer(b * d);
            this._quadsReader = new Uint8Array(this._quadsArrayBuffer);
            for (a = 0; a < d; a++) this._quads = new cc.V3F_C4B_T2F_Quad(null, null, null, null, this._quadsArrayBuffer, a * b)
        } else {
            var g, h, m = this._quads;
            if (d > c) {
                g = [];
                h = new ArrayBuffer(b * d);
                for (a = 0; a < f; a++) g[a] = new cc.V3F_C4B_T2F_Quad(m[a].tl,
                    m[a].bl, m[a].tr, m[a].br, h, a * b);
                for (; a < d; a++) g[a] = new cc.V3F_C4B_T2F_Quad(null, null, null, null, h, a * b)
            } else {
                f = Math.max(f, d);
                g = [];
                h = new ArrayBuffer(b * d);
                for (a = 0; a < f; a++) g[a] = new cc.V3F_C4B_T2F_Quad(m[a].tl, m[a].bl, m[a].tr, m[a].br, h, a * b)
            }
            this._quadsReader = new Uint8Array(h);
            this._quads = g;
            this._quadsArrayBuffer = h
        }
        null === this._indices ? this._indices = new Uint16Array(6 * d) : d > c ? (b = new Uint16Array(6 * d), b.set(this._indices, 0), this._indices = b) : this._indices = this._indices.subarray(0, 6 * d);
        this._setupIndices();
        this._mapBuffers();
        return this.dirty = !0
    },
    increaseTotalQuadsWith: function (a) {
        this._totalQuads += a
    },
    moveQuadsFromIndex: function (a, b, c) {
        if (void 0 === c) {
            if (c = b, b = this._totalQuads - a, cc.assert(c + (this._totalQuads - a) <= this._capacity, cc._LogInfos.TextureAtlas_moveQuadsFromIndex), 0 === b) return
        } else if (cc.assert(c + b <= this._totalQuads, cc._LogInfos.TextureAtlas_moveQuadsFromIndex_2), cc.assert(a < this._totalQuads, cc._LogInfos.TextureAtlas_moveQuadsFromIndex_3), a === c) return;
        var d = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
            f = a * d,
            g = b * d,
            h = this._quadsReader,
            m = h.subarray(f, f + g),
            n = c * d;
        c < a ? (b = c * d, h.set(h.subarray(b, b + (a - c) * d), b + g)) : (b = (a + b) * d, h.set(h.subarray(b, b + (c - a) * d), f));
        h.set(m, n);
        this.dirty = !0
    },
    fillWithEmptyQuadsFromIndex: function (a, b) {
        for (var c = b * cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT, d = new Uint8Array(this._quadsArrayBuffer, a * cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT, c), f = 0; f < c; f++) d[f] = 0
    },
    drawQuads: function () {
        this.drawNumberOfQuads(this._totalQuads, 0)
    },
    _releaseBuffer: function () {
        var a = cc._renderContext;
        this._buffersVBO && (this._buffersVBO[0] && a.deleteBuffer(this._buffersVBO[0]),
            this._buffersVBO[1] && a.deleteBuffer(this._buffersVBO[1]));
        this._quadsWebBuffer && a.deleteBuffer(this._quadsWebBuffer)
    }
});
_p = cc.TextureAtlas.prototype;
cc.defineGetterSetter(_p, "totalQuads", _p.getTotalQuads);
cc.defineGetterSetter(_p, "capacity", _p.getCapacity);
cc.defineGetterSetter(_p, "quads", _p.getQuads, _p.setQuads);
cc.TextureAtlas.create = function (a, b) {
    return new cc.TextureAtlas(a, b)
};
cc.TextureAtlas.createWithTexture = cc.TextureAtlas.create;
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
    cc._renderType === cc.game.RENDER_TYPE_WEBGL && (cc.assert(cc.isFunction(cc._tmp.WebGLTextureAtlas), cc._LogInfos.MissingFile, "TexturesWebGL.js"), cc._tmp.WebGLTextureAtlas(), delete cc._tmp.WebGLTextureAtlas)
});
cc.assert(cc.isFunction(cc._tmp.PrototypeTextureAtlas), cc._LogInfos.MissingFile, "TexturesPropertyDefine.js");
cc._tmp.PrototypeTextureAtlas();
delete cc._tmp.PrototypeTextureAtlas;
cc.Scene = cc.Node.extend({
    _className: "Scene",
    ctor: function () {
        cc.Node.prototype.ctor.call(this);
        this._ignoreAnchorPointForPosition = !0;
        this.setAnchorPoint(0.5, 0.5);
        this.setContentSize(cc.director.getWinSize())
    }
});
cc.Scene.create = function () {
    return new cc.Scene
};
cc.LoaderScene = cc.Scene.extend({
    _interval: null,
    _label: null,
    _logo: null,
    _className: "LoaderScene",
    cb: null,
    target: null,
    init: function () {
        var a = this,
            b = 200,
            c = a._bgLayer = new cc.LayerColor(cc.color(32, 32, 32, 255));
        a.addChild(c, 0);
        var d = 24,
            f = -b / 2 + 100;
        cc._loaderImage && (cc.loader.loadImg(cc._loaderImage, {
            isCrossOrigin: !1
        }, function (c, d) {
            b = d.height;
            a._initStage(d, cc.visibleRect.center)
        }), d = 14, f = -b / 2 - 10);
        d = a._label = new cc.LabelTTF("Loading... 0%", "Arial", d);
        d.setPosition(cc.pAdd(cc.visibleRect.center, cc.p(0, f)));
        d.setColor(cc.color(180, 180, 180));
        c.addChild(this._label, 10);
        return !0
    },
    _initStage: function (a, b) {
        var c = this._texture2d = new cc.Texture2D;
        c.initWithElement(a);
        c.handleLoadedTexture();
        c = this._logo = new cc.Sprite(c);
        c.setScale(cc.contentScaleFactor());
        c.x = b.x;
        c.y = b.y;
        this._bgLayer.addChild(c, 10)
    },
    onEnter: function () {
        cc.Node.prototype.onEnter.call(this);
        this.schedule(this._startLoading, 0.3)
    },
    onExit: function () {
        cc.Node.prototype.onExit.call(this);
        this._label.setString("Loading... 0%")
    },
    initWithResources: function (a,
        b, c) {
        cc.isString(a) && (a = [a]);
        this.resources = a || [];
        this.cb = b;
        this.target = c
    },
    _startLoading: function () {
        var a = this;
        a.unschedule(a._startLoading);
        cc.loader.load(a.resources, function (b, c, d) {
            b = Math.min(100 * (d / c) | 0, 100);
            a._label.setString("Loading... " + b + "%")
        }, function () {
            a.cb && a.cb.call(a.target)
        })
    },
    _updateTransform: function () {
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
        this._bgLayer._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
        this._label._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
        this._logo && this._logo._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    }
});
cc.LoaderScene.preload = function (a, b, c) {
    var d = cc;
    d.loaderScene || (d.loaderScene = new cc.LoaderScene, d.loaderScene.init(), cc.eventManager.addCustomListener(cc.Director.EVENT_PROJECTION_CHANGED, function () {
        d.loaderScene._updateTransform()
    }));
    d.loaderScene.initWithResources(a, b, c);
    cc.director.runScene(d.loaderScene);
    return d.loaderScene
};
cc.Layer = cc.Node.extend({
    _className: "Layer",
    ctor: function () {
        cc.Node.prototype.ctor.call(this);
        this._ignoreAnchorPointForPosition = !0;
        this.setAnchorPoint(0.5, 0.5);
        this.setContentSize(cc.winSize);
        this._cascadeOpacityEnabled = this._cascadeColorEnabled = !1
    },
    bake: function () {
        this._renderCmd.bake()
    },
    unbake: function () {
        this._renderCmd.unbake()
    },
    isBaked: function () {
        return this._renderCmd._isBaked
    },
    visit: function (a) {
        var b = this._renderCmd,
            c = a ? a._renderCmd : null;
        if (this._visible) {
            a = cc.renderer;
            b.visit(c);
            if (b._isBaked) a.pushRenderCommand(b),
                b._bakeSprite.visit(this);
            else {
                var d = this._children,
                    f = d.length,
                    g;
                if (0 < f) {
                    this._reorderChildDirty && this.sortAllChildren();
                    for (c = 0; c < f; c++)
                        if (g = d[c], 0 > g._localZOrder) g.visit(this);
                        else break;
                    for (a.pushRenderCommand(b); c < f; c++) d[c].visit(this)
                } else a.pushRenderCommand(b)
            }
            b._dirtyFlag = 0
        } else b._propagateFlagsDown(c)
    },
    addChild: function (a, b, c) {
        cc.Node.prototype.addChild.call(this, a, b, c);
        this._renderCmd._bakeForAddChild(a)
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new cc.Layer.CanvasRenderCmd(this) :
            new cc.Layer.WebGLRenderCmd(this)
    }
});
cc.Layer.create = function () {
    return new cc.Layer
};
cc.LayerColor = cc.Layer.extend({
    _blendFunc: null,
    _className: "LayerColor",
    getBlendFunc: function () {
        return this._blendFunc
    },
    changeWidthAndHeight: function (a, b) {
        this.width = a;
        this.height = b
    },
    changeWidth: function (a) {
        this.width = a
    },
    changeHeight: function (a) {
        this.height = a
    },
    setOpacityModifyRGB: function (a) {},
    isOpacityModifyRGB: function () {
        return !1
    },
    ctor: function (a, b, c) {
        cc.Layer.prototype.ctor.call(this);
        this._blendFunc = cc.BlendFunc._alphaNonPremultiplied();
        cc.LayerColor.prototype.init.call(this, a, b, c)
    },
    init: function (a,
        b, c) {
        var d = cc.director.getWinSize();
        a = a || cc.color(0, 0, 0, 255);
        b = void 0 === b ? d.width : b;
        c = void 0 === c ? d.height : c;
        d = this._realColor;
        d.r = a.r;
        d.g = a.g;
        d.b = a.b;
        this._realOpacity = a.a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty | cc.Node._dirtyFlags.opacityDirty);
        cc.LayerColor.prototype.setContentSize.call(this, b, c);
        return !0
    },
    visit: function (a) {
        var b = this._renderCmd,
            c = a ? a._renderCmd : null;
        if (this._visible) {
            a = cc.renderer;
            b.visit(c);
            if (b._isBaked) a.pushRenderCommand(b._bakeRenderCmd), b._bakeSprite._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),
                b._bakeSprite.visit(this);
            else {
                var d = this._children,
                    f = d.length;
                if (0 < f) {
                    this._reorderChildDirty && this.sortAllChildren();
                    for (c = 0; c < f; c++)
                        if (child = d[c], 0 > child._localZOrder) child.visit(this);
                        else break;
                    for (a.pushRenderCommand(b); c < f; c++) d[c].visit(this)
                } else a.pushRenderCommand(b)
            }
            b._dirtyFlag = 0
        } else b._propagateFlagsDown(c)
    },
    setBlendFunc: function (a, b) {
        var c = this._blendFunc;
        void 0 === b ? (c.src = a.src, c.dst = a.dst) : (c.src = a, c.dst = b);
        this._renderCmd.updateBlendFunc(c)
    },
    _createRenderCmd: function () {
        return cc._renderType ===
            cc.game.RENDER_TYPE_CANVAS ? new cc.LayerColor.CanvasRenderCmd(this) : new cc.LayerColor.WebGLRenderCmd(this)
    }
});
cc.LayerColor.create = function (a, b, c) {
    return new cc.LayerColor(a, b, c)
};
(function () {
    var a = cc.LayerColor.prototype;
    cc.defineGetterSetter(a, "width", a._getWidth, a._setWidth);
    cc.defineGetterSetter(a, "height", a._getHeight, a._setHeight)
})();
cc.LayerGradient = cc.LayerColor.extend({
    _endColor: null,
    _startOpacity: 255,
    _endOpacity: 255,
    _alongVector: null,
    _compressedInterpolation: !1,
    _className: "LayerGradient",
    _colorStops: [],
    ctor: function (a, b, c, d) {
        cc.LayerColor.prototype.ctor.call(this);
        this._endColor = cc.color(0, 0, 0, 255);
        this._alongVector = cc.p(0, -1);
        this._endOpacity = this._startOpacity = 255;
        d && d instanceof Array ? (this._colorStops = d, d.splice(0, 0, {
            p: 0,
            color: a || cc.color.BLACK
        }), d.push({
            p: 1,
            color: b || cc.color.BLACK
        })) : this._colorStops = [{
                p: 0,
                color: a || cc.color.BLACK
            },
            {
                p: 1,
                color: b || cc.color.BLACK
            }
        ];
        cc.LayerGradient.prototype.init.call(this, a, b, c, d)
    },
    init: function (a, b, c, d) {
        a = a || cc.color(0, 0, 0, 255);
        b = b || cc.color(0, 0, 0, 255);
        c = c || cc.p(0, -1);
        d = this._endColor;
        this._startOpacity = a.a;
        d.r = b.r;
        d.g = b.g;
        d.b = b.b;
        this._endOpacity = b.a;
        this._alongVector = c;
        this._compressedInterpolation = !0;
        cc.LayerColor.prototype.init.call(this, cc.color(a.r, a.g, a.b, 255));
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty | cc.Node._dirtyFlags.opacityDirty | cc.Node._dirtyFlags.gradientDirty);
        return !0
    },
    setContentSize: function (a, b) {
        cc.LayerColor.prototype.setContentSize.call(this, a, b);
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)
    },
    _setWidth: function (a) {
        cc.LayerColor.prototype._setWidth.call(this, a);
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)
    },
    _setHeight: function (a) {
        cc.LayerColor.prototype._setHeight.call(this, a);
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)
    },
    getStartColor: function () {
        return cc.color(this._realColor)
    },
    setStartColor: function (a) {
        this.color =
            a;
        var b = this._colorStops;
        b && 0 < b.length && (b = b[0].color, b.r = a.r, b.g = a.g, b.b = a.b)
    },
    setEndColor: function (a) {
        var b = this._endColor;
        b.r = a.r;
        b.g = a.g;
        b.b = a.b;
        if ((b = this._colorStops) && 0 < b.length) b = b[b.length - 1].color, b.r = a.r, b.g = a.g, b.b = a.b;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)
    },
    getEndColor: function () {
        return cc.color(this._endColor)
    },
    setStartOpacity: function (a) {
        this._startOpacity = a;
        var b = this._colorStops;
        b && 0 < b.length && (b[0].color.a = a);
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)
    },
    getStartOpacity: function () {
        return this._startOpacity
    },
    setEndOpacity: function (a) {
        this._endOpacity = a;
        var b = this._colorStops;
        b && 0 < b.length && (b[b.length - 1].color.a = a);
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)
    },
    getEndOpacity: function () {
        return this._endOpacity
    },
    setVector: function (a) {
        this._alongVector.x = a.x;
        this._alongVector.y = a.y;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)
    },
    getVector: function () {
        return cc.p(this._alongVector.x, this._alongVector.y)
    },
    isCompressedInterpolation: function () {
        return this._compressedInterpolation
    },
    setCompressedInterpolation: function (a) {
        this._compressedInterpolation = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)
    },
    getColorStops: function () {
        return this._colorStops
    },
    setColorStops: function (a) {
        this._colorStops = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty | cc.Node._dirtyFlags.opacityDirty | cc.Node._dirtyFlags.gradientDirty)
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new cc.LayerGradient.CanvasRenderCmd(this) : new cc.LayerGradient.WebGLRenderCmd(this)
    }
});
cc.LayerGradient.create = function (a, b, c, d) {
    return new cc.LayerGradient(a, b, c, d)
};
(function () {
    var a = cc.LayerGradient.prototype;
    cc.defineGetterSetter(a, "startColor", a.getStartColor, a.setStartColor);
    cc.defineGetterSetter(a, "endColor", a.getEndColor, a.setEndColor);
    cc.defineGetterSetter(a, "startOpacity", a.getStartOpacity, a.setStartOpacity);
    cc.defineGetterSetter(a, "endOpacity", a.getEndOpacity, a.setEndOpacity);
    cc.defineGetterSetter(a, "vector", a.getVector, a.setVector);
    cc.defineGetterSetter(a, "colorStops", a.getColorStops, a.setColorStops)
})();
cc.LayerMultiplex = cc.Layer.extend({
    _enabledLayer: 0,
    _layers: null,
    _className: "LayerMultiplex",
    ctor: function (a) {
        cc.Layer.prototype.ctor.call(this);
        a instanceof Array ? cc.LayerMultiplex.prototype.initWithLayers.call(this, a) : cc.LayerMultiplex.prototype.initWithLayers.call(this, Array.prototype.slice.call(arguments))
    },
    initWithLayers: function (a) {
        0 < a.length && null == a[a.length - 1] && cc.log(cc._LogInfos.LayerMultiplex_initWithLayers);
        this._layers = a;
        this._enabledLayer = 0;
        this.addChild(this._layers[this._enabledLayer]);
        return !0
    },
    switchTo: function (a) {
        a >= this._layers.length ? cc.log(cc._LogInfos.LayerMultiplex_switchTo) : (this.removeChild(this._layers[this._enabledLayer], !0), this._enabledLayer = a, this.addChild(this._layers[a]))
    },
    switchToAndReleaseMe: function (a) {
        a >= this._layers.length ? cc.log(cc._LogInfos.LayerMultiplex_switchToAndReleaseMe) : (this.removeChild(this._layers[this._enabledLayer], !0), this._layers[this._enabledLayer] = null, this._enabledLayer = a, this.addChild(this._layers[a]))
    },
    addLayer: function (a) {
        a ? this._layers.push(a) :
            cc.log(cc._LogInfos.LayerMultiplex_addLayer)
    }
});
cc.LayerMultiplex.create = function () {
    return new cc.LayerMultiplex(Array.prototype.slice.call(arguments))
};
(function () {
    cc.Layer.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this._isBaked = !1;
        this._bakeSprite = null;
        this._canUseDirtyRegion = !0;
        this._updateCache = 2
    };
    var a = cc.Layer.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    a.constructor = cc.Layer.CanvasRenderCmd;
    a._layerCmdCtor = cc.Layer.CanvasRenderCmd;
    a._setCacheDirty = function (a) {
        a && 0 === this._updateCache && (this._updateCache = 2);
        !1 === this._cacheDirty && (this._cacheDirty = !0, (a = this._cachedParent) && a !== this && a._setNodeDirtyForCache &&
            a._setNodeDirtyForCache())
    };
    a.updateStatus = function () {
        var a = cc.Node._dirtyFlags;
        this._dirtyFlag & a.orderDirty && (this._cacheDirty = !0, 0 === this._updateCache && (this._updateCache = 2), this._dirtyFlag &= ~a.orderDirty);
        this.originUpdateStatus()
    };
    a._syncStatus = function (a) {
        var c = cc.Node._dirtyFlags,
            d = this._dirtyFlag;
        if (this._isBaked || d & c.orderDirty) this._cacheDirty = !0, 0 === this._updateCache && (this._updateCache = 2), this._dirtyFlag &= ~c.orderDirty;
        this._originSyncStatus(a)
    };
    a.transform = function (a, c) {
        this._worldTransform ||
            (this._worldTransform = {
                a: 1,
                b: 0,
                c: 0,
                d: 1,
                tx: 0,
                ty: 0
            });
        var d = this._worldTransform,
            f = d.a,
            g = d.b,
            h = d.c,
            m = d.d;
        this.originTransform(a, c);
        if ((d.a !== f || d.b !== g || d.c !== h || d.d !== m) && 0 === this._updateCache) this._updateCache = 2
    };
    a.bake = function () {
        if (!this._isBaked) {
            this._needDraw = !0;
            this._isBaked = this._cacheDirty = cc.renderer.childrenOrderDirty = !0;
            0 === this._updateCache && (this._updateCache = 2);
            for (var a = this._node._children, c = 0, d = a.length; c < d; c++) a[c]._renderCmd._setCachedParent(this);
            this._bakeSprite || (this._bakeSprite =
                new cc.BakeSprite, this._bakeSprite.setAnchorPoint(0, 0))
        }
    };
    a.unbake = function () {
        if (this._isBaked) {
            cc.renderer.childrenOrderDirty = !0;
            this._isBaked = this._needDraw = !1;
            this._cacheDirty = !0;
            0 === this._updateCache && (this._updateCache = 2);
            for (var a = this._node._children, c = 0, d = a.length; c < d; c++) a[c]._renderCmd._setCachedParent(null)
        }
    };
    a.isBaked = function () {
        return this._isBaked
    };
    a.rendering = function () {
        if (this._cacheDirty) {
            var a = this._node,
                c = a._children,
                d = this._bakeSprite;
            this.transform(this.getParentRenderCmd(), !0);
            var f = this._getBoundingBoxForBake();
            f.width = 0 | f.width + 0.5;
            f.height = 0 | f.height + 0.5;
            var g = d.getCacheContext(),
                h = g.getContext();
            d.setPosition(f.x, f.y);
            if (0 < this._updateCache) {
                d.resetCanvasSize(f.width, f.height);
                g.setOffset(0 - f.x, h.canvas.height - f.height + f.y);
                a.sortAllChildren();
                cc.renderer._turnToCacheMode(this.__instanceId);
                a = 0;
                for (f = c.length; a < f; a++) c[a].visit(this);
                cc.renderer._renderingToCacheCanvas(g, this.__instanceId);
                d.transform();
                this._updateCache--
            }
            this._cacheDirty = !1
        }
    };
    a._bakeForAddChild = function (a) {
        a._parent ===
            this._node && this._isBaked && a._renderCmd._setCachedParent(this)
    };
    a._getBoundingBoxForBake = function () {
        var a = null,
            c = this._node;
        if (!c._children || 0 === c._children.length) return cc.rect(0, 0, 10, 10);
        for (var d = c.getNodeToWorldTransform(), c = c._children, f = 0, g = c.length; f < g; f++) {
            var h = c[f];
            h && h._visible && (a ? (h = h._getBoundingBoxToCurrentNode(d)) && (a = cc.rectUnion(a, h)) : a = h._getBoundingBoxToCurrentNode(d))
        }
        return a
    }
})();
(function () {
    cc.LayerColor.CanvasRenderCmd = function (a) {
        this._layerCmdCtor(a);
        this._needDraw = !0;
        this._blendFuncStr = "source-over";
        this._bakeRenderCmd = new cc.CustomRenderCmd(this, this._bakeRendering)
    };
    var a = cc.LayerColor.CanvasRenderCmd.prototype = Object.create(cc.Layer.CanvasRenderCmd.prototype);
    a.constructor = cc.LayerColor.CanvasRenderCmd;
    a.unbake = function () {
        cc.Layer.CanvasRenderCmd.prototype.unbake.call(this);
        this._needDraw = !0
    };
    a.rendering = function (a, c, d) {
        a = a || cc._renderContext;
        var f = a.getContext(),
            g = this._node,
            h = this._displayedColor,
            m = this._displayedOpacity / 255,
            n = g._contentSize.width,
            g = g._contentSize.height;
        0 !== m && (a.setCompositeOperation(this._blendFuncStr), a.setGlobalAlpha(m), a.setFillStyle("rgba(" + (0 | h.r) + "," + (0 | h.g) + "," + (0 | h.b) + ", 1)"), a.setTransform(this._worldTransform, c, d), f.fillRect(0, 0, n, -g), cc.g_NumberOfDraws++)
    };
    a.updateBlendFunc = function (a) {
        this._blendFuncStr = cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc(a)
    };
    a._updateSquareVertices = a._updateSquareVerticesWidth = a._updateSquareVerticesHeight =
        function () {};
    a._bakeRendering = function () {
        if (this._cacheDirty) {
            var a = this._node,
                c = this._bakeSprite,
                d = a._children,
                f, g = d.length;
            this.transform(this.getParentRenderCmd(), !0);
            f = this._getBoundingBoxForBake();
            f.width = 0 | f.width + 0.5;
            f.height = 0 | f.height + 0.5;
            var h = c.getCacheContext(),
                m = h.getContext();
            c.setPosition(f.x, f.y);
            if (0 < this._updateCache) {
                m.fillStyle = h._currentFillStyle;
                c.resetCanvasSize(f.width, f.height);
                h.setOffset(0 - f.x, m.canvas.height - f.height + f.y);
                cc.renderer._turnToCacheMode(this.__instanceId);
                if (0 < g) {
                    a.sortAllChildren();
                    for (f = 0; f < g; f++)
                        if (m = d[f], 0 > m._localZOrder) m.visit(a);
                        else break;
                    for (cc.renderer.pushRenderCommand(this); f < g; f++) d[f].visit(a)
                } else cc.renderer.pushRenderCommand(this);
                cc.renderer._renderingToCacheCanvas(h, this.__instanceId);
                c.transform();
                this._updateCache--
            }
            this._cacheDirty = !1
        }
    };
    a._getBoundingBoxForBake = function () {
        var a = this._node,
            c = cc.rect(0, 0, a._contentSize.width, a._contentSize.height),
            d = a.getNodeToWorldTransform(),
            c = cc.rectApplyAffineTransform(c, a.getNodeToWorldTransform());
        if (!a._children || 0 === a._children.length) return c;
        for (var a = a._children, f = 0; f < a.length; f++) {
            var g = a[f];
            g && g._visible && (g = g._getBoundingBoxToCurrentNode(d), c = cc.rectUnion(c, g))
        }
        return c
    }
})();
(function () {
    cc.LayerGradient.CanvasRenderCmd = function (a) {
        cc.LayerColor.CanvasRenderCmd.call(this, a);
        this._needDraw = !0;
        this._startPoint = cc.p(0, 0);
        this._endPoint = cc.p(0, 0);
        this._endStopStr = this._startStopStr = null
    };
    var a = cc.LayerGradient.CanvasRenderCmd.prototype = Object.create(cc.LayerColor.CanvasRenderCmd.prototype);
    a.constructor = cc.LayerGradient.CanvasRenderCmd;
    a.rendering = function (a, c, d) {
        a = a || cc._renderContext;
        var f = a.getContext(),
            g = this._node,
            h = this._displayedOpacity / 255;
        if (0 !== h) {
            var m = g._contentSize.width,
                n = g._contentSize.height;
            a.setCompositeOperation(this._blendFuncStr);
            a.setGlobalAlpha(h);
            h = f.createLinearGradient(this._startPoint.x, this._startPoint.y, this._endPoint.x, this._endPoint.y);
            if (g._colorStops)
                for (var p = 0; p < g._colorStops.length; p++) h.addColorStop(g._colorStops[p].p, this._colorStopsStr[p]);
            else h.addColorStop(0, this._startStopStr), h.addColorStop(1, this._endStopStr);
            a.setFillStyle(h);
            a.setTransform(this._worldTransform, c, d);
            f.fillRect(0, 0, m, -n);
            cc.g_NumberOfDraws++
        }
    };
    a.updateStatus = function () {
        var a =
            cc.Node._dirtyFlags;
        this._dirtyFlag & a.gradientDirty && (this._dirtyFlag |= a.colorDirty, this._dirtyFlag &= ~a.gradientDirty);
        this.originUpdateStatus()
    };
    a._syncStatus = function (a) {
        var c = cc.Node._dirtyFlags;
        this._dirtyFlag & c.gradientDirty && (this._dirtyFlag |= c.colorDirty, this._dirtyFlag &= ~c.gradientDirty);
        this._originSyncStatus(a)
    };
    a._updateColor = function () {
        var a = this._node,
            c = a._contentSize,
            d = 0.5 * c.width,
            c = 0.5 * c.height,
            f = cc.pAngleSigned(cc.p(0, -1), a._alongVector),
            f = cc.pRotateByAngle(cc.p(0, -1), cc.p(0, 0), f),
            g = Math.min(Math.abs(1 / f.x), Math.abs(1 / f.y));
        this._startPoint.x = d * -f.x * g + d;
        this._startPoint.y = c * f.y * g - c;
        this._endPoint.x = d * f.x * g + d;
        this._endPoint.y = c * -f.y * g - c;
        d = this._displayedColor;
        c = a._endColor;
        f = a._startOpacity / 255;
        g = a._endOpacity / 255;
        this._startStopStr = "rgba(" + Math.round(d.r) + "," + Math.round(d.g) + "," + Math.round(d.b) + "," + f.toFixed(4) + ")";
        this._endStopStr = "rgba(" + Math.round(c.r) + "," + Math.round(c.g) + "," + Math.round(c.b) + "," + g.toFixed(4) + ")";
        if (a._colorStops) {
            this._endOpacity = this._startOpacity = 0;
            this._colorStopsStr = [];
            for (d = 0; d < a._colorStops.length; d++) c = a._colorStops[d].color, f = null == c.a ? 1 : c.a / 255, this._colorStopsStr.push("rgba(" + Math.round(c.r) + "," + Math.round(c.g) + "," + Math.round(c.b) + "," + f.toFixed(4) + ")")
        }
    }
})();
(function () {
    cc.Layer.WebGLRenderCmd = function (a) {
        this._rootCtor(a);
        this._isBaked = !1
    };
    var a = cc.Layer.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
    a.constructor = cc.Layer.WebGLRenderCmd;
    a._layerCmdCtor = cc.Layer.WebGLRenderCmd;
    a.bake = function () {};
    a.unbake = function () {};
    a._bakeForAddChild = function () {}
})();
(function () {
    cc.LayerColor.WebGLRenderCmd = function (a) {
        this._layerCmdCtor(a);
        this._needDraw = !0;
        this._matrix = null;
        this.initData(4);
        this._color = new Uint32Array(1);
        this._vertexBuffer = null;
        this._shaderProgram = cc.shaderCache.programForKey(cc.SHADER_POSITION_COLOR)
    };
    var a = cc.LayerColor.WebGLRenderCmd.prototype = Object.create(cc.Layer.WebGLRenderCmd.prototype);
    a.constructor = cc.LayerColor.WebGLRenderCmd;
    a.initData = function (a) {
        this._data = new ArrayBuffer(16 * a);
        this._positionView = new Float32Array(this._data);
        this._colorView =
            new Uint32Array(this._data);
        this._dataDirty = !0
    };
    a.transform = function (a, c) {
        this.originTransform(a, c);
        var d = this._node,
            f = d._contentSize.width,
            g = d._contentSize.height,
            h = this._positionView;
        h[4] = f;
        h[9] = g;
        h[12] = f;
        h[13] = g;
        h[2].z = h[6] = h[10] = h[14] = d._vertexZ;
        this._dataDirty = !0
    };
    a._updateColor = function () {
        var a = this._displayedColor;
        this._color[0] = this._displayedOpacity << 24 | a.b << 16 | a.g << 8 | a.r;
        for (var a = this._colorView, c = 0; 4 > c; c++) a[4 * c + 3] = this._color[0];
        this._dataDirty = !0
    };
    a.rendering = function (a) {
        a = a || cc._renderContext;
        var c = this._node;
        this._matrix || (this._matrix = new cc.math.Matrix4, this._matrix.identity());
        var d = this._worldTransform;
        this._matrix.mat[0] = d.a;
        this._matrix.mat[4] = d.c;
        this._matrix.mat[12] = d.tx;
        this._matrix.mat[1] = d.b;
        this._matrix.mat[5] = d.d;
        this._matrix.mat[13] = d.ty;
        this._dataDirty && (this._vertexBuffer || (this._vertexBuffer = a.createBuffer()), a.bindBuffer(a.ARRAY_BUFFER, this._vertexBuffer), a.bufferData(a.ARRAY_BUFFER, this._data, a.DYNAMIC_DRAW), this._dataDirty = !1);
        this._shaderProgram.use();
        this._shaderProgram._setUniformForMVPMatrixWithMat4(this._matrix);
        cc.glBlendFunc(c._blendFunc.src, c._blendFunc.dst);
        a.bindBuffer(a.ARRAY_BUFFER, this._vertexBuffer);
        a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
        a.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR);
        a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 3, a.FLOAT, !1, 16, 0);
        a.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR, 4, a.UNSIGNED_BYTE, !0, 16, 12);
        a.drawArrays(a.TRIANGLE_STRIP, 0, 4)
    };
    a.updateBlendFunc = function (a) {}
})();
(function () {
    cc.LayerGradient.WebGLRenderCmd = function (a) {
        cc.LayerColor.WebGLRenderCmd.call(this, a);
        this._needDraw = !0;
        this._clipRect = new cc.Rect;
        this._clippingRectDirty = !1
    };
    var a = cc.LayerGradient.WebGLRenderCmd.prototype = Object.create(cc.LayerColor.WebGLRenderCmd.prototype);
    a.constructor = cc.LayerGradient.WebGLRenderCmd;
    a.updateStatus = function () {
        var a = cc.Node._dirtyFlags;
        this._dirtyFlag & a.gradientDirty && (this._dirtyFlag |= a.colorDirty, this._updateVertex(), this._dirtyFlag &= ~a.gradientDirty);
        this.originUpdateStatus()
    };
    a._syncStatus = function (a) {
        var c = cc.Node._dirtyFlags;
        this._dirtyFlag & c.gradientDirty && (this._dirtyFlag |= c.colorDirty, this._updateVertex(), this._dirtyFlag &= ~c.gradientDirty);
        this._originSyncStatus(a)
    };
    a.transform = function (a, c) {
        this.originTransform(a, c);
        this._updateVertex()
    };
    a._updateVertex = function () {
        var a = this._node,
            c = a._colorStops;
        if (c && !(2 > c.length)) {
            this._clippingRectDirty = !0;
            var d, f = c.length,
                g = 2 * f,
                h = a._contentSize;
            this._positionView.length / 4 < g && this.initData(g);
            var m = Math.PI + cc.pAngleSigned(cc.p(0,
                    -1), a._alongVector),
                g = cc.p(h.width / 2, h.height / 2);
            d = Math.round(cc.radiansToDegrees(m));
            var n = cc.affineTransformMake(1, 0, 0, 1, g.x, g.y),
                n = cc.affineTransformRotate(n, m),
                p;
            90 > d ? (p = cc.p(-g.x, g.y), d = cc.p(g.x, g.y)) : 180 > d ? (p = cc.p(g.x, g.y), d = cc.p(g.x, -g.y)) : 270 > d ? (p = cc.p(g.x, -g.y), d = cc.p(-g.x, -g.y)) : (p = cc.p(-g.x, -g.y), d = cc.p(-g.x, g.y));
            var u = Math.sin(m),
                m = Math.cos(m);
            p = Math.abs((p.x * m - p.y * u) / g.x);
            d = Math.abs((d.x * u + d.y * m) / g.y);
            n = cc.affineTransformScale(n, p, d);
            u = this._positionView;
            for (d = 0; d < f; d++) {
                p = c[d].p * h.height;
                var v = cc.pointApplyAffineTransform(-g.x, p - g.y, n),
                    m = 8 * d;
                u[m] = v.x;
                u[m + 1] = v.y;
                u[m + 2] = a._vertexZ;
                p = cc.pointApplyAffineTransform(h.width - g.x, p - g.y, n);
                m += 4;
                u[m] = p.x;
                u[m + 1] = p.y;
                u[m + 2] = a._vertexZ
            }
            this._dataDirty = !0
        }
    };
    a._updateColor = function () {
        var a = this._node._colorStops;
        if (a && !(2 > a.length)) {
            var c = a.length,
                d, f = this._colorView,
                g = this._displayedOpacity / 255;
            for (i = 0; i < c; i++) d = a[i].color, this._color[0] = d.a * g << 24 | d.b << 16 | d.g << 8 | d.r, d = 8 * i, f[d + 3] = this._color[0], d += 4, f[d + 3] = this._color[0];
            this._dataDirty = !0
        }
    };
    a.rendering =
        function (a) {
            a = a || cc._renderContext;
            var c = this._node;
            this._matrix || (this._matrix = new cc.math.Matrix4, this._matrix.identity());
            var d = this._getClippingRect();
            a.enable(a.SCISSOR_TEST);
            cc.view.setScissorInPoints(d.x, d.y, d.width, d.height);
            d = this._worldTransform;
            this._matrix.mat[0] = d.a;
            this._matrix.mat[4] = d.c;
            this._matrix.mat[12] = d.tx;
            this._matrix.mat[1] = d.b;
            this._matrix.mat[5] = d.d;
            this._matrix.mat[13] = d.ty;
            this._dataDirty && (this._vertexBuffer || (this._vertexBuffer = gl.createBuffer()), gl.bindBuffer(gl.ARRAY_BUFFER,
                this._vertexBuffer), gl.bufferData(gl.ARRAY_BUFFER, this._data, gl.DYNAMIC_DRAW), this._dataDirty = !1);
            this._shaderProgram.use();
            this._shaderProgram._setUniformForMVPMatrixWithMat4(this._matrix);
            cc.glBlendFunc(c._blendFunc.src, c._blendFunc.dst);
            gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexBuffer);
            gl.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
            gl.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR);
            gl.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 3, gl.FLOAT, !1, 16, 0);
            gl.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR,
                4, gl.UNSIGNED_BYTE, !0, 16, 12);
            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
            a.disable(a.SCISSOR_TEST)
        };
    a._getClippingRect = function () {
        if (this._clippingRectDirty) {
            var a = this._node,
                c = cc.rect(0, 0, a._contentSize.width, a._contentSize.height),
                a = a.getNodeToWorldTransform();
            this._clipRect = cc._rectApplyAffineTransformIn(c, a)
        }
        return this._clipRect
    }
})();
cc._tmp.PrototypeSprite = function () {
    var a = cc.Sprite.prototype;
    cc.defineGetterSetter(a, "opacityModifyRGB", a.isOpacityModifyRGB, a.setOpacityModifyRGB);
    cc.defineGetterSetter(a, "opacity", a.getOpacity, a.setOpacity);
    cc.defineGetterSetter(a, "color", a.getColor, a.setColor);
    cc.defineGetterSetter(a, "flippedX", a.isFlippedX, a.setFlippedX);
    cc.defineGetterSetter(a, "flippedY", a.isFlippedY, a.setFlippedY);
    cc.defineGetterSetter(a, "offsetX", a._getOffsetX);
    cc.defineGetterSetter(a, "offsetY", a._getOffsetY);
    cc.defineGetterSetter(a,
        "texture", a.getTexture, a.setTexture);
    cc.defineGetterSetter(a, "textureRectRotated", a.isTextureRectRotated);
    cc.defineGetterSetter(a, "batchNode", a.getBatchNode, a.setBatchNode);
    cc.defineGetterSetter(a, "quad", a.getQuad)
};
cc.Sprite = cc.Node.extend({
    dirty: !1,
    atlasIndex: 0,
    textureAtlas: null,
    _batchNode: null,
    _recursiveDirty: null,
    _hasChildren: null,
    _shouldBeHidden: !1,
    _transformToBatch: null,
    _blendFunc: null,
    _texture: null,
    _rect: null,
    _rectRotated: !1,
    _offsetPosition: null,
    _unflippedOffsetPositionFromCenter: null,
    _opacityModifyRGB: !1,
    _flippedX: !1,
    _flippedY: !1,
    _textureLoaded: !1,
    _className: "Sprite",
    ctor: function (a, b, c) {
        cc.Node.prototype.ctor.call(this);
        this.setAnchorPoint(0.5, 0.5);
        this._loader = new cc.Sprite.LoadManager;
        this._shouldBeHidden = !1;
        this._offsetPosition = cc.p(0, 0);
        this._unflippedOffsetPositionFromCenter = cc.p(0, 0);
        this._blendFunc = {
            src: cc.BLEND_SRC,
            dst: cc.BLEND_DST
        };
        this._rect = cc.rect(0, 0, 0, 0);
        this._softInit(a, b, c)
    },
    textureLoaded: function () {
        return this._textureLoaded
    },
    addLoadedEventListener: function (a, b) {
        this.addEventListener("load", a, b)
    },
    isDirty: function () {
        return this.dirty
    },
    setDirty: function (a) {
        this.dirty = a
    },
    isTextureRectRotated: function () {
        return this._rectRotated
    },
    getAtlasIndex: function () {
        return this.atlasIndex
    },
    setAtlasIndex: function (a) {
        this.atlasIndex =
            a
    },
    getTextureRect: function () {
        return cc.rect(this._rect)
    },
    getTextureAtlas: function () {
        return this.textureAtlas
    },
    setTextureAtlas: function (a) {
        this.textureAtlas = a
    },
    getOffsetPosition: function () {
        return cc.p(this._offsetPosition)
    },
    _getOffsetX: function () {
        return this._offsetPosition.x
    },
    _getOffsetY: function () {
        return this._offsetPosition.y
    },
    getBlendFunc: function () {
        return this._blendFunc
    },
    initWithSpriteFrame: function (a) {
        cc.assert(a, cc._LogInfos.Sprite_initWithSpriteFrame);
        return this.setSpriteFrame(a)
    },
    initWithSpriteFrameName: function (a) {
        cc.assert(a,
            cc._LogInfos.Sprite_initWithSpriteFrameName);
        var b = cc.spriteFrameCache.getSpriteFrame(a);
        cc.assert(b, a + cc._LogInfos.Sprite_initWithSpriteFrameName1);
        return this.initWithSpriteFrame(b)
    },
    useBatchNode: function (a) {},
    setVertexRect: function (a) {
        var b = this._rect;
        b.x = a.x;
        b.y = a.y;
        b.width = a.width;
        b.height = a.height;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    setFlippedX: function (a) {
        this._flippedX !== a && (this._flippedX = a, this.setTextureRect(this._rect, this._rectRotated, this._contentSize),
            this.setNodeDirty(!0))
    },
    setFlippedY: function (a) {
        this._flippedY !== a && (this._flippedY = a, this.setTextureRect(this._rect, this._rectRotated, this._contentSize), this.setNodeDirty(!0))
    },
    isFlippedX: function () {
        return this._flippedX
    },
    isFlippedY: function () {
        return this._flippedY
    },
    setOpacityModifyRGB: function (a) {
        this._opacityModifyRGB !== a && (this._opacityModifyRGB = a, this._renderCmd._setColorDirty())
    },
    isOpacityModifyRGB: function () {
        return this._opacityModifyRGB
    },
    setDisplayFrameWithAnimationName: function (a, b) {
        cc.assert(a,
            cc._LogInfos.Sprite_setDisplayFrameWithAnimationName_3);
        var c = cc.animationCache.getAnimation(a);
        c ? (c = c.getFrames()[b]) ? this.setSpriteFrame(c.getSpriteFrame()) : cc.log(cc._LogInfos.Sprite_setDisplayFrameWithAnimationName_2) : cc.log(cc._LogInfos.Sprite_setDisplayFrameWithAnimationName)
    },
    getBatchNode: function () {
        return this._batchNode
    },
    getTexture: function () {
        return this._texture
    },
    _softInit: function (a, b, c) {
        if (void 0 === a) cc.Sprite.prototype.init.call(this);
        else if ("string" === typeof a) "#" === a[0] ? (b = a.substr(1,
            a.length - 1), (b = cc.spriteFrameCache.getSpriteFrame(b)) ? this.initWithSpriteFrame(b) : cc.log("%s does not exist", a)) : cc.Sprite.prototype.init.call(this, a, b);
        else if ("object" === typeof a)
            if (a instanceof cc.Texture2D) this.initWithTexture(a, b, c);
            else if (a instanceof cc.SpriteFrame) this.initWithSpriteFrame(a);
        else if (a instanceof HTMLImageElement || a instanceof HTMLCanvasElement) b = new cc.Texture2D, b.initWithElement(a), b.handleLoadedTexture(), this.initWithTexture(b)
    },
    getQuad: function () {
        return null
    },
    setBlendFunc: function (a,
        b) {
        var c = this._blendFunc;
        void 0 === b ? (c.src = a.src, c.dst = a.dst) : (c.src = a, c.dst = b);
        this._renderCmd.updateBlendFunc(c)
    },
    init: function () {
        if (0 < arguments.length) return this.initWithFile(arguments[0], arguments[1]);
        cc.Node.prototype.init.call(this);
        this.dirty = this._recursiveDirty = !1;
        this._blendFunc.src = cc.BLEND_SRC;
        this._blendFunc.dst = cc.BLEND_DST;
        this.texture = null;
        this._flippedX = this._flippedY = !1;
        this.anchorY = this.anchorX = 0.5;
        this._offsetPosition.x = 0;
        this._offsetPosition.y = 0;
        this._hasChildren = !1;
        this.setTextureRect(cc.rect(0,
            0, 0, 0), !1, cc.size(0, 0));
        return !0
    },
    initWithFile: function (a, b) {
        cc.assert(a, cc._LogInfos.Sprite_initWithFile);
        var c = cc.textureCache.getTextureForKey(a);
        c || (c = cc.textureCache.addImage(a));
        if (!c.isLoaded()) return this._loader.clear(), this._loader.once(c, function () {
            this.initWithFile(a, b);
            this.dispatchEvent("load")
        }, this), !1;
        if (!b) {
            var d = c.getContentSize();
            b = cc.rect(0, 0, d.width, d.height)
        }
        return this.initWithTexture(c, b)
    },
    initWithTexture: function (a, b, c, d) {
        cc.assert(0 !== arguments.length, cc._LogInfos.CCSpriteBatchNode_initWithTexture);
        this._loader.clear();
        this._textureLoaded = a.isLoaded();
        if (!this._textureLoaded) return this._loader.once(a, function () {
            this.initWithTexture(a, b, c, d);
            this.dispatchEvent("load")
        }, this), !1;
        c = c || !1;
        a = this._renderCmd._handleTextureForRotatedTexture(a, b, c, d);
        if (!cc.Node.prototype.init.call(this)) return !1;
        this._batchNode = null;
        this.dirty = this._recursiveDirty = !1;
        this._opacityModifyRGB = !0;
        this._blendFunc.src = cc.BLEND_SRC;
        this._blendFunc.dst = cc.BLEND_DST;
        this._flippedX = this._flippedY = !1;
        this._offsetPosition.x =
            0;
        this._offsetPosition.y = 0;
        this._hasChildren = !1;
        this._rectRotated = c;
        b && (this._rect.x = b.x, this._rect.y = b.y, this._rect.width = b.width, this._rect.height = b.height);
        b || (b = cc.rect(0, 0, a.width, a.height));
        this._renderCmd._checkTextureBoundary(a, b, c);
        this.setTexture(a);
        this.setTextureRect(b, c);
        this.setBatchNode(null);
        return !0
    },
    setTextureRect: function (a, b, c, d) {
        this._rectRotated = b || !1;
        this.setContentSize(c || a);
        this.setVertexRect(a);
        this._renderCmd._setTextureCoords(a, d);
        a = this._unflippedOffsetPositionFromCenter.x;
        b = this._unflippedOffsetPositionFromCenter.y;
        this._flippedX && (a = -a);
        this._flippedY && (b = -b);
        c = this._rect;
        this._offsetPosition.x = a + (this._contentSize.width - c.width) / 2;
        this._offsetPosition.y = b + (this._contentSize.height - c.height) / 2
    },
    addChild: function (a, b, c) {
        cc.assert(a, cc._LogInfos.CCSpriteBatchNode_addChild_2);
        null == b && (b = a._localZOrder);
        null == c && (c = a.tag);
        this._renderCmd._setBatchNodeForAddChild(a) && (cc.Node.prototype.addChild.call(this, a, b, c), this._hasChildren = !0)
    },
    setSpriteFrame: function (a) {
        "string" ===
        typeof a && (a = cc.spriteFrameCache.getSpriteFrame(a), cc.assert(a, cc._LogInfos.Sprite_setSpriteFrame));
        this._loader.clear();
        this.setNodeDirty(!0);
        var b = a.getTexture();
        this._textureLoaded = a.textureLoaded();
        this._loader.clear();
        if (!this._textureLoaded) return this._loader.once(b, function () {
            this.setSpriteFrame(a);
            this.dispatchEvent("load")
        }, this), !1;
        var c = a.getOffset();
        this._unflippedOffsetPositionFromCenter.x = c.x;
        this._unflippedOffsetPositionFromCenter.y = c.y;
        b !== this._texture && (this._renderCmd._setTexture(b),
            this.setColor(this._realColor));
        this.setTextureRect(a.getRect(), a.isRotated(), a.getOriginalSize())
    },
    setDisplayFrame: function (a) {
        cc.log(cc._LogInfos.Sprite_setDisplayFrame);
        this.setSpriteFrame(a)
    },
    isFrameDisplayed: function (a) {
        return this._renderCmd.isFrameDisplayed(a)
    },
    displayFrame: function () {
        return this.getSpriteFrame()
    },
    getSpriteFrame: function () {
        return new cc.SpriteFrame(this._texture, cc.rectPointsToPixels(this._rect), this._rectRotated, cc.pointPointsToPixels(this._unflippedOffsetPositionFromCenter),
            cc.sizePointsToPixels(this._contentSize))
    },
    setBatchNode: function (a) {},
    setTexture: function (a) {
        if (!a) return this._renderCmd._setTexture(null);
        var b = "string" === typeof a;
        b && (a = cc.textureCache.addImage(a));
        this._loader.clear();
        if (!a._textureLoaded) return this._loader.once(a, function () {
            this.setTexture(a);
            this.dispatchEvent("load")
        }, this), !1;
        this._renderCmd._setTexture(a);
        b && this._changeRectWithTexture(a);
        this.setColor(this._realColor);
        this._textureLoaded = !0
    },
    _changeRectWithTexture: function (a) {
        a = a._contentSize;
        a = cc.rect(0, 0, a.width, a.height);
        this.setTextureRect(a)
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new cc.Sprite.CanvasRenderCmd(this) : new cc.Sprite.WebGLRenderCmd(this)
    }
});
cc.Sprite.create = function (a, b, c) {
    return new cc.Sprite(a, b, c)
};
cc.Sprite.createWithTexture = cc.Sprite.create;
cc.Sprite.createWithSpriteFrameName = cc.Sprite.create;
cc.Sprite.createWithSpriteFrame = cc.Sprite.create;
cc.Sprite.INDEX_NOT_INITIALIZED = -1;
cc.EventHelper.prototype.apply(cc.Sprite.prototype);
cc.assert(cc.isFunction(cc._tmp.PrototypeSprite), cc._LogInfos.MissingFile, "SpritesPropertyDefine.js");
cc._tmp.PrototypeSprite();
delete cc._tmp.PrototypeSprite;
(function () {
    var a = cc.Sprite.LoadManager = function () {
        this.list = []
    };
    a.prototype.add = function (a, c, d) {
        a && a.addEventListener && (a.addEventListener("load", c, d), this.list.push({
            source: a,
            listener: c,
            target: d
        }))
    };
    a.prototype.once = function (a, c, d) {
        if (a && a.addEventListener) {
            var f = function (g) {
                a.removeEventListener("load", f, d);
                c.call(d, g)
            };
            a.addEventListener("load", f, d);
            this.list.push({
                source: a,
                listener: f,
                target: d
            })
        }
    };
    a.prototype.clear = function () {
        for (; 0 < this.list.length;) {
            var a = this.list.pop();
            a.source.removeEventListener("load",
                a.listener, a.target)
        }
    }
})();
(function () {
    cc.Sprite.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !0;
        this._textureCoord = {
            renderX: 0,
            renderY: 0,
            x: 0,
            y: 0,
            width: 0,
            height: 0,
            validRect: !1
        };
        this._blendFuncStr = "source-over";
        this._colorized = !1;
        this._canUseDirtyRegion = !0;
        this._textureToRender = null
    };
    var a = cc.Sprite.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    a.constructor = cc.Sprite.CanvasRenderCmd;
    a._spriteCmdCtor = cc.Sprite.CanvasRenderCmd;
    a.setDirtyRecursively = function (a) {};
    a._setTexture = function (a) {
        var c =
            this._node;
        c._texture !== a && (c._textureLoaded = a ? a._textureLoaded : !1, c._texture = a, a = a._contentSize, a = cc.rect(0, 0, a.width, a.height), c.setTextureRect(a), this._updateColor())
    };
    a._setColorDirty = function () {
        this.setDirtyFlag(cc.Node._dirtyFlags.colorDirty | cc.Node._dirtyFlags.opacityDirty)
    };
    a.isFrameDisplayed = function (a) {
        var c = this._node;
        return a.getTexture() !== c._texture ? !1 : cc.rectEqualToRect(a.getRect(), c._rect)
    };
    a.updateBlendFunc = function (a) {
        this._blendFuncStr = cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc(a)
    };
    a._setBatchNodeForAddChild = function (a) {
        return !0
    };
    a._handleTextureForRotatedTexture = function (a, c, d, f) {
        d && a.isLoaded() && (a = a.getHtmlElementObj(), a = cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(a, c, f), f = new cc.Texture2D, f.initWithElement(a), f.handleLoadedTexture(), a = f, c.x = c.y = 0, this._node._rect = cc.rect(0, 0, c.width, c.height));
        return a
    };
    a._checkTextureBoundary = function (a, c, d) {
        a && a.url && (d = c.y + c.height, c.x + c.width > a.width && cc.error(cc._LogInfos.RectWidth, a.url), d > a.height && cc.error(cc._LogInfos.RectHeight,
            a.url))
    };
    a.rendering = function (a, c, d) {
        var f = this._node,
            g = this._textureCoord,
            h = this._displayedOpacity / 255,
            m = this._textureToRender || f._texture;
        if (!(m && (0 === g.width || 0 === g.height || !m._textureLoaded) || 0 === h)) {
            a = a || cc._renderContext;
            var n = a.getContext(),
                p = f._offsetPosition.x,
                u = f._rect.height,
                v = f._rect.width,
                x = -f._offsetPosition.y - u;
            a.setTransform(this._worldTransform, c, d);
            a.setCompositeOperation(this._blendFuncStr);
            a.setGlobalAlpha(h);
            (f._flippedX || f._flippedY) && a.save();
            f._flippedX && (p = -p - v, n.scale(-1,
                1));
            f._flippedY && (x = f._offsetPosition.y, n.scale(1, -1));
            var y, z, t;
            this._colorized ? y = h = 0 : (h = g.renderX, y = g.renderY);
            z = g.width;
            t = g.height;
            m && m._htmlElementObj ? (c = m._htmlElementObj, "" !== m._pattern ? (a.setFillStyle(n.createPattern(c, m._pattern)), n.fillRect(p, x, v, u)) : n.drawImage(c, h, y, z, t, p, x, v, u)) : (m = f._contentSize, g.validRect && (g = this._displayedColor, a.setFillStyle("rgba(" + g.r + "," + g.g + "," + g.b + ",1)"), n.fillRect(p, x, m.width * c, m.height * d)));
            (f._flippedX || f._flippedY) && a.restore();
            cc.g_NumberOfDraws++
        }
    };
    a._updateColor =
        function () {
            var a = this._node._texture,
                c = this._textureCoord,
                d = this._displayedColor;
            a && (255 !== d.r || 255 !== d.g || 255 !== d.b ? (this._textureToRender = a._generateColorTexture(d.r, d.g, d.b, c), this._colorized = !0) : a && (this._textureToRender = a, this._colorized = !1))
        };
    a._textureLoadedCallback = function (a) {
        if (!this._textureLoaded) {
            this._textureLoaded = !0;
            var c = this._rect,
                d = this._renderCmd;
            c ? cc._rectEqualToZero(c) && (c.width = a.width, c.height = a.height) : c = cc.rect(0, 0, a.width, a.height);
            this.texture = a;
            this.setTextureRect(c, this._rectRotated);
            a = d._displayedColor;
            (255 !== a.r || 255 !== a.g || 255 !== a.b) && d._updateColor();
            this.setBatchNode(this._batchNode);
            this.dispatchEvent("load")
        }
    };
    a._setTextureCoords = function (a, c) {
        void 0 === c && (c = !0);
        var d = this._textureCoord,
            f = c ? cc.contentScaleFactor() : 1;
        d.renderX = d.x = 0 | a.x * f;
        d.renderY = d.y = 0 | a.y * f;
        d.width = 0 | a.width * f;
        d.height = 0 | a.height * f;
        d.validRect = !(0 === d.width || 0 === d.height || 0 > d.x || 0 > d.y)
    };
    cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas = function (a, c, d) {
        if (!a) return null;
        if (!c) return a;
        d = null == d ? !0 : d;
        var f =
            document.createElement("canvas");
        f.width = c.width;
        f.height = c.height;
        var g = f.getContext("2d");
        g.translate(f.width / 2, f.height / 2);
        d ? g.rotate(-1.5707963267948966) : g.rotate(1.5707963267948966);
        g.drawImage(a, c.x, c.y, c.height, c.width, -c.height / 2, -c.width / 2, c.height, c.width);
        return f
    }
})();
(function () {
    cc.Sprite.WebGLRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !0;
        this._vertices = [{
            x: 0,
            y: 0,
            u: 0,
            v: 0
        }, {
            x: 0,
            y: 0,
            u: 0,
            v: 0
        }, {
            x: 0,
            y: 0,
            u: 0,
            v: 0
        }, {
            x: 0,
            y: 0,
            u: 0,
            v: 0
        }];
        this._color = new Uint32Array(1);
        this._recursiveDirty = this._dirty = !1;
        this._shaderProgram = cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR)
    };
    var a = cc.Sprite.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
    a.constructor = cc.Sprite.WebGLRenderCmd;
    a._spriteCmdCtor = cc.Sprite.WebGLRenderCmd;
    a.updateBlendFunc = function (a) {};
    a.setDirtyFlag = function (a) {
        cc.Node.WebGLRenderCmd.prototype.setDirtyFlag.call(this, a);
        this._dirty = !0
    };
    a.setDirtyRecursively = function (a) {
        this._dirty = this._recursiveDirty = a;
        for (var c = this._node._children, d, f = c ? c.length : 0, g = 0; g < f; g++) d = c[g], d instanceof cc.Sprite && d._renderCmd.setDirtyRecursively(a)
    };
    a._setBatchNodeForAddChild = function (a) {
        var c = this._node;
        if (c._batchNode) {
            if (!(a instanceof cc.Sprite)) return cc.log(cc._LogInfos.Sprite_addChild), !1;
            a.texture._webTextureObj !==
                c.textureAtlas.texture._webTextureObj && cc.log(cc._LogInfos.Sprite_addChild_2);
            c._batchNode.appendChild(a);
            c._reorderChildDirty || c._setReorderChildDirtyRecursively()
        }
        return !0
    };
    a._handleTextureForRotatedTexture = function (a) {
        return a
    };
    a.isFrameDisplayed = function (a) {
        var c = this._node;
        return cc.rectEqualToRect(a.getRect(), c._rect) && a.getTexture().getName() === c._texture.getName() && cc.pointEqualToPoint(a.getOffset(), c._unflippedOffsetPositionFromCenter)
    };
    a._textureLoadedCallback = function (a) {
        if (!this._textureLoaded) {
            this._textureLoaded = !0;
            var c = this._rect;
            c ? cc._rectEqualToZero(c) && (c.width = a.width, c.height = a.height) : c = cc.rect(0, 0, a.width, a.height);
            this.texture = a;
            this.setTextureRect(c, this._rectRotated);
            this.setBatchNode(this._batchNode);
            this.dispatchEvent("load");
            cc.renderer.childrenOrderDirty = !0
        }
    };
    a._setTextureCoords = function (a, c) {
        void 0 === c && (c = !0);
        c && (a = cc.rectPointsToPixels(a));
        var d = this._node,
            f = d._batchNode ? d.textureAtlas.texture : d._texture,
            g = this._vertices;
        if (f) {
            var h = f.pixelsWidth,
                m = f.pixelsHeight,
                n, p;
            d._rectRotated ? (cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL ?
                (f = (2 * a.x + 1) / (2 * h), h = f + (2 * a.height - 2) / (2 * h), n = (2 * a.y + 1) / (2 * m), m = n + (2 * a.width - 2) / (2 * m)) : (f = a.x / h, h = (a.x + a.height) / h, n = a.y / m, m = (a.y + a.width) / m), d._flippedX && (p = n, n = m, m = p), d._flippedY && (p = f, f = h, h = p), g[0].u = h, g[0].v = n, g[1].u = f, g[1].v = n, g[2].u = h, g[2].v = m, g[3].u = f) : (cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL ? (f = (2 * a.x + 1) / (2 * h), h = f + (2 * a.width - 2) / (2 * h), n = (2 * a.y + 1) / (2 * m), m = n + (2 * a.height - 2) / (2 * m)) : (f = a.x / h, h = (a.x + a.width) / h, n = a.y / m, m = (a.y + a.height) / m), d._flippedX && (p = f, f = h, h = p), d._flippedY && (p = n, n = m, m = p), g[0].u = f,
                g[0].v = n, g[1].u = f, g[1].v = m, g[2].u = h, g[2].v = n, g[3].u = h);
            g[3].v = m
        }
    };
    a._setColorDirty = function () {};
    a._updateBlendFunc = function () {
        if (this._batchNode) cc.log(cc._LogInfos.Sprite__updateBlendFunc);
        else {
            var a = this._node,
                c = a._blendFunc;
            !a._texture || !a._texture.hasPremultipliedAlpha() ? (c.src === cc.ONE && c.dst === cc.BLEND_DST && (c.src = cc.SRC_ALPHA), a.opacityModifyRGB = !1) : (c.src === cc.SRC_ALPHA && c.dst === cc.BLEND_DST && (c.src = cc.ONE), a.opacityModifyRGB = !0)
        }
    };
    a._setTexture = function (a) {
        var c = this._node;
        if (c._texture !==
            a) {
            c._textureLoaded = a ? a._textureLoaded : !1;
            if (c._texture = a) a = a._contentSize, a = cc.rect(0, 0, a.width, a.height), c.setTextureRect(a), this._updateBlendFunc();
            c._textureLoaded && (cc.renderer.childrenOrderDirty = !0)
        }
    };
    a._checkTextureBoundary = function (a, c, d) {
        a && a.url && (d ? (d = c.x + c.height, c = c.y + c.width) : (d = c.x + c.width, c = c.y + c.height), d > a.width && cc.error(cc._LogInfos.RectWidth, a.url), c > a.height && cc.error(cc._LogInfos.RectHeight, a.url))
    };
    a.transform = function (a, c) {
        this.originTransform(a, c);
        var d = this._node,
            f = d._offsetPosition.x,
            g = f + d._rect.width,
            h = d._offsetPosition.y,
            m = h + d._rect.height,
            n = this._worldTransform,
            d = n.tx,
            p = n.ty,
            u = f * n.a,
            f = f * n.b,
            v = g * n.a,
            g = g * n.b,
            x = m * n.c,
            m = m * n.d,
            y = h * n.c,
            h = h * n.d,
            n = this._vertices;
        n[0].x = u + x + d;
        n[0].y = f + m + p;
        n[1].x = u + y + d;
        n[1].y = f + h + p;
        n[2].x = v + x + d;
        n[2].y = g + m + p;
        n[3].x = v + y + d;
        n[3].y = g + h + p
    };
    a.needDraw = function () {
        var a = this._node._texture;
        return this._needDraw && a
    };
    a.uploadData = function (a, c, d) {
        var f = this._node,
            g = f._texture;
        if (!g || (!g._textureLoaded || !f._rect.width || !f._rect.height) || !this._displayedOpacity) return !1;
        var g = this._displayedOpacity,
            h = this._displayedColor.r,
            m = this._displayedColor.g,
            n = this._displayedColor.b;
        if (f._opacityModifyRGB) var p = g / 255,
            h = h * p,
            m = m * p,
            n = n * p;
        this._color[0] = g << 24 | n << 16 | m << 8 | h;
        f = f._vertexZ;
        g = this._vertices;
        h = g.length;
        n = d;
        for (d = 0; d < h; ++d) m = g[d], a[n] = m.x, a[n + 1] = m.y, a[n + 2] = f, c[n + 3] = this._color[0], a[n + 4] = m.u, a[n + 5] = m.v, n += 6;
        return h
    }
})();
cc.SpriteBatchNode = cc.Node.extend({
    _blendFunc: null,
    _texture: null,
    _className: "SpriteBatchNode",
    ctor: function (a) {
        cc.Node.prototype.ctor.call(this);
        this._blendFunc = new cc.BlendFunc(cc.BLEND_SRC, cc.BLEND_DST);
        var b;
        cc.isString(a) ? (b = cc.textureCache.getTextureForKey(a)) || (b = cc.textureCache.addImage(a)) : a instanceof cc.Texture2D && (b = a);
        b && this.initWithTexture(b)
    },
    addSpriteWithoutQuad: function (a, b, c) {
        this.addChild(a, b, c);
        return this
    },
    getTextureAtlas: function () {
        return null
    },
    setTextureAtlas: function (a) {},
    getDescendants: function () {
        return this._children
    },
    initWithFile: function (a, b) {
        var c = cc.textureCache.getTextureForKey(a);
        c || (c = cc.textureCache.addImage(a));
        return this.initWithTexture(c, b)
    },
    init: function (a, b) {
        var c = cc.textureCache.getTextureForKey(a);
        c || (c = cc.textureCache.addImage(a));
        return this.initWithTexture(c, b)
    },
    increaseAtlasCapacity: function () {},
    removeChildAtIndex: function (a, b) {
        this.removeChild(this._children[a], b)
    },
    rebuildIndexInOrder: function (a, b) {
        return b
    },
    highestAtlasIndexInChild: function (a) {
        var b =
            a.children;
        return !b || 0 === b.length ? a.zIndex : this.highestAtlasIndexInChild(b[b.length - 1])
    },
    lowestAtlasIndexInChild: function (a) {
        var b = a.children;
        return !b || 0 === b.length ? a.zIndex : this.lowestAtlasIndexInChild(b[b.length - 1])
    },
    atlasIndexForChild: function (a) {
        return a.zIndex
    },
    reorderBatch: function (a) {
        this._reorderChildDirty = a
    },
    setBlendFunc: function (a, b) {
        this._blendFunc = void 0 === b ? a : {
            src: a,
            dst: b
        }
    },
    getBlendFunc: function () {
        return new cc.BlendFunc(this._blendFunc.src, this._blendFunc.dst)
    },
    updateQuadFromSprite: function (a,
        b) {
        cc.assert(a, cc._LogInfos.CCSpriteBatchNode_updateQuadFromSprite_2);
        a instanceof cc.Sprite ? (a.dirty = !0, a._renderCmd.transform(this._renderCmd, !0)) : cc.log(cc._LogInfos.CCSpriteBatchNode_updateQuadFromSprite)
    },
    insertQuadFromSprite: function (a, b) {
        this.addChild(a, b)
    },
    insertChild: function (a, b) {
        this.addChild(a, b)
    },
    appendChild: function (a) {
        this.sortAllChildren();
        this.addChild(a.lastLocalZOrder + 1)
    },
    removeSpriteFromAtlas: function (a, b) {
        this.removeChild(a, b)
    },
    initWithTexture: function (a) {
        this.setTexture(a);
        return !0
    },
    getTexture: function () {
        return this._texture
    },
    setTexture: function (a) {
        this._texture = a;
        if (a._textureLoaded) {
            var b, c = this._children,
                d = c.length;
            for (b = 0; b < d; ++b) c[b].setTexture(a)
        } else a.addEventListener("load", function () {
            var b, c = this._children,
                d = c.length;
            for (b = 0; b < d; ++b) c[b].setTexture(a)
        }, this)
    },
    setShaderProgram: function (a) {
        this._renderCmd.setShaderProgram(a);
        var b, c = this._children,
            d = c.length;
        for (b = 0; b < d; ++b) c[b].setShaderProgram(a)
    },
    addChild: function (a, b, c) {
        cc.assert(void 0 !== a, cc._LogInfos.CCSpriteBatchNode_addChild_3);
        this._isValidChild(a) && (b = void 0 === b ? a.zIndex : b, c = void 0 === c ? a.tag : c, cc.Node.prototype.addChild.call(this, a, b, c), this._renderCmd._shaderProgram && (a.shaderProgram = this._renderCmd._shaderProgram))
    },
    _isValidChild: function (a) {
        return !(a instanceof cc.Sprite) ? (cc.log(cc._LogInfos.Sprite_addChild_4), !1) : a.texture !== this._texture ? (cc.log(cc._LogInfos.Sprite_addChild_5), !1) : !0
    }
});
_p = cc.SpriteBatchNode.prototype;
cc.defineGetterSetter(_p, "texture", _p.getTexture, _p.setTexture);
cc.defineGetterSetter(_p, "shaderProgram", _p.getShaderProgram, _p.setShaderProgram);
cc.SpriteBatchNode.create = function (a) {
    return new cc.SpriteBatchNode(a)
};
cc.SpriteBatchNode.createWithTexture = cc.SpriteBatchNode.create;
cc.BakeSprite = cc.Sprite.extend({
    _cacheCanvas: null,
    _cacheContext: null,
    ctor: function () {
        cc.Sprite.prototype.ctor.call(this);
        var a = document.createElement("canvas");
        a.width = a.height = 10;
        this._cacheCanvas = a;
        this._cacheContext = new cc.CanvasContextWrapper(a.getContext("2d"));
        var b = new cc.Texture2D;
        b.initWithElement(a);
        b.handleLoadedTexture();
        this.setTexture(b)
    },
    getCacheContext: function () {
        return this._cacheContext
    },
    getCacheCanvas: function () {
        return this._cacheCanvas
    },
    resetCanvasSize: function (a, b) {
        var c = this._cacheCanvas,
            d = this._cacheContext,
            f = d._context.strokeStyle,
            g = d._context.fillStyle;
        void 0 === b && (b = a.height, a = a.width);
        c.width = a;
        c.height = b;
        f !== d._context.strokeStyle && (d._context.strokeStyle = f);
        g !== d._context.fillStyle && (d._context.fillStyle = g);
        this.getTexture().handleLoadedTexture();
        this.setTextureRect(cc.rect(0, 0, a, b), !1, null, !1)
    }
});
cc.AnimationFrame = cc.Class.extend({
    _spriteFrame: null,
    _delayPerUnit: 0,
    _userInfo: null,
    ctor: function (a, b, c) {
        this._spriteFrame = a || null;
        this._delayPerUnit = b || 0;
        this._userInfo = c || null
    },
    clone: function () {
        var a = new cc.AnimationFrame;
        a.initWithSpriteFrame(this._spriteFrame.clone(), this._delayPerUnit, this._userInfo);
        return a
    },
    copyWithZone: function (a) {
        return cc.clone(this)
    },
    copy: function (a) {
        a = new cc.AnimationFrame;
        a.initWithSpriteFrame(this._spriteFrame.clone(), this._delayPerUnit, this._userInfo);
        return a
    },
    initWithSpriteFrame: function (a,
        b, c) {
        this._spriteFrame = a;
        this._delayPerUnit = b;
        this._userInfo = c;
        return !0
    },
    getSpriteFrame: function () {
        return this._spriteFrame
    },
    setSpriteFrame: function (a) {
        this._spriteFrame = a
    },
    getDelayUnits: function () {
        return this._delayPerUnit
    },
    setDelayUnits: function (a) {
        this._delayPerUnit = a
    },
    getUserInfo: function () {
        return this._userInfo
    },
    setUserInfo: function (a) {
        this._userInfo = a
    }
});
cc.AnimationFrame.create = function (a, b, c) {
    return new cc.AnimationFrame(a, b, c)
};
cc.Animation = cc.Class.extend({
    _frames: null,
    _loops: 0,
    _restoreOriginalFrame: !1,
    _duration: 0,
    _delayPerUnit: 0,
    _totalDelayUnits: 0,
    ctor: function (a, b, c) {
        this._frames = [];
        if (void 0 === a) this.initWithSpriteFrames(null, 0);
        else {
            var d = a[0];
            d && (d instanceof cc.SpriteFrame ? this.initWithSpriteFrames(a, b, c) : d instanceof cc.AnimationFrame && this.initWithAnimationFrames(a, b, c))
        }
    },
    getFrames: function () {
        return this._frames
    },
    setFrames: function (a) {
        this._frames = a
    },
    addSpriteFrame: function (a) {
        var b = new cc.AnimationFrame;
        b.initWithSpriteFrame(a,
            1, null);
        this._frames.push(b);
        this._totalDelayUnits++
    },
    addSpriteFrameWithFile: function (a) {
        a = cc.textureCache.addImage(a);
        var b = cc.rect(0, 0, 0, 0);
        b.width = a.width;
        b.height = a.height;
        a = new cc.SpriteFrame(a, b);
        this.addSpriteFrame(a)
    },
    addSpriteFrameWithTexture: function (a, b) {
        var c = new cc.SpriteFrame(a, b);
        this.addSpriteFrame(c)
    },
    initWithAnimationFrames: function (a, b, c) {
        cc.arrayVerifyType(a, cc.AnimationFrame);
        this._delayPerUnit = b;
        this._loops = void 0 === c ? 1 : c;
        this._totalDelayUnits = 0;
        b = this._frames;
        for (c = b.length =
            0; c < a.length; c++) {
            var d = a[c];
            b.push(d);
            this._totalDelayUnits += d.getDelayUnits()
        }
        return !0
    },
    clone: function () {
        var a = new cc.Animation;
        a.initWithAnimationFrames(this._copyFrames(), this._delayPerUnit, this._loops);
        a.setRestoreOriginalFrame(this._restoreOriginalFrame);
        return a
    },
    copyWithZone: function (a) {
        a = new cc.Animation;
        a.initWithAnimationFrames(this._copyFrames(), this._delayPerUnit, this._loops);
        a.setRestoreOriginalFrame(this._restoreOriginalFrame);
        return a
    },
    _copyFrames: function () {
        for (var a = [], b = 0; b < this._frames.length; b++) a.push(this._frames[b].clone());
        return a
    },
    copy: function (a) {
        return this.copyWithZone(null)
    },
    getLoops: function () {
        return this._loops
    },
    setLoops: function (a) {
        this._loops = a
    },
    setRestoreOriginalFrame: function (a) {
        this._restoreOriginalFrame = a
    },
    getRestoreOriginalFrame: function () {
        return this._restoreOriginalFrame
    },
    getDuration: function () {
        return this._totalDelayUnits * this._delayPerUnit
    },
    getDelayPerUnit: function () {
        return this._delayPerUnit
    },
    setDelayPerUnit: function (a) {
        this._delayPerUnit = a
    },
    getTotalDelayUnits: function () {
        return this._totalDelayUnits
    },
    initWithSpriteFrames: function (a, b, c) {
        cc.arrayVerifyType(a, cc.SpriteFrame);
        this._loops = void 0 === c ? 1 : c;
        this._delayPerUnit = b || 0;
        this._totalDelayUnits = 0;
        b = this._frames;
        b.length = 0;
        if (a) {
            for (c = 0; c < a.length; c++) {
                var d = a[c],
                    f = new cc.AnimationFrame;
                f.initWithSpriteFrame(d, 1, null);
                b.push(f)
            }
            this._totalDelayUnits += a.length
        }
        return !0
    },
    retain: function () {},
    release: function () {}
});
cc.Animation.create = function (a, b, c) {
    return new cc.Animation(a, b, c)
};
cc.Animation.createWithAnimationFrames = cc.Animation.create;
cc.animationCache = {
    _animations: {},
    addAnimation: function (a, b) {
        this._animations[b] = a
    },
    removeAnimation: function (a) {
        a && this._animations[a] && delete this._animations[a]
    },
    getAnimation: function (a) {
        return this._animations[a] ? this._animations[a] : null
    },
    _addAnimationsWithDictionary: function (a, b) {
        var c = a.animations;
        if (c) {
            var d = 1,
                f = a.properties;
            if (f)
                for (var d = null != f.format ? parseInt(f.format) : d, f = f.spritesheets, g = cc.spriteFrameCache, h = cc.path, m = 0; m < f.length; m++) g.addSpriteFrames(h.changeBasename(b, f[m]));
            switch (d) {
            case 1:
                this._parseVersion1(c);
                break;
            case 2:
                this._parseVersion2(c);
                break;
            default:
                cc.log(cc._LogInfos.animationCache__addAnimationsWithDictionary_2)
            }
        } else cc.log(cc._LogInfos.animationCache__addAnimationsWithDictionary)
    },
    addAnimations: function (a) {
        cc.assert(a, cc._LogInfos.animationCache_addAnimations_2);
        var b = cc.loader.getRes(a);
        b ? this._addAnimationsWithDictionary(b, a) : cc.log(cc._LogInfos.animationCache_addAnimations)
    },
    _parseVersion1: function (a) {
        var b = cc.spriteFrameCache,
            c;
        for (c in a) {
            var d = a[c],
                f = d.frames,
                d = parseFloat(d.delay) ||
                0,
                g = null;
            if (f) {
                for (var g = [], h = 0; h < f.length; h++) {
                    var m = b.getSpriteFrame(f[h]);
                    if (m) {
                        var n = new cc.AnimationFrame;
                        n.initWithSpriteFrame(m, 1, null);
                        g.push(n)
                    } else cc.log(cc._LogInfos.animationCache__parseVersion1_2, c, f[h])
                }
                0 === g.length ? cc.log(cc._LogInfos.animationCache__parseVersion1_3, c) : (g.length !== f.length && cc.log(cc._LogInfos.animationCache__parseVersion1_4, c), g = new cc.Animation(g, d, 1), cc.animationCache.addAnimation(g, c))
            } else cc.log(cc._LogInfos.animationCache__parseVersion1, c)
        }
    },
    _parseVersion2: function (a) {
        var b =
            cc.spriteFrameCache,
            c;
        for (c in a) {
            var d = a[c],
                f = d.loop,
                g = parseInt(d.loops),
                f = f ? cc.REPEAT_FOREVER : isNaN(g) ? 1 : g,
                g = d.restoreOriginalFrame && !0 == d.restoreOriginalFrame ? !0 : !1,
                h = d.frames;
            if (h) {
                for (var m = [], n = 0; n < h.length; n++) {
                    var p = h[n],
                        u = p.spriteframe,
                        v = b.getSpriteFrame(u);
                    if (v) {
                        var u = parseFloat(p.delayUnits) || 0,
                            p = p.notification,
                            x = new cc.AnimationFrame;
                        x.initWithSpriteFrame(v, u, p);
                        m.push(x)
                    } else cc.log(cc._LogInfos.animationCache__parseVersion2_2, c, u)
                }
                d = parseFloat(d.delayPerUnit) || 0;
                h = new cc.Animation;
                h.initWithAnimationFrames(m,
                    d, f);
                h.setRestoreOriginalFrame(g);
                cc.animationCache.addAnimation(h, c)
            } else cc.log(cc._LogInfos.animationCache__parseVersion2, c)
        }
    },
    _clear: function () {
        this._animations = {}
    }
};
cc.SpriteFrame = cc.Class.extend({
    _offset: null,
    _originalSize: null,
    _rectInPixels: null,
    _rotated: !1,
    _rect: null,
    _offsetInPixels: null,
    _originalSizeInPixels: null,
    _texture: null,
    _textureFilename: "",
    _textureLoaded: !1,
    ctor: function (a, b, c, d, f) {
        this._offset = cc.p(0, 0);
        this._offsetInPixels = cc.p(0, 0);
        this._originalSize = cc.size(0, 0);
        this._rotated = !1;
        this._originalSizeInPixels = cc.size(0, 0);
        this._textureFilename = "";
        this._texture = null;
        this._textureLoaded = !1;
        void 0 !== a && void 0 !== b && (void 0 === c || void 0 === d || void 0 === f ?
            this.initWithTexture(a, b) : this.initWithTexture(a, b, c, d, f))
    },
    textureLoaded: function () {
        return this._textureLoaded
    },
    addLoadedEventListener: function (a, b) {
        this.addEventListener("load", a, b)
    },
    getRectInPixels: function () {
        var a = this._rectInPixels;
        return cc.rect(a.x, a.y, a.width, a.height)
    },
    setRectInPixels: function (a) {
        this._rectInPixels || (this._rectInPixels = cc.rect(0, 0, 0, 0));
        this._rectInPixels.x = a.x;
        this._rectInPixels.y = a.y;
        this._rectInPixels.width = a.width;
        this._rectInPixels.height = a.height;
        this._rect = cc.rectPixelsToPoints(a)
    },
    isRotated: function () {
        return this._rotated
    },
    setRotated: function (a) {
        this._rotated = a
    },
    getRect: function () {
        var a = this._rect;
        return cc.rect(a.x, a.y, a.width, a.height)
    },
    setRect: function (a) {
        this._rect || (this._rect = cc.rect(0, 0, 0, 0));
        this._rect.x = a.x;
        this._rect.y = a.y;
        this._rect.width = a.width;
        this._rect.height = a.height;
        this._rectInPixels = cc.rectPointsToPixels(this._rect)
    },
    getOffsetInPixels: function () {
        return cc.p(this._offsetInPixels)
    },
    setOffsetInPixels: function (a) {
        this._offsetInPixels.x = a.x;
        this._offsetInPixels.y =
            a.y;
        cc._pointPixelsToPointsOut(this._offsetInPixels, this._offset)
    },
    getOriginalSizeInPixels: function () {
        return cc.size(this._originalSizeInPixels)
    },
    setOriginalSizeInPixels: function (a) {
        this._originalSizeInPixels.width = a.width;
        this._originalSizeInPixels.height = a.height
    },
    getOriginalSize: function () {
        return cc.size(this._originalSize)
    },
    setOriginalSize: function (a) {
        this._originalSize.width = a.width;
        this._originalSize.height = a.height
    },
    getTexture: function () {
        if (this._texture) return this._texture;
        if ("" !== this._textureFilename) {
            var a =
                cc.textureCache.addImage(this._textureFilename);
            a && (this._textureLoaded = a.isLoaded());
            return a
        }
        return null
    },
    setTexture: function (a) {
        if (this._texture !== a) {
            var b = a.isLoaded();
            this._textureLoaded = b;
            this._texture = a;
            b || a.addEventListener("load", function (a) {
                this._textureLoaded = !0;
                if (this._rotated && cc._renderType === cc.game.RENDER_TYPE_CANVAS) {
                    var b = a.getHtmlElementObj(),
                        b = cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(b, this.getRect()),
                        f = new cc.Texture2D;
                    f.initWithElement(b);
                    f.handleLoadedTexture();
                    this.setTexture(f);
                    b = this.getRect();
                    this.setRect(cc.rect(0, 0, b.width, b.height))
                }
                b = this._rect;
                0 === b.width && 0 === b.height && (b = a.width, a = a.height, this._rect.width = b, this._rect.height = a, this._rectInPixels = cc.rectPointsToPixels(this._rect), this._originalSizeInPixels.width = this._rectInPixels.width, this._originalSizeInPixels.height = this._rectInPixels.height, this._originalSize.width = b, this._originalSize.height = a);
                this.dispatchEvent("load")
            }, this)
        }
    },
    getOffset: function () {
        return cc.p(this._offset)
    },
    setOffset: function (a) {
        this._offset.x =
            a.x;
        this._offset.y = a.y
    },
    clone: function () {
        var a = new cc.SpriteFrame;
        a.initWithTexture(this._textureFilename, this._rectInPixels, this._rotated, this._offsetInPixels, this._originalSizeInPixels);
        a.setTexture(this._texture);
        return a
    },
    copyWithZone: function () {
        var a = new cc.SpriteFrame;
        a.initWithTexture(this._textureFilename, this._rectInPixels, this._rotated, this._offsetInPixels, this._originalSizeInPixels);
        a.setTexture(this._texture);
        return a
    },
    copy: function () {
        return this.copyWithZone()
    },
    initWithTexture: function (a,
        b, c, d, f) {
        2 === arguments.length && (b = cc.rectPointsToPixels(b));
        d = d || cc.p(0, 0);
        f = f || b;
        c = c || !1;
        "string" === typeof a ? (this._texture = null, this._textureFilename = a) : a instanceof cc.Texture2D && this.setTexture(a);
        a = this.getTexture();
        this._rectInPixels = b;
        this._rect = cc.rectPixelsToPoints(b);
        if (a && a.url && a.isLoaded()) {
            var g, h;
            c ? (g = b.x + b.height, h = b.y + b.width) : (g = b.x + b.width, h = b.y + b.height);
            g > a.getPixelsWide() && cc.error(cc._LogInfos.RectWidth, a.url);
            h > a.getPixelsHigh() && cc.error(cc._LogInfos.RectHeight, a.url)
        }
        this._offsetInPixels.x =
            d.x;
        this._offsetInPixels.y = d.y;
        cc._pointPixelsToPointsOut(d, this._offset);
        this._originalSizeInPixels.width = f.width;
        this._originalSizeInPixels.height = f.height;
        cc._sizePixelsToPointsOut(f, this._originalSize);
        this._rotated = c;
        return !0
    }
});
cc.EventHelper.prototype.apply(cc.SpriteFrame.prototype);
cc.SpriteFrame.create = function (a, b, c, d, f) {
    return new cc.SpriteFrame(a, b, c, d, f)
};
cc.SpriteFrame.createWithTexture = cc.SpriteFrame.create;
cc.SpriteFrame._frameWithTextureForCanvas = function (a, b, c, d, f) {
    var g = new cc.SpriteFrame;
    g._texture = a;
    g._rectInPixels = b;
    g._rect = cc.rectPixelsToPoints(b);
    g._offsetInPixels.x = d.x;
    g._offsetInPixels.y = d.y;
    cc._pointPixelsToPointsOut(g._offsetInPixels, g._offset);
    g._originalSizeInPixels.width = f.width;
    g._originalSizeInPixels.height = f.height;
    cc._sizePixelsToPointsOut(g._originalSizeInPixels, g._originalSize);
    g._rotated = c;
    return g
};
cc.spriteFrameCache = {
    _CCNS_REG1: /^\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*$/,
    _CCNS_REG2: /^\s*\{\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*,\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*\}\s*$/,
    _spriteFrames: {},
    _spriteFramesAliases: {},
    _frameConfigCache: {},
    _rectFromString: function (a) {
        a = this._CCNS_REG2.exec(a);
        return !a ? cc.rect(0, 0, 0, 0) : cc.rect(parseFloat(a[1]), parseFloat(a[2]), parseFloat(a[3]), parseFloat(a[4]))
    },
    _pointFromString: function (a) {
        a = this._CCNS_REG1.exec(a);
        return !a ? cc.p(0, 0) : cc.p(parseFloat(a[1]), parseFloat(a[2]))
    },
    _sizeFromString: function (a) {
        a = this._CCNS_REG1.exec(a);
        return !a ? cc.size(0, 0) : cc.size(parseFloat(a[1]), parseFloat(a[2]))
    },
    _getFrameConfig: function (a) {
        var b = cc.loader.getRes(a);
        cc.assert(b, cc._LogInfos.spriteFrameCache__getFrameConfig_2, a);
        cc.loader.release(a);
        if (b._inited) return this._frameConfigCache[a] = b;
        this._frameConfigCache[a] = this._parseFrameConfig(b);
        return this._frameConfigCache[a]
    },
    _getFrameConfigByJsonObject: function (a, b) {
        cc.assert(b,
            cc._LogInfos.spriteFrameCache__getFrameConfig_2, a);
        this._frameConfigCache[a] = this._parseFrameConfig(b);
        return this._frameConfigCache[a]
    },
    _parseFrameConfig: function (a) {
        var b = a.frames,
            c = a.metadata || a.meta;
        a = {};
        var d = {},
            f = 0;
        c && (f = c.format, f = 1 >= f.length ? parseInt(f) : f, d.image = c.textureFileName || c.textureFileName || c.image);
        for (var g in b) {
            var h = b[g];
            if (h) {
                c = {};
                if (0 == f) {
                    c.rect = cc.rect(h.x, h.y, h.width, h.height);
                    c.rotated = !1;
                    c.offset = cc.p(h.offsetX, h.offsetY);
                    var m = h.originalWidth,
                        h = h.originalHeight;
                    (!m ||
                        !h) && cc.log(cc._LogInfos.spriteFrameCache__getFrameConfig);
                    m = Math.abs(m);
                    h = Math.abs(h);
                    c.size = cc.size(m, h)
                } else if (1 == f || 2 == f) c.rect = this._rectFromString(h.frame), c.rotated = h.rotated || !1, c.offset = this._pointFromString(h.offset), c.size = this._sizeFromString(h.sourceSize);
                else if (3 == f) {
                    var m = this._sizeFromString(h.spriteSize),
                        n = this._rectFromString(h.textureRect);
                    m && (n = cc.rect(n.x, n.y, m.width, m.height));
                    c.rect = n;
                    c.rotated = h.textureRotated || !1;
                    c.offset = this._pointFromString(h.spriteOffset);
                    c.size = this._sizeFromString(h.spriteSourceSize);
                    c.aliases = h.aliases
                } else m = h.frame, n = h.sourceSize, g = h.filename || g, c.rect = cc.rect(m.x, m.y, m.w, m.h), c.rotated = h.rotated || !1, c.offset = cc.p(0, 0), c.size = cc.size(n.w, n.h);
                a[g] = c
            }
        }
        return {
            _inited: !0,
            frames: a,
            meta: d
        }
    },
    _addSpriteFramesByObject: function (a, b, c) {
        cc.assert(a, cc._LogInfos.spriteFrameCache_addSpriteFrames_2);
        b && b.frames && (b = this._frameConfigCache[a] || this._getFrameConfigByJsonObject(a, b), this._createSpriteFrames(a, b, c))
    },
    _createSpriteFrames: function (a, b, c) {
        var d = b.frames;
        b = b.meta;
        c ? c instanceof cc.Texture2D ||
            (cc.isString(c) ? c = cc.textureCache.addImage(c) : cc.assert(0, cc._LogInfos.spriteFrameCache_addSpriteFrames_3)) : (c = cc.path.changeBasename(a, b.image || ".png"), c = cc.textureCache.addImage(c));
        a = this._spriteFramesAliases;
        b = this._spriteFrames;
        for (var f in d) {
            var g = d[f],
                h = b[f];
            if (!h) {
                h = new cc.SpriteFrame(c, cc.rect(g.rect), g.rotated, g.offset, g.size);
                if (g = g.aliases)
                    for (var m = 0, n = g.length; m < n; m++) {
                        var p = g[m];
                        a[p] && cc.log(cc._LogInfos.spriteFrameCache_addSpriteFrames, p);
                        a[p] = f
                    }
                cc._renderType === cc.game.RENDER_TYPE_CANVAS &&
                    h.isRotated() && h.getTexture().isLoaded() && (g = h.getTexture().getHtmlElementObj(), g = cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(g, h.getRectInPixels()), m = new cc.Texture2D, m.initWithElement(g), m.handleLoadedTexture(), h.setTexture(m), h.setRotated(!1), g = h._rect, h.setRect(cc.rect(0, 0, g.width, g.height)));
                b[f] = h
            }
        }
    },
    addSpriteFrames: function (a, b) {
        cc.assert(a, cc._LogInfos.spriteFrameCache_addSpriteFrames_2);
        var c = this._frameConfigCache[a] || cc.loader.getRes(a);
        c && c.frames && (c = this._frameConfigCache[a] ||
            this._getFrameConfig(a), this._createSpriteFrames(a, c, b))
    },
    _checkConflict: function (a) {
        a = a.frames;
        for (var b in a) this._spriteFrames[b] && cc.log(cc._LogInfos.spriteFrameCache__checkConflict, b)
    },
    addSpriteFrame: function (a, b) {
        this._spriteFrames[b] = a
    },
    removeSpriteFrames: function () {
        this._spriteFrames = {};
        this._spriteFramesAliases = {}
    },
    removeSpriteFrameByName: function (a) {
        a && (this._spriteFramesAliases[a] && delete this._spriteFramesAliases[a], this._spriteFrames[a] && delete this._spriteFrames[a])
    },
    removeSpriteFramesFromFile: function (a) {
        var b =
            this._spriteFrames,
            c = this._spriteFramesAliases;
        if (a = this._frameConfigCache[a]) {
            a = a.frames;
            for (var d in a)
                if (b[d]) {
                    delete b[d];
                    for (var f in c) c[f] === d && delete c[f]
                }
        }
    },
    removeSpriteFramesFromTexture: function (a) {
        var b = this._spriteFrames,
            c = this._spriteFramesAliases,
            d;
        for (d in b) {
            var f = b[d];
            if (f && f.getTexture() === a) {
                delete b[d];
                for (var g in c) c[g] === d && delete c[g]
            }
        }
    },
    getSpriteFrame: function (a) {
        var b = this._spriteFrames[a];
        if (!b) {
            var c = this._spriteFramesAliases[a];
            c && ((b = this._spriteFrames[c.toString()]) ||
                delete this._spriteFramesAliases[a])
        }
        return b
    },
    _clear: function () {
        this._spriteFrames = {};
        this._spriteFramesAliases = {};
        this._frameConfigCache = {}
    }
};
cc.configuration = {
    ERROR: 0,
    STRING: 1,
    INT: 2,
    DOUBLE: 3,
    BOOLEAN: 4,
    _maxTextureSize: 0,
    _maxModelviewStackDepth: 0,
    _supportsPVRTC: !1,
    _supportsNPOT: !1,
    _supportsBGRA8888: !1,
    _supportsDiscardFramebuffer: !1,
    _supportsShareableVAO: !1,
    _maxSamplesAllowed: 0,
    _maxTextureUnits: 0,
    _GlExtensions: "",
    _valueDict: {},
    _inited: !1,
    _init: function () {
        var a = this._valueDict;
        a["cocos2d.x.version"] = cc.ENGINE_VERSION;
        a["cocos2d.x.compiled_with_profiler"] = !1;
        a["cocos2d.x.compiled_with_gl_state_cache"] = cc.ENABLE_GL_STATE_CACHE;
        this._inited = !0
    },
    getMaxTextureSize: function () {
        return this._maxTextureSize
    },
    getMaxModelviewStackDepth: function () {
        return this._maxModelviewStackDepth
    },
    getMaxTextureUnits: function () {
        return this._maxTextureUnits
    },
    supportsNPOT: function () {
        return this._supportsNPOT
    },
    supportsPVRTC: function () {
        return this._supportsPVRTC
    },
    supportsETC: function () {
        return !1
    },
    supportsS3TC: function () {
        return !1
    },
    supportsATITC: function () {
        return !1
    },
    supportsBGRA8888: function () {
        return this._supportsBGRA8888
    },
    supportsDiscardFramebuffer: function () {
        return this._supportsDiscardFramebuffer
    },
    supportsShareableVAO: function () {
        return this._supportsShareableVAO
    },
    checkForGLExtension: function (a) {
        return -1 < this._GlExtensions.indexOf(a)
    },
    getValue: function (a, b) {
        this._inited || this._init();
        var c = this._valueDict;
        return c[a] ? c[a] : b
    },
    setValue: function (a, b) {
        this._valueDict[a] = b
    },
    dumpInfo: function () {
        0 === cc.ENABLE_GL_STATE_CACHE && (cc.log(""), cc.log(cc._LogInfos.configuration_dumpInfo), cc.log(""))
    },
    gatherGPUInfo: function () {
        if (cc._renderType !== cc.game.RENDER_TYPE_CANVAS) {
            this._inited || this._init();
            var a =
                cc._renderContext,
                b = this._valueDict;
            b["gl.vendor"] = a.getParameter(a.VENDOR);
            b["gl.renderer"] = a.getParameter(a.RENDERER);
            b["gl.version"] = a.getParameter(a.VERSION);
            this._GlExtensions = "";
            for (var c = a.getSupportedExtensions(), d = 0; d < c.length; d++) this._GlExtensions += c[d] + " ";
            this._maxTextureSize = a.getParameter(a.MAX_TEXTURE_SIZE);
            b["gl.max_texture_size"] = this._maxTextureSize;
            this._maxTextureUnits = a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS);
            b["gl.max_texture_units"] = this._maxTextureUnits;
            this._supportsPVRTC =
                this.checkForGLExtension("GL_IMG_texture_compression_pvrtc");
            b["gl.supports_PVRTC"] = this._supportsPVRTC;
            this._supportsNPOT = !1;
            b["gl.supports_NPOT"] = this._supportsNPOT;
            this._supportsBGRA8888 = this.checkForGLExtension("GL_IMG_texture_format_BGRA888");
            b["gl.supports_BGRA8888"] = this._supportsBGRA8888;
            this._supportsDiscardFramebuffer = this.checkForGLExtension("GL_EXT_discard_framebuffer");
            b["gl.supports_discard_framebuffer"] = this._supportsDiscardFramebuffer;
            this._supportsShareableVAO = this.checkForGLExtension("vertex_array_object");
            b["gl.supports_vertex_array_object"] = this._supportsShareableVAO;
            cc.checkGLErrorDebug()
        }
    },
    loadConfigFile: function (a) {
        this._inited || this._init();
        var b = cc.loader.getRes(a);
        if (!b) throw Error("Please load the resource first : " + a);
        cc.assert(b, cc._LogInfos.configuration_loadConfigFile_2, a);
        if (b = b.data)
            for (var c in b) this._valueDict[c] = b[c];
        else cc.log(cc._LogInfos.configuration_loadConfigFile, a)
    }
};
cc.g_NumberOfDraws = 0;
cc.Director = cc.Class.extend({
    _landscape: !1,
    _nextDeltaTimeZero: !1,
    _paused: !1,
    _purgeDirectorInNextLoop: !1,
    _sendCleanupToScene: !1,
    _animationInterval: 0,
    _oldAnimationInterval: 0,
    _projection: 0,
    _contentScaleFactor: 1,
    _deltaTime: 0,
    _winSizeInPoints: null,
    _lastUpdate: null,
    _nextScene: null,
    _notificationNode: null,
    _openGLView: null,
    _scenesStack: null,
    _projectionDelegate: null,
    _runningScene: null,
    _totalFrames: 0,
    _secondsPerFrame: 0,
    _dirtyRegion: null,
    _scheduler: null,
    _actionManager: null,
    _eventProjectionChanged: null,
    _eventAfterUpdate: null,
    _eventAfterVisit: null,
    _eventAfterDraw: null,
    ctor: function () {
        var a = this;
        a._lastUpdate = Date.now();
        cc.eventManager.addCustomListener(cc.game.EVENT_SHOW, function () {
            a._lastUpdate = Date.now()
        })
    },
    init: function () {
        this._oldAnimationInterval = this._animationInterval = 1 / cc.defaultFPS;
        this._scenesStack = [];
        this._projection = cc.Director.PROJECTION_DEFAULT;
        this._projectionDelegate = null;
        this._totalFrames = 0;
        this._lastUpdate = Date.now();
        this._purgeDirectorInNextLoop = this._paused = !1;
        this._winSizeInPoints = cc.size(0, 0);
        this._openGLView =
            null;
        this._contentScaleFactor = 1;
        this._scheduler = new cc.Scheduler;
        this._actionManager = cc.ActionManager ? new cc.ActionManager : null;
        this._eventAfterUpdate = new cc.EventCustom(cc.Director.EVENT_AFTER_UPDATE);
        this._eventAfterUpdate.setUserData(this);
        this._eventAfterVisit = new cc.EventCustom(cc.Director.EVENT_AFTER_VISIT);
        this._eventAfterVisit.setUserData(this);
        this._eventAfterDraw = new cc.EventCustom(cc.Director.EVENT_AFTER_DRAW);
        this._eventAfterDraw.setUserData(this);
        this._eventProjectionChanged = new cc.EventCustom(cc.Director.EVENT_PROJECTION_CHANGED);
        this._eventProjectionChanged.setUserData(this);
        return !0
    },
    calculateDeltaTime: function () {
        var a = Date.now();
        this._nextDeltaTimeZero ? (this._deltaTime = 0, this._nextDeltaTimeZero = !1) : this._deltaTime = (a - this._lastUpdate) / 1E3;
        0 < cc.game.config[cc.game.CONFIG_KEY.debugMode] && 0.2 < this._deltaTime && (this._deltaTime = 1 / 60);
        this._lastUpdate = a
    },
    convertToGL: function (a) {
        var b = document.documentElement,
            c = cc.view,
            d = b.getBoundingClientRect();
        d.left += window.pageXOffset - b.clientLeft;
        d.top += window.pageYOffset - b.clientTop;
        b =
            c._devicePixelRatio * (a.x - d.left);
        a = c._devicePixelRatio * (d.top + d.height - a.y);
        return c._isRotated ? {
            x: c._viewPortRect.width - a,
            y: b
        } : {
            x: b,
            y: a
        }
    },
    convertToUI: function (a) {
        var b = document.documentElement,
            c = cc.view,
            d = b.getBoundingClientRect();
        d.left += window.pageXOffset - b.clientLeft;
        d.top += window.pageYOffset - b.clientTop;
        b = {
            x: 0,
            y: 0
        };
        c._isRotated ? (b.x = d.left + a.y / c._devicePixelRatio, b.y = d.top + d.height - (c._viewPortRect.width - a.x) / c._devicePixelRatio) : (b.x = d.left + a.x / c._devicePixelRatio, b.y = d.top + d.height - a.y / c._devicePixelRatio);
        return b
    },
    drawScene: function () {
        var a = cc.renderer;
        this.calculateDeltaTime();
        this._paused || (this._actionManager.update(this._deltaTime), this._scheduler.update(this._deltaTime), cc.eventManager.dispatchEvent(this._eventAfterUpdate));
        this._nextScene && this.setNextScene();
        this._runningScene && (a.childrenOrderDirty ? (cc.renderer.clearRenderCommands(), cc.renderer.assignedZ = 0, this._runningScene._renderCmd._curLevel = 0, this._runningScene.visit(), a.resetFlag()) : a.transformDirty() && a.transform());
        a.clear();
        this._notificationNode &&
            this._notificationNode.visit();
        cc.eventManager.dispatchEvent(this._eventAfterVisit);
        cc.g_NumberOfDraws = 0;
        a.rendering(cc._renderContext);
        this._totalFrames++;
        cc.eventManager.dispatchEvent(this._eventAfterDraw);
        cc.eventManager.frameUpdateListeners();
        this._calculateMPF()
    },
    end: function () {
        this._purgeDirectorInNextLoop = !0
    },
    getContentScaleFactor: function () {
        return this._contentScaleFactor
    },
    getNotificationNode: function () {
        return this._notificationNode
    },
    getWinSize: function () {
        return cc.size(this._winSizeInPoints)
    },
    getWinSizeInPixels: function () {
        return cc.size(this._winSizeInPoints.width * this._contentScaleFactor, this._winSizeInPoints.height * this._contentScaleFactor)
    },
    getVisibleSize: null,
    getVisibleOrigin: null,
    getZEye: null,
    pause: function () {
        this._paused || (this._oldAnimationInterval = this._animationInterval, this.setAnimationInterval(0.25), this._paused = !0)
    },
    popScene: function () {
        cc.assert(this._runningScene, cc._LogInfos.Director_popScene);
        this._scenesStack.pop();
        var a = this._scenesStack.length;
        0 === a ? this.end() : (this._sendCleanupToScene = !0, this._nextScene = this._scenesStack[a - 1])
    },
    purgeCachedData: function () {
        cc.animationCache._clear();
        cc.spriteFrameCache._clear();
        cc.textureCache._clear()
    },
    purgeDirector: function () {
        this.getScheduler().unscheduleAll();
        cc.eventManager && cc.eventManager.setEnabled(!1);
        this._runningScene && (this._runningScene._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart), this._runningScene._performRecursive(cc.Node._stateCallbackType.onExit), this._runningScene._performRecursive(cc.Node._stateCallbackType.cleanup));
        this._nextScene = this._runningScene = null;
        this._scenesStack.length = 0;
        this.stopAnimation();
        this.purgeCachedData();
        cc.checkGLErrorDebug()
    },
    pushScene: function (a) {
        cc.assert(a, cc._LogInfos.Director_pushScene);
        this._sendCleanupToScene = !1;
        this._scenesStack.push(a);
        this._nextScene = a
    },
    runScene: function (a) {
        cc.assert(a, cc._LogInfos.Director_pushScene);
        if (this._runningScene) {
            var b = this._scenesStack.length;
            0 === b ? (this._sendCleanupToScene = !0, this._scenesStack[b] = a) : (this._sendCleanupToScene = !0, this._scenesStack[b -
                1] = a);
            this._nextScene = a
        } else this.pushScene(a), this.startAnimation()
    },
    resume: function () {
        this._paused && (this.setAnimationInterval(this._oldAnimationInterval), (this._lastUpdate = Date.now()) || cc.log(cc._LogInfos.Director_resume), this._paused = !1, this._deltaTime = 0)
    },
    setContentScaleFactor: function (a) {
        a !== this._contentScaleFactor && (this._contentScaleFactor = a)
    },
    setDepthTest: null,
    setClearColor: null,
    setDefaultValues: function () {},
    setNextDeltaTimeZero: function (a) {
        this._nextDeltaTimeZero = a
    },
    setNextScene: function () {
        var a = !1,
            b = !1;
        cc.TransitionScene && (a = this._runningScene ? this._runningScene instanceof cc.TransitionScene : !1, b = this._nextScene ? this._nextScene instanceof cc.TransitionScene : !1);
        if (!b) {
            if (b = this._runningScene) b._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart), b._performRecursive(cc.Node._stateCallbackType.onExit);
            this._sendCleanupToScene && b && b._performRecursive(cc.Node._stateCallbackType.cleanup)
        }
        this._runningScene = this._nextScene;
        cc.renderer.childrenOrderDirty = !0;
        this._nextScene = null;
        !a && null !== this._runningScene && (this._runningScene._performRecursive(cc.Node._stateCallbackType.onEnter), this._runningScene._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish))
    },
    setNotificationNode: function (a) {
        cc.renderer.childrenOrderDirty = !0;
        this._notificationNode && (this._notificationNode._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart), this._notificationNode._performRecursive(cc.Node._stateCallbackType.onExit), this._notificationNode._performRecursive(cc.Node._stateCallbackType.cleanup));
        if (this._notificationNode = a) this._notificationNode._performRecursive(cc.Node._stateCallbackType.onEnter), this._notificationNode._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish)
    },
    getDelegate: function () {
        return this._projectionDelegate
    },
    setDelegate: function (a) {
        this._projectionDelegate = a
    },
    setOpenGLView: null,
    setProjection: null,
    setViewport: null,
    getOpenGLView: null,
    getProjection: null,
    setAlphaBlending: null,
    isSendCleanupToScene: function () {
        return this._sendCleanupToScene
    },
    getRunningScene: function () {
        return this._runningScene
    },
    getAnimationInterval: function () {
        return this._animationInterval
    },
    isDisplayStats: function () {
        return cc.profiler ? cc.profiler.isShowingStats() : !1
    },
    setDisplayStats: function (a) {
        cc.profiler && (a ? cc.profiler.showStats() : cc.profiler.hideStats())
    },
    getSecondsPerFrame: function () {
        return this._secondsPerFrame
    },
    isNextDeltaTimeZero: function () {
        return this._nextDeltaTimeZero
    },
    isPaused: function () {
        return this._paused
    },
    getTotalFrames: function () {
        return this._totalFrames
    },
    popToRootScene: function () {
        this.popToSceneStackLevel(1)
    },
    popToSceneStackLevel: function (a) {
        cc.assert(this._runningScene, cc._LogInfos.Director_popToSceneStackLevel_2);
        var b = this._scenesStack,
            c = b.length;
        if (0 === a) this.end();
        else if (!(a >= c)) {
            for (; c > a;) {
                var d = b.pop();
                d.running && (d._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart), d._performRecursive(cc.Node._stateCallbackType.onExit));
                d._performRecursive(cc.Node._stateCallbackType.cleanup);
                c--
            }
            this._nextScene = b[b.length - 1];
            this._sendCleanupToScene = !0
        }
    },
    getScheduler: function () {
        return this._scheduler
    },
    setScheduler: function (a) {
        this._scheduler !== a && (this._scheduler = a)
    },
    getActionManager: function () {
        return this._actionManager
    },
    setActionManager: function (a) {
        this._actionManager !== a && (this._actionManager = a)
    },
    getDeltaTime: function () {
        return this._deltaTime
    },
    _calculateMPF: function () {
        this._secondsPerFrame = (Date.now() - this._lastUpdate) / 1E3
    }
});
cc.Director.EVENT_PROJECTION_CHANGED = "director_projection_changed";
cc.Director.EVENT_AFTER_UPDATE = "director_after_update";
cc.Director.EVENT_AFTER_VISIT = "director_after_visit";
cc.Director.EVENT_AFTER_DRAW = "director_after_draw";
cc.DisplayLinkDirector = cc.Director.extend({
    invalid: !1,
    startAnimation: function () {
        this._nextDeltaTimeZero = !0;
        this.invalid = !1
    },
    mainLoop: function () {
        this._purgeDirectorInNextLoop ? (this._purgeDirectorInNextLoop = !1, this.purgeDirector()) : this.invalid || this.drawScene()
    },
    stopAnimation: function () {
        this.invalid = !0
    },
    setAnimationInterval: function (a) {
        this._animationInterval = a;
        this.invalid || (this.stopAnimation(), this.startAnimation())
    }
});
cc.Director.sharedDirector = null;
cc.Director.firstUseDirector = !0;
cc.Director._getInstance = function () {
    cc.Director.firstUseDirector && (cc.Director.firstUseDirector = !1, cc.Director.sharedDirector = new cc.DisplayLinkDirector, cc.Director.sharedDirector.init());
    return cc.Director.sharedDirector
};
cc.defaultFPS = 60;
cc.Director.PROJECTION_2D = 0;
cc.Director.PROJECTION_3D = 1;
cc.Director.PROJECTION_CUSTOM = 3;
cc.Director.PROJECTION_DEFAULT = cc.Director.PROJECTION_2D;
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
    if (cc._renderType === cc.game.RENDER_TYPE_CANVAS) {
        var a = cc.Director.prototype;
        a.getProjection = function (a) {
            return this._projection
        };
        a.setProjection = function (a) {
            this._projection = a;
            cc.eventManager.dispatchEvent(this._eventProjectionChanged)
        };
        a.setDepthTest = function () {};
        a.setClearColor = function (a) {
            cc.renderer._clearColor = a;
            cc.renderer._clearFillStyle = "rgb(" + a.r + "," + a.g + "," + a.b + ")"
        };
        a.setOpenGLView = function (a) {
            this._winSizeInPoints.width =
                cc._canvas.width;
            this._winSizeInPoints.height = cc._canvas.height;
            this._openGLView = a || cc.view;
            cc.eventManager && cc.eventManager.setEnabled(!0)
        };
        a.getVisibleSize = function () {
            return this.getWinSize()
        };
        a.getVisibleOrigin = function () {
            return cc.p(0, 0)
        }
    } else cc.Director._fpsImage = new Image, cc.Director._fpsImage.addEventListener("load", function () {
        cc.Director._fpsImageLoaded = !0
    }), cc._fpsImage && (cc.Director._fpsImage.src = cc._fpsImage)
});
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
    if (cc._renderType === cc.game.RENDER_TYPE_WEBGL) {
        cc.DirectorDelegate = cc.Class.extend({
            updateProjection: function () {}
        });
        var a = cc.Director.prototype,
            b = function (a) {
                if (a && a._renderCmd) {
                    a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
                    var d = a._children;
                    for (a = 0; a < d.length; a++) b(d[a])
                }
            };
        cc.eventManager.addCustomListener(cc.Director.EVENT_PROJECTION_CHANGED, function () {
            for (var a = cc.director._scenesStack, d = 0; d < a.length; d++) b(a[d])
        });
        a.setProjection = function (a) {
            var b = this._winSizeInPoints;
            this.setViewport();
            var f = this._openGLView,
                g = f._viewPortRect.x / f._scaleX,
                h = f._viewPortRect.y / f._scaleY;
            switch (a) {
            case cc.Director.PROJECTION_2D:
                cc.kmGLMatrixMode(cc.KM_GL_PROJECTION);
                cc.kmGLLoadIdentity();
                f = cc.math.Matrix4.createOrthographicProjection(0, b.width, 0, b.height, -1024, 1024);
                cc.kmGLMultMatrix(f);
                cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW);
                cc.kmGLLoadIdentity();
                break;
            case cc.Director.PROJECTION_3D:
                var m = this.getZEye(),
                    n = new cc.math.Matrix4,
                    f = new cc.math.Matrix4;
                cc.kmGLMatrixMode(cc.KM_GL_PROJECTION);
                cc.kmGLLoadIdentity();
                n = cc.math.Matrix4.createPerspectiveProjection(60, b.width / b.height, 0.1, 2 * m);
                cc.kmGLMultMatrix(n);
                m = new cc.math.Vec3(-g + b.width / 2, -h + b.height / 2, m);
                b = new cc.math.Vec3(-g + b.width / 2, -h + b.height / 2, 0);
                g = new cc.math.Vec3(0, 1, 0);
                f.lookAt(m, b, g);
                cc.kmGLMultMatrix(f);
                cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW);
                cc.kmGLLoadIdentity();
                break;
            case cc.Director.PROJECTION_CUSTOM:
                this._projectionDelegate && this._projectionDelegate.updateProjection();
                break;
            default:
                cc.log(cc._LogInfos.Director_setProjection)
            }
            this._projection = a;
            cc.eventManager.dispatchEvent(this._eventProjectionChanged);
            cc.setProjectionMatrixDirty();
            cc.renderer.childrenOrderDirty = !0
        };
        a.setDepthTest = function (a) {
            cc.renderer.setDepthTest(a)
        };
        a.setClearColor = function (a) {
            cc.renderer._clearColor = a
        };
        a.setOpenGLView = function (a) {
            this._winSizeInPoints.width = cc._canvas.width;
            this._winSizeInPoints.height = cc._canvas.height;
            this._openGLView = a || cc.view;
            a = cc.configuration;
            a.gatherGPUInfo();
            a.dumpInfo();
            this.setGLDefaultValues();
            cc.eventManager && cc.eventManager.setEnabled(!0)
        };
        a.getVisibleSize = function () {
            return this._openGLView.getVisibleSize()
        };
        a.getVisibleOrigin = function () {
            return this._openGLView.getVisibleOrigin()
        };
        a.getZEye = function () {
            return this._winSizeInPoints.height / 1.1546999375
        };
        a.setViewport = function () {
            var a = this._openGLView;
            if (a) {
                var b = this._winSizeInPoints;
                a.setViewPortInPoints(-a._viewPortRect.x / a._scaleX, -a._viewPortRect.y / a._scaleY, b.width, b.height)
            }
        };
        a.getOpenGLView = function () {
            return this._openGLView
        };
        a.getProjection = function () {
            return this._projection
        };
        a.setAlphaBlending = function (a) {
            a ? cc.glBlendFunc(cc.BLEND_SRC, cc.BLEND_DST) : cc.glBlendFunc(cc._renderContext.ONE, cc._renderContext.ZERO)
        };
        a.setGLDefaultValues = function () {
            this.setAlphaBlending(!0);
            this.setProjection(this._projection);
            cc._renderContext.clearColor(0, 0, 0, 0)
        }
    }
});
(function () {
    var a = function (a, b, c, d, f, g, h) {
            this.prev = a;
            this.next = b;
            this.callback = c;
            this.target = d;
            this.priority = f;
            this.paused = g;
            this.markedForDeletion = h
        },
        b = [];
    a.get = function (c, d, f, g, h, m, z) {
        var t = b.pop();
        t ? (t.prev = c, t.next = d, t.callback = f, t.target = g, t.priority = h, t.paused = m, t.markedForDeletion = z) : t = new a(c, d, f, g, h, m, z);
        return t
    };
    a.put = function (a) {
        a.prev = null;
        a.next = null;
        a.callback = null;
        a.target = null;
        a.priority = 0;
        a.paused = !1;
        a.markedForDeletion = !1;
        20 > b.length && b.push(a)
    };
    var c = function (a, b, c, d) {
            this.list =
                a;
            this.entry = b;
            this.target = c;
            this.callback = d
        },
        d = [];
    c.get = function (a, b, f, g) {
        var h = d.pop();
        h ? (h.list = a, h.entry = b, h.target = f, h.callback = g) : h = new c(a, b, f, g);
        return h
    };
    c.put = function (a) {
        a.list = null;
        a.entry = null;
        a.target = null;
        a.callback = null;
        20 > d.length && d.push(a)
    };
    var f = function (a, b, c, d, f, g) {
            this.timers = a;
            this.target = b;
            this.timerIndex = c;
            this.currentTimer = d;
            this.currentTimerSalvaged = f;
            this.paused = g
        },
        g = [];
    f.get = function (a, b, c, d, h, m) {
        var z = g.pop();
        z ? (z.timers = a, z.target = b, z.timerIndex = c, z.currentTimer = d,
            z.currentTimerSalvaged = h, z.paused = m) : z = new f(a, b, c, d, h, m);
        return z
    };
    f.put = function (a) {
        a.timers = null;
        a.target = null;
        a.timerIndex = 0;
        a.currentTimer = null;
        a.currentTimerSalvaged = !1;
        a.paused = !1;
        20 > g.length && g.push(a)
    };
    var h = function () {
        this._scheduler = null;
        this._elapsed = -1;
        this._useDelay = this._runForever = !1;
        this._interval = this._delay = this._repeat = this._timesExecuted = 0;
        this._key = this._callback = this._target = null
    };
    cc.inject({
        initWithCallback: function (a, b, c, d, f, g, h) {
            this._scheduler = a;
            this._target = c;
            this._callback =
                b;
            h && (this._key = h);
            this._elapsed = -1;
            this._interval = d;
            this._delay = g;
            this._useDelay = 0 < this._delay;
            this._repeat = f;
            this._runForever = this._repeat === cc.REPEAT_FOREVER;
            return !0
        },
        getInterval: function () {
            return this._interval
        },
        setInterval: function (a) {
            this._interval = a
        },
        update: function (a) {
            -1 === this._elapsed ? this._timesExecuted = this._elapsed = 0 : (this._elapsed += a, this._runForever && !this._useDelay ? this._elapsed >= this._interval && (this.trigger(), this._elapsed = 0) : (this._useDelay ? this._elapsed >= this._delay && (this.trigger(),
                this._elapsed -= this._delay, this._timesExecuted += 1, this._useDelay = !1) : this._elapsed >= this._interval && (this.trigger(), this._elapsed = 0, this._timesExecuted += 1), this._callback && (!this._runForever && this._timesExecuted > this._repeat) && this.cancel()))
        },
        getCallback: function () {
            return this._callback
        },
        getKey: function () {
            return this._key
        },
        trigger: function () {
            this._target && this._callback && this._callback.call(this._target, this._elapsed)
        },
        cancel: function () {
            this._scheduler.unschedule(this._callback, this._target)
        }
    }, h.prototype);
    var m = [];
    h.get = function () {
        return m.pop() || new h
    };
    h.put = function (a) {
        a._scheduler = null;
        a._elapsed = -1;
        a._runForever = !1;
        a._useDelay = !1;
        a._timesExecuted = 0;
        a._repeat = 0;
        a._delay = 0;
        a._interval = 0;
        a._target = null;
        a._callback = null;
        a._key = null;
        20 > m.length && m.push(a)
    };
    cc.Scheduler = cc.Class.extend({
        _timeScale: 1,
        _updatesNegList: null,
        _updates0List: null,
        _updatesPosList: null,
        _hashForTimers: null,
        _arrayForTimers: null,
        _hashForUpdates: null,
        _currentTarget: null,
        _currentTargetSalvaged: !1,
        _updateHashLocked: !1,
        ctor: function () {
            this._timeScale =
                1;
            this._updatesNegList = [];
            this._updates0List = [];
            this._updatesPosList = [];
            this._hashForUpdates = {};
            this._hashForTimers = {};
            this._currentTarget = null;
            this._updateHashLocked = this._currentTargetSalvaged = !1;
            this._arrayForTimers = []
        },
        _schedulePerFrame: function (a, b, c, d) {
            var f = this._hashForUpdates[b.__instanceId];
            if (f && f.entry)
                if (f.entry.priority !== c) {
                    if (this._updateHashLocked) {
                        cc.log("warning: you CANNOT change update priority in scheduled function");
                        f.entry.markedForDeletion = !1;
                        f.entry.paused = d;
                        return
                    }
                    this.unscheduleUpdate(b)
                } else {
                    f.entry.markedForDeletion = !1;
                    f.entry.paused = d;
                    return
                } 0 === c ? this._appendIn(this._updates0List, a, b, d) : 0 > c ? this._priorityIn(this._updatesNegList, a, b, c, d) : this._priorityIn(this._updatesPosList, a, b, c, d)
        },
        _removeHashElement: function (a) {
            delete this._hashForTimers[a.target.__instanceId];
            for (var b = this._arrayForTimers, c = 0, d = b.length; c < d; c++)
                if (b[c] === a) {
                    b.splice(c, 1);
                    break
                } f.put(a)
        },
        _removeUpdateFromHash: function (b) {
            if (element = this._hashForUpdates[b.target.__instanceId]) {
                b = element.list;
                for (var d = element.entry, f = 0, g = b.length; f < g; f++)
                    if (b[f] ===
                        d) {
                        b.splice(f, 1);
                        break
                    } delete this._hashForUpdates[element.target.__instanceId];
                a.put(d);
                c.put(element)
            }
        },
        _priorityIn: function (b, d, f, g, h) {
            d = a.get(null, null, d, f, g, h, !1);
            if (b) {
                h = b.length - 1;
                for (var m = 0; m <= h && !(g < b[m].priority); m++);
                b.splice(m, 0, d)
            } else b = [], b.push(d);
            this._hashForUpdates[f.__instanceId] = c.get(b, d, f, null);
            return b
        },
        _appendIn: function (b, d, f, g) {
            d = a.get(null, null, d, f, 0, g, !1);
            b.push(d);
            this._hashForUpdates[f.__instanceId] = c.get(b, d, f, null, null)
        },
        setTimeScale: function (a) {
            this._timeScale = a
        },
        getTimeScale: function () {
            return this._timeScale
        },
        update: function (a) {
            this._updateHashLocked = !0;
            1 !== this._timeScale && (a *= this._timeScale);
            var b, c, d, f;
            b = 0;
            c = this._updatesNegList;
            for (d = c.length; b < d; b++) f = c[b], !f.paused && !f.markedForDeletion && f.callback(a);
            b = 0;
            c = this._updates0List;
            for (d = c.length; b < d; b++) f = c[b], !f.paused && !f.markedForDeletion && f.callback(a);
            b = 0;
            c = this._updatesPosList;
            for (d = c.length; b < d; b++) f = c[b], !f.paused && !f.markedForDeletion && f.callback(a);
            d = this._arrayForTimers;
            for (b = 0; b < d.length; b++) {
                this._currentTarget =
                    c = d[b];
                this._currentTargetSalvaged = !1;
                if (!c.paused)
                    for (c.timerIndex = 0; c.timerIndex < c.timers.length; ++c.timerIndex) c.currentTimer = c.timers[c.timerIndex], c.currentTimerSalvaged = !1, c.currentTimer.update(a), c.currentTimer = null;
                this._currentTargetSalvaged && 0 === this._currentTarget.timers.length && this._removeHashElement(this._currentTarget)
            }
            b = 0;
            for (c = this._updatesNegList; b < c.length;) f = c[b], f.markedForDeletion ? this._removeUpdateFromHash(f) : b++;
            b = 0;
            for (c = this._updates0List; b < c.length;) f = c[b], f.markedForDeletion ?
                this._removeUpdateFromHash(f) : b++;
            b = 0;
            for (c = this._updatesPosList; b < c.length;) f = c[b], f.markedForDeletion ? this._removeUpdateFromHash(f) : b++;
            this._updateHashLocked = !1;
            this._currentTarget = null
        },
        scheduleCallbackForTarget: function (a, b, c, d, f, g) {
            this.schedule(b, a, c, d, f, g, a.__instanceId + "")
        },
        schedule: function (a, b, c, d, g, m, z) {
            if ("function" !== typeof a) {
                var t = a;
                a = b;
                b = t
            }
            if (4 === arguments.length || 5 === arguments.length) z = g, m = d, d = cc.REPEAT_FOREVER, g = 0;
            void 0 === z && (z = b.__instanceId + "");
            cc.assert(b, cc._LogInfos.Scheduler_scheduleCallbackForTarget_3);
            (t = this._hashForTimers[b.__instanceId]) ? cc.assert(t.paused === m, ""): (t = f.get(null, b, 0, null, null, m), this._arrayForTimers.push(t), this._hashForTimers[b.__instanceId] = t);
            var A, w;
            if (null == t.timers) t.timers = [];
            else
                for (w = 0; w < t.timers.length; w++)
                    if (A = t.timers[w], a === A._callback) {
                        cc.log(cc._LogInfos.Scheduler_scheduleCallbackForTarget, A.getInterval().toFixed(4), c.toFixed(4));
                        A._interval = c;
                        return
                    } A = h.get();
            A.initWithCallback(this, a, b, c, d, g, z);
            t.timers.push(A)
        },
        scheduleUpdate: function (a, b, c) {
            this._schedulePerFrame(function (b) {
                    a.update(b)
                },
                a, b, c)
        },
        _getUnscheduleMark: function (a, b) {
            switch (typeof a) {
            case "number":
            case "string":
                return a === b._key;
            case "function":
                return a === b._callback
            }
        },
        unschedule: function (a, b) {
            if (b && a) {
                var c = this._hashForTimers[b.__instanceId];
                if (c)
                    for (var d = c.timers, f = 0, g = d.length; f < g; f++) {
                        var m = d[f];
                        if (this._getUnscheduleMark(a, m)) {
                            m === c.currentTimer && !c.currentTimerSalvaged && (c.currentTimerSalvaged = !0);
                            d.splice(f, 1);
                            h.put(m);
                            c.timerIndex >= f && c.timerIndex--;
                            0 === d.length && (this._currentTarget === c ? this._currentTargetSalvaged = !0 : this._removeHashElement(c));
                            break
                        }
                    }
            }
        },
        unscheduleUpdate: function (a) {
            if (a && (a = this._hashForUpdates[a.__instanceId])) this._updateHashLocked ? a.entry.markedForDeletion = !0 : this._removeUpdateFromHash(a.entry)
        },
        unscheduleAllForTarget: function (a) {
            if (a) {
                var b = this._hashForTimers[a.__instanceId];
                if (b) {
                    var c = b.timers; - 1 < c.indexOf(b.currentTimer) && !b.currentTimerSalvaged && (b.currentTimerSalvaged = !0);
                    for (var d = 0, f = c.length; d < f; d++) h.put(c[d]);
                    c.length = 0;
                    this._currentTarget === b ? this._currentTargetSalvaged = !0 :
                        this._removeHashElement(b)
                }
                this.unscheduleUpdate(a)
            }
        },
        unscheduleAll: function () {
            this.unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)
        },
        unscheduleAllWithMinPriority: function (a) {
            var b, c, d = this._arrayForTimers;
            for (b = d.length - 1; 0 <= b; b--) c = d[b], this.unscheduleAllForTarget(c.target);
            d = 0;
            if (0 > a)
                for (b = 0; b < this._updatesNegList.length;) d = this._updatesNegList.length, (c = this._updatesNegList[b]) && c.priority >= a && this.unscheduleUpdate(c.target), d == this._updatesNegList.length && b++;
            if (0 >= a)
                for (b = 0; b < this._updates0List.length;) d =
                    this._updates0List.length, (c = this._updates0List[b]) && this.unscheduleUpdate(c.target), d == this._updates0List.length && b++;
            for (b = 0; b < this._updatesPosList.length;) d = this._updatesPosList.length, (c = this._updatesPosList[b]) && c.priority >= a && this.unscheduleUpdate(c.target), d == this._updatesPosList.length && b++
        },
        isScheduled: function (a, b) {
            cc.assert(a, "Argument callback must not be empty");
            cc.assert(b, "Argument target must be non-nullptr");
            var c = this._hashForTimers[b.__instanceId];
            if (!c) return !1;
            if (null != c.timers)
                for (var c =
                        c.timers, d = 0; d < c.length; ++d)
                    if (a === c[d]._callback) return !0;
            return !1
        },
        pauseAllTargets: function () {
            return this.pauseAllTargetsWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)
        },
        pauseAllTargetsWithMinPriority: function (a) {
            var b = [],
                c, d = this._arrayForTimers,
                f, g;
            f = 0;
            for (g = d.length; f < g; f++)
                if (c = d[f]) c.paused = !0, b.push(c.target);
            if (0 > a)
                for (f = 0; f < this._updatesNegList.length; f++)
                    if ((c = this._updatesNegList[f]) && c.priority >= a) c.paused = !0, b.push(c.target);
            if (0 >= a)
                for (f = 0; f < this._updates0List.length; f++)
                    if (c = this._updates0List[f]) c.paused = !0, b.push(c.target);
            for (f = 0; f < this._updatesPosList.length; f++)
                if ((c = this._updatesPosList[f]) && c.priority >= a) c.paused = !0, b.push(c.target);
            return b
        },
        resumeTargets: function (a) {
            if (a)
                for (var b = 0; b < a.length; b++) this.resumeTarget(a[b])
        },
        pauseTarget: function (a) {
            cc.assert(a, cc._LogInfos.Scheduler_pauseTarget);
            var b = this._hashForTimers[a.__instanceId];
            b && (b.paused = !0);
            (a = this._hashForUpdates[a.__instanceId]) && (a.entry.paused = !0)
        },
        resumeTarget: function (a) {
            cc.assert(a, cc._LogInfos.Scheduler_resumeTarget);
            var b =
                this._hashForTimers[a.__instanceId];
            b && (b.paused = !1);
            (a = this._hashForUpdates[a.__instanceId]) && (a.entry.paused = !1)
        },
        isTargetPaused: function (a) {
            cc.assert(a, cc._LogInfos.Scheduler_isTargetPaused);
            var b = this._hashForTimers[a.__instanceId];
            return b ? b.paused : (a = this._hashForUpdates[a.__instanceId]) ? a.entry.paused : !1
        },
        scheduleUpdateForTarget: function (a, b, c) {
            this.scheduleUpdate(a, b, c)
        },
        unscheduleCallbackForTarget: function (a, b) {
            this.unschedule(b, a)
        },
        unscheduleUpdateForTarget: function (a) {
            this.unscheduleUpdate(a)
        },
        unscheduleAllCallbacksForTarget: function (a) {
            this.unschedule(a.__instanceId + "", a)
        },
        unscheduleAllCallbacks: function () {
            this.unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)
        },
        unscheduleAllCallbacksWithMinPriority: function (a) {
            this.unscheduleAllWithMinPriority(a)
        }
    });
    cc.Scheduler.PRIORITY_SYSTEM = -2147483648;
    cc.Scheduler.PRIORITY_NON_SYSTEM = cc.Scheduler.PRIORITY_SYSTEM + 1
})();
cc.PI2 = 2 * Math.PI;
cc.DrawingPrimitiveCanvas = cc.Class.extend({
    _cacheArray: [],
    _renderContext: null,
    ctor: function (a) {
        this._renderContext = a
    },
    drawPoint: function (a, b) {
        b || (b = 1);
        var c = cc.view.getScaleX(),
            d = cc.view.getScaleY(),
            d = cc.p(a.x * c, a.y * d),
            f = this._renderContext.getContext();
        f.beginPath();
        f.arc(d.x, -d.y, b * c, 0, 2 * Math.PI, !1);
        f.closePath();
        f.fill()
    },
    drawPoints: function (a, b, c) {
        if (null != a) {
            c || (c = 1);
            b = this._renderContext.getContext();
            var d = cc.view.getScaleX(),
                f = cc.view.getScaleY();
            b.beginPath();
            for (var g = 0, h = a.length; g < h; g++) b.arc(a[g].x *
                d, -a[g].y * f, c * d, 0, 2 * Math.PI, !1);
            b.closePath();
            b.fill()
        }
    },
    drawLine: function (a, b) {
        var c = this._renderContext.getContext();
        cc.view.getScaleX();
        cc.view.getScaleY();
        c.beginPath();
        c.moveTo(a.x, -a.y);
        c.lineTo(b.x, -b.y);
        c.closePath();
        c.stroke()
    },
    drawRect: function (a, b) {
        this.drawLine(cc.p(a.x, a.y), cc.p(b.x, a.y));
        this.drawLine(cc.p(b.x, a.y), cc.p(b.x, b.y));
        this.drawLine(cc.p(b.x, b.y), cc.p(a.x, b.y));
        this.drawLine(cc.p(a.x, b.y), cc.p(a.x, a.y))
    },
    drawSolidRect: function (a, b, c) {
        a = [a, cc.p(b.x, a.y), b, cc.p(a.x, b.y)];
        this.drawSolidPoly(a,
            4, c)
    },
    drawPoly: function (a, b, c, d) {
        d = d || !1;
        if (null != a) {
            if (3 > a.length) throw Error("Polygon's point must greater than 2");
            var f = a[0];
            b = this._renderContext.getContext();
            cc.view.getScaleX();
            cc.view.getScaleY();
            b.beginPath();
            b.moveTo(f.x, -f.y);
            for (var f = 1, g = a.length; f < g; f++) b.lineTo(a[f].x, -a[f].y);
            c && b.closePath();
            d ? b.fill() : b.stroke()
        }
    },
    drawSolidPoly: function (a, b, c) {
        this.setDrawColor(c.r, c.g, c.b, c.a);
        this.drawPoly(a, b, !0, !0)
    },
    drawCircle: function (a, b, c, d, f) {
        f = f || !1;
        d = this._renderContext.getContext();
        cc.view.getScaleX();
        cc.view.getScaleY();
        d.beginPath();
        d.arc(0 | a.x, 0 | -a.y, b, -c, -(c - 2 * Math.PI), !1);
        f && d.lineTo(0 | a.x, 0 | -a.y);
        d.stroke()
    },
    drawQuadBezier: function (a, b, c, d) {
        for (var f = this._cacheArray, g = f.length = 0, h = 0; h < d; h++) {
            var m = Math.pow(1 - g, 2) * a.x + 2 * (1 - g) * g * b.x + g * g * c.x,
                n = Math.pow(1 - g, 2) * a.y + 2 * (1 - g) * g * b.y + g * g * c.y;
            f.push(cc.p(m, n));
            g += 1 / d
        }
        f.push(cc.p(c.x, c.y));
        this.drawPoly(f, d + 1, !1, !1)
    },
    drawCubicBezier: function (a, b, c, d, f) {
        for (var g = this._cacheArray, h = g.length = 0, m = 0; m < f; m++) {
            var n = Math.pow(1 - h, 3) * a.x + 3 * Math.pow(1 - h, 2) *
                h * b.x + 3 * (1 - h) * h * h * c.x + h * h * h * d.x,
                p = Math.pow(1 - h, 3) * a.y + 3 * Math.pow(1 - h, 2) * h * b.y + 3 * (1 - h) * h * h * c.y + h * h * h * d.y;
            g.push(cc.p(n, p));
            h += 1 / f
        }
        g.push(cc.p(d.x, d.y));
        this.drawPoly(g, f + 1, !1, !1)
    },
    drawCatmullRom: function (a, b) {
        this.drawCardinalSpline(a, 0.5, b)
    },
    drawCardinalSpline: function (a, b, c) {
        cc._renderContext.setStrokeStyle("rgba(255,255,255,1)");
        var d = this._cacheArray;
        d.length = 0;
        for (var f, g, h = 1 / a.length, m = 0; m < c + 1; m++) g = m / c, 1 === g ? (f = a.length - 1, g = 1) : (f = 0 | g / h, g = (g - h * f) / h), f = cc.CardinalSplineAt(cc.getControlPointAt(a,
            f - 1), cc.getControlPointAt(a, f - 0), cc.getControlPointAt(a, f + 1), cc.getControlPointAt(a, f + 2), b, g), d.push(f);
        this.drawPoly(d, c + 1, !1, !1)
    },
    drawImage: function (a, b, c, d, f) {
        var g = arguments.length,
            h = this._renderContext.getContext();
        switch (g) {
        case 2:
            h.drawImage(a, b.x, -(b.y + a.height));
            break;
        case 3:
            h.drawImage(a, b.x, -(b.y + c.height), c.width, c.height);
            break;
        case 5:
            h.drawImage(a, b.x, b.y, c.width, c.height, d.x, -(d.y + f.height), f.width, f.height);
            break;
        default:
            throw Error("Argument must be non-nil");
        }
    },
    drawStar: function (a,
        b, c) {
        a = a || this._renderContext;
        var d = a.getContext();
        c = "rgba(" + (0 | c.r) + "," + (0 | c.g) + "," + (0 | c.b);
        a.setFillStyle(c + ",1)");
        var f = b / 10;
        d.beginPath();
        d.moveTo(-b, b);
        d.lineTo(0, f);
        d.lineTo(b, b);
        d.lineTo(f, 0);
        d.lineTo(b, -b);
        d.lineTo(0, -f);
        d.lineTo(-b, -b);
        d.lineTo(-f, 0);
        d.lineTo(-b, b);
        d.closePath();
        d.fill();
        var g = d.createRadialGradient(0, 0, f, 0, 0, b);
        g.addColorStop(0, c + ", 1)");
        g.addColorStop(0.3, c + ", 0.8)");
        g.addColorStop(1, c + ", 0.0)");
        a.setFillStyle(g);
        d.beginPath();
        d.arc(0, 0, b - f, 0, cc.PI2, !1);
        d.closePath();
        d.fill()
    },
    drawColorBall: function (a, b, c) {
        a = a || this._renderContext;
        var d = a.getContext();
        b *= cc.view.getScaleX();
        c = "rgba(" + (0 | c.r) + "," + (0 | c.g) + "," + (0 | c.b);
        var f = d.createRadialGradient(0, 0, b / 10, 0, 0, b);
        f.addColorStop(0, c + ", 1)");
        f.addColorStop(0.3, c + ", 0.8)");
        f.addColorStop(0.6, c + ", 0.4)");
        f.addColorStop(1, c + ", 0.0)");
        a.setFillStyle(f);
        d.beginPath();
        d.arc(0, 0, b, 0, cc.PI2, !1);
        d.closePath();
        d.fill()
    },
    fillText: function (a, b, c) {
        this._renderContext.getContext().fillText(a, b, -c)
    },
    setDrawColor: function (a, b, c, d) {
        this._renderContext.setFillStyle("rgba(" +
            a + "," + b + "," + c + "," + d / 255 + ")");
        this._renderContext.setStrokeStyle("rgba(" + a + "," + b + "," + c + "," + d / 255 + ")")
    },
    setPointSize: function (a) {},
    setLineWidth: function (a) {
        this._renderContext.getContext().lineWidth = a * cc.view.getScaleX()
    }
});
cc.DrawingPrimitiveWebGL = cc.Class.extend({
    _renderContext: null,
    _initialized: !1,
    _shader: null,
    _colorLocation: "u_color",
    _colorArray: null,
    _pointSizeLocation: "u_pointSize",
    _pointSize: -1,
    ctor: function (a) {
        null == a && (a = cc._renderContext);
        if (!a instanceof WebGLRenderingContext) throw Error("Can't initialise DrawingPrimitiveWebGL. context need is WebGLRenderingContext");
        this._renderContext = a;
        this._colorArray = new Float32Array([1, 1, 1, 1])
    },
    lazy_init: function () {
        this._initialized || (this._shader = cc.shaderCache.programForKey(cc.SHADER_POSITION_UCOLOR),
            this._shader._addUniformLocation(this._colorLocation), this._shader._addUniformLocation(this._pointSizeLocation), this._initialized = !0)
    },
    drawInit: function () {
        this._initialized = !1
    },
    drawPoint: function (a) {
        this.lazy_init();
        var b = this._renderContext;
        this._shader.use();
        this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
        b.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
        this._shader.setUniformLocationWith4fv(this._colorLocation, this._colorArray);
        this._shader.setUniformLocationWith1f(this._pointSizeLocation,
            this._pointSize);
        var c = b.createBuffer();
        b.bindBuffer(b.ARRAY_BUFFER, c);
        b.bufferData(b.ARRAY_BUFFER, new Float32Array([a.x, a.y]), b.STATIC_DRAW);
        b.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, b.FLOAT, !1, 0, 0);
        b.drawArrays(b.POINTS, 0, 1);
        b.deleteBuffer(c);
        cc.incrementGLDraws(1)
    },
    drawPoints: function (a, b) {
        if (a && 0 !== a.length) {
            this.lazy_init();
            var c = this._renderContext;
            this._shader.use();
            this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
            c.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
            this._shader.setUniformLocationWith4fv(this._colorLocation, this._colorArray);
            this._shader.setUniformLocationWith1f(this._pointSizeLocation, this._pointSize);
            var d = c.createBuffer();
            c.bindBuffer(c.ARRAY_BUFFER, d);
            c.bufferData(c.ARRAY_BUFFER, this._pointsToTypeArray(a), c.STATIC_DRAW);
            c.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, c.FLOAT, !1, 0, 0);
            c.drawArrays(c.POINTS, 0, a.length);
            c.deleteBuffer(d);
            cc.incrementGLDraws(1)
        }
    },
    _pointsToTypeArray: function (a) {
        for (var b = new Float32Array(2 * a.length), c = 0; c < a.length; c++) b[2 *
            c] = a[c].x, b[2 * c + 1] = a[c].y;
        return b
    },
    drawLine: function (a, b) {
        this.lazy_init();
        var c = this._renderContext;
        this._shader.use();
        this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
        c.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
        this._shader.setUniformLocationWith4fv(this._colorLocation, this._colorArray);
        var d = c.createBuffer();
        c.bindBuffer(c.ARRAY_BUFFER, d);
        c.bufferData(c.ARRAY_BUFFER, this._pointsToTypeArray([a, b]), c.STATIC_DRAW);
        c.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, c.FLOAT,
            !1, 0, 0);
        c.drawArrays(c.LINES, 0, 2);
        c.deleteBuffer(d);
        cc.incrementGLDraws(1)
    },
    drawRect: function (a, b) {
        this.drawLine(cc.p(a.x, a.y), cc.p(b.x, a.y));
        this.drawLine(cc.p(b.x, a.y), cc.p(b.x, b.y));
        this.drawLine(cc.p(b.x, b.y), cc.p(a.x, b.y));
        this.drawLine(cc.p(a.x, b.y), cc.p(a.x, a.y))
    },
    drawSolidRect: function (a, b, c) {
        a = [a, cc.p(b.x, a.y), b, cc.p(a.x, b.y)];
        this.drawSolidPoly(a, 4, c)
    },
    drawPoly: function (a, b, c) {
        this.lazy_init();
        b = this._renderContext;
        this._shader.use();
        this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
        b.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
        this._shader.setUniformLocationWith4fv(this._colorLocation, this._colorArray);
        var d = b.createBuffer();
        b.bindBuffer(b.ARRAY_BUFFER, d);
        b.bufferData(b.ARRAY_BUFFER, this._pointsToTypeArray(a), b.STATIC_DRAW);
        b.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, b.FLOAT, !1, 0, 0);
        c ? b.drawArrays(b.LINE_LOOP, 0, a.length) : b.drawArrays(b.LINE_STRIP, 0, a.length);
        b.deleteBuffer(d);
        cc.incrementGLDraws(1)
    },
    drawSolidPoly: function (a, b, c) {
        this.lazy_init();
        c && this.setDrawColor(c.r,
            c.g, c.b, c.a);
        b = this._renderContext;
        this._shader.use();
        this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
        b.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
        this._shader.setUniformLocationWith4fv(this._colorLocation, this._colorArray);
        c = b.createBuffer();
        b.bindBuffer(b.ARRAY_BUFFER, c);
        b.bufferData(b.ARRAY_BUFFER, this._pointsToTypeArray(a), b.STATIC_DRAW);
        b.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, b.FLOAT, !1, 0, 0);
        b.drawArrays(b.TRIANGLE_FAN, 0, a.length);
        b.deleteBuffer(c);
        cc.incrementGLDraws(1)
    },
    drawCircle: function (a, b, c, d, f) {
        this.lazy_init();
        var g = 1;
        f && g++;
        var h = 2 * Math.PI / d;
        if (f = new Float32Array(2 * (d + 2))) {
            for (var m = 0; m <= d; m++) {
                var n = m * h,
                    p = b * Math.cos(n + c) + a.x,
                    n = b * Math.sin(n + c) + a.y;
                f[2 * m] = p;
                f[2 * m + 1] = n
            }
            f[2 * (d + 1)] = a.x;
            f[2 * (d + 1) + 1] = a.y;
            a = this._renderContext;
            this._shader.use();
            this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
            a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
            this._shader.setUniformLocationWith4fv(this._colorLocation, this._colorArray);
            b = a.createBuffer();
            a.bindBuffer(a.ARRAY_BUFFER,
                b);
            a.bufferData(a.ARRAY_BUFFER, f, a.STATIC_DRAW);
            a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, a.FLOAT, !1, 0, 0);
            a.drawArrays(a.LINE_STRIP, 0, d + g);
            a.deleteBuffer(b);
            cc.incrementGLDraws(1)
        }
    },
    drawQuadBezier: function (a, b, c, d) {
        this.lazy_init();
        for (var f = new Float32Array(2 * (d + 1)), g = 0, h = 0; h < d; h++) f[2 * h] = Math.pow(1 - g, 2) * a.x + 2 * (1 - g) * g * b.x + g * g * c.x, f[2 * h + 1] = Math.pow(1 - g, 2) * a.y + 2 * (1 - g) * g * b.y + g * g * c.y, g += 1 / d;
        f[2 * d] = c.x;
        f[2 * d + 1] = c.y;
        a = this._renderContext;
        this._shader.use();
        this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
        a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
        this._shader.setUniformLocationWith4fv(this._colorLocation, this._colorArray);
        b = a.createBuffer();
        a.bindBuffer(a.ARRAY_BUFFER, b);
        a.bufferData(a.ARRAY_BUFFER, f, a.STATIC_DRAW);
        a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, a.FLOAT, !1, 0, 0);
        a.drawArrays(a.LINE_STRIP, 0, d + 1);
        a.deleteBuffer(b);
        cc.incrementGLDraws(1)
    },
    drawCubicBezier: function (a, b, c, d, f) {
        this.lazy_init();
        for (var g = new Float32Array(2 * (f + 1)), h = 0, m = 0; m < f; m++) g[2 * m] = Math.pow(1 - h, 3) * a.x + 3 * Math.pow(1 -
            h, 2) * h * b.x + 3 * (1 - h) * h * h * c.x + h * h * h * d.x, g[2 * m + 1] = Math.pow(1 - h, 3) * a.y + 3 * Math.pow(1 - h, 2) * h * b.y + 3 * (1 - h) * h * h * c.y + h * h * h * d.y, h += 1 / f;
        g[2 * f] = d.x;
        g[2 * f + 1] = d.y;
        a = this._renderContext;
        this._shader.use();
        this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
        a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
        this._shader.setUniformLocationWith4fv(this._colorLocation, this._colorArray);
        b = a.createBuffer();
        a.bindBuffer(a.ARRAY_BUFFER, b);
        a.bufferData(a.ARRAY_BUFFER, g, a.STATIC_DRAW);
        a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,
            2, a.FLOAT, !1, 0, 0);
        a.drawArrays(a.LINE_STRIP, 0, f + 1);
        a.deleteBuffer(b);
        cc.incrementGLDraws(1)
    },
    drawCatmullRom: function (a, b) {
        this.drawCardinalSpline(a, 0.5, b)
    },
    drawCardinalSpline: function (a, b, c) {
        this.lazy_init();
        for (var d = new Float32Array(2 * (c + 1)), f, g, h = 1 / a.length, m = 0; m < c + 1; m++) g = m / c, 1 === g ? (f = a.length - 1, g = 1) : (f = 0 | g / h, g = (g - h * f) / h), f = cc.cardinalSplineAt(cc.getControlPointAt(a, f - 1), cc.getControlPointAt(a, f), cc.getControlPointAt(a, f + 1), cc.getControlPointAt(a, f + 2), b, g), d[2 * m] = f.x, d[2 * m + 1] = f.y;
        a = this._renderContext;
        this._shader.use();
        this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
        a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
        this._shader.setUniformLocationWith4fv(this._colorLocation, this._colorArray);
        b = a.createBuffer();
        a.bindBuffer(a.ARRAY_BUFFER, b);
        a.bufferData(a.ARRAY_BUFFER, d, a.STATIC_DRAW);
        a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, a.FLOAT, !1, 0, 0);
        a.drawArrays(a.LINE_STRIP, 0, c + 1);
        a.deleteBuffer(b);
        cc.incrementGLDraws(1)
    },
    setDrawColor: function (a, b, c, d) {
        this._colorArray[0] =
            a / 255;
        this._colorArray[1] = b / 255;
        this._colorArray[2] = c / 255;
        this._colorArray[3] = d / 255
    },
    setPointSize: function (a) {
        this._pointSize = a * cc.contentScaleFactor()
    },
    setLineWidth: function (a) {
        this._renderContext.lineWidth && this._renderContext.lineWidth(a)
    }
});
cc._tmp.PrototypeLabelTTF = function () {
    var a = cc.LabelTTF.prototype;
    cc.defineGetterSetter(a, "color", a.getColor, a.setColor);
    cc.defineGetterSetter(a, "opacity", a.getOpacity, a.setOpacity);
    cc.defineGetterSetter(a, "string", a.getString, a.setString);
    cc.defineGetterSetter(a, "textAlign", a.getHorizontalAlignment, a.setHorizontalAlignment);
    cc.defineGetterSetter(a, "verticalAlign", a.getVerticalAlignment, a.setVerticalAlignment);
    cc.defineGetterSetter(a, "fontSize", a.getFontSize, a.setFontSize);
    cc.defineGetterSetter(a,
        "fontName", a.getFontName, a.setFontName);
    cc.defineGetterSetter(a, "font", a._getFont, a._setFont);
    cc.defineGetterSetter(a, "boundingWidth", a._getBoundingWidth, a._setBoundingWidth);
    cc.defineGetterSetter(a, "boundingHeight", a._getBoundingHeight, a._setBoundingHeight);
    cc.defineGetterSetter(a, "fillStyle", a._getFillStyle, a.setFontFillColor);
    cc.defineGetterSetter(a, "strokeStyle", a._getStrokeStyle, a._setStrokeStyle);
    cc.defineGetterSetter(a, "lineWidth", a._getLineWidth, a._setLineWidth);
    cc.defineGetterSetter(a, "shadowOffsetX",
        a._getShadowOffsetX, a._setShadowOffsetX);
    cc.defineGetterSetter(a, "shadowOffsetY", a._getShadowOffsetY, a._setShadowOffsetY);
    cc.defineGetterSetter(a, "shadowOpacity", a._getShadowOpacity, a._setShadowOpacity);
    cc.defineGetterSetter(a, "shadowBlur", a._getShadowBlur, a._setShadowBlur)
};
cc.LabelTTF = cc.Sprite.extend({
    _dimensions: null,
    _hAlignment: cc.TEXT_ALIGNMENT_CENTER,
    _vAlignment: cc.VERTICAL_TEXT_ALIGNMENT_TOP,
    _fontName: null,
    _fontSize: 0,
    _string: "",
    _originalText: null,
    _onCacheCanvasMode: !0,
    _shadowEnabled: !1,
    _shadowOffset: null,
    _shadowOpacity: 0,
    _shadowBlur: 0,
    _shadowColor: null,
    _strokeEnabled: !1,
    _strokeColor: null,
    _strokeSize: 0,
    _textFillColor: null,
    _strokeShadowOffsetX: 0,
    _strokeShadowOffsetY: 0,
    _needUpdateTexture: !1,
    _lineWidths: null,
    _className: "LabelTTF",
    _fontStyle: "normal",
    _fontWeight: "normal",
    _lineHeight: "normal",
    initWithString: function (a, b, c, d, f, g) {
        a = a ? a + "" : "";
        c = c || 16;
        d = d || cc.size(0, 0);
        f = f || cc.TEXT_ALIGNMENT_LEFT;
        g = g || cc.VERTICAL_TEXT_ALIGNMENT_TOP;
        this._opacityModifyRGB = !1;
        this._dimensions = cc.size(d.width, d.height);
        this._fontName = b || "Arial";
        this._hAlignment = f;
        this._vAlignment = g;
        this._fontSize = c;
        this._renderCmd._setFontStyle(this._fontName, c, this._fontStyle, this._fontWeight);
        this.string = a;
        this._renderCmd._setColorsString();
        this._renderCmd._updateTexture();
        this._setUpdateTextureDirty();
        this._scaleX = this._scaleY = 1 / cc.view.getDevicePixelRatio();
        return !0
    },
    _setUpdateTextureDirty: function () {
        this._needUpdateTexture = !0;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.textDirty)
    },
    ctor: function (a, b, c, d, f, g) {
        cc.Sprite.prototype.ctor.call(this);
        this._dimensions = cc.size(0, 0);
        this._hAlignment = cc.TEXT_ALIGNMENT_LEFT;
        this._vAlignment = cc.VERTICAL_TEXT_ALIGNMENT_TOP;
        this._opacityModifyRGB = !1;
        this._fontName = "Arial";
        this._shadowEnabled = !1;
        this._shadowOffset = cc.p(0, 0);
        this._shadowBlur = this._shadowOpacity =
            0;
        this._strokeEnabled = !1;
        this._strokeColor = cc.color(255, 255, 255, 255);
        this._strokeSize = 0;
        this._textFillColor = cc.color(255, 255, 255, 255);
        this._strokeShadowOffsetY = this._strokeShadowOffsetX = 0;
        this._needUpdateTexture = !1;
        this._lineWidths = [];
        this._renderCmd._setColorsString();
        this._textureLoaded = !0;
        b && b instanceof cc.FontDefinition ? (this.initWithStringAndTextDefinition(a, b), this._renderCmd._updateTexture(), this._setUpdateTextureDirty(), this._scaleX = this._scaleY = 1 / cc.view.getDevicePixelRatio()) : cc.LabelTTF.prototype.initWithString.call(this,
            a, b, c, d, f, g)
    },
    init: function () {
        return this.initWithString(" ", this._fontName, this._fontSize)
    },
    description: function () {
        return "<cc.LabelTTF | FontName =" + this._fontName + " FontSize = " + this._fontSize.toFixed(1) + ">"
    },
    getLineHeight: function () {
        return !this._lineHeight || this._lineHeight.charAt ? this._renderCmd._getFontClientHeight() : this._lineHeight || this._renderCmd._getFontClientHeight()
    },
    setLineHeight: function (a) {
        this._lineHeight = a
    },
    getString: function () {
        return this._string
    },
    getHorizontalAlignment: function () {
        return this._hAlignment
    },
    getVerticalAlignment: function () {
        return this._vAlignment
    },
    getDimensions: function () {
        return cc.size(this._dimensions)
    },
    getFontSize: function () {
        return this._fontSize
    },
    getFontName: function () {
        return this._fontName
    },
    initWithStringAndTextDefinition: function (a, b) {
        this._updateWithTextDefinition(b, !1);
        this.string = a;
        return !0
    },
    setTextDefinition: function (a) {
        a && this._updateWithTextDefinition(a, !0)
    },
    getTextDefinition: function () {
        return this._prepareTextDefinition(!1)
    },
    enableShadow: function (a, b, c, d) {
        null != a.r && null !=
            a.g && null != a.b && null != a.a ? this._enableShadow(a, b, c) : this._enableShadowNoneColor(a, b, c, d)
    },
    _enableShadowNoneColor: function (a, b, c, d) {
        c = c || 0.5;
        !1 === this._shadowEnabled && (this._shadowEnabled = !0);
        var f = this._shadowOffset;
        if (f && f.x !== a || f._y !== b) f.x = a, f.y = b;
        this._shadowOpacity !== c && (this._shadowOpacity = c);
        this._renderCmd._setColorsString();
        this._shadowBlur !== d && (this._shadowBlur = d);
        this._setUpdateTextureDirty()
    },
    _enableShadow: function (a, b, c) {
        this._shadowColor || (this._shadowColor = cc.color(255, 255, 255, 128));
        this._shadowColor.r = a.r;
        this._shadowColor.g = a.g;
        this._shadowColor.b = a.b;
        this._enableShadowNoneColor(b.width || b.x || 0, b.height || b.y || 0, null != a.a ? a.a / 255 : 0.5, c)
    },
    _getShadowOffsetX: function () {
        return this._shadowOffset.x
    },
    _setShadowOffsetX: function (a) {
        !1 === this._shadowEnabled && (this._shadowEnabled = !0);
        this._shadowOffset.x !== a && (this._shadowOffset.x = a, this._setUpdateTextureDirty())
    },
    _getShadowOffsetY: function () {
        return this._shadowOffset._y
    },
    _setShadowOffsetY: function (a) {
        !1 === this._shadowEnabled && (this._shadowEnabled = !0);
        this._shadowOffset._y !== a && (this._shadowOffset._y = a, this._setUpdateTextureDirty())
    },
    _getShadowOffset: function () {
        return cc.p(this._shadowOffset.x, this._shadowOffset.y)
    },
    _setShadowOffset: function (a) {
        !1 === this._shadowEnabled && (this._shadowEnabled = !0);
        if (this._shadowOffset.x !== a.x || this._shadowOffset.y !== a.y) this._shadowOffset.x = a.x, this._shadowOffset.y = a.y, this._setUpdateTextureDirty()
    },
    _getShadowOpacity: function () {
        return this._shadowOpacity
    },
    _setShadowOpacity: function (a) {
        !1 === this._shadowEnabled &&
            (this._shadowEnabled = !0);
        this._shadowOpacity !== a && (this._shadowOpacity = a, this._renderCmd._setColorsString(), this._setUpdateTextureDirty())
    },
    _getShadowBlur: function () {
        return this._shadowBlur
    },
    _setShadowBlur: function (a) {
        !1 === this._shadowEnabled && (this._shadowEnabled = !0);
        this._shadowBlur !== a && (this._shadowBlur = a, this._setUpdateTextureDirty())
    },
    disableShadow: function () {
        this._shadowEnabled && (this._shadowEnabled = !1, this._setUpdateTextureDirty())
    },
    enableStroke: function (a, b) {
        !1 === this._strokeEnabled && (this._strokeEnabled = !0);
        var c = this._strokeColor;
        if (c.r !== a.r || c.g !== a.g || c.b !== a.b) c.r = a.r, c.g = a.g, c.b = a.b, this._renderCmd._setColorsString();
        this._strokeSize !== b && (this._strokeSize = b || 0);
        this._setUpdateTextureDirty()
    },
    _getStrokeStyle: function () {
        return this._strokeColor
    },
    _setStrokeStyle: function (a) {
        !1 === this._strokeEnabled && (this._strokeEnabled = !0);
        var b = this._strokeColor;
        if (b.r !== a.r || b.g !== a.g || b.b !== a.b) b.r = a.r, b.g = a.g, b.b = a.b, this._renderCmd._setColorsString(), this._setUpdateTextureDirty()
    },
    _getLineWidth: function () {
        return this._strokeSize
    },
    _setLineWidth: function (a) {
        !1 === this._strokeEnabled && (this._strokeEnabled = !0);
        this._strokeSize !== a && (this._strokeSize = a || 0, this._setUpdateTextureDirty())
    },
    disableStroke: function () {
        this._strokeEnabled && (this._strokeEnabled = !1, this._setUpdateTextureDirty())
    },
    setFontFillColor: function (a) {
        var b = this._textFillColor;
        if (b.r !== a.r || b.g !== a.g || b.b !== a.b) b.r = a.r, b.g = a.g, b.b = a.b, this._renderCmd._setColorsString(), this._needUpdateTexture = !0
    },
    _getFillStyle: function () {
        return this._textFillColor
    },
    _updateWithTextDefinition: function (a,
        b) {
        a.fontDimensions ? (this._dimensions.width = a.boundingWidth, this._dimensions.height = a.boundingHeight) : (this._dimensions.width = 0, this._dimensions.height = 0);
        this._hAlignment = a.textAlign;
        this._vAlignment = a.verticalAlign;
        this._fontName = a.fontName;
        this._fontSize = a.fontSize || 12;
        this._lineHeight = a.lineHeight ? a.lineHeight : this._fontSize;
        this._renderCmd._setFontStyle(a);
        a.shadowEnabled && this.enableShadow(a.shadowOffsetX, a.shadowOffsetY, a.shadowOpacity, a.shadowBlur);
        a.strokeEnabled && this.enableStroke(a.strokeStyle,
            a.lineWidth);
        this.setFontFillColor(a.fillStyle);
        b && this._renderCmd._updateTexture();
        var c = cc.Node._dirtyFlags;
        this._renderCmd.setDirtyFlag(c.colorDirty | c.opacityDirty | c.textDirty)
    },
    _prepareTextDefinition: function (a) {
        var b = new cc.FontDefinition;
        a ? (b.fontSize = this._fontSize, b.boundingWidth = cc.contentScaleFactor() * this._dimensions.width, b.boundingHeight = cc.contentScaleFactor() * this._dimensions.height) : (b.fontSize = this._fontSize, b.boundingWidth = this._dimensions.width, b.boundingHeight = this._dimensions.height);
        b.fontName = this._fontName;
        b.textAlign = this._hAlignment;
        b.verticalAlign = this._vAlignment;
        if (this._strokeEnabled) {
            b.strokeEnabled = !0;
            var c = this._strokeColor;
            b.strokeStyle = cc.color(c.r, c.g, c.b);
            b.lineWidth = this._strokeSize
        } else b.strokeEnabled = !1;
        this._shadowEnabled ? (b.shadowEnabled = !0, b.shadowBlur = this._shadowBlur, b.shadowOpacity = this._shadowOpacity, b.shadowOffsetX = (a ? cc.contentScaleFactor() : 1) * this._shadowOffset.x, b.shadowOffsetY = (a ? cc.contentScaleFactor() : 1) * this._shadowOffset.y) : b._shadowEnabled = !1;
        a = this._textFillColor;
        b.fillStyle = cc.color(a.r, a.g, a.b);
        return b
    },
    getScale: function () {
        this._scaleX !== this._scaleY && cc.log(cc._LogInfos.Node_getScale);
        return this._scaleX * cc.view.getDevicePixelRatio()
    },
    setScale: function (a, b) {
        var c = cc.view.getDevicePixelRatio();
        this._scaleX = a / c;
        this._scaleY = (b || 0 === b ? b : a) / c;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    getScaleX: function () {
        return this._scaleX * cc.view.getDevicePixelRatio()
    },
    setScaleX: function (a) {
        this._scaleX = a / cc.view.getDevicePixelRatio();
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    getScaleY: function () {
        return this._scaleY * cc.view.getDevicePixelRatio()
    },
    setScaleY: function (a) {
        this._scaleY = a / cc.view.getDevicePixelRatio();
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    setString: function (a) {
        a = String(a);
        this._originalText !== a && (this._originalText = a + "", this._updateString(), this._setUpdateTextureDirty(), this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty))
    },
    _updateString: function () {
        if ((!this._string ||
                "" === this._string) && this._string !== this._originalText) cc.renderer.childrenOrderDirty = !0;
        this._string = this._originalText
    },
    setHorizontalAlignment: function (a) {
        a !== this._hAlignment && (this._hAlignment = a, this._setUpdateTextureDirty())
    },
    setVerticalAlignment: function (a) {
        a !== this._vAlignment && (this._vAlignment = a, this._setUpdateTextureDirty())
    },
    setDimensions: function (a, b) {
        var c;
        void 0 === b ? (c = a.width, b = a.height) : c = a;
        if (c !== this._dimensions.width || b !== this._dimensions.height) this._dimensions.width = c, this._dimensions.height =
            b, this._updateString(), this._setUpdateTextureDirty()
    },
    _getBoundingWidth: function () {
        return this._dimensions.width
    },
    _setBoundingWidth: function (a) {
        a !== this._dimensions.width && (this._dimensions.width = a, this._updateString(), this._setUpdateTextureDirty())
    },
    _getBoundingHeight: function () {
        return this._dimensions.height
    },
    _setBoundingHeight: function (a) {
        a !== this._dimensions.height && (this._dimensions.height = a, this._updateString(), this._setUpdateTextureDirty())
    },
    setFontSize: function (a) {
        this._fontSize !== a && (this._fontSize =
            a, this._renderCmd._setFontStyle(this._fontName, this._fontSize, this._fontStyle, this._fontWeight), this._setUpdateTextureDirty())
    },
    setFontName: function (a) {
        this._fontName && this._fontName !== a && (this._fontName = a, this._renderCmd._setFontStyle(this._fontName, this._fontSize, this._fontStyle, this._fontWeight), this._setUpdateTextureDirty())
    },
    _getFont: function () {
        return this._renderCmd._getFontStyle()
    },
    _setFont: function (a) {
        if (a = cc.LabelTTF._fontStyleRE.exec(a)) this._fontSize = parseInt(a[1]), this._fontName = a[2],
            this._renderCmd._setFontStyle(this._fontName, this._fontSize, this._fontStyle, this._fontWeight), this._setUpdateTextureDirty()
    },
    getContentSize: function () {
        this._needUpdateTexture && this._renderCmd._updateTTF();
        var a = cc.view.getDevicePixelRatio();
        return cc.size(this._contentSize.width / a, this._contentSize.height / a)
    },
    _getWidth: function () {
        this._needUpdateTexture && this._renderCmd._updateTTF();
        return this._contentSize.width / cc.view.getDevicePixelRatio()
    },
    _getHeight: function () {
        this._needUpdateTexture && this._renderCmd._updateTTF();
        return this._contentSize.height / cc.view.getDevicePixelRatio()
    },
    setTextureRect: function (a, b, c) {
        this._rectRotated = b || !1;
        this.setContentSize(c || a);
        b = this._rect;
        b.x = a.x;
        b.y = a.y;
        b.width = a.width;
        b.height = a.height;
        this._renderCmd._setTextureCoords(a, !1);
        c = this._unflippedOffsetPositionFromCenter.x;
        var d = this._unflippedOffsetPositionFromCenter.y;
        this._flippedX && (c = -c);
        this._flippedY && (d = -d);
        this._offsetPosition.x = c + (a.width - b.width) / 2;
        this._offsetPosition.y = d + (a.height - b.height) / 2
    },
    setDrawMode: function (a) {
        this._onCacheCanvasMode =
            a
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_WEBGL ? new cc.LabelTTF.WebGLRenderCmd(this) : this._onCacheCanvasMode ? new cc.LabelTTF.CacheCanvasRenderCmd(this) : new cc.LabelTTF.CanvasRenderCmd(this)
    },
    _setFontStyle: function (a) {
        this._fontStyle !== a && (this._fontStyle = a, this._renderCmd._setFontStyle(this._fontName, this._fontSize, this._fontStyle, this._fontWeight), this._setUpdateTextureDirty())
    },
    _getFontStyle: function () {
        return this._fontStyle
    },
    _setFontWeight: function (a) {
        this._fontWeight !==
            a && (this._fontWeight = a, this._renderCmd._setFontStyle(this._fontName, this._fontSize, this._fontStyle, this._fontWeight), this._setUpdateTextureDirty())
    },
    _getFontWeight: function () {
        return this._fontWeight
    }
});
cc.assert(cc.isFunction(cc._tmp.PrototypeLabelTTF), cc._LogInfos.MissingFile, "LabelTTFPropertyDefine.js");
cc._tmp.PrototypeLabelTTF();
delete cc._tmp.PrototypeLabelTTF;
cc.LabelTTF._fontStyleRE = /^(\d+)px\s+['"]?([\w\s\d]+)['"]?$/;
cc.LabelTTF.create = function (a, b, c, d, f, g) {
    return new cc.LabelTTF(a, b, c, d, f, g)
};
cc.LabelTTF.createWithFontDefinition = cc.LabelTTF.create;
cc.LabelTTF.__labelHeightDiv = document.createElement("div");
cc.LabelTTF.__labelHeightDiv.style.fontFamily = "Arial";
cc.LabelTTF.__labelHeightDiv.style.position = "absolute";
cc.LabelTTF.__labelHeightDiv.style.left = "-100px";
cc.LabelTTF.__labelHeightDiv.style.top = "-100px";
cc.LabelTTF.__labelHeightDiv.style.lineHeight = "normal";
document.body ? document.body.appendChild(cc.LabelTTF.__labelHeightDiv) : window.addEventListener("load", function () {
    this.removeEventListener("load", arguments.callee, !1);
    document.body.appendChild(cc.LabelTTF.__labelHeightDiv)
}, !1);
cc.LabelTTF.__getFontHeightByDiv = function (a, b) {
    var c, d = cc.LabelTTF.__labelHeightDiv;
    if (a instanceof cc.FontDefinition) {
        c = cc.LabelTTF.__fontHeightCache[a._getCanvasFontStr()];
        if (0 < c) return c;
        d.innerHTML = "ajghl~!";
        d.style.fontFamily = a.fontName;
        d.style.fontSize = a.fontSize + "px";
        d.style.fontStyle = a.fontStyle;
        d.style.fontWeight = a.fontWeight;
        c = d.clientHeight;
        cc.LabelTTF.__fontHeightCache[a._getCanvasFontStr()] = c
    } else {
        c = cc.LabelTTF.__fontHeightCache[a + "." + b];
        if (0 < c) return c;
        d.innerHTML = "ajghl~!";
        d.style.fontFamily =
            a;
        d.style.fontSize = b + "px";
        c = d.clientHeight;
        cc.LabelTTF.__fontHeightCache[a + "." + b] = c
    }
    d.innerHTML = "";
    return c
};
cc.LabelTTF.__fontHeightCache = {};
cc.LabelTTF._textAlign = ["left", "center", "right"];
cc.LabelTTF._textBaseline = ["top", "middle", "bottom"];
cc.LabelTTF.wrapInspection = !0;
cc.LabelTTF._wordRex = /([a-zA-Z0-9\u00c4\u00d6\u00dc\u00e4\u00f6\u00fc\u00df\u00e9\u00e8\u00e7\u00e0\u00f9\u00ea\u00e2\u00ee\u00f4\u00fb]+|\S)/;
cc.LabelTTF._symbolRex = /^[!,.:;}\]%\?>\u3001\u2018\u201c\u300b\uff1f\u3002\uff0c\uff01]/;
cc.LabelTTF._lastWordRex = /([a-zA-Z0-9\u00c4\u00d6\u00dc\u00e4\u00f6\u00fc\u00df\u00e9\u00e8\u00e7\u00e0\u00f9\u00ea\u00e2\u00ee\u00f4\u00fb]+|\S)$/;
cc.LabelTTF._lastEnglish = /[a-zA-Z0-9\u00c4\u00d6\u00dc\u00e4\u00f6\u00fc\u00df\u00e9\u00e8\u00e7\u00e0\u00f9\u00ea\u00e2\u00ee\u00f4\u00fb]+$/;
cc.LabelTTF._firsrEnglish = /^[a-zA-Z0-9\u00c4\u00d6\u00dc\u00e4\u00f6\u00fc\u00df\u00e9\u00e8\u00e7\u00e0\u00f9\u00ea\u00e2\u00ee\u00f4\u00fb]/;
(function () {
    cc.LabelTTF.RenderCmd = function () {
        this._fontClientHeight = 18;
        this._fontStyleStr = "";
        this._shadowColorStr = "rgba(128, 128, 128, 0.5)";
        this._strokeColorStr = "";
        this._fillColorStr = "rgba(255,255,255,1)";
        this._labelContext = this._labelCanvas = null;
        this._lineWidths = [];
        this._strings = [];
        this._isMultiLine = !1;
        this._status = [];
        this._renderingIndex = 0;
        this._canUseDirtyRegion = !0
    };
    var a = cc.LabelTTF.RenderCmd.prototype;
    a.constructor = cc.LabelTTF.RenderCmd;
    a._labelCmdCtor = cc.LabelTTF.RenderCmd;
    a._setFontStyle =
        function (a, b, f, g) {
            if (a instanceof cc.FontDefinition) this._fontStyleStr = a._getCanvasFontStr(), this._fontClientHeight = cc.LabelTTF.__getFontHeightByDiv(a);
            else {
                var h = b * cc.view.getDevicePixelRatio();
                this._fontStyleStr = f + " " + g + " " + h + "px '" + a + "'";
                this._fontClientHeight = cc.LabelTTF.__getFontHeightByDiv(a, b)
            }
        };
    a._getFontStyle = function () {
        return this._fontStyleStr
    };
    a._getFontClientHeight = function () {
        return this._fontClientHeight
    };
    a._updateColor = function () {
        this._setColorsString();
        this._updateTexture()
    };
    a._setColorsString =
        function () {
            var a = this._displayedColor,
                b = this._node,
                f = b._shadowColor || this._displayedColor,
                g = b._strokeColor,
                h = b._textFillColor,
                m = a.r / 255,
                n = a.g / 255,
                a = a.b / 255;
            this._shadowColorStr = "rgba(" + (0 | m * f.r) + "," + (0 | n * f.g) + "," + (0 | a * f.b) + "," + b._shadowOpacity + ")";
            this._fillColorStr = "rgba(" + (0 | m * h.r) + "," + (0 | n * h.g) + "," + (0 | a * h.b) + ", 1)";
            this._strokeColorStr = "rgba(" + (0 | m * g.r) + "," + (0 | n * g.g) + "," + (0 | a * g.b) + ", 1)"
        };
    var b = new cc.Rect;
    a.getLocalBB = function () {
        var a = this._node;
        b.x = b.y = 0;
        var d = cc.view.getDevicePixelRatio();
        b.width =
            a._getWidth() * d;
        b.height = a._getHeight() * d;
        return b
    };
    a._updateTTF = function () {
        var a = this._node,
            b = cc.view.getDevicePixelRatio(),
            f = a._dimensions.width * b,
            g, h, m = this._lineWidths;
        m.length = 0;
        this._isMultiLine = !1;
        this._measureConfig();
        var n = {};
        if (0 !== f) {
            this._strings = a._string.split("\n");
            for (g = 0; g < this._strings.length; g++) this._checkWarp(this._strings, g, f)
        } else {
            this._strings = a._string.split("\n");
            g = 0;
            for (h = this._strings.length; g < h; g++)
                if (this._strings[g]) {
                    var p = this._measure(this._strings[g]);
                    m.push(p);
                    n[this._strings[g]] =
                        p
                } else m.push(0)
        }
        1 < this._strings.length && (this._isMultiLine = !0);
        h = g = 0;
        a._strokeEnabled && (g = h = 2 * a._strokeSize);
        a._shadowEnabled && (p = a._shadowOffset, g += 2 * Math.abs(p.x), h += 2 * Math.abs(p.y));
        0 === f ? this._isMultiLine ? b = cc.size(Math.ceil(Math.max.apply(Math, m) + g), Math.ceil(this._fontClientHeight * b * this._strings.length + h)) : (p = n[a._string], !p && a._string && (p = this._measure(a._string)), b = cc.size(Math.ceil((p ? p : 0) + g), Math.ceil(this._fontClientHeight * b + h))) : b = 0 === a._dimensions.height ? this._isMultiLine ? cc.size(Math.ceil(f +
            g), Math.ceil(a.getLineHeight() * b * this._strings.length + h)) : cc.size(Math.ceil(f + g), Math.ceil(a.getLineHeight() * b + h)) : cc.size(Math.ceil(f + g), Math.ceil(a._dimensions.height * b + h));
        "normal" !== a._getFontStyle() && (b.width = Math.ceil(b.width + 0.3 * a._fontSize));
        a.setContentSize(b);
        a._strokeShadowOffsetX = g;
        a._strokeShadowOffsetY = h;
        a = a._anchorPoint;
        this._anchorPointInPoints.x = 0.5 * g + (b.width - g) * a.x;
        this._anchorPointInPoints.y = 0.5 * h + (b.height - h) * a.y
    };
    a._saveStatus = function () {
        var a = this._node,
            b = cc.view.getDevicePixelRatio(),
            f = a._strokeShadowOffsetX,
            g = a._strokeShadowOffsetY,
            h = a._contentSize.height - g,
            m = a._vAlignment,
            n = a._hAlignment,
            p = 0.5 * f,
            g = h + 0.5 * g,
            u = 0,
            v = 0,
            x = [],
            f = a._contentSize.width - f,
            a = a.getLineHeight() * b,
            b = (a - this._fontClientHeight * b) / 2,
            u = n === cc.TEXT_ALIGNMENT_RIGHT ? u + f : n === cc.TEXT_ALIGNMENT_CENTER ? u + f / 2 : u + 0;
        if (this._isMultiLine) {
            n = this._strings.length;
            m === cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM ? v = a - 2 * b + h - a * n : m === cc.VERTICAL_TEXT_ALIGNMENT_CENTER && (v = (a - 2 * b) / 2 + (h - a * n) / 2);
            for (m = 0; m < n; m++) x.push(-h + (a * m + b) + v)
        } else m !== cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM &&
            (v = m === cc.VERTICAL_TEXT_ALIGNMENT_TOP ? v - h : v - 0.5 * h), x.push(v);
        h = {
            contextTransform: cc.p(p, g),
            xOffset: u,
            OffsetYArray: x
        };
        this._status.push(h)
    };
    a._drawTTFInCanvas = function (a) {
        if (a) {
            var b = this._status.pop();
            a.setTransform(1, 0, 0, 1, b.contextTransform.x, b.contextTransform.y);
            this.drawLabels(a, b.xOffset, b.OffsetYArray)
        }
    };
    a._checkWarp = function (a, b, f) {
        var g = a[b],
            h = this._measure(g);
        if (h > f && 1 < g.length) {
            for (var m = g.length * (f / h) | 0, n = g.substr(m), p = h - this._measure(n), u, v = 0, x = 0; p > f && 100 > x++;) m *= f / p, m |= 0, n = g.substr(m),
                p = h - this._measure(n);
            for (x = 0; p < f && 100 > x++;) n && (v = (u = cc.LabelTTF._wordRex.exec(n)) ? u[0].length : 1, u = n), m += v, n = g.substr(m), p = h - this._measure(n);
            m -= v;
            0 === m && (m = 1, u = u.substr(1));
            f = g.substr(0, m);
            if (cc.LabelTTF.wrapInspection && cc.LabelTTF._symbolRex.test(u || n)) h = cc.LabelTTF._lastWordRex.exec(f), m -= h ? h[0].length : 0, 0 === m && (m = 1), u = g.substr(m), f = g.substr(0, m);
            if (cc.LabelTTF._firsrEnglish.test(u) && (h = cc.LabelTTF._lastEnglish.exec(f)) && f !== h[0]) m -= h[0].length, u = g.substr(m), f = g.substr(0, m);
            a[b] = u || n;
            a.splice(b,
                0, f)
        }
    };
    a.updateStatus = function () {
        this._dirtyFlag & cc.Node._dirtyFlags.textDirty && this._updateTexture();
        this.originUpdateStatus()
    };
    a._syncStatus = function (a) {
        var b = cc.Node._dirtyFlags,
            f = this._dirtyFlag;
        f & b.textDirty && this._updateTexture();
        this._originSyncStatus(a);
        (cc._renderType === cc.game.RENDER_TYPE_WEBGL || f & b.transformDirty) && this.transform(a)
    };
    a.drawLabels = function (a, b, f) {
        var g = this._node;
        if (g._shadowEnabled) {
            var h = g._shadowOffset;
            a.shadowColor = this._shadowColorStr;
            a.shadowOffsetX = h.x;
            a.shadowOffsetY = -h.y;
            a.shadowBlur = g._shadowBlur
        }
        var h = g._hAlignment,
            m = g._vAlignment,
            n = g._strokeSize;
        a.font !== this._fontStyleStr && (a.font = this._fontStyleStr);
        a.fillStyle = this._fillColorStr;
        if (g = g._strokeEnabled) a.lineWidth = 2 * n, a.strokeStyle = this._strokeColorStr;
        a.textBaseline = cc.LabelTTF._textBaseline[m];
        a.textAlign = cc.LabelTTF._textAlign[h];
        h = this._strings.length;
        for (m = 0; m < h; m++) n = this._strings[m], g && a.strokeText(n, b, f[m]), a.fillText(n, b, f[m]);
        cc.g_NumberOfDraws++
    }
})();
(function () {
    cc.LabelTTF.CacheRenderCmd = function () {
        this._labelCmdCtor();
        var a = this._labelCanvas = document.createElement("canvas");
        a.width = 1;
        a.height = 1;
        this._labelContext = a.getContext("2d")
    };
    cc.LabelTTF.CacheRenderCmd.prototype = Object.create(cc.LabelTTF.RenderCmd.prototype);
    cc.inject(cc.LabelTTF.RenderCmd.prototype, cc.LabelTTF.CacheRenderCmd.prototype);
    var a = cc.LabelTTF.CacheRenderCmd.prototype;
    a.constructor = cc.LabelTTF.CacheRenderCmd;
    a._cacheCmdCtor = cc.LabelTTF.CacheRenderCmd;
    a._updateTexture = function () {
        this._dirtyFlag ^=
            this._dirtyFlag & cc.Node._dirtyFlags.textDirty;
        var a = this._node;
        a._needUpdateTexture = !1;
        var c = a._contentSize;
        this._updateTTF();
        var d = c.width,
            f = c.height,
            g = this._labelContext,
            h = this._labelCanvas;
        if (!a._texture) {
            var m = new cc.Texture2D;
            m.initWithElement(this._labelCanvas);
            a.setTexture(m)
        }
        if (0 === a._string.length) return h.width = 1, h.height = c.height || 1, a._texture && a._texture.handleLoadedTexture(), a.setTextureRect(cc.rect(0, 0, 1, c.height)), !0;
        g.font = this._fontStyleStr;
        c = h.width === d && h.height === f;
        h.width = d;
        h.height =
            f;
        c && g.clearRect(0, 0, d, f);
        this._saveStatus();
        this._drawTTFInCanvas(g);
        a._texture && a._texture.handleLoadedTexture();
        a.setTextureRect(cc.rect(0, 0, d, f));
        return !0
    };
    a._measureConfig = function () {
        this._labelContext.font = this._fontStyleStr
    };
    a._measure = function (a) {
        return a ? this._labelContext.measureText(a).width : 0
    }
})();
(function () {
    cc.LabelTTF.CacheCanvasRenderCmd = function (a) {
        this._spriteCmdCtor(a);
        this._cacheCmdCtor()
    };
    var a = cc.LabelTTF.CacheCanvasRenderCmd.prototype = Object.create(cc.Sprite.CanvasRenderCmd.prototype);
    cc.inject(cc.LabelTTF.CacheRenderCmd.prototype, a);
    a.constructor = cc.LabelTTF.CacheCanvasRenderCmd
})();
(function () {
    cc.LabelTTF.CanvasRenderCmd = function (a) {
        this._spriteCmdCtor(a);
        this._labelCmdCtor()
    };
    cc.LabelTTF.CanvasRenderCmd.prototype = Object.create(cc.Sprite.CanvasRenderCmd.prototype);
    cc.inject(cc.LabelTTF.RenderCmd.prototype, cc.LabelTTF.CanvasRenderCmd.prototype);
    var a = cc.LabelTTF.CanvasRenderCmd.prototype;
    a.constructor = cc.LabelTTF.CanvasRenderCmd;
    a._measureConfig = function () {};
    a._measure = function (a) {
        if (a) {
            var c = cc._renderContext.getContext();
            c.font = this._fontStyleStr;
            return c.measureText(a).width
        }
        return 0
    };
    a._updateTexture = function () {
        this._dirtyFlag ^= this._dirtyFlag & cc.Node._dirtyFlags.textDirty;
        var a = this._node,
            c = a._contentSize;
        this._updateTTF();
        var d = c.width,
            f = c.height;
        if (0 === a._string.length) return a.setTextureRect(cc.rect(0, 0, 1, c.height)), !0;
        this._saveStatus();
        a.setTextureRect(cc.rect(0, 0, d, f));
        return !0
    };
    a.rendering = function (a) {
        var c = cc.view.getScaleX(),
            d = cc.view.getScaleY();
        a = a || cc._renderContext;
        var f = a.getContext();
        if (f) {
            var g = this._node;
            a.computeRealOffsetY();
            if (!(0 >= this._status.length)) {
                var h =
                    this._renderingIndex >= this._status.length ? this._renderingIndex - this._status.length : this._renderingIndex,
                    m = this._status[h];
                this._renderingIndex = h + 1;
                var n = g._offsetPosition.x,
                    h = -g._offsetPosition.y - g._rect.height,
                    p = this._displayedOpacity / 255;
                a.setTransform(this._worldTransform, c, d);
                a.setCompositeOperation(this._blendFuncStr);
                a.setGlobalAlpha(p);
                a.save();
                g._flippedX && (n = -n - g._rect.width, f.scale(-1, 1));
                g._flippedY && (h = g._offsetPosition.y, f.scale(1, -1));
                c = m.xOffset + m.contextTransform.x + n * c;
                g = [];
                n = this._strings.length;
                for (p = 0; p < n; p++) g.push(m.OffsetYArray[p] + m.contextTransform.y + h * d);
                this.drawLabels(f, c, g);
                a.restore()
            }
        }
    }
})();
(function () {
    cc.LabelTTF.WebGLRenderCmd = function (a) {
        this._spriteCmdCtor(a);
        this._cacheCmdCtor()
    };
    var a = cc.LabelTTF.WebGLRenderCmd.prototype = Object.create(cc.Sprite.WebGLRenderCmd.prototype);
    cc.inject(cc.LabelTTF.CacheRenderCmd.prototype, a);
    a.constructor = cc.LabelTTF.WebGLRenderCmd;
    a._updateColor = function () {}
})();
cc.HashElement = cc.Class.extend({
    actions: null,
    target: null,
    actionIndex: 0,
    currentAction: null,
    currentActionSalvaged: !1,
    paused: !1,
    ctor: function () {
        this.actions = [];
        this.target = null;
        this.actionIndex = 0;
        this.currentAction = null;
        this.paused = this.currentActionSalvaged = !1
    }
});
cc.ActionManager = cc.Class.extend({
    _hashTargets: null,
    _arrayTargets: null,
    _currentTarget: null,
    _currentTargetSalvaged: !1,
    _elementPool: [],
    _searchElementByTarget: function (a, b) {
        for (var c = 0; c < a.length; c++)
            if (b === a[c].target) return a[c];
        return null
    },
    ctor: function () {
        this._hashTargets = {};
        this._arrayTargets = [];
        this._currentTarget = null;
        this._currentTargetSalvaged = !1
    },
    _getElement: function (a, b) {
        var c = this._elementPool.pop();
        c || (c = new cc.HashElement);
        c.target = a;
        c.paused = !!b;
        return c
    },
    _putElement: function (a) {
        a.actions.length =
            0;
        a.actionIndex = 0;
        a.currentAction = null;
        a.currentActionSalvaged = !1;
        a.paused = !1;
        this._elementPool.push(a)
    },
    addAction: function (a, b, c) {
        if (!a) throw Error("cc.ActionManager.addAction(): action must be non-null");
        if (!b) throw Error("cc.ActionManager.addAction(): action must be non-null");
        var d = this._hashTargets[b.__instanceId];
        d ? d.actions || (d.actions = []) : (d = this._getElement(b, c), this._hashTargets[b.__instanceId] = d, this._arrayTargets.push(d));
        d.actions.push(a);
        a.startWithTarget(b)
    },
    removeAllActions: function () {
        for (var a =
                this._arrayTargets, b = 0; b < a.length; b++) {
            var c = a[b];
            c && this.removeAllActionsFromTarget(c.target, !0)
        }
    },
    removeAllActionsFromTarget: function (a, b) {
        if (null != a) {
            var c = this._hashTargets[a.__instanceId];
            c && (-1 !== c.actions.indexOf(c.currentAction) && !c.currentActionSalvaged && (c.currentActionSalvaged = !0), c.actions.length = 0, this._currentTarget === c && !b ? this._currentTargetSalvaged = !0 : this._deleteHashElement(c))
        }
    },
    removeAction: function (a) {
        if (null != a) {
            var b = a.getOriginalTarget();
            if (b = this._hashTargets[b.__instanceId])
                for (var c =
                        0; c < b.actions.length; c++) {
                    if (b.actions[c] === a) {
                        b.actions.splice(c, 1);
                        break
                    }
                } else cc.log(cc._LogInfos.ActionManager_removeAction)
        }
    },
    removeActionByTag: function (a, b) {
        a === cc.ACTION_TAG_INVALID && cc.log(cc._LogInfos.ActionManager_addAction);
        cc.assert(b, cc._LogInfos.ActionManager_addAction);
        var c = this._hashTargets[b.__instanceId];
        if (c)
            for (var d = c.actions.length, f = 0; f < d; ++f) {
                var g = c.actions[f];
                if (g && g.getTag() === a && g.getOriginalTarget() === b) {
                    this._removeActionAtIndex(f, c);
                    break
                }
            }
    },
    getActionByTag: function (a,
        b) {
        a === cc.ACTION_TAG_INVALID && cc.log(cc._LogInfos.ActionManager_getActionByTag);
        var c = this._hashTargets[b.__instanceId];
        if (c && null != c.actions)
            for (var d = 0; d < c.actions.length; ++d) {
                var f = c.actions[d];
                if (f && f.getTag() === a) return f
            }
        return null
    },
    numberOfRunningActionsInTarget: function (a) {
        return (a = this._hashTargets[a.__instanceId]) ? a.actions ? a.actions.length : 0 : 0
    },
    pauseTarget: function (a) {
        (a = this._hashTargets[a.__instanceId]) && (a.paused = !0)
    },
    resumeTarget: function (a) {
        (a = this._hashTargets[a.__instanceId]) &&
        (a.paused = !1)
    },
    pauseAllRunningActions: function () {
        for (var a = [], b = this._arrayTargets, c = 0; c < b.length; c++) {
            var d = b[c];
            d && !d.paused && (d.paused = !0, a.push(d.target))
        }
        return a
    },
    resumeTargets: function (a) {
        if (a)
            for (var b = 0; b < a.length; b++) a[b] && this.resumeTarget(a[b])
    },
    purgeSharedManager: function () {
        cc.director.getScheduler().unscheduleUpdate(this)
    },
    _removeActionAtIndex: function (a, b) {
        b.actions[a] === b.currentAction && !b.currentActionSalvaged && (b.currentActionSalvaged = !0);
        b.actions.splice(a, 1);
        b.actionIndex >= a &&
            b.actionIndex--;
        0 === b.actions.length && (this._currentTarget === b ? this._currentTargetSalvaged = !0 : this._deleteHashElement(b))
    },
    _deleteHashElement: function (a) {
        var b = !1;
        if (a && this._hashTargets[a.target.__instanceId]) {
            delete this._hashTargets[a.target.__instanceId];
            for (var b = this._arrayTargets, c = 0, d = b.length; c < d; c++)
                if (b[c] === a) {
                    b.splice(c, 1);
                    break
                } this._putElement(a);
            b = !0
        }
        return b
    },
    update: function (a) {
        for (var b = this._arrayTargets, c, d = 0; d < b.length; d++) {
            c = this._currentTarget = b[d];
            if (!c.paused)
                for (c.actionIndex =
                    0; c.actionIndex < (c.actions ? c.actions.length : 0); c.actionIndex++)
                    if (c.currentAction = c.actions[c.actionIndex], c.currentAction) {
                        c.currentActionSalvaged = !1;
                        c.currentAction.step(a * (c.currentAction._speedMethod ? c.currentAction._speed : 1));
                        if (c.currentActionSalvaged) c.currentAction = null;
                        else if (c.currentAction.isDone()) {
                            c.currentAction.stop();
                            var f = c.currentAction;
                            c.currentAction = null;
                            this.removeAction(f)
                        }
                        c.currentAction = null
                    } this._currentTargetSalvaged && 0 === c.actions.length && this._deleteHashElement(c) && d--
        }
    }
});
cc.profiler = function () {
    var a = !1,
        b = !1,
        c = 0,
        d = 0,
        f = 0,
        g = 0,
        h = null,
        m = document.createElement("div"),
        n = document.createElement("div"),
        p = document.createElement("div"),
        u = document.createElement("div"),
        v = 10,
        x = [0, 10, 20, 30],
        y = [0, 0, 0, 0],
        z = 3,
        t = 0,
        A = 0;
    u.id = "fps";
    u.style.position = "absolute";
    u.style.padding = "3px";
    u.style.textAlign = "left";
    u.style.backgroundColor = "rgb(0, 0, 34)";
    u.style.bottom = cc.DIRECTOR_STATS_POSITION.y + "0px";
    u.style.left = cc.DIRECTOR_STATS_POSITION.x + "px";
    u.style.width = "45px";
    u.style.height = "80px";
    for (var w = [p, n, m], B = 0; 3 > B; ++B) {
        var F = w[B].style;
        F.color = "rgb(0, 255, 255)";
        F.font = "bold 12px Helvetica, Arial";
        F.lineHeight = "20px";
        F.width = "100%";
        u.appendChild(w[B])
    }
    var C = function () {
            f = cc.director.getSecondsPerFrame();
            c++;
            g += cc.director.getDeltaTime();
            if (g > cc.DIRECTOR_FPS_INTERVAL) {
                d = c / g;
                g = c = 0;
                if (D.onFrameRateChange) {
                    var b = d,
                        h = x.length - 1,
                        u = h,
                        w = 0;
                    t++;
                    for (A += b; 0 <= u; u--)
                        if (b >= x[u]) {
                            y[u]++;
                            break
                        } if (t >= v) {
                        w = A / v;
                        for (u = h; 0 < u; u--)
                            if (b = y[u] / v, 0.6 <= b && w >= x[u]) {
                                u != z && (z = u, D.onFrameRateChange && D.onFrameRateChange(w.toFixed(2)));
                                break
                            } A = t = _changeCount = 0;
                        for (u = h; 0 < u; u--) y[u] = 0
                    }
                }
                a && (h = cc._renderType === cc.game.RENDER_TYPE_CANVAS ? "\n canvas" : "\n webgl", n.innerHTML = f.toFixed(3), m.innerHTML = d.toFixed(1).toString() + h, p.innerHTML = (0 | cc.g_NumberOfDraws).toString())
            }
        },
        D = {
            onFrameRateChange: null,
            getSecondsPerFrame: function () {
                return f
            },
            getFrameRate: function () {
                return d
            },
            setProfileDuration: function (a) {
                !isNaN(a) && 0 < a && (v = a / cc.DIRECTOR_FPS_INTERVAL)
            },
            resumeProfiling: function () {
                cc.eventManager.addListener(h, 1)
            },
            stopProfiling: function () {
                cc.eventManager.removeListener(h)
            },
            isShowingStats: function () {
                return a
            },
            showStats: function () {
                b || this.init();
                null === u.parentElement && cc.container.appendChild(u);
                a = !0
            },
            hideStats: function () {
                a = !1;
                u.parentElement === cc.container && cc.container.removeChild(u)
            },
            init: function () {
                b || (h = cc.eventManager.addCustomListener(cc.Director.EVENT_AFTER_VISIT, C), b = !0)
            }
        };
    return D
}();
cc.math = cc.math || {};
cc.math.EPSILON = 0.015625;
cc.math.square = function (a) {
    return a * a
};
cc.math.almostEqual = function (a, b) {
    return a + cc.math.EPSILON > b && a - cc.math.EPSILON < b
};
(function (a) {
    a.math.Vec2 = function (a, b) {
        void 0 === b ? (this.x = a.x, this.y = a.y) : (this.x = a || 0, this.y = b || 0)
    };
    var b = a.math.Vec2.prototype;
    b.fill = function (a, b) {
        this.x = a;
        this.y = b
    };
    b.length = function () {
        return Math.sqrt(a.math.square(this.x) + a.math.square(this.y))
    };
    b.lengthSq = function () {
        return a.math.square(this.x) + a.math.square(this.y)
    };
    b.normalize = function () {
        var a = 1 / this.length();
        this.x *= a;
        this.y *= a;
        return this
    };
    a.math.Vec2.add = function (a, b, f) {
        a.x = b.x + f.x;
        a.y = b.y + f.y;
        return a
    };
    b.add = function (a) {
        this.x += a.x;
        this.y +=
            a.y;
        return this
    };
    b.dot = function (a) {
        return this.x * a.x + this.y * a.y
    };
    a.math.Vec2.subtract = function (a, b, f) {
        a.x = b.x - f.x;
        a.y = b.y - f.y;
        return a
    };
    b.subtract = function (a) {
        this.x -= a.x;
        this.y -= a.y;
        return this
    };
    b.transform = function (a) {
        var b = this.x,
            f = this.y;
        this.x = b * a.mat[0] + f * a.mat[3] + a.mat[6];
        this.y = b * a.mat[1] + f * a.mat[4] + a.mat[7];
        return this
    };
    a.math.Vec2.scale = function (a, b, f) {
        a.x = b.x * f;
        a.y = b.y * f;
        return a
    };
    b.scale = function (a) {
        this.x *= a;
        this.y *= a;
        return this
    };
    b.equals = function (b) {
        return this.x < b.x + a.math.EPSILON &&
            this.x > b.x - a.math.EPSILON && this.y < b.y + a.math.EPSILON && this.y > b.y - a.math.EPSILON
    }
})(cc);
(function (a) {
    a.math.Vec3 = a.kmVec3 = function (a, b, f) {
        a && void 0 === b ? (this.x = a.x, this.y = a.y, this.z = a.z) : (this.x = a || 0, this.y = b || 0, this.z = f || 0)
    };
    a.math.vec3 = function (b, d, f) {
        return new a.math.Vec3(b, d, f)
    };
    var b = a.math.Vec3.prototype;
    b.fill = function (a, b, f) {
        a && void 0 === b ? (this.x = a.x, this.y = a.y, this.z = a.z) : (this.x = a, this.y = b, this.z = f);
        return this
    };
    b.length = function () {
        return Math.sqrt(a.math.square(this.x) + a.math.square(this.y) + a.math.square(this.z))
    };
    b.lengthSq = function () {
        return a.math.square(this.x) + a.math.square(this.y) +
            a.math.square(this.z)
    };
    b.normalize = function () {
        var a = 1 / this.length();
        this.x *= a;
        this.y *= a;
        this.z *= a;
        return this
    };
    b.cross = function (a) {
        var b = this.x,
            f = this.y,
            g = this.z;
        this.x = f * a.z - g * a.y;
        this.y = g * a.x - b * a.z;
        this.z = b * a.y - f * a.x;
        return this
    };
    b.dot = function (a) {
        return this.x * a.x + this.y * a.y + this.z * a.z
    };
    b.add = function (a) {
        this.x += a.x;
        this.y += a.y;
        this.z += a.z;
        return this
    };
    b.subtract = function (a) {
        this.x -= a.x;
        this.y -= a.y;
        this.z -= a.z;
        return this
    };
    b.transform = function (a) {
        var b = this.x,
            f = this.y,
            g = this.z;
        a = a.mat;
        this.x = b *
            a[0] + f * a[4] + g * a[8] + a[12];
        this.y = b * a[1] + f * a[5] + g * a[9] + a[13];
        this.z = b * a[2] + f * a[6] + g * a[10] + a[14];
        return this
    };
    b.transformNormal = function (a) {
        var b = this.x,
            f = this.y,
            g = this.z;
        a = a.mat;
        this.x = b * a[0] + f * a[4] + g * a[8];
        this.y = b * a[1] + f * a[5] + g * a[9];
        this.z = b * a[2] + f * a[6] + g * a[10];
        return this
    };
    b.transformCoord = function (b) {
        var d = new a.math.Vec4(this.x, this.y, this.z, 1);
        d.transform(b);
        this.x = d.x / d.w;
        this.y = d.y / d.w;
        this.z = d.z / d.w;
        return this
    };
    b.scale = function (a) {
        this.x *= a;
        this.y *= a;
        this.z *= a;
        return this
    };
    b.equals = function (b) {
        var d =
            a.math.EPSILON;
        return this.x < b.x + d && this.x > b.x - d && this.y < b.y + d && this.y > b.y - d && this.z < b.z + d && this.z > b.z - d
    };
    b.inverseTransform = function (b) {
        b = b.mat;
        var d = new a.math.Vec3(this.x - b[12], this.y - b[13], this.z - b[14]);
        this.x = d.x * b[0] + d.y * b[1] + d.z * b[2];
        this.y = d.x * b[4] + d.y * b[5] + d.z * b[6];
        this.z = d.x * b[8] + d.y * b[9] + d.z * b[10];
        return this
    };
    b.inverseTransformNormal = function (a) {
        var b = this.x,
            f = this.y,
            g = this.z;
        a = a.mat;
        this.x = b * a[0] + f * a[1] + g * a[2];
        this.y = b * a[4] + f * a[5] + g * a[6];
        this.z = b * a[8] + f * a[9] + g * a[10];
        return this
    };
    b.assignFrom =
        function (a) {
            if (!a) return this;
            this.x = a.x;
            this.y = a.y;
            this.z = a.z;
            return this
        };
    a.math.Vec3.zero = function (a) {
        a.x = a.y = a.z = 0;
        return a
    };
    b.toTypeArray = function () {
        var a = new Float32Array(3);
        a[0] = this.x;
        a[1] = this.y;
        a[2] = this.z;
        return a
    }
})(cc);
(function (a) {
    a.math.Vec4 = function (a, b, f, g) {
        a && void 0 === b ? (this.x = a.x, this.y = a.y, this.z = a.z, this.w = a.w) : (this.x = a || 0, this.y = b || 0, this.z = f || 0, this.w = g || 0)
    };
    a.kmVec4 = a.math.Vec4;
    var b = a.math.Vec4.prototype;
    b.fill = function (a, b, f, g) {
        a && void 0 === b ? (this.x = a.x, this.y = a.y, this.z = a.z, this.w = a.w) : (this.x = a, this.y = b, this.z = f, this.w = g)
    };
    b.add = function (a) {
        if (!a) return this;
        this.x += a.x;
        this.y += a.y;
        this.z += a.z;
        this.w += a.w;
        return this
    };
    b.dot = function (a) {
        return this.x * a.x + this.y * a.y + this.z * a.z + this.w * a.w
    };
    b.length =
        function () {
            return Math.sqrt(a.math.square(this.x) + a.math.square(this.y) + a.math.square(this.z) + a.math.square(this.w))
        };
    b.lengthSq = function () {
        return a.math.square(this.x) + a.math.square(this.y) + a.math.square(this.z) + a.math.square(this.w)
    };
    b.lerp = function (a, b) {
        return this
    };
    b.normalize = function () {
        var a = 1 / this.length();
        this.x *= a;
        this.y *= a;
        this.z *= a;
        this.w *= a;
        return this
    };
    b.scale = function (a) {
        this.normalize();
        this.x *= a;
        this.y *= a;
        this.z *= a;
        this.w *= a;
        return this
    };
    b.subtract = function (a) {
        this.x -= a.x;
        this.y -=
            a.y;
        this.z -= a.z;
        this.w -= a.w
    };
    b.transform = function (a) {
        var b = this.x,
            f = this.y,
            g = this.z,
            h = this.w;
        a = a.mat;
        this.x = b * a[0] + f * a[4] + g * a[8] + h * a[12];
        this.y = b * a[1] + f * a[5] + g * a[9] + h * a[13];
        this.z = b * a[2] + f * a[6] + g * a[10] + h * a[14];
        this.w = b * a[3] + f * a[7] + g * a[11] + h * a[15];
        return this
    };
    a.math.Vec4.transformArray = function (b, d) {
        for (var f = [], g = 0; g < b.length; g++) {
            var h = new a.math.Vec4(b[g]);
            h.transform(d);
            f.push(h)
        }
        return f
    };
    b.equals = function (b) {
        var d = a.math.EPSILON;
        return this.x < b.x + d && this.x > b.x - d && this.y < b.y + d && this.y > b.y - d &&
            this.z < b.z + d && this.z > b.z - d && this.w < b.w + d && this.w > b.w - d
    };
    b.assignFrom = function (a) {
        this.x = a.x;
        this.y = a.y;
        this.z = a.z;
        this.w = a.w;
        return this
    };
    b.toTypeArray = function () {
        var a = new Float32Array(4);
        a[0] = this.x;
        a[1] = this.y;
        a[2] = this.z;
        a[3] = this.w;
        return a
    }
})(cc);
(function (a) {
    function b(b, d, f) {
        d = new a.math.Vec2(d);
        d.subtract(b);
        f.x = -d.y;
        f.y = d.x;
        f.normalize()
    }
    a.math.Ray2 = function (b, d) {
        this.start = b || new a.math.Vec2;
        this.dir = d || new a.math.Vec2
    };
    a.math.Ray2.prototype.fill = function (a, b, f, g) {
        this.start.x = a;
        this.start.y = b;
        this.dir.x = f;
        this.dir.y = g
    };
    a.math.Ray2.prototype.intersectLineSegment = function (b, d, f) {
        var g = this.start.x,
            h = this.start.y,
            m = this.start.x + this.dir.x,
            n = this.start.y + this.dir.y,
            p = b.x,
            u = b.y,
            v = d.x,
            x = d.y,
            y = (x - u) * (m - g) - (v - p) * (n - h);
        if (y > -a.math.EPSILON &&
            y < a.math.EPSILON) return !1;
        u = ((v - p) * (h - u) - (x - u) * (g - p)) / y;
        p = g + u * (m - g);
        u = h + u * (n - h);
        if (p < Math.min(b.x, d.x) - a.math.EPSILON || p > Math.max(b.x, d.x) + a.math.EPSILON || u < Math.min(b.y, d.y) - a.math.EPSILON || u > Math.max(b.y, d.y) + a.math.EPSILON || p < Math.min(g, m) - a.math.EPSILON || p > Math.max(g, m) + a.math.EPSILON || u < Math.min(h, n) - a.math.EPSILON || u > Math.max(h, n) + a.math.EPSILON) return !1;
        f.x = p;
        f.y = u;
        return !0
    };
    a.math.Ray2.prototype.intersectTriangle = function (c, d, f, g, h) {
        var m = new a.math.Vec2,
            n = new a.math.Vec2,
            p = new a.math.Vec2,
            u = 1E4,
            v = !1,
            x;
        this.intersectLineSegment(c, d, m) && (v = !0, x = m.subtract(this.start).length(), x < u && (n.x = m.x, n.y = m.y, u = x, b(c, d, p)));
        this.intersectLineSegment(d, f, m) && (v = !0, x = m.subtract(this.start).length(), x < u && (n.x = m.x, n.y = m.y, u = x, b(d, f, p)));
        this.intersectLineSegment(f, c, m) && (v = !0, x = m.subtract(this.start).length(), x < u && (n.x = m.x, n.y = m.y, b(f, c, p)));
        v && (g.x = n.x, g.y = n.y, h && (h.x = p.x, h.y = p.y));
        return v
    }
})(cc);
window.Uint16Array = window.Uint16Array || window.Array;
window.Float32Array = window.Float32Array || window.Array;
(function (a) {
    a.math.Matrix3 = function (a) {
        this.mat = a && a.mat ? new Float32Array(a.mat) : new Float32Array(9)
    };
    a.kmMat3 = a.math.Matrix3;
    var b = a.math.Matrix3.prototype;
    b.fill = function (a) {
        var b = this.mat;
        a = a.mat;
        b[0] = a[0];
        b[1] = a[1];
        b[2] = a[2];
        b[3] = a[3];
        b[4] = a[4];
        b[5] = a[5];
        b[6] = a[6];
        b[7] = a[7];
        b[8] = a[8];
        return this
    };
    b.adjugate = function () {
        var a = this.mat,
            b = a[0],
            c = a[1],
            h = a[2],
            m = a[3],
            n = a[4],
            p = a[5],
            u = a[6],
            v = a[7],
            x = a[8];
        a[0] = n * x - p * v;
        a[1] = h * v - c * x;
        a[2] = c * p - h * n;
        a[3] = p * u - m * x;
        a[4] = b * x - h * u;
        a[5] = h * m - b * p;
        a[6] = m * v - n * u;
        a[8] = b *
            n - c * m;
        return this
    };
    b.identity = function () {
        var a = this.mat;
        a[1] = a[2] = a[3] = a[5] = a[6] = a[7] = 0;
        a[0] = a[4] = a[8] = 1;
        return this
    };
    var c = new a.math.Matrix3;
    b.inverse = function (a) {
        if (0 === a) return this;
        c.assignFrom(this);
        a = 1 / a;
        this.adjugate();
        this.multiplyScalar(a);
        return this
    };
    b.isIdentity = function () {
        var a = this.mat;
        return 1 === a[0] && 0 === a[1] && 0 === a[2] && 0 === a[3] && 1 === a[4] && 0 === a[5] && 0 === a[6] && 0 === a[7] && 1 === a[8]
    };
    b.transpose = function () {
        var a = this.mat,
            b = a[1],
            c = a[2],
            h = a[5],
            m = a[6],
            n = a[7];
        a[1] = a[3];
        a[2] = m;
        a[3] = b;
        a[5] =
            n;
        a[6] = c;
        a[7] = h;
        return this
    };
    b.determinant = function () {
        var a = this.mat,
            b = a[0] * a[4] * a[8] + a[1] * a[5] * a[6] + a[2] * a[3] * a[7];
        return b -= a[2] * a[4] * a[6] + a[0] * a[5] * a[7] + a[1] * a[3] * a[8]
    };
    b.multiply = function (a) {
        var b = this.mat,
            c = a.mat;
        a = b[0];
        var h = b[1],
            m = b[2],
            n = b[3],
            p = b[4],
            u = b[5],
            v = b[6],
            x = b[7],
            y = b[8],
            z = c[0],
            t = c[1],
            A = c[2],
            w = c[3],
            B = c[4],
            F = c[5],
            C = c[6],
            D = c[7],
            c = c[8];
        b[0] = a * z + n * t + v * A;
        b[1] = h * z + p * t + x * A;
        b[2] = m * z + u * t + y * A;
        b[3] = m * z + u * t + y * A;
        b[4] = h * w + p * B + x * F;
        b[5] = m * w + u * B + y * F;
        b[6] = a * C + n * D + v * c;
        b[7] = h * C + p * D + x * c;
        b[8] = m * C + u * D + y * c;
        return this
    };
    b.multiplyScalar = function (a) {
        var b = this.mat;
        b[0] *= a;
        b[1] *= a;
        b[2] *= a;
        b[3] *= a;
        b[4] *= a;
        b[5] *= a;
        b[6] *= a;
        b[7] *= a;
        b[8] *= a;
        return this
    };
    a.math.Matrix3.rotationAxisAngle = function (b, c) {
        var g = Math.cos(c),
            h = Math.sin(c),
            m = new a.math.Matrix3,
            n = m.mat;
        n[0] = g + b.x * b.x * (1 - g);
        n[1] = b.z * h + b.y * b.x * (1 - g);
        n[2] = -b.y * h + b.z * b.x * (1 - g);
        n[3] = -b.z * h + b.x * b.y * (1 - g);
        n[4] = g + b.y * b.y * (1 - g);
        n[5] = b.x * h + b.z * b.y * (1 - g);
        n[6] = b.y * h + b.x * b.z * (1 - g);
        n[7] = -b.x * h + b.y * b.z * (1 - g);
        n[8] = g + b.z * b.z * (1 - g);
        return m
    };
    b.assignFrom = function (b) {
        if (this ===
            b) return a.log("cc.math.Matrix3.assign(): current matrix equals matIn"), this;
        var c = this.mat;
        b = b.mat;
        c[0] = b[0];
        c[1] = b[1];
        c[2] = b[2];
        c[3] = b[3];
        c[4] = b[4];
        c[5] = b[5];
        c[6] = b[6];
        c[7] = b[7];
        c[8] = b[8];
        return this
    };
    b.equals = function (b) {
        if (this === b) return !0;
        var c = a.math.EPSILON,
            g = this.mat;
        b = b.mat;
        for (var h = 0; 9 > h; ++h)
            if (!(g[h] + c > b[h] && g[h] - c < b[h])) return !1;
        return !0
    };
    a.math.Matrix3.createByRotationX = function (b) {
        var c = new a.math.Matrix3,
            g = c.mat;
        g[0] = 1;
        g[1] = 0;
        g[2] = 0;
        g[3] = 0;
        g[4] = Math.cos(b);
        g[5] = Math.sin(b);
        g[6] = 0;
        g[7] = -Math.sin(b);
        g[8] = Math.cos(b);
        return c
    };
    a.math.Matrix3.createByRotationY = function (b) {
        var c = new a.math.Matrix3,
            g = c.mat;
        g[0] = Math.cos(b);
        g[1] = 0;
        g[2] = -Math.sin(b);
        g[3] = 0;
        g[4] = 1;
        g[5] = 0;
        g[6] = Math.sin(b);
        g[7] = 0;
        g[8] = Math.cos(b);
        return c
    };
    a.math.Matrix3.createByRotationZ = function (b) {
        var c = new a.math.Matrix3,
            g = c.mat;
        g[0] = Math.cos(b);
        g[1] = -Math.sin(b);
        g[2] = 0;
        g[3] = Math.sin(b);
        g[4] = Math.cos(b);
        g[5] = 0;
        g[6] = 0;
        g[7] = 0;
        g[8] = 1;
        return c
    };
    a.math.Matrix3.createByRotation = function (b) {
        var c = new a.math.Matrix3,
            g = c.mat;
        g[0] = Math.cos(b);
        g[1] = Math.sin(b);
        g[2] = 0;
        g[3] = -Math.sin(b);
        g[4] = Math.cos(b);
        g[5] = 0;
        g[6] = 0;
        g[7] = 0;
        g[8] = 1;
        return c
    };
    a.math.Matrix3.createByScale = function (b, c) {
        var g = new a.math.Matrix3;
        g.identity();
        g.mat[0] = b;
        g.mat[4] = c;
        return g
    };
    a.math.Matrix3.createByTranslation = function (b, c) {
        var g = new a.math.Matrix3;
        g.identity();
        g.mat[6] = b;
        g.mat[7] = c;
        return g
    };
    a.math.Matrix3.createByQuaternion = function (b) {
        if (!b) return null;
        var c = new a.math.Matrix3,
            g = c.mat;
        g[0] = 1 - 2 * (b.y * b.y + b.z * b.z);
        g[1] = 2 * (b.x * b.y - b.w * b.z);
        g[2] = 2 *
            (b.x * b.z + b.w * b.y);
        g[3] = 2 * (b.x * b.y + b.w * b.z);
        g[4] = 1 - 2 * (b.x * b.x + b.z * b.z);
        g[5] = 2 * (b.y * b.z - b.w * b.x);
        g[6] = 2 * (b.x * b.z - b.w * b.y);
        g[7] = 2 * (b.y * b.z + b.w * b.x);
        g[8] = 1 - 2 * (b.x * b.x + b.y * b.y);
        return c
    };
    b.rotationToAxisAngle = function () {
        return a.math.Quaternion.rotationMatrix(this).toAxisAndAngle()
    }
})(cc);
(function (a) {
    a.math.Matrix4 = function (a) {
        this.mat = a && a.mat ? new Float32Array(a.mat) : new Float32Array(16)
    };
    a.kmMat4 = a.math.Matrix4;
    var b = a.math.Matrix4.prototype;
    b.fill = function (a) {
        for (var b = this.mat, c = 0; 16 > c; c++) b[c] = a[c];
        return this
    };
    a.kmMat4Identity = function (a) {
        var b = a.mat;
        b[1] = b[2] = b[3] = b[4] = b[6] = b[7] = b[8] = b[9] = b[11] = b[12] = b[13] = b[14] = 0;
        b[0] = b[5] = b[10] = b[15] = 1;
        return a
    };
    b.identity = function () {
        var a = this.mat;
        a[1] = a[2] = a[3] = a[4] = a[6] = a[7] = a[8] = a[9] = a[11] = a[12] = a[13] = a[14] = 0;
        a[0] = a[5] = a[10] = a[15] = 1;
        return this
    };
    b.get = function (a, b) {
        return this.mat[a + 4 * b]
    };
    b.set = function (a, b, c) {
        this.mat[a + 4 * b] = c
    };
    b.swap = function (a, b, c, d) {
        var n = this.mat,
            p = n[a + 4 * b];
        n[a + 4 * b] = n[c + 4 * d];
        n[c + 4 * d] = p
    };
    a.math.Matrix4._gaussj = function (a, b) {
        var c, d = 0,
            n = 0,
            p, u, v, x, y = [0, 0, 0, 0],
            z = [0, 0, 0, 0],
            t = [0, 0, 0, 0];
        for (c = 0; 4 > c; c++) {
            for (p = x = 0; 4 > p; p++)
                if (1 !== t[p])
                    for (u = 0; 4 > u; u++) 0 === t[u] && (v = Math.abs(a.get(p, u)), v >= x && (x = v, n = p, d = u));
            ++t[d];
            if (n !== d) {
                for (p = 0; 4 > p; p++) a.swap(n, p, d, p);
                for (p = 0; 4 > p; p++) b.swap(n, p, d, p)
            }
            z[c] = n;
            y[c] = d;
            if (0 === a.get(d,
                    d)) return !1;
            u = 1 / a.get(d, d);
            a.set(d, d, 1);
            for (p = 0; 4 > p; p++) a.set(d, p, a.get(d, p) * u);
            for (p = 0; 4 > p; p++) b.set(d, p, b.get(d, p) * u);
            for (u = 0; 4 > u; u++)
                if (u !== d) {
                    v = a.get(u, d);
                    a.set(u, d, 0);
                    for (p = 0; 4 > p; p++) a.set(u, p, a.get(u, p) - a.get(d, p) * v);
                    for (p = 0; 4 > p; p++) b.set(u, p, a.get(u, p) - b.get(d, p) * v)
                }
        }
        for (p = 3; 0 <= p; p--)
            if (z[p] !== y[p])
                for (u = 0; 4 > u; u++) a.swap(u, z[p], u, y[p]);
        return !0
    };
    var c = (new a.math.Matrix4).identity();
    a.kmMat4Inverse = function (b, d) {
        var h = new a.math.Matrix4(d),
            m = new a.math.Matrix4(c);
        if (!1 === a.math.Matrix4._gaussj(h,
                m)) return null;
        b.assignFrom(h);
        return b
    };
    b.inverse = function () {
        var b = new a.math.Matrix4(this),
            d = new a.math.Matrix4(c);
        return !1 === a.math.Matrix4._gaussj(b, d) ? null : b
    };
    b.isIdentity = function () {
        var a = this.mat;
        return 1 === a[0] && 0 === a[1] && 0 === a[2] && 0 === a[3] && 0 === a[4] && 1 === a[5] && 0 === a[6] && 0 === a[7] && 0 === a[8] && 0 === a[9] && 1 === a[10] && 0 === a[11] && 0 === a[12] && 0 === a[13] && 0 === a[14] && 1 === a[15]
    };
    b.transpose = function () {
        var a = this.mat,
            b = a[1],
            c = a[2],
            d = a[3],
            n = a[6],
            p = a[7],
            u = a[8],
            v = a[9],
            x = a[11],
            y = a[12],
            z = a[13],
            t = a[14];
        a[1] = a[4];
        a[2] = u;
        a[3] = y;
        a[4] = b;
        a[6] = v;
        a[7] = z;
        a[8] = c;
        a[9] = n;
        a[11] = t;
        a[12] = d;
        a[13] = p;
        a[14] = x;
        return this
    };
    a.kmMat4Multiply = function (a, b, c) {
        var d = a.mat,
            n = b.mat,
            p = c.mat;
        c = n[0];
        b = n[1];
        var u = n[2],
            v = n[3],
            x = n[4],
            y = n[5],
            z = n[6],
            t = n[7],
            A = n[8],
            w = n[9],
            B = n[10],
            F = n[11],
            C = n[12],
            D = n[13],
            E = n[14],
            n = n[15],
            G = p[0],
            H = p[1],
            M = p[2],
            K = p[3],
            N = p[4],
            U = p[5],
            T = p[6],
            P = p[7],
            S = p[8],
            I = p[9],
            J = p[10],
            W = p[11],
            $ = p[12],
            O = p[13],
            Z = p[14],
            p = p[15];
        d[0] = G * c + H * x + M * A + K * C;
        d[1] = G * b + H * y + M * w + K * D;
        d[2] = G * u + H * z + M * B + K * E;
        d[3] = G * v + H * t + M * F + K * n;
        d[4] = N * c + U * x + T * A + P * C;
        d[5] =
            N * b + U * y + T * w + P * D;
        d[6] = N * u + U * z + T * B + P * E;
        d[7] = N * v + U * t + T * F + P * n;
        d[8] = S * c + I * x + J * A + W * C;
        d[9] = S * b + I * y + J * w + W * D;
        d[10] = S * u + I * z + J * B + W * E;
        d[11] = S * v + I * t + J * F + W * n;
        d[12] = $ * c + O * x + Z * A + p * C;
        d[13] = $ * b + O * y + Z * w + p * D;
        d[14] = $ * u + O * z + Z * B + p * E;
        d[15] = $ * v + O * t + Z * F + p * n;
        return a
    };
    b.multiply = function (a) {
        var b = this.mat,
            c = a.mat;
        a = b[0];
        var d = b[1],
            n = b[2],
            p = b[3],
            u = b[4],
            v = b[5],
            x = b[6],
            y = b[7],
            z = b[8],
            t = b[9],
            A = b[10],
            w = b[11],
            B = b[12],
            F = b[13],
            C = b[14],
            D = b[15],
            E = c[0],
            G = c[1],
            H = c[2],
            M = c[3],
            K = c[4],
            N = c[5],
            U = c[6],
            T = c[7],
            P = c[8],
            S = c[9],
            I = c[10],
            J = c[11],
            W = c[12],
            $ = c[13],
            O = c[14],
            c = c[15];
        b[0] = E * a + G * u + H * z + M * B;
        b[1] = E * d + G * v + H * t + M * F;
        b[2] = E * n + G * x + H * A + M * C;
        b[3] = E * p + G * y + H * w + M * D;
        b[4] = K * a + N * u + U * z + T * B;
        b[5] = K * d + N * v + U * t + T * F;
        b[6] = K * n + N * x + U * A + T * C;
        b[7] = K * p + N * y + U * w + T * D;
        b[8] = P * a + S * u + I * z + J * B;
        b[9] = P * d + S * v + I * t + J * F;
        b[10] = P * n + S * x + I * A + J * C;
        b[11] = P * p + S * y + I * w + J * D;
        b[12] = W * a + $ * u + O * z + c * B;
        b[13] = W * d + $ * v + O * t + c * F;
        b[14] = W * n + $ * x + O * A + c * C;
        b[15] = W * p + $ * y + O * w + c * D;
        return this
    };
    a.getMat4MultiplyValue = function (a, b) {
        var c = a.mat,
            d = b.mat,
            n = new Float32Array(16);
        n[0] = c[0] * d[0] + c[4] * d[1] + c[8] * d[2] + c[12] * d[3];
        n[1] = c[1] * d[0] + c[5] * d[1] + c[9] * d[2] + c[13] * d[3];
        n[2] = c[2] * d[0] + c[6] * d[1] + c[10] * d[2] + c[14] * d[3];
        n[3] = c[3] * d[0] + c[7] * d[1] + c[11] * d[2] + c[15] * d[3];
        n[4] = c[0] * d[4] + c[4] * d[5] + c[8] * d[6] + c[12] * d[7];
        n[5] = c[1] * d[4] + c[5] * d[5] + c[9] * d[6] + c[13] * d[7];
        n[6] = c[2] * d[4] + c[6] * d[5] + c[10] * d[6] + c[14] * d[7];
        n[7] = c[3] * d[4] + c[7] * d[5] + c[11] * d[6] + c[15] * d[7];
        n[8] = c[0] * d[8] + c[4] * d[9] + c[8] * d[10] + c[12] * d[11];
        n[9] = c[1] * d[8] + c[5] * d[9] + c[9] * d[10] + c[13] * d[11];
        n[10] = c[2] * d[8] + c[6] * d[9] + c[10] * d[10] + c[14] * d[11];
        n[11] = c[3] * d[8] + c[7] * d[9] + c[11] *
            d[10] + c[15] * d[11];
        n[12] = c[0] * d[12] + c[4] * d[13] + c[8] * d[14] + c[12] * d[15];
        n[13] = c[1] * d[12] + c[5] * d[13] + c[9] * d[14] + c[13] * d[15];
        n[14] = c[2] * d[12] + c[6] * d[13] + c[10] * d[14] + c[14] * d[15];
        n[15] = c[3] * d[12] + c[7] * d[13] + c[11] * d[14] + c[15] * d[15];
        return n
    };
    a.kmMat4Assign = function (b, c) {
        if (b === c) return a.log("cc.kmMat4Assign(): pOut equals pIn"), b;
        var d = b.mat,
            m = c.mat;
        d[0] = m[0];
        d[1] = m[1];
        d[2] = m[2];
        d[3] = m[3];
        d[4] = m[4];
        d[5] = m[5];
        d[6] = m[6];
        d[7] = m[7];
        d[8] = m[8];
        d[9] = m[9];
        d[10] = m[10];
        d[11] = m[11];
        d[12] = m[12];
        d[13] = m[13];
        d[14] = m[14];
        d[15] = m[15];
        return b
    };
    b.assignFrom = function (b) {
        if (this === b) return a.log("cc.mat.Matrix4.assignFrom(): mat4 equals current matrix"), this;
        var c = this.mat;
        b = b.mat;
        c[0] = b[0];
        c[1] = b[1];
        c[2] = b[2];
        c[3] = b[3];
        c[4] = b[4];
        c[5] = b[5];
        c[6] = b[6];
        c[7] = b[7];
        c[8] = b[8];
        c[9] = b[9];
        c[10] = b[10];
        c[11] = b[11];
        c[12] = b[12];
        c[13] = b[13];
        c[14] = b[14];
        c[15] = b[15];
        return this
    };
    b.equals = function (b) {
        if (this === b) return a.log("cc.kmMat4AreEqual(): pMat1 and pMat2 are same object."), !0;
        var c = this.mat;
        b = b.mat;
        for (var d = a.math.EPSILON, m = 0; 16 >
            m; m++)
            if (!(c[m] + d > b[m] && c[m] - d < b[m])) return !1;
        return !0
    };
    a.math.Matrix4.createByRotationX = function (b, c) {
        c = c || new a.math.Matrix4;
        var d = c.mat;
        d[0] = 1;
        d[3] = d[2] = d[1] = 0;
        d[4] = 0;
        d[5] = Math.cos(b);
        d[6] = Math.sin(b);
        d[7] = 0;
        d[8] = 0;
        d[9] = -Math.sin(b);
        d[10] = Math.cos(b);
        d[11] = 0;
        d[14] = d[13] = d[12] = 0;
        d[15] = 1;
        return c
    };
    a.math.Matrix4.createByRotationY = function (b, c) {
        c = c || new a.math.Matrix4;
        var d = c.mat;
        d[0] = Math.cos(b);
        d[1] = 0;
        d[2] = -Math.sin(b);
        d[3] = 0;
        d[7] = d[6] = d[4] = 0;
        d[5] = 1;
        d[8] = Math.sin(b);
        d[9] = 0;
        d[10] = Math.cos(b);
        d[11] =
            0;
        d[14] = d[13] = d[12] = 0;
        d[15] = 1;
        return c
    };
    a.math.Matrix4.createByRotationZ = function (b, c) {
        c = c || new a.math.Matrix4;
        var d = c.mat;
        d[0] = Math.cos(b);
        d[1] = Math.sin(b);
        d[3] = d[2] = 0;
        d[4] = -Math.sin(b);
        d[5] = Math.cos(b);
        d[7] = d[6] = 0;
        d[11] = d[9] = d[8] = 0;
        d[10] = 1;
        d[14] = d[13] = d[12] = 0;
        d[15] = 1;
        return c
    };
    a.math.Matrix4.createByPitchYawRoll = function (b, c, d, m) {
        m = m || new a.math.Matrix4;
        var n = Math.cos(b);
        b = Math.sin(b);
        var p = Math.cos(c);
        c = Math.sin(c);
        var u = Math.cos(d);
        d = Math.sin(d);
        var v = b * c,
            x = n * c,
            y = m.mat;
        y[0] = p * u;
        y[4] = p * d;
        y[8] = -c;
        y[1] = v * u - n * d;
        y[5] = v * d + n * u;
        y[9] = b * p;
        y[2] = x * u + b * d;
        y[6] = x * d - b * u;
        y[10] = n * p;
        y[3] = y[7] = y[11] = 0;
        y[15] = 1;
        return m
    };
    a.math.Matrix4.createByQuaternion = function (b, c) {
        c = c || new a.math.Matrix4;
        var d = c.mat;
        d[0] = 1 - 2 * (b.y * b.y + b.z * b.z);
        d[1] = 2 * (b.x * b.y + b.z * b.w);
        d[2] = 2 * (b.x * b.z - b.y * b.w);
        d[3] = 0;
        d[4] = 2 * (b.x * b.y - b.z * b.w);
        d[5] = 1 - 2 * (b.x * b.x + b.z * b.z);
        d[6] = 2 * (b.z * b.y + b.x * b.w);
        d[7] = 0;
        d[8] = 2 * (b.x * b.z + b.y * b.w);
        d[9] = 2 * (b.y * b.z - b.x * b.w);
        d[10] = 1 - 2 * (b.x * b.x + b.y * b.y);
        d[11] = 0;
        d[14] = d[13] = d[12] = 0;
        d[15] = 1;
        return c
    };
    a.math.Matrix4.createByRotationTranslation =
        function (b, c, d) {
            d = d || new a.math.Matrix4;
            var m = d.mat;
            b = b.mat;
            m[0] = b[0];
            m[1] = b[1];
            m[2] = b[2];
            m[3] = 0;
            m[4] = b[3];
            m[5] = b[4];
            m[6] = b[5];
            m[7] = 0;
            m[8] = b[6];
            m[9] = b[7];
            m[10] = b[8];
            m[11] = 0;
            m[12] = c.x;
            m[13] = c.y;
            m[14] = c.z;
            m[15] = 1;
            return d
        };
    a.math.Matrix4.createByScale = function (b, c, d, m) {
        m = m || new a.math.Matrix4;
        var n = m.mat;
        n[0] = b;
        n[5] = c;
        n[10] = d;
        n[15] = 1;
        n[1] = n[2] = n[3] = n[4] = n[6] = n[7] = n[8] = n[9] = n[11] = n[12] = n[13] = n[14] = 0;
        return m
    };
    a.kmMat4Translation = function (a, b, c, d) {
        a.mat[0] = a.mat[5] = a.mat[10] = a.mat[15] = 1;
        a.mat[1] = a.mat[2] =
            a.mat[3] = a.mat[4] = a.mat[6] = a.mat[7] = a.mat[8] = a.mat[9] = a.mat[11] = 0;
        a.mat[12] = b;
        a.mat[13] = c;
        a.mat[14] = d;
        return a
    };
    a.math.Matrix4.createByTranslation = function (b, c, d, m) {
        m = m || new a.math.Matrix4;
        m.identity();
        m.mat[12] = b;
        m.mat[13] = c;
        m.mat[14] = d;
        return m
    };
    b.getUpVec3 = function () {
        var b = this.mat;
        return (new a.math.Vec3(b[4], b[5], b[6])).normalize()
    };
    b.getRightVec3 = function () {
        var b = this.mat;
        return (new a.math.Vec3(b[0], b[1], b[2])).normalize()
    };
    b.getForwardVec3 = function () {
        var b = this.mat;
        return (new a.math.Vec3(b[8],
            b[9], b[10])).normalize()
    };
    a.kmMat4PerspectiveProjection = function (b, c, d, m, n) {
        var p = a.degreesToRadians(c / 2);
        c = n - m;
        var u = Math.sin(p);
        if (0 === c || 0 === u || 0 === d) return null;
        p = Math.cos(p) / u;
        b.identity();
        b.mat[0] = p / d;
        b.mat[5] = p;
        b.mat[10] = -(n + m) / c;
        b.mat[11] = -1;
        b.mat[14] = -2 * m * n / c;
        b.mat[15] = 0;
        return b
    };
    a.math.Matrix4.createPerspectiveProjection = function (b, c, d, m) {
        var n = a.degreesToRadians(b / 2);
        b = m - d;
        var p = Math.sin(n);
        if (0 === b || 0 === p || 0 === c) return null;
        var n = Math.cos(n) / p,
            p = new a.math.Matrix4,
            u = p.mat;
        p.identity();
        u[0] = n / c;
        u[5] = n;
        u[10] = -(m + d) / b;
        u[11] = -1;
        u[14] = -2 * d * m / b;
        u[15] = 0;
        return p
    };
    a.kmMat4OrthographicProjection = function (a, b, c, d, n, p, u) {
        a.identity();
        a.mat[0] = 2 / (c - b);
        a.mat[5] = 2 / (n - d);
        a.mat[10] = -2 / (u - p);
        a.mat[12] = -((c + b) / (c - b));
        a.mat[13] = -((n + d) / (n - d));
        a.mat[14] = -((u + p) / (u - p));
        return a
    };
    a.math.Matrix4.createOrthographicProjection = function (b, c, d, m, n, p) {
        var u = new a.math.Matrix4,
            v = u.mat;
        u.identity();
        v[0] = 2 / (c - b);
        v[5] = 2 / (m - d);
        v[10] = -2 / (p - n);
        v[12] = -((c + b) / (c - b));
        v[13] = -((m + d) / (m - d));
        v[14] = -((p + n) / (p - n));
        return u
    };
    a.kmMat4LookAt = function (b, c, d, m) {
        d = new a.math.Vec3(d);
        var n = new a.math.Vec3(m);
        d.subtract(c);
        d.normalize();
        n.normalize();
        m = new a.math.Vec3(d);
        m.cross(n);
        m.normalize();
        n = new a.math.Vec3(m);
        n.cross(d);
        m.normalize();
        b.identity();
        b.mat[0] = m.x;
        b.mat[4] = m.y;
        b.mat[8] = m.z;
        b.mat[1] = n.x;
        b.mat[5] = n.y;
        b.mat[9] = n.z;
        b.mat[2] = -d.x;
        b.mat[6] = -d.y;
        b.mat[10] = -d.z;
        c = a.math.Matrix4.createByTranslation(-c.x, -c.y, -c.z);
        b.multiply(c);
        return b
    };
    var d = new a.math.Matrix4;
    b.lookAt = function (b, c, h) {
        c = new a.math.Vec3(c);
        var m =
            new a.math.Vec3(h);
        h = this.mat;
        c.subtract(b);
        c.normalize();
        m.normalize();
        var n = new a.math.Vec3(c);
        n.cross(m);
        n.normalize();
        m = new a.math.Vec3(n);
        m.cross(c);
        n.normalize();
        this.identity();
        h[0] = n.x;
        h[4] = n.y;
        h[8] = n.z;
        h[1] = m.x;
        h[5] = m.y;
        h[9] = m.z;
        h[2] = -c.x;
        h[6] = -c.y;
        h[10] = -c.z;
        d = a.math.Matrix4.createByTranslation(-b.x, -b.y, -b.z, d);
        this.multiply(d);
        return this
    };
    a.kmMat4RotationAxisAngle = function (b, c, d) {
        var m = Math.cos(d);
        d = Math.sin(d);
        c = new a.math.Vec3(c);
        c.normalize();
        b.mat[0] = m + c.x * c.x * (1 - m);
        b.mat[1] = c.z *
            d + c.y * c.x * (1 - m);
        b.mat[2] = -c.y * d + c.z * c.x * (1 - m);
        b.mat[3] = 0;
        b.mat[4] = -c.z * d + c.x * c.y * (1 - m);
        b.mat[5] = m + c.y * c.y * (1 - m);
        b.mat[6] = c.x * d + c.z * c.y * (1 - m);
        b.mat[7] = 0;
        b.mat[8] = c.y * d + c.x * c.z * (1 - m);
        b.mat[9] = -c.x * d + c.y * c.z * (1 - m);
        b.mat[10] = m + c.z * c.z * (1 - m);
        b.mat[11] = 0;
        b.mat[12] = 0;
        b.mat[13] = 0;
        b.mat[14] = 0;
        b.mat[15] = 1;
        return b
    };
    a.math.Matrix4.createByAxisAndAngle = function (b, c, d) {
        d = d || new a.math.Matrix4;
        var m = this.mat,
            n = Math.cos(c);
        c = Math.sin(c);
        b = new a.math.Vec3(b);
        b.normalize();
        m[0] = n + b.x * b.x * (1 - n);
        m[1] = b.z * c + b.y * b.x *
            (1 - n);
        m[2] = -b.y * c + b.z * b.x * (1 - n);
        m[3] = 0;
        m[4] = -b.z * c + b.x * b.y * (1 - n);
        m[5] = n + b.y * b.y * (1 - n);
        m[6] = b.x * c + b.z * b.y * (1 - n);
        m[7] = 0;
        m[8] = b.y * c + b.x * b.z * (1 - n);
        m[9] = -b.x * c + b.y * b.z * (1 - n);
        m[10] = n + b.z * b.z * (1 - n);
        m[11] = 0;
        m[12] = m[13] = m[14] = 0;
        m[15] = 1;
        return d
    };
    b.extractRotation = function () {
        var b = new a.math.Matrix3,
            c = this.mat,
            d = b.mat;
        d[0] = c[0];
        d[1] = c[1];
        d[2] = c[2];
        d[3] = c[4];
        d[4] = c[5];
        d[5] = c[6];
        d[6] = c[8];
        d[7] = c[9];
        d[8] = c[10];
        return b
    };
    b.extractPlane = function (b) {
        var c = new a.math.Plane,
            d = this.mat;
        switch (b) {
        case a.math.Plane.RIGHT:
            c.a =
                d[3] - d[0];
            c.b = d[7] - d[4];
            c.c = d[11] - d[8];
            c.d = d[15] - d[12];
            break;
        case a.math.Plane.LEFT:
            c.a = d[3] + d[0];
            c.b = d[7] + d[4];
            c.c = d[11] + d[8];
            c.d = d[15] + d[12];
            break;
        case a.math.Plane.BOTTOM:
            c.a = d[3] + d[1];
            c.b = d[7] + d[5];
            c.c = d[11] + d[9];
            c.d = d[15] + d[13];
            break;
        case a.math.Plane.TOP:
            c.a = d[3] - d[1];
            c.b = d[7] - d[5];
            c.c = d[11] - d[9];
            c.d = d[15] - d[13];
            break;
        case a.math.Plane.FAR:
            c.a = d[3] - d[2];
            c.b = d[7] - d[6];
            c.c = d[11] - d[10];
            c.d = d[15] - d[14];
            break;
        case a.math.Plane.NEAR:
            c.a = d[3] + d[2];
            c.b = d[7] + d[6];
            c.c = d[11] + d[10];
            c.d = d[15] + d[14];
            break;
        default:
            a.log("cc.math.Matrix4.extractPlane: Invalid plane index")
        }
        b = Math.sqrt(c.a * c.a + c.b * c.b + c.c * c.c);
        c.a /= b;
        c.b /= b;
        c.c /= b;
        c.d /= b;
        return c
    };
    b.toAxisAndAngle = function () {
        var b = this.extractRotation();
        return a.math.Quaternion.rotationMatrix(b).toAxisAndAngle()
    }
})(cc);
(function (a) {
    a.math.Plane = function (a, b, f, g) {
        a && void 0 === b ? (this.a = a.a, this.b = a.b, this.c = a.c, this.d = a.d) : (this.a = a || 0, this.b = b || 0, this.c = f || 0, this.d = g || 0)
    };
    a.kmPlane = a.math.Plane;
    var b = a.math.Plane.prototype;
    a.math.Plane.LEFT = 0;
    a.math.Plane.RIGHT = 1;
    a.math.Plane.BOTTOM = 2;
    a.math.Plane.TOP = 3;
    a.math.Plane.NEAR = 4;
    a.math.Plane.FAR = 5;
    a.math.Plane.POINT_INFRONT_OF_PLANE = 0;
    a.math.Plane.POINT_BEHIND_PLANE = 1;
    a.math.Plane.POINT_ON_PLANE = 2;
    b.dot = function (a) {
        return this.a * a.x + this.b * a.y + this.c * a.z + this.d * a.w
    };
    b.dotCoord =
        function (a) {
            return this.a * a.x + this.b * a.y + this.c * a.z + this.d
        };
    b.dotNormal = function (a) {
        return this.a * a.x + this.b * a.y + this.c * a.z
    };
    a.math.Plane.fromPointNormal = function (b, d) {
        return new a.math.Plane(d.x, d.y, d.z, -d.dot(b))
    };
    a.math.Plane.fromPoints = function (b, d, f) {
        d = new a.math.Vec3(d);
        f = new a.math.Vec3(f);
        var g = new a.math.Plane;
        d.subtract(b);
        f.subtract(b);
        d.cross(f);
        d.normalize();
        g.a = d.x;
        g.b = d.y;
        g.c = d.z;
        g.d = d.scale(-1).dot(b);
        return g
    };
    b.normalize = function () {
        var b = new a.math.Vec3(this.a, this.b, this.c),
            d = 1 /
            b.length();
        b.normalize();
        this.a = b.x;
        this.b = b.y;
        this.c = b.z;
        this.d *= d;
        return this
    };
    b.classifyPoint = function (b) {
        b = this.a * b.x + this.b * b.y + this.c * b.z + this.d;
        return 0.0010 < b ? a.math.Plane.POINT_INFRONT_OF_PLANE : -0.0010 > b ? a.math.Plane.POINT_BEHIND_PLANE : a.math.Plane.POINT_ON_PLANE
    }
})(cc);
(function (a) {
    a.math.Quaternion = function (a, b, f, g) {
        a && void 0 === b ? (this.x = a.x, this.y = a.y, this.z = a.z, this.w = a.w) : (this.x = a || 0, this.y = b || 0, this.z = f || 0, this.w = g || 0)
    };
    a.kmQuaternion = a.math.Quaternion;
    var b = a.math.Quaternion.prototype;
    b.conjugate = function (a) {
        this.x = -a.x;
        this.y = -a.y;
        this.z = -a.z;
        this.w = a.w;
        return this
    };
    b.dot = function (a) {
        return this.w * a.w + this.x * a.x + this.y * a.y + this.z * a.z
    };
    b.exponential = function () {
        return this
    };
    b.identity = function () {
        this.z = this.y = this.x = 0;
        this.w = 1;
        return this
    };
    b.inverse = function () {
        var b =
            this.length();
        if (Math.abs(b) > a.math.EPSILON) return this.w = this.z = this.y = this.x = 0, this;
        this.conjugate(this).scale(1 / b);
        return this
    };
    b.isIdentity = function () {
        return 0 === this.x && 0 === this.y && 0 === this.z && 1 === this.w
    };
    b.length = function () {
        return Math.sqrt(this.lengthSq())
    };
    b.lengthSq = function () {
        return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
    };
    b.multiply = function (a) {
        var b = this.x,
            f = this.y,
            g = this.z,
            h = this.w;
        this.w = h * a.w - b * a.x - f * a.y - g * a.z;
        this.x = h * a.x + b * a.w + f * a.z - g * a.y;
        this.y = h * a.y + f * a.w + g * a.x -
            b * a.z;
        this.z = h * a.z + g * a.w + b * a.y - f * a.x;
        return this
    };
    b.normalize = function () {
        var b = this.length();
        if (Math.abs(b) <= a.math.EPSILON) throw Error("current quaternion is an invalid value");
        this.scale(1 / b);
        return this
    };
    b.rotationAxis = function (a, b) {
        var f = 0.5 * b,
            g = Math.sin(f);
        this.w = Math.cos(f);
        this.x = a.x * g;
        this.y = a.y * g;
        this.z = a.z * g;
        return this
    };
    a.math.Quaternion.rotationMatrix = function (b) {
        if (!b) return null;
        var d, f, g;
        d = [];
        f = b.mat;
        b = 0;
        d[0] = f[0];
        d[1] = f[3];
        d[2] = f[6];
        d[4] = f[1];
        d[5] = f[4];
        d[6] = f[7];
        d[8] = f[2];
        d[9] = f[5];
        d[10] = f[8];
        d[15] = 1;
        var h = d[0];
        b = h[0] + h[5] + h[10] + 1;
        b > a.math.EPSILON ? (b = 2 * Math.sqrt(b), d = (h[9] - h[6]) / b, f = (h[2] - h[8]) / b, g = (h[4] - h[1]) / b, b *= 0.25) : h[0] > h[5] && h[0] > h[10] ? (b = 2 * Math.sqrt(1 + h[0] - h[5] - h[10]), d = 0.25 * b, f = (h[4] + h[1]) / b, g = (h[2] + h[8]) / b, b = (h[9] - h[6]) / b) : h[5] > h[10] ? (b = 2 * Math.sqrt(1 + h[5] - h[0] - h[10]), d = (h[4] + h[1]) / b, f = 0.25 * b, g = (h[9] + h[6]) / b, b = (h[2] - h[8]) / b) : (b = 2 * Math.sqrt(1 + h[10] - h[0] - h[5]), d = (h[2] + h[8]) / b, f = (h[9] + h[6]) / b, g = 0.25 * b, b = (h[4] - h[1]) / b);
        return new a.math.Quaternion(d, f, g, b)
    };
    a.math.Quaternion.rotationYawPitchRoll =
        function (b, d, f) {
            var g, h, m, n, p;
            g = a.degreesToRadians(d) / 2;
            h = a.degreesToRadians(b) / 2;
            m = a.degreesToRadians(f) / 2;
            f = Math.cos(g);
            b = Math.cos(h);
            d = Math.cos(m);
            g = Math.sin(g);
            h = Math.sin(h);
            m = Math.sin(m);
            n = b * d;
            p = h * m;
            var u = new a.math.Quaternion;
            u.w = f * n + g * p;
            u.x = g * n - f * p;
            u.y = f * h * d + g * b * m;
            u.z = f * b * m - g * h * d;
            u.normalize();
            return u
        };
    b.slerp = function (b, d) {
        if (this.x === b.x && this.y === b.y && this.z === b.z && this.w === b.w) return this;
        var f = this.dot(b),
            g = Math.acos(f),
            h = Math.sqrt(1 - a.math.square(f)),
            f = Math.sin(d * g) / h,
            g = Math.sin((1 -
                d) * g) / h,
            h = new a.math.Quaternion(b);
        this.scale(g);
        h.scale(f);
        this.add(h);
        return this
    };
    b.toAxisAndAngle = function () {
        var b, d, f = new a.math.Vec3;
        b = Math.acos(this.w);
        d = Math.sqrt(a.math.square(this.x) + a.math.square(this.y) + a.math.square(this.z));
        d > -a.math.EPSILON && d < a.math.EPSILON || d < 2 * Math.PI + a.math.EPSILON && d > 2 * Math.PI - a.math.EPSILON ? (b = 0, f.x = 0, f.y = 0, f.z = 1) : (b *= 2, f.x = this.x / d, f.y = this.y / d, f.z = this.z / d, f.normalize());
        return {
            axis: f,
            angle: b
        }
    };
    b.scale = function (a) {
        this.x *= a;
        this.y *= a;
        this.z *= a;
        this.w *= a;
        return this
    };
    b.assignFrom = function (a) {
        this.x = a.x;
        this.y = a.y;
        this.z = a.z;
        this.w = a.w;
        return this
    };
    b.add = function (a) {
        this.x += a.x;
        this.y += a.y;
        this.z += a.z;
        this.w += a.w;
        return this
    };
    a.math.Quaternion.rotationBetweenVec3 = function (b, d, f) {
        var g = new a.math.Vec3(b),
            h = new a.math.Vec3(d);
        g.normalize();
        h.normalize();
        var m = g.dot(h);
        d = new a.math.Quaternion;
        if (1 <= m) return d.identity(), d; - 0.999999 > m ? Math.abs(f.lengthSq()) < a.math.EPSILON ? d.rotationAxis(f, Math.PI) : (g = new a.math.Vec3(1, 0, 0), g.cross(b), Math.abs(g.lengthSq()) < a.math.EPSILON &&
            (g.fill(0, 1, 0), g.cross(b)), g.normalize(), d.rotationAxis(g, Math.PI)) : (b = Math.sqrt(2 * (1 + m)), f = 1 / b, g.cross(h), d.x = g.x * f, d.y = g.y * f, d.z = g.z * f, d.w = 0.5 * b, d.normalize());
        return d
    };
    b.multiplyVec3 = function (b) {
        var d = this.x,
            f = this.y,
            g = this.z,
            h = new a.math.Vec3(b),
            m = new a.math.Vec3(d, f, g),
            d = new a.math.Vec3(d, f, g);
        m.cross(b);
        d.cross(m);
        m.scale(2 * q.w);
        d.scale(2);
        h.add(m);
        h.add(d);
        return h
    }
})(cc);
cc.math.AABB = function (a, b) {
    this.min = a || new cc.math.Vec3;
    this.max = b || new cc.math.Vec3
};
cc.math.AABB.prototype.containsPoint = function (a) {
    return a.x >= this.min.x && a.x <= this.max.x && a.y >= this.min.y && a.y <= this.max.y && a.z >= this.min.z && a.z <= this.max.z
};
cc.math.AABB.containsPoint = function (a, b) {
    return a.x >= b.min.x && a.x <= b.max.x && a.y >= b.min.y && a.y <= b.max.y && a.z >= b.min.z && a.z <= b.max.z
};
cc.math.AABB.prototype.assignFrom = function (a) {
    this.min.assignFrom(a.min);
    this.max.assignFrom(a.max)
};
cc.math.AABB.assign = function (a, b) {
    a.min.assignFrom(b.min);
    a.max.assignFrom(b.max);
    return a
};
(function (a) {
    a.math.Matrix4Stack = function (a, b) {
        this.top = a;
        this.stack = b || [];
        this.lastUpdated = 0
    };
    a.km_mat4_stack = a.math.Matrix4Stack;
    var b = a.math.Matrix4Stack.prototype;
    b.initialize = function () {
        this.stack.length = 0;
        this.top = null
    };
    a.km_mat4_stack_push = function (b, d) {
        b.stack.push(b.top);
        b.top = new a.math.Matrix4(d)
    };
    a.km_mat4_stack_pop = function (a, b) {
        a.top = a.stack.pop()
    };
    a.km_mat4_stack_release = function (a) {
        a.stack = null;
        a.top = null
    };
    b.push = function (b) {
        b = b || this.top;
        this.stack.push(this.top);
        this.top = new a.math.Matrix4(b)
    };
    b.pop = function () {
        this.top = this.stack.pop()
    };
    b.release = function () {
        this._matrixPool = this.top = this.stack = null
    };
    b._getFromPool = function (b) {
        var d = this._matrixPool;
        if (0 === d.length) return new a.math.Matrix4(b);
        d = d.pop();
        d.assignFrom(b);
        return d
    };
    b._putInPool = function (a) {
        this._matrixPool.push(a)
    }
})(cc);
(function (a) {
    a.KM_GL_MODELVIEW = 5888;
    a.KM_GL_PROJECTION = 5889;
    a.KM_GL_TEXTURE = 5890;
    a.modelview_matrix_stack = new a.math.Matrix4Stack;
    a.projection_matrix_stack = new a.math.Matrix4Stack;
    a.texture_matrix_stack = new a.math.Matrix4Stack;
    a.current_stack = null;
    a.lazyInitialize = function () {
        var b = new a.math.Matrix4;
        a.modelview_matrix_stack.initialize();
        a.projection_matrix_stack.initialize();
        a.texture_matrix_stack.initialize();
        a.current_stack = a.modelview_matrix_stack;
        a.initialized = !0;
        b.identity();
        a.modelview_matrix_stack.push(b);
        a.projection_matrix_stack.push(b);
        a.texture_matrix_stack.push(b)
    };
    a.lazyInitialize();
    a.kmGLFreeAll = function () {
        a.modelview_matrix_stack.release();
        a.modelview_matrix_stack = null;
        a.projection_matrix_stack.release();
        a.projection_matrix_stack = null;
        a.texture_matrix_stack.release();
        a.texture_matrix_stack = null;
        a.initialized = !1;
        a.current_stack = null
    };
    a.kmGLPushMatrix = function () {
        a.current_stack.push(a.current_stack.top)
    };
    a.kmGLPushMatrixWitMat4 = function (b) {
        a.current_stack.stack.push(a.current_stack.top);
        b.assignFrom(a.current_stack.top);
        a.current_stack.top = b
    };
    a.kmGLPopMatrix = function () {
        a.current_stack.top = a.current_stack.stack.pop()
    };
    a.kmGLMatrixMode = function (b) {
        switch (b) {
        case a.KM_GL_MODELVIEW:
            a.current_stack = a.modelview_matrix_stack;
            break;
        case a.KM_GL_PROJECTION:
            a.current_stack = a.projection_matrix_stack;
            break;
        case a.KM_GL_TEXTURE:
            a.current_stack = a.texture_matrix_stack;
            break;
        default:
            throw Error("Invalid matrix mode specified");
        }
        a.current_stack.lastUpdated = a.director.getTotalFrames()
    };
    a.kmGLLoadIdentity = function () {
        a.current_stack.top.identity()
    };
    a.kmGLLoadMatrix = function (b) {
        a.current_stack.top.assignFrom(b)
    };
    a.kmGLMultMatrix = function (b) {
        a.current_stack.top.multiply(b)
    };
    var b = new a.math.Matrix4;
    a.kmGLTranslatef = function (c, f, g) {
        c = a.math.Matrix4.createByTranslation(c, f, g, b);
        a.current_stack.top.multiply(c)
    };
    var c = new a.math.Vec3;
    a.kmGLRotatef = function (d, f, g, h) {
        c.fill(f, g, h);
        d = a.math.Matrix4.createByAxisAndAngle(c, a.degreesToRadians(d), b);
        a.current_stack.top.multiply(d)
    };
    a.kmGLScalef = function (c, f, g) {
        c = a.math.Matrix4.createByScale(c, f, g, b);
        a.current_stack.top.multiply(c)
    };
    a.kmGLGetMatrix = function (b, c) {
        switch (b) {
        case a.KM_GL_MODELVIEW:
            c.assignFrom(a.modelview_matrix_stack.top);
            break;
        case a.KM_GL_PROJECTION:
            c.assignFrom(a.projection_matrix_stack.top);
            break;
        case a.KM_GL_TEXTURE:
            c.assignFrom(a.texture_matrix_stack.top);
            break;
        default:
            throw Error("Invalid matrix mode specified");
        }
    }
})(cc);
cc.SHADER_POSITION_UCOLOR_FRAG = "precision lowp float;\nvarying vec4 v_fragmentColor;\nvoid main()                              \n{ \n    gl_FragColor = v_fragmentColor;      \n}\n";
cc.SHADER_POSITION_UCOLOR_VERT = "attribute vec4 a_position;\nuniform    vec4 u_color;\nuniform float u_pointSize;\nvarying lowp vec4 v_fragmentColor; \nvoid main(void)   \n{\n    gl_Position = (CC_PMatrix * CC_MVMatrix) * a_position;  \n    gl_PointSize = u_pointSize;          \n    v_fragmentColor = u_color;           \n}";
cc.SHADER_POSITION_COLOR_FRAG = "precision lowp float; \nvarying vec4 v_fragmentColor; \nvoid main() \n{ \n     gl_FragColor = v_fragmentColor; \n} ";
cc.SHADER_POSITION_COLOR_VERT = "attribute vec4 a_position;\nattribute vec4 a_color;\nvarying lowp vec4 v_fragmentColor;\nvoid main()\n{\n    gl_Position = (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_fragmentColor = a_color;             \n}";
cc.SHADER_SPRITE_POSITION_COLOR_VERT = "attribute vec4 a_position;\nattribute vec4 a_color;\nvarying lowp vec4 v_fragmentColor;\nvoid main()\n{\n    gl_Position = CC_PMatrix * a_position;  \n    v_fragmentColor = a_color;             \n}";
cc.SHADER_POSITION_COLOR_LENGTH_TEXTURE_FRAG = "// #extension GL_OES_standard_derivatives : enable\nvarying mediump vec4 v_color;\nvarying mediump vec2 v_texcoord;\nvoid main()\t\n{ \n// #if defined GL_OES_standard_derivatives\t\n// gl_FragColor = v_color*smoothstep(0.0, length(fwidth(v_texcoord)), 1.0 - length(v_texcoord)); \n// #else\t\ngl_FragColor = v_color * step(0.0, 1.0 - length(v_texcoord)); \n// #endif \n}";
cc.SHADER_POSITION_COLOR_LENGTH_TEXTURE_VERT = "attribute mediump vec4 a_position; \nattribute mediump vec2 a_texcoord; \nattribute mediump vec4 a_color;\t\nvarying mediump vec4 v_color; \nvarying mediump vec2 v_texcoord;\t\nvoid main() \n{ \n     v_color = a_color;//vec4(a_color.rgb * a_color.a, a_color.a); \n     v_texcoord = a_texcoord; \n    gl_Position = (CC_PMatrix * CC_MVMatrix) * a_position;  \n}";
cc.SHADER_POSITION_TEXTURE_FRAG = "precision lowp float;   \nvarying vec2 v_texCoord;  \nvoid main() \n{  \n    gl_FragColor =  texture2D(CC_Texture0, v_texCoord);   \n}";
cc.SHADER_POSITION_TEXTURE_VERT = "attribute vec4 a_position; \nattribute vec2 a_texCoord; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position = (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_texCoord = a_texCoord;               \n}";
cc.SHADER_POSITION_TEXTURE_UCOLOR_FRAG = "precision lowp float;  \nuniform vec4 u_color; \nvarying vec2 v_texCoord; \nvoid main() \n{  \n    gl_FragColor =  texture2D(CC_Texture0, v_texCoord) * u_color;    \n}";
cc.SHADER_POSITION_TEXTURE_UCOLOR_VERT = "attribute vec4 a_position;\nattribute vec2 a_texCoord; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position = (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_texCoord = a_texCoord;                 \n}";
cc.SHADER_POSITION_TEXTURE_A8COLOR_FRAG = "precision lowp float;  \nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    gl_FragColor = vec4( v_fragmentColor.rgb,         \n        v_fragmentColor.a * texture2D(CC_Texture0, v_texCoord).a   \n    ); \n}";
cc.SHADER_POSITION_TEXTURE_A8COLOR_VERT = "attribute vec4 a_position; \nattribute vec2 a_texCoord; \nattribute vec4 a_color;  \nvarying lowp vec4 v_fragmentColor; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position = (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_fragmentColor = a_color; \n    v_texCoord = a_texCoord; \n}";
cc.SHADER_POSITION_TEXTURE_COLOR_FRAG = "precision lowp float;\nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    gl_FragColor = v_fragmentColor * texture2D(CC_Texture0, v_texCoord); \n}";
cc.SHADER_POSITION_TEXTURE_COLOR_VERT = "attribute vec4 a_position; \nattribute vec2 a_texCoord; \nattribute vec4 a_color;  \nvarying lowp vec4 v_fragmentColor; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position = (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_fragmentColor = a_color; \n    v_texCoord = a_texCoord; \n}";
cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT = "attribute vec4 a_position; \nattribute vec2 a_texCoord; \nattribute vec4 a_color;  \nvarying lowp vec4 v_fragmentColor; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position = CC_PMatrix * a_position;  \n    v_fragmentColor = a_color; \n    v_texCoord = a_texCoord; \n}";
cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG = "precision lowp float;\nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    vec4 c = texture2D(CC_Texture0, v_texCoord); \n    gl_FragColor.xyz = vec3(0.2126*c.r + 0.7152*c.g + 0.0722*c.b); \n     gl_FragColor.w = c.w ; \n}";
cc.SHADER_POSITION_TEXTURE_COLOR_ALPHATEST_FRAG = "precision lowp float;   \nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord;   \nuniform float CC_alpha_value; \nvoid main() \n{  \n    vec4 texColor = texture2D(CC_Texture0, v_texCoord);  \n    if ( texColor.a <= CC_alpha_value )          \n        discard; \n    gl_FragColor = texColor * v_fragmentColor;  \n}";
cc.SHADEREX_SWITCHMASK_FRAG = "precision lowp float; \nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nuniform sampler2D u_texture;  \nuniform sampler2D   u_mask;   \nvoid main()  \n{  \n    vec4 texColor   = texture2D(u_texture, v_texCoord);  \n    vec4 maskColor  = texture2D(u_mask, v_texCoord); \n    vec4 finalColor = vec4(texColor.r, texColor.g, texColor.b, maskColor.a * texColor.a);        \n    gl_FragColor    = v_fragmentColor * finalColor; \n}";
cc.shaderCache = {
    TYPE_POSITION_TEXTURECOLOR: 0,
    TYPE_POSITION_TEXTURECOLOR_ALPHATEST: 1,
    TYPE_POSITION_COLOR: 2,
    TYPE_POSITION_TEXTURE: 3,
    TYPE_POSITION_TEXTURE_UCOLOR: 4,
    TYPE_POSITION_TEXTURE_A8COLOR: 5,
    TYPE_POSITION_UCOLOR: 6,
    TYPE_POSITION_LENGTH_TEXTURECOLOR: 7,
    TYPE_SPRITE_POSITION_TEXTURECOLOR: 8,
    TYPE_SPRITE_POSITION_TEXTURECOLOR_ALPHATEST: 9,
    TYPE_SPRITE_POSITION_COLOR: 10,
    TYPE_SPRITE_POSITION_TEXTURECOLOR_GRAY: 11,
    TYPE_MAX: 11,
    _keyMap: [cc.SHADER_POSITION_TEXTURECOLOR, cc.SHADER_POSITION_TEXTURECOLORALPHATEST, cc.SHADER_POSITION_COLOR,
        cc.SHADER_POSITION_TEXTURE, cc.SHADER_POSITION_TEXTURE_UCOLOR, cc.SHADER_POSITION_TEXTUREA8COLOR, cc.SHADER_POSITION_UCOLOR, cc.SHADER_POSITION_LENGTHTEXTURECOLOR, cc.SHADER_SPRITE_POSITION_TEXTURECOLOR, cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST, cc.SHADER_SPRITE_POSITION_COLOR, cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY
    ],
    _programs: {},
    _init: function () {
        this.loadDefaultShaders();
        return !0
    },
    _loadDefaultShader: function (a, b) {
        switch (b) {
        case cc.SHADER_POSITION_TEXTURECOLOR:
            a.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_COLOR_VERT,
                cc.SHADER_POSITION_TEXTURE_COLOR_FRAG);
            a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
            a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
            a.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);
            break;
        case cc.SHADER_SPRITE_POSITION_TEXTURECOLOR:
            a.initWithVertexShaderByteArray(cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT, cc.SHADER_POSITION_TEXTURE_COLOR_FRAG);
            a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
            a.addAttribute(cc.ATTRIBUTE_NAME_COLOR,
                cc.VERTEX_ATTRIB_COLOR);
            a.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);
            break;
        case cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY:
            a.initWithVertexShaderByteArray(cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT, cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG);
            a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
            a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
            a.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);
            break;
        case cc.SHADER_POSITION_TEXTURECOLORALPHATEST:
            a.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_COLOR_VERT,
                cc.SHADER_POSITION_TEXTURE_COLOR_ALPHATEST_FRAG);
            a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
            a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
            a.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);
            break;
        case cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST:
            a.initWithVertexShaderByteArray(cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT, cc.SHADER_POSITION_TEXTURE_COLOR_ALPHATEST_FRAG);
            a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
            a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
            a.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);
            break;
        case cc.SHADER_POSITION_COLOR:
            a.initWithVertexShaderByteArray(cc.SHADER_POSITION_COLOR_VERT, cc.SHADER_POSITION_COLOR_FRAG);
            a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
            a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
            break;
        case cc.SHADER_SPRITE_POSITION_COLOR:
            a.initWithVertexShaderByteArray(cc.SHADER_SPRITE_POSITION_COLOR_VERT,
                cc.SHADER_POSITION_COLOR_FRAG);
            a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
            a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
            break;
        case cc.SHADER_POSITION_TEXTURE:
            a.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_VERT, cc.SHADER_POSITION_TEXTURE_FRAG);
            a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
            a.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);
            break;
        case cc.SHADER_POSITION_TEXTURE_UCOLOR:
            a.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_UCOLOR_VERT,
                cc.SHADER_POSITION_TEXTURE_UCOLOR_FRAG);
            a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
            a.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);
            break;
        case cc.SHADER_POSITION_TEXTUREA8COLOR:
            a.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_A8COLOR_VERT, cc.SHADER_POSITION_TEXTURE_A8COLOR_FRAG);
            a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
            a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
            a.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD,
                cc.VERTEX_ATTRIB_TEX_COORDS);
            break;
        case cc.SHADER_POSITION_UCOLOR:
            a.initWithVertexShaderByteArray(cc.SHADER_POSITION_UCOLOR_VERT, cc.SHADER_POSITION_UCOLOR_FRAG);
            a.addAttribute("aVertex", cc.VERTEX_ATTRIB_POSITION);
            break;
        case cc.SHADER_POSITION_LENGTHTEXTURECOLOR:
            a.initWithVertexShaderByteArray(cc.SHADER_POSITION_COLOR_LENGTH_TEXTURE_VERT, cc.SHADER_POSITION_COLOR_LENGTH_TEXTURE_FRAG);
            a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
            a.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);
            a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
            break;
        default:
            cc.log("cocos2d: cc.shaderCache._loadDefaultShader, error shader type");
            return
        }
        a.link();
        a.updateUniforms()
    },
    loadDefaultShaders: function () {
        for (var a = 0; a < this.TYPE_MAX; ++a) this.programForKey(this._keyMap[a])
    },
    reloadDefaultShaders: function () {
        var a = this.programForKey(cc.SHADER_POSITION_TEXTURECOLOR);
        a.reset();
        this._loadDefaultShader(a, cc.SHADER_POSITION_TEXTURECOLOR);
        a = this.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR);
        a.reset();
        this._loadDefaultShader(a, cc.SHADER_SPRITE_POSITION_TEXTURECOLOR);
        a = this.programForKey(cc.SHADER_POSITION_TEXTURECOLORALPHATEST);
        a.reset();
        this._loadDefaultShader(a, cc.SHADER_POSITION_TEXTURECOLORALPHATEST);
        a = this.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST);
        a.reset();
        this._loadDefaultShader(a, cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST);
        a = this.programForKey(cc.SHADER_POSITION_COLOR);
        a.reset();
        this._loadDefaultShader(a, cc.SHADER_POSITION_COLOR);
        a = this.programForKey(cc.SHADER_POSITION_TEXTURE);
        a.reset();
        this._loadDefaultShader(a, cc.SHADER_POSITION_TEXTURE);
        a = this.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG);
        a.reset();
        this._loadDefaultShader(a, cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG);
        a = this.programForKey(cc.SHADER_POSITION_TEXTURE_UCOLOR);
        a.reset();
        this._loadDefaultShader(a, cc.SHADER_POSITION_TEXTURE_UCOLOR);
        a = this.programForKey(cc.SHADER_POSITION_TEXTUREA8COLOR);
        a.reset();
        this._loadDefaultShader(a, cc.SHADER_POSITION_TEXTUREA8COLOR);
        a = this.programForKey(cc.SHADER_POSITION_UCOLOR);
        a.reset();
        this._loadDefaultShader(a, cc.SHADER_POSITION_UCOLOR)
    },
    programForKey: function (a) {
        if (!this._programs[a]) {
            var b = new cc.GLProgram;
            this._loadDefaultShader(b, a);
            this._programs[a] = b
        }
        return this._programs[a]
    },
    getProgram: function (a) {
        return this.programForKey(a)
    },
    addProgram: function (a, b) {
        this._programs[b] = a
    }
};
cc.GLProgram = cc.Class.extend({
    _glContext: null,
    _programObj: null,
    _vertShader: null,
    _fragShader: null,
    _uniforms: null,
    _hashForUniforms: null,
    _usesTime: !1,
    _projectionUpdated: -1,
    _updateUniformLocation: function (a) {
        if (!a) return !1;
        var b, c = this._hashForUniforms[a];
        if (c) {
            b = !1;
            for (var d = arguments.length - 1, f = 0; f < d; ++f) arguments[f + 1] !== c[f] && (c[f] = arguments[f + 1], b = !0)
        } else c = [arguments[1], arguments[2], arguments[3], arguments[4]], this._hashForUniforms[a] = c, b = !0;
        return b
    },
    _description: function () {
        return "<CCGLProgram = " +
            this.toString() + " | Program = " + this._programObj.toString() + ", VertexShader = " + this._vertShader.toString() + ", FragmentShader = " + this._fragShader.toString() + ">"
    },
    _compileShader: function (a, b, c) {
        if (!c || !a) return !1;
        c = (cc.GLProgram._isHighpSupported() ? "precision highp float;\n" : "precision mediump float;\n") + "uniform mat4 CC_PMatrix;         \nuniform mat4 CC_MVMatrix;        \nuniform mat4 CC_MVPMatrix;       \nuniform vec4 CC_Time;            \nuniform vec4 CC_SinTime;         \nuniform vec4 CC_CosTime;         \nuniform vec4 CC_Random01;        \nuniform sampler2D CC_Texture0;   \n//CC INCLUDES END                \n" +
            c;
        this._glContext.shaderSource(a, c);
        this._glContext.compileShader(a);
        c = this._glContext.getShaderParameter(a, this._glContext.COMPILE_STATUS);
        c || (cc.log("cocos2d: ERROR: Failed to compile shader:\n" + this._glContext.getShaderSource(a)), b === this._glContext.VERTEX_SHADER ? cc.log("cocos2d: \n" + this.vertexShaderLog()) : cc.log("cocos2d: \n" + this.fragmentShaderLog()));
        return !0 === c
    },
    ctor: function (a, b, c) {
        this._uniforms = {};
        this._hashForUniforms = {};
        this._glContext = c || cc._renderContext;
        a && b && this.init(a, b)
    },
    destroyProgram: function () {
        this._hashForUniforms =
            this._uniforms = this._fragShader = this._vertShader = null;
        this._glContext.deleteProgram(this._programObj)
    },
    initWithVertexShaderByteArray: function (a, b) {
        var c = this._glContext;
        this._programObj = c.createProgram();
        this._fragShader = this._vertShader = null;
        a && (this._vertShader = c.createShader(c.VERTEX_SHADER), this._compileShader(this._vertShader, c.VERTEX_SHADER, a) || cc.log("cocos2d: ERROR: Failed to compile vertex shader"));
        b && (this._fragShader = c.createShader(c.FRAGMENT_SHADER), this._compileShader(this._fragShader,
            c.FRAGMENT_SHADER, b) || cc.log("cocos2d: ERROR: Failed to compile fragment shader"));
        this._vertShader && c.attachShader(this._programObj, this._vertShader);
        cc.checkGLErrorDebug();
        this._fragShader && c.attachShader(this._programObj, this._fragShader);
        for (var d in this._hashForUniforms) delete this._hashForUniforms[d];
        cc.checkGLErrorDebug();
        return !0
    },
    initWithString: function (a, b) {
        return this.initWithVertexShaderByteArray(a, b)
    },
    initWithVertexShaderFilename: function (a, b) {
        var c = cc.loader.getRes(a);
        if (!c) throw Error("Please load the resource firset : " +
            a);
        var d = cc.loader.getRes(b);
        if (!d) throw Error("Please load the resource firset : " + b);
        return this.initWithVertexShaderByteArray(c, d)
    },
    init: function (a, b) {
        return this.initWithVertexShaderFilename(a, b)
    },
    addAttribute: function (a, b) {
        this._glContext.bindAttribLocation(this._programObj, b, a)
    },
    link: function () {
        if (!this._programObj) return cc.log("cc.GLProgram.link(): Cannot link invalid program"), !1;
        this._glContext.linkProgram(this._programObj);
        this._vertShader && this._glContext.deleteShader(this._vertShader);
        this._fragShader && this._glContext.deleteShader(this._fragShader);
        this._fragShader = this._vertShader = null;
        return cc.game.config[cc.game.CONFIG_KEY.debugMode] && !this._glContext.getProgramParameter(this._programObj, this._glContext.LINK_STATUS) ? (cc.log("cocos2d: ERROR: Failed to link program: " + this._glContext.getProgramInfoLog(this._programObj)), cc.glDeleteProgram(this._programObj), this._programObj = null, !1) : !0
    },
    use: function () {
        cc.glUseProgram(this._programObj)
    },
    updateUniforms: function () {
        this._uniforms[cc.UNIFORM_PMATRIX_S] =
            this._glContext.getUniformLocation(this._programObj, cc.UNIFORM_PMATRIX_S);
        this._uniforms[cc.UNIFORM_MVMATRIX_S] = this._glContext.getUniformLocation(this._programObj, cc.UNIFORM_MVMATRIX_S);
        this._uniforms[cc.UNIFORM_MVPMATRIX_S] = this._glContext.getUniformLocation(this._programObj, cc.UNIFORM_MVPMATRIX_S);
        this._uniforms[cc.UNIFORM_TIME_S] = this._glContext.getUniformLocation(this._programObj, cc.UNIFORM_TIME_S);
        this._uniforms[cc.UNIFORM_SINTIME_S] = this._glContext.getUniformLocation(this._programObj, cc.UNIFORM_SINTIME_S);
        this._uniforms[cc.UNIFORM_COSTIME_S] = this._glContext.getUniformLocation(this._programObj, cc.UNIFORM_COSTIME_S);
        this._usesTime = null != this._uniforms[cc.UNIFORM_TIME_S] || null != this._uniforms[cc.UNIFORM_SINTIME_S] || null != this._uniforms[cc.UNIFORM_COSTIME_S];
        this._uniforms[cc.UNIFORM_RANDOM01_S] = this._glContext.getUniformLocation(this._programObj, cc.UNIFORM_RANDOM01_S);
        this._uniforms[cc.UNIFORM_SAMPLER_S] = this._glContext.getUniformLocation(this._programObj, cc.UNIFORM_SAMPLER_S);
        this.use();
        this.setUniformLocationWith1i(this._uniforms[cc.UNIFORM_SAMPLER_S],
            0)
    },
    _addUniformLocation: function (a) {
        var b = this._glContext.getUniformLocation(this._programObj, a);
        this._uniforms[a] = b
    },
    getUniformLocationForName: function (a) {
        if (!a) throw Error("cc.GLProgram.getUniformLocationForName(): uniform name should be non-null");
        if (!this._programObj) throw Error("cc.GLProgram.getUniformLocationForName(): Invalid operation. Cannot get uniform location when program is not initialized");
        return this._uniforms[a] || this._glContext.getUniformLocation(this._programObj, a)
    },
    getUniformMVPMatrix: function () {
        return this._uniforms[cc.UNIFORM_MVPMATRIX_S]
    },
    getUniformSampler: function () {
        return this._uniforms[cc.UNIFORM_SAMPLER_S]
    },
    setUniformLocationWith1i: function (a, b) {
        var c = this._glContext;
        if ("string" === typeof a) {
            if (this._updateUniformLocation(a, b)) {
                var d = this.getUniformLocationForName(a);
                c.uniform1i(d, b)
            }
        } else c.uniform1i(a, b)
    },
    setUniformLocationWith2i: function (a, b, c) {
        var d = this._glContext;
        "string" === typeof a ? this._updateUniformLocation(a, b, c) && (a = this.getUniformLocationForName(a), d.uniform2i(a, b, c)) : d.uniform2i(a, b, c)
    },
    setUniformLocationWith3i: function (a,
        b, c, d) {
        var f = this._glContext;
        "string" === typeof a ? this._updateUniformLocation(a, b, c, d) && (a = this.getUniformLocationForName(a), f.uniform3i(a, b, c, d)) : f.uniform3i(a, b, c, d)
    },
    setUniformLocationWith4i: function (a, b, c, d, f) {
        var g = this._glContext;
        "string" === typeof a ? this._updateUniformLocation(a, b, c, d, f) && (a = this.getUniformLocationForName(a), g.uniform4i(a, b, c, d, f)) : g.uniform4i(a, b, c, d, f)
    },
    setUniformLocationWith2iv: function (a, b) {
        var c = "string" === typeof a ? this.getUniformLocationForName(a) : a;
        this._glContext.uniform2iv(c,
            b)
    },
    setUniformLocationWith3iv: function (a, b) {
        var c = "string" === typeof a ? this.getUniformLocationForName(a) : a;
        this._glContext.uniform3iv(c, b)
    },
    setUniformLocationWith4iv: function (a, b) {
        var c = "string" === typeof a ? this.getUniformLocationForName(a) : a;
        this._glContext.uniform4iv(c, b)
    },
    setUniformLocationI32: function (a, b) {
        this.setUniformLocationWith1i(a, b)
    },
    setUniformLocationWith1f: function (a, b) {
        var c = this._glContext;
        if ("string" === typeof a) {
            if (this._updateUniformLocation(a, b)) {
                var d = this.getUniformLocationForName(a);
                c.uniform1f(d, b)
            }
        } else c.uniform1f(a, b)
    },
    setUniformLocationWith2f: function (a, b, c) {
        var d = this._glContext;
        "string" === typeof a ? this._updateUniformLocation(a, b, c) && (a = this.getUniformLocationForName(a), d.uniform2f(a, b, c)) : d.uniform2f(a, b, c)
    },
    setUniformLocationWith3f: function (a, b, c, d) {
        var f = this._glContext;
        "string" === typeof a ? this._updateUniformLocation(a, b, c, d) && (a = this.getUniformLocationForName(a), f.uniform3f(a, b, c, d)) : f.uniform3f(a, b, c, d)
    },
    setUniformLocationWith4f: function (a, b, c, d, f) {
        var g = this._glContext;
        "string" === typeof a ? this._updateUniformLocation(a, b, c, d, f) && (a = this.getUniformLocationForName(a), g.uniform4f(a, b, c, d, f)) : g.uniform4f(a, b, c, d, f)
    },
    setUniformLocationWith2fv: function (a, b) {
        var c = "string" === typeof a ? this.getUniformLocationForName(a) : a;
        this._glContext.uniform2fv(c, b)
    },
    setUniformLocationWith3fv: function (a, b) {
        var c = "string" === typeof a ? this.getUniformLocationForName(a) : a;
        this._glContext.uniform3fv(c, b)
    },
    setUniformLocationWith4fv: function (a, b) {
        var c = "string" === typeof a ? this.getUniformLocationForName(a) :
            a;
        this._glContext.uniform4fv(c, b)
    },
    setUniformLocationWithMatrix3fv: function (a, b) {
        var c = "string" === typeof a ? this.getUniformLocationForName(a) : a;
        this._glContext.uniformMatrix3fv(c, !1, b)
    },
    setUniformLocationWithMatrix4fv: function (a, b) {
        var c = "string" === typeof a ? this.getUniformLocationForName(a) : a;
        this._glContext.uniformMatrix4fv(c, !1, b)
    },
    setUniformLocationF32: function () {
        if (!(2 > arguments.length)) switch (arguments.length) {
        case 2:
            this.setUniformLocationWith1f(arguments[0], arguments[1]);
            break;
        case 3:
            this.setUniformLocationWith2f(arguments[0],
                arguments[1], arguments[2]);
            break;
        case 4:
            this.setUniformLocationWith3f(arguments[0], arguments[1], arguments[2], arguments[3]);
            break;
        case 5:
            this.setUniformLocationWith4f(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4])
        }
    },
    setUniformsForBuiltins: function () {
        var a = new cc.math.Matrix4,
            b = new cc.math.Matrix4,
            c = new cc.math.Matrix4;
        cc.kmGLGetMatrix(cc.KM_GL_PROJECTION, a);
        cc.kmGLGetMatrix(cc.KM_GL_MODELVIEW, b);
        cc.kmMat4Multiply(c, a, b);
        this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_PMATRIX_S],
            a.mat, 1);
        this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_MVMATRIX_S], b.mat, 1);
        this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_MVPMATRIX_S], c.mat, 1);
        this._usesTime && (a = cc.director, a = a.getTotalFrames() * a.getAnimationInterval(), this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_TIME_S], a / 10, a, 2 * a, 4 * a), this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_SINTIME_S], a / 8, a / 4, a / 2, Math.sin(a)), this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_COSTIME_S], a / 8, a / 4,
            a / 2, Math.cos(a))); - 1 !== this._uniforms[cc.UNIFORM_RANDOM01_S] && this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_RANDOM01_S], Math.random(), Math.random(), Math.random(), Math.random())
    },
    _setUniformsForBuiltinsForRenderer: function (a) {
        if (a && a._renderCmd) {
            var b = new cc.math.Matrix4,
                c = new cc.math.Matrix4;
            cc.kmGLGetMatrix(cc.KM_GL_PROJECTION, b);
            cc.kmMat4Multiply(c, b, a._renderCmd._stackMatrix);
            this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_PMATRIX_S], b.mat, 1);
            this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_MVMATRIX_S],
                a._renderCmd._stackMatrix.mat, 1);
            this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_MVPMATRIX_S], c.mat, 1);
            this._usesTime && (a = cc.director, a = a.getTotalFrames() * a.getAnimationInterval(), this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_TIME_S], a / 10, a, 2 * a, 4 * a), this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_SINTIME_S], a / 8, a / 4, a / 2, Math.sin(a)), this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_COSTIME_S], a / 8, a / 4, a / 2, Math.cos(a))); - 1 !== this._uniforms[cc.UNIFORM_RANDOM01_S] &&
                this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_RANDOM01_S], Math.random(), Math.random(), Math.random(), Math.random())
        }
    },
    setUniformForModelViewProjectionMatrix: function () {
        this._glContext.uniformMatrix4fv(this._uniforms[cc.UNIFORM_MVPMATRIX_S], !1, cc.getMat4MultiplyValue(cc.projection_matrix_stack.top, cc.modelview_matrix_stack.top))
    },
    setUniformForModelViewProjectionMatrixWithMat4: function (a) {
        cc.kmMat4Multiply(a, cc.projection_matrix_stack.top, cc.modelview_matrix_stack.top);
        this._glContext.uniformMatrix4fv(this._uniforms[cc.UNIFORM_MVPMATRIX_S],
            !1, a.mat)
    },
    setUniformForModelViewAndProjectionMatrixWithMat4: function () {
        this._glContext.uniformMatrix4fv(this._uniforms[cc.UNIFORM_MVMATRIX_S], !1, cc.modelview_matrix_stack.top.mat);
        this._glContext.uniformMatrix4fv(this._uniforms[cc.UNIFORM_PMATRIX_S], !1, cc.projection_matrix_stack.top.mat)
    },
    _setUniformForMVPMatrixWithMat4: function (a) {
        if (!a) throw Error("modelView matrix is undefined.");
        this._glContext.uniformMatrix4fv(this._uniforms[cc.UNIFORM_MVMATRIX_S], !1, a.mat);
        this._glContext.uniformMatrix4fv(this._uniforms[cc.UNIFORM_PMATRIX_S],
            !1, cc.projection_matrix_stack.top.mat)
    },
    _updateProjectionUniform: function () {
        var a = cc.projection_matrix_stack;
        a.lastUpdated !== this._projectionUpdated && (this._glContext.uniformMatrix4fv(this._uniforms[cc.UNIFORM_PMATRIX_S], !1, a.top.mat), this._projectionUpdated = a.lastUpdated)
    },
    vertexShaderLog: function () {
        return this._glContext.getShaderInfoLog(this._vertShader)
    },
    getVertexShaderLog: function () {
        return this._glContext.getShaderInfoLog(this._vertShader)
    },
    getFragmentShaderLog: function () {
        return this._glContext.getShaderInfoLog(this._vertShader)
    },
    fragmentShaderLog: function () {
        return this._glContext.getShaderInfoLog(this._fragShader)
    },
    programLog: function () {
        return this._glContext.getProgramInfoLog(this._programObj)
    },
    getProgramLog: function () {
        return this._glContext.getProgramInfoLog(this._programObj)
    },
    reset: function () {
        this._fragShader = this._vertShader = null;
        this._uniforms.length = 0;
        this._glContext.deleteProgram(this._programObj);
        this._programObj = null;
        for (var a in this._hashForUniforms) this._hashForUniforms[a].length = 0, delete this._hashForUniforms[a]
    },
    getProgram: function () {
        return this._programObj
    },
    retain: function () {},
    release: function () {}
});
cc.GLProgram.create = function (a, b) {
    return new cc.GLProgram(a, b)
};
cc.GLProgram._highpSupported = null;
cc.GLProgram._isHighpSupported = function () {
    var a = cc._renderContext;
    a.getShaderPrecisionFormat && null == cc.GLProgram._highpSupported && (a = a.getShaderPrecisionFormat(a.FRAGMENT_SHADER, a.HIGH_FLOAT), cc.GLProgram._highpSupported = 0 !== a.precision);
    return cc.GLProgram._highpSupported
};
cc.setProgram = function (a, b) {
    a.shaderProgram = b;
    var c = a.children;
    if (c)
        for (var d = 0; d < c.length; d++) cc.setProgram(c[d], b)
};
cc._currentProjectionMatrix = -1;
cc.ENABLE_GL_STATE_CACHE && (cc.MAX_ACTIVETEXTURE = 16, cc._currentShaderProgram = -1, cc._currentBoundTexture = [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1], cc._blendingSource = -1, cc._blendingDest = -1, cc._GLServerState = 0, cc.TEXTURE_ATLAS_USE_VAO && (cc._uVAO = 0));
cc.glInvalidateStateCache = function () {
    cc.kmGLFreeAll();
    cc._currentProjectionMatrix = -1;
    if (cc.ENABLE_GL_STATE_CACHE) {
        cc._currentShaderProgram = -1;
        for (var a = 0; a < cc.MAX_ACTIVETEXTURE; a++) cc._currentBoundTexture[a] = -1;
        cc._blendingSource = -1;
        cc._blendingDest = -1;
        cc._GLServerState = 0
    }
};
cc.glUseProgram = cc.ENABLE_GL_STATE_CACHE ? function (a) {
    a !== cc._currentShaderProgram && (cc._currentShaderProgram = a, cc._renderContext.useProgram(a))
} : function (a) {
    cc._renderContext.useProgram(a)
};
cc.glDeleteProgram = function (a) {
    cc.ENABLE_GL_STATE_CACHE && a === cc._currentShaderProgram && (cc._currentShaderProgram = -1);
    gl.deleteProgram(a)
};
cc.setBlending = function (a, b) {
    var c = cc._renderContext;
    a === c.ONE && b === c.ZERO ? c.disable(c.BLEND) : (c.enable(c.BLEND), cc._renderContext.blendFunc(a, b))
};
cc.glBlendFunc = cc.ENABLE_GL_STATE_CACHE ? function (a, b) {
    if (a !== cc._blendingSource || b !== cc._blendingDest) cc._blendingSource = a, cc._blendingDest = b, cc.setBlending(a, b)
} : cc.setBlending;
cc.glBlendFuncForParticle = function (a, b) {
    if (a !== cc._blendingSource || b !== cc._blendingDest) {
        cc._blendingSource = a;
        cc._blendingDest = b;
        var c = cc._renderContext;
        a === c.ONE && b === c.ZERO ? c.disable(c.BLEND) : (c.enable(c.BLEND), c.blendFuncSeparate(c.SRC_ALPHA, b, a, b))
    }
};
cc.glBlendResetToCache = function () {
    var a = cc._renderContext;
    a.blendEquation(a.FUNC_ADD);
    cc.ENABLE_GL_STATE_CACHE ? cc.setBlending(cc._blendingSource, cc._blendingDest) : cc.setBlending(a.BLEND_SRC, a.BLEND_DST)
};
cc.setProjectionMatrixDirty = function () {
    cc._currentProjectionMatrix = -1
};
cc.glBindTexture2D = function (a) {
    cc.glBindTexture2DN(0, a)
};
cc.glBindTexture2DN = cc.ENABLE_GL_STATE_CACHE ? function (a, b) {
    if (cc._currentBoundTexture[a] !== b) {
        cc._currentBoundTexture[a] = b;
        var c = cc._renderContext;
        c.activeTexture(c.TEXTURE0 + a);
        b ? c.bindTexture(c.TEXTURE_2D, b._webTextureObj) : c.bindTexture(c.TEXTURE_2D, null)
    }
} : function (a, b) {
    var c = cc._renderContext;
    c.activeTexture(c.TEXTURE0 + a);
    b ? c.bindTexture(c.TEXTURE_2D, b._webTextureObj) : c.bindTexture(c.TEXTURE_2D, null)
};
cc.glDeleteTexture = function (a) {
    cc.glDeleteTextureN(0, a)
};
cc.glDeleteTextureN = function (a, b) {
    cc.ENABLE_GL_STATE_CACHE && b === cc._currentBoundTexture[a] && (cc._currentBoundTexture[a] = -1);
    cc._renderContext.deleteTexture(b._webTextureObj)
};
cc.glBindVAO = function (a) {
    cc.TEXTURE_ATLAS_USE_VAO && (cc.ENABLE_GL_STATE_CACHE && cc._uVAO !== a) && (cc._uVAO = a)
};
cc.glEnable = function (a) {};
cc.IMAGE_FORMAT_JPEG = 0;
cc.IMAGE_FORMAT_PNG = 1;
cc.IMAGE_FORMAT_RAWDATA = 9;
cc.NextPOT = function (a) {
    a -= 1;
    a |= a >> 1;
    a |= a >> 2;
    a |= a >> 4;
    a |= a >> 8;
    return (a | a >> 16) + 1
};
cc.RenderTexture = cc.Node.extend({
    sprite: null,
    clearFlags: 0,
    clearDepthVal: 0,
    autoDraw: !1,
    _texture: null,
    _pixelFormat: 0,
    clearStencilVal: 0,
    _clearColor: null,
    _className: "RenderTexture",
    ctor: function (a, b, c, d) {
        cc.Node.prototype.ctor.call(this);
        this._cascadeOpacityEnabled = this._cascadeColorEnabled = !0;
        this._pixelFormat = cc.Texture2D.PIXEL_FORMAT_RGBA8888;
        this._clearColor = new cc.Color(0, 0, 0, 255);
        void 0 !== a && void 0 !== b && (c = c || cc.Texture2D.PIXEL_FORMAT_RGBA8888, this.initWithWidthAndHeight(a, b, c, d || 0));
        this.setAnchorPoint(0,
            0)
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new cc.RenderTexture.CanvasRenderCmd(this) : new cc.RenderTexture.WebGLRenderCmd(this)
    },
    visit: function (a) {
        var b = this._renderCmd;
        a = a ? a._renderCmd : null;
        if (this._visible) {
            var c = cc.renderer;
            b.visit(a);
            c.pushRenderCommand(b);
            this.sprite.visit(this);
            b._dirtyFlag = 0
        } else b._propagateFlagsDown(a)
    },
    cleanup: function () {
        cc.Node.prototype.onExit.call(this);
        this._renderCmd.cleanup()
    },
    getSprite: function () {
        return this.sprite
    },
    setSprite: function (a) {
        this.sprite =
            a
    },
    setVirtualViewport: function (a, b, c) {
        this._renderCmd.setVirtualViewport(a, b, c)
    },
    initWithWidthAndHeight: function (a, b, c, d) {
        return this._renderCmd.initWithWidthAndHeight(a, b, c, d)
    },
    begin: function () {
        cc.renderer._turnToCacheMode(this.__instanceId);
        this._renderCmd.begin()
    },
    beginWithClear: function (a, b, c, d, f, g) {
        var h = cc._renderContext;
        f = f || h.COLOR_BUFFER_BIT;
        g = g || h.COLOR_BUFFER_BIT | h.DEPTH_BUFFER_BIT;
        this._beginWithClear(a, b, c, d, f, g, h.COLOR_BUFFER_BIT | h.DEPTH_BUFFER_BIT | h.STENCIL_BUFFER_BIT)
    },
    _beginWithClear: function (a,
        b, c, d, f, g, h) {
        this.begin();
        this._renderCmd._beginWithClear(a, b, c, d, f, g, h)
    },
    end: function () {
        this._renderCmd.end()
    },
    clear: function (a, b, c, d) {
        this.beginWithClear(a, b, c, d);
        this.end()
    },
    clearRect: function (a, b, c, d) {
        this._renderCmd.clearRect(a, b, c, d)
    },
    clearDepth: function (a) {
        this._renderCmd.clearDepth(a)
    },
    clearStencil: function (a) {
        this._renderCmd.clearStencil(a)
    },
    getClearFlags: function () {
        return this.clearFlags
    },
    setClearFlags: function (a) {
        this.clearFlags = a
    },
    getClearColor: function () {
        return this._clearColor
    },
    setClearColor: function (a) {
        var b =
            this._clearColor;
        b.r = a.r;
        b.g = a.g;
        b.b = a.b;
        b.a = a.a;
        this._renderCmd.updateClearColor(a)
    },
    getClearDepth: function () {
        return this.clearDepthVal
    },
    setClearDepth: function (a) {
        this.clearDepthVal = a
    },
    getClearStencil: function () {
        return this.clearStencilVal
    },
    setClearStencil: function (a) {
        this.clearStencilVal = a
    },
    isAutoDraw: function () {
        return this.autoDraw
    },
    setAutoDraw: function (a) {
        this.autoDraw = a
    },
    saveToFile: function (a, b) {
        cc.log("saveToFile isn't supported on Cocos2d-Html5")
    },
    newCCImage: function (a) {
        cc.log("saveToFile isn't supported on cocos2d-html5");
        return null
    },
    listenToBackground: function (a) {},
    listenToForeground: function (a) {}
});
_p = cc.RenderTexture.prototype;
cc.defineGetterSetter(_p, "clearColorVal", _p.getClearColor, _p.setClearColor);
cc.RenderTexture.create = function (a, b, c, d) {
    return new cc.RenderTexture(a, b, c, d)
};
(function () {
    cc.RenderTexture.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !1;
        this._clearColorStr = "rgba(255,255,255,1)";
        this._cacheCanvas = document.createElement("canvas");
        this._cacheContext = new cc.CanvasContextWrapper(this._cacheCanvas.getContext("2d"))
    };
    var a = cc.RenderTexture.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    a.constructor = cc.RenderTexture.CanvasRenderCmd;
    a.cleanup = function () {
        this._cacheCanvas = this._cacheContext = null
    };
    a.clearStencil = function (a) {};
    a.setVirtualViewport = function (a, c, d) {};
    a.updateClearColor = function (a) {
        this._clearColorStr = "rgba(" + (0 | a.r) + "," + (0 | a.g) + "," + (0 | a.b) + "," + a.a / 255 + ")"
    };
    a.initWithWidthAndHeight = function (a, c, d, f) {
        d = this._node;
        f = this._cacheCanvas;
        var g = cc.contentScaleFactor();
        f.width = 0 | a * g;
        f.height = 0 | c * g;
        a = new cc.Texture2D;
        a.initWithElement(f);
        a.handleLoadedTexture();
        a = d.sprite = new cc.Sprite(a);
        a.setBlendFunc(cc.ONE, cc.ONE_MINUS_SRC_ALPHA);
        d.autoDraw = !1;
        d.addChild(a);
        return !0
    };
    a.begin = function () {};
    a._beginWithClear = function (a,
        c, d, f, g, h, m) {
        a = a || 0;
        c = c || 0;
        d = d || 0;
        f = isNaN(f) ? 255 : f;
        g = this._cacheContext.getContext();
        h = this._cacheCanvas;
        g.setTransform(1, 0, 0, 1, 0, 0);
        this._cacheContext.setFillStyle("rgba(" + (0 | a) + "," + (0 | c) + "," + (0 | d) + "," + f / 255 + ")");
        g.clearRect(0, 0, h.width, h.height);
        g.fillRect(0, 0, h.width, h.height)
    };
    a.end = function () {
        var a = this._node,
            c = cc.contentScaleFactor();
        cc.renderer._renderingToCacheCanvas(this._cacheContext, a.__instanceId, c, c);
        a = a.sprite._renderCmd;
        a._notifyRegionStatus && a._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty)
    };
    a.clearRect = function (a, c, d, f) {
        this._cacheContext.clearRect(a, c, d, -f)
    };
    a.clearDepth = function (a) {
        cc.log("clearDepth isn't supported on Cocos2d-Html5")
    }
})();
(function () {
    cc.RenderTexture.WebGLRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !0;
        this._depthRenderBuffer = this._textureCopy = this._oldFBO = this._fBO = null;
        this._rtTextureRect = new cc.Rect;
        this._fullRect = new cc.Rect;
        this._fullViewport = new cc.Rect
    };
    var a = cc.RenderTexture.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
    a.constructor = cc.RenderTexture.WebGLRenderCmd;
    a.setVirtualViewport = function (a, c, d) {
        this._rtTextureRect.x = a.x;
        this._rtTextureRect.y = a.y;
        this._fullRect = c;
        this._fullViewport = d
    };
    a.needDraw = function () {
        return this._needDraw && this._node.autoDraw
    };
    a.rendering = function (a) {
        var c = a || cc._renderContext;
        a = this._node;
        if (a.autoDraw) {
            a.begin();
            var d = a.clearFlags;
            if (d) {
                var f = [0, 0, 0, 0],
                    g = 0,
                    h = 0;
                d & c.COLOR_BUFFER_BIT && (f = c.getParameter(c.COLOR_CLEAR_VALUE), c.clearColor(a._clearColor.r / 255, a._clearColor.g / 255, a._clearColor.b / 255, a._clearColor.a / 255));
                d & c.DEPTH_BUFFER_BIT && (g = c.getParameter(c.DEPTH_CLEAR_VALUE), c.clearDepth(a.clearDepthVal));
                d & c.STENCIL_BUFFER_BIT && (h =
                    c.getParameter(c.STENCIL_CLEAR_VALUE), c.clearStencil(a.clearStencilVal));
                c.clear(d);
                d & c.COLOR_BUFFER_BIT && c.clearColor(f[0], f[1], f[2], f[3]);
                d & c.DEPTH_BUFFER_BIT && c.clearDepth(g);
                d & c.STENCIL_BUFFER_BIT && c.clearStencil(h)
            }
            a.sortAllChildren();
            c = a._children;
            for (d = 0; d < c.length; d++) f = c[d], f !== a.sprite && f.visit(a.sprite);
            a.end()
        }
    };
    a.clearStencil = function (a) {
        var c = cc._renderContext,
            d = c.getParameter(c.STENCIL_CLEAR_VALUE);
        c.clearStencil(a);
        c.clear(c.STENCIL_BUFFER_BIT);
        c.clearStencil(d)
    };
    a.cleanup = function () {
        this._textureCopy =
            null;
        var a = cc._renderContext;
        a.deleteFramebuffer(this._fBO);
        this._depthRenderBuffer && a.deleteRenderbuffer(this._depthRenderBuffer)
    };
    a.updateClearColor = function (a) {};
    a.initWithWidthAndHeight = function (a, c, d, f) {
        var g = this._node;
        d === cc.Texture2D.PIXEL_FORMAT_A8 && cc.log("cc.RenderTexture._initWithWidthAndHeightForWebGL() : only RGB and RGBA formats are valid for a render texture;");
        var h = cc._renderContext,
            m = cc.contentScaleFactor();
        this._fullRect = new cc.Rect(0, 0, a, c);
        this._fullViewport = new cc.Rect(0, 0,
            a, c);
        a = 0 | a * m;
        c = 0 | c * m;
        this._oldFBO = h.getParameter(h.FRAMEBUFFER_BINDING);
        var n;
        cc.configuration.supportsNPOT() ? (m = a, n = c) : (m = cc.NextPOT(a), n = cc.NextPOT(c));
        for (var p = new Uint8Array(4 * m * n), u = 0; u < 4 * m * n; u++) p[u] = 0;
        this._pixelFormat = d;
        u = g._texture = new cc.Texture2D;
        if (!g._texture) return !1;
        u.initWithData(p, g._pixelFormat, m, n, cc.size(a, c));
        d = h.getParameter(h.RENDERBUFFER_BINDING);
        if (cc.configuration.checkForGLExtension("GL_QCOM")) {
            this._textureCopy = new cc.Texture2D;
            if (!this._textureCopy) return !1;
            this._textureCopy.initWithData(p,
                g._pixelFormat, m, n, cc.size(a, c))
        }
        this._fBO = h.createFramebuffer();
        h.bindFramebuffer(h.FRAMEBUFFER, this._fBO);
        h.framebufferTexture2D(h.FRAMEBUFFER, h.COLOR_ATTACHMENT0, h.TEXTURE_2D, u._webTextureObj, 0);
        0 !== f && (this._depthRenderBuffer = h.createRenderbuffer(), h.bindRenderbuffer(h.RENDERBUFFER, this._depthRenderBuffer), h.renderbufferStorage(h.RENDERBUFFER, f, m, n), f === h.DEPTH_STENCIL ? h.framebufferRenderbuffer(h.FRAMEBUFFER, h.DEPTH_STENCIL_ATTACHMENT, h.RENDERBUFFER, this._depthRenderBuffer) : f === h.STENCIL_INDEX ||
            f === h.STENCIL_INDEX8 ? h.framebufferRenderbuffer(h.FRAMEBUFFER, h.STENCIL_ATTACHMENT, h.RENDERBUFFER, this._depthRenderBuffer) : f === h.DEPTH_COMPONENT16 && h.framebufferRenderbuffer(h.FRAMEBUFFER, h.DEPTH_ATTACHMENT, h.RENDERBUFFER, this._depthRenderBuffer));
        h.checkFramebufferStatus(h.FRAMEBUFFER) !== h.FRAMEBUFFER_COMPLETE && cc.log("Could not attach texture to the framebuffer");
        u.setAliasTexParameters();
        a = g.sprite = new cc.Sprite(u);
        a.scaleY = -1;
        a.setBlendFunc(h.ONE, h.ONE_MINUS_SRC_ALPHA);
        h.bindRenderbuffer(h.RENDERBUFFER,
            d);
        h.bindFramebuffer(h.FRAMEBUFFER, this._oldFBO);
        g.autoDraw = !1;
        g.addChild(a);
        return !0
    };
    a.begin = function () {
        var a = this._node;
        cc.kmGLMatrixMode(cc.KM_GL_PROJECTION);
        cc.kmGLPushMatrix();
        cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW);
        cc.kmGLPushMatrix();
        var c = cc._renderContext,
            d = cc.director;
        d.setProjection(d.getProjection());
        var f = a._texture.getContentSizeInPixels(),
            g = cc.director.getWinSizeInPixels(),
            d = g.width / f.width,
            f = g.height / f.height,
            d = cc.math.Matrix4.createOrthographicProjection(-1 / d, 1 / d, -1 / f, 1 / f, -1, 1);
        cc.kmGLMultMatrix(d);
        d = new cc.Rect(0, 0, 0, 0);
        d.width = this._fullViewport.width;
        d.height = this._fullViewport.height;
        f = d.height / this._fullRect.height;
        d.x = (this._fullRect.x - this._rtTextureRect.x) * (d.width / this._fullRect.width);
        d.y = (this._fullRect.y - this._rtTextureRect.y) * f;
        c.viewport(d.x, d.y, d.width, d.height);
        this._oldFBO = c.getParameter(c.FRAMEBUFFER_BINDING);
        c.bindFramebuffer(c.FRAMEBUFFER, this._fBO);
        cc.configuration.checkForGLExtension("GL_QCOM") && (c.framebufferTexture2D(c.FRAMEBUFFER, c.COLOR_ATTACHMENT0, c.TEXTURE_2D, this._textureCopy._webTextureObj,
            0), c.clear(c.COLOR_BUFFER_BIT | c.DEPTH_BUFFER_BIT), c.framebufferTexture2D(c.FRAMEBUFFER, c.COLOR_ATTACHMENT0, c.TEXTURE_2D, a._texture._webTextureObj, 0))
    };
    a._beginWithClear = function (a, c, d, f, g, h, m) {
        a /= 255;
        c /= 255;
        d /= 255;
        f /= 255;
        var n = cc._renderContext,
            p = [0, 0, 0, 0],
            u = 0,
            v = 0;
        m & n.COLOR_BUFFER_BIT && (p = n.getParameter(n.COLOR_CLEAR_VALUE), n.clearColor(a, c, d, f));
        m & n.DEPTH_BUFFER_BIT && (u = n.getParameter(n.DEPTH_CLEAR_VALUE), n.clearDepth(g));
        m & n.STENCIL_BUFFER_BIT && (v = n.getParameter(n.STENCIL_CLEAR_VALUE), n.clearStencil(h));
        n.clear(m);
        m & n.COLOR_BUFFER_BIT && n.clearColor(p[0], p[1], p[2], p[3]);
        m & n.DEPTH_BUFFER_BIT && n.clearDepth(u);
        m & n.STENCIL_BUFFER_BIT && n.clearStencil(v)
    };
    a.end = function () {
        cc.renderer._renderingToBuffer(this._node.__instanceId);
        var a = cc._renderContext,
            c = cc.director;
        a.bindFramebuffer(a.FRAMEBUFFER, this._oldFBO);
        c.setViewport();
        cc.kmGLMatrixMode(cc.KM_GL_PROJECTION);
        cc.kmGLPopMatrix();
        cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW);
        cc.kmGLPopMatrix()
    };
    a.clearRect = function (a, c, d, f) {};
    a.clearDepth = function (a) {
        var c = this._node;
        c.begin();
        var d = cc._renderContext,
            f = d.getParameter(d.DEPTH_CLEAR_VALUE);
        d.clearDepth(a);
        d.clear(d.DEPTH_BUFFER_BIT);
        d.clearDepth(f);
        c.end()
    }
})();
cc.LabelBMFont = cc.SpriteBatchNode.extend({
    _opacityModifyRGB: !1,
    _string: "",
    _config: null,
    _fntFile: "",
    _initialString: "",
    _alignment: cc.TEXT_ALIGNMENT_CENTER,
    _width: -1,
    _lineBreakWithoutSpaces: !1,
    _imageOffset: null,
    _textureLoaded: !1,
    _className: "LabelBMFont",
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_WEBGL ? new cc.LabelBMFont.WebGLRenderCmd(this) : new cc.LabelBMFont.CanvasRenderCmd(this)
    },
    _setString: function (a, b) {
        b ? this._initialString = a : this._string = a;
        var c = this._children;
        if (c)
            for (var d =
                    0; d < c.length; d++) {
                var f = c[d];
                f && f.setVisible(!1)
            }
        this._textureLoaded && (this._string && 0 < this._string.length && this.createFontChars(), b && this.updateLabel())
    },
    ctor: function (a, b, c, d, f) {
        cc.SpriteBatchNode.prototype.ctor.call(this);
        this._imageOffset = cc.p(0, 0);
        this._cascadeOpacityEnabled = this._cascadeColorEnabled = !0;
        this.initWithString(a, b, c, d, f)
    },
    textureLoaded: function () {
        return this._textureLoaded
    },
    addLoadedEventListener: function (a, b) {
        this.addEventListener("load", a, b)
    },
    isOpacityModifyRGB: function () {
        return this._opacityModifyRGB
    },
    setOpacityModifyRGB: function (a) {
        this._opacityModifyRGB = a;
        if (a = this._children)
            for (var b = 0; b < a.length; b++) {
                var c = a[b];
                c && (c.opacityModifyRGB = this._opacityModifyRGB)
            }
    },
    _changeTextureColor: function () {
        this._renderCmd._changeTextureColor()
    },
    init: function () {
        return this.initWithString(null, null, null, null, null)
    },
    initWithString: function (a, b, c, d, f) {
        a = a || "";
        this._config && cc.log("cc.LabelBMFont.initWithString(): re-init is no longer supported");
        var g;
        if (b) {
            g = cc.loader.getRes(b);
            if (!g && (g = cc.FntFrameCache[b] ||
                    cc.FntFrameCache[cc.path.basename(b)], !g)) return cc.log("cc.LabelBMFont.initWithString(): Impossible to create font. Please check file"), !1;
            this._config = g;
            this._fntFile = b;
            b = g.atlasName;
            (b = cc.spriteFrameCache.getSpriteFrame(b) || cc.spriteFrameCache.getSpriteFrame(cc.path.basename(b))) ? (g = b.getTexture(), this._spriteFrame = b) : g = cc.textureCache.addImage(g.atlasName);
            (this._textureLoaded = b = g.isLoaded()) || g.addEventListener("load", function (a) {
                this._textureLoaded = !0;
                this.initWithTexture(a, this._initialString.length);
                this.setString(this._initialString, !0);
                this.dispatchEvent("load")
            }, this)
        } else g = new cc.Texture2D, b = new Image, g.initWithElement(b), this._textureLoaded = !1;
        return this.initWithTexture(g, a.length) ? (this._alignment = d || cc.TEXT_ALIGNMENT_LEFT, this._imageOffset = f || cc.p(0, 0), this._width = void 0 === c ? -1 : c, this._realOpacity = 255, this._realColor = cc.color(255, 255, 255, 255), this._contentSize.width = 0, this._contentSize.height = 0, this.setAnchorPoint(0.5, 0.5), this.setString(a, !0), !0) : !1
    },
    createFontChars: function () {
        var a =
            this._string,
            b = a ? a.length : 0,
            c = this._renderCmd,
            d = c._texture || this._texture,
            f = 0,
            g = cc.size(0, 0),
            h = 0,
            m = 1,
            n, p = this._config,
            u = p.kerningDict,
            v = p.commonHeight,
            x = p.fontDefDictionary;
        for (n = 0; n < b - 1; n++) 10 === a.charCodeAt(n) && m++;
        var y = v * m,
            m = -(v - v * m),
            z = -1,
            t;
        for (n = 0; n < b; n++)
            if (v = a.charCodeAt(n), 0 !== v)
                if (10 === v) f = 0, m -= p.commonHeight;
                else {
                    z = u[z << 16 | v & 65535] || 0;
                    t = x[v];
                    t || (cc.log("cocos2d: LabelBMFont: character not found " + a[n]), t = {
                        rect: {
                            x: 0,
                            y: 0,
                            width: 0,
                            height: 0
                        },
                        xOffset: 0,
                        yOffset: 0,
                        xAdvance: 0
                    });
                    var A = cc.rect(t.rect.x,
                            t.rect.y, t.rect.width, t.rect.height),
                        A = cc.rectPixelsToPoints(A);
                    A.x += this._imageOffset.x;
                    A.y += this._imageOffset.y;
                    var w = !1;
                    if (this._spriteFrame) {
                        var B = this._spriteFrame._rect;
                        if (this._spriteFrame._rotated) {
                            var w = !0,
                                F = A.x;
                            A.x = A.y + B.x;
                            A.y = F + B.y
                        } else A.x += B.x, A.y += B.y
                    }(B = this.getChildByTag(n)) ? c._updateCharTexture(B, A, v, w): (B = new cc.Sprite, B.initWithTexture(d, A, w), B._newTextureWhenChangeColor = !0, this.addChild(B, 0, n));
                    B.opacityModifyRGB = this._opacityModifyRGB;
                    c._updateCharColorAndOpacity(B);
                    A = cc.p(f +
                        t.xOffset + 0.5 * t.rect.width + z, m + (p.commonHeight - t.yOffset) - 0.5 * A.height * cc.contentScaleFactor());
                    B.setPosition(cc.pointPixelsToPoints(A));
                    f += t.xAdvance + z;
                    z = v;
                    h < f && (h = f)
                } g.width = t && t.xAdvance < t.rect.width ? h - t.xAdvance + t.rect.width : h;
        g.height = y;
        this.setContentSize(cc.sizePixelsToPoints(g))
    },
    updateString: function (a) {
        var b = this._children;
        if (b)
            for (var c = 0, d = b.length; c < d; c++) {
                var f = b[c];
                f && (f.visible = !1)
            }
        this._config && this._string && 0 < this._string.length && this.createFontChars();
        a || this.updateLabel()
    },
    getString: function () {
        return this._initialString
    },
    setString: function (a, b) {
        a = String(a);
        void 0 === b && (b = !0);
        if (void 0 === a || "string" !== typeof a) a += "";
        this._initialString = a;
        this._setString(a, b)
    },
    _setStringForSetter: function (a) {
        this.setString(a, !1)
    },
    setCString: function (a) {
        this.setString(a, !0)
    },
    _getCharsWidth: function (a, b) {
        if (0 >= b) return 0;
        var c = this.getChildByTag(a),
            d = this.getChildByTag(a + b);
        return !c || !d ? 0 : this._getLetterPosXLeft(d) - this._getLetterPosXLeft(c)
    },
    _checkWarp: function (a, b, c, d) {
        for (var f = a[b], g = 0, h = 0; h < b; h++) g += a[h].length;
        var g = g + b - d,
            m = this._getCharsWidth(g,
                a[b].length - 1);
        if (m > c && 1 < f.length) {
            d = f.length * (c / m) | 0;
            for (var h = f.substr(d), n = m - this._getCharsWidth(g + d, h.length - 1), p, u = 0, v = 0; n > c && 100 > v++;) d *= c / n, d |= 0, h = f.substr(d), n = m - this._getCharsWidth(g + d, h.length - 1);
            for (v = 0; n < c && 100 > v++;) h && (u = (p = cc.LabelTTF._wordRex.exec(h)) ? p[0].length : 1, p = h), this._lineBreakWithoutSpaces && (u = 0), d += u, h = f.substr(d), n = m - this._getCharsWidth(g + d, h.length - 1);
            d -= u;
            0 === d && (d = 1, p = p.substr(1));
            c = f.substr(0, d);
            if (cc.LabelTTF.wrapInspection && cc.LabelTTF._symbolRex.test(p || h)) u = (g = cc.LabelTTF._lastWordRex.exec(c)) ?
                g[0].length : 0, this._lineBreakWithoutSpaces && (u = 0), d -= u, p = f.substr(d), c = f.substr(0, d);
            if (cc.LabelTTF._firsrEnglish.test(p) && (g = cc.LabelTTF._lastEnglish.exec(c)) && c !== g[0]) u = g[0].length, this._lineBreakWithoutSpaces && (u = 0), d -= u, p = f.substr(d), c = f.substr(0, d);
            a[b] = p || h;
            a.splice(b, 0, c)
        }
    },
    updateLabel: function () {
        this.string = this._initialString;
        var a, b, c;
        if (0 < this._width) {
            var d = this.string.split("\n"),
                f = "",
                g = 0,
                h = 0;
            for (a = 0; a < d.length; a++) h = d.length, this._checkWarp(d, a, this._width * this._scaleX, g), h < d.length &&
                g++, 0 < a && (f += "\n"), f += d[a];
            f += String.fromCharCode(0);
            this._setString(f, !1)
        }
        if (this._alignment !== cc.TEXT_ALIGNMENT_LEFT) {
            d = a = 0;
            f = this._string.length;
            g = [];
            for (h = 0; h < f; h++)
                if (10 === this._string[h].charCodeAt(0) || 0 === this._string[h].charCodeAt(0)) {
                    b = 0;
                    var m = g.length;
                    if (0 === m) d++;
                    else if (c = a + m - 1 + d, !(0 > c)) {
                        var n = this.getChildByTag(c);
                        if (null != n) {
                            b = n.getPositionX() + n._getWidth() / 2;
                            n = 0;
                            switch (this._alignment) {
                            case cc.TEXT_ALIGNMENT_CENTER:
                                n = this.width / 2 - b / 2;
                                break;
                            case cc.TEXT_ALIGNMENT_RIGHT:
                                n = this.width -
                                    b
                            }
                            if (0 !== n)
                                for (b = 0; b < m; b++) c = a + b + d, 0 > c || (c = this.getChildByTag(c)) && (c.x += n);
                            a += m;
                            d++;
                            g.length = 0
                        }
                    }
                } else g.push(this._string[a])
        }
    },
    setAlignment: function (a) {
        this._alignment = a;
        this.updateLabel()
    },
    _getAlignment: function () {
        return this._alignment
    },
    setBoundingWidth: function (a) {
        this._width = a;
        this.updateLabel()
    },
    _getBoundingWidth: function () {
        return this._width
    },
    setLineBreakWithoutSpace: function (a) {
        this._lineBreakWithoutSpaces = a;
        this.updateLabel()
    },
    setScale: function (a, b) {
        cc.Node.prototype.setScale.call(this,
            a, b);
        this.updateLabel()
    },
    setScaleX: function (a) {
        cc.Node.prototype.setScaleX.call(this, a);
        this.updateLabel()
    },
    setScaleY: function (a) {
        cc.Node.prototype.setScaleY.call(this, a);
        this.updateLabel()
    },
    setFntFile: function (a) {
        if (null != a && a !== this._fntFile) {
            var b = cc.loader.getRes(a);
            b ? (this._fntFile = a, this._config = b, a = cc.textureCache.addImage(b.atlasName), (this._textureLoaded = b = a.isLoaded()) ? (this.setTexture(a), this._string && 0 < this._string.length && this.createFontChars()) : a.addEventListener("load", function (a) {
                this._textureLoaded = !0;
                this.setTexture(a);
                this._string && 0 < this._string.length && this.createFontChars();
                this._changeTextureColor();
                this.updateLabel();
                this.dispatchEvent("load")
            }, this)) : cc.log("cc.LabelBMFont.setFntFile() : Impossible to create font. Please check file")
        }
    },
    getFntFile: function () {
        return this._fntFile
    },
    setTexture: function (a) {
        this._texture = a;
        this._renderCmd.setTexture(a)
    },
    setAnchorPoint: function (a, b) {
        cc.Node.prototype.setAnchorPoint.call(this, a, b);
        this.updateLabel()
    },
    _setAnchorX: function (a) {
        cc.Node.prototype._setAnchorX.call(this,
            a);
        this.updateLabel()
    },
    _setAnchorY: function (a) {
        cc.Node.prototype._setAnchorY.call(this, a);
        this.updateLabel()
    },
    _atlasNameFromFntFile: function (a) {},
    _kerningAmountForFirst: function (a, b) {
        var c = 0;
        if (this._configuration.kerningDictionary) {
            var d = this._configuration.kerningDictionary[(a << 16 | b & 65535).toString()];
            d && (c = d.amount)
        }
        return c
    },
    _getLetterPosXLeft: function (a) {
        return a.getPositionX() * this._scaleX - a._getWidth() * this._scaleX * a._getAnchorX()
    },
    _getLetterPosXRight: function (a) {
        return a.getPositionX() * this._scaleX +
            a._getWidth() * this._scaleX * a._getAnchorX()
    },
    _isspace_unicode: function (a) {
        a = a.charCodeAt(0);
        return 9 <= a && 13 >= a || 32 === a || 133 === a || 160 === a || 5760 === a || 8192 <= a && 8202 >= a || 8232 === a || 8233 === a || 8239 === a || 8287 === a || 12288 === a
    },
    _utf8_trim_ws: function (a) {
        var b = a.length;
        if (!(0 >= b) && (b -= 1, this._isspace_unicode(a[b]))) {
            for (var c = b - 1; 0 <= c; --c)
                if (this._isspace_unicode(a[c])) b = c;
                else break;
            this._utf8_trim_from(a, b)
        }
    },
    _utf8_trim_from: function (a, b) {
        var c = a.length;
        b >= c || 0 > b || a.splice(b, c)
    }
});
(function () {
    var a = cc.LabelBMFont.prototype;
    cc.EventHelper.prototype.apply(a);
    cc.defineGetterSetter(a, "string", a.getString, a._setStringForSetter);
    cc.defineGetterSetter(a, "boundingWidth", a._getBoundingWidth, a.setBoundingWidth);
    cc.defineGetterSetter(a, "textAlign", a._getAlignment, a.setAlignment);
    cc.defineGetterSetter(a, "texture", a.getTexture, a.setTexture)
})();
cc.LabelBMFont.create = function (a, b, c, d, f) {
    return new cc.LabelBMFont(a, b, c, d, f)
};
cc.FntFrameCache = {};
var _fntLoader = {
    FNT_HEAD: /fntframes [^\n]*(\n|$)/gi,
    FNT_FRAME_NAME: /fntframe [^\n]*(\n|$)/gi,
    INFO_EXP: /info [^\n]*(\n|$)/gi,
    COMMON_EXP: /common [^\n]*(\n|$)/gi,
    PAGE_EXP: /page [^\n]*(\n|$)/gi,
    CHAR_EXP: /char [^\n]*(\n|$)/gi,
    KERNING_EXP: /kerning [^\n]*(\n|$)/gi,
    ITEM_EXP: /\w+=[^ \r\n]+/gi,
    INT_EXP: /^[\-]?\d+$/,
    _parseStrToObj: function (a) {
        a = a.match(this.ITEM_EXP);
        var b = {};
        if (a)
            for (var c = 0, d = a.length; c < d; c++) {
                var f = a[c],
                    g = f.indexOf("="),
                    h = f.substring(0, g),
                    f = f.substring(g + 1);
                f.match(this.INT_EXP) ? f = parseInt(f) :
                    '"' === f[0] && (f = f.substring(1, f.length - 1));
                b[h] = f
            }
        return b
    },
    _parseFntContent: function (a, b, c, d) {
        var f = this._parseStrToObj(b.match(this.COMMON_EXP)[0]);
        a.commonHeight = f.lineHeight;
        if (cc._renderType === cc.game.RENDER_TYPE_WEBGL) {
            var g = cc.configuration.getMaxTextureSize();
            (f.scaleW > g.width || f.scaleH > g.height) && cc.log("cc.LabelBMFont._parseCommonArguments(): page can't be larger than supported")
        }
        1 !== f.pages && cc.log("cc.LabelBMFont._parseCommonArguments(): only supports 1 page");
        f = this._parseStrToObj(b.match(this.PAGE_EXP)[0]);
        0 !== f.id && cc.log("cc.LabelBMFont._parseImageFileName() : file could not be found");
        a.atlasName = d ? cc.path.join(cc.path.dirname(d.path) + f.file) : cc.path.changeBasename(c, f.file);
        f = b.match(this.CHAR_EXP);
        g = a.fontDefDictionary = {};
        c = 0;
        for (d = f.length; c < d; c++) {
            var h = this._parseStrToObj(f[c]);
            g[h.id] = {
                rect: {
                    x: h.x,
                    y: h.y,
                    width: h.width,
                    height: h.height
                },
                xOffset: h.xoffset,
                yOffset: h.yoffset,
                xAdvance: h.xadvance
            }
        }
        f = a.kerningDict = {};
        if (b = b.match(this.KERNING_EXP)) {
            c = 0;
            for (d = b.length; c < d; c++) g = this._parseStrToObj(b[c]),
                f[g.first << 16 | g.second & 65535] = g.amount
        }
        return a
    },
    parseFnt: function (a, b) {
        var c = {},
            d = a.match(this.FNT_HEAD);
        if (d) {
            var f = this._parseStrToObj(d[0]);
            if (f && f.count) {
                a = a.substr(d[0].length);
                for (var d = a.split("----"), g = 0; g < f.count; ++g) {
                    var h = d[g],
                        m = h.match(this.FNT_FRAME_NAME);
                    if (m) {
                        var n = this._parseStrToObj(m[0]);
                        if (n && n.name) {
                            var c = {},
                                p = cc.path.join(cc.path.dirname(b), n.name);
                            cc.FntFrameCache[p] = this._parseFntContent(c, h.substr(m[0].length), b, {
                                path: n.name
                            })
                        }
                    }
                }
            }
        } else c = this._parseFntContent(c, a, b);
        return c
    },
    load: function (a, b, c, d) {
        var f = this;
        cc.loader.loadTxt(a, function (a, c) {
            if (a) return d(a);
            d(null, f.parseFnt(c, b))
        })
    }
};
cc.loader.register(["fnt"], _fntLoader);
(function () {
    cc.LabelBMFont.CanvasRenderCmd = function (a) {
        this._rootCtor(a)
    };
    var a = cc.LabelBMFont.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    a.constructor = cc.LabelBMFont.CanvasRenderCmd;
    a._updateCharTexture = function (a, c, d) {
        32 === d ? a.setTextureRect(c, !1, cc.size(0, 0)) : (a.setTextureRect(c, !1), a.visible = !0)
    };
    a._updateCharColorAndOpacity = function (a) {
        a._displayedColor = this._displayedColor;
        a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty);
        a._displayedOpacity = this._displayedOpacity;
        a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)
    };
    a.setTexture = function (a) {
        for (var c = this._node, d = c._children, f = this._displayedColor, g = 0; g < d.length; g++) {
            var h = d[g],
                m = h._renderCmd,
                n = m._displayedColor;
            c._texture !== m._texture && (n.r !== f.r || n.g !== f.g || n.b !== f.b) || (h.texture = a)
        }
        c._texture = a
    };
    a._changeTextureColor = function () {
        var a = this._node,
            c = a._texture,
            d = c.getContentSize(),
            f = a._texture,
            g = f.getHtmlElementObj(),
            h = this._displayedColor,
            m = cc.rect(0, 0, g.width, g.height);
        c && 0 < d.width && g && (c = f._generateColorTexture(h.r,
            h.g, h.b, m), a.setTexture(c))
    };
    a._updateChildrenDisplayedOpacity = function (a) {
        cc.Node.prototype.updateDisplayedOpacity.call(a, this._displayedOpacity)
    };
    a._updateChildrenDisplayedColor = function (a) {
        cc.Node.prototype.updateDisplayedColor.call(a, this._displayedColor)
    }
})();
(function () {
    cc.LabelBMFont.WebGLRenderCmd = function (a) {
        this._rootCtor(a)
    };
    var a = cc.LabelBMFont.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
    a.constructor = cc.LabelBMFont.WebGLRenderCmd;
    a.setTexture = function (a) {
        this._node.setOpacityModifyRGB(this._node._texture.hasPremultipliedAlpha())
    };
    a._updateCharTexture = function (a, c, d, f) {
        a.setTextureRect(c, f);
        a.visible = !0
    };
    a._changeTextureColor = function () {};
    a._updateCharColorAndOpacity = function () {}
})();
cc.LabelAtlas = cc.LabelBMFont.extend({
    _className: "LabelAtlas",
    ctor: function (a, b, c, d, f) {
        cc.SpriteBatchNode.prototype.ctor.call(this);
        this._imageOffset = cc.p(0, 0);
        this._cascadeOpacityEnabled = this._cascadeColorEnabled = !0;
        b && cc.LabelAtlas.prototype.initWithString.call(this, a, b, c, d, f)
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_WEBGL ? new cc.LabelBMFont.WebGLRenderCmd(this) : new cc.LabelBMFont.CanvasRenderCmd(this)
    },
    _createFntConfig: function (a, b, c, d) {
        var f = {};
        f.commonHeight = c;
        var g = f.fontDefDictionary = {},
            h = a.pixelsWidth;
        a = a.pixelsHeight;
        d = d.charCodeAt(0);
        for (var m = 0, n = c; n <= a; n += c)
            for (var p = 0; p < h; p += b) g[d + m] = {
                rect: {
                    x: p,
                    y: n - c,
                    width: b,
                    height: c
                },
                xOffset: 0,
                yOffset: 0,
                xAdvance: b
            }, ++m;
        f.kerningDict = {};
        return f
    },
    initWithString: function (a, b, c, d, f) {
        var g;
        this._string = this._initialString = a = a + "" || "";
        if (void 0 === c) {
            f = cc.loader.getRes(b);
            if (1 !== parseInt(f.version, 10)) return cc.log("cc.LabelAtlas.initWithString(): Unsupported version. Upgrade cocos2d version"), !1;
            g = cc.path.changeBasename(b,
                f.textureFilename);
            d = cc.contentScaleFactor();
            c = parseInt(f.itemWidth, 10) / d;
            d = parseInt(f.itemHeight, 10) / d;
            f = String.fromCharCode(parseInt(f.firstChar, 10))
        } else g = b, c = c || 0, d = d || 0, f = f || " ";
        if (b) {
            this._fntFile = "dummy_fnt_file:" + g;
            b = g;
            var h = cc.spriteFrameCache.getSpriteFrame(b) || cc.spriteFrameCache.getSpriteFrame(cc.path.basename(b));
            h ? (b = h.getTexture(), this._spriteFrame = h) : b = cc.textureCache.addImage(g);
            c = this._createFntConfig(b, c, d, f);
            c.atlasName = g;
            this._config = c;
            (this._textureLoaded = g = b.isLoaded()) || b.addEventListener("load",
                function (a) {
                    this._textureLoaded = !0;
                    this.initWithTexture(a, this._initialString.length);
                    this.setString(this._initialString, !0);
                    this.dispatchEvent("load")
                }, this)
        } else b = new cc.Texture2D, g = new Image, b.initWithElement(g), this._textureLoaded = !1;
        return this.initWithTexture(b, a.length) ? (this._alignment = cc.TEXT_ALIGNMENT_LEFT, this._imageOffset = cc.p(0, 0), this._width = -1, this._realOpacity = 255, this._realColor = cc.color(255, 255, 255, 255), this._contentSize.width = 0, this._contentSize.height = 0, this.setString(a, !0), !0) :
            !1
    },
    setFntFile: function () {
        cc.warn("setFntFile doesn't support with LabelAtlas.")
    }
});
cc.LabelAtlas.create = function (a, b, c, d, f) {
    return new cc.LabelAtlas(a, b, c, d, f)
};
(function () {
    cc.LabelAtlas.CanvasRenderCmd = function (a) {
        cc.AtlasNode.CanvasRenderCmd.call(this, a);
        this._needDraw = !1
    };
    var a = cc.LabelAtlas.CanvasRenderCmd.prototype = Object.create(cc.AtlasNode.CanvasRenderCmd.prototype);
    a.constructor = cc.LabelAtlas.CanvasRenderCmd;
    a.setCascade = function () {
        var a = this._node;
        a._cascadeOpacityEnabled = !0;
        a._cascadeColorEnabled = !1
    };
    a.updateAtlasValues = function () {
        for (var a = this._node, c = a._string || "", d = c.length, f = this._textureToRender, g = a._itemWidth, h = a._itemHeight, m = 0, n = -1; m < d; m++) {
            var p =
                c.charCodeAt(m) - a._mapStartChar.charCodeAt(0),
                u = parseInt(p % a._itemsPerRow, 10),
                p = parseInt(p / a._itemsPerRow, 10);
            if (!(0 > u || 0 > p))
                if (u = cc.rect(u * g, p * h, g, h), p = f._contentSize, !(0 > u.x || 0 > u.y || u.x + u.width > p.width || u.y + u.height > p.height)) {
                    n++;
                    var p = c.charCodeAt(m),
                        v = a.getChildByTag(m);
                    v ? 32 === p ? (v.init(), v.setTextureRect(cc.rect(0, 0, 10, 10), !1, cc.size(0, 0))) : (v.initWithTexture(f, u), v.visible = !0) : (v = new cc.Sprite, 32 === p ? (v.init(), v.setTextureRect(cc.rect(0, 0, 10, 10), !1, cc.size(0, 0))) : v.initWithTexture(f, u), cc.Node.prototype.addChild.call(a,
                        v, 0, m));
                    v.setPosition(n * g + g / 2, h / 2)
                }
        }
        this.updateContentSize(m, n + 1)
    };
    a.updateContentSize = function (a, c) {
        var d = this._node,
            f = d._contentSize;
        a !== c && (a * d._itemWidth === f.width && d._itemHeight === f.height) && d.setContentSize(c * d._itemWidth, d._itemHeight)
    };
    a.setString = function (a) {
        a = this._node;
        if (a._children) {
            a = a._children;
            for (var c = a.length, d = 0; d < c; d++) {
                var f = a[d];
                f && !f._lateChild && (f.visible = !1)
            }
        }
    };
    a._addChild = function () {
        child._lateChild = !0
    }
})();
(function () {
    cc.LabelAtlas.WebGLRenderCmd = function (a) {
        cc.AtlasNode.WebGLRenderCmd.call(this, a);
        this._needDraw = !0
    };
    var a = cc.LabelAtlas.WebGLRenderCmd.prototype = Object.create(cc.AtlasNode.WebGLRenderCmd.prototype);
    a.constructor = cc.LabelAtlas.WebGLRenderCmd;
    a._updateColor = function () {
        if (this._colorF32Array) {
            var a = this._displayedColor,
                c = this._displayedOpacity / 255;
            this._node._opacityModifyRGB ? (this._colorF32Array[0] = a.r * c / 255, this._colorF32Array[1] = a.g * c / 255, this._colorF32Array[2] = a.b * c / 255) : (this._colorF32Array[0] =
                a.r / 255, this._colorF32Array[1] = a.g / 255, this._colorF32Array[2] = a.b / 255);
            this._colorF32Array[3] = c
        }
    };
    a.setCascade = function () {
        var a = this._node;
        a._cascadeOpacityEnabled = !0;
        a._cascadeColorEnabled = !0
    };
    a.rendering = function (a) {
        cc.AtlasNode.WebGLRenderCmd.prototype.rendering.call(this, a);
        if (cc.LABELATLAS_DEBUG_DRAW) {
            var c = this._node;
            a = c.getContentSize();
            var c = c.getBoundingBoxToWorld(),
                d = c.x,
                f = c.y;
            a.width = c.width;
            a.height = c.height;
            a = [cc.p(d, f), cc.p(d + a.width, f), cc.p(a.width + d, a.height + f), cc.p(d, f + a.height)];
            cc._drawingUtil.drawPoly(a, 4, !0)
        }
    };
    a.updateAtlasValues = function () {
        var a = this._node,
            c = a._string,
            d = c.length,
            f = this._textureAtlas,
            g = f.texture,
            h = g.pixelsWidth,
            g = g.pixelsHeight,
            m = a._itemWidth,
            n = a._itemHeight;
        a._ignoreContentScaleFactor || (m = a._itemWidth * cc.contentScaleFactor(), n = a._itemHeight * cc.contentScaleFactor());
        d > f.getCapacity() && cc.log("cc.LabelAtlas._updateAtlasValues(): Invalid String length");
        for (var p = f.quads, u = a._itemWidth, v = a._itemHeight, x = 0, y = -1; x < d; x++) {
            var z = c.charCodeAt(x) - a._mapStartChar.charCodeAt(0),
                t = z % a._itemsPerRow,
                A = 0 | z / a._itemsPerRow;
            if (!(0 > t || 0 > A))
                if (!(t * u + u > h || A * v + v > g)) {
                    y++;
                    var w;
                    cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL ? (t = (2 * t * m + 1) / (2 * h), z = t + (2 * m - 2) / (2 * h), A = (2 * A * n + 1) / (2 * g), w = A + (2 * n - 2) / (2 * g)) : (t = t * m / h, z = t + m / h, A = A * n / g, w = A + n / g);
                    var B = p[x],
                        F = B.tl,
                        C = B.tr,
                        D = B.bl,
                        B = B.br;
                    F.texCoords.u = t;
                    F.texCoords.v = A;
                    C.texCoords.u = z;
                    C.texCoords.v = A;
                    D.texCoords.u = t;
                    D.texCoords.v = w;
                    B.texCoords.u = z;
                    B.texCoords.v = w;
                    D.vertices.x = y * u;
                    D.vertices.y = 0;
                    D.vertices.z = 0;
                    B.vertices.x = y * u + u;
                    B.vertices.y = 0;
                    B.vertices.z = 0;
                    F.vertices.x =
                        y * u;
                    F.vertices.y = a._itemHeight;
                    F.vertices.z = 0;
                    C.vertices.x = y * u + u;
                    C.vertices.y = a._itemHeight;
                    C.vertices.z = 0
                }
        }
        this._updateColor();
        this.updateContentSize(x, y + 1);
        0 < d && (f.dirty = !0, a = f.totalQuads, d > a && f.increaseTotalQuadsWith(d - a))
    };
    a.updateContentSize = function (a, c) {
        var d = this._node,
            f = d._contentSize;
        a !== c && (a * d._itemWidth === f.width && d._itemHeight === f.height) && d.setContentSize(c * d._itemWidth, d._itemHeight)
    };
    a.setString = function (a) {
        a = a.length;
        a > this._textureAtlas.totalQuads && this._textureAtlas.resizeCapacity(a)
    };
    a._addChild = function () {}
})();
cc.MotionStreak = cc.Node.extend({
    texture: null,
    fastMode: !1,
    startingPositionInitialized: !1,
    _blendFunc: null,
    _stroke: 0,
    _fadeDelta: 0,
    _minSeg: 0,
    _maxPoints: 0,
    _nuPoints: 0,
    _previousNuPoints: 0,
    _pointVertexes: null,
    _pointState: null,
    _vertices: null,
    _colorPointer: null,
    _texCoords: null,
    _verticesBuffer: null,
    _colorPointerBuffer: null,
    _texCoordsBuffer: null,
    _className: "MotionStreak",
    ctor: function (a, b, c, d, f) {
        cc.Node.prototype.ctor.call(this);
        this._positionR = cc.p(0, 0);
        this._blendFunc = new cc.BlendFunc(cc.SRC_ALPHA, cc.ONE_MINUS_SRC_ALPHA);
        this.startingPositionInitialized = this.fastMode = !1;
        this.texture = null;
        this._previousNuPoints = this._nuPoints = this._maxPoints = this._minSeg = this._fadeDelta = this._stroke = 0;
        this._texCoordsBuffer = this._colorPointerBuffer = this._verticesBuffer = this._texCoords = this._colorPointer = this._vertices = this._pointState = this._pointVertexes = null;
        void 0 !== f && this.initWithFade(a, b, c, d, f)
    },
    getTexture: function () {
        return this.texture
    },
    setTexture: function (a) {
        this.texture !== a && (this.texture = a)
    },
    getBlendFunc: function () {
        return this._blendFunc
    },
    setBlendFunc: function (a, b) {
        void 0 === b ? this._blendFunc = a : (this._blendFunc.src = a, this._blendFunc.dst = b)
    },
    getOpacity: function () {
        cc.log("cc.MotionStreak.getOpacity has not been supported.");
        return 0
    },
    setOpacity: function (a) {
        cc.log("cc.MotionStreak.setOpacity has not been supported.")
    },
    setOpacityModifyRGB: function (a) {},
    isOpacityModifyRGB: function () {
        return !1
    },
    isFastMode: function () {
        return this.fastMode
    },
    setFastMode: function (a) {
        this.fastMode = a
    },
    isStartingPositionInitialized: function () {
        return this.startingPositionInitialized
    },
    setStartingPositionInitialized: function (a) {
        this.startingPositionInitialized = a
    },
    getStroke: function () {
        return this._stroke
    },
    setStroke: function (a) {
        this._stroke = a
    },
    initWithFade: function (a, b, c, d, f) {
        if (!f) throw Error("cc.MotionStreak.initWithFade(): Invalid filename or texture");
        cc.isString(f) && (f = cc.textureCache.addImage(f));
        cc.Node.prototype.setPosition.call(this, cc.p(0, 0));
        this.anchorY = this.anchorX = 0;
        this.ignoreAnchor = !0;
        this.startingPositionInitialized = !1;
        this.fastMode = !0;
        this._minSeg = -1 === b ? c / 5 : b;
        this._minSeg *=
            this._minSeg;
        this._stroke = c;
        this._fadeDelta = 1 / a;
        this._maxPoints = a = (0 | 60 * a) + 2;
        this._nuPoints = 0;
        this._pointState = new Float32Array(a);
        this._pointVertexes = new Float32Array(2 * a);
        this._vertices = new Float32Array(4 * a);
        this._texCoords = new Float32Array(4 * a);
        this._colorPointer = new Uint8Array(8 * a);
        this._verticesBuffer = gl.createBuffer();
        this._texCoordsBuffer = gl.createBuffer();
        this._colorPointerBuffer = gl.createBuffer();
        this._blendFunc.src = gl.SRC_ALPHA;
        this._blendFunc.dst = gl.ONE_MINUS_SRC_ALPHA;
        this.texture = f;
        this.color =
            d;
        this.scheduleUpdate();
        gl.bindBuffer(gl.ARRAY_BUFFER, this._verticesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, this._vertices, gl.DYNAMIC_DRAW);
        gl.bindBuffer(gl.ARRAY_BUFFER, this._texCoordsBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, this._texCoords, gl.DYNAMIC_DRAW);
        gl.bindBuffer(gl.ARRAY_BUFFER, this._colorPointerBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, this._colorPointer, gl.DYNAMIC_DRAW);
        return !0
    },
    tintWithColor: function (a) {
        this.color = a;
        for (var b = this._colorPointer, c = 0, d = 2 * this._nuPoints; c < d; c++) b[4 * c] = a.r, b[4 * c +
            1] = a.g, b[4 * c + 2] = a.b
    },
    reset: function () {
        this._nuPoints = 0
    },
    setPosition: function (a, b) {
        this.startingPositionInitialized = !0;
        void 0 === b ? (this._positionR.x = a.x, this._positionR.y = a.y) : (this._positionR.x = a, this._positionR.y = b)
    },
    getPositionX: function () {
        return this._positionR.x
    },
    setPositionX: function (a) {
        this._positionR.x = a;
        this.startingPositionInitialized || (this.startingPositionInitialized = !0)
    },
    getPositionY: function () {
        return this._positionR.y
    },
    setPositionY: function (a) {
        this._positionR.y = a;
        this.startingPositionInitialized ||
            (this.startingPositionInitialized = !0)
    },
    update: function (a) {
        if (this.startingPositionInitialized) {
            this._renderCmd._updateDisplayColor();
            a *= this._fadeDelta;
            var b, c, d, f, g = 0,
                h = this._nuPoints,
                m = this._pointState,
                n = this._pointVertexes,
                p = this._vertices,
                u = this._colorPointer;
            for (b = 0; b < h; b++) m[b] -= a, 0 >= m[b] ? g++ : (c = b - g, 0 < g ? (m[c] = m[b], n[2 * c] = n[2 * b], n[2 * c + 1] = n[2 * b + 1], f = 2 * b, d = 2 * c, p[2 * d] = p[2 * f], p[2 * d + 1] = p[2 * f + 1], p[2 * (d + 1)] = p[2 * (f + 1)], p[2 * (d + 1) + 1] = p[2 * (f + 1) + 1], f *= 4, d *= 4, u[d + 0] = u[f + 0], u[d + 1] = u[f + 1], u[d + 2] = u[f + 2], u[d +
                4] = u[f + 4], u[d + 5] = u[f + 5], u[d + 6] = u[f + 6]) : d = 8 * c, c = 255 * m[c], u[d + 3] = c, u[d + 7] = c);
            h -= g;
            b = !0;
            if (h >= this._maxPoints) b = !1;
            else if (0 < h && (a = cc.pDistanceSQ(cc.p(n[2 * (h - 1)], n[2 * (h - 1) + 1]), this._positionR) < this._minSeg, d = 1 === h ? !1 : cc.pDistanceSQ(cc.p(n[2 * (h - 2)], n[2 * (h - 2) + 1]), this._positionR) < 2 * this._minSeg, a || d)) b = !1;
            b && (n[2 * h] = this._positionR.x, n[2 * h + 1] = this._positionR.y, m[h] = 1, m = 8 * h, b = this.getDisplayedColor(), u[m] = b.r, u[m + 1] = b.g, u[m + 2] = b.b, u[m + 4] = b.r, u[m + 5] = b.g, u[m + 6] = b.b, u[m + 3] = 255, u[m + 7] = 255, 0 < h && this.fastMode &&
                (1 < h ? cc.vertexLineToPolygon(n, this._stroke, this._vertices, h, 1) : cc.vertexLineToPolygon(n, this._stroke, this._vertices, 0, 2)), h++);
            this.fastMode || cc.vertexLineToPolygon(n, this._stroke, this._vertices, 0, h);
            if (h && this._previousNuPoints !== h) {
                n = 1 / h;
                u = this._texCoords;
                for (b = 0; b < h; b++) u[4 * b] = 0, u[4 * b + 1] = n * b, u[2 * (2 * b + 1)] = 1, u[2 * (2 * b + 1) + 1] = n * b;
                this._previousNuPoints = h
            }
            this._nuPoints = h
        }
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_WEBGL ? new cc.MotionStreak.WebGLRenderCmd(this) : null
    }
});
cc.MotionStreak.create = function (a, b, c, d, f) {
    return new cc.MotionStreak(a, b, c, d, f)
};
cc.MotionStreak.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._matrix = new cc.math.Matrix4;
    this._matrix.identity();
    this._shaderProgram = cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURECOLOR)
};
cc.MotionStreak.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
cc.MotionStreak.WebGLRenderCmd.prototype.constructor = cc.Sprite.WebGLRenderCmd;
cc.MotionStreak.WebGLRenderCmd.prototype.rendering = function (a) {
    var b = this._node;
    if (!(1 >= b._nuPoints) && b.texture && b.texture.isLoaded()) {
        a = a || cc._renderContext;
        var c = this._worldTransform;
        this._matrix.mat[0] = c.a;
        this._matrix.mat[4] = c.c;
        this._matrix.mat[12] = c.tx;
        this._matrix.mat[1] = c.b;
        this._matrix.mat[5] = c.d;
        this._matrix.mat[13] = c.ty;
        this._shaderProgram.use();
        this._shaderProgram._setUniformForMVPMatrixWithMat4(this._matrix);
        cc.glBlendFunc(b._blendFunc.src, b._blendFunc.dst);
        cc.glBindTexture2D(b.texture);
        a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
        a.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR);
        a.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
        a.bindBuffer(a.ARRAY_BUFFER, b._verticesBuffer);
        a.bufferData(a.ARRAY_BUFFER, b._vertices, a.DYNAMIC_DRAW);
        a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, a.FLOAT, !1, 0, 0);
        a.bindBuffer(a.ARRAY_BUFFER, b._texCoordsBuffer);
        a.bufferData(a.ARRAY_BUFFER, b._texCoords, a.DYNAMIC_DRAW);
        a.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, a.FLOAT, !1, 0, 0);
        a.bindBuffer(a.ARRAY_BUFFER,
            b._colorPointerBuffer);
        a.bufferData(a.ARRAY_BUFFER, b._colorPointer, a.DYNAMIC_DRAW);
        a.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR, 4, a.UNSIGNED_BYTE, !0, 0, 0);
        a.drawArrays(a.TRIANGLE_STRIP, 0, 2 * b._nuPoints);
        cc.g_NumberOfDraws++
    }
};
cc.NodeGrid = cc.Node.extend({
    grid: null,
    _target: null,
    _gridRect: null,
    ctor: function (a) {
        cc.Node.prototype.ctor.call(this);
        void 0 === a && (a = cc.rect());
        this._gridRect = a
    },
    getGrid: function () {
        return this.grid
    },
    setGrid: function (a) {
        this.grid = a
    },
    setGridRect: function (a) {
        this._gridRect = a
    },
    getGridRect: function () {
        return this._gridRect
    },
    setTarget: function (a) {
        this._target = a
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_WEBGL ? new cc.NodeGrid.WebGLRenderCmd(this) : new cc.Node.CanvasRenderCmd(this)
    }
});
_p = cc.NodeGrid.prototype;
cc.defineGetterSetter(_p, "target", null, _p.setTarget);
cc.NodeGrid.create = function () {
    return new cc.NodeGrid
};
(function () {
    cc.NodeGrid.WebGLRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !1;
        this._gridBeginCommand = new cc.CustomRenderCmd(this, this.onGridBeginDraw);
        this._gridEndCommand = new cc.CustomRenderCmd(this, this.onGridEndDraw)
    };
    var a = cc.NodeGrid.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
    a.constructor = cc.NodeGrid.WebGLRenderCmd;
    a.visit = function (a) {
        var c = this._node;
        if (c._visible) {
            if (a = a || this.getParentRenderCmd()) this._curLevel = a._curLevel + 1;
            var d = cc.current_stack;
            d.stack.push(d.top);
            this._syncStatus(a);
            d.top = this._stackMatrix;
            cc.renderer.pushRenderCommand(this._gridBeginCommand);
            c._target && c._target.visit();
            if ((a = c._children) && 0 < a.length) {
                var f = a.length;
                c.sortAllChildren();
                for (c = 0; c < f; c++) {
                    var g = a[c];
                    g && g.visit()
                }
            }
            cc.renderer.pushRenderCommand(this._gridEndCommand);
            this._dirtyFlag = 0;
            d.top = d.stack.pop()
        }
    };
    a.onGridBeginDraw = function () {
        var a = this._node.grid;
        a && a._active && a.beforeDraw()
    };
    a.onGridEndDraw = function () {
        var a = this._node.grid;
        a && a._active && a.afterDraw(this._node)
    }
})();
cc.DrawNode = cc.Node.extend({
    _buffer: null,
    _blendFunc: null,
    _lineWidth: 1,
    _drawColor: null,
    getBlendFunc: function () {
        return this._blendFunc
    },
    setBlendFunc: function (a, b) {
        void 0 === b ? (this._blendFunc.src = a.src, this._blendFunc.dst = a.dst) : (this._blendFunc.src = a, this._blendFunc.dst = b)
    },
    setLineWidth: function (a) {
        this._lineWidth = a
    },
    getLineWidth: function () {
        return this._lineWidth
    },
    setDrawColor: function (a) {
        var b = this._drawColor;
        b.r = a.r;
        b.g = a.g;
        b.b = a.b;
        b.a = null == a.a ? 255 : a.a
    },
    getDrawColor: function () {
        return cc.color(this._drawColor.r,
            this._drawColor.g, this._drawColor.b, this._drawColor.a)
    }
});
cc.DrawNode.create = function () {
    return new cc.DrawNode
};
cc.DrawNode.TYPE_DOT = 0;
cc.DrawNode.TYPE_SEGMENT = 1;
cc.DrawNode.TYPE_POLY = 2;
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
    if (cc._renderType === cc.game.RENDER_TYPE_CANVAS) cc._DrawNodeElement = function (a, b, c, d, f, g, m, h, n) {
        this.type = a;
        this.verts = b || null;
        this.fillColor = c || null;
        this.lineWidth = d || 0;
        this.lineColor = f || null;
        this.lineCap = g || "butt";
        this.isClosePolygon = m || !1;
        this.isFill = h || !1;
        this.isStroke = n || !1
    }, cc.extend(cc.DrawNode.prototype, {
        _className: "DrawNodeCanvas",
        ctor: function () {
            cc.Node.prototype.ctor.call(this);
            var a = this._renderCmd;
            a._buffer = this._buffer = [];
            a._drawColor = this._drawColor = cc.color(255, 255, 255, 255);
            a._blendFunc = this._blendFunc = new cc.BlendFunc(cc.SRC_ALPHA, cc.ONE_MINUS_SRC_ALPHA);
            this.init();
            this._localBB = new cc.Rect
        },
        setLocalBB: function (a, b, c, d) {
            var f = this._localBB;
            void 0 === b ? (f.x = a.x, f.y = a.y, f.width = a.width, f.height = a.height) : (f.x = a, f.y = b, f.width = c, f.height = d)
        },
        drawRect: function (a, b, c, d, f) {
            d = null == d ? this._lineWidth : d;
            f = f || this.getDrawColor();
            null == f.a && (f.a = 255);
            a = [a, cc.p(b.x, a.y), b, cc.p(a.x, b.y)];
            b = new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);
            b.verts = a;
            b.lineWidth = d;
            b.lineColor = f;
            b.isClosePolygon = !0;
            b.isStroke = !0;
            b.lineCap = "butt";
            if (b.fillColor = c) null == c.a && (c.a = 255), b.isFill = !0;
            this._buffer.push(b)
        },
        drawCircle: function (a, b, c, d, f, g, m) {
            g = g || this._lineWidth;
            m = m || this.getDrawColor();
            null == m.a && (m.a = 255);
            for (var h = 2 * Math.PI / d, n = [], p = 0; p <= d; p++) {
                var C = p * h,
                    D = b * Math.cos(C + c) + a.x,
                    C = b * Math.sin(C + c) + a.y;
                n.push(cc.p(D, C))
            }
            f && n.push(cc.p(a.x, a.y));
            a = new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);
            a.verts = n;
            a.lineWidth = g;
            a.lineColor = m;
            a.isClosePolygon = !0;
            a.isStroke = !0;
            this._buffer.push(a)
        },
        drawQuadBezier: function (a, b, c, d, f, g) {
            f = f || this._lineWidth;
            g = g || this.getDrawColor();
            null == g.a && (g.a = 255);
            for (var m = [], h = 0, n = 0; n < d; n++) {
                var p = Math.pow(1 - h, 2) * a.x + 2 * (1 - h) * h * b.x + h * h * c.x,
                    C = Math.pow(1 - h, 2) * a.y + 2 * (1 - h) * h * b.y + h * h * c.y;
                m.push(cc.p(p, C));
                h += 1 / d
            }
            m.push(cc.p(c.x, c.y));
            a = new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);
            a.verts = m;
            a.lineWidth = f;
            a.lineColor = g;
            a.isStroke = !0;
            a.lineCap = "round";
            this._buffer.push(a)
        },
        drawCubicBezier: function (a, b, c, d, f, g, m) {
            g = g || this._lineWidth;
            m = m || this.getDrawColor();
            null == m.a && (m.a = 255);
            for (var h = [], n = 0, p = 0; p < f; p++) {
                var C = Math.pow(1 - n, 3) * a.x + 3 * Math.pow(1 - n, 2) * n * b.x + 3 * (1 - n) * n * n * c.x + n * n * n * d.x,
                    D = Math.pow(1 - n, 3) * a.y + 3 * Math.pow(1 - n, 2) * n * b.y + 3 * (1 - n) * n * n * c.y + n * n * n * d.y;
                h.push(cc.p(C, D));
                n += 1 / f
            }
            h.push(cc.p(d.x, d.y));
            a = new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);
            a.verts = h;
            a.lineWidth = g;
            a.lineColor = m;
            a.isStroke = !0;
            a.lineCap = "round";
            this._buffer.push(a)
        },
        drawCatmullRom: function (a, b, c, d) {
            this.drawCardinalSpline(a, 0.5, b, c, d)
        },
        drawCardinalSpline: function (a,
            b, c, d, f) {
            d = d || this._lineWidth;
            f = f || this.getDrawColor();
            null == f.a && (f.a = 255);
            for (var g = [], m, h, n = 1 / a.length, p = 0; p < c + 1; p++) h = p / c, 1 === h ? (m = a.length - 1, h = 1) : (m = 0 | h / n, h = (h - n * m) / n), m = cc.cardinalSplineAt(cc.getControlPointAt(a, m - 1), cc.getControlPointAt(a, m - 0), cc.getControlPointAt(a, m + 1), cc.getControlPointAt(a, m + 2), b, h), g.push(m);
            a = new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);
            a.verts = g;
            a.lineWidth = d;
            a.lineColor = f;
            a.isStroke = !0;
            a.lineCap = "round";
            this._buffer.push(a)
        },
        drawDot: function (a, b, c) {
            c = c || this.getDrawColor();
            null == c.a && (c.a = 255);
            var d = new cc._DrawNodeElement(cc.DrawNode.TYPE_DOT);
            d.verts = [a];
            d.lineWidth = b;
            d.fillColor = c;
            this._buffer.push(d)
        },
        drawDots: function (a, b, c) {
            if (a && 0 != a.length) {
                c = c || this.getDrawColor();
                null == c.a && (c.a = 255);
                for (var d = 0, f = a.length; d < f; d++) this.drawDot(a[d], b, c)
            }
        },
        drawSegment: function (a, b, c, d) {
            c = c || this._lineWidth;
            d = d || this.getDrawColor();
            null == d.a && (d.a = 255);
            var f = new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);
            f.verts = [a, b];
            f.lineWidth = 2 * c;
            f.lineColor = d;
            f.isStroke = !0;
            f.lineCap = "round";
            this._buffer.push(f)
        },
        drawPoly_: function (a, b, c, d) {
            c = null == c ? this._lineWidth : c;
            d = d || this.getDrawColor();
            null == d.a && (d.a = 255);
            var f = new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);
            f.verts = a;
            f.fillColor = b;
            f.lineWidth = c;
            f.lineColor = d;
            f.isClosePolygon = !0;
            f.isStroke = !0;
            f.lineCap = "round";
            b && (f.isFill = !0);
            this._buffer.push(f)
        },
        drawPoly: function (a, b, c, d) {
            for (var f = [], g = 0; g < a.length; g++) f.push(cc.p(a[g].x, a[g].y));
            return this.drawPoly_(f, b, c, d)
        },
        clear: function () {
            this._buffer.length = 0
        },
        _createRenderCmd: function () {
            return new cc.DrawNode.CanvasRenderCmd(this)
        }
    });
    else if (cc._renderType === cc.game.RENDER_TYPE_WEBGL) {
        var a = null,
            b = [],
            c = cc.p(),
            d = cc.p(),
            f = new Uint32Array(1),
            g = cc.p(),
            h = cc.p(),
            m = cc.p(),
            n = cc.p(),
            p = [];
        cc.extend(cc.DrawNode.prototype, {
            _bufferCapacity: 0,
            _vertexCount: 0,
            _offset: 0,
            _occupiedSize: 0,
            _f32Buffer: null,
            _ui32Buffer: null,
            _dirty: !1,
            _className: "DrawNodeWebGL",
            manualRelease: !1,
            ctor: function (b, c) {
                cc.Node.prototype.ctor.call(this);
                a || (a = new GlobalVertexBuffer(cc._renderContext, 20 * cc.DRAWNODE_TOTAL_VERTICES));
                this._renderCmd._shaderProgram = cc.shaderCache.programForKey(cc.SHADER_POSITION_LENGTHTEXTURECOLOR);
                this._blendFunc = new cc.BlendFunc(cc.SRC_ALPHA, cc.ONE_MINUS_SRC_ALPHA);
                this._drawColor = cc.color(255, 255, 255, 255);
                this._bufferCapacity = b || 64;
                this.manualRelease = c;
                this._dirty = !0
            },
            onEnter: function () {
                cc.Node.prototype.onEnter.call(this);
                this._occupiedSize < this._bufferCapacity && this._ensureCapacity(this._bufferCapacity)
            },
            onExit: function () {
                this.manualRelease || this.release();
                cc.Node.prototype.onExit.call(this)
            },
            release: function () {
                0 < this._occupiedSize && (this._vertexCount = 0, a.freeBuffer(this._offset, 20 * this._occupiedSize),
                    this._occupiedSize = 0)
            },
            _ensureCapacity: function (b) {
                var c = this._occupiedSize,
                    d = this._offset;
                if (b > c || this._bufferCapacity > c) {
                    var f = Math.max(Math.min(c + c, 200), b, this._bufferCapacity);
                    0 !== c && (a.freeBuffer(d, 20 * c), this._occupiedSize = 0);
                    b = this._offset = a.requestBuffer(20 * f);
                    if (0 <= b) {
                        this._occupiedSize = this._bufferCapacity = f;
                        this._f32Buffer = new Float32Array(a.data, b, 5 * this._occupiedSize);
                        this._ui32Buffer = new Uint32Array(a.data, b, 5 * this._occupiedSize);
                        if (0 !== c && d !== b) {
                            c = d / 4 + 5 * c;
                            b /= 4;
                            for (d /= 4; d < c; b++, d++) a.dataArray[b] =
                                a.dataArray[d]
                        }
                        return !0
                    }
                    cc.warn("Failed to allocate buffer for DrawNode: buffer for " + f + " vertices requested");
                    return !1
                }
                return !0
            },
            drawRect: function (a, c, d, f, g) {
                f = null == f ? this._lineWidth : f;
                g = g || this._drawColor;
                b.length = 0;
                b.push(a.x, a.y, c.x, a.y, c.x, c.y, a.x, c.y);
                null == d ? this._drawSegments(b, f, g, !0) : this.drawPoly(b, d, f, g);
                b.length = 0
            },
            drawCircle: function (a, f, g, m, h, n, p) {
                n = n || this._lineWidth;
                p = p || this._drawColor;
                var w = 2 * Math.PI / m,
                    B;
                for (B = b.length = 0; B <= m; B++) {
                    var F = B * w,
                        C = f * Math.cos(F + g) + a.x,
                        F = f * Math.sin(F +
                            g) + a.y;
                    b.push(C, F)
                }
                h && b.push(a.x, a.y);
                n *= 0.5;
                B = 0;
                for (a = b.length - 2; B < a; B += 2) c.x = b[B], c.y = b[B + 1], d.x = b[B + 2], d.y = b[B + 3], this.drawSegment(c, d, n, p);
                b.length = 0
            },
            drawQuadBezier: function (a, c, d, f, g, m) {
                g = g || this._lineWidth;
                m = m || this._drawColor;
                for (var h = 0, n = b.length = 0; n < f; n++) {
                    var p = Math.pow(1 - h, 2) * a.x + 2 * (1 - h) * h * c.x + h * h * d.x,
                        F = Math.pow(1 - h, 2) * a.y + 2 * (1 - h) * h * c.y + h * h * d.y;
                    b.push(p, F);
                    h += 1 / f
                }
                b.push(d.x, d.y);
                this._drawSegments(b, g, m, !1);
                b.length = 0
            },
            drawCubicBezier: function (a, c, d, f, g, m, h) {
                m = m || this._lineWidth;
                h = h ||
                    this._drawColor;
                for (var n = 0, p = b.length = 0; p < g; p++) {
                    var F = Math.pow(1 - n, 3) * a.x + 3 * Math.pow(1 - n, 2) * n * c.x + 3 * (1 - n) * n * n * d.x + n * n * n * f.x,
                        C = Math.pow(1 - n, 3) * a.y + 3 * Math.pow(1 - n, 2) * n * c.y + 3 * (1 - n) * n * n * d.y + n * n * n * f.y;
                    b.push(F, C);
                    n += 1 / g
                }
                b.push(f.x, f.y);
                this._drawSegments(b, m, h, !1);
                b.length = 0
            },
            drawCatmullRom: function (a, b, c, d) {
                this.drawCardinalSpline(a, 0.5, b, c, d)
            },
            drawCardinalSpline: function (a, f, g, m, h) {
                m = m || this._lineWidth;
                h = h || this._drawColor;
                for (var n, p, w = 1 / a.length, B = b.length = 0; B < g + 1; B++) p = B / g, 1 === p ? (n = a.length - 1, p =
                    1) : (n = 0 | p / w, p = (p - w * n) / w), cc.cardinalSplineAt(cc.getControlPointAt(a, n - 1), cc.getControlPointAt(a, n - 0), cc.getControlPointAt(a, n + 1), cc.getControlPointAt(a, n + 2), f, p, c), b.push(c.x, c.y);
                m *= 0.5;
                a = 0;
                for (f = b.length - 2; a < f; a += 2) c.x = b[a], c.y = b[a + 1], d.x = b[a + 2], d.y = b[a + 3], this.drawSegment(c, d, m, h);
                b.length = 0
            },
            drawDots: function (a, b, c) {
                if (a && 0 !== a.length) {
                    c = c || this._drawColor;
                    for (var d = 0, f = a.length; d < f; d++) this.drawDot(a[d], b, c)
                }
            },
            _render: function () {
                var b = cc._renderContext;
                0 > this._offset || 0 >= this._vertexCount || (this._dirty ?
                    (a.updateSubData(this._offset, this._f32Buffer), this._dirty = !1) : b.bindBuffer(b.ARRAY_BUFFER, a.vertexBuffer), b.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION), b.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR), b.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS), b.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, b.FLOAT, !1, 20, 0), b.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR, 4, b.UNSIGNED_BYTE, !0, 20, 8), b.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, b.FLOAT, !1, 20, 12), b.drawArrays(b.TRIANGLES, this._offset /
                        20, this._vertexCount), cc.incrementGLDraws(1))
            },
            appendVertexData: function (a, b, c, d, g) {
                var m = this._f32Buffer,
                    h = 5 * this._vertexCount;
                m[h] = a;
                m[h + 1] = b;
                f[0] = c.a << 24 | c.b << 16 | c.g << 8 | c.r;
                this._ui32Buffer[h + 2] = f[0];
                m[h + 3] = d;
                m[h + 4] = g;
                this._vertexCount++
            },
            drawDot: function (a, b, c) {
                c = c || this._drawColor;
                null == c.a && (c.a = 255);
                var d = a.x - b,
                    f = a.y - b,
                    g = a.x + b;
                a = a.y + b;
                this._ensureCapacity(this._vertexCount + 6) && (this.appendVertexData(d, f, c, -1, -1), this.appendVertexData(d, a, c, -1, 1), this.appendVertexData(g, a, c, 1, 1), this.appendVertexData(d,
                    f, c, -1, -1), this.appendVertexData(g, a, c, 1, 1), this.appendVertexData(g, f, c, 1, -1), this._dirty = !0)
            },
            drawSegment: function (a, b, c, d) {
                d = d || this.getDrawColor();
                null == d.a && (d.a = 255);
                c = c || 0.5 * this._lineWidth;
                if (this._ensureCapacity(this._vertexCount + 18)) {
                    g.x = a.y - b.y;
                    g.y = b.x - a.x;
                    cc.pNormalizeIn(g);
                    h.x = -g.y;
                    h.y = g.x;
                    var f = c;
                    m.x = g.x * f;
                    m.y = g.y * f;
                    n.x = h.x * c;
                    n.y = h.y * c;
                    c = b.x + m.x - n.x;
                    var f = b.y + m.y - n.y,
                        p = g.x - h.x,
                        A = g.y - h.y,
                        w = b.x - m.x,
                        B = b.y - m.y,
                        F = -g.x,
                        C = -g.y,
                        D = b.x + m.x,
                        E = b.y + m.y,
                        G = g.x,
                        H = g.y,
                        M = a.x - m.x,
                        K = a.y - m.y,
                        N = a.x + m.x,
                        U =
                        a.y + m.y,
                        T = g.x,
                        P = g.y,
                        S = a.x - m.x + n.x,
                        I = a.y - m.y + n.y,
                        J = h.x - g.x,
                        W = h.y - g.y,
                        $ = a.x + m.x + n.x;
                    a = a.y + m.y + n.y;
                    var O = g.x + h.x,
                        Z = g.y + h.y;
                    this.appendVertexData(b.x - m.x - n.x, b.y - m.y - n.y, d, -(g.x + h.x), -(g.y + h.y));
                    this.appendVertexData(c, f, d, p, A);
                    this.appendVertexData(w, B, d, F, C);
                    this.appendVertexData(D, E, d, G, H);
                    this.appendVertexData(c, f, d, p, A);
                    this.appendVertexData(w, B, d, F, C);
                    this.appendVertexData(D, E, d, G, H);
                    this.appendVertexData(M, K, d, F, C);
                    this.appendVertexData(w, B, d, F, C);
                    this.appendVertexData(D, E, d, G, H);
                    this.appendVertexData(M,
                        K, d, F, C);
                    this.appendVertexData(N, U, d, T, P);
                    this.appendVertexData(S, I, d, J, W);
                    this.appendVertexData(M, K, d, F, C);
                    this.appendVertexData(N, U, d, T, P);
                    this.appendVertexData(S, I, d, J, W);
                    this.appendVertexData($, a, d, O, Z);
                    this.appendVertexData(N, U, d, T, P);
                    this._dirty = !0
                }
            },
            drawPoly: function (a, c, d, f) {
                if ("object" === typeof a[0]) {
                    for (var h = b.length = 0; h < a.length; h++) b.push(a[h].x, a[h].y);
                    a = b
                }
                if (null == c) this._drawSegments(a, d, f, !0);
                else {
                    null == c.a && (c.a = 255);
                    null == f.a && (f.a = 255);
                    d = null == d ? this._lineWidth : d;
                    d *= 0.5;
                    for (var n,
                            A, w, B, F, C, D, E = a.length, h = p.length = 0; h < E; h += 2) n = a[(h - 2 + E) % E], A = a[(h - 1 + E) % E], w = a[h], B = a[h + 1], F = a[(h + 2) % E], C = a[(h + 3) % E], g.x = A - B, g.y = w - n, m.x = B - C, m.y = F - w, cc.pNormalizeIn(g), cc.pNormalizeIn(m), B = g.x * m.x + g.y * m.y + 1, D = (g.x + m.x) / B, B = (g.y + m.y) / B, p.push(D, B, m.x, m.y);
                    E /= 2;
                    D = 0 < d;
                    if (this._ensureCapacity(this._vertexCount + 3 * (3 * E - 2))) {
                        for (var G = !1 == D ? 0.5 : 0, h = 0; h < E - 2; h++) n = a[0] - p[0] * G, A = a[1] - p[1] * G, w = a[2 * h + 2] - p[4 * (h + 1)] * G, B = a[2 * h + 3] - p[4 * (h + 1) + 1] * G, F = a[2 * h + 4] - p[4 * (h + 2)] * G, C = a[2 * h + 5] - p[4 * (h + 2) + 1] * G, this.appendVertexData(n,
                            A, c, 0, 0), this.appendVertexData(w, B, c, 0, 0), this.appendVertexData(F, C, c, 0, 0);
                        var H, M, K, N;
                        d = D ? d : 0.5;
                        c = D ? f : c;
                        for (h = 0; h < E; h++) f = (h + 1) % E, n = a[2 * h], A = a[2 * h + 1], w = a[2 * f], B = a[2 * f + 1], g.x = p[4 * h + 2], g.y = p[4 * h + 3], m.x = D ? -g.x : 0, m.y = D ? -g.y : 0, H = p[4 * h], M = p[4 * h + 1], K = p[4 * f], N = p[4 * f + 1], f = n - H * d, F = A - M * d, C = w - K * d, G = B - N * d, n += H * d, A += M * d, w += K * d, B += N * d, this.appendVertexData(f, F, c, m.x, m.y), this.appendVertexData(C, G, c, m.x, m.y), this.appendVertexData(w, B, c, g.x, g.y), this.appendVertexData(f, F, c, m.x, m.y), this.appendVertexData(n, A, c, g.x,
                            g.y), this.appendVertexData(w, B, c, g.x, g.y);
                        p.length = 0;
                        b.length = 0;
                        this._dirty = !0
                    }
                }
            },
            _drawSegments: function (a, b, c, d) {
                b = null == b ? this._lineWidth : b;
                if (!(0 >= b)) {
                    c = c || this._drawColor;
                    null == c.a && (c.a = 255);
                    b *= 0.5;
                    var f, h, n, w, B, F, C, D = a.length;
                    for (C = p.length = 0; C < D; C += 2) f = a[(C - 2 + D) % D], h = a[(C - 1 + D) % D], n = a[C], w = a[C + 1], B = a[(C + 2) % D], F = a[(C + 3) % D], g.x = h - w, g.y = n - f, m.x = w - F, m.y = B - n, cc.pNormalizeIn(g), cc.pNormalizeIn(m), n = g.x * m.x + g.y * m.y + 1, w = (g.x + m.x) / n, n = (g.y + m.y) / n, p.push(w, n, m.x, m.y);
                    D /= 2;
                    if (this._ensureCapacity(this._vertexCount +
                            3 * (3 * D - 2))) {
                        d = d ? D : D - 1;
                        var E, G, H, M, K, N;
                        for (C = 0; C < d; C++) B = (C + 1) % D, f = a[2 * C], h = a[2 * C + 1], n = a[2 * B], w = a[2 * B + 1], g.x = p[4 * C + 2], g.y = p[4 * C + 3], E = p[4 * C], G = p[4 * C + 1], H = p[4 * B], M = p[4 * B + 1], B = f - E * b, F = h - G * b, K = n - H * b, N = w - M * b, f += E * b, h += G * b, n += H * b, w += M * b, this.appendVertexData(B, F, c, -g.x, -g.y), this.appendVertexData(K, N, c, -g.x, -g.y), this.appendVertexData(n, w, c, g.x, g.y), this.appendVertexData(B, F, c, -g.x, -g.y), this.appendVertexData(f, h, c, g.x, g.y), this.appendVertexData(n, w, c, g.x, g.y);
                        p.length = 0;
                        this._dirty = !0
                    }
                }
            },
            clear: function () {
                this.release();
                this._dirty = !0
            },
            _createRenderCmd: function () {
                return new cc.DrawNode.WebGLRenderCmd(this)
            }
        })
    }
});
(function () {
    cc.DrawNode.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !0;
        this._blendFunc = this._drawColor = this._buffer = null
    };
    cc.DrawNode.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    cc.DrawNode.CanvasRenderCmd.prototype.constructor = cc.DrawNode.CanvasRenderCmd;
    cc.DrawNode.CanvasRenderCmd.prototype.getLocalBB = function () {
        return this._node._localBB
    };
    cc.extend(cc.DrawNode.CanvasRenderCmd.prototype, {
        rendering: function (a, b, c) {
            a = a || cc._renderContext;
            a.getContext();
            var d = this._displayedOpacity / 255;
            if (0 !== d) {
                a.setTransform(this._worldTransform, b, c);
                a.setGlobalAlpha(d);
                this._blendFunc && (this._blendFunc.src === cc.SRC_ALPHA && this._blendFunc.dst === cc.ONE) && a.setCompositeOperation("lighter");
                for (var d = this._buffer, f = 0, g = d.length; f < g; f++) {
                    var h = d[f];
                    switch (h.type) {
                    case cc.DrawNode.TYPE_DOT:
                        this._drawDot(a, h, b, c);
                        break;
                    case cc.DrawNode.TYPE_SEGMENT:
                        this._drawSegment(a, h, b, c);
                        break;
                    case cc.DrawNode.TYPE_POLY:
                        this._drawPoly(a, h, b, c)
                    }
                }
            }
        },
        _drawDot: function (a, b) {
            var c = b.fillColor,
                d = b.verts[0],
                f = b.lineWidth,
                g = a.getContext();
            a.setFillStyle("rgba(" + (0 | c.r) + "," + (0 | c.g) + "," + (0 | c.b) + "," + c.a / 255 + ")");
            g.beginPath();
            g.arc(d.x, -d.y, f, 0, 2 * Math.PI, !1);
            g.closePath();
            g.fill()
        },
        _drawSegment: function (a, b, c) {
            var d = b.lineColor,
                f = b.verts[0],
                g = b.verts[1],
                h = b.lineWidth;
            b = b.lineCap;
            var m = a.getContext();
            a.setStrokeStyle("rgba(" + (0 | d.r) + "," + (0 | d.g) + "," + (0 | d.b) + "," + d.a / 255 + ")");
            m.lineWidth = h * c;
            m.beginPath();
            m.lineCap = b;
            m.moveTo(f.x, -f.y);
            m.lineTo(g.x, -g.y);
            m.stroke()
        },
        _drawPoly: function (a, b, c) {
            var d =
                b.verts,
                f = b.lineCap;
            if (null != d) {
                var g = b.fillColor,
                    h = b.lineWidth,
                    m = b.lineColor,
                    n = b.isClosePolygon,
                    p = b.isFill;
                b = b.isStroke;
                var u = a.getContext(),
                    v = d[0];
                u.lineCap = f;
                g && a.setFillStyle("rgba(" + (0 | g.r) + "," + (0 | g.g) + "," + (0 | g.b) + "," + g.a / 255 + ")");
                h && (u.lineWidth = h * c);
                m && a.setStrokeStyle("rgba(" + (0 | m.r) + "," + (0 | m.g) + "," + (0 | m.b) + "," + m.a / 255 + ")");
                u.beginPath();
                u.moveTo(v.x, -v.y);
                a = 1;
                for (c = d.length; a < c; a++) u.lineTo(d[a].x, -d[a].y);
                n && u.closePath();
                p && u.fill();
                b && u.stroke()
            }
        }
    })
})();
(function () {
    cc.DrawNode.WebGLRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !0;
        this._matrix = new cc.math.Matrix4;
        this._matrix.identity()
    };
    cc.DrawNode.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
    cc.DrawNode.WebGLRenderCmd.prototype.constructor = cc.DrawNode.WebGLRenderCmd;
    cc.DrawNode.WebGLRenderCmd.prototype.rendering = function (a) {
        a = this._node;
        if (0 < a._vertexCount) {
            var b = this._worldTransform;
            this._matrix.mat[0] = b.a;
            this._matrix.mat[4] = b.c;
            this._matrix.mat[12] = b.tx;
            this._matrix.mat[1] =
                b.b;
            this._matrix.mat[5] = b.d;
            this._matrix.mat[13] = b.ty;
            cc.glBlendFunc(a._blendFunc.src, a._blendFunc.dst);
            this._shaderProgram.use();
            this._shaderProgram._setUniformForMVPMatrixWithMat4(this._matrix);
            a._render()
        }
    }
})();
cc.stencilBits = -1;
cc.ClippingNode = cc.Node.extend({
    inverted: !1,
    _alphaThreshold: 0,
    _stencil: null,
    _className: "ClippingNode",
    _originStencilProgram: null,
    ctor: function (a) {
        a = a || null;
        cc.Node.prototype.ctor.call(this);
        if (this._stencil = a) this._originStencilProgram = a.getShaderProgram();
        this.alphaThreshold = 1;
        this.inverted = !1;
        this._renderCmd.initStencilBits()
    },
    onEnter: function () {
        cc.Node.prototype.onEnter.call(this);
        this._stencil && this._stencil._performRecursive(cc.Node._stateCallbackType.onEnter)
    },
    onEnterTransitionDidFinish: function () {
        cc.Node.prototype.onEnterTransitionDidFinish.call(this);
        this._stencil &&
            this._stencil._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish)
    },
    onExitTransitionDidStart: function () {
        this._stencil._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart);
        cc.Node.prototype.onExitTransitionDidStart.call(this)
    },
    onExit: function () {
        this._stencil._performRecursive(cc.Node._stateCallbackType.onExit);
        cc.Node.prototype.onExit.call(this)
    },
    visit: function (a) {
        this._renderCmd.clippingVisit(a && a._renderCmd)
    },
    _visitChildren: function () {
        this._reorderChildDirty &&
            this.sortAllChildren();
        for (var a = this._children, b, c = 0, d = a.length; c < d; c++)(b = a[c]) && b._visible && b.visit(this);
        this._renderCmd._dirtyFlag = 0
    },
    getAlphaThreshold: function () {
        return this._alphaThreshold
    },
    setAlphaThreshold: function (a) {
        1 === a && a !== this._alphaThreshold && this._renderCmd.resetProgramByStencil();
        this._alphaThreshold = a
    },
    isInverted: function () {
        return this.inverted
    },
    setInverted: function (a) {
        this.inverted = a
    },
    getStencil: function () {
        return this._stencil
    },
    setStencil: function (a) {
        this._stencil !== a && (a && (this._originStencilProgram =
            a.getShaderProgram()), this._renderCmd.setStencil(a))
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new cc.ClippingNode.CanvasRenderCmd(this) : new cc.ClippingNode.WebGLRenderCmd(this)
    }
});
_p = cc.ClippingNode.prototype;
cc.defineGetterSetter(_p, "stencil", _p.getStencil, _p.setStencil);
cc.defineGetterSetter(_p, "alphaThreshold", _p.getAlphaThreshold, _p.setAlphaThreshold);
cc.ClippingNode.create = function (a) {
    return new cc.ClippingNode(a)
};
(function () {
    cc.ClippingNode.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this._clipElemType = this._godhelpme = this._needDraw = !1;
        this._rendererSaveCmd = new cc.CustomRenderCmd(this, this._saveCmdCallback);
        this._rendererClipCmd = new cc.CustomRenderCmd(this, this._clipCmdCallback);
        this._rendererRestoreCmd = new cc.CustomRenderCmd(this, this._restoreCmdCallback)
    };
    var a = cc.ClippingNode.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    a.constructor = cc.ClippingNode.CanvasRenderCmd;
    a.resetProgramByStencil =
        function () {};
    a.initStencilBits = function () {};
    a.setStencil = function (a) {
        if (null != a)
            if (this._node._stencil = a, a instanceof cc.DrawNode) {
                if (a._buffer)
                    for (var c = 0; c < a._buffer.length; c++) a._buffer[c].isFill = !1, a._buffer[c].isStroke = !1;
                a._renderCmd.rendering = function (a, b, c) {};
                a._renderCmd._canUseDirtyRegion = !0;
                this._rendererSaveCmd._canUseDirtyRegion = !0;
                this._rendererClipCmd._canUseDirtyRegion = !0;
                this._rendererRestoreCmd._canUseDirtyRegion = !0
            } else a._parent = this._node
    };
    a._saveCmdCallback = function (a, c, d) {
        var f =
            a || cc._renderContext;
        a = f.getContext();
        this._clipElemType ? (c = cc.ClippingNode.CanvasRenderCmd._getSharedCache(), d = a.canvas, c.width = d.width, c.height = d.height, c.getContext("2d").drawImage(d, 0, 0)) : (f.save(), f.setTransform(this._worldTransform, c, d), this._node.inverted && (a.beginPath(), a.rect(0, 0, a.canvas.width, -a.canvas.height), a.clip()))
    };
    a._setStencilCompositionOperation = function (a) {
        if (a) {
            var c = this._node;
            a._renderCmd && a._renderCmd._blendFuncStr && (a._renderCmd._blendFuncStr = c.inverted ? "destination-out" :
                "destination-in");
            if (a._children) {
                a = a._children;
                for (var c = 0, d = a.length; c < d; c++) this._setStencilCompositionOperation(a[c])
            }
        }
    };
    a._clipCmdCallback = function (a) {
        var c = this._node;
        a = (a || cc._renderContext).getContext();
        if (this._clipElemType) this._setStencilCompositionOperation(c._stencil);
        else {
            c = this._node._stencil;
            if (c instanceof cc.DrawNode) {
                a.beginPath();
                var d = c._renderCmd._transform;
                a.transform(d.a, d.b, d.c, d.d, d.tx, -d.ty);
                for (d = 0; d < c._buffer.length; d++) {
                    var f = c._buffer[d].verts,
                        g = f[0];
                    a.moveTo(g.x, -g.y);
                    for (g = f.length - 1; 0 < g; g--) a.lineTo(f[g].x, -f[g].y)
                }
            }
            a.clip()
        }
    };
    a._restoreCmdCallback = function (a) {
        var c = cc.ClippingNode.CanvasRenderCmd._getSharedCache();
        a = a || cc._renderContext;
        var d = a.getContext();
        this._clipElemType ? (d.save(), d.setTransform(1, 0, 0, 1, 0, 0), d.globalCompositeOperation = "destination-over", d.drawImage(c, 0, 0), d.restore(), this._dirtyFlag = 0) : a.restore()
    };
    a.transform = function (a, c) {
        this.originTransform(a, c);
        var d = this._node;
        d._stencil && d._stencil._renderCmd && (d._stencil._renderCmd.transform(this,
            !0), d._stencil._dirtyFlag &= ~cc.Node._dirtyFlags.transformDirty)
    };
    a._cangodhelpme = function (a) {
        if (!0 === a || !1 === a) cc.ClippingNode.CanvasRenderCmd.prototype._godhelpme = a;
        return cc.ClippingNode.CanvasRenderCmd.prototype._godhelpme
    };
    a.clippingVisit = function (a) {
        var c = this._node;
        a = a || this.getParentRenderCmd();
        this.visit(a);
        this._clipElemType = !(!this._cangodhelpme() && c._stencil instanceof cc.DrawNode);
        if (!c._stencil || !c._stencil.visible) this.inverted && c._visitChildren();
        else {
            cc.renderer.pushRenderCommand(this._rendererSaveCmd);
            this._clipElemType ? c._visitChildren() : c._stencil.visit(c);
            cc.renderer.pushRenderCommand(this._rendererClipCmd);
            if (this._clipElemType) c._stencil.visit(c);
            else {
                this._cangodhelpme(!0);
                a = c._children;
                var d, f = a.length;
                if (0 < f) {
                    c.sortAllChildren();
                    for (d = 0; d < f; d++) a[d].visit(c)
                }
                this._cangodhelpme(!1)
            }
            cc.renderer.pushRenderCommand(this._rendererRestoreCmd);
            this._dirtyFlag = 0
        }
    };
    cc.ClippingNode.CanvasRenderCmd._sharedCache = null;
    cc.ClippingNode.CanvasRenderCmd._getSharedCache = function () {
        return cc.ClippingNode.CanvasRenderCmd._sharedCache ||
            (cc.ClippingNode.CanvasRenderCmd._sharedCache = document.createElement("canvas"))
    }
})();

function setProgram(a, b) {
    a.shaderProgram = b;
    var c = a.children;
    if (c)
        for (var d = 0; d < c.length; d++) setProgram(c[d], b)
}
(function () {
    cc.ClippingNode.WebGLRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !1;
        this._beforeVisitCmd = new cc.CustomRenderCmd(this, this._onBeforeVisit);
        this._afterDrawStencilCmd = new cc.CustomRenderCmd(this, this._onAfterDrawStencil);
        this._afterVisitCmd = new cc.CustomRenderCmd(this, this._onAfterVisit);
        this._mask_layer_le = this._currentStencilEnabled = null
    };
    var a = cc.ClippingNode.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
    a.constructor = cc.ClippingNode.WebGLRenderCmd;
    cc.ClippingNode.WebGLRenderCmd._init_once = null;
    cc.ClippingNode.WebGLRenderCmd._visit_once = null;
    cc.ClippingNode.WebGLRenderCmd._layer = -1;
    a.initStencilBits = function () {
        cc.ClippingNode.WebGLRenderCmd._init_once = !0;
        cc.ClippingNode.WebGLRenderCmd._init_once && (cc.stencilBits = cc._renderContext.getParameter(cc._renderContext.STENCIL_BITS), 0 >= cc.stencilBits && cc.log("Stencil buffer is not enabled."), cc.ClippingNode.WebGLRenderCmd._init_once = !1)
    };
    a.transform = function (a, c) {
        var d = this._node;
        this.originTransform(a,
            c);
        d._stencil && (d._stencil._renderCmd.transform(this, !0), d._stencil._dirtyFlag &= ~cc.Node._dirtyFlags.transformDirty)
    };
    a.clippingVisit = function (a) {
        var c = this._node;
        a = a || this.getParentRenderCmd();
        this.visit(a);
        if (1 > cc.stencilBits) c._visitChildren();
        else if (!c._stencil || !c._stencil.visible) c.inverted && c._visitChildren();
        else if (cc.ClippingNode.WebGLRenderCmd._layer + 1 === cc.stencilBits) cc.ClippingNode.WebGLRenderCmd._visit_once = !0, cc.ClippingNode.WebGLRenderCmd._visit_once && (cc.log("Nesting more than " +
            cc.stencilBits + "stencils is not supported. Everything will be drawn without stencil for this node and its children."), cc.ClippingNode.WebGLRenderCmd._visit_once = !1), c._visitChildren();
        else {
            cc.renderer.pushRenderCommand(this._beforeVisitCmd);
            c._stencil.visit(c);
            cc.renderer.pushRenderCommand(this._afterDrawStencilCmd);
            if ((a = c._children) && 0 < a.length) {
                var d = a.length;
                c.sortAllChildren();
                for (var f = 0; f < d; f++) a[f].visit(c)
            }
            cc.renderer.pushRenderCommand(this._afterVisitCmd);
            this._dirtyFlag = 0
        }
    };
    a.setStencil =
        function (a) {
            var c = this._node;
            c._stencil && (c._stencil._parent = null);
            c._stencil = a;
            c._stencil && (c._stencil._parent = c)
        };
    a.resetProgramByStencil = function () {
        var a = this._node;
        a._stencil && setProgram(a._stencil, a._originStencilProgram)
    };
    a._onBeforeVisit = function (a) {
        var c = a || cc._renderContext;
        a = this._node;
        cc.ClippingNode.WebGLRenderCmd._layer++;
        var d = 1 << cc.ClippingNode.WebGLRenderCmd._layer;
        this._mask_layer_le = d | d - 1;
        this._currentStencilEnabled = c.isEnabled(c.STENCIL_TEST);
        c.clear(c.DEPTH_BUFFER_BIT);
        c.enable(c.STENCIL_TEST);
        c.depthMask(!1);
        c.stencilFunc(c.NEVER, d, d);
        c.stencilOp(c.REPLACE, c.KEEP, c.KEEP);
        c.stencilMask(d);
        c.clear(c.STENCIL_BUFFER_BIT);
        1 > a.alphaThreshold && (c = cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURECOLORALPHATEST), cc.glUseProgram(c.getProgram()), c.setUniformLocationWith1f(cc.UNIFORM_ALPHA_TEST_VALUE_S, a.alphaThreshold), c.setUniformLocationWithMatrix4fv(cc.UNIFORM_MVMATRIX_S, cc.renderer.mat4Identity.mat), cc.setProgram(a._stencil, c))
    };
    a._onAfterDrawStencil = function (a) {
        a = a || cc._renderContext;
        a.depthMask(!0);
        a.stencilFunc(!this._node.inverted ? a.EQUAL : a.NOTEQUAL, this._mask_layer_le, this._mask_layer_le);
        a.stencilOp(a.KEEP, a.KEEP, a.KEEP)
    };
    a._onAfterVisit = function (a) {
        a = a || cc._renderContext;
        cc.ClippingNode.WebGLRenderCmd._layer--;
        if (this._currentStencilEnabled) {
            var c = 1 << cc.ClippingNode.WebGLRenderCmd._layer,
                d = c | c - 1;
            a.stencilMask(c);
            a.stencilFunc(a.EQUAL, d, d)
        } else a.disable(a.STENCIL_TEST)
    }
})();
cc.GridBase = cc.Class.extend({
    _active: !1,
    _reuseGrid: 0,
    _gridSize: null,
    _gridRect: null,
    _texture: null,
    _step: null,
    _grabber: null,
    _isTextureFlipped: !1,
    _shaderProgram: null,
    _directorProjection: 0,
    _dirty: !1,
    ctor: function (a, b, c, d) {
        cc.sys._checkWebGLRenderMode();
        this._active = !1;
        this._reuseGrid = 0;
        this._gridSize = null;
        this._gridRect = new cc.rect;
        this._texture = null;
        this._step = cc.p(0, 0);
        this._grabber = null;
        this._isTextureFlipped = !1;
        this._shaderProgram = null;
        this._directorProjection = 0;
        this._dirty = !1;
        void 0 !== a && this.initWithSize(a,
            b, c, d)
    },
    isActive: function () {
        return this._active
    },
    setActive: function (a) {
        this._active = a;
        if (!a) {
            a = cc.director;
            var b = a.getProjection();
            a.setProjection(b)
        }
    },
    getReuseGrid: function () {
        return this._reuseGrid
    },
    setReuseGrid: function (a) {
        this._reuseGrid = a
    },
    getGridSize: function () {
        return cc.size(this._gridSize.width, this._gridSize.height)
    },
    setGridSize: function (a) {
        this._gridSize.width = parseInt(a.width);
        this._gridSize.height = parseInt(a.height)
    },
    setGridRect: function (a) {
        this._gridRect = a
    },
    getGridRect: function () {
        return this._gridRect
    },
    getStep: function () {
        return cc.p(this._step.x, this._step.y)
    },
    setStep: function (a) {
        this._step.x = a.x;
        this._step.y = a.y
    },
    isTextureFlipped: function () {
        return this._isTextureFlipped
    },
    setTextureFlipped: function (a) {
        this._isTextureFlipped !== a && (this._isTextureFlipped = a, this.calculateVertexPoints())
    },
    initWithSize: function (a, b, c, d) {
        if (!b) {
            var f = cc.director.getWinSizeInPixels(),
                g = cc.NextPOT(f.width),
                h = cc.NextPOT(f.height),
                m = new Uint8Array(4 * g * h);
            if (!m) return cc.log("cocos2d: CCGrid: not enough memory."), !1;
            b = new cc.Texture2D;
            b.initWithData(m, cc.Texture2D.PIXEL_FORMAT_RGBA8888, g, h, f);
            if (!b) return cc.log("cocos2d: CCGrid: error creating texture"), !1
        }
        this._active = !1;
        this._reuseGrid = 0;
        this._gridSize = a;
        this._texture = b;
        this._isTextureFlipped = c || !1;
        if (void 0 === d || cc._rectEqualToZero(d)) b = this._texture.getContentSize(), d = new cc.rect(0, 0, b.width, b.height);
        this._gridRect = d;
        this._step.x = this._gridRect.width / a.width;
        this._step.y = this._gridRect.height / a.height;
        this._grabber = new cc.Grabber;
        if (!this._grabber) return !1;
        this._grabber.grab(this._texture);
        this._shaderProgram = cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURE);
        this.calculateVertexPoints();
        return !0
    },
    beforeDraw: function () {
        this._directorProjection = cc.director.getProjection();
        var a = cc.director.getWinSizeInPixels();
        gl.viewport(0, 0, a.width, a.height);
        this._grabber.beforeRender(this._texture)
    },
    afterDraw: function (a) {
        this._grabber.afterRender(this._texture);
        cc.director.setViewport();
        cc.glBindTexture2D(this._texture);
        this.beforeBlit();
        this.blit(a);
        this.afterBlit()
    },
    beforeBlit: function () {},
    afterBlit: function () {},
    blit: function () {
        cc.log("cc.GridBase.blit(): Shall be overridden in subclass.")
    },
    reuse: function () {
        cc.log("cc.GridBase.reuse(): Shall be overridden in subclass.")
    },
    calculateVertexPoints: function () {
        cc.log("cc.GridBase.calculateVertexPoints(): Shall be overridden in subclass.")
    },
    set2DProjection: function () {
        var a = cc.director.getWinSizeInPixels();
        cc._renderContext.viewport(0, 0, a.width, a.height);
        cc.kmGLMatrixMode(cc.KM_GL_PROJECTION);
        cc.kmGLLoadIdentity();
        a = cc.math.Matrix4.createOrthographicProjection(0,
            a.width, 0, a.height, -1, 1);
        cc.kmGLMultMatrix(a);
        cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW);
        cc.kmGLLoadIdentity();
        cc.setProjectionMatrixDirty()
    }
});
cc.GridBase.create = function (a, b, c, d) {
    return new cc.GridBase(a, b, c, d)
};
cc.Grid3D = cc.GridBase.extend({
    _texCoordinates: null,
    _vertices: null,
    _originalVertices: null,
    _indices: null,
    _texCoordinateBuffer: null,
    _verticesBuffer: null,
    _indicesBuffer: null,
    _needDepthTestForBlit: !1,
    _oldDepthTestValue: !1,
    _oldDepthWriteValue: !1,
    ctor: function (a, b, c, d) {
        cc.GridBase.prototype.ctor.call(this);
        this._indicesBuffer = this._verticesBuffer = this._texCoordinateBuffer = this._indices = this._originalVertices = this._vertices = this._texCoordinates = null;
        this._matrix = new cc.math.Matrix4;
        this._matrix.identity();
        void 0 !== a && this.initWithSize(a, b, c, d)
    },
    vertex: function (a) {
        return this.getVertex(a)
    },
    getVertex: function (a) {
        (a.x !== (0 | a.x) || a.y !== (0 | a.y)) && cc.log("cc.Grid3D.vertex() : Numbers must be integers");
        a = 0 | 3 * (a.x * (this._gridSize.height + 1) + a.y);
        var b = this._vertices;
        return new cc.Vertex3F(b[a], b[a + 1], b[a + 2])
    },
    originalVertex: function (a) {
        return this.getOriginalVertex(a)
    },
    getOriginalVertex: function (a) {
        (a.x !== (0 | a.x) || a.y !== (0 | a.y)) && cc.log("cc.Grid3D.originalVertex() : Numbers must be integers");
        a = 0 | 3 * (a.x * (this._gridSize.height +
            1) + a.y);
        var b = this._originalVertices;
        return new cc.Vertex3F(b[a], b[a + 1], b[a + 2])
    },
    setVertex: function (a, b) {
        (a.x !== (0 | a.x) || a.y !== (0 | a.y)) && cc.log("cc.Grid3D.setVertex() : Numbers must be integers");
        var c = 0 | 3 * (a.x * (this._gridSize.height + 1) + a.y),
            d = this._vertices;
        d[c] = b.x;
        d[c + 1] = b.y;
        d[c + 2] = b.z;
        this._dirty = !0
    },
    beforeBlit: function () {
        if (this._needDepthTestForBlit) {
            var a = cc._renderContext;
            this._oldDepthTestValue = a.isEnabled(a.DEPTH_TEST);
            this._oldDepthWriteValue = a.getParameter(a.DEPTH_WRITEMASK);
            a.enable(a.DEPTH_TEST);
            a.depthMask(!0)
        }
    },
    afterBlit: function () {
        if (this._needDepthTestForBlit) {
            var a = cc._renderContext;
            this._oldDepthTestValue ? a.enable(a.DEPTH_TEST) : a.disable(a.DEPTH_TEST);
            a.depthMask(this._oldDepthWriteValue)
        }
    },
    blit: function (a) {
        var b = this._gridSize.width * this._gridSize.height;
        a = a._renderCmd._worldTransform;
        this._matrix.mat[0] = a.a;
        this._matrix.mat[4] = a.c;
        this._matrix.mat[12] = a.tx;
        this._matrix.mat[1] = a.b;
        this._matrix.mat[5] = a.d;
        this._matrix.mat[13] = a.ty;
        this._shaderProgram.use();
        this._shaderProgram._setUniformForMVPMatrixWithMat4(this._matrix);
        a = cc._renderContext;
        var c = this._dirty;
        a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
        a.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
        a.bindBuffer(a.ARRAY_BUFFER, this._verticesBuffer);
        c && a.bufferData(a.ARRAY_BUFFER, this._vertices, a.DYNAMIC_DRAW);
        a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 3, a.FLOAT, !1, 0, 0);
        a.bindBuffer(a.ARRAY_BUFFER, this._texCoordinateBuffer);
        c && a.bufferData(a.ARRAY_BUFFER, this._texCoordinates, a.DYNAMIC_DRAW);
        a.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, a.FLOAT,
            !1, 0, 0);
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this._indicesBuffer);
        c && a.bufferData(a.ELEMENT_ARRAY_BUFFER, this._indices, a.STATIC_DRAW);
        a.drawElements(a.TRIANGLES, 6 * b, a.UNSIGNED_SHORT, 0);
        c && (this._dirty = !1);
        cc.incrementGLDraws(1)
    },
    reuse: function () {
        if (0 < this._reuseGrid) {
            for (var a = this._originalVertices, b = this._vertices, c = 0, d = this._vertices.length; c < d; c++) a[c] = b[c];
            --this._reuseGrid
        }
    },
    calculateVertexPoints: function () {
        var a = cc._renderContext,
            b = this._texture.pixelsWidth,
            c = this._texture.pixelsHeight,
            d = this._texture.getContentSizeInPixels().height,
            f = this._gridSize,
            g = (f.width + 1) * (f.height + 1);
        this._vertices = new Float32Array(3 * g);
        this._texCoordinates = new Float32Array(2 * g);
        this._indices = new Uint16Array(6 * f.width * f.height);
        this._verticesBuffer && a.deleteBuffer(this._verticesBuffer);
        this._verticesBuffer = a.createBuffer();
        this._texCoordinateBuffer && a.deleteBuffer(this._texCoordinateBuffer);
        this._texCoordinateBuffer = a.createBuffer();
        this._indicesBuffer && a.deleteBuffer(this._indicesBuffer);
        this._indicesBuffer = a.createBuffer();
        for (var h, m, n = this._indices,
                p = this._texCoordinates, u = this._isTextureFlipped, v = this._vertices, g = 0; g < f.width; ++g)
            for (h = 0; h < f.height; ++h) {
                var x = h * f.width + g;
                m = g * this._step.x + this._gridRect.x;
                var y = m + this._step.x,
                    z = h * this._step.y + this._gridRect.y,
                    t = z + this._step.y,
                    A = g * (f.height + 1) + h,
                    w = (g + 1) * (f.height + 1) + h,
                    B = (g + 1) * (f.height + 1) + (h + 1),
                    F = g * (f.height + 1) + (h + 1);
                n[6 * x] = A;
                n[6 * x + 1] = w;
                n[6 * x + 2] = F;
                n[6 * x + 3] = w;
                n[6 * x + 4] = B;
                n[6 * x + 5] = F;
                var x = [3 * A, 3 * w, 3 * B, 3 * F],
                    C = [{
                        x: m,
                        y: z,
                        z: 0
                    }, {
                        x: y,
                        y: z,
                        z: 0
                    }, {
                        x: y,
                        y: t,
                        z: 0
                    }, {
                        x: m,
                        y: t,
                        z: 0
                    }],
                    A = [2 * A, 2 * w, 2 * B, 2 * F],
                    y = [cc.p(m,
                        z), cc.p(y, z), cc.p(y, t), cc.p(m, t)];
                for (m = 0; 4 > m; ++m) v[x[m]] = C[m].x, v[x[m] + 1] = C[m].y, v[x[m] + 2] = C[m].z, p[A[m]] = y[m].x / b, p[A[m] + 1] = u ? (d - y[m].y) / c : y[m].y / c
            }
        this._originalVertices = new Float32Array(this._vertices);
        a.bindBuffer(a.ARRAY_BUFFER, this._verticesBuffer);
        a.bufferData(a.ARRAY_BUFFER, this._vertices, a.DYNAMIC_DRAW);
        a.bindBuffer(a.ARRAY_BUFFER, this._texCoordinateBuffer);
        a.bufferData(a.ARRAY_BUFFER, this._texCoordinates, a.DYNAMIC_DRAW);
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this._indicesBuffer);
        a.bufferData(a.ELEMENT_ARRAY_BUFFER,
            this._indices, a.STATIC_DRAW);
        this._dirty = !0
    },
    setNeedDepthTestForBlit: function (a) {
        this._needDepthTestForBlit = a
    },
    getNeedDepthTestForBlit: function () {
        return this._needDepthTestForBlit
    }
});
cc.Grid3D.create = function (a, b, c) {
    return new cc.Grid3D(a, b, c)
};
cc.TiledGrid3D = cc.GridBase.extend({
    _texCoordinates: null,
    _vertices: null,
    _originalVertices: null,
    _indices: null,
    _texCoordinateBuffer: null,
    _verticesBuffer: null,
    _indicesBuffer: null,
    ctor: function (a, b, c, d) {
        cc.GridBase.prototype.ctor.call(this);
        this._indicesBuffer = this._verticesBuffer = this._texCoordinateBuffer = this._indices = this._originalVertices = this._vertices = this._texCoordinates = null;
        this._matrix = new cc.math.Matrix4;
        this._matrix.identity();
        void 0 !== a && this.initWithSize(a, b, c, d)
    },
    tile: function (a) {
        return this.getTile(a)
    },
    getTile: function (a) {
        (a.x !== (0 | a.x) || a.y !== (0 | a.y)) && cc.log("cc.TiledGrid3D.tile() : Numbers must be integers");
        a = 12 * (this._gridSize.height * a.x + a.y);
        var b = this._vertices;
        return new cc.Quad3(new cc.Vertex3F(b[a], b[a + 1], b[a + 2]), new cc.Vertex3F(b[a + 3], b[a + 4], b[a + 5]), new cc.Vertex3F(b[a + 6], b[a + 7], b[a + 8]), new cc.Vertex3F(b[a + 9], b[a + 10], b[a + 11]))
    },
    getOriginalTile: function (a) {
        (a.x !== (0 | a.x) || a.y !== (0 | a.y)) && cc.log("cc.TiledGrid3D.originalTile() : Numbers must be integers");
        a = 12 * (this._gridSize.height * a.x +
            a.y);
        var b = this._originalVertices;
        return new cc.Quad3(new cc.Vertex3F(b[a], b[a + 1], b[a + 2]), new cc.Vertex3F(b[a + 3], b[a + 4], b[a + 5]), new cc.Vertex3F(b[a + 6], b[a + 7], b[a + 8]), new cc.Vertex3F(b[a + 9], b[a + 10], b[a + 11]))
    },
    originalTile: function (a) {
        return this.getOriginalTile(a)
    },
    setTile: function (a, b) {
        (a.x !== (0 | a.x) || a.y !== (0 | a.y)) && cc.log("cc.TiledGrid3D.setTile() : Numbers must be integers");
        var c = 12 * (this._gridSize.height * a.x + a.y),
            d = this._vertices;
        d[c] = b.bl.x;
        d[c + 1] = b.bl.y;
        d[c + 2] = b.bl.z;
        d[c + 3] = b.br.x;
        d[c + 4] = b.br.y;
        d[c + 5] = b.br.z;
        d[c + 6] = b.tl.x;
        d[c + 7] = b.tl.y;
        d[c + 8] = b.tl.z;
        d[c + 9] = b.tr.x;
        d[c + 10] = b.tr.y;
        d[c + 11] = b.tr.z;
        this._dirty = !0
    },
    blit: function (a) {
        var b = this._gridSize.width * this._gridSize.height;
        a = a._renderCmd._worldTransform;
        this._matrix.mat[0] = a.a;
        this._matrix.mat[4] = a.c;
        this._matrix.mat[12] = a.tx;
        this._matrix.mat[1] = a.b;
        this._matrix.mat[5] = a.d;
        this._matrix.mat[13] = a.ty;
        this._shaderProgram.use();
        this._shaderProgram._setUniformForMVPMatrixWithMat4(this._matrix);
        a = cc._renderContext;
        var c = this._dirty;
        a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
        a.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
        a.bindBuffer(a.ARRAY_BUFFER, this._verticesBuffer);
        c && a.bufferData(a.ARRAY_BUFFER, this._vertices, a.DYNAMIC_DRAW);
        a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 3, a.FLOAT, !1, 0, this._vertices);
        a.bindBuffer(a.ARRAY_BUFFER, this._texCoordinateBuffer);
        c && a.bufferData(a.ARRAY_BUFFER, this._texCoordinates, a.DYNAMIC_DRAW);
        a.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, a.FLOAT, !1, 0, this._texCoordinates);
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this._indicesBuffer);
        c && a.bufferData(a.ELEMENT_ARRAY_BUFFER, this._indices, a.STATIC_DRAW);
        a.drawElements(a.TRIANGLES, 6 * b, a.UNSIGNED_SHORT, 0);
        c && (this._dirty = !1);
        cc.incrementGLDraws(1)
    },
    reuse: function () {
        if (0 < this._reuseGrid) {
            for (var a = this._vertices, b = this._originalVertices, c = 0; c < a.length; c++) b[c] = a[c];
            --this._reuseGrid
        }
    },
    calculateVertexPoints: function () {
        var a = this._texture.pixelsWidth,
            b = this._texture.pixelsHeight,
            c = this._texture.getContentSizeInPixels().height,
            d = this._gridSize,
            f = d.width * d.height;
        this._vertices = new Float32Array(12 *
            f);
        this._texCoordinates = new Float32Array(8 * f);
        this._indices = new Uint16Array(6 * f);
        var g = cc._renderContext;
        this._verticesBuffer && g.deleteBuffer(this._verticesBuffer);
        this._verticesBuffer = g.createBuffer();
        this._texCoordinateBuffer && g.deleteBuffer(this._texCoordinateBuffer);
        this._texCoordinateBuffer = g.createBuffer();
        this._indicesBuffer && g.deleteBuffer(this._indicesBuffer);
        this._indicesBuffer = g.createBuffer();
        var h, m, n = 0,
            p = this._step,
            u = this._vertices,
            v = this._texCoordinates,
            x = this._isTextureFlipped;
        for (h =
            0; h < d.width; h++)
            for (m = 0; m < d.height; m++) {
                var y = h * p.x,
                    z = y + p.x,
                    t = m * p.y,
                    A = t + p.y;
                u[12 * n] = y;
                u[12 * n + 1] = t;
                u[12 * n + 2] = 0;
                u[12 * n + 3] = z;
                u[12 * n + 4] = t;
                u[12 * n + 5] = 0;
                u[12 * n + 6] = y;
                u[12 * n + 7] = A;
                u[12 * n + 8] = 0;
                u[12 * n + 9] = z;
                u[12 * n + 10] = A;
                u[12 * n + 11] = 0;
                var w = t,
                    B = A;
                x && (w = c - t, B = c - A);
                v[8 * n] = y / a;
                v[8 * n + 1] = w / b;
                v[8 * n + 2] = z / a;
                v[8 * n + 3] = w / b;
                v[8 * n + 4] = y / a;
                v[8 * n + 5] = B / b;
                v[8 * n + 6] = z / a;
                v[8 * n + 7] = B / b;
                n++
            }
        a = this._indices;
        for (h = 0; h < f; h++) a[6 * h + 0] = 4 * h + 0, a[6 * h + 1] = 4 * h + 1, a[6 * h + 2] = 4 * h + 2, a[6 * h + 3] = 4 * h + 1, a[6 * h + 4] = 4 * h + 2, a[6 * h + 5] = 4 * h + 3;
        this._originalVertices = new Float32Array(this._vertices);
        g.bindBuffer(g.ARRAY_BUFFER, this._verticesBuffer);
        g.bufferData(g.ARRAY_BUFFER, this._vertices, g.DYNAMIC_DRAW);
        g.bindBuffer(g.ARRAY_BUFFER, this._texCoordinateBuffer);
        g.bufferData(g.ARRAY_BUFFER, this._texCoordinates, g.DYNAMIC_DRAW);
        g.bindBuffer(g.ELEMENT_ARRAY_BUFFER, this._indicesBuffer);
        g.bufferData(g.ELEMENT_ARRAY_BUFFER, this._indices, g.DYNAMIC_DRAW);
        this._dirty = !0
    }
});
cc.TiledGrid3D.create = function (a, b, c) {
    return new cc.TiledGrid3D(a, b, c)
};
cc.Grabber = cc.Class.extend({
    _FBO: null,
    _oldFBO: null,
    _oldClearColor: null,
    _gl: null,
    ctor: function () {
        cc.sys._checkWebGLRenderMode();
        this._gl = cc._renderContext;
        this._oldClearColor = [0, 0, 0, 0];
        this._oldFBO = null;
        this._FBO = this._gl.createFramebuffer()
    },
    grab: function (a) {
        var b = this._gl;
        this._oldFBO = b.getParameter(b.FRAMEBUFFER_BINDING);
        b.bindFramebuffer(b.FRAMEBUFFER, this._FBO);
        b.framebufferTexture2D(b.FRAMEBUFFER, b.COLOR_ATTACHMENT0, b.TEXTURE_2D, a._webTextureObj, 0);
        b.checkFramebufferStatus(b.FRAMEBUFFER) !== b.FRAMEBUFFER_COMPLETE &&
            cc.log("Frame Grabber: could not attach texture to frmaebuffer");
        b.bindFramebuffer(b.FRAMEBUFFER, this._oldFBO)
    },
    beforeRender: function (a) {
        a = this._gl;
        this._oldFBO = a.getParameter(a.FRAMEBUFFER_BINDING);
        a.bindFramebuffer(a.FRAMEBUFFER, this._FBO);
        this._oldClearColor = a.getParameter(a.COLOR_CLEAR_VALUE);
        a.clearColor(0, 0, 0, 0);
        a.clear(a.COLOR_BUFFER_BIT | a.DEPTH_BUFFER_BIT)
    },
    afterRender: function (a) {
        a = this._gl;
        a.bindFramebuffer(a.FRAMEBUFFER, this._oldFBO);
        a.colorMask(!0, !0, !0, !0)
    },
    destroy: function () {
        this._gl.deleteFramebuffer(this._FBO)
    }
});
cc.ACTION_TAG_INVALID = -1;
cc.Action = cc.Class.extend({
    originalTarget: null,
    target: null,
    tag: cc.ACTION_TAG_INVALID,
    ctor: function () {
        this.target = this.originalTarget = null;
        this.tag = cc.ACTION_TAG_INVALID
    },
    copy: function () {
        cc.log("copy is deprecated. Please use clone instead.");
        return this.clone()
    },
    clone: function () {
        var a = new cc.Action;
        a.originalTarget = null;
        a.target = null;
        a.tag = this.tag;
        return a
    },
    isDone: function () {
        return !0
    },
    startWithTarget: function (a) {
        this.target = this.originalTarget = a
    },
    stop: function () {
        this.target = null
    },
    step: function (a) {
        cc.log("[Action step]. override me")
    },
    update: function (a) {
        cc.log("[Action update]. override me")
    },
    getTarget: function () {
        return this.target
    },
    setTarget: function (a) {
        this.target = a
    },
    getOriginalTarget: function () {
        return this.originalTarget
    },
    setOriginalTarget: function (a) {
        this.originalTarget = a
    },
    getTag: function () {
        return this.tag
    },
    setTag: function (a) {
        this.tag = a
    },
    retain: function () {},
    release: function () {}
});
cc.action = function () {
    return new cc.Action
};
cc.Action.create = cc.action;
cc.FiniteTimeAction = cc.Action.extend({
    _duration: 0,
    ctor: function () {
        cc.Action.prototype.ctor.call(this);
        this._duration = 0
    },
    getDuration: function () {
        return this._duration * (this._timesForRepeat || 1)
    },
    setDuration: function (a) {
        this._duration = a
    },
    reverse: function () {
        cc.log("cocos2d: FiniteTimeAction#reverse: Implement me");
        return null
    },
    clone: function () {
        return new cc.FiniteTimeAction
    }
});
cc.Speed = cc.Action.extend({
    _speed: 0,
    _innerAction: null,
    ctor: function (a, b) {
        cc.Action.prototype.ctor.call(this);
        this._speed = 0;
        this._innerAction = null;
        a && this.initWithAction(a, b)
    },
    getSpeed: function () {
        return this._speed
    },
    setSpeed: function (a) {
        this._speed = a
    },
    initWithAction: function (a, b) {
        if (!a) throw Error("cc.Speed.initWithAction(): action must be non nil");
        this._innerAction = a;
        this._speed = b;
        return !0
    },
    clone: function () {
        var a = new cc.Speed;
        a.initWithAction(this._innerAction.clone(), this._speed);
        return a
    },
    startWithTarget: function (a) {
        cc.Action.prototype.startWithTarget.call(this,
            a);
        this._innerAction.startWithTarget(a)
    },
    stop: function () {
        this._innerAction.stop();
        cc.Action.prototype.stop.call(this)
    },
    step: function (a) {
        this._innerAction.step(a * this._speed)
    },
    isDone: function () {
        return this._innerAction.isDone()
    },
    reverse: function () {
        return new cc.Speed(this._innerAction.reverse(), this._speed)
    },
    setInnerAction: function (a) {
        this._innerAction !== a && (this._innerAction = a)
    },
    getInnerAction: function () {
        return this._innerAction
    }
});
cc.speed = function (a, b) {
    return new cc.Speed(a, b)
};
cc.Speed.create = cc.speed;
cc.Follow = cc.Action.extend({
    _followedNode: null,
    _boundarySet: !1,
    _boundaryFullyCovered: !1,
    _halfScreenSize: null,
    _fullScreenSize: null,
    _worldRect: null,
    leftBoundary: 0,
    rightBoundary: 0,
    topBoundary: 0,
    bottomBoundary: 0,
    ctor: function (a, b) {
        cc.Action.prototype.ctor.call(this);
        this._followedNode = null;
        this._boundaryFullyCovered = this._boundarySet = !1;
        this._fullScreenSize = this._halfScreenSize = null;
        this.bottomBoundary = this.topBoundary = this.rightBoundary = this.leftBoundary = 0;
        this._worldRect = cc.rect(0, 0, 0, 0);
        a && (b ? this.initWithTarget(a,
            b) : this.initWithTarget(a))
    },
    clone: function () {
        var a = new cc.Follow,
            b = this._worldRect,
            b = new cc.Rect(b.x, b.y, b.width, b.height);
        a.initWithTarget(this._followedNode, b);
        return a
    },
    isBoundarySet: function () {
        return this._boundarySet
    },
    setBoudarySet: function (a) {
        this._boundarySet = a
    },
    initWithTarget: function (a, b) {
        if (!a) throw Error("cc.Follow.initWithAction(): followedNode must be non nil");
        b = b || cc.rect(0, 0, 0, 0);
        this._followedNode = a;
        this._worldRect = b;
        this._boundarySet = !cc._rectEqualToZero(b);
        this._boundaryFullyCovered = !1;
        var c = cc.director.getWinSize();
        this._fullScreenSize = cc.p(c.width, c.height);
        this._halfScreenSize = cc.pMult(this._fullScreenSize, 0.5);
        this._boundarySet && (this.leftBoundary = -(b.x + b.width - this._fullScreenSize.x), this.rightBoundary = -b.x, this.topBoundary = -b.y, this.bottomBoundary = -(b.y + b.height - this._fullScreenSize.y), this.rightBoundary < this.leftBoundary && (this.rightBoundary = this.leftBoundary = (this.leftBoundary + this.rightBoundary) / 2), this.topBoundary < this.bottomBoundary && (this.topBoundary = this.bottomBoundary =
            (this.topBoundary + this.bottomBoundary) / 2), this.topBoundary === this.bottomBoundary && this.leftBoundary === this.rightBoundary && (this._boundaryFullyCovered = !0));
        return !0
    },
    step: function (a) {
        a = this._followedNode.x;
        var b = this._followedNode.y;
        a = this._halfScreenSize.x - a;
        b = this._halfScreenSize.y - b;
        this.target._renderCmd._dirtyFlag = 0;
        this._boundarySet ? this._boundaryFullyCovered || this.target.setPosition(cc.clampf(a, this.leftBoundary, this.rightBoundary), cc.clampf(b, this.bottomBoundary, this.topBoundary)) : this.target.setPosition(a,
            b)
    },
    isDone: function () {
        return !this._followedNode.running
    },
    stop: function () {
        this.target = null;
        cc.Action.prototype.stop.call(this)
    }
});
cc.follow = function (a, b) {
    return new cc.Follow(a, b)
};
cc.Follow.create = cc.follow;
cc.ActionInterval = cc.FiniteTimeAction.extend({
    _elapsed: 0,
    _firstTick: !1,
    _easeList: null,
    _timesForRepeat: 1,
    _repeatForever: !1,
    _repeatMethod: !1,
    _speed: 1,
    _speedMethod: !1,
    ctor: function (a) {
        this._timesForRepeat = this._speed = 1;
        this._repeatForever = !1;
        this.MAX_VALUE = 2;
        this._speedMethod = this._repeatMethod = !1;
        cc.FiniteTimeAction.prototype.ctor.call(this);
        void 0 !== a && this.initWithDuration(a)
    },
    getElapsed: function () {
        return this._elapsed
    },
    initWithDuration: function (a) {
        this._duration = 0 === a ? cc.FLT_EPSILON : a;
        this._elapsed =
            0;
        return this._firstTick = !0
    },
    isDone: function () {
        return this._elapsed >= this._duration
    },
    _cloneDecoration: function (a) {
        a._repeatForever = this._repeatForever;
        a._speed = this._speed;
        a._timesForRepeat = this._timesForRepeat;
        a._easeList = this._easeList;
        a._speedMethod = this._speedMethod;
        a._repeatMethod = this._repeatMethod
    },
    _reverseEaseList: function (a) {
        if (this._easeList) {
            a._easeList = [];
            for (var b = 0; b < this._easeList.length; b++) a._easeList.push(this._easeList[b].reverse())
        }
    },
    clone: function () {
        var a = new cc.ActionInterval(this._duration);
        this._cloneDecoration(a);
        return a
    },
    easing: function (a) {
        this._easeList ? this._easeList.length = 0 : this._easeList = [];
        for (var b = 0; b < arguments.length; b++) this._easeList.push(arguments[b]);
        return this
    },
    _computeEaseTime: function (a) {
        var b = this._easeList;
        if (!b || 0 === b.length) return a;
        for (var c = 0, d = b.length; c < d; c++) a = b[c].easing(a);
        return a
    },
    step: function (a) {
        this._firstTick ? (this._firstTick = !1, this._elapsed = 0) : this._elapsed += a;
        a = this._elapsed / (1.192092896E-7 < this._duration ? this._duration : 1.192092896E-7);
        a = 1 > a ?
            a : 1;
        this.update(0 < a ? a : 0);
        this._repeatMethod && (1 < this._timesForRepeat && this.isDone()) && (this._repeatForever || this._timesForRepeat--, this.startWithTarget(this.target), this.step(this._elapsed - this._duration))
    },
    startWithTarget: function (a) {
        cc.Action.prototype.startWithTarget.call(this, a);
        this._elapsed = 0;
        this._firstTick = !0
    },
    reverse: function () {
        cc.log("cc.IntervalAction: reverse not implemented.");
        return null
    },
    setAmplitudeRate: function (a) {
        cc.log("cc.ActionInterval.setAmplitudeRate(): it should be overridden in subclass.")
    },
    getAmplitudeRate: function () {
        cc.log("cc.ActionInterval.getAmplitudeRate(): it should be overridden in subclass.");
        return 0
    },
    speed: function (a) {
        if (0 >= a) return cc.log("The speed parameter error"), this;
        this._speedMethod = !0;
        this._speed *= a;
        return this
    },
    getSpeed: function () {
        return this._speed
    },
    setSpeed: function (a) {
        this._speed = a;
        return this
    },
    repeat: function (a) {
        a = Math.round(a);
        if (isNaN(a) || 1 > a) return cc.log("The repeat parameter error"), this;
        this._repeatMethod = !0;
        this._timesForRepeat *= a;
        return this
    },
    repeatForever: function () {
        this._repeatMethod = !0;
        this._timesForRepeat = this.MAX_VALUE;
        this._repeatForever = !0;
        return this
    }
});
cc.actionInterval = function (a) {
    return new cc.ActionInterval(a)
};
cc.ActionInterval.create = cc.actionInterval;
cc.Sequence = cc.ActionInterval.extend({
    _actions: null,
    _split: null,
    _last: 0,
    ctor: function (a) {
        cc.ActionInterval.prototype.ctor.call(this);
        this._actions = [];
        var b = a instanceof Array ? a : arguments,
            c = b.length - 1;
        0 <= c && null == b[c] && cc.log("parameters should not be ending with null in Javascript");
        if (0 <= c) {
            for (var d = b[0], f = 1; f < c; f++) b[f] && (d = cc.Sequence._actionOneTwo(d, b[f]));
            this.initWithTwoActions(d, b[c])
        }
    },
    initWithTwoActions: function (a, b) {
        if (!a || !b) throw Error("cc.Sequence.initWithTwoActions(): arguments must all be non nil");
        this.initWithDuration(a._duration + b._duration);
        this._actions[0] = a;
        this._actions[1] = b;
        return !0
    },
    clone: function () {
        var a = new cc.Sequence;
        this._cloneDecoration(a);
        a.initWithTwoActions(this._actions[0].clone(), this._actions[1].clone());
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        this._split = this._actions[0]._duration / this._duration;
        this._last = -1
    },
    stop: function () {
        -1 !== this._last && this._actions[this._last].stop();
        cc.Action.prototype.stop.call(this)
    },
    update: function (a) {
        var b =
            0,
            c = this._split,
            d = this._actions,
            f = this._last;
        a = this._computeEaseTime(a);
        a < c ? (a = 0 !== c ? a / c : 1, 0 === b && 1 === f && (d[1].update(0), d[1].stop())) : (b = 1, a = 1 === c ? 1 : (a - c) / (1 - c), -1 === f && (d[0].startWithTarget(this.target), d[0].update(1), d[0].stop()), f || (d[0].update(1), d[0].stop()));
        d = d[b];
        f === b && d.isDone() || (f !== b && d.startWithTarget(this.target), a *= d._timesForRepeat, d.update(1 < a ? a % 1 : a), this._last = b)
    },
    reverse: function () {
        var a = cc.Sequence._actionOneTwo(this._actions[1].reverse(), this._actions[0].reverse());
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    }
});
cc.sequence = function (a) {
    var b = a instanceof Array ? a : arguments;
    0 < b.length && null == b[b.length - 1] && cc.log("parameters should not be ending with null in Javascript");
    for (var c, d, f, g; b && 0 < b.length;) {
        d = Array.prototype.shift.call(b);
        g = d._timesForRepeat || 1;
        d._repeatMethod = !1;
        d._timesForRepeat = 1;
        f = 0;
        c || (c = d, f = 1);
        for (f; f < g; f++) c = cc.Sequence._actionOneTwo(c, d)
    }
    return c
};
cc.Sequence.create = cc.sequence;
cc.Sequence._actionOneTwo = function (a, b) {
    var c = new cc.Sequence;
    c.initWithTwoActions(a, b);
    return c
};
cc.Repeat = cc.ActionInterval.extend({
    _times: 0,
    _total: 0,
    _nextDt: 0,
    _actionInstant: !1,
    _innerAction: null,
    ctor: function (a, b) {
        cc.ActionInterval.prototype.ctor.call(this);
        void 0 !== b && this.initWithAction(a, b)
    },
    initWithAction: function (a, b) {
        return this.initWithDuration(a._duration * b) ? (this._times = b, this._innerAction = a, a instanceof cc.ActionInstant && (this._actionInstant = !0, this._times -= 1), this._total = 0, !0) : !1
    },
    clone: function () {
        var a = new cc.Repeat;
        this._cloneDecoration(a);
        a.initWithAction(this._innerAction.clone(),
            this._times);
        return a
    },
    startWithTarget: function (a) {
        this._total = 0;
        this._nextDt = this._innerAction._duration / this._duration;
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        this._innerAction.startWithTarget(a)
    },
    stop: function () {
        this._innerAction.stop();
        cc.Action.prototype.stop.call(this)
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        var b = this._innerAction,
            c = this._duration,
            d = this._times,
            f = this._nextDt;
        if (a >= f) {
            for (; a > f && this._total < d;) b.update(1), this._total++, b.stop(), b.startWithTarget(this.target),
                this._nextDt = f += b._duration / c;
            1 <= a && this._total < d && this._total++;
            this._actionInstant || (this._total === d ? (b.update(1), b.stop()) : b.update(a - (f - b._duration / c)))
        } else b.update(a * d % 1)
    },
    isDone: function () {
        return this._total === this._times
    },
    reverse: function () {
        var a = new cc.Repeat(this._innerAction.reverse(), this._times);
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    },
    setInnerAction: function (a) {
        this._innerAction !== a && (this._innerAction = a)
    },
    getInnerAction: function () {
        return this._innerAction
    }
});
cc.repeat = function (a, b) {
    return new cc.Repeat(a, b)
};
cc.Repeat.create = cc.repeat;
cc.RepeatForever = cc.ActionInterval.extend({
    _innerAction: null,
    ctor: function (a) {
        cc.ActionInterval.prototype.ctor.call(this);
        this._innerAction = null;
        a && this.initWithAction(a)
    },
    initWithAction: function (a) {
        if (!a) throw Error("cc.RepeatForever.initWithAction(): action must be non null");
        this._innerAction = a;
        return !0
    },
    clone: function () {
        var a = new cc.RepeatForever;
        this._cloneDecoration(a);
        a.initWithAction(this._innerAction.clone());
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this,
            a);
        this._innerAction.startWithTarget(a)
    },
    step: function (a) {
        var b = this._innerAction;
        b.step(a);
        b.isDone() && (b.startWithTarget(this.target), b.step(b.getElapsed() - b._duration))
    },
    isDone: function () {
        return !1
    },
    reverse: function () {
        var a = new cc.RepeatForever(this._innerAction.reverse());
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    },
    setInnerAction: function (a) {
        this._innerAction !== a && (this._innerAction = a)
    },
    getInnerAction: function () {
        return this._innerAction
    }
});
cc.repeatForever = function (a) {
    return new cc.RepeatForever(a)
};
cc.RepeatForever.create = cc.repeatForever;
cc.Spawn = cc.ActionInterval.extend({
    _one: null,
    _two: null,
    ctor: function (a) {
        cc.ActionInterval.prototype.ctor.call(this);
        this._two = this._one = null;
        var b, c, d;
        if (a instanceof Array) c = a;
        else {
            c = Array(arguments.length);
            for (b = 0; b < arguments.length; ++b) c[b] = arguments[b]
        }
        d = c.length - 1;
        0 <= d && null == c[d] && cc.log("parameters should not be ending with null in Javascript");
        if (0 <= d) {
            var f = c[0];
            for (b = 1; b < d; b++) c[b] && (f = cc.Spawn._actionOneTwo(f, c[b]));
            this.initWithTwoActions(f, c[d])
        }
    },
    initWithTwoActions: function (a, b) {
        if (!a ||
            !b) throw Error("cc.Spawn.initWithTwoActions(): arguments must all be non null");
        var c = !1,
            d = a._duration,
            f = b._duration;
        this.initWithDuration(Math.max(d, f)) && (this._one = a, this._two = b, d > f ? this._two = cc.Sequence._actionOneTwo(b, cc.delayTime(d - f)) : d < f && (this._one = cc.Sequence._actionOneTwo(a, cc.delayTime(f - d))), c = !0);
        return c
    },
    clone: function () {
        var a = new cc.Spawn;
        this._cloneDecoration(a);
        a.initWithTwoActions(this._one.clone(), this._two.clone());
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this,
            a);
        this._one.startWithTarget(a);
        this._two.startWithTarget(a)
    },
    stop: function () {
        this._one.stop();
        this._two.stop();
        cc.Action.prototype.stop.call(this)
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        this._one && this._one.update(a);
        this._two && this._two.update(a)
    },
    reverse: function () {
        var a = cc.Spawn._actionOneTwo(this._one.reverse(), this._two.reverse());
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    }
});
cc.spawn = function (a) {
    var b = a instanceof Array ? a : arguments;
    0 < b.length && null == b[b.length - 1] && cc.log("parameters should not be ending with null in Javascript");
    for (var c = b[0], d = 1; d < b.length; d++) null != b[d] && (c = cc.Spawn._actionOneTwo(c, b[d]));
    return c
};
cc.Spawn.create = cc.spawn;
cc.Spawn._actionOneTwo = function (a, b) {
    var c = new cc.Spawn;
    c.initWithTwoActions(a, b);
    return c
};
cc.RotateTo = cc.ActionInterval.extend({
    _dstAngleX: 0,
    _startAngleX: 0,
    _diffAngleX: 0,
    _dstAngleY: 0,
    _startAngleY: 0,
    _diffAngleY: 0,
    ctor: function (a, b, c) {
        cc.ActionInterval.prototype.ctor.call(this);
        void 0 !== b && this.initWithDuration(a, b, c)
    },
    initWithDuration: function (a, b, c) {
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (this._dstAngleX = b || 0, this._dstAngleY = c || this._dstAngleX, !0) : !1
    },
    clone: function () {
        var a = new cc.RotateTo;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._dstAngleX,
            this._dstAngleY);
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        var b = a.rotationX % 360,
            c = this._dstAngleX - b;
        180 < c && (c -= 360); - 180 > c && (c += 360);
        this._startAngleX = b;
        this._diffAngleX = c;
        this._startAngleY = a.rotationY % 360;
        a = this._dstAngleY - this._startAngleY;
        180 < a && (a -= 360); - 180 > a && (a += 360);
        this._diffAngleY = a
    },
    reverse: function () {
        cc.log("cc.RotateTo.reverse(): it should be overridden in subclass.")
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        this.target && (this.target.rotationX =
            this._startAngleX + this._diffAngleX * a, this.target.rotationY = this._startAngleY + this._diffAngleY * a)
    }
});
cc.rotateTo = function (a, b, c) {
    return new cc.RotateTo(a, b, c)
};
cc.RotateTo.create = cc.rotateTo;
cc.RotateBy = cc.ActionInterval.extend({
    _angleX: 0,
    _startAngleX: 0,
    _angleY: 0,
    _startAngleY: 0,
    ctor: function (a, b, c) {
        cc.ActionInterval.prototype.ctor.call(this);
        void 0 !== b && this.initWithDuration(a, b, c)
    },
    initWithDuration: function (a, b, c) {
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (this._angleX = b || 0, this._angleY = c || this._angleX, !0) : !1
    },
    clone: function () {
        var a = new cc.RotateBy;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._angleX, this._angleY);
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this,
            a);
        this._startAngleX = a.rotationX;
        this._startAngleY = a.rotationY
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        this.target && (this.target.rotationX = this._startAngleX + this._angleX * a, this.target.rotationY = this._startAngleY + this._angleY * a)
    },
    reverse: function () {
        var a = new cc.RotateBy(this._duration, -this._angleX, -this._angleY);
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    }
});
cc.rotateBy = function (a, b, c) {
    return new cc.RotateBy(a, b, c)
};
cc.RotateBy.create = cc.rotateBy;
cc.MoveBy = cc.ActionInterval.extend({
    _positionDelta: null,
    _startPosition: null,
    _previousPosition: null,
    ctor: function (a, b, c) {
        cc.ActionInterval.prototype.ctor.call(this);
        this._positionDelta = cc.p(0, 0);
        this._startPosition = cc.p(0, 0);
        this._previousPosition = cc.p(0, 0);
        void 0 !== b && this.initWithDuration(a, b, c)
    },
    initWithDuration: function (a, b, c) {
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (void 0 !== b.x && (c = b.y, b = b.x), this._positionDelta.x = b, this._positionDelta.y = c, !0) : !1
    },
    clone: function () {
        var a =
            new cc.MoveBy;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._positionDelta);
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        var b = a.getPositionX();
        a = a.getPositionY();
        this._previousPosition.x = b;
        this._previousPosition.y = a;
        this._startPosition.x = b;
        this._startPosition.y = a
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        if (this.target) {
            var b = this._positionDelta.x * a;
            a *= this._positionDelta.y;
            var c = this._startPosition;
            if (cc.ENABLE_STACKABLE_ACTIONS) {
                var d =
                    this.target.getPositionX(),
                    f = this.target.getPositionY(),
                    g = this._previousPosition;
                c.x = c.x + d - g.x;
                c.y = c.y + f - g.y;
                b += c.x;
                a += c.y;
                g.x = b;
                g.y = a;
                this.target.setPosition(b, a)
            } else this.target.setPosition(c.x + b, c.y + a)
        }
    },
    reverse: function () {
        var a = new cc.MoveBy(this._duration, cc.p(-this._positionDelta.x, -this._positionDelta.y));
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    }
});
cc.moveBy = function (a, b, c) {
    return new cc.MoveBy(a, b, c)
};
cc.MoveBy.create = cc.moveBy;
cc.MoveTo = cc.MoveBy.extend({
    _endPosition: null,
    ctor: function (a, b, c) {
        cc.MoveBy.prototype.ctor.call(this);
        this._endPosition = cc.p(0, 0);
        void 0 !== b && this.initWithDuration(a, b, c)
    },
    initWithDuration: function (a, b, c) {
        return cc.MoveBy.prototype.initWithDuration.call(this, a, b, c) ? (void 0 !== b.x && (c = b.y, b = b.x), this._endPosition.x = b, this._endPosition.y = c, !0) : !1
    },
    clone: function () {
        var a = new cc.MoveTo;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._endPosition);
        return a
    },
    startWithTarget: function (a) {
        cc.MoveBy.prototype.startWithTarget.call(this,
            a);
        this._positionDelta.x = this._endPosition.x - a.getPositionX();
        this._positionDelta.y = this._endPosition.y - a.getPositionY()
    }
});
cc.moveTo = function (a, b, c) {
    return new cc.MoveTo(a, b, c)
};
cc.MoveTo.create = cc.moveTo;
cc.SkewTo = cc.ActionInterval.extend({
    _skewX: 0,
    _skewY: 0,
    _startSkewX: 0,
    _startSkewY: 0,
    _endSkewX: 0,
    _endSkewY: 0,
    _deltaX: 0,
    _deltaY: 0,
    ctor: function (a, b, c) {
        cc.ActionInterval.prototype.ctor.call(this);
        void 0 !== c && this.initWithDuration(a, b, c)
    },
    initWithDuration: function (a, b, c) {
        var d = !1;
        cc.ActionInterval.prototype.initWithDuration.call(this, a) && (this._endSkewX = b, this._endSkewY = c, d = !0);
        return d
    },
    clone: function () {
        var a = new cc.SkewTo;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._endSkewX, this._endSkewY);
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        this._startSkewX = a.skewX % 180;
        this._deltaX = this._endSkewX - this._startSkewX;
        180 < this._deltaX && (this._deltaX -= 360); - 180 > this._deltaX && (this._deltaX += 360);
        this._startSkewY = a.skewY % 360;
        this._deltaY = this._endSkewY - this._startSkewY;
        180 < this._deltaY && (this._deltaY -= 360); - 180 > this._deltaY && (this._deltaY += 360)
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        this.target.skewX = this._startSkewX + this._deltaX * a;
        this.target.skewY =
            this._startSkewY + this._deltaY * a
    }
});
cc.skewTo = function (a, b, c) {
    return new cc.SkewTo(a, b, c)
};
cc.SkewTo.create = cc.skewTo;
cc.SkewBy = cc.SkewTo.extend({
    ctor: function (a, b, c) {
        cc.SkewTo.prototype.ctor.call(this);
        void 0 !== c && this.initWithDuration(a, b, c)
    },
    initWithDuration: function (a, b, c) {
        var d = !1;
        cc.SkewTo.prototype.initWithDuration.call(this, a, b, c) && (this._skewX = b, this._skewY = c, d = !0);
        return d
    },
    clone: function () {
        var a = new cc.SkewBy;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._skewX, this._skewY);
        return a
    },
    startWithTarget: function (a) {
        cc.SkewTo.prototype.startWithTarget.call(this, a);
        this._deltaX = this._skewX;
        this._deltaY = this._skewY;
        this._endSkewX = this._startSkewX + this._deltaX;
        this._endSkewY = this._startSkewY + this._deltaY
    },
    reverse: function () {
        var a = new cc.SkewBy(this._duration, -this._skewX, -this._skewY);
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    }
});
cc.skewBy = function (a, b, c) {
    return new cc.SkewBy(a, b, c)
};
cc.SkewBy.create = cc.skewBy;
cc.JumpBy = cc.ActionInterval.extend({
    _startPosition: null,
    _delta: null,
    _height: 0,
    _jumps: 0,
    _previousPosition: null,
    ctor: function (a, b, c, d, f) {
        cc.ActionInterval.prototype.ctor.call(this);
        this._startPosition = cc.p(0, 0);
        this._previousPosition = cc.p(0, 0);
        this._delta = cc.p(0, 0);
        void 0 !== d && this.initWithDuration(a, b, c, d, f)
    },
    initWithDuration: function (a, b, c, d, f) {
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (void 0 === f && (f = d, d = c, c = b.y, b = b.x), this._delta.x = b, this._delta.y = c, this._height = d, this._jumps =
            f, !0) : !1
    },
    clone: function () {
        var a = new cc.JumpBy;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._delta, this._height, this._jumps);
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        var b = a.getPositionX();
        a = a.getPositionY();
        this._previousPosition.x = b;
        this._previousPosition.y = a;
        this._startPosition.x = b;
        this._startPosition.y = a
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        if (this.target) {
            var b = a * this._jumps % 1,
                b = 4 * this._height * b * (1 - b),
                b = b + this._delta.y *
                a;
            a *= this._delta.x;
            var c = this._startPosition;
            if (cc.ENABLE_STACKABLE_ACTIONS) {
                var d = this.target.getPositionX(),
                    f = this.target.getPositionY(),
                    g = this._previousPosition;
                c.x = c.x + d - g.x;
                c.y = c.y + f - g.y;
                a += c.x;
                b += c.y;
                g.x = a;
                g.y = b;
                this.target.setPosition(a, b)
            } else this.target.setPosition(c.x + a, c.y + b)
        }
    },
    reverse: function () {
        var a = new cc.JumpBy(this._duration, cc.p(-this._delta.x, -this._delta.y), this._height, this._jumps);
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    }
});
cc.jumpBy = function (a, b, c, d, f) {
    return new cc.JumpBy(a, b, c, d, f)
};
cc.JumpBy.create = cc.jumpBy;
cc.JumpTo = cc.JumpBy.extend({
    _endPosition: null,
    ctor: function (a, b, c, d, f) {
        cc.JumpBy.prototype.ctor.call(this);
        this._endPosition = cc.p(0, 0);
        void 0 !== d && this.initWithDuration(a, b, c, d, f)
    },
    initWithDuration: function (a, b, c, d, f) {
        return cc.JumpBy.prototype.initWithDuration.call(this, a, b, c, d, f) ? (void 0 === f && (c = b.y, b = b.x), this._endPosition.x = b, this._endPosition.y = c, !0) : !1
    },
    startWithTarget: function (a) {
        cc.JumpBy.prototype.startWithTarget.call(this, a);
        this._delta.x = this._endPosition.x - this._startPosition.x;
        this._delta.y =
            this._endPosition.y - this._startPosition.y
    },
    clone: function () {
        var a = new cc.JumpTo;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._endPosition, this._height, this._jumps);
        return a
    }
});
cc.jumpTo = function (a, b, c, d, f) {
    return new cc.JumpTo(a, b, c, d, f)
};
cc.JumpTo.create = cc.jumpTo;
cc.bezierAt = function (a, b, c, d, f) {
    return Math.pow(1 - f, 3) * a + 3 * f * Math.pow(1 - f, 2) * b + 3 * Math.pow(f, 2) * (1 - f) * c + Math.pow(f, 3) * d
};
cc.BezierBy = cc.ActionInterval.extend({
    _config: null,
    _startPosition: null,
    _previousPosition: null,
    ctor: function (a, b) {
        cc.ActionInterval.prototype.ctor.call(this);
        this._config = [];
        this._startPosition = cc.p(0, 0);
        this._previousPosition = cc.p(0, 0);
        b && this.initWithDuration(a, b)
    },
    initWithDuration: function (a, b) {
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (this._config = b, !0) : !1
    },
    clone: function () {
        var a = new cc.BezierBy;
        this._cloneDecoration(a);
        for (var b = [], c = 0; c < this._config.length; c++) {
            var d =
                this._config[c];
            b.push(cc.p(d.x, d.y))
        }
        a.initWithDuration(this._duration, b);
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        var b = a.getPositionX();
        a = a.getPositionY();
        this._previousPosition.x = b;
        this._previousPosition.y = a;
        this._startPosition.x = b;
        this._startPosition.y = a
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        if (this.target) {
            var b = this._config,
                c = b[0].y,
                d = b[1].y,
                f = b[2].y,
                b = cc.bezierAt(0, b[0].x, b[1].x, b[2].x, a);
            a = cc.bezierAt(0, c, d, f, a);
            c = this._startPosition;
            if (cc.ENABLE_STACKABLE_ACTIONS) {
                var d = this.target.getPositionX(),
                    f = this.target.getPositionY(),
                    g = this._previousPosition;
                c.x = c.x + d - g.x;
                c.y = c.y + f - g.y;
                b += c.x;
                a += c.y;
                g.x = b;
                g.y = a;
                this.target.setPosition(b, a)
            } else this.target.setPosition(c.x + b, c.y + a)
        }
    },
    reverse: function () {
        var a = this._config,
            a = [cc.pAdd(a[1], cc.pNeg(a[2])), cc.pAdd(a[0], cc.pNeg(a[2])), cc.pNeg(a[2])],
            a = new cc.BezierBy(this._duration, a);
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    }
});
cc.bezierBy = function (a, b) {
    return new cc.BezierBy(a, b)
};
cc.BezierBy.create = cc.bezierBy;
cc.BezierTo = cc.BezierBy.extend({
    _toConfig: null,
    ctor: function (a, b) {
        cc.BezierBy.prototype.ctor.call(this);
        this._toConfig = [];
        b && this.initWithDuration(a, b)
    },
    initWithDuration: function (a, b) {
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (this._toConfig = b, !0) : !1
    },
    clone: function () {
        var a = new cc.BezierTo;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._toConfig);
        return a
    },
    startWithTarget: function (a) {
        cc.BezierBy.prototype.startWithTarget.call(this, a);
        a = this._startPosition;
        var b =
            this._toConfig,
            c = this._config;
        c[0] = cc.pSub(b[0], a);
        c[1] = cc.pSub(b[1], a);
        c[2] = cc.pSub(b[2], a)
    }
});
cc.bezierTo = function (a, b) {
    return new cc.BezierTo(a, b)
};
cc.BezierTo.create = cc.bezierTo;
cc.ScaleTo = cc.ActionInterval.extend({
    _scaleX: 1,
    _scaleY: 1,
    _startScaleX: 1,
    _startScaleY: 1,
    _endScaleX: 0,
    _endScaleY: 0,
    _deltaX: 0,
    _deltaY: 0,
    ctor: function (a, b, c) {
        cc.ActionInterval.prototype.ctor.call(this);
        void 0 !== b && this.initWithDuration(a, b, c)
    },
    initWithDuration: function (a, b, c) {
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (this._endScaleX = b, this._endScaleY = null != c ? c : b, !0) : !1
    },
    clone: function () {
        var a = new cc.ScaleTo;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._endScaleX,
            this._endScaleY);
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        this._startScaleX = a.scaleX;
        this._startScaleY = a.scaleY;
        this._deltaX = this._endScaleX - this._startScaleX;
        this._deltaY = this._endScaleY - this._startScaleY
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        this.target && (this.target.scaleX = this._startScaleX + this._deltaX * a, this.target.scaleY = this._startScaleY + this._deltaY * a)
    }
});
cc.scaleTo = function (a, b, c) {
    return new cc.ScaleTo(a, b, c)
};
cc.ScaleTo.create = cc.scaleTo;
cc.ScaleBy = cc.ScaleTo.extend({
    startWithTarget: function (a) {
        cc.ScaleTo.prototype.startWithTarget.call(this, a);
        this._deltaX = this._startScaleX * this._endScaleX - this._startScaleX;
        this._deltaY = this._startScaleY * this._endScaleY - this._startScaleY
    },
    reverse: function () {
        var a = new cc.ScaleBy(this._duration, 1 / this._endScaleX, 1 / this._endScaleY);
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    },
    clone: function () {
        var a = new cc.ScaleBy;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._endScaleX,
            this._endScaleY);
        return a
    }
});
cc.scaleBy = function (a, b, c) {
    return new cc.ScaleBy(a, b, c)
};
cc.ScaleBy.create = cc.scaleBy;
cc.Blink = cc.ActionInterval.extend({
    _times: 0,
    _originalState: !1,
    ctor: function (a, b) {
        cc.ActionInterval.prototype.ctor.call(this);
        void 0 !== b && this.initWithDuration(a, b)
    },
    initWithDuration: function (a, b) {
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (this._times = b, !0) : !1
    },
    clone: function () {
        var a = new cc.Blink;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._times);
        return a
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        if (this.target && !this.isDone()) {
            var b = 1 / this._times;
            this.target.visible =
                a % b > b / 2
        }
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        this._originalState = a.visible
    },
    stop: function () {
        this.target.visible = this._originalState;
        cc.ActionInterval.prototype.stop.call(this)
    },
    reverse: function () {
        var a = new cc.Blink(this._duration, this._times);
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    }
});
cc.blink = function (a, b) {
    return new cc.Blink(a, b)
};
cc.Blink.create = cc.blink;
cc.FadeTo = cc.ActionInterval.extend({
    _toOpacity: 0,
    _fromOpacity: 0,
    ctor: function (a, b) {
        cc.ActionInterval.prototype.ctor.call(this);
        void 0 !== b && this.initWithDuration(a, b)
    },
    initWithDuration: function (a, b) {
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (this._toOpacity = b, !0) : !1
    },
    clone: function () {
        var a = new cc.FadeTo;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._toOpacity);
        return a
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        var b = void 0 !== this._fromOpacity ? this._fromOpacity :
            255;
        this.target.opacity = b + (this._toOpacity - b) * a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        this._fromOpacity = a.opacity
    }
});
cc.fadeTo = function (a, b) {
    return new cc.FadeTo(a, b)
};
cc.FadeTo.create = cc.fadeTo;
cc.FadeIn = cc.FadeTo.extend({
    _reverseAction: null,
    ctor: function (a) {
        cc.FadeTo.prototype.ctor.call(this);
        null == a && (a = 0);
        this.initWithDuration(a, 255)
    },
    reverse: function () {
        var a = new cc.FadeOut;
        a.initWithDuration(this._duration, 0);
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    },
    clone: function () {
        var a = new cc.FadeIn;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._toOpacity);
        return a
    },
    startWithTarget: function (a) {
        this._reverseAction && (this._toOpacity = this._reverseAction._fromOpacity);
        cc.FadeTo.prototype.startWithTarget.call(this, a)
    }
});
cc.fadeIn = function (a) {
    return new cc.FadeIn(a)
};
cc.FadeIn.create = cc.fadeIn;
cc.FadeOut = cc.FadeTo.extend({
    ctor: function (a) {
        cc.FadeTo.prototype.ctor.call(this);
        null == a && (a = 0);
        this.initWithDuration(a, 0)
    },
    reverse: function () {
        var a = new cc.FadeIn;
        a._reverseAction = this;
        a.initWithDuration(this._duration, 255);
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    },
    clone: function () {
        var a = new cc.FadeOut;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._toOpacity);
        return a
    }
});
cc.fadeOut = function (a) {
    return new cc.FadeOut(a)
};
cc.FadeOut.create = cc.fadeOut;
cc.TintTo = cc.ActionInterval.extend({
    _to: null,
    _from: null,
    ctor: function (a, b, c, d) {
        cc.ActionInterval.prototype.ctor.call(this);
        this._to = cc.color(0, 0, 0);
        this._from = cc.color(0, 0, 0);
        void 0 !== d && this.initWithDuration(a, b, c, d)
    },
    initWithDuration: function (a, b, c, d) {
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (this._to = cc.color(b, c, d), !0) : !1
    },
    clone: function () {
        var a = new cc.TintTo;
        this._cloneDecoration(a);
        var b = this._to;
        a.initWithDuration(this._duration, b.r, b.g, b.b);
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this,
            a);
        this._from = this.target.color
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        var b = this._from,
            c = this._to;
        b && this.target.setColor(cc.color(b.r + (c.r - b.r) * a, b.g + (c.g - b.g) * a, b.b + (c.b - b.b) * a))
    }
});
cc.tintTo = function (a, b, c, d) {
    return new cc.TintTo(a, b, c, d)
};
cc.TintTo.create = cc.tintTo;
cc.TintBy = cc.ActionInterval.extend({
    _deltaR: 0,
    _deltaG: 0,
    _deltaB: 0,
    _fromR: 0,
    _fromG: 0,
    _fromB: 0,
    ctor: function (a, b, c, d) {
        cc.ActionInterval.prototype.ctor.call(this);
        void 0 !== d && this.initWithDuration(a, b, c, d)
    },
    initWithDuration: function (a, b, c, d) {
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (this._deltaR = b, this._deltaG = c, this._deltaB = d, !0) : !1
    },
    clone: function () {
        var a = new cc.TintBy;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration, this._deltaR, this._deltaG, this._deltaB);
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        a = a.color;
        this._fromR = a.r;
        this._fromG = a.g;
        this._fromB = a.b
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        this.target.color = cc.color(this._fromR + this._deltaR * a, this._fromG + this._deltaG * a, this._fromB + this._deltaB * a)
    },
    reverse: function () {
        var a = new cc.TintBy(this._duration, -this._deltaR, -this._deltaG, -this._deltaB);
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    }
});
cc.tintBy = function (a, b, c, d) {
    return new cc.TintBy(a, b, c, d)
};
cc.TintBy.create = cc.tintBy;
cc.DelayTime = cc.ActionInterval.extend({
    update: function (a) {},
    reverse: function () {
        var a = new cc.DelayTime(this._duration);
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    },
    clone: function () {
        var a = new cc.DelayTime;
        this._cloneDecoration(a);
        a.initWithDuration(this._duration);
        return a
    }
});
cc.delayTime = function (a) {
    return new cc.DelayTime(a)
};
cc.DelayTime.create = cc.delayTime;
cc.ReverseTime = cc.ActionInterval.extend({
    _other: null,
    ctor: function (a) {
        cc.ActionInterval.prototype.ctor.call(this);
        this._other = null;
        a && this.initWithAction(a)
    },
    initWithAction: function (a) {
        if (!a) throw Error("cc.ReverseTime.initWithAction(): action must be non null");
        if (a === this._other) throw Error("cc.ReverseTime.initWithAction(): the action was already passed in.");
        return cc.ActionInterval.prototype.initWithDuration.call(this, a._duration) ? (this._other = a, !0) : !1
    },
    clone: function () {
        var a = new cc.ReverseTime;
        this._cloneDecoration(a);
        a.initWithAction(this._other.clone());
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        this._other.startWithTarget(a)
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        this._other && this._other.update(1 - a)
    },
    reverse: function () {
        return this._other.clone()
    },
    stop: function () {
        this._other.stop();
        cc.Action.prototype.stop.call(this)
    }
});
cc.reverseTime = function (a) {
    return new cc.ReverseTime(a)
};
cc.ReverseTime.create = cc.reverseTime;
cc.Animate = cc.ActionInterval.extend({
    _animation: null,
    _nextFrame: 0,
    _origFrame: null,
    _executedLoops: 0,
    _splitTimes: null,
    _currFrameIndex: 0,
    ctor: function (a) {
        cc.ActionInterval.prototype.ctor.call(this);
        this._splitTimes = [];
        a && this.initWithAnimation(a)
    },
    getAnimation: function () {
        return this._animation
    },
    setAnimation: function (a) {
        this._animation = a
    },
    getCurrentFrameIndex: function () {
        return this._currFrameIndex
    },
    initWithAnimation: function (a) {
        if (!a) throw Error("cc.Animate.initWithAnimation(): animation must be non-NULL");
        var b = a.getDuration();
        if (this.initWithDuration(b * a.getLoops())) {
            this._nextFrame = 0;
            this.setAnimation(a);
            this._origFrame = null;
            this._executedLoops = 0;
            var c = this._splitTimes,
                d = c.length = 0,
                f = b / a.getTotalDelayUnits();
            a = a.getFrames();
            cc.arrayVerifyType(a, cc.AnimationFrame);
            for (var g = 0; g < a.length; g++) {
                var h = d * f / b,
                    d = d + a[g].getDelayUnits();
                c.push(h)
            }
            return !0
        }
        return !1
    },
    clone: function () {
        var a = new cc.Animate;
        this._cloneDecoration(a);
        a.initWithAnimation(this._animation.clone());
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this,
            a);
        this._animation.getRestoreOriginalFrame() && (this._origFrame = a.getSpriteFrame());
        this._executedLoops = this._nextFrame = 0
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        1 > a && (a *= this._animation.getLoops(), (0 | a) > this._executedLoops && (this._nextFrame = 0, this._executedLoops++), a %= 1);
        for (var b = this._animation.getFrames(), c = b.length, d = this._splitTimes, f = this._nextFrame; f < c; f++)
            if (d[f] <= a) _currFrameIndex = f, this.target.setSpriteFrame(b[_currFrameIndex].getSpriteFrame()), this._nextFrame = f + 1;
            else break
    },
    reverse: function () {
        var a =
            this._animation,
            b = a.getFrames(),
            c = [];
        cc.arrayVerifyType(b, cc.AnimationFrame);
        if (0 < b.length)
            for (var d = b.length - 1; 0 <= d; d--) {
                var f = b[d];
                if (!f) break;
                c.push(f.clone())
            }
        b = new cc.Animation(c, a.getDelayPerUnit(), a.getLoops());
        b.setRestoreOriginalFrame(a.getRestoreOriginalFrame());
        a = new cc.Animate(b);
        this._cloneDecoration(a);
        this._reverseEaseList(a);
        return a
    },
    stop: function () {
        this._animation.getRestoreOriginalFrame() && this.target && this.target.setSpriteFrame(this._origFrame);
        cc.Action.prototype.stop.call(this)
    }
});
cc.animate = function (a) {
    return new cc.Animate(a)
};
cc.Animate.create = cc.animate;
cc.TargetedAction = cc.ActionInterval.extend({
    _action: null,
    _forcedTarget: null,
    ctor: function (a, b) {
        cc.ActionInterval.prototype.ctor.call(this);
        b && this.initWithTarget(a, b)
    },
    initWithTarget: function (a, b) {
        return this.initWithDuration(b._duration) ? (this._forcedTarget = a, this._action = b, !0) : !1
    },
    clone: function () {
        var a = new cc.TargetedAction;
        this._cloneDecoration(a);
        a.initWithTarget(this._forcedTarget, this._action.clone());
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        this._action.startWithTarget(this._forcedTarget)
    },
    stop: function () {
        this._action.stop()
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        this._action.update(a)
    },
    getForcedTarget: function () {
        return this._forcedTarget
    },
    setForcedTarget: function (a) {
        this._forcedTarget !== a && (this._forcedTarget = a)
    }
});
cc.targetedAction = function (a, b) {
    return new cc.TargetedAction(a, b)
};
cc.TargetedAction.create = cc.targetedAction;
cc.ActionInstant = cc.FiniteTimeAction.extend({
    isDone: function () {
        return !0
    },
    step: function (a) {
        this.update(1)
    },
    update: function (a) {},
    reverse: function () {
        return this.clone()
    },
    clone: function () {
        return new cc.ActionInstant
    }
});
cc.Show = cc.ActionInstant.extend({
    update: function (a) {
        this.target.visible = !0
    },
    reverse: function () {
        return new cc.Hide
    },
    clone: function () {
        return new cc.Show
    }
});
cc.show = function () {
    return new cc.Show
};
cc.Show.create = cc.show;
cc.Hide = cc.ActionInstant.extend({
    update: function (a) {
        this.target.visible = !1
    },
    reverse: function () {
        return new cc.Show
    },
    clone: function () {
        return new cc.Hide
    }
});
cc.hide = function () {
    return new cc.Hide
};
cc.Hide.create = cc.hide;
cc.ToggleVisibility = cc.ActionInstant.extend({
    update: function (a) {
        this.target.visible = !this.target.visible
    },
    reverse: function () {
        return new cc.ToggleVisibility
    },
    clone: function () {
        return new cc.ToggleVisibility
    }
});
cc.toggleVisibility = function () {
    return new cc.ToggleVisibility
};
cc.ToggleVisibility.create = cc.toggleVisibility;
cc.RemoveSelf = cc.ActionInstant.extend({
    _isNeedCleanUp: !0,
    ctor: function (a) {
        cc.FiniteTimeAction.prototype.ctor.call(this);
        void 0 !== a && this.init(a)
    },
    update: function (a) {
        this.target.removeFromParent(this._isNeedCleanUp)
    },
    init: function (a) {
        this._isNeedCleanUp = a;
        return !0
    },
    reverse: function () {
        return new cc.RemoveSelf(this._isNeedCleanUp)
    },
    clone: function () {
        return new cc.RemoveSelf(this._isNeedCleanUp)
    }
});
cc.removeSelf = function (a) {
    return new cc.RemoveSelf(a)
};
cc.RemoveSelf.create = cc.removeSelf;
cc.FlipX = cc.ActionInstant.extend({
    _flippedX: !1,
    ctor: function (a) {
        cc.FiniteTimeAction.prototype.ctor.call(this);
        this._flippedX = !1;
        void 0 !== a && this.initWithFlipX(a)
    },
    initWithFlipX: function (a) {
        this._flippedX = a;
        return !0
    },
    update: function (a) {
        this.target.flippedX = this._flippedX
    },
    reverse: function () {
        return new cc.FlipX(!this._flippedX)
    },
    clone: function () {
        var a = new cc.FlipX;
        a.initWithFlipX(this._flippedX);
        return a
    }
});
cc.flipX = function (a) {
    return new cc.FlipX(a)
};
cc.FlipX.create = cc.flipX;
cc.FlipY = cc.ActionInstant.extend({
    _flippedY: !1,
    ctor: function (a) {
        cc.FiniteTimeAction.prototype.ctor.call(this);
        this._flippedY = !1;
        void 0 !== a && this.initWithFlipY(a)
    },
    initWithFlipY: function (a) {
        this._flippedY = a;
        return !0
    },
    update: function (a) {
        this.target.flippedY = this._flippedY
    },
    reverse: function () {
        return new cc.FlipY(!this._flippedY)
    },
    clone: function () {
        var a = new cc.FlipY;
        a.initWithFlipY(this._flippedY);
        return a
    }
});
cc.flipY = function (a) {
    return new cc.FlipY(a)
};
cc.FlipY.create = cc.flipY;
cc.Place = cc.ActionInstant.extend({
    _x: 0,
    _y: 0,
    ctor: function (a, b) {
        cc.FiniteTimeAction.prototype.ctor.call(this);
        this._y = this._x = 0;
        void 0 !== a && (void 0 !== a.x && (b = a.y, a = a.x), this.initWithPosition(a, b))
    },
    initWithPosition: function (a, b) {
        this._x = a;
        this._y = b;
        return !0
    },
    update: function (a) {
        this.target.setPosition(this._x, this._y)
    },
    clone: function () {
        var a = new cc.Place;
        a.initWithPosition(this._x, this._y);
        return a
    }
});
cc.place = function (a, b) {
    return new cc.Place(a, b)
};
cc.Place.create = cc.place;
cc.CallFunc = cc.ActionInstant.extend({
    _selectorTarget: null,
    _function: null,
    _data: null,
    ctor: function (a, b, c) {
        cc.FiniteTimeAction.prototype.ctor.call(this);
        this.initWithFunction(a, b, c)
    },
    initWithFunction: function (a, b, c) {
        a && (this._function = a);
        b && (this._selectorTarget = b);
        void 0 !== c && (this._data = c);
        return !0
    },
    execute: function () {
        this._function && this._function.call(this._selectorTarget, this.target, this._data)
    },
    update: function (a) {
        this.execute()
    },
    getTargetCallback: function () {
        return this._selectorTarget
    },
    setTargetCallback: function (a) {
        a !==
            this._selectorTarget && (this._selectorTarget && (this._selectorTarget = null), this._selectorTarget = a)
    },
    clone: function () {
        var a = new cc.CallFunc;
        a.initWithFunction(this._function, this._selectorTarget, this._data);
        return a
    }
});
cc.callFunc = function (a, b, c) {
    return new cc.CallFunc(a, b, c)
};
cc.CallFunc.create = cc.callFunc;
cc.ActionEase = cc.ActionInterval.extend({
    _inner: null,
    ctor: function (a) {
        cc.ActionInterval.prototype.ctor.call(this);
        a && this.initWithAction(a)
    },
    initWithAction: function (a) {
        if (!a) throw Error("cc.ActionEase.initWithAction(): action must be non nil");
        return this.initWithDuration(a.getDuration()) ? (this._inner = a, !0) : !1
    },
    clone: function () {
        var a = new cc.ActionEase;
        a.initWithAction(this._inner.clone());
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        this._inner.startWithTarget(this.target)
    },
    stop: function () {
        this._inner.stop();
        cc.ActionInterval.prototype.stop.call(this)
    },
    update: function (a) {
        this._inner.update(a)
    },
    reverse: function () {
        return new cc.ActionEase(this._inner.reverse())
    },
    getInnerAction: function () {
        return this._inner
    }
});
cc.actionEase = function (a) {
    return new cc.ActionEase(a)
};
cc.ActionEase.create = cc.actionEase;
cc.EaseRateAction = cc.ActionEase.extend({
    _rate: 0,
    ctor: function (a, b) {
        cc.ActionEase.prototype.ctor.call(this);
        void 0 !== b && this.initWithAction(a, b)
    },
    setRate: function (a) {
        this._rate = a
    },
    getRate: function () {
        return this._rate
    },
    initWithAction: function (a, b) {
        return cc.ActionEase.prototype.initWithAction.call(this, a) ? (this._rate = b, !0) : !1
    },
    clone: function () {
        var a = new cc.EaseRateAction;
        a.initWithAction(this._inner.clone(), this._rate);
        return a
    },
    reverse: function () {
        return new cc.EaseRateAction(this._inner.reverse(),
            1 / this._rate)
    }
});
cc.easeRateAction = function (a, b) {
    return new cc.EaseRateAction(a, b)
};
cc.EaseRateAction.create = cc.easeRateAction;
cc.EaseIn = cc.EaseRateAction.extend({
    update: function (a) {
        this._inner.update(Math.pow(a, this._rate))
    },
    reverse: function () {
        return new cc.EaseIn(this._inner.reverse(), 1 / this._rate)
    },
    clone: function () {
        var a = new cc.EaseIn;
        a.initWithAction(this._inner.clone(), this._rate);
        return a
    }
});
cc.EaseIn.create = function (a, b) {
    return new cc.EaseIn(a, b)
};
cc.easeIn = function (a) {
    return {
        _rate: a,
        easing: function (a) {
            return Math.pow(a, this._rate)
        },
        reverse: function () {
            return cc.easeIn(1 / this._rate)
        }
    }
};
cc.EaseOut = cc.EaseRateAction.extend({
    update: function (a) {
        this._inner.update(Math.pow(a, 1 / this._rate))
    },
    reverse: function () {
        return new cc.EaseOut(this._inner.reverse(), 1 / this._rate)
    },
    clone: function () {
        var a = new cc.EaseOut;
        a.initWithAction(this._inner.clone(), this._rate);
        return a
    }
});
cc.EaseOut.create = function (a, b) {
    return new cc.EaseOut(a, b)
};
cc.easeOut = function (a) {
    return {
        _rate: a,
        easing: function (a) {
            return Math.pow(a, 1 / this._rate)
        },
        reverse: function () {
            return cc.easeOut(1 / this._rate)
        }
    }
};
cc.EaseInOut = cc.EaseRateAction.extend({
    update: function (a) {
        a *= 2;
        1 > a ? this._inner.update(0.5 * Math.pow(a, this._rate)) : this._inner.update(1 - 0.5 * Math.pow(2 - a, this._rate))
    },
    clone: function () {
        var a = new cc.EaseInOut;
        a.initWithAction(this._inner.clone(), this._rate);
        return a
    },
    reverse: function () {
        return new cc.EaseInOut(this._inner.reverse(), this._rate)
    }
});
cc.EaseInOut.create = function (a, b) {
    return new cc.EaseInOut(a, b)
};
cc.easeInOut = function (a) {
    return {
        _rate: a,
        easing: function (a) {
            a *= 2;
            return 1 > a ? 0.5 * Math.pow(a, this._rate) : 1 - 0.5 * Math.pow(2 - a, this._rate)
        },
        reverse: function () {
            return cc.easeInOut(this._rate)
        }
    }
};
cc.EaseExponentialIn = cc.ActionEase.extend({
    update: function (a) {
        this._inner.update(0 === a ? 0 : Math.pow(2, 10 * (a - 1)))
    },
    reverse: function () {
        return new cc.EaseExponentialOut(this._inner.reverse())
    },
    clone: function () {
        var a = new cc.EaseExponentialIn;
        a.initWithAction(this._inner.clone());
        return a
    }
});
cc.EaseExponentialIn.create = function (a) {
    return new cc.EaseExponentialIn(a)
};
cc._easeExponentialInObj = {
    easing: function (a) {
        return 0 === a ? 0 : Math.pow(2, 10 * (a - 1))
    },
    reverse: function () {
        return cc._easeExponentialOutObj
    }
};
cc.easeExponentialIn = function () {
    return cc._easeExponentialInObj
};
cc.EaseExponentialOut = cc.ActionEase.extend({
    update: function (a) {
        this._inner.update(1 === a ? 1 : -Math.pow(2, -10 * a) + 1)
    },
    reverse: function () {
        return new cc.EaseExponentialIn(this._inner.reverse())
    },
    clone: function () {
        var a = new cc.EaseExponentialOut;
        a.initWithAction(this._inner.clone());
        return a
    }
});
cc.EaseExponentialOut.create = function (a) {
    return new cc.EaseExponentialOut(a)
};
cc._easeExponentialOutObj = {
    easing: function (a) {
        return 1 === a ? 1 : -Math.pow(2, -10 * a) + 1
    },
    reverse: function () {
        return cc._easeExponentialInObj
    }
};
cc.easeExponentialOut = function () {
    return cc._easeExponentialOutObj
};
cc.EaseExponentialInOut = cc.ActionEase.extend({
    update: function (a) {
        1 !== a && 0 !== a && (a *= 2, a = 1 > a ? 0.5 * Math.pow(2, 10 * (a - 1)) : 0.5 * (-Math.pow(2, -10 * (a - 1)) + 2));
        this._inner.update(a)
    },
    reverse: function () {
        return new cc.EaseExponentialInOut(this._inner.reverse())
    },
    clone: function () {
        var a = new cc.EaseExponentialInOut;
        a.initWithAction(this._inner.clone());
        return a
    }
});
cc.EaseExponentialInOut.create = function (a) {
    return new cc.EaseExponentialInOut(a)
};
cc._easeExponentialInOutObj = {
    easing: function (a) {
        return 1 !== a && 0 !== a ? (a *= 2, 1 > a ? 0.5 * Math.pow(2, 10 * (a - 1)) : 0.5 * (-Math.pow(2, -10 * (a - 1)) + 2)) : a
    },
    reverse: function () {
        return cc._easeExponentialInOutObj
    }
};
cc.easeExponentialInOut = function () {
    return cc._easeExponentialInOutObj
};
cc.EaseSineIn = cc.ActionEase.extend({
    update: function (a) {
        a = 0 === a || 1 === a ? a : -1 * Math.cos(a * Math.PI / 2) + 1;
        this._inner.update(a)
    },
    reverse: function () {
        return new cc.EaseSineOut(this._inner.reverse())
    },
    clone: function () {
        var a = new cc.EaseSineIn;
        a.initWithAction(this._inner.clone());
        return a
    }
});
cc.EaseSineIn.create = function (a) {
    return new cc.EaseSineIn(a)
};
cc._easeSineInObj = {
    easing: function (a) {
        return 0 === a || 1 === a ? a : -1 * Math.cos(a * Math.PI / 2) + 1
    },
    reverse: function () {
        return cc._easeSineOutObj
    }
};
cc.easeSineIn = function () {
    return cc._easeSineInObj
};
cc.EaseSineOut = cc.ActionEase.extend({
    update: function (a) {
        a = 0 === a || 1 === a ? a : Math.sin(a * Math.PI / 2);
        this._inner.update(a)
    },
    reverse: function () {
        return new cc.EaseSineIn(this._inner.reverse())
    },
    clone: function () {
        var a = new cc.EaseSineOut;
        a.initWithAction(this._inner.clone());
        return a
    }
});
cc.EaseSineOut.create = function (a) {
    return new cc.EaseSineOut(a)
};
cc._easeSineOutObj = {
    easing: function (a) {
        return 0 === a || 1 === a ? a : Math.sin(a * Math.PI / 2)
    },
    reverse: function () {
        return cc._easeSineInObj
    }
};
cc.easeSineOut = function () {
    return cc._easeSineOutObj
};
cc.EaseSineInOut = cc.ActionEase.extend({
    update: function (a) {
        a = 0 === a || 1 === a ? a : -0.5 * (Math.cos(Math.PI * a) - 1);
        this._inner.update(a)
    },
    clone: function () {
        var a = new cc.EaseSineInOut;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseSineInOut(this._inner.reverse())
    }
});
cc.EaseSineInOut.create = function (a) {
    return new cc.EaseSineInOut(a)
};
cc._easeSineInOutObj = {
    easing: function (a) {
        return 0 === a || 1 === a ? a : -0.5 * (Math.cos(Math.PI * a) - 1)
    },
    reverse: function () {
        return cc._easeSineInOutObj
    }
};
cc.easeSineInOut = function () {
    return cc._easeSineInOutObj
};
cc.EaseElastic = cc.ActionEase.extend({
    _period: 0.3,
    ctor: function (a, b) {
        cc.ActionEase.prototype.ctor.call(this);
        a && this.initWithAction(a, b)
    },
    getPeriod: function () {
        return this._period
    },
    setPeriod: function (a) {
        this._period = a
    },
    initWithAction: function (a, b) {
        cc.ActionEase.prototype.initWithAction.call(this, a);
        this._period = null == b ? 0.3 : b;
        return !0
    },
    reverse: function () {
        cc.log("cc.EaseElastic.reverse(): it should be overridden in subclass.");
        return null
    },
    clone: function () {
        var a = new cc.EaseElastic;
        a.initWithAction(this._inner.clone(),
            this._period);
        return a
    }
});
cc.EaseElastic.create = function (a, b) {
    return new cc.EaseElastic(a, b)
};
cc.EaseElasticIn = cc.EaseElastic.extend({
    update: function (a) {
        var b = 0;
        0 === a || 1 === a ? b = a : (b = this._period / 4, a -= 1, b = -Math.pow(2, 10 * a) * Math.sin(2 * (a - b) * Math.PI / this._period));
        this._inner.update(b)
    },
    reverse: function () {
        return new cc.EaseElasticOut(this._inner.reverse(), this._period)
    },
    clone: function () {
        var a = new cc.EaseElasticIn;
        a.initWithAction(this._inner.clone(), this._period);
        return a
    }
});
cc.EaseElasticIn.create = function (a, b) {
    return new cc.EaseElasticIn(a, b)
};
cc._easeElasticInObj = {
    easing: function (a) {
        if (0 === a || 1 === a) return a;
        a -= 1;
        return -Math.pow(2, 10 * a) * Math.sin(2 * (a - 0.075) * Math.PI / 0.3)
    },
    reverse: function () {
        return cc._easeElasticOutObj
    }
};
cc.easeElasticIn = function (a) {
    return a && 0.3 !== a ? {
        _period: a,
        easing: function (a) {
            if (0 === a || 1 === a) return a;
            a -= 1;
            return -Math.pow(2, 10 * a) * Math.sin(2 * (a - this._period / 4) * Math.PI / this._period)
        },
        reverse: function () {
            return cc.easeElasticOut(this._period)
        }
    } : cc._easeElasticInObj
};
cc.EaseElasticOut = cc.EaseElastic.extend({
    update: function (a) {
        var b = 0;
        0 === a || 1 === a ? b = a : (b = this._period / 4, b = Math.pow(2, -10 * a) * Math.sin(2 * (a - b) * Math.PI / this._period) + 1);
        this._inner.update(b)
    },
    reverse: function () {
        return new cc.EaseElasticIn(this._inner.reverse(), this._period)
    },
    clone: function () {
        var a = new cc.EaseElasticOut;
        a.initWithAction(this._inner.clone(), this._period);
        return a
    }
});
cc.EaseElasticOut.create = function (a, b) {
    return new cc.EaseElasticOut(a, b)
};
cc._easeElasticOutObj = {
    easing: function (a) {
        return 0 === a || 1 === a ? a : Math.pow(2, -10 * a) * Math.sin(2 * (a - 0.075) * Math.PI / 0.3) + 1
    },
    reverse: function () {
        return cc._easeElasticInObj
    }
};
cc.easeElasticOut = function (a) {
    return a && 0.3 !== a ? {
        _period: a,
        easing: function (a) {
            return 0 === a || 1 === a ? a : Math.pow(2, -10 * a) * Math.sin(2 * (a - this._period / 4) * Math.PI / this._period) + 1
        },
        reverse: function () {
            return cc.easeElasticIn(this._period)
        }
    } : cc._easeElasticOutObj
};
cc.EaseElasticInOut = cc.EaseElastic.extend({
    update: function (a) {
        var b = 0,
            b = this._period;
        if (0 === a || 1 === a) b = a;
        else {
            b || (b = this._period = 0.3 * 1.5);
            var c = b / 4;
            a = 2 * a - 1;
            b = 0 > a ? -0.5 * Math.pow(2, 10 * a) * Math.sin(2 * (a - c) * Math.PI / b) : 0.5 * Math.pow(2, -10 * a) * Math.sin(2 * (a - c) * Math.PI / b) + 1
        }
        this._inner.update(b)
    },
    reverse: function () {
        return new cc.EaseElasticInOut(this._inner.reverse(), this._period)
    },
    clone: function () {
        var a = new cc.EaseElasticInOut;
        a.initWithAction(this._inner.clone(), this._period);
        return a
    }
});
cc.EaseElasticInOut.create = function (a, b) {
    return new cc.EaseElasticInOut(a, b)
};
cc.easeElasticInOut = function (a) {
    return {
        _period: a || 0.3,
        easing: function (a) {
            var c = 0,
                c = this._period;
            if (0 === a || 1 === a) c = a;
            else {
                c || (c = this._period = 0.3 * 1.5);
                var d = c / 4;
                a = 2 * a - 1;
                c = 0 > a ? -0.5 * Math.pow(2, 10 * a) * Math.sin(2 * (a - d) * Math.PI / c) : 0.5 * Math.pow(2, -10 * a) * Math.sin(2 * (a - d) * Math.PI / c) + 1
            }
            return c
        },
        reverse: function () {
            return cc.easeElasticInOut(this._period)
        }
    }
};
cc.EaseBounce = cc.ActionEase.extend({
    bounceTime: function (a) {
        if (a < 1 / 2.75) return 7.5625 * a * a;
        if (a < 2 / 2.75) return a -= 1.5 / 2.75, 7.5625 * a * a + 0.75;
        if (a < 2.5 / 2.75) return a -= 2.25 / 2.75, 7.5625 * a * a + 0.9375;
        a -= 2.625 / 2.75;
        return 7.5625 * a * a + 0.984375
    },
    clone: function () {
        var a = new cc.EaseBounce;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseBounce(this._inner.reverse())
    }
});
cc.EaseBounce.create = function (a) {
    return new cc.EaseBounce(a)
};
cc.EaseBounceIn = cc.EaseBounce.extend({
    update: function (a) {
        a = 1 - this.bounceTime(1 - a);
        this._inner.update(a)
    },
    reverse: function () {
        return new cc.EaseBounceOut(this._inner.reverse())
    },
    clone: function () {
        var a = new cc.EaseBounceIn;
        a.initWithAction(this._inner.clone());
        return a
    }
});
cc.EaseBounceIn.create = function (a) {
    return new cc.EaseBounceIn(a)
};
cc._bounceTime = function (a) {
    if (a < 1 / 2.75) return 7.5625 * a * a;
    if (a < 2 / 2.75) return a -= 1.5 / 2.75, 7.5625 * a * a + 0.75;
    if (a < 2.5 / 2.75) return a -= 2.25 / 2.75, 7.5625 * a * a + 0.9375;
    a -= 2.625 / 2.75;
    return 7.5625 * a * a + 0.984375
};
cc._easeBounceInObj = {
    easing: function (a) {
        return 1 - cc._bounceTime(1 - a)
    },
    reverse: function () {
        return cc._easeBounceOutObj
    }
};
cc.easeBounceIn = function () {
    return cc._easeBounceInObj
};
cc.EaseBounceOut = cc.EaseBounce.extend({
    update: function (a) {
        a = this.bounceTime(a);
        this._inner.update(a)
    },
    reverse: function () {
        return new cc.EaseBounceIn(this._inner.reverse())
    },
    clone: function () {
        var a = new cc.EaseBounceOut;
        a.initWithAction(this._inner.clone());
        return a
    }
});
cc.EaseBounceOut.create = function (a) {
    return new cc.EaseBounceOut(a)
};
cc._easeBounceOutObj = {
    easing: function (a) {
        return cc._bounceTime(a)
    },
    reverse: function () {
        return cc._easeBounceInObj
    }
};
cc.easeBounceOut = function () {
    return cc._easeBounceOutObj
};
cc.EaseBounceInOut = cc.EaseBounce.extend({
    update: function (a) {
        var b = 0,
            b = 0.5 > a ? 0.5 * (1 - this.bounceTime(1 - 2 * a)) : 0.5 * this.bounceTime(2 * a - 1) + 0.5;
        this._inner.update(b)
    },
    clone: function () {
        var a = new cc.EaseBounceInOut;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseBounceInOut(this._inner.reverse())
    }
});
cc.EaseBounceInOut.create = function (a) {
    return new cc.EaseBounceInOut(a)
};
cc._easeBounceInOutObj = {
    easing: function (a) {
        return a = 0.5 > a ? 0.5 * (1 - cc._bounceTime(1 - 2 * a)) : 0.5 * cc._bounceTime(2 * a - 1) + 0.5
    },
    reverse: function () {
        return cc._easeBounceInOutObj
    }
};
cc.easeBounceInOut = function () {
    return cc._easeBounceInOutObj
};
cc.EaseBackIn = cc.ActionEase.extend({
    update: function (a) {
        this._inner.update(0 === a || 1 === a ? a : a * a * (2.70158 * a - 1.70158))
    },
    reverse: function () {
        return new cc.EaseBackOut(this._inner.reverse())
    },
    clone: function () {
        var a = new cc.EaseBackIn;
        a.initWithAction(this._inner.clone());
        return a
    }
});
cc.EaseBackIn.create = function (a) {
    return new cc.EaseBackIn(a)
};
cc._easeBackInObj = {
    easing: function (a) {
        return 0 === a || 1 === a ? a : a * a * (2.70158 * a - 1.70158)
    },
    reverse: function () {
        return cc._easeBackOutObj
    }
};
cc.easeBackIn = function () {
    return cc._easeBackInObj
};
cc.EaseBackOut = cc.ActionEase.extend({
    update: function (a) {
        a -= 1;
        this._inner.update(a * a * (2.70158 * a + 1.70158) + 1)
    },
    reverse: function () {
        return new cc.EaseBackIn(this._inner.reverse())
    },
    clone: function () {
        var a = new cc.EaseBackOut;
        a.initWithAction(this._inner.clone());
        return a
    }
});
cc.EaseBackOut.create = function (a) {
    return new cc.EaseBackOut(a)
};
cc._easeBackOutObj = {
    easing: function (a) {
        a -= 1;
        return a * a * (2.70158 * a + 1.70158) + 1
    },
    reverse: function () {
        return cc._easeBackInObj
    }
};
cc.easeBackOut = function () {
    return cc._easeBackOutObj
};
cc.EaseBackInOut = cc.ActionEase.extend({
    update: function (a) {
        a *= 2;
        1 > a ? this._inner.update(a * a * (3.5949095 * a - 2.5949095) / 2) : (a -= 2, this._inner.update(a * a * (3.5949095 * a + 2.5949095) / 2 + 1))
    },
    clone: function () {
        var a = new cc.EaseBackInOut;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseBackInOut(this._inner.reverse())
    }
});
cc.EaseBackInOut.create = function (a) {
    return new cc.EaseBackInOut(a)
};
cc._easeBackInOutObj = {
    easing: function (a) {
        a *= 2;
        if (1 > a) return a * a * (3.5949095 * a - 2.5949095) / 2;
        a -= 2;
        return a * a * (3.5949095 * a + 2.5949095) / 2 + 1
    },
    reverse: function () {
        return cc._easeBackInOutObj
    }
};
cc.easeBackInOut = function () {
    return cc._easeBackInOutObj
};
cc.EaseBezierAction = cc.ActionEase.extend({
    _p0: null,
    _p1: null,
    _p2: null,
    _p3: null,
    ctor: function (a) {
        cc.ActionEase.prototype.ctor.call(this, a)
    },
    _updateTime: function (a, b, c, d, f) {
        return Math.pow(1 - f, 3) * a + 3 * f * Math.pow(1 - f, 2) * b + 3 * Math.pow(f, 2) * (1 - f) * c + Math.pow(f, 3) * d
    },
    update: function (a) {
        a = this._updateTime(this._p0, this._p1, this._p2, this._p3, a);
        this._inner.update(a)
    },
    clone: function () {
        var a = new cc.EaseBezierAction;
        a.initWithAction(this._inner.clone());
        a.setBezierParamer(this._p0, this._p1, this._p2, this._p3);
        return a
    },
    reverse: function () {
        var a = new cc.EaseBezierAction(this._inner.reverse());
        a.setBezierParamer(this._p3, this._p2, this._p1, this._p0);
        return a
    },
    setBezierParamer: function (a, b, c, d) {
        this._p0 = a || 0;
        this._p1 = b || 0;
        this._p2 = c || 0;
        this._p3 = d || 0
    }
});
cc.EaseBezierAction.create = function (a) {
    return new cc.EaseBezierAction(a)
};
cc.easeBezierAction = function (a, b, c, d) {
    return {
        easing: function (f) {
            return cc.EaseBezierAction.prototype._updateTime(a, b, c, d, f)
        },
        reverse: function () {
            return cc.easeBezierAction(d, c, b, a)
        }
    }
};
cc.EaseQuadraticActionIn = cc.ActionEase.extend({
    _updateTime: function (a) {
        return Math.pow(a, 2)
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseQuadraticActionIn;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseQuadraticActionIn(this._inner.reverse())
    }
});
cc.EaseQuadraticActionIn.create = function (a) {
    return new cc.EaseQuadraticActionIn(a)
};
cc._easeQuadraticActionIn = {
    easing: cc.EaseQuadraticActionIn.prototype._updateTime,
    reverse: function () {
        return cc._easeQuadraticActionIn
    }
};
cc.easeQuadraticActionIn = function () {
    return cc._easeQuadraticActionIn
};
cc.EaseQuadraticActionOut = cc.ActionEase.extend({
    _updateTime: function (a) {
        return -a * (a - 2)
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseQuadraticActionOut;
        a.initWithAction();
        return a
    },
    reverse: function () {
        return new cc.EaseQuadraticActionOut(this._inner.reverse())
    }
});
cc.EaseQuadraticActionOut.create = function (a) {
    return new cc.EaseQuadraticActionOut(a)
};
cc._easeQuadraticActionOut = {
    easing: cc.EaseQuadraticActionOut.prototype._updateTime,
    reverse: function () {
        return cc._easeQuadraticActionOut
    }
};
cc.easeQuadraticActionOut = function () {
    return cc._easeQuadraticActionOut
};
cc.EaseQuadraticActionInOut = cc.ActionEase.extend({
    _updateTime: function (a) {
        var b = a;
        a *= 2;
        1 > a ? b = 0.5 * a * a : (--a, b = -0.5 * (a * (a - 2) - 1));
        return b
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseQuadraticActionInOut;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseQuadraticActionInOut(this._inner.reverse())
    }
});
cc.EaseQuadraticActionInOut.create = function (a) {
    return new cc.EaseQuadraticActionInOut(a)
};
cc._easeQuadraticActionInOut = {
    easing: cc.EaseQuadraticActionInOut.prototype._updateTime,
    reverse: function () {
        return cc._easeQuadraticActionInOut
    }
};
cc.easeQuadraticActionInOut = function () {
    return cc._easeQuadraticActionInOut
};
cc.EaseQuarticActionIn = cc.ActionEase.extend({
    _updateTime: function (a) {
        return a * a * a * a
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseQuarticActionIn;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseQuarticActionIn(this._inner.reverse())
    }
});
cc.EaseQuarticActionIn.create = function (a) {
    return new cc.EaseQuarticActionIn(a)
};
cc._easeQuarticActionIn = {
    easing: cc.EaseQuarticActionIn.prototype._updateTime,
    reverse: function () {
        return cc._easeQuarticActionIn
    }
};
cc.easeQuarticActionIn = function () {
    return cc._easeQuarticActionIn
};
cc.EaseQuarticActionOut = cc.ActionEase.extend({
    _updateTime: function (a) {
        a -= 1;
        return -(a * a * a * a - 1)
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseQuarticActionOut;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseQuarticActionOut(this._inner.reverse())
    }
});
cc.EaseQuarticActionOut.create = function (a) {
    return new cc.EaseQuarticActionOut(a)
};
cc._easeQuarticActionOut = {
    easing: cc.EaseQuarticActionOut.prototype._updateTime,
    reverse: function () {
        return cc._easeQuarticActionOut
    }
};
cc.easeQuarticActionOut = function () {
    return cc._easeQuarticActionOut
};
cc.EaseQuarticActionInOut = cc.ActionEase.extend({
    _updateTime: function (a) {
        a *= 2;
        if (1 > a) return 0.5 * a * a * a * a;
        a -= 2;
        return -0.5 * (a * a * a * a - 2)
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseQuarticActionInOut;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseQuarticActionInOut(this._inner.reverse())
    }
});
cc.EaseQuarticActionInOut.create = function (a) {
    return new cc.EaseQuarticActionInOut(a)
};
cc._easeQuarticActionInOut = {
    easing: cc.EaseQuarticActionInOut.prototype._updateTime,
    reverse: function () {
        return cc._easeQuarticActionInOut
    }
};
cc.easeQuarticActionInOut = function () {
    return cc._easeQuarticActionInOut
};
cc.EaseQuinticActionIn = cc.ActionEase.extend({
    _updateTime: function (a) {
        return a * a * a * a * a
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseQuinticActionIn;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseQuinticActionIn(this._inner.reverse())
    }
});
cc.EaseQuinticActionIn.create = function (a) {
    return new cc.EaseQuinticActionIn(a)
};
cc._easeQuinticActionIn = {
    easing: cc.EaseQuinticActionIn.prototype._updateTime,
    reverse: function () {
        return cc._easeQuinticActionIn
    }
};
cc.easeQuinticActionIn = function () {
    return cc._easeQuinticActionIn
};
cc.EaseQuinticActionOut = cc.ActionEase.extend({
    _updateTime: function (a) {
        a -= 1;
        return a * a * a * a * a + 1
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseQuinticActionOut;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseQuinticActionOut(this._inner.reverse())
    }
});
cc.EaseQuinticActionOut.create = function (a) {
    return new cc.EaseQuinticActionOut(a)
};
cc._easeQuinticActionOut = {
    easing: cc.EaseQuinticActionOut.prototype._updateTime,
    reverse: function () {
        return cc._easeQuinticActionOut
    }
};
cc.easeQuinticActionOut = function () {
    return cc._easeQuinticActionOut
};
cc.EaseQuinticActionInOut = cc.ActionEase.extend({
    _updateTime: function (a) {
        a *= 2;
        if (1 > a) return 0.5 * a * a * a * a * a;
        a -= 2;
        return 0.5 * (a * a * a * a * a + 2)
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseQuinticActionInOut;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseQuinticActionInOut(this._inner.reverse())
    }
});
cc.EaseQuinticActionInOut.create = function (a) {
    return new cc.EaseQuinticActionInOut(a)
};
cc._easeQuinticActionInOut = {
    easing: cc.EaseQuinticActionInOut.prototype._updateTime,
    reverse: function () {
        return cc._easeQuinticActionInOut
    }
};
cc.easeQuinticActionInOut = function () {
    return cc._easeQuinticActionInOut
};
cc.EaseCircleActionIn = cc.ActionEase.extend({
    _updateTime: function (a) {
        return -1 * (Math.sqrt(1 - a * a) - 1)
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseCircleActionIn;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseCircleActionIn(this._inner.reverse())
    }
});
cc.EaseCircleActionIn.create = function (a) {
    return new cc.EaseCircleActionIn(a)
};
cc._easeCircleActionIn = {
    easing: cc.EaseCircleActionIn.prototype._updateTime,
    reverse: function () {
        return cc._easeCircleActionIn
    }
};
cc.easeCircleActionIn = function () {
    return cc._easeCircleActionIn
};
cc.EaseCircleActionOut = cc.ActionEase.extend({
    _updateTime: function (a) {
        a -= 1;
        return Math.sqrt(1 - a * a)
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseCircleActionOut;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseCircleActionOut(this._inner.reverse())
    }
});
cc.EaseCircleActionOut.create = function (a) {
    return new cc.EaseCircleActionOut(a)
};
cc._easeCircleActionOut = {
    easing: cc.EaseCircleActionOut.prototype._updateTime,
    reverse: function () {
        return cc._easeCircleActionOut
    }
};
cc.easeCircleActionOut = function () {
    return cc._easeCircleActionOut
};
cc.EaseCircleActionInOut = cc.ActionEase.extend({
    _updateTime: function (a) {
        a *= 2;
        if (1 > a) return -0.5 * (Math.sqrt(1 - a * a) - 1);
        a -= 2;
        return 0.5 * (Math.sqrt(1 - a * a) + 1)
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseCircleActionInOut;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseCircleActionInOut(this._inner.reverse())
    }
});
cc.EaseCircleActionInOut.create = function (a) {
    return new cc.EaseCircleActionInOut(a)
};
cc._easeCircleActionInOut = {
    easing: cc.EaseCircleActionInOut.prototype._updateTime,
    reverse: function () {
        return cc._easeCircleActionInOut
    }
};
cc.easeCircleActionInOut = function () {
    return cc._easeCircleActionInOut
};
cc.EaseCubicActionIn = cc.ActionEase.extend({
    _updateTime: function (a) {
        return a * a * a
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseCubicActionIn;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseCubicActionIn(this._inner.reverse())
    }
});
cc.EaseCubicActionIn.create = function (a) {
    return new cc.EaseCubicActionIn(a)
};
cc._easeCubicActionIn = {
    easing: cc.EaseCubicActionIn.prototype._updateTime,
    reverse: function () {
        return cc._easeCubicActionIn
    }
};
cc.easeCubicActionIn = function () {
    return cc._easeCubicActionIn
};
cc.EaseCubicActionOut = cc.ActionEase.extend({
    _updateTime: function (a) {
        a -= 1;
        return a * a * a + 1
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseCubicActionOut;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseCubicActionOut(this._inner.reverse())
    }
});
cc.EaseCubicActionOut.create = function (a) {
    return new cc.EaseCubicActionOut(a)
};
cc._easeCubicActionOut = {
    easing: cc.EaseCubicActionOut.prototype._updateTime,
    reverse: function () {
        return cc._easeCubicActionOut
    }
};
cc.easeCubicActionOut = function () {
    return cc._easeCubicActionOut
};
cc.EaseCubicActionInOut = cc.ActionEase.extend({
    _updateTime: function (a) {
        a *= 2;
        if (1 > a) return 0.5 * a * a * a;
        a -= 2;
        return 0.5 * (a * a * a + 2)
    },
    update: function (a) {
        this._inner.update(this._updateTime(a))
    },
    clone: function () {
        var a = new cc.EaseCubicActionInOut;
        a.initWithAction(this._inner.clone());
        return a
    },
    reverse: function () {
        return new cc.EaseCubicActionInOut(this._inner.reverse())
    }
});
cc.EaseCubicActionInOut.create = function (a) {
    return new cc.EaseCubicActionInOut(a)
};
cc._easeCubicActionInOut = {
    easing: cc.EaseCubicActionInOut.prototype._updateTime,
    reverse: function () {
        return cc._easeCubicActionInOut
    }
};
cc.easeCubicActionInOut = function () {
    return cc._easeCubicActionInOut
};
cc.cardinalSplineAt = function (a, b, c, d, f, g, h) {
    var m = g * g,
        n = m * g,
        p = (1 - f) / 2;
    f = p * (-n + 2 * m - g);
    var u = p * (-n + m) + (2 * n - 3 * m + 1);
    g = p * (n - 2 * m + g) + (-2 * n + 3 * m);
    n = p * (n - m);
    m = a.x * f + b.x * u + c.x * g + d.x * n;
    a = a.y * f + b.y * u + c.y * g + d.y * n;
    if (void 0 !== h) h.x = m, h.y = a;
    else return cc.p(m, a)
};
cc.reverseControlPoints = function (a) {
    for (var b = [], c = a.length - 1; 0 <= c; c--) b.push(cc.p(a[c].x, a[c].y));
    return b
};
cc.cloneControlPoints = function (a) {
    for (var b = [], c = 0; c < a.length; c++) b.push(cc.p(a[c].x, a[c].y));
    return b
};
cc.copyControlPoints = cc.cloneControlPoints;
cc.getControlPointAt = function (a, b) {
    var c = Math.min(a.length - 1, Math.max(b, 0));
    return a[c]
};
cc.reverseControlPointsInline = function (a) {
    for (var b = a.length, c = 0 | b / 2, d = 0; d < c; ++d) {
        var f = a[d];
        a[d] = a[b - d - 1];
        a[b - d - 1] = f
    }
};
cc.CardinalSplineTo = cc.ActionInterval.extend({
    _points: null,
    _deltaT: 0,
    _tension: 0,
    _previousPosition: null,
    _accumulatedDiff: null,
    ctor: function (a, b, c) {
        cc.ActionInterval.prototype.ctor.call(this);
        this._points = [];
        void 0 !== c && this.initWithDuration(a, b, c)
    },
    initWithDuration: function (a, b, c) {
        if (!b || 0 === b.length) throw Error("Invalid configuration. It must at least have one control point");
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (this.setPoints(b), this._tension = c, !0) : !1
    },
    clone: function () {
        var a =
            new cc.CardinalSplineTo;
        a.initWithDuration(this._duration, cc.copyControlPoints(this._points), this._tension);
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        this._deltaT = 1 / (this._points.length - 1);
        this._previousPosition = cc.p(this.target.getPositionX(), this.target.getPositionY());
        this._accumulatedDiff = cc.p(0, 0)
    },
    update: function (a) {
        a = this._computeEaseTime(a);
        var b, c = this._points;
        if (1 === a) b = c.length - 1, a = 1;
        else {
            var d = this._deltaT;
            b = 0 | a / d;
            a = (a - d * b) / d
        }
        b = cc.cardinalSplineAt(cc.getControlPointAt(c,
            b - 1), cc.getControlPointAt(c, b - 0), cc.getControlPointAt(c, b + 1), cc.getControlPointAt(c, b + 2), this._tension, a);
        if (cc.ENABLE_STACKABLE_ACTIONS && (c = this.target.getPositionX() - this._previousPosition.x, a = this.target.getPositionY() - this._previousPosition.y, 0 !== c || 0 !== a)) d = this._accumulatedDiff, c = d.x + c, a = d.y + a, d.x = c, d.y = a, b.x += c, b.y += a;
        this.updatePosition(b)
    },
    reverse: function () {
        var a = cc.reverseControlPoints(this._points);
        return cc.cardinalSplineTo(this._duration, a, this._tension)
    },
    updatePosition: function (a) {
        this.target.setPosition(a);
        this._previousPosition = a
    },
    getPoints: function () {
        return this._points
    },
    setPoints: function (a) {
        this._points = a
    }
});
cc.cardinalSplineTo = function (a, b, c) {
    return new cc.CardinalSplineTo(a, b, c)
};
cc.CardinalSplineTo.create = cc.cardinalSplineTo;
cc.CardinalSplineBy = cc.CardinalSplineTo.extend({
    _startPosition: null,
    ctor: function (a, b, c) {
        cc.CardinalSplineTo.prototype.ctor.call(this);
        this._startPosition = cc.p(0, 0);
        void 0 !== c && this.initWithDuration(a, b, c)
    },
    startWithTarget: function (a) {
        cc.CardinalSplineTo.prototype.startWithTarget.call(this, a);
        this._startPosition.x = a.getPositionX();
        this._startPosition.y = a.getPositionY()
    },
    reverse: function () {
        for (var a = this._points.slice(), b, c = a[0], d = 1; d < a.length; ++d) b = a[d], a[d] = cc.pSub(b, c), c = b;
        a = cc.reverseControlPoints(a);
        c = a[a.length - 1];
        a.pop();
        c.x = -c.x;
        c.y = -c.y;
        a.unshift(c);
        for (d = 1; d < a.length; ++d) b = a[d], b.x = -b.x, b.y = -b.y, b.x += c.x, b.y += c.y, c = a[d] = b;
        return cc.cardinalSplineBy(this._duration, a, this._tension)
    },
    updatePosition: function (a) {
        var b = this._startPosition,
            c = a.x + b.x;
        a = a.y + b.y;
        this._previousPosition.x = c;
        this._previousPosition.y = a;
        this.target.setPosition(c, a)
    },
    clone: function () {
        var a = new cc.CardinalSplineBy;
        a.initWithDuration(this._duration, cc.copyControlPoints(this._points), this._tension);
        return a
    }
});
cc.cardinalSplineBy = function (a, b, c) {
    return new cc.CardinalSplineBy(a, b, c)
};
cc.CardinalSplineBy.create = cc.cardinalSplineBy;
cc.CatmullRomTo = cc.CardinalSplineTo.extend({
    ctor: function (a, b) {
        b && this.initWithDuration(a, b)
    },
    initWithDuration: function (a, b) {
        return cc.CardinalSplineTo.prototype.initWithDuration.call(this, a, b, 0.5)
    },
    clone: function () {
        var a = new cc.CatmullRomTo;
        a.initWithDuration(this._duration, cc.copyControlPoints(this._points));
        return a
    }
});
cc.catmullRomTo = function (a, b) {
    return new cc.CatmullRomTo(a, b)
};
cc.CatmullRomTo.create = cc.catmullRomTo;
cc.CatmullRomBy = cc.CardinalSplineBy.extend({
    ctor: function (a, b) {
        cc.CardinalSplineBy.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    initWithDuration: function (a, b) {
        return cc.CardinalSplineTo.prototype.initWithDuration.call(this, a, b, 0.5)
    },
    clone: function () {
        var a = new cc.CatmullRomBy;
        a.initWithDuration(this._duration, cc.copyControlPoints(this._points));
        return a
    }
});
cc.catmullRomBy = function (a, b) {
    return new cc.CatmullRomBy(a, b)
};
cc.CatmullRomBy.create = cc.catmullRomBy;
cc.ActionTweenDelegate = cc.Class.extend({
    updateTweenAction: function (a, b) {}
});
cc.ActionTween = cc.ActionInterval.extend({
    key: "",
    from: 0,
    to: 0,
    delta: 0,
    ctor: function (a, b, c, d) {
        cc.ActionInterval.prototype.ctor.call(this);
        this.key = "";
        void 0 !== d && this.initWithDuration(a, b, c, d)
    },
    initWithDuration: function (a, b, c, d) {
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (this.key = b, this.to = d, this.from = c, !0) : !1
    },
    startWithTarget: function (a) {
        if (!a || !a.updateTweenAction) throw Error("cc.ActionTween.startWithTarget(): target must be non-null, and target must implement updateTweenAction function");
        cc.ActionInterval.prototype.startWithTarget.call(this,
            a);
        this.delta = this.to - this.from
    },
    update: function (a) {
        this.target.updateTweenAction(this.to - this.delta * (1 - a), this.key)
    },
    reverse: function () {
        return new cc.ActionTween(this.duration, this.key, this.to, this.from)
    },
    clone: function () {
        var a = new cc.ActionTween;
        a.initWithDuration(this._duration, this.key, this.from, this.to);
        return a
    }
});
cc.actionTween = function (a, b, c, d) {
    return new cc.ActionTween(a, b, c, d)
};
cc.ActionTween.create = cc.actionTween;
cc.GridAction = cc.ActionInterval.extend({
    _gridSize: null,
    _gridNodeTarget: null,
    ctor: function (a, b) {
        cc.sys._checkWebGLRenderMode();
        cc.ActionInterval.prototype.ctor.call(this);
        this._gridSize = cc.size(0, 0);
        b && this.initWithDuration(a, b)
    },
    _cacheTargetAsGridNode: function (a) {
        this._gridNodeTarget = a
    },
    clone: function () {
        var a = new cc.GridAction,
            b = this._gridSize;
        a.initWithDuration(this._duration, cc.size(b.width, b.height));
        return a
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a);
        cc.renderer.childrenOrderDirty = !0;
        this._cacheTargetAsGridNode(a);
        var b = this.getGrid();
        (a = this._gridNodeTarget.getGrid()) && 0 < a.getReuseGrid() ? (b = a.getGridSize(), a.isActive() && (b.width === this._gridSize.width && b.height === this._gridSize.height) && a.reuse()) : (a && a.isActive() && a.setActive(!1), this._gridNodeTarget.setGrid(b), this._gridNodeTarget.getGrid().setActive(!0))
    },
    reverse: function () {
        return new cc.ReverseTime(this)
    },
    initWithDuration: function (a, b) {
        return cc.ActionInterval.prototype.initWithDuration.call(this,
            a) ? (this._gridSize.width = b.width, this._gridSize.height = b.height, !0) : !1
    },
    getGrid: function () {
        cc.log("cc.GridAction.getGrid(): it should be overridden in subclass.")
    }
});
cc.gridAction = function (a, b) {
    return new cc.GridAction(a, b)
};
cc.GridAction.create = cc.gridAction;
cc.Grid3DAction = cc.GridAction.extend({
    getGrid: function () {
        return new cc.Grid3D(this._gridSize, void 0, void 0, this._gridNodeTarget.getGridRect())
    },
    getGridRect: function () {
        return this._gridNodeTarget.getGridRect()
    },
    vertex: function (a) {
        return this.getVertex(a)
    },
    getVertex: function (a) {
        return this.target.grid.getVertex(a)
    },
    originalVertex: function (a) {
        return this.getOriginalVertex(a)
    },
    getOriginalVertex: function (a) {
        return this.target.grid.originalVertex(a)
    },
    setVertex: function (a, b) {
        this.target.grid.setVertex(a,
            b)
    }
});
cc.grid3DAction = function (a, b) {
    return new cc.Grid3DAction(a, b)
};
cc.Grid3DAction.create = cc.grid3DAction;
cc.TiledGrid3DAction = cc.GridAction.extend({
    tile: function (a) {
        return this.getTile(a)
    },
    getTile: function (a) {
        return this.target.grid.tile(a)
    },
    originalTile: function (a) {
        return this.getOriginalTile(a)
    },
    getOriginalTile: function (a) {
        return this.target.grid.originalTile(a)
    },
    setTile: function (a, b) {
        this.target.grid.setTile(a, b)
    },
    getGrid: function () {
        return new cc.TiledGrid3D(this._gridSize, void 0, void 0, this._gridNodeTarget.getGridRect())
    }
});
cc.tiledGrid3DAction = function (a, b) {
    return new cc.TiledGrid3DAction(a, b)
};
cc.TiledGrid3DAction.create = cc.tiledGrid3DAction;
cc.StopGrid = cc.ActionInstant.extend({
    startWithTarget: function (a) {
        cc.ActionInstant.prototype.startWithTarget.call(this, a);
        cc.renderer.childrenOrderDirty = !0;
        (a = this.target.grid) && a.isActive() && a.setActive(!1)
    }
});
cc.stopGrid = function () {
    return new cc.StopGrid
};
cc.StopGrid.create = cc.stopGrid;
cc.ReuseGrid = cc.ActionInstant.extend({
    _times: null,
    ctor: function (a) {
        cc.ActionInstant.prototype.ctor.call(this);
        void 0 !== a && this.initWithTimes(a)
    },
    initWithTimes: function (a) {
        this._times = a;
        return !0
    },
    startWithTarget: function (a) {
        cc.ActionInstant.prototype.startWithTarget.call(this, a);
        cc.renderer.childrenOrderDirty = !0;
        this.target.grid && this.target.grid.isActive() && this.target.grid.setReuseGrid(this.target.grid.getReuseGrid() + this._times)
    }
});
cc.reuseGrid = function (a) {
    return new cc.ReuseGrid(a)
};
cc.ReuseGrid.create = cc.reuseGrid;
cc.Waves3D = cc.Grid3DAction.extend({
    _waves: 0,
    _amplitude: 0,
    _amplitudeRate: 0,
    ctor: function (a, b, c, d) {
        cc.GridAction.prototype.ctor.call(this);
        void 0 !== d && this.initWithDuration(a, b, c, d)
    },
    getAmplitude: function () {
        return this._amplitude
    },
    setAmplitude: function (a) {
        this._amplitude = a
    },
    getAmplitudeRate: function () {
        return this._amplitudeRate
    },
    setAmplitudeRate: function (a) {
        this._amplitudeRate = a
    },
    initWithDuration: function (a, b, c, d) {
        return cc.Grid3DAction.prototype.initWithDuration.call(this, a, b) ? (this._waves = c, this._amplitude =
            d, this._amplitudeRate = 1, !0) : !1
    },
    update: function (a) {
        for (var b = this._gridSize, c = this._amplitude, d = cc.p(0, 0), f = this._amplitudeRate, g = this._waves, h = 0; h < b.width + 1; ++h)
            for (var m = 0; m < b.height + 1; ++m) {
                d.x = h;
                d.y = m;
                var n = this.originalVertex(d);
                n.z += Math.sin(2 * Math.PI * a * g + 0.01 * (n.y + n.x)) * c * f;
                this.setVertex(d, n)
            }
    }
});
cc.waves3D = function (a, b, c, d) {
    return new cc.Waves3D(a, b, c, d)
};
cc.Waves3D.create = cc.waves3D;
cc.FlipX3D = cc.Grid3DAction.extend({
    ctor: function (a) {
        void 0 !== a ? cc.GridAction.prototype.ctor.call(this, a, cc.size(1, 1)) : cc.GridAction.prototype.ctor.call(this)
    },
    initWithDuration: function (a) {
        return cc.Grid3DAction.prototype.initWithDuration.call(this, a, cc.size(1, 1))
    },
    initWithSize: function (a, b) {
        return 1 !== a.width || 1 !== a.height ? (cc.log("Grid size must be (1,1)"), !1) : cc.Grid3DAction.prototype.initWithDuration.call(this, b, a)
    },
    update: function (a) {
        var b = Math.PI * a;
        a = Math.sin(b);
        var c = Math.cos(b / 2),
            b = new cc.Vertex3F,
            d = cc.p(0, 0);
        d.x = d.y = 1;
        var f = this.originalVertex(d);
        d.x = d.y = 0;
        var d = this.originalVertex(d),
            g = f.x,
            h = d.x,
            m, n;
        g > h ? (f = cc.p(0, 0), d = cc.p(0, 1), m = cc.p(1, 0), n = cc.p(1, 1)) : (m = cc.p(0, 0), n = cc.p(0, 1), f = cc.p(1, 0), d = cc.p(1, 1), g = h);
        b.x = g - g * c;
        b.z = Math.abs(parseFloat(g * a / 4));
        a = this.originalVertex(f);
        a.x = b.x;
        a.z += b.z;
        this.setVertex(f, a);
        a = this.originalVertex(d);
        a.x = b.x;
        a.z += b.z;
        this.setVertex(d, a);
        a = this.originalVertex(m);
        a.x -= b.x;
        a.z -= b.z;
        this.setVertex(m, a);
        a = this.originalVertex(n);
        a.x -= b.x;
        a.z -= b.z;
        this.setVertex(n,
            a)
    }
});
cc.flipX3D = function (a) {
    return new cc.FlipX3D(a)
};
cc.FlipX3D.create = cc.flipX3D;
cc.FlipY3D = cc.FlipX3D.extend({
    ctor: function (a) {
        void 0 !== a ? cc.GridAction.prototype.ctor.call(this, a, cc.size(1, 1)) : cc.GridAction.prototype.ctor.call(this)
    },
    update: function (a) {
        var b = Math.PI * a;
        a = Math.sin(b);
        var c = Math.cos(b / 2),
            b = new cc.Vertex3F,
            d = cc.p(0, 0);
        d.x = d.y = 1;
        var f = this.originalVertex(d);
        d.x = d.y = 0;
        var d = this.originalVertex(d),
            g = f.y,
            h = d.y,
            m, n;
        g > h ? (f = cc.p(0, 0), d = cc.p(0, 1), m = cc.p(1, 0), n = cc.p(1, 1)) : (d = cc.p(0, 0), f = cc.p(0, 1), n = cc.p(1, 0), m = cc.p(1, 1), g = h);
        b.y = g - g * c;
        b.z = Math.abs(parseFloat(g * a) / 4);
        a = this.originalVertex(f);
        a.y = b.y;
        a.z += b.z;
        this.setVertex(f, a);
        a = this.originalVertex(d);
        a.y -= b.y;
        a.z -= b.z;
        this.setVertex(d, a);
        a = this.originalVertex(m);
        a.y = b.y;
        a.z += b.z;
        this.setVertex(m, a);
        a = this.originalVertex(n);
        a.y -= b.y;
        a.z -= b.z;
        this.setVertex(n, a)
    }
});
cc.flipY3D = function (a) {
    return new cc.FlipY3D(a)
};
cc.FlipY3D.create = cc.flipY3D;
cc.Lens3D = cc.Grid3DAction.extend({
    _position: null,
    _radius: 0,
    _lensEffect: 0,
    _concave: !1,
    _dirty: !1,
    ctor: function (a, b, c, d) {
        cc.GridAction.prototype.ctor.call(this);
        this._position = cc.p(0, 0);
        void 0 !== d && this.initWithDuration(a, b, c, d)
    },
    getLensEffect: function () {
        return this._lensEffect
    },
    setLensEffect: function (a) {
        this._lensEffect = a
    },
    setConcave: function (a) {
        this._concave = a
    },
    getPosition: function () {
        return this._position
    },
    setPosition: function (a) {
        cc.pointEqualToPoint(a, this._position) || (this._position.x = a.x, this._position.y =
            a.y, this._dirty = !0)
    },
    initWithDuration: function (a, b, c, d) {
        return cc.Grid3DAction.prototype.initWithDuration.call(this, a, b) ? (this.setPosition(c), this._radius = d, this._lensEffect = 0.7, this._dirty = !0) : !1
    },
    update: function (a) {
        if (this._dirty) {
            a = this._gridSize.width;
            for (var b = this._gridSize.height, c = this._radius, d = this._lensEffect, f = cc.p(0, 0), g = cc.p(0, 0), h, m, n, p = 0; p < a + 1; ++p)
                for (var u = 0; u < b + 1; ++u) f.x = p, f.y = u, h = this.originalVertex(f), g.x = this._position.x - h.x, g.y = this._position.y - h.y, m = cc.pLength(g), m < c && (m = c -
                    m, m /= c, 0 === m && (m = 0.0010), m = Math.log(m) * d, n = Math.exp(m) * c, m = cc.pLength(g), 0 < m && (g.x /= m, g.y /= m, g.x *= n, g.y *= n, h.z += cc.pLength(g) * d)), this.setVertex(f, h);
            this._dirty = !1
        }
    }
});
cc.lens3D = function (a, b, c, d) {
    return new cc.Lens3D(a, b, c, d)
};
cc.Lens3D.create = cc.lens3D;
cc.Ripple3D = cc.Grid3DAction.extend({
    _position: null,
    _radius: 0,
    _waves: 0,
    _amplitude: 0,
    _amplitudeRate: 0,
    ctor: function (a, b, c, d, f, g) {
        cc.GridAction.prototype.ctor.call(this);
        this._position = cc.p(0, 0);
        void 0 !== g && this.initWithDuration(a, b, c, d, f, g)
    },
    getPosition: function () {
        return this._position
    },
    setPosition: function (a) {
        this._position.x = a.x;
        this._position.y = a.y
    },
    getAmplitude: function () {
        return this._amplitude
    },
    setAmplitude: function (a) {
        this._amplitude = a
    },
    getAmplitudeRate: function () {
        return this._amplitudeRate
    },
    setAmplitudeRate: function (a) {
        this._amplitudeRate = a
    },
    initWithDuration: function (a, b, c, d, f, g) {
        return cc.Grid3DAction.prototype.initWithDuration.call(this, a, b) ? (this.setPosition(c), this._radius = d, this._waves = f, this._amplitude = g, this._amplitudeRate = 1, !0) : !1
    },
    update: function (a) {
        for (var b = this._gridSize.width, c = this._gridSize.height, d = cc.p(0, 0), f = this._radius, g = this._waves, h = this._amplitude, m = this._amplitudeRate, n, p, u = cc.p(0, 0), v = 0; v < b + 1; ++v)
            for (var x = 0; x < c + 1; ++x) {
                d.x = v;
                d.y = x;
                n = this.originalVertex(d);
                u.x =
                    this._position.x - n.x;
                u.y = this._position.y - n.y;
                p = cc.pLength(u);
                if (p < f) {
                    p = f - p;
                    var y = Math.pow(p / f, 2);
                    n.z += Math.sin(2 * a * Math.PI * g + 0.1 * p) * h * m * y
                }
                this.setVertex(d, n)
            }
    }
});
cc.ripple3D = function (a, b, c, d, f, g) {
    return new cc.Ripple3D(a, b, c, d, f, g)
};
cc.Ripple3D.create = cc.ripple3D;
cc.Shaky3D = cc.Grid3DAction.extend({
    _randRange: 0,
    _shakeZ: !1,
    ctor: function (a, b, c, d) {
        cc.GridAction.prototype.ctor.call(this);
        void 0 !== d && this.initWithDuration(a, b, c, d)
    },
    initWithDuration: function (a, b, c, d) {
        return cc.Grid3DAction.prototype.initWithDuration.call(this, a, b) ? (this._randRange = c, this._shakeZ = d, !0) : !1
    },
    update: function (a) {
        a = this._gridSize.width;
        for (var b = this._gridSize.height, c = this._randRange, d = this._shakeZ, f = cc.p(0, 0), g, h = 0; h < a + 1; ++h)
            for (var m = 0; m < b + 1; ++m) f.x = h, f.y = m, g = this.originalVertex(f),
                g.x += cc.rand() % (2 * c) - c, g.y += cc.rand() % (2 * c) - c, d && (g.z += cc.rand() % (2 * c) - c), this.setVertex(f, g)
    }
});
cc.shaky3D = function (a, b, c, d) {
    return new cc.Shaky3D(a, b, c, d)
};
cc.Shaky3D.create = cc.shaky3D;
cc.Liquid = cc.Grid3DAction.extend({
    _waves: 0,
    _amplitude: 0,
    _amplitudeRate: 0,
    ctor: function (a, b, c, d) {
        cc.GridAction.prototype.ctor.call(this);
        void 0 !== d && this.initWithDuration(a, b, c, d)
    },
    getAmplitude: function () {
        return this._amplitude
    },
    setAmplitude: function (a) {
        this._amplitude = a
    },
    getAmplitudeRate: function () {
        return this._amplitudeRate
    },
    setAmplitudeRate: function (a) {
        this._amplitudeRate = a
    },
    initWithDuration: function (a, b, c, d) {
        return cc.Grid3DAction.prototype.initWithDuration.call(this, a, b) ? (this._waves = c, this._amplitude =
            d, this._amplitudeRate = 1, !0) : !1
    },
    update: function (a) {
        for (var b = this._gridSize.width, c = this._gridSize.height, d = cc.p(0, 0), f = this._waves, g = this._amplitude, h = this._amplitudeRate, m, n = 1; n < b; ++n)
            for (var p = 1; p < c; ++p) d.x = n, d.y = p, m = this.originalVertex(d), m.x += Math.sin(2 * a * Math.PI * f + 0.01 * m.x) * g * h, m.y += Math.sin(2 * a * Math.PI * f + 0.01 * m.y) * g * h, this.setVertex(d, m)
    }
});
cc.liquid = function (a, b, c, d) {
    return new cc.Liquid(a, b, c, d)
};
cc.Liquid.create = cc.liquid;
cc.Waves = cc.Grid3DAction.extend({
    _waves: 0,
    _amplitude: 0,
    _amplitudeRate: 0,
    _vertical: !1,
    _horizontal: !1,
    ctor: function (a, b, c, d, f, g) {
        cc.GridAction.prototype.ctor.call(this);
        void 0 !== g && this.initWithDuration(a, b, c, d, f, g)
    },
    getAmplitude: function () {
        return this._amplitude
    },
    setAmplitude: function (a) {
        this._amplitude = a
    },
    getAmplitudeRate: function () {
        return this._amplitudeRate
    },
    setAmplitudeRate: function (a) {
        this._amplitudeRate = a
    },
    initWithDuration: function (a, b, c, d, f, g) {
        return cc.Grid3DAction.prototype.initWithDuration.call(this,
            a, b) ? (this._waves = c, this._amplitude = d, this._amplitudeRate = 1, this._horizontal = f, this._vertical = g, !0) : !1
    },
    update: function (a) {
        for (var b = this._gridSize.width, c = this._gridSize.height, d = cc.p(0, 0), f = this._vertical, g = this._horizontal, h = this._waves, m = this._amplitude, n = this._amplitudeRate, p, u = 0; u < b + 1; ++u)
            for (var v = 0; v < c + 1; ++v) d.x = u, d.y = v, p = this.originalVertex(d), f && (p.x += Math.sin(2 * a * Math.PI * h + 0.01 * p.y) * m * n), g && (p.y += Math.sin(2 * a * Math.PI * h + 0.01 * p.x) * m * n), this.setVertex(d, p)
    }
});
cc.waves = function (a, b, c, d, f, g) {
    return new cc.Waves(a, b, c, d, f, g)
};
cc.Waves.create = cc.waves;
cc.Twirl = cc.Grid3DAction.extend({
    _position: null,
    _twirls: 0,
    _amplitude: 0,
    _amplitudeRate: 0,
    ctor: function (a, b, c, d, f) {
        cc.GridAction.prototype.ctor.call(this);
        this._position = cc.p(0, 0);
        void 0 !== f && this.initWithDuration(a, b, c, d, f)
    },
    getPosition: function () {
        return this._position
    },
    setPosition: function (a) {
        this._position.x = a.x;
        this._position.y = a.y
    },
    getAmplitude: function () {
        return this._amplitude
    },
    setAmplitude: function (a) {
        this._amplitude = a
    },
    getAmplitudeRate: function () {
        return this._amplitudeRate
    },
    setAmplitudeRate: function (a) {
        this._amplitudeRate =
            a
    },
    initWithDuration: function (a, b, c, d, f) {
        return cc.Grid3DAction.prototype.initWithDuration.call(this, a, b) ? (this.setPosition(c), this._twirls = d, this._amplitude = f, this._amplitudeRate = 1, !0) : !1
    },
    update: function (a) {
        for (var b = this._position, c = this._gridSize.width, d = this._gridSize.height, f = cc.p(0, 0), g = 0.1 * this._amplitude * this._amplitudeRate, h = this._twirls, m, n, p, u = cc.p(0, 0), v = 0; v < c + 1; ++v)
            for (var x = 0; x < d + 1; ++x) f.x = v, f.y = x, m = this.originalVertex(f), u.x = v - c / 2, u.y = x - d / 2, n = cc.pLength(u) * Math.cos(Math.PI / 2 + 2 * a * Math.PI *
                h) * g, p = Math.sin(n) * (m.y - b.y) + Math.cos(n) * (m.x - b.x), n = Math.cos(n) * (m.y - b.y) - Math.sin(n) * (m.x - b.x), m.x = b.x + p, m.y = b.y + n, this.setVertex(f, m)
    }
});
cc.twirl = function (a, b, c, d, f) {
    return new cc.Twirl(a, b, c, d, f)
};
cc.Twirl.create = cc.twirl;
cc.ShakyTiles3D = cc.TiledGrid3DAction.extend({
    _randRange: 0,
    _shakeZ: !1,
    ctor: function (a, b, c, d) {
        cc.GridAction.prototype.ctor.call(this);
        void 0 !== d && this.initWithDuration(a, b, c, d)
    },
    initWithDuration: function (a, b, c, d) {
        return cc.TiledGrid3DAction.prototype.initWithDuration.call(this, a, b) ? (this._randRange = c, this._shakeZ = d, !0) : !1
    },
    update: function (a) {
        a = this._gridSize;
        for (var b = this._randRange, c = cc.p(0, 0), d = 0; d < a.width; ++d)
            for (var f = 0; f < a.height; ++f) {
                c.x = d;
                c.y = f;
                var g = this.originalTile(c);
                g.bl.x += cc.rand() % (2 *
                    b) - b;
                g.br.x += cc.rand() % (2 * b) - b;
                g.tl.x += cc.rand() % (2 * b) - b;
                g.tr.x += cc.rand() % (2 * b) - b;
                g.bl.y += cc.rand() % (2 * b) - b;
                g.br.y += cc.rand() % (2 * b) - b;
                g.tl.y += cc.rand() % (2 * b) - b;
                g.tr.y += cc.rand() % (2 * b) - b;
                this._shakeZ && (g.bl.z += cc.rand() % (2 * b) - b, g.br.z += cc.rand() % (2 * b) - b, g.tl.z += cc.rand() % (2 * b) - b, g.tr.z += cc.rand() % (2 * b) - b);
                this.setTile(c, g)
            }
    }
});
cc.shakyTiles3D = function (a, b, c, d) {
    return new cc.ShakyTiles3D(a, b, c, d)
};
cc.ShakyTiles3D.create = cc.shakyTiles3D;
cc.ShatteredTiles3D = cc.TiledGrid3DAction.extend({
    _randRange: 0,
    _once: !1,
    _shatterZ: !1,
    ctor: function (a, b, c, d) {
        cc.GridAction.prototype.ctor.call(this);
        void 0 !== d && this.initWithDuration(a, b, c, d)
    },
    initWithDuration: function (a, b, c, d) {
        return cc.TiledGrid3DAction.prototype.initWithDuration.call(this, a, b) ? (this._once = !1, this._randRange = c, this._shatterZ = d, !0) : !1
    },
    update: function (a) {
        if (!1 === this._once) {
            a = this._gridSize;
            for (var b = this._randRange, c, d = cc.p(0, 0), f = 0; f < a.width; ++f)
                for (var g = 0; g < a.height; ++g) d.x = f,
                    d.y = g, c = this.originalTile(d), c.bl.x += cc.rand() % (2 * b) - b, c.br.x += cc.rand() % (2 * b) - b, c.tl.x += cc.rand() % (2 * b) - b, c.tr.x += cc.rand() % (2 * b) - b, c.bl.y += cc.rand() % (2 * b) - b, c.br.y += cc.rand() % (2 * b) - b, c.tl.y += cc.rand() % (2 * b) - b, c.tr.y += cc.rand() % (2 * b) - b, this._shatterZ && (c.bl.z += cc.rand() % (2 * b) - b, c.br.z += cc.rand() % (2 * b) - b, c.tl.z += cc.rand() % (2 * b) - b, c.tr.z += cc.rand() % (2 * b) - b), this.setTile(d, c);
            this._once = !0
        }
    }
});
cc.shatteredTiles3D = function (a, b, c, d) {
    return new cc.ShatteredTiles3D(a, b, c, d)
};
cc.ShatteredTiles3D.create = cc.shatteredTiles3D;
cc.Tile = function (a, b, c) {
    this.position = a || cc.p(0, 0);
    this.startPosition = b || cc.p(0, 0);
    this.delta = c || cc.p(0, 0)
};
cc.ShuffleTiles = cc.TiledGrid3DAction.extend({
    _seed: 0,
    _tilesCount: 0,
    _tilesOrder: null,
    _tiles: null,
    ctor: function (a, b, c) {
        cc.GridAction.prototype.ctor.call(this);
        this._tilesOrder = [];
        this._tiles = [];
        void 0 !== c && this.initWithDuration(a, b, c)
    },
    initWithDuration: function (a, b, c) {
        return cc.TiledGrid3DAction.prototype.initWithDuration.call(this, a, b) ? (this._seed = c, this._tilesOrder.length = 0, this._tiles.length = 0, !0) : !1
    },
    shuffle: function (a, b) {
        for (var c = b - 1; 0 <= c; c--) {
            var d = 0 | cc.rand() % (c + 1),
                f = a[c];
            a[c] = a[d];
            a[d] = f
        }
    },
    getDelta: function (a) {
        var b = this._gridSize,
            c = a.width * b.height + a.height;
        return cc.size(this._tilesOrder[c] / b.height - a.width, this._tilesOrder[c] % b.height - a.height)
    },
    placeTile: function (a, b) {
        var c = this.originalTile(a),
            d = this.target.grid.getStep(),
            f = b.position;
        c.bl.x += f.x * d.x;
        c.bl.y += f.y * d.y;
        c.br.x += f.x * d.x;
        c.br.y += f.y * d.y;
        c.tl.x += f.x * d.x;
        c.tl.y += f.y * d.y;
        c.tr.x += f.x * d.x;
        c.tr.y += f.y * d.y;
        this.setTile(a, c)
    },
    startWithTarget: function (a) {
        cc.TiledGrid3DAction.prototype.startWithTarget.call(this, a);
        a = this._gridSize;
        this._tilesCount = a.width * a.height;
        for (var b = this._tilesOrder, c = b.length = 0; c < this._tilesCount; ++c) b[c] = c;
        this.shuffle(b, this._tilesCount);
        for (var b = this._tiles, c = b.length = 0, d = cc.size(0, 0), f = 0; f < a.width; ++f)
            for (var g = 0; g < a.height; ++g) b[c] = new cc.Tile, b[c].position = cc.p(f, g), b[c].startPosition = cc.p(f, g), d.width = f, d.height = g, b[c].delta = this.getDelta(d), ++c
    },
    update: function (a) {
        for (var b = 0, c = this._gridSize, d = this._tiles, f, g = cc.p(0, 0), h = 0; h < c.width; ++h)
            for (var m = 0; m < c.height; ++m) g.x = h, g.y = m, f = d[b], f.position.x =
                f.delta.width * a, f.position.y = f.delta.height * a, this.placeTile(g, f), ++b
    }
});
cc.shuffleTiles = function (a, b, c) {
    return new cc.ShuffleTiles(a, b, c)
};
cc.ShuffleTiles.create = cc.shuffleTiles;
cc.FadeOutTRTiles = cc.TiledGrid3DAction.extend({
    testFunc: function (a, b) {
        var c = this._gridSize.width * b,
            d = this._gridSize.height * b;
        return c === this._gridSize.width && d === this._gridSize.height ? 0 : 0 === c + d ? 1 : Math.pow((a.x + a.y) / (c + d), 6)
    },
    turnOnTile: function (a) {
        this.setTile(a, this.originalTile(a))
    },
    turnOffTile: function (a) {
        this.setTile(a, new cc.Quad3)
    },
    transformTile: function (a, b) {
        var c = this.originalTile(a),
            d = this.target.grid.getStep();
        c.bl.x += d.x / 2 * (1 - b);
        c.bl.y += d.y / 2 * (1 - b);
        c.br.x -= d.x / 2 * (1 - b);
        c.br.y += d.y / 2 * (1 -
            b);
        c.tl.x += d.x / 2 * (1 - b);
        c.tl.y -= d.y / 2 * (1 - b);
        c.tr.x -= d.x / 2 * (1 - b);
        c.tr.y -= d.y / 2 * (1 - b);
        this.setTile(a, c)
    },
    update: function (a) {
        for (var b = this._gridSize, c = cc.p(0, 0), d, f = 0; f < b.width; ++f)
            for (var g = 0; g < b.height; ++g) c.x = f, c.y = g, d = this.testFunc(c, a), 0 === d ? this.turnOffTile(c) : 1 > d ? this.transformTile(c, d) : this.turnOnTile(c)
    }
});
cc.fadeOutTRTiles = function (a, b) {
    return new cc.FadeOutTRTiles(a, b)
};
cc.FadeOutTRTiles.create = cc.fadeOutTRTiles;
cc.FadeOutBLTiles = cc.FadeOutTRTiles.extend({
    testFunc: function (a, b) {
        var c = this._gridSize.width * (1 - b),
            d = this._gridSize.height * (1 - b);
        return 0 === c + d ? 0 : 0 === a.x + a.y ? 1 : Math.pow((c + d) / (a.x + a.y), 6)
    }
});
cc.fadeOutBLTiles = function (a, b) {
    return new cc.FadeOutBLTiles(a, b)
};
cc.FadeOutBLTiles.create = cc.fadeOutBLTiles;
cc.FadeOutUpTiles = cc.FadeOutTRTiles.extend({
    testFunc: function (a, b) {
        var c = this._gridSize.height * b;
        return c === this._gridSize.height ? 0 : 0 === c ? 1 : Math.pow(a.y / c, 6)
    },
    transformTile: function (a, b) {
        var c = this.originalTile(a),
            d = this.target.grid.getStep();
        c.bl.y += d.y / 2 * (1 - b);
        c.br.y += d.y / 2 * (1 - b);
        c.tl.y -= d.y / 2 * (1 - b);
        c.tr.y -= d.y / 2 * (1 - b);
        this.setTile(a, c)
    }
});
cc.fadeOutUpTiles = function (a, b) {
    return new cc.FadeOutUpTiles(a, b)
};
cc.FadeOutUpTiles.create = cc.fadeOutUpTiles;
cc.FadeOutDownTiles = cc.FadeOutUpTiles.extend({
    testFunc: function (a, b) {
        var c = this._gridSize.height * (1 - b);
        return 0 === c ? 0 : 0 === a.y ? 1 : Math.pow(c / a.y, 6)
    }
});
cc.fadeOutDownTiles = function (a, b) {
    return new cc.FadeOutDownTiles(a, b)
};
cc.FadeOutDownTiles.create = cc.fadeOutDownTiles;
cc.TurnOffTiles = cc.TiledGrid3DAction.extend({
    _seed: null,
    _tilesCount: 0,
    _tilesOrder: null,
    ctor: function (a, b, c) {
        cc.GridAction.prototype.ctor.call(this);
        this._tilesOrder = [];
        void 0 !== b && this.initWithDuration(a, b, c)
    },
    initWithDuration: function (a, b, c) {
        return cc.TiledGrid3DAction.prototype.initWithDuration.call(this, a, b) ? (this._seed = c || 0, this._tilesOrder.length = 0, !0) : !1
    },
    shuffle: function (a, b) {
        for (var c = b - 1; 0 <= c; c--) {
            var d = 0 | cc.rand() % (c + 1),
                f = a[c];
            a[c] = a[d];
            a[d] = f
        }
    },
    turnOnTile: function (a) {
        this.setTile(a, this.originalTile(a))
    },
    turnOffTile: function (a) {
        this.setTile(a, new cc.Quad3)
    },
    startWithTarget: function (a) {
        cc.TiledGrid3DAction.prototype.startWithTarget.call(this, a);
        this._tilesCount = this._gridSize.width * this._gridSize.height;
        a = this._tilesOrder;
        for (var b = a.length = 0; b < this._tilesCount; ++b) a[b] = b;
        this.shuffle(a, this._tilesCount)
    },
    update: function (a) {
        a = 0 | a * this._tilesCount;
        for (var b = this._gridSize, c, d = cc.p(0, 0), f = this._tilesOrder, g = 0; g < this._tilesCount; g++) c = f[g], d.x = 0 | c / b.height, d.y = c % (0 | b.height), g < a ? this.turnOffTile(d) : this.turnOnTile(d)
    }
});
cc.turnOffTiles = function (a, b, c) {
    return new cc.TurnOffTiles(a, b, c)
};
cc.TurnOffTiles.create = cc.turnOffTiles;
cc.WavesTiles3D = cc.TiledGrid3DAction.extend({
    _waves: 0,
    _amplitude: 0,
    _amplitudeRate: 0,
    ctor: function (a, b, c, d) {
        cc.GridAction.prototype.ctor.call(this);
        void 0 !== d && this.initWithDuration(a, b, c, d)
    },
    getAmplitude: function () {
        return this._amplitude
    },
    setAmplitude: function (a) {
        this._amplitude = a
    },
    getAmplitudeRate: function () {
        return this._amplitudeRate
    },
    setAmplitudeRate: function (a) {
        this._amplitudeRate = a
    },
    initWithDuration: function (a, b, c, d) {
        return cc.TiledGrid3DAction.prototype.initWithDuration.call(this, a, b) ? (this._waves =
            c, this._amplitude = d, this._amplitudeRate = 1, !0) : !1
    },
    update: function (a) {
        for (var b = this._gridSize, c = this._waves, d = this._amplitude, f = this._amplitudeRate, g = cc.p(0, 0), h, m = 0; m < b.width; m++)
            for (var n = 0; n < b.height; n++) g.x = m, g.y = n, h = this.originalTile(g), h.bl.z = Math.sin(2 * a * Math.PI * c + 0.01 * (h.bl.y + h.bl.x)) * d * f, h.br.z = h.bl.z, h.tl.z = h.bl.z, h.tr.z = h.bl.z, this.setTile(g, h)
    }
});
cc.wavesTiles3D = function (a, b, c, d) {
    return new cc.WavesTiles3D(a, b, c, d)
};
cc.WavesTiles3D.create = cc.wavesTiles3D;
cc.JumpTiles3D = cc.TiledGrid3DAction.extend({
    _jumps: 0,
    _amplitude: 0,
    _amplitudeRate: 0,
    ctor: function (a, b, c, d) {
        cc.GridAction.prototype.ctor.call(this);
        void 0 !== d && this.initWithDuration(a, b, c, d)
    },
    getAmplitude: function () {
        return this._amplitude
    },
    setAmplitude: function (a) {
        this._amplitude = a
    },
    getAmplitudeRate: function () {
        return this._amplitudeRate
    },
    setAmplitudeRate: function (a) {
        this._amplitudeRate = a
    },
    initWithDuration: function (a, b, c, d) {
        return cc.TiledGrid3DAction.prototype.initWithDuration.call(this, a, b) ? (this._jumps =
            c, this._amplitude = d, this._amplitudeRate = 1, !0) : !1
    },
    update: function (a) {
        var b = Math.sin(2 * Math.PI * a * this._jumps) * this._amplitude * this._amplitudeRate;
        a = Math.sin(Math.PI * (2 * a * this._jumps + 1)) * this._amplitude * this._amplitudeRate;
        for (var c = this._gridSize, d = this.target.grid, f, g = cc.p(0, 0), h = 0; h < c.width; h++)
            for (var m = 0; m < c.height; m++) g.x = h, g.y = m, f = d.originalTile(g), 0 === (h + m) % 2 ? (f.bl.z += b, f.br.z += b, f.tl.z += b, f.tr.z += b) : (f.bl.z += a, f.br.z += a, f.tl.z += a, f.tr.z += a), d.setTile(g, f)
    }
});
cc.jumpTiles3D = function (a, b, c, d) {
    return new cc.JumpTiles3D(a, b, c, d)
};
cc.JumpTiles3D.create = cc.jumpTiles3D;
cc.SplitRows = cc.TiledGrid3DAction.extend({
    _rows: 0,
    _winSize: null,
    ctor: function (a, b) {
        cc.GridAction.prototype.ctor.call(this);
        void 0 !== b && this.initWithDuration(a, b)
    },
    initWithDuration: function (a, b) {
        this._rows = b;
        return cc.TiledGrid3DAction.prototype.initWithDuration.call(this, a, cc.size(1, b))
    },
    update: function (a) {
        for (var b = this._gridSize, c = this._winSize.width, d, f, g = cc.p(0, 0), h = 0; h < b.height; ++h) g.y = h, d = this.originalTile(g), f = 1, 0 === h % 2 && (f = -1), d.bl.x += f * c * a, d.br.x += f * c * a, d.tl.x += f * c * a, d.tr.x += f * c * a, this.setTile(g,
            d)
    },
    startWithTarget: function (a) {
        cc.TiledGrid3DAction.prototype.startWithTarget.call(this, a);
        this._winSize = cc.director.getWinSizeInPixels()
    }
});
cc.splitRows = function (a, b) {
    return new cc.SplitRows(a, b)
};
cc.SplitRows.create = cc.splitRows;
cc.SplitCols = cc.TiledGrid3DAction.extend({
    _cols: 0,
    _winSize: null,
    ctor: function (a, b) {
        cc.GridAction.prototype.ctor.call(this);
        void 0 !== b && this.initWithDuration(a, b)
    },
    initWithDuration: function (a, b) {
        this._cols = b;
        return cc.TiledGrid3DAction.prototype.initWithDuration.call(this, a, cc.size(b, 1))
    },
    update: function (a) {
        for (var b = this._gridSize.width, c = this._winSize.height, d, f, g = cc.p(0, 0), h = 0; h < b; ++h) g.x = h, d = this.originalTile(g), f = 1, 0 === h % 2 && (f = -1), d.bl.y += f * c * a, d.br.y += f * c * a, d.tl.y += f * c * a, d.tr.y += f * c * a, this.setTile(g,
            d);
        cc.renderer.childrenOrderDirty = !0
    },
    startWithTarget: function (a) {
        cc.TiledGrid3DAction.prototype.startWithTarget.call(this, a);
        this._winSize = cc.director.getWinSizeInPixels()
    }
});
cc.splitCols = function (a, b) {
    return new cc.SplitCols(a, b)
};
cc.SplitCols.create = cc.splitCols;
cc.PageTurn3D = cc.Grid3DAction.extend({
    getGrid: function () {
        var a = new cc.Grid3D(this._gridSize, void 0, void 0, this._gridNodeTarget.getGridRect());
        a.setNeedDepthTestForBlit(!0);
        return a
    },
    clone: function () {
        var a = new cc.PageTurn3D;
        a.initWithDuration(this._duration, this._gridSize);
        return a
    },
    update: function (a) {
        var b = Math.max(0, a - 0.25),
            b = -100 - 500 * b * b,
            c = Math.sqrt(a),
            d = 0.5 < c ? Math.PI / 2 * c : Math.PI / 2 * (1 - c);
        a = (2 - a) * Math.PI;
        for (var c = Math.sin(d), d = Math.cos(d), f = this._gridSize, g = cc.p(0, 0), h = 0; h <= f.width; ++h)
            for (var m =
                    0; m <= f.height; ++m) {
                g.x = h;
                g.y = m;
                var n = this.getOriginalVertex(g);
                n.x -= this.getGridRect().x;
                var p = Math.sqrt(n.x * n.x + (n.y - b) * (n.y - b)),
                    u = p * c,
                    v = Math.asin(n.x / p) / c,
                    x = Math.cos(v);
                n.x = v <= Math.PI ? u * Math.sin(v) : 0;
                n.y = p + b - u * (1 - x) * c;
                n.z = u * (1 - x) * d;
                n.x = n.z * Math.sin(a) + n.x * Math.cos(a);
                n.z = n.z * Math.cos(a) - n.x * Math.cos(a);
                n.z /= 7;
                0.5 > n.z && (n.z = 0.5);
                n.x += this.getGridRect().x;
                this.setVertex(g, n)
            }
    }
});
cc.pageTurn3D = function (a, b) {
    return new cc.PageTurn3D(a, b)
};
cc.PageTurn3D.create = cc.pageTurn3D;
cc.ProgressTimer = cc.Node.extend({
    _type: null,
    _percentage: 0,
    _sprite: null,
    _midPoint: null,
    _barChangeRate: null,
    _reverseDirection: !1,
    _className: "ProgressTimer",
    ctor: function (a) {
        cc.Node.prototype.ctor.call(this);
        this._type = cc.ProgressTimer.TYPE_RADIAL;
        this._percentage = 0;
        this._midPoint = cc.p(0, 0);
        this._barChangeRate = cc.p(0, 0);
        this._reverseDirection = !1;
        this._sprite = null;
        a && this.initWithSprite(a)
    },
    onEnter: function () {
        this._super();
        cc._renderType === cc.game.RENDER_TYPE_WEBGL && (this._renderCmd.initCmd(), this._renderCmd._updateProgress())
    },
    cleanup: function () {
        cc._renderType === cc.game.RENDER_TYPE_WEBGL && this._renderCmd.releaseData();
        this._super()
    },
    getMidpoint: function () {
        return cc.p(this._midPoint.x, this._midPoint.y)
    },
    setMidpoint: function (a) {
        this._midPoint = cc.pClamp(a, cc.p(0, 0), cc.p(1, 1))
    },
    getBarChangeRate: function () {
        return cc.p(this._barChangeRate.x, this._barChangeRate.y)
    },
    setBarChangeRate: function (a) {
        this._barChangeRate = cc.pClamp(a, cc.p(0, 0), cc.p(1, 1))
    },
    getType: function () {
        return this._type
    },
    getPercentage: function () {
        return this._percentage
    },
    getSprite: function () {
        return this._sprite
    },
    setPercentage: function (a) {
        this._percentage !== a && (this._percentage = cc.clampf(a, 0, 100), this._renderCmd._updateProgress())
    },
    setOpacityModifyRGB: function (a) {},
    isOpacityModifyRGB: function () {
        return !1
    },
    isReverseDirection: function () {
        return this._reverseDirection
    },
    setColor: function (a) {
        this._sprite.color = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)
    },
    setOpacity: function (a) {
        this._sprite.opacity = a;
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)
    },
    getColor: function () {
        return this._sprite.color
    },
    getOpacity: function () {
        return this._sprite.opacity
    },
    setReverseProgress: function (a) {
        this._reverseDirection !== a && (this._reverseDirection = a, this._renderCmd.resetVertexData())
    },
    setSprite: function (a) {
        this._sprite !== a && ((this._sprite = a) ? (this.setContentSize(a.width, a.height), a.ignoreAnchorPointForPosition(!0)) : this.setContentSize(0, 0), this._renderCmd.resetVertexData())
    },
    setType: function (a) {
        a !== this._type && (this._type = a, this._renderCmd.resetVertexData())
    },
    setReverseDirection: function (a) {
        this._reverseDirection !==
            a && (this._reverseDirection = a, this._renderCmd.resetVertexData())
    },
    initWithSprite: function (a) {
        this.percentage = 0;
        this.setAnchorPoint(0.5, 0.5);
        this._type = cc.ProgressTimer.TYPE_RADIAL;
        this._reverseDirection = !1;
        this.midPoint = cc.p(0.5, 0.5);
        this.barChangeRate = cc.p(1, 1);
        this.setSprite(a);
        this._renderCmd.resetVertexData();
        return !0
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new cc.ProgressTimer.CanvasRenderCmd(this) : new cc.ProgressTimer.WebGLRenderCmd(this)
    }
});
_p = cc.ProgressTimer.prototype;
cc.defineGetterSetter(_p, "midPoint", _p.getMidpoint, _p.setMidpoint);
cc.defineGetterSetter(_p, "barChangeRate", _p.getBarChangeRate, _p.setBarChangeRate);
cc.defineGetterSetter(_p, "type", _p.getType, _p.setType);
cc.defineGetterSetter(_p, "percentage", _p.getPercentage, _p.setPercentage);
cc.defineGetterSetter(_p, "sprite", _p.getSprite, _p.setSprite);
cc.defineGetterSetter(_p, "reverseDir", _p.isReverseDirection, _p.setReverseDirection);
cc.ProgressTimer.create = function (a) {
    return new cc.ProgressTimer(a)
};
cc.ProgressTimer.TEXTURE_COORDS_COUNT = 4;
cc.ProgressTimer.TEXTURE_COORDS = 75;
cc.ProgressTimer.TYPE_RADIAL = 0;
cc.ProgressTimer.TYPE_BAR = 1;
cc.ProgressTo = cc.ActionInterval.extend({
    _to: 0,
    _from: 0,
    ctor: function (a, b) {
        cc.ActionInterval.prototype.ctor.call(this);
        this._from = this._to = 0;
        void 0 !== b && this.initWithDuration(a, b)
    },
    initWithDuration: function (a, b) {
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (this._to = b, !0) : !1
    },
    clone: function () {
        var a = new cc.ProgressTo;
        a.initWithDuration(this._duration, this._to);
        return a
    },
    reverse: function () {
        cc.log("cc.ProgressTo.reverse(): reverse hasn't been supported.");
        return null
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this,
            a);
        this._from = a.percentage
    },
    update: function (a) {
        this.target instanceof cc.ProgressTimer && (this.target.percentage = this._from + (this._to - this._from) * a)
    }
});
cc.progressTo = function (a, b) {
    return new cc.ProgressTo(a, b)
};
cc.ProgressTo.create = cc.progressTo;
cc.ProgressFromTo = cc.ActionInterval.extend({
    _to: 0,
    _from: 0,
    ctor: function (a, b, c) {
        cc.ActionInterval.prototype.ctor.call(this);
        this._from = this._to = 0;
        void 0 !== c && this.initWithDuration(a, b, c)
    },
    initWithDuration: function (a, b, c) {
        return cc.ActionInterval.prototype.initWithDuration.call(this, a) ? (this._to = c, this._from = b, !0) : !1
    },
    clone: function () {
        var a = new cc.ProgressFromTo;
        a.initWithDuration(this._duration, this._from, this._to);
        return a
    },
    reverse: function () {
        return cc.progressFromTo(this._duration, this._to, this._from)
    },
    startWithTarget: function (a) {
        cc.ActionInterval.prototype.startWithTarget.call(this, a)
    },
    update: function (a) {
        this.target instanceof cc.ProgressTimer && (this.target.percentage = this._from + (this._to - this._from) * a)
    }
});
cc.progressFromTo = function (a, b, c) {
    return new cc.ProgressFromTo(a, b, c)
};
cc.ProgressFromTo.create = cc.progressFromTo;
(function () {
    cc.ProgressTimer.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !0;
        this._PI180 = Math.PI / 180;
        this._barRect = cc.rect(0, 0, 0, 0);
        this._origin = cc.p(0, 0);
        this._radius = 0;
        this._endAngle = this._startAngle = 270;
        this._counterClockWise = !1;
        this._canUseDirtyRegion = !0
    };
    var a = cc.ProgressTimer.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    a.constructor = cc.ProgressTimer.CanvasRenderCmd;
    a.rendering = function (a, c, d) {
        a = a || cc._renderContext;
        var f = a.getContext(),
            g = this._node,
            h = g._sprite,
            m = h._renderCmd._textureCoord,
            n = h._renderCmd._displayedOpacity / 255;
        if (!(0 === m.width || 0 === m.height) && h._texture && m.validRect && 0 !== n) {
            a.setTransform(this._worldTransform, c, d);
            a.setCompositeOperation(h._blendFuncStr);
            a.setGlobalAlpha(n);
            var p = h._rect,
                u = h._offsetPosition;
            c = u.x;
            d = -u.y - p.height;
            n = p.width;
            p = p.height;
            a.save();
            h._flippedX && (c = -c - n, f.scale(-1, 1));
            h._flippedY && (d = u.y, f.scale(1, -1));
            g._type === cc.ProgressTimer.TYPE_BAR ? (g = this._barRect, f.beginPath(), f.rect(g.x, g.y, g.width, g.height),
                f.clip(), f.closePath()) : g._type === cc.ProgressTimer.TYPE_RADIAL && (g = this._origin.x, u = this._origin.y, f.beginPath(), f.arc(g, u, this._radius, this._PI180 * this._startAngle, this._PI180 * this._endAngle, this._counterClockWise), f.lineTo(g, u), f.clip(), f.closePath());
            g = (h._renderCmd._textureToRender || h._texture).getHtmlElementObj();
            h._renderCmd._colorized ? f.drawImage(g, 0, 0, m.width, m.height, c, d, n, p) : f.drawImage(g, m.renderX, m.renderY, m.width, m.height, c, d, n, p);
            a.restore();
            cc.g_NumberOfDraws++
        }
    };
    a.releaseData = function () {};
    a.resetVertexData = function () {};
    a._updateProgress = function () {
        this.setDirtyFlag(cc.Node._dirtyFlags.contentDirty);
        var a = this._node,
            c = a._sprite,
            d = c.width,
            f = c.height,
            g = a._midPoint;
        if (a._type === cc.ProgressTimer.TYPE_RADIAL) {
            this._radius = Math.round(Math.sqrt(d * d + f * f));
            var h, m = !1,
                n = this._origin;
            n.x = d * g.x;
            n.y = -f * g.y;
            a._reverseDirection ? (h = 270, g = 270 - 3.6 * a._percentage) : (g = -90, h = -90 + 3.6 * a._percentage);
            c._flippedX && (n.x -= d * 2 * a._midPoint.x, g = -g - 180, h = -h - 180, m = !m);
            c._flippedY && (n.y += f * 2 * a._midPoint.y, m = !m, g = -g,
                h = -h);
            this._startAngle = g;
            this._endAngle = h;
            this._counterClockWise = m
        } else m = a._barChangeRate, n = a._percentage / 100, a = this._barRect, m = cc.size(d * (1 - m.x), f * (1 - m.y)), n = cc.size((d - m.width) * n, (f - m.height) * n), m = cc.size(m.width + n.width, m.height + n.height), h = cc.p(d * g.x, f * g.y), n = h.x - m.width / 2, 0.5 < g.x && m.width / 2 >= d - h.x && (n = d - m.width), d = h.y - m.height / 2, 0.5 < g.y && m.height / 2 >= f - h.y && (d = f - m.height), a.x = 0, f = 1, c._flippedX && (a.x -= m.width, f = -1), 0 < n && (a.x += n * f), a.y = 0, f = 1, c._flippedY && (a.y += m.height, f = -1), 0 < d && (a.y -= d * f), a.width =
            m.width, a.height = -m.height
    };
    a._syncStatus = function (a) {
        var c = this._node;
        if (c._sprite) {
            var d = cc.Node._dirtyFlags,
                f = this._dirtyFlag,
                g = a ? a._node : null;
            g && (g._cascadeColorEnabled && a._dirtyFlag & d.colorDirty) && (f |= d.colorDirty);
            g && (g._cascadeOpacityEnabled && a._dirtyFlag & d.opacityDirty) && (f |= d.opacityDirty);
            a && a._dirtyFlag & d.transformDirty && (f |= d.transformDirty);
            this._dirtyFlag = f;
            var c = c._sprite._renderCmd,
                h = c._dirtyFlag,
                g = h & d.colorDirty,
                h = h & d.opacityDirty;
            g && (c._syncDisplayColor(), c._dirtyFlag &= ~d.colorDirty,
                this._dirtyFlag &= ~d.colorDirty);
            h && (c._syncDisplayOpacity(), c._dirtyFlag &= ~d.opacityDirty, this._dirtyFlag &= ~d.opacityDirty);
            (g || h) && c._updateColor();
            f & d.transformDirty && this.transform(a);
            f & d.orderDirty && (this._dirtyFlag &= ~d.orderDirty)
        }
    };
    a.updateStatus = function () {
        var a = this._node;
        if (a._sprite) {
            var c = cc.Node._dirtyFlags,
                d = this._dirtyFlag,
                a = a._sprite._renderCmd,
                f = a._dirtyFlag,
                g = f & c.colorDirty,
                f = f & c.opacityDirty;
            g && (a._updateDisplayColor(), a._dirtyFlag ^= a._dirtyFlag & c.colorDirty, this._dirtyFlag ^= this._dirtyFlag &
                c.colorDirty);
            f && (a._updateDisplayOpacity(), a._dirtyFlag ^= a._dirtyFlag & c.opacityDirty, this._dirtyFlag ^= this._dirtyFlag & c.opacityDirty);
            (g || f) && a._updateColor();
            d & c.transformDirty && this.transform(this.getParentRenderCmd(), !0);
            d & c.contentDirty && this._notifyRegionStatus && this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty);
            this._dirtyFlag = 0
        }
    }
})();
(function () {
    cc.ProgressTimer.WebGLRenderCmd = function (a) {
        this._rootCtor(a);
        this._progressDirty = this._needDraw = !0;
        this._bl = cc.p();
        this._tr = cc.p();
        this.initCmd()
    };
    var a = cc.ProgressTimer.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
    a.constructor = cc.ProgressTimer.WebGLRenderCmd;
    a.transform = function (a, c) {
        this.originTransform(a, c);
        var d = this._node._sprite;
        d._renderCmd.transform(this, c);
        var f = d._offsetPosition.x,
            g = f + d._rect.width,
            h = d._offsetPosition.y,
            d = h + d._rect.height,
            m = this._worldTransform;
        this._bl.x = f * m.a + h * m.c + m.tx;
        this._bl.y = f * m.b + h * m.d + m.ty;
        this._tr.x = g * m.a + d * m.c + m.tx;
        this._tr.y = g * m.b + d * m.d + m.ty;
        this._updateProgressData()
    };
    a.rendering = function (a) {
        var c = this._node;
        a = a || cc._renderContext;
        if (0 !== this._vertexDataCount && c._sprite) {
            this._shaderProgram.use();
            this._shaderProgram._updateProjectionUniform();
            var d = c._sprite._blendFunc;
            cc.glBlendFunc(d.src, d.dst);
            cc.glBindTexture2D(c._sprite.texture);
            a.bindBuffer(a.ARRAY_BUFFER, this._vertexWebGLBuffer);
            a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
            a.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR);
            a.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
            this._vertexDataDirty && (a.bufferSubData(a.ARRAY_BUFFER, 0, this._float32View), this._vertexDataDirty = !1);
            d = cc.V3F_C4B_T2F.BYTES_PER_ELEMENT;
            a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 3, a.FLOAT, !1, d, 0);
            a.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR, 4, a.UNSIGNED_BYTE, !0, d, 12);
            a.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, a.FLOAT, !1, d, 16);
            c._type === cc.ProgressTimer.TYPE_RADIAL ? a.drawArrays(a.TRIANGLE_FAN,
                0, this._vertexDataCount) : c._type === cc.ProgressTimer.TYPE_BAR && (c._reverseDirection ? (a.drawArrays(a.TRIANGLE_STRIP, 0, this._vertexDataCount / 2), a.drawArrays(a.TRIANGLE_STRIP, 4, this._vertexDataCount / 2), cc.g_NumberOfDraws++) : a.drawArrays(a.TRIANGLE_STRIP, 0, this._vertexDataCount));
            cc.g_NumberOfDraws++
        }
    };
    a._syncStatus = function (a) {
        var c = this._node;
        if (c._sprite) {
            var d = cc.Node._dirtyFlags,
                f = this._dirtyFlag,
                g = a ? a._node : null;
            g && (g._cascadeColorEnabled && a._dirtyFlag & d.colorDirty) && (f |= d.colorDirty);
            g && (g._cascadeOpacityEnabled &&
                a._dirtyFlag & d.opacityDirty) && (f |= d.opacityDirty);
            a && a._dirtyFlag & d.transformDirty && (f |= d.transformDirty);
            this._dirtyFlag = f;
            var c = c._sprite._renderCmd,
                h = c._dirtyFlag,
                g = (f | h) & d.colorDirty,
                h = (f | h) & d.opacityDirty;
            g && (c._syncDisplayColor(), c._dirtyFlag &= ~d.colorDirty, this._dirtyFlag &= ~d.colorDirty);
            h && (c._syncDisplayOpacity(), c._dirtyFlag &= ~d.opacityDirty, this._dirtyFlag &= ~d.opacityDirty);
            (g || h) && this._updateColor();
            f & d.transformDirty && this.transform(a);
            f & d.textureDirty && (this._updateProgressData(), this._dirtyFlag &=
                ~d.textureDirty);
            c._dirtyFlag = 0
        }
    };
    a.updateStatus = function () {
        var a = this._node;
        if (a._sprite) {
            var c = cc.Node._dirtyFlags,
                d = this._dirtyFlag,
                a = a._sprite._renderCmd,
                f = a._dirtyFlag,
                g = (d | f) & c.colorDirty,
                f = (d | f) & c.opacityDirty;
            g && (a._updateDisplayColor(), a._dirtyFlag ^= a._dirtyFlag & c.colorDirty, this._dirtyFlag ^= this._dirtyFlag & c.colorDirty);
            f && (a._updateDisplayOpacity(), a._dirtyFlag ^= a._dirtyFlag & c.opacityDirty, this._dirtyFlag ^= this._dirtyFlag & c.opacityDirty);
            (g || f) && this._updateColor();
            d & c.transformDirty &&
                this.transform(this.getParentRenderCmd(), !0);
            d & c.orderDirty && (this._dirtyFlag ^= this._dirtyFlag & c.orderDirty);
            d & c.textureDirty && (this._updateProgressData(), this._dirtyFlag ^= this._dirtyFlag & c.textureDirty)
        }
    };
    a.releaseData = function () {
        if (this._vertexData) {
            var a = this._vertexWebGLBuffer;
            setTimeout(function () {
                cc._renderContext.deleteBuffer(a)
            }, 0.1);
            this._vertexArrayBuffer = this._float32View = this._vertexData = this._vertexWebGLBuffer = null;
            this._vertexDataCount = 0
        }
    };
    a.initCmd = function () {
        if (!this._vertexData) {
            this._vertexWebGLBuffer =
                cc._renderContext.createBuffer();
            var a = cc.V3F_C4B_T2F.BYTES_PER_ELEMENT;
            this._vertexArrayBuffer = new ArrayBuffer(8 * a);
            this._float32View = new Float32Array(this._vertexArrayBuffer);
            this._vertexData = [];
            for (var c = 0; 8 > c; c++) this._vertexData[c] = new cc.V3F_C4B_T2F(null, null, null, this._vertexArrayBuffer, c * a);
            gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexWebGLBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, this._float32View, gl.DYNAMIC_DRAW);
            this._vertexDataCount = 0;
            this._vertexDataDirty = !0;
            this._shaderProgram = cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR)
        }
    };
    a.resetVertexData = function () {
        this._vertexDataCount = 0
    };
    a._updateProgressData = function () {
        var a = this._node._type;
        a === cc.ProgressTimer.TYPE_RADIAL ? this._updateRadial() : a === cc.ProgressTimer.TYPE_BAR && this._updateBar();
        this._vertexDataDirty = !0
    };
    a._updateProgress = function () {
        this.setDirtyFlag(cc.Node._dirtyFlags.textureDirty)
    };
    a._updateBar = function () {
        var a = this._node;
        if (a._sprite) {
            var c = a._percentage / 100,
                d = a._barChangeRate,
                d = cc.pMult(cc.p(1 - d.x + c * d.x, 1 - d.y + c * d.y), 0.5),
                c = cc.pSub(a._midPoint, d),
                a = cc.pAdd(a._midPoint,
                    d);
            0 > c.x && (a.x += -c.x, c.x = 0);
            1 < a.x && (c.x -= a.x - 1, a.x = 1);
            0 > c.y && (a.y += -c.y, c.y = 0);
            1 < a.y && (c.y -= a.y - 1, a.y = 1);
            this._reverseDirection ? (d = this._vertexData, this._vertexDataCount || (this._vertexDataCount = 8, this._textureCoordFromAlphaPoint(d[0].texCoords, 0, 1), this._vertexFromAlphaPoint(d[0].vertices, 0, 1), this._textureCoordFromAlphaPoint(d[1].texCoords, 0, 0), this._vertexFromAlphaPoint(d[1].vertices, 0, 0), this._textureCoordFromAlphaPoint(d[6].texCoords, 1, 1), this._vertexFromAlphaPoint(d[6].vertices, 1, 1), this._textureCoordFromAlphaPoint(d[7].texCoords,
                1, 0), this._vertexFromAlphaPoint(d[7].vertices, 1, 0)), this._textureCoordFromAlphaPoint(d[2].texCoords, c.x, a.y), this._vertexFromAlphaPoint(d[2].vertices, c.x, a.y), this._textureCoordFromAlphaPoint(d[3].texCoords, c.x, c.y), this._vertexFromAlphaPoint(d[3].vertices, c.x, c.y), this._textureCoordFromAlphaPoint(d[4].texCoords, a.x, a.y), this._vertexFromAlphaPoint(d[4].vertices, a.x, a.y), this._textureCoordFromAlphaPoint(d[5].texCoords, a.x, c.y), this._vertexFromAlphaPoint(d[5].vertices, a.x, c.y)) : (this._vertexDataCount ||
                (this._vertexDataCount = 4), d = this._vertexData, this._textureCoordFromAlphaPoint(d[0].texCoords, c.x, a.y), this._vertexFromAlphaPoint(d[0].vertices, c.x, a.y), this._textureCoordFromAlphaPoint(d[1].texCoords, c.x, c.y), this._vertexFromAlphaPoint(d[1].vertices, c.x, c.y), this._textureCoordFromAlphaPoint(d[2].texCoords, a.x, a.y), this._vertexFromAlphaPoint(d[2].vertices, a.x, a.y), this._textureCoordFromAlphaPoint(d[3].texCoords, a.x, c.y), this._vertexFromAlphaPoint(d[3].vertices, a.x, c.y));
            this._updateColor()
        }
    };
    a._updateRadial =
        function () {
            var a = this._node;
            if (a._sprite) {
                var c, d = a._midPoint;
                c = a._percentage / 100;
                var f = 2 * cc.PI * (a._reverseDirection ? c : 1 - c),
                    a = cc.p(d.x, 1),
                    g = cc.pRotateByAngle(a, d, f),
                    f = 0;
                if (0 === c) g = a, f = 0;
                else if (1 === c) g = a, f = 4;
                else {
                    var h = cc.FLT_MAX,
                        m = cc.ProgressTimer.TEXTURE_COORDS_COUNT;
                    for (c = 0; c <= m; ++c) {
                        var n = (c + (m - 1)) % m,
                            p = this._boundaryTexCoord(c % m),
                            n = this._boundaryTexCoord(n);
                        0 === c ? n = cc.pLerp(p, n, 1 - d.x) : 4 === c && (p = cc.pLerp(p, n, 1 - d.x));
                        var u = cc.p(0, 0);
                        if (cc.pLineIntersect(p, n, d, g, u) && (!(0 === c || 4 === c) || 0 <= u.x && 1 >=
                                u.x) && 0 <= u.y && u.y < h) h = u.y, f = c
                    }
                    g = cc.pAdd(d, cc.pMult(cc.pSub(g, d), h))
                }
                c = !0;
                this._vertexDataCount !== f + 3 && (c = !1, this._vertexDataCount = f + 3);
                this._updateColor();
                h = this._vertexData;
                if (!c) {
                    this._textureCoordFromAlphaPoint(h[0].texCoords, d.x, d.y);
                    this._vertexFromAlphaPoint(h[0].vertices, d.x, d.y);
                    this._textureCoordFromAlphaPoint(h[1].texCoords, a.x, a.y);
                    this._vertexFromAlphaPoint(h[1].vertices, a.x, a.y);
                    for (c = 0; c < f; c++) d = this._boundaryTexCoord(c), this._textureCoordFromAlphaPoint(h[c + 2].texCoords, d.x, d.y), this._vertexFromAlphaPoint(h[c +
                        2].vertices, d.x, d.y)
                }
                this._textureCoordFromAlphaPoint(h[this._vertexDataCount - 1].texCoords, g.x, g.y);
                this._vertexFromAlphaPoint(h[this._vertexDataCount - 1].vertices, g.x, g.y)
            }
        };
    a._boundaryTexCoord = function (a) {
        if (a < cc.ProgressTimer.TEXTURE_COORDS_COUNT) {
            var c = cc.ProgressTimer.TEXTURE_COORDS;
            return this._node._reverseDirection ? cc.p(c >> 7 - (a << 1) & 1, c >> 7 - ((a << 1) + 1) & 1) : cc.p(c >> (a << 1) + 1 & 1, c >> (a << 1) & 1)
        }
        return cc.p(0, 0)
    };
    a._textureCoordFromAlphaPoint = function (a, c, d) {
        var f = this._node._sprite;
        if (f) {
            var g = f._renderCmd._vertices,
                h = g[1],
                g = g[2],
                h = cc.p(h.u, h.v),
                g = cc.p(g.u, g.v);
            f.textureRectRotated && (f = c, c = d, d = f);
            a.u = h.x * (1 - c) + g.x * c;
            a.v = h.y * (1 - d) + g.y * d
        } else a.u = 0, a.v = 0
    };
    a._vertexFromAlphaPoint = function (a, c, d) {
        a.x = this._bl.x * (1 - c) + this._tr.x * c;
        a.y = this._bl.y * (1 - d) + this._tr.y * d;
        a.z = this._node._vertexZ
    };
    a._updateColor = function () {
        var a = this._node._sprite;
        if (this._vertexDataCount && a) {
            var c = this._displayedColor,
                d = a._renderCmd._displayedColor,
                f = d.r,
                g = d.g,
                d = d.b,
                h = a._renderCmd._displayedOpacity / 255;
            a._opacityModifyRGB && (f *= h, g *= h, d *=
                h);
            c.r = f;
            c.g = g;
            c.b = d;
            c.a = a._renderCmd._displayedOpacity;
            a = this._vertexData;
            f = 0;
            for (g = this._vertexDataCount; f < g; ++f) a[f].colors = c;
            this._vertexDataDirty = !0
        }
    }
})();
cc.SCENE_FADE = 4208917214;
cc.TRANSITION_ORIENTATION_LEFT_OVER = 0;
cc.TRANSITION_ORIENTATION_RIGHT_OVER = 1;
cc.TRANSITION_ORIENTATION_UP_OVER = 0;
cc.TRANSITION_ORIENTATION_DOWN_OVER = 1;
cc.TransitionScene = cc.Scene.extend({
    _inScene: null,
    _outScene: null,
    _duration: null,
    _isInSceneOnTop: !1,
    _isSendCleanupToScene: !1,
    _className: "TransitionScene",
    ctor: function (a, b) {
        cc.Scene.prototype.ctor.call(this);
        void 0 !== a && void 0 !== b && this.initWithDuration(a, b)
    },
    _setNewScene: function (a) {
        this.unschedule(this._setNewScene);
        a = cc.director;
        this._isSendCleanupToScene = a.isSendCleanupToScene();
        a.runScene(this._inScene);
        cc.eventManager.setEnabled(!0);
        this._outScene.visible = !0
    },
    _sceneOrder: function () {
        this._isInSceneOnTop = !0
    },
    visit: function () {
        this._isInSceneOnTop ? (this._outScene.visit(), this._inScene.visit()) : (this._inScene.visit(), this._outScene.visit());
        cc.Node.prototype.visit.call(this)
    },
    onEnter: function () {
        cc.Node.prototype.onEnter.call(this);
        cc.eventManager.setEnabled(!1);
        this._outScene._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart);
        this._inScene._performRecursive(cc.Node._stateCallbackType.onEnter)
    },
    onExit: function () {
        cc.Node.prototype.onExit.call(this);
        cc.eventManager.setEnabled(!0);
        this._outScene._performRecursive(cc.Node._stateCallbackType.onExit);
        this._inScene._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish)
    },
    cleanup: function () {
        cc.Node.prototype.cleanup.call(this);
        this._isSendCleanupToScene && this._outScene._performRecursive(cc.Node._stateCallbackType.cleanup)
    },
    initWithDuration: function (a, b) {
        if (!b) throw Error("cc.TransitionScene.initWithDuration(): Argument scene must be non-nil");
        if (this.init()) {
            this._duration = a;
            this.attr({
                x: 0,
                y: 0,
                anchorX: 0,
                anchorY: 0
            });
            this._inScene = b;
            this._outScene = cc.director.getRunningScene();
            this._outScene ||
                (this._outScene = new cc.Scene, this._outScene.init());
            if (this._inScene === this._outScene) throw Error("cc.TransitionScene.initWithDuration(): Incoming scene must be different from the outgoing scene");
            this._sceneOrder();
            return !0
        }
        return !1
    },
    finish: function () {
        this._inScene.attr({
            visible: !0,
            x: 0,
            y: 0,
            scale: 1,
            rotation: 0
        });
        this._outScene.attr({
            visible: !1,
            x: 0,
            y: 0,
            scale: 1,
            rotation: 0
        });
        this.schedule(this._setNewScene, 0)
    },
    hideOutShowIn: function () {
        this._inScene.visible = !0;
        this._outScene.visible = !1
    }
});
cc.TransitionScene.create = function (a, b) {
    return new cc.TransitionScene(a, b)
};
cc.TransitionSceneOriented = cc.TransitionScene.extend({
    _orientation: 0,
    ctor: function (a, b, c) {
        cc.TransitionScene.prototype.ctor.call(this);
        void 0 != c && this.initWithDuration(a, b, c)
    },
    initWithDuration: function (a, b, c) {
        cc.TransitionScene.prototype.initWithDuration.call(this, a, b) && (this._orientation = c);
        return !0
    }
});
cc.TransitionSceneOriented.create = function (a, b, c) {
    return new cc.TransitionSceneOriented(a, b, c)
};
cc.TransitionRotoZoom = cc.TransitionScene.extend({
    ctor: function (a, b) {
        cc.TransitionScene.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    onEnter: function () {
        cc.TransitionScene.prototype.onEnter.call(this);
        this._inScene.attr({
            scale: 0.0010,
            anchorX: 0.5,
            anchorY: 0.5
        });
        this._outScene.attr({
            scale: 1,
            anchorX: 0.5,
            anchorY: 0.5
        });
        var a = cc.sequence(cc.spawn(cc.scaleBy(this._duration / 2, 0.0010), cc.rotateBy(this._duration / 2, 720)), cc.delayTime(this._duration / 2));
        this._outScene.runAction(a);
        this._inScene.runAction(cc.sequence(a.reverse(),
            cc.callFunc(this.finish, this)))
    }
});
cc.TransitionRotoZoom.create = function (a, b) {
    return new cc.TransitionRotoZoom(a, b)
};
cc.TransitionJumpZoom = cc.TransitionScene.extend({
    ctor: function (a, b) {
        cc.TransitionScene.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    onEnter: function () {
        cc.TransitionScene.prototype.onEnter.call(this);
        var a = cc.director.getWinSize();
        this._inScene.attr({
            scale: 0.5,
            x: a.width,
            y: 0,
            anchorX: 0.5,
            anchorY: 0.5
        });
        this._outScene.anchorX = 0.5;
        this._outScene.anchorY = 0.5;
        var b = cc.jumpBy(this._duration / 4, cc.p(-a.width, 0), a.width / 4, 2),
            c = cc.scaleTo(this._duration / 4, 1),
            a = cc.scaleTo(this._duration / 4, 0.5),
            a = cc.sequence(a,
                b),
            b = cc.sequence(b, c),
            c = cc.delayTime(this._duration / 2);
        this._outScene.runAction(a);
        this._inScene.runAction(cc.sequence(c, b, cc.callFunc(this.finish, this)))
    }
});
cc.TransitionJumpZoom.create = function (a, b) {
    return new cc.TransitionJumpZoom(a, b)
};
cc.TransitionMoveInL = cc.TransitionScene.extend({
    ctor: function (a, b) {
        cc.TransitionScene.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    onEnter: function () {
        cc.TransitionScene.prototype.onEnter.call(this);
        this.initScenes();
        var a = this.action();
        this._inScene.runAction(cc.sequence(this.easeActionWithAction(a), cc.callFunc(this.finish, this)))
    },
    initScenes: function () {
        this._inScene.setPosition(-cc.director.getWinSize().width, 0)
    },
    action: function () {
        return cc.moveTo(this._duration, cc.p(0, 0))
    },
    easeActionWithAction: function (a) {
        return new cc.EaseOut(a,
            2)
    }
});
cc.TransitionMoveInL.create = function (a, b) {
    return new cc.TransitionMoveInL(a, b)
};
cc.TransitionMoveInR = cc.TransitionMoveInL.extend({
    ctor: function (a, b) {
        cc.TransitionMoveInL.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    initScenes: function () {
        this._inScene.setPosition(cc.director.getWinSize().width, 0)
    }
});
cc.TransitionMoveInR.create = function (a, b) {
    return new cc.TransitionMoveInR(a, b)
};
cc.TransitionMoveInT = cc.TransitionMoveInL.extend({
    ctor: function (a, b) {
        cc.TransitionMoveInL.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    initScenes: function () {
        this._inScene.setPosition(0, cc.director.getWinSize().height)
    }
});
cc.TransitionMoveInT.create = function (a, b) {
    return new cc.TransitionMoveInT(a, b)
};
cc.TransitionMoveInB = cc.TransitionMoveInL.extend({
    ctor: function (a, b) {
        cc.TransitionMoveInL.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    initScenes: function () {
        this._inScene.setPosition(0, -cc.director.getWinSize().height)
    }
});
cc.TransitionMoveInB.create = function (a, b) {
    return new cc.TransitionMoveInB(a, b)
};
cc.ADJUST_FACTOR = 0.5;
cc.TransitionSlideInL = cc.TransitionScene.extend({
    ctor: function (a, b) {
        cc.TransitionScene.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    _sceneOrder: function () {
        this._isInSceneOnTop = !1
    },
    onEnter: function () {
        cc.TransitionScene.prototype.onEnter.call(this);
        this.initScenes();
        var a = this.action(),
            b = this.action(),
            a = cc.sequence(this.easeActionWithAction(a), cc.callFunc(this.finish, this)),
            b = this.easeActionWithAction(b);
        this._inScene.runAction(a);
        this._outScene.runAction(b)
    },
    initScenes: function () {
        this._inScene.setPosition(-cc.director.getWinSize().width +
            cc.ADJUST_FACTOR, 0)
    },
    action: function () {
        return cc.moveBy(this._duration, cc.p(cc.director.getWinSize().width - cc.ADJUST_FACTOR, 0))
    },
    easeActionWithAction: function (a) {
        return new cc.EaseInOut(a, 2)
    }
});
cc.TransitionSlideInL.create = function (a, b) {
    return new cc.TransitionSlideInL(a, b)
};
cc.TransitionSlideInR = cc.TransitionSlideInL.extend({
    ctor: function (a, b) {
        cc.TransitionSlideInL.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    _sceneOrder: function () {
        this._isInSceneOnTop = !0
    },
    initScenes: function () {
        this._inScene.setPosition(cc.director.getWinSize().width - cc.ADJUST_FACTOR, 0)
    },
    action: function () {
        return cc.moveBy(this._duration, cc.p(-(cc.director.getWinSize().width - cc.ADJUST_FACTOR), 0))
    }
});
cc.TransitionSlideInR.create = function (a, b) {
    return new cc.TransitionSlideInR(a, b)
};
cc.TransitionSlideInB = cc.TransitionSlideInL.extend({
    ctor: function (a, b) {
        cc.TransitionSlideInL.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    _sceneOrder: function () {
        this._isInSceneOnTop = !1
    },
    initScenes: function () {
        this._inScene.setPosition(0, -(cc.director.getWinSize().height - cc.ADJUST_FACTOR))
    },
    action: function () {
        return cc.moveBy(this._duration, cc.p(0, cc.director.getWinSize().height - cc.ADJUST_FACTOR))
    }
});
cc.TransitionSlideInB.create = function (a, b) {
    return new cc.TransitionSlideInB(a, b)
};
cc.TransitionSlideInT = cc.TransitionSlideInL.extend({
    ctor: function (a, b) {
        cc.TransitionSlideInL.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    _sceneOrder: function () {
        this._isInSceneOnTop = !0
    },
    initScenes: function () {
        this._inScene.setPosition(0, cc.director.getWinSize().height - cc.ADJUST_FACTOR)
    },
    action: function () {
        return cc.moveBy(this._duration, cc.p(0, -(cc.director.getWinSize().height - cc.ADJUST_FACTOR)))
    }
});
cc.TransitionSlideInT.create = function (a, b) {
    return new cc.TransitionSlideInT(a, b)
};
cc.TransitionShrinkGrow = cc.TransitionScene.extend({
    ctor: function (a, b) {
        cc.TransitionScene.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    onEnter: function () {
        cc.TransitionScene.prototype.onEnter.call(this);
        this._inScene.attr({
            scale: 0.0010,
            anchorX: 2 / 3,
            anchorY: 0.5
        });
        this._outScene.attr({
            scale: 1,
            anchorX: 1 / 3,
            anchorY: 0.5
        });
        var a = cc.scaleTo(this._duration, 0.01),
            b = cc.scaleTo(this._duration, 1);
        this._inScene.runAction(cc.sequence(this.easeActionWithAction(b), cc.callFunc(this.finish, this)));
        this._outScene.runAction(this.easeActionWithAction(a))
    },
    easeActionWithAction: function (a) {
        return new cc.EaseOut(a, 2)
    }
});
cc.TransitionShrinkGrow.create = function (a, b) {
    return new cc.TransitionShrinkGrow(a, b)
};
cc.TransitionFade = cc.TransitionScene.extend({
    _color: null,
    ctor: function (a, b, c) {
        cc.TransitionScene.prototype.ctor.call(this);
        this._color = cc.color();
        b && this.initWithDuration(a, b, c)
    },
    onEnter: function () {
        cc.TransitionScene.prototype.onEnter.call(this);
        var a = new cc.LayerColor(this._color);
        this._inScene.visible = !1;
        this.addChild(a, 2, cc.SCENE_FADE);
        var a = this.getChildByTag(cc.SCENE_FADE),
            b = cc.sequence(cc.fadeIn(this._duration / 2), cc.callFunc(this.hideOutShowIn, this), cc.fadeOut(this._duration / 2), cc.callFunc(this.finish,
                this));
        a.runAction(b)
    },
    onExit: function () {
        cc.TransitionScene.prototype.onExit.call(this);
        this.removeChildByTag(cc.SCENE_FADE, !1)
    },
    initWithDuration: function (a, b, c) {
        c = c || cc.color.BLACK;
        cc.TransitionScene.prototype.initWithDuration.call(this, a, b) && (this._color.r = c.r, this._color.g = c.g, this._color.b = c.b, this._color.a = 0);
        return !0
    }
});
cc.TransitionFade.create = function (a, b, c) {
    return new cc.TransitionFade(a, b, c)
};
cc.TransitionCrossFade = cc.TransitionScene.extend({
    ctor: function (a, b) {
        cc.TransitionScene.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    onEnter: function () {
        cc.TransitionScene.prototype.onEnter.call(this);
        var a = cc.color(0, 0, 0, 0),
            b = cc.director.getWinSize(),
            a = new cc.LayerColor(a),
            c = new cc.RenderTexture(b.width, b.height);
        c.sprite.anchorX = 0.5;
        c.sprite.anchorY = 0.5;
        c.attr({
            x: b.width / 2,
            y: b.height / 2,
            anchorX: 0.5,
            anchorY: 0.5
        });
        c.begin();
        this._inScene.visit();
        c.end();
        var d = new cc.RenderTexture(b.width,
            b.height);
        d.setPosition(b.width / 2, b.height / 2);
        d.sprite.anchorX = d.anchorX = 0.5;
        d.sprite.anchorY = d.anchorY = 0.5;
        d.begin();
        this._outScene.visit();
        d.end();
        c.sprite.setBlendFunc(cc.ONE, cc.ONE);
        d.sprite.setBlendFunc(cc.SRC_ALPHA, cc.ONE_MINUS_SRC_ALPHA);
        a.addChild(c);
        a.addChild(d);
        c.sprite.opacity = 255;
        d.sprite.opacity = 255;
        b = cc.sequence(cc.fadeTo(this._duration, 0), cc.callFunc(this.hideOutShowIn, this), cc.callFunc(this.finish, this));
        d.sprite.runAction(b);
        this.addChild(a, 2, cc.SCENE_FADE)
    },
    onExit: function () {
        this.removeChildByTag(cc.SCENE_FADE,
            !1);
        cc.TransitionScene.prototype.onExit.call(this)
    }
});
cc.TransitionCrossFade.create = function (a, b) {
    return new cc.TransitionCrossFade(a, b)
};
cc.TransitionTurnOffTiles = cc.TransitionScene.extend({
    _gridProxy: null,
    ctor: function (a, b) {
        cc.TransitionScene.prototype.ctor.call(this);
        this._gridProxy = new cc.NodeGrid;
        b && this.initWithDuration(a, b)
    },
    _sceneOrder: function () {
        this._isInSceneOnTop = !1
    },
    onEnter: function () {
        cc.TransitionScene.prototype.onEnter.call(this);
        this._gridProxy.setTarget(this._outScene);
        this._gridProxy._performRecursive(cc.Node._stateCallbackType.onEnter);
        var a = cc.director.getWinSize(),
            a = cc.turnOffTiles(this._duration, cc.size(0 | 12 * (a.width /
                a.height), 12)),
            a = this.easeActionWithAction(a);
        this._gridProxy.runAction(cc.sequence(a, cc.callFunc(this.finish, this), cc.stopGrid()))
    },
    visit: function () {
        this._inScene.visit();
        this._gridProxy.visit()
    },
    easeActionWithAction: function (a) {
        return a
    }
});
cc.TransitionTurnOffTiles.create = function (a, b) {
    return new cc.TransitionTurnOffTiles(a, b)
};
cc.TransitionSplitCols = cc.TransitionScene.extend({
    _gridProxy: null,
    _switchTargetToInscene: function () {
        this._gridProxy.setTarget(this._inScene)
    },
    ctor: function (a, b) {
        cc.TransitionScene.prototype.ctor.call(this);
        this._gridProxy = new cc.NodeGrid;
        b && this.initWithDuration(a, b)
    },
    onEnter: function () {
        cc.TransitionScene.prototype.onEnter.call(this);
        this._gridProxy.setTarget(this._outScene);
        this._gridProxy._performRecursive(cc.Node._stateCallbackType.onEnter);
        var a = this.action(),
            a = cc.sequence(a, cc.callFunc(this._switchTargetToInscene,
                this), a.reverse());
        this._gridProxy.runAction(cc.sequence(this.easeActionWithAction(a), cc.callFunc(this.finish, this), cc.stopGrid()))
    },
    onExit: function () {
        this._gridProxy.setTarget(null);
        this._gridProxy._performRecursive(cc.Node._stateCallbackType.onExit);
        cc.TransitionScene.prototype.onExit.call(this)
    },
    visit: function () {
        this._gridProxy.visit()
    },
    easeActionWithAction: function (a) {
        return new cc.EaseInOut(a, 3)
    },
    action: function () {
        return cc.splitCols(this._duration / 2, 3)
    }
});
cc.TransitionSplitCols.create = function (a, b) {
    return new cc.TransitionSplitCols(a, b)
};
cc.TransitionSplitRows = cc.TransitionSplitCols.extend({
    ctor: function (a, b) {
        cc.TransitionSplitCols.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    action: function () {
        return cc.splitRows(this._duration / 2, 3)
    }
});
cc.TransitionSplitRows.create = function (a, b) {
    return new cc.TransitionSplitRows(a, b)
};
cc.TransitionFadeTR = cc.TransitionScene.extend({
    _gridProxy: null,
    ctor: function (a, b) {
        cc.TransitionScene.prototype.ctor.call(this);
        this._gridProxy = new cc.NodeGrid;
        b && this.initWithDuration(a, b)
    },
    _sceneOrder: function () {
        this._isInSceneOnTop = !1
    },
    onEnter: function () {
        cc.TransitionScene.prototype.onEnter.call(this);
        this._gridProxy.setTarget(this._outScene);
        this._gridProxy._performRecursive(cc.Node._stateCallbackType.onEnter);
        var a = cc.director.getWinSize(),
            a = this.actionWithSize(cc.size(0 | 12 * (a.width / a.height),
                12));
        this._gridProxy.runAction(cc.sequence(this.easeActionWithAction(a), cc.callFunc(this.finish, this), cc.stopGrid()))
    },
    visit: function () {
        this._inScene.visit();
        this._gridProxy.visit()
    },
    easeActionWithAction: function (a) {
        return a
    },
    actionWithSize: function (a) {
        return cc.fadeOutTRTiles(this._duration, a)
    }
});
cc.TransitionFadeTR.create = function (a, b) {
    return new cc.TransitionFadeTR(a, b)
};
cc.TransitionFadeBL = cc.TransitionFadeTR.extend({
    ctor: function (a, b) {
        cc.TransitionFadeTR.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    actionWithSize: function (a) {
        return cc.fadeOutBLTiles(this._duration, a)
    }
});
cc.TransitionFadeBL.create = function (a, b) {
    return new cc.TransitionFadeBL(a, b)
};
cc.TransitionFadeUp = cc.TransitionFadeTR.extend({
    ctor: function (a, b) {
        cc.TransitionFadeTR.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    actionWithSize: function (a) {
        return new cc.FadeOutUpTiles(this._duration, a)
    }
});
cc.TransitionFadeUp.create = function (a, b) {
    return new cc.TransitionFadeUp(a, b)
};
cc.TransitionFadeDown = cc.TransitionFadeTR.extend({
    ctor: function (a, b) {
        cc.TransitionFadeTR.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    actionWithSize: function (a) {
        return cc.fadeOutDownTiles(this._duration, a)
    }
});
cc.TransitionFadeDown.create = function (a, b) {
    return new cc.TransitionFadeDown(a, b)
};
cc.SCENE_RADIAL = 49153;
cc.TransitionProgress = cc.TransitionScene.extend({
    _to: 0,
    _from: 0,
    _sceneToBeModified: null,
    _className: "TransitionProgress",
    ctor: function (a, b) {
        cc.TransitionScene.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    _setAttrs: function (a, b, c) {
        a.attr({
            x: b,
            y: c,
            anchorX: 0.5,
            anchorY: 0.5
        })
    },
    onEnter: function () {
        cc.TransitionScene.prototype.onEnter.call(this);
        this._setupTransition();
        var a = cc.director.getWinSize(),
            b = new cc.RenderTexture(a.width, a.height);
        b.sprite.anchorX = 0.5;
        b.sprite.anchorY = 0.5;
        this._setAttrs(b,
            a.width / 2, a.height / 2);
        b.clear(0, 0, 0, 1);
        b.begin();
        this._sceneToBeModified.visit();
        b.end();
        this._sceneToBeModified === this._outScene && this.hideOutShowIn();
        a = this._progressTimerNodeWithRenderTexture(b);
        b = cc.sequence(cc.progressFromTo(this._duration, this._from, this._to), cc.callFunc(this.finish, this));
        a.runAction(b);
        this.addChild(a, 2, cc.SCENE_RADIAL)
    },
    onExit: function () {
        this.removeChildByTag(cc.SCENE_RADIAL, !0);
        cc.TransitionScene.prototype.onExit.call(this)
    },
    _setupTransition: function () {
        this._sceneToBeModified =
            this._outScene;
        this._from = 100;
        this._to = 0
    },
    _progressTimerNodeWithRenderTexture: function (a) {
        cc.log("cc.TransitionProgress._progressTimerNodeWithRenderTexture(): should be overridden in subclass");
        return null
    },
    _sceneOrder: function () {
        this._isInSceneOnTop = !1
    }
});
cc.TransitionProgress.create = function (a, b) {
    return new cc.TransitionProgress(a, b)
};
cc.TransitionProgressRadialCCW = cc.TransitionProgress.extend({
    ctor: function (a, b) {
        cc.TransitionProgress.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    _progressTimerNodeWithRenderTexture: function (a) {
        var b = cc.director.getWinSize();
        a = new cc.ProgressTimer(a.sprite);
        cc._renderType === cc.game.RENDER_TYPE_WEBGL && (a.sprite.flippedY = !0);
        a.type = cc.ProgressTimer.TYPE_RADIAL;
        a.reverseDir = !1;
        a.percentage = 100;
        this._setAttrs(a, b.width / 2, b.height / 2);
        return a
    }
});
cc.TransitionProgressRadialCCW.create = function (a, b) {
    return new cc.TransitionProgressRadialCCW(a, b)
};
cc.TransitionProgressRadialCW = cc.TransitionProgress.extend({
    ctor: function (a, b) {
        cc.TransitionProgress.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    _progressTimerNodeWithRenderTexture: function (a) {
        var b = cc.director.getWinSize();
        a = new cc.ProgressTimer(a.sprite);
        cc._renderType === cc.game.RENDER_TYPE_WEBGL && (a.sprite.flippedY = !0);
        a.type = cc.ProgressTimer.TYPE_RADIAL;
        a.reverseDir = !0;
        a.percentage = 100;
        this._setAttrs(a, b.width / 2, b.height / 2);
        return a
    }
});
cc.TransitionProgressRadialCW.create = function (a, b) {
    var c = new cc.TransitionProgressRadialCW;
    return null !== c && c.initWithDuration(a, b) ? c : new cc.TransitionProgressRadialCW(a, b)
};
cc.TransitionProgressHorizontal = cc.TransitionProgress.extend({
    ctor: function (a, b) {
        cc.TransitionProgress.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    _progressTimerNodeWithRenderTexture: function (a) {
        var b = cc.director.getWinSize();
        a = new cc.ProgressTimer(a.sprite);
        cc._renderType === cc.game.RENDER_TYPE_WEBGL && (a.sprite.flippedY = !0);
        a.type = cc.ProgressTimer.TYPE_BAR;
        a.midPoint = cc.p(1, 0);
        a.barChangeRate = cc.p(1, 0);
        a.percentage = 100;
        this._setAttrs(a, b.width / 2, b.height / 2);
        return a
    }
});
cc.TransitionProgressHorizontal.create = function (a, b) {
    return new cc.TransitionProgressHorizontal(a, b)
};
cc.TransitionProgressVertical = cc.TransitionProgress.extend({
    ctor: function (a, b) {
        cc.TransitionProgress.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    _progressTimerNodeWithRenderTexture: function (a) {
        var b = cc.director.getWinSize();
        a = new cc.ProgressTimer(a.sprite);
        cc._renderType === cc.game.RENDER_TYPE_WEBGL && (a.sprite.flippedY = !0);
        a.type = cc.ProgressTimer.TYPE_BAR;
        a.midPoint = cc.p(0, 0);
        a.barChangeRate = cc.p(0, 1);
        a.percentage = 100;
        this._setAttrs(a, b.width / 2, b.height / 2);
        return a
    }
});
cc.TransitionProgressVertical.create = function (a, b) {
    return new cc.TransitionProgressVertical(a, b)
};
cc.TransitionProgressInOut = cc.TransitionProgress.extend({
    ctor: function (a, b) {
        cc.TransitionProgress.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    _progressTimerNodeWithRenderTexture: function (a) {
        var b = cc.director.getWinSize();
        a = new cc.ProgressTimer(a.sprite);
        cc._renderType === cc.game.RENDER_TYPE_WEBGL && (a.sprite.flippedY = !0);
        a.type = cc.ProgressTimer.TYPE_BAR;
        a.midPoint = cc.p(0.5, 0.5);
        a.barChangeRate = cc.p(1, 1);
        a.percentage = 0;
        this._setAttrs(a, b.width / 2, b.height / 2);
        return a
    },
    _sceneOrder: function () {
        this._isInSceneOnTop = !1
    },
    _setupTransition: function () {
        this._sceneToBeModified = this._inScene;
        this._from = 0;
        this._to = 100
    }
});
cc.TransitionProgressInOut.create = function (a, b) {
    return new cc.TransitionProgressInOut(a, b)
};
cc.TransitionProgressOutIn = cc.TransitionProgress.extend({
    ctor: function (a, b) {
        cc.TransitionProgress.prototype.ctor.call(this);
        b && this.initWithDuration(a, b)
    },
    _progressTimerNodeWithRenderTexture: function (a) {
        var b = cc.director.getWinSize();
        a = new cc.ProgressTimer(a.sprite);
        cc._renderType === cc.game.RENDER_TYPE_WEBGL && (a.sprite.flippedY = !0);
        a.type = cc.ProgressTimer.TYPE_BAR;
        a.midPoint = cc.p(0.5, 0.5);
        a.barChangeRate = cc.p(1, 1);
        a.percentage = 100;
        this._setAttrs(a, b.width / 2, b.height / 2);
        return a
    }
});
cc.TransitionProgressOutIn.create = function (a, b) {
    return new cc.TransitionProgressOutIn(a, b)
};
cc.TransitionPageTurn = cc.TransitionScene.extend({
    ctor: function (a, b, c) {
        cc.TransitionScene.prototype.ctor.call(this);
        this._gridProxy = new cc.NodeGrid;
        this.initWithDuration(a, b, c)
    },
    _back: !0,
    _gridProxy: null,
    _className: "TransitionPageTurn",
    initWithDuration: function (a, b, c) {
        this._back = c;
        cc.TransitionScene.prototype.initWithDuration.call(this, a, b);
        return !0
    },
    actionWithSize: function (a) {
        return this._back ? cc.reverseTime(cc.pageTurn3D(this._duration, a)) : cc.pageTurn3D(this._duration, a)
    },
    onEnter: function () {
        cc.TransitionScene.prototype.onEnter.call(this);
        var a = cc.director.getWinSize(),
            b;
        a.width > a.height ? (a = 16, b = 12) : (a = 12, b = 16);
        a = this.actionWithSize(cc.size(a, b));
        b = this._gridProxy;
        this._back ? (b.setTarget(this._inScene), b._performRecursive(cc.Node._stateCallbackType.onEnter), this._inScene.visible = !1, b.runAction(cc.sequence(a, cc.callFunc(this.finish, this), cc.stopGrid())), this._inScene.runAction(cc.show())) : (b.setTarget(this._outScene), b._performRecursive(cc.Node._stateCallbackType.onEnter), b.runAction(cc.sequence(a, cc.callFunc(this.finish, this), cc.stopGrid())))
    },
    visit: function () {
        this._back ? this._outScene.visit() : this._inScene.visit();
        this._gridProxy.visit()
    },
    _sceneOrder: function () {
        this._isInSceneOnTop = this._back
    }
});
cc.TransitionPageTurn.create = function (a, b, c) {
    return new cc.TransitionPageTurn(a, b, c)
};
cc.Codec = {
    name: "Jacob__Codec"
};
cc.unzip = function () {
    return cc.Codec.GZip.gunzip.apply(cc.Codec.GZip, arguments)
};
cc.unzipBase64 = function () {
    var a = cc.Codec.Base64.decode.apply(cc.Codec.Base64, arguments);
    return cc.Codec.GZip.gunzip.apply(cc.Codec.GZip, [a])
};
cc.unzipBase64AsArray = function (a, b) {
    b = b || 1;
    var c = this.unzipBase64(a),
        d = [],
        f, g, h;
    f = 0;
    for (h = c.length / b; f < h; f++) {
        d[f] = 0;
        for (g = b - 1; 0 <= g; --g) d[f] += c.charCodeAt(f * b + g) << 8 * g
    }
    return d
};
cc.unzipAsArray = function (a, b) {
    b = b || 1;
    var c = this.unzip(a),
        d = [],
        f, g, h;
    f = 0;
    for (h = c.length / b; f < h; f++) {
        d[f] = 0;
        for (g = b - 1; 0 <= g; --g) d[f] += c.charCodeAt(f * b + g) << 8 * g
    }
    return d
};
cc.StringToArray = function (a) {
    a = a.split(",");
    var b = [],
        c;
    for (c = 0; c < a.length; c++) b.push(parseInt(a[c]));
    return b
};
cc.Codec.Base64 = {
    name: "Jacob__Codec__Base64"
};
cc.Codec.Base64._keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
cc.Codec.Base64.decode = function (a) {
    var b = [],
        c, d, f, g, h, m = 0;
    for (a = a.replace(/[^A-Za-z0-9\+\/\=]/g, ""); m < a.length;) c = this._keyStr.indexOf(a.charAt(m++)), d = this._keyStr.indexOf(a.charAt(m++)), g = this._keyStr.indexOf(a.charAt(m++)), h = this._keyStr.indexOf(a.charAt(m++)), c = c << 2 | d >> 4, d = (d & 15) << 4 | g >> 2, f = (g & 3) << 6 | h, b.push(String.fromCharCode(c)), 64 !== g && b.push(String.fromCharCode(d)), 64 !== h && b.push(String.fromCharCode(f));
    return b = b.join("")
};
cc.Codec.Base64.decodeAsArray = function (a, b) {
    var c = this.decode(a),
        d = [],
        f, g, h;
    f = 0;
    for (h = c.length / b; f < h; f++) {
        d[f] = 0;
        for (g = b - 1; 0 <= g; --g) d[f] += c.charCodeAt(f * b + g) << 8 * g
    }
    return d
};
cc.uint8ArrayToUint32Array = function (a) {
    if (0 !== a.length % 4) return null;
    for (var b = a.length / 4, c = window.Uint32Array ? new Uint32Array(b) : [], d = 0; d < b; d++) {
        var f = 4 * d;
        c[d] = a[f] + 256 * a[f + 1] + 65536 * a[f + 2] + 16777216 * a[f + 3]
    }
    return c
};
cc.PNGReader = cc.Class.extend({
    ctor: function (a) {
        var b, c, d, f;
        this.data = a;
        this.pos = 8;
        this.palette = [];
        this.imgData = [];
        this.transparency = {};
        this.animation = null;
        this.text = {};
        for (d = null;;) {
            b = this.readUInt32();
            f = a = void 0;
            f = [];
            for (a = 0; 4 > a; ++a) f.push(String.fromCharCode(this.data[this.pos++]));
            a = f.join("");
            switch (a) {
            case "IHDR":
                this.width = this.readUInt32();
                this.height = this.readUInt32();
                this.bits = this.data[this.pos++];
                this.colorType = this.data[this.pos++];
                this.compressionMethod = this.data[this.pos++];
                this.filterMethod =
                    this.data[this.pos++];
                this.interlaceMethod = this.data[this.pos++];
                break;
            case "acTL":
                this.animation = {
                    numFrames: this.readUInt32(),
                    numPlays: this.readUInt32() || Infinity,
                    frames: []
                };
                break;
            case "PLTE":
                this.palette = this.read(b);
                break;
            case "fcTL":
                d && this.animation.frames.push(d);
                this.pos += 4;
                d = {
                    width: this.readUInt32(),
                    height: this.readUInt32(),
                    xOffset: this.readUInt32(),
                    yOffset: this.readUInt32()
                };
                a = this.readUInt16();
                b = this.readUInt16() || 100;
                d.delay = 1E3 * a / b;
                d.disposeOp = this.data[this.pos++];
                d.blendOp = this.data[this.pos++];
                d.data = [];
                break;
            case "IDAT":
            case "fdAT":
                "fdAT" === a && (this.pos += 4, b -= 4);
                a = (null != d ? d.data : void 0) || this.imgData;
                for (f = 0; 0 <= b ? f < b : f > b; 0 <= b ? ++f : --f) a.push(this.data[this.pos++]);
                break;
            case "tRNS":
                this.transparency = {};
                switch (this.colorType) {
                case 3:
                    this.transparency.indexed = this.read(b);
                    b = 255 - this.transparency.indexed.length;
                    if (0 < b)
                        for (a = 0; 0 <= b ? a < b : a > b; 0 <= b ? ++a : --a) this.transparency.indexed.push(255);
                    break;
                case 0:
                    this.transparency.grayscale = this.read(b)[0];
                    break;
                case 2:
                    this.transparency.rgb = this.read(b)
                }
                break;
            case "tEXt":
                f = this.read(b);
                b = f.indexOf(0);
                a = String.fromCharCode.apply(String, f.slice(0, b));
                this.text[a] = String.fromCharCode.apply(String, f.slice(b + 1));
                break;
            case "IEND":
                d && this.animation.frames.push(d);
                a: {
                    switch (this.colorType) {
                    case 0:
                    case 3:
                    case 4:
                        d = 1;
                        break a;
                    case 2:
                    case 6:
                        d = 3;
                        break a
                    }
                    d = void 0
                }
                this.colors = d;
                this.hasAlphaChannel = 4 === (c = this.colorType) || 6 === c;
                c = this.colors + (this.hasAlphaChannel ? 1 : 0);
                this.pixelBitlength = this.bits * c;
                a: {
                    switch (this.colors) {
                    case 1:
                        c = "DeviceGray";
                        break a;
                    case 3:
                        c = "DeviceRGB";
                        break a
                    }
                    c = void 0
                }
                this.colorSpace = c;
                Uint8Array != Array && (this.imgData = new Uint8Array(this.imgData));
                return;
            default:
                this.pos += b
            }
            this.pos += 4;
            if (this.pos > this.data.length) throw Error("Incomplete or corrupt PNG file");
        }
    },
    read: function (a) {
        var b, c;
        c = [];
        for (b = 0; 0 <= a ? b < a : b > a; 0 <= a ? ++b : --b) c.push(this.data[this.pos++]);
        return c
    },
    readUInt32: function () {
        var a, b, c, d;
        a = this.data[this.pos++] << 24;
        b = this.data[this.pos++] << 16;
        c = this.data[this.pos++] << 8;
        d = this.data[this.pos++];
        return a | b | c | d
    },
    readUInt16: function () {
        var a,
            b;
        a = this.data[this.pos++] << 8;
        b = this.data[this.pos++];
        return a | b
    },
    decodePixels: function (a) {
        var b, c, d, f, g, h, m, n, p, u, v, x, y, z, t;
        null == a && (a = this.imgData);
        if (0 === a.length) return new Uint8Array(0);
        a = (new Zlib.Inflate(a, {
            index: 0,
            verify: !1
        })).decompress();
        n = this.pixelBitlength / 8;
        x = n * this.width;
        p = new Uint8Array(x * this.height);
        h = a.length;
        for (c = u = v = 0; u < h;) {
            switch (a[u++]) {
            case 0:
                for (b = 0; b < x; b += 1) p[c++] = a[u++];
                break;
            case 1:
                for (f = y = 0; y < x; f = y += 1) b = a[u++], g = f < n ? 0 : p[c - n], p[c++] = (b + g) % 256;
                break;
            case 2:
                for (f = g = 0; g <
                    x; f = g += 1) b = a[u++], d = (f - f % n) / n, y = v && p[(v - 1) * x + d * n + f % n], p[c++] = (y + b) % 256;
                break;
            case 3:
                for (f = t = 0; t < x; f = t += 1) b = a[u++], d = (f - f % n) / n, g = f < n ? 0 : p[c - n], y = v && p[(v - 1) * x + d * n + f % n], p[c++] = (b + Math.floor((g + y) / 2)) % 256;
                break;
            case 4:
                for (f = t = 0; t < x; f = t += 1) b = a[u++], d = (f - f % n) / n, g = f < n ? 0 : p[c - n], 0 === v ? y = z = 0 : (y = p[(v - 1) * x + d * n + f % n], z = d && p[(v - 1) * x + (d - 1) * n + f % n]), m = g + y - z, f = Math.abs(m - g), d = Math.abs(m - y), m = Math.abs(m - z), g = f <= d && f <= m ? g : d <= m ? y : z, p[c++] = (b + g) % 256;
                break;
            default:
                throw Error("Invalid filter algorithm: " + a[u - 1]);
            }
            v++
        }
        return p
    },
    copyToImageData: function (a, b) {
        var c, d, f, g, h, m, n, p;
        d = this.colors;
        p = null;
        c = this.hasAlphaChannel;
        this.palette.length && (p = null != (f = this._decodedPalette) ? f : this._decodedPalette = this.decodePalette(), d = 4, c = !0);
        f = a.data || a;
        n = f.length;
        h = p || b;
        g = m = 0;
        if (1 === d)
            for (; g < n;) d = p ? 4 * b[g / 4] : m, m = h[d++], f[g++] = m, f[g++] = m, f[g++] = m, f[g++] = c ? h[d++] : 255, m = d;
        else
            for (; g < n;) d = p ? 4 * b[g / 4] : m, f[g++] = h[d++], f[g++] = h[d++], f[g++] = h[d++], f[g++] = c ? h[d++] : 255, m = d
    },
    decodePalette: function () {
        var a, b, c, d, f, g, h, m, n;
        c = this.palette;
        g = this.transparency.indexed || [];
        f = new Uint8Array((g.length || 0) + c.length);
        b = h = a = d = 0;
        for (m = c.length; h < m; b = h += 3) f[d++] = c[b], f[d++] = c[b + 1], f[d++] = c[b + 2], f[d++] = null != (n = g[a++]) ? n : 255;
        return f
    },
    render: function (a) {
        var b;
        a.width = this.width;
        a.height = this.height;
        a = a.getContext("2d");
        b = a.createImageData(this.width, this.height);
        this.copyToImageData(b, this.decodePixels());
        return a.putImageData(b, 0, 0)
    }
});
cc.tiffReader = {
    _littleEndian: !1,
    _tiffData: null,
    _fileDirectories: [],
    getUint8: function (a) {
        return this._tiffData[a]
    },
    getUint16: function (a) {
        return this._littleEndian ? this._tiffData[a + 1] << 8 | this._tiffData[a] : this._tiffData[a] << 8 | this._tiffData[a + 1]
    },
    getUint32: function (a) {
        var b = this._tiffData;
        return this._littleEndian ? b[a + 3] << 24 | b[a + 2] << 16 | b[a + 1] << 8 | b[a] : b[a] << 24 | b[a + 1] << 16 | b[a + 2] << 8 | b[a + 3]
    },
    checkLittleEndian: function () {
        var a = this.getUint16(0);
        if (18761 === a) this.littleEndian = !0;
        else if (19789 === a) this.littleEndian = !1;
        else throw console.log(a), TypeError("Invalid byte order value.");
        return this.littleEndian
    },
    hasTowel: function () {
        if (42 !== this.getUint16(2)) throw RangeError("You forgot your towel!");
        return !0
    },
    getFieldTypeName: function (a) {
        var b = this.fieldTypeNames;
        return a in b ? b[a] : null
    },
    getFieldTagName: function (a) {
        var b = this.fieldTagNames;
        if (a in b) return b[a];
        console.log("Unknown Field Tag:", a);
        return "Tag" + a
    },
    getFieldTypeLength: function (a) {
        return -1 !== ["BYTE", "ASCII", "SBYTE", "UNDEFINED"].indexOf(a) ? 1 : -1 !== ["SHORT",
            "SSHORT"
        ].indexOf(a) ? 2 : -1 !== ["LONG", "SLONG", "FLOAT"].indexOf(a) ? 4 : -1 !== ["RATIONAL", "SRATIONAL", "DOUBLE"].indexOf(a) ? 8 : null
    },
    getFieldValues: function (a, b, c, d) {
        a = [];
        var f = this.getFieldTypeLength(b);
        if (4 >= f * c) !1 === this.littleEndian ? a.push(d >>> 8 * (4 - f)) : a.push(d);
        else
            for (var g = 0; g < c; g++) {
                var h = f * g;
                8 <= f ? -1 !== ["RATIONAL", "SRATIONAL"].indexOf(b) ? (a.push(this.getUint32(d + h)), a.push(this.getUint32(d + h + 4))) : cc.log("Can't handle this field type or size") : a.push(this.getBytes(f, d + h))
            }
        "ASCII" === b && a.forEach(function (a,
            b, c) {
            c[b] = String.fromCharCode(a)
        });
        return a
    },
    getBytes: function (a, b) {
        if (0 >= a) cc.log("No bytes requested");
        else {
            if (1 >= a) return this.getUint8(b);
            if (2 >= a) return this.getUint16(b);
            if (3 >= a) return this.getUint32(b) >>> 8;
            if (4 >= a) return this.getUint32(b);
            cc.log("Too many bytes requested")
        }
    },
    getBits: function (a, b, c) {
        c = c || 0;
        b += Math.floor(c / 8);
        var d = c + a;
        a = 32 - a;
        var f, g;
        0 >= d ? console.log("No bits requested") : 8 >= d ? (f = 24 + c, g = this.getUint8(b)) : 16 >= d ? (f = 16 + c, g = this.getUint16(b)) : 32 >= d ? (f = c, g = this.getUint32(b)) : console.log("Too many bits requested");
        return {
            bits: g << f >>> a,
            byteOffset: b + Math.floor(d / 8),
            bitOffset: d % 8
        }
    },
    parseFileDirectory: function (a) {
        var b = this.getUint16(a),
            c = [];
        a += 2;
        for (var d = 0; d < b; a += 12, d++) {
            var f = this.getUint16(a),
                g = this.getUint16(a + 2),
                h = this.getUint32(a + 4),
                m = this.getUint32(a + 8),
                f = this.getFieldTagName(f),
                g = this.getFieldTypeName(g),
                h = this.getFieldValues(f, g, h, m);
            c[f] = {
                type: g,
                values: h
            }
        }
        this._fileDirectories.push(c);
        b = this.getUint32(a);
        0 !== b && this.parseFileDirectory(b)
    },
    clampColorSample: function (a, b) {
        var c = Math.pow(2, 8 - b);
        return Math.floor(a *
            c + (c - 1))
    },
    parseTIFF: function (a, b) {
        b = b || document.createElement("canvas");
        this._tiffData = a;
        this.canvas = b;
        this.checkLittleEndian();
        if (this.hasTowel()) {
            var c = this.getUint32(4);
            this._fileDirectories.length = 0;
            this.parseFileDirectory(c);
            var d = this._fileDirectories[0],
                c = d.ImageWidth.values[0],
                f = d.ImageLength.values[0];
            this.canvas.width = c;
            this.canvas.height = f;
            var g = [],
                h = d.Compression ? d.Compression.values[0] : 1,
                m = d.SamplesPerPixel.values[0],
                n = [],
                p = 0,
                u = !1;
            d.BitsPerSample.values.forEach(function (a, b, c) {
                n[b] = {
                    bitsPerSample: a,
                    hasBytesPerSample: !1,
                    bytesPerSample: void 0
                };
                0 === a % 8 && (n[b].hasBytesPerSample = !0, n[b].bytesPerSample = a / 8);
                p += a
            }, this);
            if (0 === p % 8) var u = !0,
                v = p / 8;
            var x = d.StripOffsets.values,
                y = x.length;
            if (d.StripByteCounts) var z = d.StripByteCounts.values;
            else if (cc.log("Missing StripByteCounts!"), 1 === y) z = [Math.ceil(c * f * p / 8)];
            else throw Error("Cannot recover from missing StripByteCounts");
            for (var t = 0; t < y; t++) {
                var A = x[t];
                g[t] = [];
                for (var w = z[t], B = 0, F = 0, C = 1, D = !0, E = [], G = 0, H = 0, M = 0; B < w; B += C) switch (h) {
                case 1:
                    C = 0;
                    for (E = []; C < m; C++)
                        if (n[C].hasBytesPerSample) E.push(this.getBytes(n[C].bytesPerSample,
                            A + B + n[C].bytesPerSample * C));
                        else {
                            var K = this.getBits(n[C].bitsPerSample, A + B, F);
                            E.push(K.bits);
                            B = K.byteOffset - A;
                            F = K.bitOffset;
                            throw RangeError("Cannot handle sub-byte bits per sample");
                        } g[t].push(E);
                    if (u) C = v;
                    else throw C = 0, RangeError("Cannot handle sub-byte bits per pixel");
                    break;
                case 32773:
                    if (D) {
                        var D = !1,
                            N = 1,
                            U = 1,
                            C = this.getInt8(A + B);
                        0 <= C && 127 >= C ? N = C + 1 : -127 <= C && -1 >= C ? U = -C + 1 : D = !0
                    } else {
                        for (var T = this.getUint8(A + B), C = 0; C < U; C++) {
                            if (n[H].hasBytesPerSample) M = M << 8 * G | T, G++, G === n[H].bytesPerSample && (E.push(M),
                                M = G = 0, H++);
                            else throw RangeError("Cannot handle sub-byte bits per sample");
                            H === m && (g[t].push(E), E = [], H = 0)
                        }
                        N--;
                        0 === N && (D = !0)
                    }
                    C = 1
                }
            }
            if (b.getContext) {
                v = this.canvas.getContext("2d");
                v.fillStyle = "rgba(255, 255, 255, 0)";
                t = d.RowsPerStrip ? d.RowsPerStrip.values[0] : f;
                A = g.length;
                f %= t;
                f = 0 === f ? t : f;
                B = t;
                h = 0;
                E = d.PhotometricInterpretation.values[0];
                N = [];
                U = 0;
                d.ExtraSamples && (N = d.ExtraSamples.values, U = N.length);
                if (d.ColorMap) var K = d.ColorMap.values,
                    P = Math.pow(2, n[0].bitsPerSample);
                for (t = 0; t < A; t++) {
                    t + 1 === A && (B = f);
                    d =
                        g[t].length;
                    h *= t;
                    for (u = m = 0; m < B, u < d; m++)
                        for (x = 0; x < c; x++, u++) {
                            z = g[t][u];
                            D = F = w = 0;
                            y = 1;
                            if (0 < U)
                                for (w = 0; w < U; w++)
                                    if (1 === N[w] || 2 === N[w]) {
                                        y = z[3 + w] / 256;
                                        break
                                    } switch (E) {
                            case 0:
                                if (n[0].hasBytesPerSample) var S = Math.pow(16, 2 * n[0].bytesPerSample);
                                z.forEach(function (a, b, c) {
                                    c[b] = S - a
                                });
                            case 1:
                                w = F = D = this.clampColorSample(z[0], n[0].bitsPerSample);
                                break;
                            case 2:
                                w = this.clampColorSample(z[0], n[0].bitsPerSample);
                                F = this.clampColorSample(z[1], n[1].bitsPerSample);
                                D = this.clampColorSample(z[2], n[2].bitsPerSample);
                                break;
                            case 3:
                                if (void 0 ===
                                    K) throw Error("Palette image missing color map");
                                z = z[0];
                                w = this.clampColorSample(K[z], 16);
                                F = this.clampColorSample(K[P + z], 16);
                                D = this.clampColorSample(K[2 * P + z], 16);
                                break;
                            default:
                                throw RangeError("Unknown Photometric Interpretation:", E);
                            }
                            v.fillStyle = "rgba(" + w + ", " + F + ", " + D + ", " + y + ")";
                            v.fillRect(x, h + m, 1, 1)
                        }
                    h = B
                }
            }
            return this.canvas
        }
    },
    fieldTagNames: {
        315: "Artist",
        258: "BitsPerSample",
        265: "CellLength",
        264: "CellWidth",
        320: "ColorMap",
        259: "Compression",
        33432: "Copyright",
        306: "DateTime",
        338: "ExtraSamples",
        266: "FillOrder",
        289: "FreeByteCounts",
        288: "FreeOffsets",
        291: "GrayResponseCurve",
        290: "GrayResponseUnit",
        316: "HostComputer",
        270: "ImageDescription",
        257: "ImageLength",
        256: "ImageWidth",
        271: "Make",
        281: "MaxSampleValue",
        280: "MinSampleValue",
        272: "Model",
        254: "NewSubfileType",
        274: "Orientation",
        262: "PhotometricInterpretation",
        284: "PlanarConfiguration",
        296: "ResolutionUnit",
        278: "RowsPerStrip",
        277: "SamplesPerPixel",
        305: "Software",
        279: "StripByteCounts",
        273: "StripOffsets",
        255: "SubfileType",
        263: "Threshholding",
        282: "XResolution",
        283: "YResolution",
        326: "BadFaxLines",
        327: "CleanFaxData",
        343: "ClipPath",
        328: "ConsecutiveBadFaxLines",
        433: "Decode",
        434: "DefaultImageColor",
        269: "DocumentName",
        336: "DotRange",
        321: "HalftoneHints",
        346: "Indexed",
        347: "JPEGTables",
        285: "PageName",
        297: "PageNumber",
        317: "Predictor",
        319: "PrimaryChromaticities",
        532: "ReferenceBlackWhite",
        339: "SampleFormat",
        559: "StripRowCounts",
        330: "SubIFDs",
        292: "T4Options",
        293: "T6Options",
        325: "TileByteCounts",
        323: "TileLength",
        324: "TileOffsets",
        322: "TileWidth",
        301: "TransferFunction",
        318: "WhitePoint",
        344: "XClipPathUnits",
        286: "XPosition",
        529: "YCbCrCoefficients",
        531: "YCbCrPositioning",
        530: "YCbCrSubSampling",
        345: "YClipPathUnits",
        287: "YPosition",
        37378: "ApertureValue",
        40961: "ColorSpace",
        36868: "DateTimeDigitized",
        36867: "DateTimeOriginal",
        34665: "Exif IFD",
        36864: "ExifVersion",
        33434: "ExposureTime",
        41728: "FileSource",
        37385: "Flash",
        40960: "FlashpixVersion",
        33437: "FNumber",
        42016: "ImageUniqueID",
        37384: "LightSource",
        37500: "MakerNote",
        37377: "ShutterSpeedValue",
        37510: "UserComment",
        33723: "IPTC",
        34675: "ICC Profile",
        700: "XMP",
        42112: "GDAL_METADATA",
        42113: "GDAL_NODATA",
        34377: "Photoshop"
    },
    fieldTypeNames: {
        1: "BYTE",
        2: "ASCII",
        3: "SHORT",
        4: "LONG",
        5: "RATIONAL",
        6: "SBYTE",
        7: "UNDEFINED",
        8: "SSHORT",
        9: "SLONG",
        10: "SRATIONAL",
        11: "FLOAT",
        12: "DOUBLE"
    }
};
cc.Particle = function (a, b, c, d, f, g, h, m, n, p, u, v) {
    this.pos = a ? a : cc.p(0, 0);
    this.startPos = b ? b : cc.p(0, 0);
    this.color = c ? c : {
        r: 0,
        g: 0,
        b: 0,
        a: 255
    };
    this.deltaColor = d ? d : {
        r: 0,
        g: 0,
        b: 0,
        a: 255
    };
    this.size = f || 0;
    this.deltaSize = g || 0;
    this.rotation = h || 0;
    this.deltaRotation = m || 0;
    this.timeToLive = n || 0;
    this.atlasIndex = p || 0;
    this.modeA = u ? u : new cc.Particle.ModeA;
    this.modeB = v ? v : new cc.Particle.ModeB;
    this.isChangeColor = !1;
    this.drawPos = cc.p(0, 0)
};
cc.Particle.ModeA = function (a, b, c) {
    this.dir = a ? a : cc.p(0, 0);
    this.radialAccel = b || 0;
    this.tangentialAccel = c || 0
};
cc.Particle.ModeB = function (a, b, c, d) {
    this.angle = a || 0;
    this.degreesPerSecond = b || 0;
    this.radius = c || 0;
    this.deltaRadius = d || 0
};
cc.Particle.TemporaryPoints = [cc.p(), cc.p(), cc.p(), cc.p()];
cc.ParticleSystem = cc.Node.extend({
    _className: "ParticleSystem",
    _plistFile: "",
    _elapsed: 0,
    _dontTint: !1,
    modeA: null,
    modeB: null,
    _pointZeroForParticle: cc.p(0, 0),
    _particles: null,
    _emitCounter: 0,
    _particleIdx: 0,
    _batchNode: null,
    atlasIndex: 0,
    _transformSystemDirty: !1,
    _allocatedParticles: 0,
    _isActive: !1,
    particleCount: 0,
    duration: 0,
    _sourcePosition: null,
    _posVar: null,
    life: 0,
    lifeVar: 0,
    angle: 0,
    angleVar: 0,
    startSize: 0,
    startSizeVar: 0,
    endSize: 0,
    endSizeVar: 0,
    _startColor: null,
    _startColorVar: null,
    _endColor: null,
    _endColorVar: null,
    startSpin: 0,
    startSpinVar: 0,
    endSpin: 0,
    endSpinVar: 0,
    emissionRate: 0,
    _totalParticles: 0,
    _texture: null,
    _blendFunc: null,
    _opacityModifyRGB: !1,
    positionType: null,
    autoRemoveOnFinish: !1,
    emitterMode: 0,
    _textureLoaded: null,
    ctor: function (a) {
        cc.Node.prototype.ctor.call(this);
        this.emitterMode = cc.ParticleSystem.MODE_GRAVITY;
        this.modeA = new cc.ParticleSystem.ModeA;
        this.modeB = new cc.ParticleSystem.ModeB;
        this._blendFunc = {
            src: cc.BLEND_SRC,
            dst: cc.BLEND_DST
        };
        this._particles = [];
        this._sourcePosition = cc.p(0, 0);
        this._posVar = cc.p(0,
            0);
        this._startColor = cc.color(255, 255, 255, 255);
        this._startColorVar = cc.color(255, 255, 255, 255);
        this._endColor = cc.color(255, 255, 255, 255);
        this._endColorVar = cc.color(255, 255, 255, 255);
        this._plistFile = "";
        this._elapsed = 0;
        this._dontTint = !1;
        this._pointZeroForParticle = cc.p(0, 0);
        this._particleIdx = this._emitCounter = 0;
        this._batchNode = null;
        this.atlasIndex = 0;
        this._transformSystemDirty = !1;
        this._allocatedParticles = 0;
        this._isActive = !1;
        this._totalParticles = this.emissionRate = this.endSpinVar = this.endSpin = this.startSpinVar =
            this.startSpin = this.endSizeVar = this.endSize = this.startSizeVar = this.startSize = this.angleVar = this.angle = this.lifeVar = this.life = this.duration = this.particleCount = 0;
        this._texture = null;
        this._opacityModifyRGB = !1;
        this.positionType = cc.ParticleSystem.TYPE_FREE;
        this.autoRemoveOnFinish = !1;
        this._textureLoaded = !0;
        !a || cc.isNumber(a) ? (a = a || 100, this.setDrawMode(cc.ParticleSystem.TEXTURE_MODE), this.initWithTotalParticles(a)) : cc.isString(a) ? this.initWithFile(a) : cc.isObject(a) && this.initWithDictionary(a, "")
    },
    _createRenderCmd: function () {
        return cc._renderType ===
            cc.game.RENDER_TYPE_CANVAS ? new cc.ParticleSystem.CanvasRenderCmd(this) : new cc.ParticleSystem.WebGLRenderCmd(this)
    },
    ignoreColor: function (a) {
        this._dontTint = a
    },
    initTexCoordsWithRect: function (a) {
        this._renderCmd.initTexCoordsWithRect(a)
    },
    getBatchNode: function () {
        return this._batchNode
    },
    setBatchNode: function (a) {
        this._renderCmd.setBatchNode(a)
    },
    getAtlasIndex: function () {
        return this.atlasIndex
    },
    setAtlasIndex: function (a) {
        this.atlasIndex = a
    },
    getDrawMode: function () {
        return this._renderCmd.getDrawMode()
    },
    setDrawMode: function (a) {
        this._renderCmd.setDrawMode(a)
    },
    getShapeType: function () {
        return this._renderCmd.getShapeType()
    },
    setShapeType: function (a) {
        this._renderCmd.setShapeType(a)
    },
    isActive: function () {
        return this._isActive
    },
    getParticleCount: function () {
        return this.particleCount
    },
    setParticleCount: function (a) {
        this.particleCount = a
    },
    getDuration: function () {
        return this.duration
    },
    setDuration: function (a) {
        this.duration = a
    },
    getSourcePosition: function () {
        return {
            x: this._sourcePosition.x,
            y: this._sourcePosition.y
        }
    },
    setSourcePosition: function (a) {
        this._sourcePosition.x = a.x;
        this._sourcePosition.y = a.y
    },
    getPosVar: function () {
        return {
            x: this._posVar.x,
            y: this._posVar.y
        }
    },
    setPosVar: function (a) {
        this._posVar.x = a.x;
        this._posVar.y = a.y
    },
    getLife: function () {
        return this.life
    },
    setLife: function (a) {
        this.life = a
    },
    getLifeVar: function () {
        return this.lifeVar
    },
    setLifeVar: function (a) {
        this.lifeVar = a
    },
    getAngle: function () {
        return this.angle
    },
    setAngle: function (a) {
        this.angle = a
    },
    getAngleVar: function () {
        return this.angleVar
    },
    setAngleVar: function (a) {
        this.angleVar = a
    },
    getGravity: function () {
        this.emitterMode !==
            cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.getGravity() : Particle Mode should be Gravity");
        var a = this.modeA.gravity;
        return cc.p(a.x, a.y)
    },
    setGravity: function (a) {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.setGravity() : Particle Mode should be Gravity");
        this.modeA.gravity = a
    },
    getSpeed: function () {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.getSpeed() : Particle Mode should be Gravity");
        return this.modeA.speed
    },
    setSpeed: function (a) {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.setSpeed() : Particle Mode should be Gravity");
        this.modeA.speed = a
    },
    getSpeedVar: function () {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.getSpeedVar() : Particle Mode should be Gravity");
        return this.modeA.speedVar
    },
    setSpeedVar: function (a) {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.setSpeedVar() : Particle Mode should be Gravity");
        this.modeA.speedVar = a
    },
    getTangentialAccel: function () {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.getTangentialAccel() : Particle Mode should be Gravity");
        return this.modeA.tangentialAccel
    },
    setTangentialAccel: function (a) {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.setTangentialAccel() : Particle Mode should be Gravity");
        this.modeA.tangentialAccel = a
    },
    getTangentialAccelVar: function () {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
            cc.log("cc.ParticleBatchNode.getTangentialAccelVar() : Particle Mode should be Gravity");
        return this.modeA.tangentialAccelVar
    },
    setTangentialAccelVar: function (a) {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.setTangentialAccelVar() : Particle Mode should be Gravity");
        this.modeA.tangentialAccelVar = a
    },
    getRadialAccel: function () {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.getRadialAccel() : Particle Mode should be Gravity");
        return this.modeA.radialAccel
    },
    setRadialAccel: function (a) {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.setRadialAccel() : Particle Mode should be Gravity");
        this.modeA.radialAccel = a
    },
    getRadialAccelVar: function () {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.getRadialAccelVar() : Particle Mode should be Gravity");
        return this.modeA.radialAccelVar
    },
    setRadialAccelVar: function (a) {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.setRadialAccelVar() : Particle Mode should be Gravity");
        this.modeA.radialAccelVar = a
    },
    getRotationIsDir: function () {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.getRotationIsDir() : Particle Mode should be Gravity");
        return this.modeA.rotationIsDir
    },
    setRotationIsDir: function (a) {
        this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY && cc.log("cc.ParticleBatchNode.setRotationIsDir() : Particle Mode should be Gravity");
        this.modeA.rotationIsDir = a
    },
    getStartRadius: function () {
        this.emitterMode !== cc.ParticleSystem.MODE_RADIUS && cc.log("cc.ParticleBatchNode.getStartRadius() : Particle Mode should be Radius");
        return this.modeB.startRadius
    },
    setStartRadius: function (a) {
        this.emitterMode !== cc.ParticleSystem.MODE_RADIUS && cc.log("cc.ParticleBatchNode.setStartRadius() : Particle Mode should be Radius");
        this.modeB.startRadius = a
    },
    getStartRadiusVar: function () {
        this.emitterMode !== cc.ParticleSystem.MODE_RADIUS && cc.log("cc.ParticleBatchNode.getStartRadiusVar() : Particle Mode should be Radius");
        return this.modeB.startRadiusVar
    },
    setStartRadiusVar: function (a) {
        this.emitterMode !== cc.ParticleSystem.MODE_RADIUS && cc.log("cc.ParticleBatchNode.setStartRadiusVar() : Particle Mode should be Radius");
        this.modeB.startRadiusVar = a
    },
    getEndRadius: function () {
        this.emitterMode !== cc.ParticleSystem.MODE_RADIUS && cc.log("cc.ParticleBatchNode.getEndRadius() : Particle Mode should be Radius");
        return this.modeB.endRadius
    },
    setEndRadius: function (a) {
        this.emitterMode !== cc.ParticleSystem.MODE_RADIUS && cc.log("cc.ParticleBatchNode.setEndRadius() : Particle Mode should be Radius");
        this.modeB.endRadius = a
    },
    getEndRadiusVar: function () {
        this.emitterMode !== cc.ParticleSystem.MODE_RADIUS && cc.log("cc.ParticleBatchNode.getEndRadiusVar() : Particle Mode should be Radius");
        return this.modeB.endRadiusVar
    },
    setEndRadiusVar: function (a) {
        this.emitterMode !== cc.ParticleSystem.MODE_RADIUS && cc.log("cc.ParticleBatchNode.setEndRadiusVar() : Particle Mode should be Radius");
        this.modeB.endRadiusVar = a
    },
    getRotatePerSecond: function () {
        this.emitterMode !== cc.ParticleSystem.MODE_RADIUS && cc.log("cc.ParticleBatchNode.getRotatePerSecond() : Particle Mode should be Radius");
        return this.modeB.rotatePerSecond
    },
    setRotatePerSecond: function (a) {
        this.emitterMode !== cc.ParticleSystem.MODE_RADIUS && cc.log("cc.ParticleBatchNode.setRotatePerSecond() : Particle Mode should be Radius");
        this.modeB.rotatePerSecond = a
    },
    getRotatePerSecondVar: function () {
        this.emitterMode !== cc.ParticleSystem.MODE_RADIUS && cc.log("cc.ParticleBatchNode.getRotatePerSecondVar() : Particle Mode should be Radius");
        return this.modeB.rotatePerSecondVar
    },
    setRotatePerSecondVar: function (a) {
        this.emitterMode !== cc.ParticleSystem.MODE_RADIUS && cc.log("cc.ParticleBatchNode.setRotatePerSecondVar() : Particle Mode should be Radius");
        this.modeB.rotatePerSecondVar = a
    },
    setScale: function (a, b) {
        this._transformSystemDirty = !0;
        cc.Node.prototype.setScale.call(this,
            a, b)
    },
    setRotation: function (a) {
        this._transformSystemDirty = !0;
        cc.Node.prototype.setRotation.call(this, a)
    },
    setScaleX: function (a) {
        this._transformSystemDirty = !0;
        cc.Node.prototype.setScaleX.call(this, a)
    },
    setScaleY: function (a) {
        this._transformSystemDirty = !0;
        cc.Node.prototype.setScaleY.call(this, a)
    },
    getStartSize: function () {
        return this.startSize
    },
    setStartSize: function (a) {
        this.startSize = a
    },
    getStartSizeVar: function () {
        return this.startSizeVar
    },
    setStartSizeVar: function (a) {
        this.startSizeVar = a
    },
    getEndSize: function () {
        return this.endSize
    },
    setEndSize: function (a) {
        this.endSize = a
    },
    getEndSizeVar: function () {
        return this.endSizeVar
    },
    setEndSizeVar: function (a) {
        this.endSizeVar = a
    },
    getStartColor: function () {
        return cc.color(this._startColor.r, this._startColor.g, this._startColor.b, this._startColor.a)
    },
    setStartColor: function (a) {
        this._startColor.r = a.r;
        this._startColor.g = a.g;
        this._startColor.b = a.b;
        this._startColor.a = a.a
    },
    getStartColorVar: function () {
        return cc.color(this._startColorVar.r, this._startColorVar.g, this._startColorVar.b, this._startColorVar.a)
    },
    setStartColorVar: function (a) {
        this._startColorVar.r = a.r;
        this._startColorVar.g = a.g;
        this._startColorVar.b = a.b;
        this._startColorVar.a = a.a
    },
    getEndColor: function () {
        return cc.color(this._endColor.r, this._endColor.g, this._endColor.b, this._endColor.a)
    },
    setEndColor: function (a) {
        this._endColor.r = a.r;
        this._endColor.g = a.g;
        this._endColor.b = a.b;
        this._endColor.a = a.a
    },
    getEndColorVar: function () {
        return cc.color(this._endColorVar.r, this._endColorVar.g, this._endColorVar.b, this._endColorVar.a)
    },
    setEndColorVar: function (a) {
        this._endColorVar.r =
            a.r;
        this._endColorVar.g = a.g;
        this._endColorVar.b = a.b;
        this._endColorVar.a = a.a
    },
    getStartSpin: function () {
        return this.startSpin
    },
    setStartSpin: function (a) {
        this.startSpin = a
    },
    getStartSpinVar: function () {
        return this.startSpinVar
    },
    setStartSpinVar: function (a) {
        this.startSpinVar = a
    },
    getEndSpin: function () {
        return this.endSpin
    },
    setEndSpin: function (a) {
        this.endSpin = a
    },
    getEndSpinVar: function () {
        return this.endSpinVar
    },
    setEndSpinVar: function (a) {
        this.endSpinVar = a
    },
    getEmissionRate: function () {
        return this.emissionRate
    },
    setEmissionRate: function (a) {
        this.emissionRate =
            a
    },
    getTotalParticles: function () {
        return this._totalParticles
    },
    setTotalParticles: function (a) {
        this._renderCmd.setTotalParticles(a)
    },
    getTexture: function () {
        return this._texture
    },
    setTexture: function (a) {
        a && (a.isLoaded() ? this.setTextureWithRect(a, cc.rect(0, 0, a.width, a.height)) : (this._textureLoaded = !1, a.addEventListener("load", function (a) {
            this._textureLoaded = !0;
            this.setTextureWithRect(a, cc.rect(0, 0, a.width, a.height))
        }, this)))
    },
    getBlendFunc: function () {
        return this._blendFunc
    },
    setBlendFunc: function (a, b) {
        if (void 0 ===
            b) this._blendFunc !== a && (this._blendFunc = a, this._updateBlendFunc());
        else if (this._blendFunc.src !== a || this._blendFunc.dst !== b) this._blendFunc = {
            src: a,
            dst: b
        }, this._updateBlendFunc()
    },
    isOpacityModifyRGB: function () {
        return this._opacityModifyRGB
    },
    setOpacityModifyRGB: function (a) {
        this._opacityModifyRGB = a
    },
    isBlendAdditive: function () {
        return this._blendFunc.src === cc.SRC_ALPHA && this._blendFunc.dst === cc.ONE || this._blendFunc.src === cc.ONE && this._blendFunc.dst === cc.ONE
    },
    setBlendAdditive: function (a) {
        var b = this._blendFunc;
        a ? (b.src = cc.SRC_ALPHA, b.dst = cc.ONE) : this._renderCmd._setBlendAdditive()
    },
    getPositionType: function () {
        return this.positionType
    },
    setPositionType: function (a) {
        this.positionType = a
    },
    isAutoRemoveOnFinish: function () {
        return this.autoRemoveOnFinish
    },
    setAutoRemoveOnFinish: function (a) {
        this.autoRemoveOnFinish = a
    },
    getEmitterMode: function () {
        return this.emitterMode
    },
    setEmitterMode: function (a) {
        this.emitterMode = a
    },
    init: function () {
        return this.initWithTotalParticles(150)
    },
    initWithFile: function (a) {
        this._plistFile = a;
        a = cc.loader.getRes(a);
        return !a ? (cc.log("cc.ParticleSystem.initWithFile(): Particles: file not found"), !1) : this.initWithDictionary(a, "")
    },
    getBoundingBoxToWorld: function () {
        return cc.rect(0, 0, cc._canvas.width, cc._canvas.height)
    },
    initWithDictionary: function (a, b) {
        var c = !1,
            d = null,
            d = this._valueForKey,
            f = parseInt(d("maxParticles", a));
        if (this.initWithTotalParticles(f)) {
            this.angle = parseFloat(d("angle", a));
            this.angleVar = parseFloat(d("angleVariance", a));
            this.duration = parseFloat(d("duration", a));
            this._blendFunc.src = parseInt(d("blendFuncSource",
                a));
            this._blendFunc.dst = parseInt(d("blendFuncDestination", a));
            c = this._startColor;
            c.r = 255 * parseFloat(d("startColorRed", a));
            c.g = 255 * parseFloat(d("startColorGreen", a));
            c.b = 255 * parseFloat(d("startColorBlue", a));
            c.a = 255 * parseFloat(d("startColorAlpha", a));
            c = this._startColorVar;
            c.r = 255 * parseFloat(d("startColorVarianceRed", a));
            c.g = 255 * parseFloat(d("startColorVarianceGreen", a));
            c.b = 255 * parseFloat(d("startColorVarianceBlue", a));
            c.a = 255 * parseFloat(d("startColorVarianceAlpha", a));
            c = this._endColor;
            c.r = 255 * parseFloat(d("finishColorRed",
                a));
            c.g = 255 * parseFloat(d("finishColorGreen", a));
            c.b = 255 * parseFloat(d("finishColorBlue", a));
            c.a = 255 * parseFloat(d("finishColorAlpha", a));
            c = this._endColorVar;
            c.r = 255 * parseFloat(d("finishColorVarianceRed", a));
            c.g = 255 * parseFloat(d("finishColorVarianceGreen", a));
            c.b = 255 * parseFloat(d("finishColorVarianceBlue", a));
            c.a = 255 * parseFloat(d("finishColorVarianceAlpha", a));
            this.startSize = parseFloat(d("startParticleSize", a));
            this.startSizeVar = parseFloat(d("startParticleSizeVariance", a));
            this.endSize = parseFloat(d("finishParticleSize",
                a));
            this.endSizeVar = parseFloat(d("finishParticleSizeVariance", a));
            this.setPosition(parseFloat(d("sourcePositionx", a)), parseFloat(d("sourcePositiony", a)));
            this._posVar.x = parseFloat(d("sourcePositionVariancex", a));
            this._posVar.y = parseFloat(d("sourcePositionVariancey", a));
            this.startSpin = parseFloat(d("rotationStart", a));
            this.startSpinVar = parseFloat(d("rotationStartVariance", a));
            this.endSpin = parseFloat(d("rotationEnd", a));
            this.endSpinVar = parseFloat(d("rotationEndVariance", a));
            this.emitterMode = parseInt(d("emitterType",
                a));
            if (this.emitterMode === cc.ParticleSystem.MODE_GRAVITY) c = this.modeA, c.gravity.x = parseFloat(d("gravityx", a)), c.gravity.y = parseFloat(d("gravityy", a)), c.speed = parseFloat(d("speed", a)), c.speedVar = parseFloat(d("speedVariance", a)), f = d("radialAcceleration", a), c.radialAccel = f ? parseFloat(f) : 0, f = d("radialAccelVariance", a), c.radialAccelVar = f ? parseFloat(f) : 0, f = d("tangentialAcceleration", a), c.tangentialAccel = f ? parseFloat(f) : 0, f = d("tangentialAccelVariance", a), c.tangentialAccelVar = f ? parseFloat(f) : 0, f = d("rotationIsDir",
                a), null !== f ? (f = f.toString().toLowerCase(), c.rotationIsDir = "true" === f || "1" === f) : c.rotationIsDir = !1;
            else if (this.emitterMode === cc.ParticleSystem.MODE_RADIUS) c = this.modeB, c.startRadius = parseFloat(d("maxRadius", a)), c.startRadiusVar = parseFloat(d("maxRadiusVariance", a)), c.endRadius = parseFloat(d("minRadius", a)), c.endRadiusVar = 0, c.rotatePerSecond = parseFloat(d("rotatePerSecond", a)), c.rotatePerSecondVar = parseFloat(d("rotatePerSecondVariance", a));
            else return cc.log("cc.ParticleSystem.initWithDictionary(): Invalid emitterType in config file"),
                !1;
            this.life = parseFloat(d("particleLifespan", a));
            this.lifeVar = parseFloat(d("particleLifespanVariance", a));
            this.emissionRate = this._totalParticles / this.life;
            if (!this._batchNode)
                if (this._opacityModifyRGB = !1, c = d("textureFileName", a), c = cc.path.changeBasename(this._plistFile, c), f = cc.textureCache.getTextureForKey(c)) this.setTexture(f);
                else if (d = d("textureImageData", a), !d || 0 === d.length) {
                f = cc.textureCache.addImage(c);
                if (!f) return !1;
                this.setTexture(f)
            } else {
                d = cc.unzipBase64AsArray(d, 1);
                if (!d) return cc.log("cc.ParticleSystem: error decoding or ungzipping textureImageData"),
                    !1;
                f = cc.getImageFormatByData(d);
                if (f !== cc.FMT_TIFF && f !== cc.FMT_PNG) return cc.log("cc.ParticleSystem: unknown image format with Data"), !1;
                var g = document.createElement("canvas");
                f === cc.FMT_PNG ? (new cc.PNGReader(d)).render(g) : cc.tiffReader.parseTIFF(d, g);
                cc.textureCache.cacheImage(c, g);
                (d = cc.textureCache.getTextureForKey(c)) || cc.log("cc.ParticleSystem.initWithDictionary() : error loading the texture");
                this.setTexture(d)
            }
            c = !0
        }
        return c
    },
    initWithTotalParticles: function (a) {
        this._totalParticles = a;
        var b, c =
            this._particles;
        for (b = c.length = 0; b < a; b++) c[b] = new cc.Particle;
        if (!c) return cc.log("Particle system: not enough memory"), !1;
        this._allocatedParticles = a;
        if (this._batchNode)
            for (b = 0; b < this._totalParticles; b++) c[b].atlasIndex = b;
        this._isActive = !0;
        this._blendFunc.src = cc.BLEND_SRC;
        this._blendFunc.dst = cc.BLEND_DST;
        this.positionType = cc.ParticleSystem.TYPE_FREE;
        this.emitterMode = cc.ParticleSystem.MODE_GRAVITY;
        this._transformSystemDirty = this.autoRemoveOnFinish = !1;
        this.scheduleUpdateWithPriority(1);
        this._renderCmd._initWithTotalParticles(a);
        return !0
    },
    destroyParticleSystem: function () {
        this.unscheduleUpdate()
    },
    addParticle: function () {
        if (this.isFull()) return !1;
        var a = this._renderCmd.addParticle();
        this.initParticle(a);
        ++this.particleCount;
        return !0
    },
    initParticle: function (a) {
        var b = cc.randomMinus1To1;
        a.timeToLive = this.life + this.lifeVar * b();
        a.timeToLive = Math.max(0, a.timeToLive);
        a.pos.x = this._sourcePosition.x + this._posVar.x * b();
        a.pos.y = this._sourcePosition.y + this._posVar.y * b();
        var c, d;
        c = this._startColor;
        var f = this._startColorVar,
            g = this._endColor;
        d = this._endColorVar;
        c = {
            r: cc.clampf(c.r + f.r * b(), 0, 255),
            g: cc.clampf(c.g + f.g * b(), 0, 255),
            b: cc.clampf(c.b + f.b * b(), 0, 255),
            a: cc.clampf(c.a + f.a * b(), 0, 255)
        };
        d = {
            r: cc.clampf(g.r + d.r * b(), 0, 255),
            g: cc.clampf(g.g + d.g * b(), 0, 255),
            b: cc.clampf(g.b + d.b * b(), 0, 255),
            a: cc.clampf(g.a + d.a * b(), 0, 255)
        };
        a.color = c;
        f = a.deltaColor;
        g = a.timeToLive;
        f.r = (d.r - c.r) / g;
        f.g = (d.g - c.g) / g;
        f.b = (d.b - c.b) / g;
        f.a = (d.a - c.a) / g;
        c = this.startSize + this.startSizeVar * b();
        c = Math.max(0, c);
        a.size = c;
        this.endSize === cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE ?
            a.deltaSize = 0 : (d = this.endSize + this.endSizeVar * b(), d = Math.max(0, d), a.deltaSize = (d - c) / g);
        c = this.startSpin + this.startSpinVar * b();
        d = this.endSpin + this.endSpinVar * b();
        a.rotation = c;
        a.deltaRotation = (d - c) / g;
        this.positionType === cc.ParticleSystem.TYPE_FREE ? a.startPos = this.convertToWorldSpace(this._pointZeroForParticle) : this.positionType === cc.ParticleSystem.TYPE_RELATIVE && (a.startPos.x = this._position.x, a.startPos.y = this._position.y);
        c = cc.degreesToRadians(this.angle + this.angleVar * b());
        if (this.emitterMode === cc.ParticleSystem.MODE_GRAVITY) g =
            this.modeA, d = a.modeA, f = g.speed + g.speedVar * b(), d.dir.x = Math.cos(c), d.dir.y = Math.sin(c), cc.pMultIn(d.dir, f), d.radialAccel = g.radialAccel + g.radialAccelVar * b(), d.tangentialAccel = g.tangentialAccel + g.tangentialAccelVar * b(), g.rotationIsDir && (a.rotation = -cc.radiansToDegrees(cc.pToAngle(d.dir)));
        else {
            d = this.modeB;
            a = a.modeB;
            var f = d.startRadius + d.startRadiusVar * b(),
                h = d.endRadius + d.endRadiusVar * b();
            a.radius = f;
            a.deltaRadius = d.endRadius === cc.ParticleSystem.START_RADIUS_EQUAL_TO_END_RADIUS ? 0 : (h - f) / g;
            a.angle = c;
            a.degreesPerSecond =
                cc.degreesToRadians(d.rotatePerSecond + d.rotatePerSecondVar * b())
        }
    },
    stopSystem: function () {
        this._isActive = !1;
        this._elapsed = this.duration;
        this._emitCounter = 0
    },
    resetSystem: function () {
        this._isActive = !0;
        this._elapsed = 0;
        var a = this._particles;
        for (this._particleIdx = 0; this._particleIdx < this.particleCount; ++this._particleIdx) a[this._particleIdx].timeToLive = 0
    },
    isFull: function () {
        return this.particleCount >= this._totalParticles
    },
    updateQuadWithParticle: function (a, b) {
        this._renderCmd.updateQuadWithParticle(a, b)
    },
    postStep: function () {
        this._renderCmd.postStep()
    },
    update: function (a) {
        if (this._isActive && this.emissionRate) {
            var b = 1 / this.emissionRate;
            this.particleCount < this._totalParticles && (this._emitCounter += a);
            for (; this.particleCount < this._totalParticles && this._emitCounter > b;) this.addParticle(), this._emitCounter -= b;
            this._elapsed += a; - 1 !== this.duration && this.duration < this._elapsed && this.stopSystem()
        }
        this._particleIdx = 0;
        b = cc.Particle.TemporaryPoints[0];
        this.positionType === cc.ParticleSystem.TYPE_FREE ? cc.pIn(b, this.convertToWorldSpace(this._pointZeroForParticle)) :
            this.positionType === cc.ParticleSystem.TYPE_RELATIVE && (b.x = this._position.x, b.y = this._position.y);
        if (this._visible) {
            for (var c = cc.Particle.TemporaryPoints[1], d = cc.Particle.TemporaryPoints[2], f = cc.Particle.TemporaryPoints[3], g = this._particles; this._particleIdx < this.particleCount;) {
                cc.pZeroIn(c);
                cc.pZeroIn(d);
                cc.pZeroIn(f);
                var h = g[this._particleIdx];
                h.timeToLive -= a;
                if (0 < h.timeToLive) {
                    if (this.emitterMode === cc.ParticleSystem.MODE_GRAVITY) {
                        var m = f,
                            n = c,
                            p = d;
                        h.pos.x || h.pos.y ? (cc.pIn(n, h.pos), cc.pNormalizeIn(n)) :
                            cc.pZeroIn(n);
                        cc.pIn(p, n);
                        cc.pMultIn(n, h.modeA.radialAccel);
                        var u = p.x;
                        p.x = -p.y;
                        p.y = u;
                        cc.pMultIn(p, h.modeA.tangentialAccel);
                        cc.pIn(m, n);
                        cc.pAddIn(m, p);
                        cc.pAddIn(m, this.modeA.gravity);
                        cc.pMultIn(m, a);
                        cc.pAddIn(h.modeA.dir, m);
                        cc.pIn(m, h.modeA.dir);
                        cc.pMultIn(m, a);
                        cc.pAddIn(h.pos, m)
                    } else m = h.modeB, m.angle += m.degreesPerSecond * a, m.radius += m.deltaRadius * a, h.pos.x = -Math.cos(m.angle) * m.radius, h.pos.y = -Math.sin(m.angle) * m.radius;
                    this._renderCmd._updateDeltaColor(h, a);
                    h.size += h.deltaSize * a;
                    h.size = Math.max(0,
                        h.size);
                    h.rotation += h.deltaRotation * a;
                    m = c;
                    this.positionType === cc.ParticleSystem.TYPE_FREE || this.positionType === cc.ParticleSystem.TYPE_RELATIVE ? (n = d, cc.pIn(n, b), cc.pSubIn(n, h.startPos), cc.pIn(m, h.pos), cc.pSubIn(m, n)) : cc.pIn(m, h.pos);
                    this._batchNode && (m.x += this._position.x, m.y += this._position.y);
                    this._renderCmd.updateParticlePosition(h, m);
                    ++this._particleIdx
                } else if (h = h.atlasIndex, this._particleIdx !== this.particleCount - 1 && (m = g[this._particleIdx], g[this._particleIdx] = g[this.particleCount - 1], g[this.particleCount -
                        1] = m), this._batchNode && (this._batchNode.disableParticle(this.atlasIndex + h), g[this.particleCount - 1].atlasIndex = h), --this.particleCount, 0 === this.particleCount && this.autoRemoveOnFinish) {
                    this.unscheduleUpdate();
                    this._parent.removeChild(this, !0);
                    return
                }
            }
            this._transformSystemDirty = !1
        }
        this._batchNode || this.postStep()
    },
    updateWithNoTime: function () {
        this.update(0)
    },
    _valueForKey: function (a, b) {
        if (b) {
            var c = b[a];
            return null != c ? c : ""
        }
        return ""
    },
    _updateBlendFunc: function () {
        if (this._batchNode) cc.log("Can't change blending functions when the particle is being batched");
        else {
            var a = this._texture;
            if (a && a instanceof cc.Texture2D) {
                this._opacityModifyRGB = !1;
                var b = this._blendFunc;
                b.src === cc.BLEND_SRC && b.dst === cc.BLEND_DST && (a.hasPremultipliedAlpha() ? this._opacityModifyRGB = !0 : (b.src = cc.SRC_ALPHA, b.dst = cc.ONE_MINUS_SRC_ALPHA))
            }
        }
    },
    clone: function () {
        var a = new cc.ParticleSystem;
        if (a.initWithTotalParticles(this.getTotalParticles())) {
            a.setAngle(this.getAngle());
            a.setAngleVar(this.getAngleVar());
            a.setDuration(this.getDuration());
            var b = this.getBlendFunc();
            a.setBlendFunc(b.src, b.dst);
            a.setStartColor(this.getStartColor());
            a.setStartColorVar(this.getStartColorVar());
            a.setEndColor(this.getEndColor());
            a.setEndColorVar(this.getEndColorVar());
            a.setStartSize(this.getStartSize());
            a.setStartSizeVar(this.getStartSizeVar());
            a.setEndSize(this.getEndSize());
            a.setEndSizeVar(this.getEndSizeVar());
            a.setPosition(cc.p(this.x, this.y));
            a.setPosVar(cc.p(this.getPosVar().x, this.getPosVar().y));
            a.setPositionType(this.getPositionType());
            a.setStartSpin(this.getStartSpin() || 0);
            a.setStartSpinVar(this.getStartSpinVar() ||
                0);
            a.setEndSpin(this.getEndSpin() || 0);
            a.setEndSpinVar(this.getEndSpinVar() || 0);
            a.setEmitterMode(this.getEmitterMode());
            this.getEmitterMode() === cc.ParticleSystem.MODE_GRAVITY ? (b = this.getGravity(), a.setGravity(cc.p(b.x, b.y)), a.setSpeed(this.getSpeed()), a.setSpeedVar(this.getSpeedVar()), a.setRadialAccel(this.getRadialAccel()), a.setRadialAccelVar(this.getRadialAccelVar()), a.setTangentialAccel(this.getTangentialAccel()), a.setTangentialAccelVar(this.getTangentialAccelVar())) : this.getEmitterMode() === cc.ParticleSystem.MODE_RADIUS &&
                (a.setStartRadius(this.getStartRadius()), a.setStartRadiusVar(this.getStartRadiusVar()), a.setEndRadius(this.getEndRadius()), a.setEndRadiusVar(this.getEndRadiusVar()), a.setRotatePerSecond(this.getRotatePerSecond()), a.setRotatePerSecondVar(this.getRotatePerSecondVar()));
            a.setLife(this.getLife());
            a.setLifeVar(this.getLifeVar());
            a.setEmissionRate(this.getEmissionRate());
            if (!this.getBatchNode() && (a.setOpacityModifyRGB(this.isOpacityModifyRGB()), b = this.getTexture())) {
                var c = b.getContentSize();
                a.setTextureWithRect(b,
                    cc.rect(0, 0, c.width, c.height))
            }
        }
        return a
    },
    setDisplayFrame: function (a) {
        if (a) {
            var b = a.getOffsetInPixels();
            (0 !== b.x || 0 !== b.y) && cc.log("cc.ParticleSystem.setDisplayFrame(): QuadParticle only supports SpriteFrames with no offsets");
            a = a.getTexture();
            this._texture !== a && this.setTexture(a)
        }
    },
    setTextureWithRect: function (a, b) {
        this._texture !== a && (this._texture = a, this._updateBlendFunc());
        this.initTexCoordsWithRect(b)
    },
    listenBackToForeground: function (a) {}
});
_p = cc.ParticleSystem.prototype;
cc.defineGetterSetter(_p, "opacityModifyRGB", _p.isOpacityModifyRGB, _p.setOpacityModifyRGB);
cc.defineGetterSetter(_p, "batchNode", _p.getBatchNode, _p.setBatchNode);
cc.defineGetterSetter(_p, "drawMode", _p.getDrawMode, _p.setDrawMode);
cc.defineGetterSetter(_p, "shapeType", _p.getShapeType, _p.setShapeType);
cc.defineGetterSetter(_p, "active", _p.isActive);
cc.defineGetterSetter(_p, "sourcePos", _p.getSourcePosition, _p.setSourcePosition);
cc.defineGetterSetter(_p, "posVar", _p.getPosVar, _p.setPosVar);
cc.defineGetterSetter(_p, "gravity", _p.getGravity, _p.setGravity);
cc.defineGetterSetter(_p, "speed", _p.getSpeed, _p.setSpeed);
cc.defineGetterSetter(_p, "speedVar", _p.getSpeedVar, _p.setSpeedVar);
cc.defineGetterSetter(_p, "tangentialAccel", _p.getTangentialAccel, _p.setTangentialAccel);
cc.defineGetterSetter(_p, "tangentialAccelVar", _p.getTangentialAccelVar, _p.setTangentialAccelVar);
cc.defineGetterSetter(_p, "radialAccel", _p.getRadialAccel, _p.setRadialAccel);
cc.defineGetterSetter(_p, "radialAccelVar", _p.getRadialAccelVar, _p.setRadialAccelVar);
cc.defineGetterSetter(_p, "rotationIsDir", _p.getRotationIsDir, _p.setRotationIsDir);
cc.defineGetterSetter(_p, "startRadius", _p.getStartRadius, _p.setStartRadius);
cc.defineGetterSetter(_p, "startRadiusVar", _p.getStartRadiusVar, _p.setStartRadiusVar);
cc.defineGetterSetter(_p, "endRadius", _p.getEndRadius, _p.setEndRadius);
cc.defineGetterSetter(_p, "endRadiusVar", _p.getEndRadiusVar, _p.setEndRadiusVar);
cc.defineGetterSetter(_p, "rotatePerS", _p.getRotatePerSecond, _p.setRotatePerSecond);
cc.defineGetterSetter(_p, "rotatePerSVar", _p.getRotatePerSecondVar, _p.setRotatePerSecondVar);
cc.defineGetterSetter(_p, "startColor", _p.getStartColor, _p.setStartColor);
cc.defineGetterSetter(_p, "startColorVar", _p.getStartColorVar, _p.setStartColorVar);
cc.defineGetterSetter(_p, "endColor", _p.getEndColor, _p.setEndColor);
cc.defineGetterSetter(_p, "endColorVar", _p.getEndColorVar, _p.setEndColorVar);
cc.defineGetterSetter(_p, "totalParticles", _p.getTotalParticles, _p.setTotalParticles);
cc.defineGetterSetter(_p, "texture", _p.getTexture, _p.setTexture);
cc.ParticleSystem.create = function (a) {
    return new cc.ParticleSystem(a)
};
cc.ParticleSystem.createWithTotalParticles = cc.ParticleSystem.create;
cc.ParticleSystem.ModeA = function (a, b, c, d, f, g, h, m) {
    this.gravity = a ? a : cc.p(0, 0);
    this.speed = b || 0;
    this.speedVar = c || 0;
    this.tangentialAccel = d || 0;
    this.tangentialAccelVar = f || 0;
    this.radialAccel = g || 0;
    this.radialAccelVar = h || 0;
    this.rotationIsDir = m || !1
};
cc.ParticleSystem.ModeB = function (a, b, c, d, f, g) {
    this.startRadius = a || 0;
    this.startRadiusVar = b || 0;
    this.endRadius = c || 0;
    this.endRadiusVar = d || 0;
    this.rotatePerSecond = f || 0;
    this.rotatePerSecondVar = g || 0
};
cc.ParticleSystem.SHAPE_MODE = 0;
cc.ParticleSystem.TEXTURE_MODE = 1;
cc.ParticleSystem.STAR_SHAPE = 0;
cc.ParticleSystem.BALL_SHAPE = 1;
cc.ParticleSystem.DURATION_INFINITY = -1;
cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE = -1;
cc.ParticleSystem.START_RADIUS_EQUAL_TO_END_RADIUS = -1;
cc.ParticleSystem.MODE_GRAVITY = 0;
cc.ParticleSystem.MODE_RADIUS = 1;
cc.ParticleSystem.TYPE_FREE = 0;
cc.ParticleSystem.TYPE_RELATIVE = 1;
cc.ParticleSystem.TYPE_GROUPED = 2;
(function () {
    cc.ParticleSystem.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !0;
        this._drawMode = cc.ParticleSystem.TEXTURE_MODE;
        this._shapeType = cc.ParticleSystem.BALL_SHAPE;
        this._pointRect = cc.rect(0, 0, 0, 0);
        this._tintCache = null
    };
    var a = cc.ParticleSystem.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    a.constructor = cc.ParticleSystem.CanvasRenderCmd;
    a.getDrawMode = function () {
        return this._drawMode
    };
    a.setDrawMode = function (a) {
        this._drawMode = a
    };
    a.getShapeType = function () {
        return this._shapeType
    };
    a.setShapeType = function (a) {
        this._shapeType = a
    };
    a.setBatchNode = function (a) {
        this._batchNode !== a && (this._node._batchNode = a)
    };
    a.updateQuadWithParticle = function (a, c) {};
    a.updateParticlePosition = function (a, c) {
        cc.pIn(a.drawPos, c)
    };
    a.rendering = function (a, c, d) {
        a = a || cc._renderContext;
        var f = a.getContext(),
            g = this._node,
            h = this._pointRect;
        a.setTransform(this._worldTransform, c, d);
        a.save();
        g.isBlendAdditive() ? f.globalCompositeOperation = "lighter" : f.globalCompositeOperation = "source-over";
        var m, n;
        d = this._node.particleCount;
        var p = this._node._particles;
        if (g.drawMode !== cc.ParticleSystem.SHAPE_MODE && g._texture) {
            if (!g._texture._textureLoaded) {
                a.restore();
                return
            }
            var u = g._texture.getHtmlElementObj();
            if (!u.width || !u.height) {
                a.restore();
                return
            }
            m = u;
            for (c = 0; c < d; c++)
                if (m = p[c], n = m.color.a / 255, 0 !== n) {
                    f.globalAlpha = n;
                    f.save();
                    f.translate(0 | m.drawPos.x, -(0 | m.drawPos.y));
                    var v = 4 * Math.floor(m.size / 4);
                    n = h.width;
                    var x = h.height;
                    f.scale(Math.max(1 / n * v, 1E-6), Math.max(1 / x * v, 1E-6));
                    m.rotation && f.rotate(cc.degreesToRadians(m.rotation));
                    m = m.isChangeColor ?
                        this._changeTextureColor(g._texture, m.color, this._pointRect) : u;
                    f.drawImage(m, -(0 | n / 2), -(0 | x / 2));
                    f.restore()
                }
        } else {
            u = cc._drawingUtil;
            for (c = 0; c < d; c++) m = p[c], h = 0 | 0.5 * m.size, n = m.color.a / 255, 0 !== n && (f.globalAlpha = n, f.save(), f.translate(0 | m.drawPos.x, -(0 | m.drawPos.y)), g.shapeType === cc.ParticleSystem.STAR_SHAPE ? (m.rotation && f.rotate(cc.degreesToRadians(m.rotation)), u.drawStar(a, h, m.color)) : u.drawColorBall(a, h, m.color), f.restore())
        }
        a.restore();
        cc.g_NumberOfDraws++
    };
    a._changeTextureColor = function (a, c, d) {
        this._tintCache ||
            (this._tintCache = document.createElement("canvas"));
        var f = this._tintCache,
            g = a.getContentSize();
        f.width = g.width;
        f.height = g.height;
        return a._generateColorTexture(c.r, c.g, c.b, d, f)
    };
    a.initTexCoordsWithRect = function (a) {
        this._pointRect = a
    };
    a.setTotalParticles = function (a) {
        this._node._totalParticles = 200 > a ? a : 200
    };
    a.addParticle = function () {
        var a = this._node,
            c = a._particles;
        a.particleCount < c.length ? a = c[a.particleCount] : (a = new cc.Particle, c.push(a));
        return a
    };
    a._setupVBO = function () {};
    a._allocMemory = function () {
        return !0
    };
    a.postStep = function () {};
    a._setBlendAdditive = function () {
        var a = this._node._blendFunc;
        a.src = cc.BLEND_SRC;
        a.dst = cc.BLEND_DST
    };
    a._initWithTotalParticles = function (a) {};
    a._updateDeltaColor = function (a, c) {
        this._node._dontTint || (a.color.r += a.deltaColor.r * c, a.color.g += a.deltaColor.g * c, a.color.b += a.deltaColor.b * c, a.color.a += a.deltaColor.a * c, a.isChangeColor = !0)
    }
})();
(function () {
    cc.ParticleSystem.WebGLRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !0;
        this._matrix = null;
        this._buffersVBO = [0, 0];
        this._quads = [];
        this._indices = [];
        this._quadsArrayBuffer = null
    };
    var a = cc.ParticleSystem.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
    a.constructor = cc.ParticleSystem.WebGLRenderCmd;
    a.getDrawMode = function () {};
    a.setDrawMode = function (a) {};
    a.getShapeType = function () {};
    a.setShapeType = function (a) {};
    a.setBatchNode = function (a) {
        var c = this._node;
        if (c._batchNode !==
            a) {
            var d = c._batchNode;
            if (c._batchNode = a)
                for (var f = c._particles, g = 0; g < c._totalParticles; g++) f[g].atlasIndex = g;
            a ? d || (c._batchNode.textureAtlas._copyQuadsToTextureAtlas(this._quads, c.atlasIndex), cc._renderContext.deleteBuffer(this._buffersVBO[1])) : (this._allocMemory(), this.initIndices(c._totalParticles), c.setTexture(d.getTexture()), this._setupVBO())
        }
    };
    a.initIndices = function (a) {
        for (var c = this._indices, d = 0; d < a; ++d) {
            var f = 6 * d,
                g = 4 * d;
            c[f + 0] = g + 0;
            c[f + 1] = g + 1;
            c[f + 2] = g + 2;
            c[f + 5] = g + 1;
            c[f + 4] = g + 2;
            c[f + 3] = g + 3
        }
    };
    a.isDifferentTexture =
        function (a, c) {
            return a === c
        };
    a.updateParticlePosition = function (a, c) {
        this.updateQuadWithParticle(a, c)
    };
    a.updateQuadWithParticle = function (a, c) {
        var d = null,
            f = this._node;
        f._batchNode ? (d = f._batchNode.textureAtlas.quads[f.atlasIndex + a.atlasIndex], f._batchNode.textureAtlas.dirty = !0) : d = this._quads[f._particleIdx];
        var g, h, m;
        f._opacityModifyRGB ? (f = 0 | a.color.r * a.color.a / 255, g = 0 | a.color.g * a.color.a / 255, h = 0 | a.color.b * a.color.a / 255) : (f = 0 | a.color.r, g = 0 | a.color.g, h = 0 | a.color.b);
        m = 0 | a.color.a;
        var n = d.bl.colors,
            p = d.br.colors,
            u = d.tl.colors,
            v = d.tr.colors;
        n.r = p.r = u.r = v.r = f;
        n.g = p.g = u.g = v.g = g;
        n.b = p.b = u.b = v.b = h;
        n.a = p.a = u.a = v.a = m;
        f = a.size / 2;
        a.rotation ? (g = -f, h = -f, m = c.x, n = c.y, u = -cc.degreesToRadians(a.rotation), p = Math.cos(u), u = Math.sin(u), d.bl.vertices.x = g * p - h * u + m, d.bl.vertices.y = g * u + h * p + n, d.br.vertices.x = f * p - h * u + m, d.br.vertices.y = f * u + h * p + n, d.tl.vertices.x = g * p - f * u + m, d.tl.vertices.y = g * u + f * p + n, d.tr.vertices.x = f * p - f * u + m, d.tr.vertices.y = f * u + f * p + n) : (d.bl.vertices.x = c.x - f, d.bl.vertices.y = c.y - f, d.br.vertices.x = c.x + f, d.br.vertices.y = c.y -
            f, d.tl.vertices.x = c.x - f, d.tl.vertices.y = c.y + f, d.tr.vertices.x = c.x + f, d.tr.vertices.y = c.y + f)
    };
    a.rendering = function (a) {
        var c = this._node;
        if (c._texture) {
            a = a || cc._renderContext;
            this._matrix || (this._matrix = new cc.math.Matrix4, this._matrix.identity());
            var d = this._worldTransform;
            this._matrix.mat[0] = d.a;
            this._matrix.mat[4] = d.c;
            this._matrix.mat[12] = d.tx;
            this._matrix.mat[1] = d.b;
            this._matrix.mat[5] = d.d;
            this._matrix.mat[13] = d.ty;
            this._shaderProgram.use();
            this._shaderProgram._setUniformForMVPMatrixWithMat4(this._matrix);
            cc.glBindTexture2D(c._texture);
            cc.glBlendFuncForParticle(c._blendFunc.src, c._blendFunc.dst);
            a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
            a.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR);
            a.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
            a.bindBuffer(a.ARRAY_BUFFER, this._buffersVBO[0]);
            a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 3, a.FLOAT, !1, 24, 0);
            a.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR, 4, a.UNSIGNED_BYTE, !0, 24, 12);
            a.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, a.FLOAT, !1,
                24, 16);
            a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this._buffersVBO[1]);
            a.drawElements(a.TRIANGLES, 6 * c._particleIdx, a.UNSIGNED_SHORT, 0)
        }
    };
    a.initTexCoordsWithRect = function (a) {
        var c = this._node,
            d = c.texture,
            f = cc.contentScaleFactor(),
            g = cc.rect(a.x * f, a.y * f, a.width * f, a.height * f),
            f = a.width,
            h = a.height;
        d && (f = d.pixelsWidth, h = d.pixelsHeight);
        cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL ? (d = (2 * g.x + 1) / (2 * f), a = (2 * g.y + 1) / (2 * h), f = d + (2 * g.width - 2) / (2 * f), g = a + (2 * g.height - 2) / (2 * h)) : (d = g.x / f, a = g.y / h, f = d + g.width / f, g = a + g.height / h);
        h = g;
        g = a;
        a = h;
        var m = 0,
            n = 0;
        c._batchNode ? (h = c._batchNode.textureAtlas.quads, m = c.atlasIndex, n = c.atlasIndex + c._totalParticles) : (h = this._quads, m = 0, n = c._totalParticles);
        for (c = m; c < n; c++) h[c] || (h[c] = cc.V3F_C4B_T2F_QuadZero()), m = h[c], m.bl.texCoords.u = d, m.bl.texCoords.v = a, m.br.texCoords.u = f, m.br.texCoords.v = a, m.tl.texCoords.u = d, m.tl.texCoords.v = g, m.tr.texCoords.u = f, m.tr.texCoords.v = g
    };
    a.setTotalParticles = function (a) {
        var c = this._node;
        if (a > c._allocatedParticles) {
            var d = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;
            this._indices =
                new Uint16Array(6 * a);
            var f = new ArrayBuffer(a * d),
                g = c._particles;
            g.length = 0;
            for (var h = this._quads, m = h.length = 0; m < a; m++) g[m] = new cc.Particle, h[m] = new cc.V3F_C4B_T2F_Quad(null, null, null, null, f, m * d);
            c._allocatedParticles = a;
            c._totalParticles = a;
            if (c._batchNode)
                for (d = 0; d < a; d++) g[d].atlasIndex = d;
            this._quadsArrayBuffer = f;
            this.initIndices(a);
            this._setupVBO();
            c._texture && this.initTexCoordsWithRect(cc.rect(0, 0, c._texture.width, c._texture.height))
        } else c._totalParticles = a;
        c.resetSystem()
    };
    a.addParticle = function () {
        var a =
            this._node;
        return a._particles[a.particleCount]
    };
    a._setupVBO = function () {
        var a = cc._renderContext;
        this._buffersVBO[0] = a.createBuffer();
        a.bindBuffer(a.ARRAY_BUFFER, this._buffersVBO[0]);
        a.bufferData(a.ARRAY_BUFFER, this._quadsArrayBuffer, a.DYNAMIC_DRAW);
        this._buffersVBO[1] = a.createBuffer();
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this._buffersVBO[1]);
        a.bufferData(a.ELEMENT_ARRAY_BUFFER, this._indices, a.STATIC_DRAW)
    };
    a._allocMemory = function () {
        var a = this._node;
        if (a._batchNode) return cc.log("cc.ParticleSystem._allocMemory(): Memory should not be allocated when not using batchNode"),
            !1;
        var c = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
            a = a._totalParticles,
            d = this._quads;
        d.length = 0;
        this._indices = new Uint16Array(6 * a);
        for (var f = new ArrayBuffer(c * a), g = 0; g < a; g++) d[g] = new cc.V3F_C4B_T2F_Quad(null, null, null, null, f, g * c);
        if (!d || !this._indices) return cc.log("cocos2d: Particle system: not enough memory"), !1;
        this._quadsArrayBuffer = f;
        return !0
    };
    a.postStep = function () {
        var a = cc._renderContext;
        a.bindBuffer(a.ARRAY_BUFFER, this._buffersVBO[0]);
        a.bufferSubData(a.ARRAY_BUFFER, 0, this._quadsArrayBuffer)
    };
    a._setBlendAdditive =
        function () {
            var a = this._node._blendFunc;
            this._texture && !this._texture.hasPremultipliedAlpha() ? (a.src = cc.SRC_ALPHA, a.dst = cc.ONE_MINUS_SRC_ALPHA) : (a.src = cc.BLEND_SRC, a.dst = cc.BLEND_DST)
        };
    a._initWithTotalParticles = function (a) {
        if (!this._allocMemory()) return !1;
        this.initIndices(a);
        this._setupVBO();
        this._shaderProgram = cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURECOLOR)
    };
    a._updateDeltaColor = function (a, c) {
        a.color.r += a.deltaColor.r * c;
        a.color.g += a.deltaColor.g * c;
        a.color.b += a.deltaColor.b * c;
        a.color.a +=
            a.deltaColor.a * c;
        a.isChangeColor = !0
    }
})();
cc.ParticleFire = cc.ParticleSystem.extend({
    ctor: function () {
        cc.ParticleSystem.prototype.ctor.call(this, cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 300 : 150)
    },
    initWithTotalParticles: function (a) {
        return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a) ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY), this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY), this.setGravity(cc.p(0, 0)), this.setRadialAccel(0), this.setRadialAccelVar(0), this.setSpeed(60), this.setSpeedVar(20), this.setAngle(90), this.setAngleVar(10),
            a = cc.director.getWinSize(), this.setPosition(a.width / 2, 60), this.setPosVar(cc.p(40, 20)), this.setLife(3), this.setLifeVar(0.25), this.setStartSize(54), this.setStartSizeVar(10), this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE), this.setEmissionRate(this.getTotalParticles() / this.getLife()), this.setStartColor(cc.color(194, 64, 31, 255)), this.setStartColorVar(cc.color(0, 0, 0, 0)), this.setEndColor(cc.color(0, 0, 0, 255)), this.setEndColorVar(cc.color(0, 0, 0, 0)), this.setBlendAdditive(!0), !0) : !1
    }
});
cc.ParticleFire.create = function () {
    return new cc.ParticleFire
};
cc.ParticleFireworks = cc.ParticleSystem.extend({
    ctor: function () {
        cc.ParticleSystem.prototype.ctor.call(this, cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 1500 : 150)
    },
    initWithTotalParticles: function (a) {
        return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a) ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY), this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY), this.setGravity(cc.p(0, -90)), this.setRadialAccel(0), this.setRadialAccelVar(0), this.setSpeed(180), this.setSpeedVar(50), a = cc.director.getWinSize(),
            this.setPosition(a.width / 2, a.height / 2), this.setAngle(90), this.setAngleVar(20), this.setLife(3.5), this.setLifeVar(1), this.setEmissionRate(this.getTotalParticles() / this.getLife()), this.setStartColor(cc.color(128, 128, 128, 255)), this.setStartColorVar(cc.color(128, 128, 128, 255)), this.setEndColor(cc.color(26, 26, 26, 51)), this.setEndColorVar(cc.color(26, 26, 26, 51)), this.setStartSize(8), this.setStartSizeVar(2), this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE), this.setBlendAdditive(!1), !0) : !1
    }
});
cc.ParticleFireworks.create = function () {
    return new cc.ParticleFireworks
};
cc.ParticleSun = cc.ParticleSystem.extend({
    ctor: function () {
        cc.ParticleSystem.prototype.ctor.call(this, cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 350 : 150)
    },
    initWithTotalParticles: function (a) {
        return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a) ? (this.setBlendAdditive(!0), this.setDuration(cc.ParticleSystem.DURATION_INFINITY), this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY), this.setGravity(cc.p(0, 0)), this.setRadialAccel(0), this.setRadialAccelVar(0), this.setSpeed(20), this.setSpeedVar(5),
            this.setAngle(90), this.setAngleVar(360), a = cc.director.getWinSize(), this.setPosition(a.width / 2, a.height / 2), this.setPosVar(cc.p(0, 0)), this.setLife(1), this.setLifeVar(0.5), this.setStartSize(30), this.setStartSizeVar(10), this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE), this.setEmissionRate(this.getTotalParticles() / this.getLife()), this.setStartColor(cc.color(194, 64, 31, 255)), this.setStartColorVar(cc.color(0, 0, 0, 0)), this.setEndColor(cc.color(0, 0, 0, 255)), this.setEndColorVar(cc.color(0, 0, 0, 0)),
            !0) : !1
    }
});
cc.ParticleSun.create = function () {
    return new cc.ParticleSun
};
cc.ParticleGalaxy = cc.ParticleSystem.extend({
    ctor: function () {
        cc.ParticleSystem.prototype.ctor.call(this, cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 200 : 100)
    },
    initWithTotalParticles: function (a) {
        return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a) ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY), this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY), this.setGravity(cc.p(0, 0)), this.setSpeed(60), this.setSpeedVar(10), this.setRadialAccel(-80), this.setRadialAccelVar(0), this.setTangentialAccel(80),
            this.setTangentialAccelVar(0), this.setAngle(90), this.setAngleVar(360), a = cc.director.getWinSize(), this.setPosition(a.width / 2, a.height / 2), this.setPosVar(cc.p(0, 0)), this.setLife(4), this.setLifeVar(1), this.setStartSize(37), this.setStartSizeVar(10), this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE), this.setEmissionRate(this.getTotalParticles() / this.getLife()), this.setStartColor(cc.color(31, 64, 194, 255)), this.setStartColorVar(cc.color(0, 0, 0, 0)), this.setEndColor(cc.color(0, 0, 0, 255)), this.setEndColorVar(cc.color(0,
                0, 0, 0)), this.setBlendAdditive(!0), !0) : !1
    }
});
cc.ParticleGalaxy.create = function () {
    return new cc.ParticleGalaxy
};
cc.ParticleFlower = cc.ParticleSystem.extend({
    ctor: function () {
        cc.ParticleSystem.prototype.ctor.call(this, cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 250 : 100)
    },
    initWithTotalParticles: function (a) {
        return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a) ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY), this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY), this.setGravity(cc.p(0, 0)), this.setSpeed(80), this.setSpeedVar(10), this.setRadialAccel(-60), this.setRadialAccelVar(0), this.setTangentialAccel(15),
            this.setTangentialAccelVar(0), this.setAngle(90), this.setAngleVar(360), a = cc.director.getWinSize(), this.setPosition(a.width / 2, a.height / 2), this.setPosVar(cc.p(0, 0)), this.setLife(4), this.setLifeVar(1), this.setStartSize(30), this.setStartSizeVar(10), this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE), this.setEmissionRate(this.getTotalParticles() / this.getLife()), this.setStartColor(cc.color(128, 128, 128, 255)), this.setStartColorVar(cc.color(128, 128, 128, 128)), this.setEndColor(cc.color(0, 0, 0, 255)),
            this.setEndColorVar(cc.color(0, 0, 0, 0)), this.setBlendAdditive(!0), !0) : !1
    }
});
cc.ParticleFlower.create = function () {
    return new cc.ParticleFlower
};
cc.ParticleMeteor = cc.ParticleSystem.extend({
    ctor: function () {
        cc.ParticleSystem.prototype.ctor.call(this, cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 150 : 100)
    },
    initWithTotalParticles: function (a) {
        return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a) ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY), this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY), this.setGravity(cc.p(-200, 200)), this.setSpeed(15), this.setSpeedVar(5), this.setRadialAccel(0), this.setRadialAccelVar(0), this.setTangentialAccel(0),
            this.setTangentialAccelVar(0), this.setAngle(90), this.setAngleVar(360), a = cc.director.getWinSize(), this.setPosition(a.width / 2, a.height / 2), this.setPosVar(cc.p(0, 0)), this.setLife(2), this.setLifeVar(1), this.setStartSize(60), this.setStartSizeVar(10), this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE), this.setEmissionRate(this.getTotalParticles() / this.getLife()), this.setStartColor(cc.color(51, 102, 179)), this.setStartColorVar(cc.color(0, 0, 51, 26)), this.setEndColor(cc.color(0, 0, 0, 255)), this.setEndColorVar(cc.color(0,
                0, 0, 0)), this.setBlendAdditive(!0), !0) : !1
    }
});
cc.ParticleMeteor.create = function () {
    return new cc.ParticleMeteor
};
cc.ParticleSpiral = cc.ParticleSystem.extend({
    ctor: function () {
        cc.ParticleSystem.prototype.ctor.call(this, cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 500 : 100)
    },
    initWithTotalParticles: function (a) {
        return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a) ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY), this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY), this.setGravity(cc.p(0, 0)), this.setSpeed(150), this.setSpeedVar(0), this.setRadialAccel(-380), this.setRadialAccelVar(0), this.setTangentialAccel(45),
            this.setTangentialAccelVar(0), this.setAngle(90), this.setAngleVar(0), a = cc.director.getWinSize(), this.setPosition(a.width / 2, a.height / 2), this.setPosVar(cc.p(0, 0)), this.setLife(12), this.setLifeVar(0), this.setStartSize(20), this.setStartSizeVar(0), this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE), this.setEmissionRate(this.getTotalParticles() / this.getLife()), this.setStartColor(cc.color(128, 128, 128, 255)), this.setStartColorVar(cc.color(128, 128, 128, 0)), this.setEndColor(cc.color(128, 128, 128, 255)),
            this.setEndColorVar(cc.color(128, 128, 128, 0)), this.setBlendAdditive(!1), !0) : !1
    }
});
cc.ParticleSpiral.create = function () {
    return new cc.ParticleSpiral
};
cc.ParticleExplosion = cc.ParticleSystem.extend({
    ctor: function () {
        cc.ParticleSystem.prototype.ctor.call(this, cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 700 : 300)
    },
    initWithTotalParticles: function (a) {
        return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a) ? (this.setDuration(0.1), this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY), this.setGravity(cc.p(0, 0)), this.setSpeed(70), this.setSpeedVar(40), this.setRadialAccel(0), this.setRadialAccelVar(0), this.setTangentialAccel(0), this.setTangentialAccelVar(0),
            this.setAngle(90), this.setAngleVar(360), a = cc.director.getWinSize(), this.setPosition(a.width / 2, a.height / 2), this.setPosVar(cc.p(0, 0)), this.setLife(5), this.setLifeVar(2), this.setStartSize(15), this.setStartSizeVar(10), this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE), this.setEmissionRate(this.getTotalParticles() / this.getDuration()), this.setStartColor(cc.color(179, 26, 51, 255)), this.setStartColorVar(cc.color(128, 128, 128, 0)), this.setEndColor(cc.color(128, 128, 128, 0)), this.setEndColorVar(cc.color(128,
                128, 128, 0)), this.setBlendAdditive(!1), !0) : !1
    }
});
cc.ParticleExplosion.create = function () {
    return new cc.ParticleExplosion
};
cc.ParticleSmoke = cc.ParticleSystem.extend({
    ctor: function () {
        cc.ParticleSystem.prototype.ctor.call(this, cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 200 : 100)
    },
    initWithTotalParticles: function (a) {
        return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a) ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY), this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY), this.setGravity(cc.p(0, 0)), this.setRadialAccel(0), this.setRadialAccelVar(0), this.setSpeed(25), this.setSpeedVar(10), this.setAngle(90),
            this.setAngleVar(5), a = cc.director.getWinSize(), this.setPosition(a.width / 2, 0), this.setPosVar(cc.p(20, 0)), this.setLife(4), this.setLifeVar(1), this.setStartSize(60), this.setStartSizeVar(10), this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE), this.setEmissionRate(this.getTotalParticles() / this.getLife()), this.setStartColor(cc.color(204, 204, 204, 255)), this.setStartColorVar(cc.color(5, 5, 5, 0)), this.setEndColor(cc.color(0, 0, 0, 255)), this.setEndColorVar(cc.color(0, 0, 0, 0)), this.setBlendAdditive(!1),
            !0) : !1
    }
});
cc.ParticleSmoke.create = function () {
    return new cc.ParticleSmoke
};
cc.ParticleSnow = cc.ParticleSystem.extend({
    ctor: function () {
        cc.ParticleSystem.prototype.ctor.call(this, cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 700 : 250)
    },
    initWithTotalParticles: function (a) {
        return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a) ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY), this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY), this.setGravity(cc.p(0, -1)), this.setSpeed(5), this.setSpeedVar(1), this.setRadialAccel(0), this.setRadialAccelVar(1), this.setTangentialAccel(0),
            this.setTangentialAccelVar(1), a = cc.director.getWinSize(), this.setPosition(a.width / 2, a.height + 10), this.setPosVar(cc.p(a.width / 2, 0)), this.setAngle(-90), this.setAngleVar(5), this.setLife(45), this.setLifeVar(15), this.setStartSize(10), this.setStartSizeVar(5), this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE), this.setEmissionRate(10), this.setStartColor(cc.color(255, 255, 255, 255)), this.setStartColorVar(cc.color(0, 0, 0, 0)), this.setEndColor(cc.color(255, 255, 255, 0)), this.setEndColorVar(cc.color(0,
                0, 0, 0)), this.setBlendAdditive(!1), !0) : !1
    }
});
cc.ParticleSnow.create = function () {
    return new cc.ParticleSnow
};
cc.ParticleRain = cc.ParticleSystem.extend({
    ctor: function () {
        cc.ParticleSystem.prototype.ctor.call(this, cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 1E3 : 300)
    },
    initWithTotalParticles: function (a) {
        return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a) ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY), this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY), this.setGravity(cc.p(10, -10)), this.setRadialAccel(0), this.setRadialAccelVar(1), this.setTangentialAccel(0), this.setTangentialAccelVar(1),
            this.setSpeed(130), this.setSpeedVar(30), this.setAngle(-90), this.setAngleVar(5), a = cc.director.getWinSize(), this.setPosition(a.width / 2, a.height), this.setPosVar(cc.p(a.width / 2, 0)), this.setLife(4.5), this.setLifeVar(0), this.setStartSize(4), this.setStartSizeVar(2), this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE), this.setEmissionRate(20), this.setStartColor(cc.color(179, 204, 255, 255)), this.setStartColorVar(cc.color(0, 0, 0, 0)), this.setEndColor(cc.color(179, 204, 255, 128)), this.setEndColorVar(cc.color(0,
                0, 0, 0)), this.setBlendAdditive(!1), !0) : !1
    }
});
cc.ParticleRain.create = function () {
    return new cc.ParticleRain
};
cc.PARTICLE_DEFAULT_CAPACITY = 500;
cc.ParticleBatchNode = cc.Node.extend({
    textureAtlas: null,
    _blendFunc: null,
    _className: "ParticleBatchNode",
    ctor: function (a, b) {
        cc.Node.prototype.ctor.call(this);
        this._blendFunc = {
            src: cc.BLEND_SRC,
            dst: cc.BLEND_DST
        };
        cc.isString(a) ? this.init(a, b) : a instanceof cc.Texture2D && this.initWithTexture(a, b)
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new cc.ParticleBatchNode.CanvasRenderCmd(this) : new cc.ParticleBatchNode.WebGLRenderCmd(this)
    },
    initWithTexture: function (a, b) {
        this.textureAtlas =
            new cc.TextureAtlas;
        this.textureAtlas.initWithTexture(a, b);
        this._children.length = 0;
        this._renderCmd._initWithTexture();
        return !0
    },
    initWithFile: function (a, b) {
        var c = cc.textureCache.addImage(a);
        return this.initWithTexture(c, b)
    },
    init: function (a, b) {
        var c = cc.textureCache.addImage(a);
        return this.initWithTexture(c, b)
    },
    visit: function (a) {
        var b = this._renderCmd;
        a = a ? a._renderCmd : null;
        this._visible ? (b.visit(a), cc.renderer.pushRenderCommand(b), b._dirtyFlag = 0) : b._propagateFlagsDown(a)
    },
    addChild: function (a, b, c) {
        if (!a) throw Error("cc.ParticleBatchNode.addChild() : child should be non-null");
        if (!(a instanceof cc.ParticleSystem)) throw Error("cc.ParticleBatchNode.addChild() : only supports cc.ParticleSystem as children");
        b = null == b ? a.zIndex : b;
        c = null == c ? a.tag : c;
        if (a.getTexture() !== this.textureAtlas.texture) throw Error("cc.ParticleSystem.addChild() : the child is not using the same texture id");
        var d = a.getBlendFunc();
        if (0 === this._children.length) this.setBlendFunc(d);
        else if (d.src !== this._blendFunc.src || d.dst !== this._blendFunc.dst) {
            cc.log("cc.ParticleSystem.addChild() : Can't add a ParticleSystem that uses a different blending function");
            return
        }
        b = this._addChildHelper(a, b, c);
        c = 0;
        0 !== b ? (b = this._children[b - 1], c = b.getAtlasIndex() + b.getTotalParticles()) : c = 0;
        this.insertChild(a, c);
        a.setBatchNode(this)
    },
    insertChild: function (a, b) {
        var c = a.getTotalParticles(),
            d = this.textureAtlas,
            f = d.totalQuads;
        a.setAtlasIndex(b);
        f + c > d.getCapacity() && (this._increaseAtlasCapacityTo(f + c), d.fillWithEmptyQuadsFromIndex(d.getCapacity() - c, c));
        a.getAtlasIndex() + c !== f && d.moveQuadsFromIndex(b, b + c);
        d.increaseTotalQuadsWith(c);
        this._updateAllAtlasIndexes()
    },
    removeChild: function (a,
        b) {
        if (null != a) {
            if (!(a instanceof cc.ParticleSystem)) throw Error("cc.ParticleBatchNode.removeChild(): only supports cc.ParticleSystem as children");
            if (-1 === this._children.indexOf(a)) cc.log("cc.ParticleBatchNode.removeChild(): doesn't contain the sprite. Can't remove it");
            else {
                cc.Node.prototype.removeChild.call(this, a, b);
                var c = this.textureAtlas;
                c.removeQuadsAtIndex(a.getAtlasIndex(), a.getTotalParticles());
                c.fillWithEmptyQuadsFromIndex(c.totalQuads, a.getTotalParticles());
                a.setBatchNode(null);
                this._updateAllAtlasIndexes()
            }
        }
    },
    reorderChild: function (a, b) {
        if (!a) throw Error("cc.ParticleBatchNode.reorderChild(): child should be non-null");
        if (!(a instanceof cc.ParticleSystem)) throw Error("cc.ParticleBatchNode.reorderChild(): only supports cc.QuadParticleSystems as children");
        if (-1 === this._children.indexOf(a)) cc.log("cc.ParticleBatchNode.reorderChild(): Child doesn't belong to batch");
        else if (b !== a.zIndex) {
            if (1 < this._children.length) {
                var c = this._getCurrentIndex(a, b);
                if (c.oldIndex !== c.newIndex) {
                    this._children.splice(c.oldIndex,
                        1);
                    this._children.splice(c.newIndex, 0, a);
                    c = a.getAtlasIndex();
                    this._updateAllAtlasIndexes();
                    for (var d = 0, f = this._children, g = 0; g < f.length; g++)
                        if (f[g] === a) {
                            d = a.getAtlasIndex();
                            break
                        } this.textureAtlas.moveQuadsFromIndex(c, a.getTotalParticles(), d);
                    a.updateWithNoTime()
                }
            }
            a._setLocalZOrder(b)
        }
    },
    removeChildAtIndex: function (a, b) {
        this.removeChild(this._children[i], b)
    },
    removeAllChildren: function (a) {
        for (var b = this._children, c = 0; c < b.length; c++) b[c].setBatchNode(null);
        cc.Node.prototype.removeAllChildren.call(this,
            a);
        this.textureAtlas.removeAllQuads()
    },
    disableParticle: function (a) {
        a = this.textureAtlas.quads[a];
        a.br.vertices.x = a.br.vertices.y = a.tr.vertices.x = a.tr.vertices.y = a.tl.vertices.x = a.tl.vertices.y = a.bl.vertices.x = a.bl.vertices.y = 0;
        this.textureAtlas._setDirty(!0)
    },
    getTexture: function () {
        return this.textureAtlas.texture
    },
    setTexture: function (a) {
        this.textureAtlas.texture = a;
        var b = this._blendFunc;
        a && (!a.hasPremultipliedAlpha() && b.src === cc.BLEND_SRC && b.dst === cc.BLEND_DST) && (b.src = cc.SRC_ALPHA, b.dst = cc.ONE_MINUS_SRC_ALPHA)
    },
    setBlendFunc: function (a, b) {
        void 0 === b ? (this._blendFunc.src = a.src, this._blendFunc.dst = a.dst) : (this._blendFunc.src = a, this._blendFunc.src = b)
    },
    getBlendFunc: function () {
        return new cc.BlendFunc(this._blendFunc.src, this._blendFunc.dst)
    },
    _updateAllAtlasIndexes: function () {
        for (var a = 0, b = this._children, c = 0; c < b.length; c++) {
            var d = b[c];
            d.setAtlasIndex(a);
            a += d.getTotalParticles()
        }
    },
    _increaseAtlasCapacityTo: function (a) {
        cc.log("cocos2d: cc.ParticleBatchNode: resizing TextureAtlas capacity from [" + this.textureAtlas.getCapacity() +
            "] to [" + a + "].");
        this.textureAtlas.resizeCapacity(a) || cc.log("cc.ParticleBatchNode._increaseAtlasCapacityTo() : WARNING: Not enough memory to resize the atlas")
    },
    _searchNewPositionInChildrenForZ: function (a) {
        for (var b = this._children, c = b.length, d = 0; d < c; d++)
            if (b[d].zIndex > a) return d;
        return c
    },
    _getCurrentIndex: function (a, b) {
        for (var c = !1, d = !1, f = 0, g = 0, h = 0, m = this._children, n = m.length, p = 0; p < n; p++) {
            var u = m[p];
            if (u.zIndex > b && !d && (f = p, d = !0, c && d)) break;
            if (a === u && (g = p, c = !0, d || (h = -1), c && d)) break
        }
        d || (f = n);
        return {
            newIndex: f +
                h,
            oldIndex: g
        }
    },
    _addChildHelper: function (a, b, c) {
        if (!a) throw Error("cc.ParticleBatchNode._addChildHelper(): child should be non-null");
        if (a.parent) return cc.log("cc.ParticleBatchNode._addChildHelper(): child already added. It can't be added again"), null;
        this._children || (this._children = []);
        var d = this._searchNewPositionInChildrenForZ(b);
        this._children.splice(d, 0, a);
        a.tag = c;
        a._setLocalZOrder(b);
        a.parent = this;
        this._running && (a._performRecursive(cc.Node._stateCallbackType.onEnter), a._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish));
        return d
    },
    _updateBlendFunc: function () {
        this.textureAtlas.texture.hasPremultipliedAlpha() || (this._blendFunc.src = cc.SRC_ALPHA, this._blendFunc.dst = cc.ONE_MINUS_SRC_ALPHA)
    },
    getTextureAtlas: function () {
        return this.textureAtlas
    },
    setTextureAtlas: function (a) {
        this.textureAtlas = a
    }
});
_p = cc.ParticleBatchNode.prototype;
cc.defineGetterSetter(_p, "texture", _p.getTexture, _p.setTexture);
cc.ParticleBatchNode.create = function (a, b) {
    return new cc.ParticleBatchNode(a, b)
};
(function () {
    cc.ParticleBatchNode.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !1
    };
    var a = cc.ParticleBatchNode.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    a.constructor = cc.ParticleBatchNode.CanvasRenderCmd;
    a._initWithTexture = function () {}
})();
(function () {
    cc.ParticleBatchNode.WebGLRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !0;
        this._matrix = new cc.math.Matrix4;
        this._matrix.identity()
    };
    var a = cc.ParticleBatchNode.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
    a.constructor = cc.ParticleBatchNode.WebGLRenderCmd;
    a.rendering = function (a) {
        a = this._node;
        if (0 !== a.textureAtlas.totalQuads) {
            var c = this._worldTransform;
            this._matrix.mat[0] = c.a;
            this._matrix.mat[4] = c.c;
            this._matrix.mat[12] = c.tx;
            this._matrix.mat[1] = c.b;
            this._matrix.mat[5] =
                c.d;
            this._matrix.mat[13] = c.ty;
            this._shaderProgram.use();
            this._shaderProgram._setUniformForMVPMatrixWithMat4(this._matrix);
            cc.glBlendFuncForParticle(a._blendFunc.src, a._blendFunc.dst);
            a.textureAtlas.drawQuads()
        }
    };
    a._initWithTexture = function () {
        this._shaderProgram = cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURECOLOR)
    }
})();
cc.IMEKeyboardNotificationInfo = function (a, b, c) {
    this.begin = a || cc.rect(0, 0, 0, 0);
    this.end = b || cc.rect(0, 0, 0, 0);
    this.duration = c || 0
};
cc.IMEDelegate = cc.Class.extend({
    ctor: function () {
        cc.imeDispatcher.addDelegate(this)
    },
    removeDelegate: function () {
        cc.imeDispatcher.removeDelegate(this)
    },
    attachWithIME: function () {
        return cc.imeDispatcher.attachDelegateWithIME(this)
    },
    detachWithIME: function () {
        return cc.imeDispatcher.detachDelegateWithIME(this)
    },
    canAttachWithIME: function () {
        return !1
    },
    didAttachWithIME: function () {},
    canDetachWithIME: function () {
        return !1
    },
    didDetachWithIME: function () {},
    insertText: function (a, b) {},
    deleteBackward: function () {},
    getContentText: function () {
        return ""
    },
    keyboardWillShow: function (a) {},
    keyboardDidShow: function (a) {},
    keyboardWillHide: function (a) {},
    keyboardDidHide: function (a) {}
});
cc.IMEDispatcher = cc.Class.extend({
    _domInputControl: null,
    impl: null,
    _currentInputString: "",
    _lastClickPosition: null,
    ctor: function () {
        this.impl = new cc.IMEDispatcher.Impl;
        this._lastClickPosition = cc.p(0, 0)
    },
    init: function () {
        if (!cc.sys.isMobile) {
            this._domInputControl = cc.$("#imeDispatcherInput");
            this._domInputControl || (this._domInputControl = cc.$new("input"), this._domInputControl.setAttribute("type", "text"), this._domInputControl.setAttribute("id", "imeDispatcherInput"), this._domInputControl.resize(0, 0), this._domInputControl.translates(0,
                0), this._domInputControl.style.opacity = "0", this._domInputControl.style.fontSize = "1px", this._domInputControl.setAttribute("tabindex", 2), this._domInputControl.style.position = "absolute", this._domInputControl.style.top = 0, this._domInputControl.style.left = 0, document.body.appendChild(this._domInputControl));
            var a = this;
            this._domInputControl.addEventListener("input", function () {
                a._processDomInputString(a._domInputControl.value)
            }, !1);
            this._domInputControl.addEventListener("keydown", function (b) {
                b.keyCode === cc.KEY.tab ?
                    (b.stopPropagation(), b.preventDefault()) : b.keyCode === cc.KEY.enter && (a.dispatchInsertText("\n", 1), b.stopPropagation(), b.preventDefault())
            }, !1);
            /msie/i.test(navigator.userAgent) && this._domInputControl.addEventListener("keyup", function (b) {
                b.keyCode === cc.KEY.backspace && a._processDomInputString(a._domInputControl.value)
            }, !1);
            window.addEventListener("mousedown", function (b) {
                var c = b.pageY || 0;
                a._lastClickPosition.x = b.pageX || 0;
                a._lastClickPosition.y = c
            }, !1)
        }
    },
    _processDomInputString: function (a) {
        var b, c;
        b = this._currentInputString.length <
            a.length ? this._currentInputString.length : a.length;
        for (c = 0; c < b && a[c] === this._currentInputString[c]; c++);
        var d = this._currentInputString.length - c,
            f = a.length - c;
        for (b = 0; b < d; b++) this.dispatchDeleteBackward();
        for (b = 0; b < f; b++) this.dispatchInsertText(a[c + b], 1);
        this._currentInputString = a
    },
    dispatchInsertText: function (a, b) {
        this.impl && a && !(0 >= b) && this.impl._delegateWithIme && this.impl._delegateWithIme.insertText(a, b)
    },
    dispatchDeleteBackward: function () {
        this.impl && this.impl._delegateWithIme && this.impl._delegateWithIme.deleteBackward()
    },
    getContentText: function () {
        if (this.impl && this.impl._delegateWithIme) {
            var a = this.impl._delegateWithIme.getContentText();
            return a ? a : ""
        }
        return ""
    },
    dispatchKeyboardWillShow: function (a) {
        if (this.impl)
            for (var b = 0; b < this.impl._delegateList.length; b++) {
                var c = this.impl._delegateList[b];
                c && c.keyboardWillShow(a)
            }
    },
    dispatchKeyboardDidShow: function (a) {
        if (this.impl)
            for (var b = 0; b < this.impl._delegateList.length; b++) {
                var c = this.impl._delegateList[b];
                c && c.keyboardDidShow(a)
            }
    },
    dispatchKeyboardWillHide: function (a) {
        if (this.impl)
            for (var b =
                    0; b < this.impl._delegateList.length; b++) {
                var c = this.impl._delegateList[b];
                c && c.keyboardWillHide(a)
            }
    },
    dispatchKeyboardDidHide: function (a) {
        if (this.impl)
            for (var b = 0; b < this.impl._delegateList.length; b++) {
                var c = this.impl._delegateList[b];
                c && c.keyboardDidHide(a)
            }
    },
    addDelegate: function (a) {
        a && this.impl && (-1 < this.impl._delegateList.indexOf(a) || this.impl._delegateList.splice(0, 0, a))
    },
    attachDelegateWithIME: function (a) {
        if (!this.impl || !a || -1 === this.impl._delegateList.indexOf(a)) return !1;
        if (this.impl._delegateWithIme) {
            if (!this.impl._delegateWithIme.canDetachWithIME() ||
                !a.canAttachWithIME()) return !1;
            var b = this.impl._delegateWithIme;
            this.impl._delegateWithIme = null;
            b.didDetachWithIME();
            this._focusDomInput(a);
            return !0
        }
        if (!a.canAttachWithIME()) return !1;
        this._focusDomInput(a);
        return !0
    },
    _focusDomInput: function (a) {
        if (cc.sys.isMobile) {
            this.impl._delegateWithIme = a;
            a.didAttachWithIME();
            this._currentInputString = a.string || "";
            a = a.getTipMessage ? a.getTipMessage() : "please enter your word:";
            var b = window.Window;
            a = b && b.prototype.prompt && b.prototype.prompt != prompt ? b.prototype.prompt.call(window,
                a, this._currentInputString) : prompt(a, this._currentInputString);
            null != a && this._processDomInputString(a);
            this.dispatchInsertText("\n", 1)
        } else this.impl._delegateWithIme = a, this._currentInputString = a.string || "", a.didAttachWithIME(), this._domInputControl.focus(), this._domInputControl.value = this._currentInputString, this._domInputControlTranslate()
    },
    _domInputControlTranslate: function () {
        /msie/i.test(navigator.userAgent) ? (this._domInputControl.style.left = this._lastClickPosition.x + "px", this._domInputControl.style.top =
            this._lastClickPosition.y + "px") : this._domInputControl.translates(this._lastClickPosition.x, this._lastClickPosition.y)
    },
    detachDelegateWithIME: function (a) {
        if (!this.impl || !a || this.impl._delegateWithIme !== a || !a.canDetachWithIME()) return !1;
        this.impl._delegateWithIme = null;
        a.didDetachWithIME();
        cc._canvas.focus();
        return !0
    },
    removeDelegate: function (a) {
        this.impl && a && -1 !== this.impl._delegateList.indexOf(a) && (this.impl._delegateWithIme && a === this.impl._delegateWithIme && (this.impl._delegateWithIme = null), cc.arrayRemoveObject(this.impl._delegateList,
            a))
    },
    processKeycode: function (a) {
        32 > a ? a === cc.KEY.backspace ? this.dispatchDeleteBackward() : a === cc.KEY.enter && this.dispatchInsertText("\n", 1) : 255 > a && this.dispatchInsertText(String.fromCharCode(a), 1)
    }
});
cc.IMEDispatcher.Impl = cc.Class.extend({
    _delegateWithIme: null,
    _delegateList: null,
    ctor: function () {
        this._delegateList = []
    },
    findDelegate: function (a) {
        for (var b = 0; b < this._delegateList.length; b++)
            if (this._delegateList[b] === a) return b;
        return null
    }
});
cc.imeDispatcher = new cc.IMEDispatcher;
document.body ? cc.imeDispatcher.init() : window.addEventListener("load", function () {
    cc.imeDispatcher.init()
}, !1);
cc.TextFieldDelegate = cc.Class.extend({
    onTextFieldAttachWithIME: function (a) {
        return !1
    },
    onTextFieldDetachWithIME: function (a) {
        return !1
    },
    onTextFieldInsertText: function (a, b, c) {
        return !1
    },
    onTextFieldDeleteBackward: function (a, b, c) {
        return !1
    },
    onDraw: function (a) {
        return !1
    }
});
cc.TextFieldTTF = cc.LabelTTF.extend({
    delegate: null,
    colorSpaceHolder: null,
    _colorText: null,
    _lens: null,
    _inputText: "",
    _placeHolder: "",
    _charCount: 0,
    _className: "TextFieldTTF",
    ctor: function (a, b, c, d, f) {
        this.colorSpaceHolder = cc.color(127, 127, 127);
        this._colorText = cc.color(255, 255, 255, 255);
        cc.LabelTTF.prototype.ctor.call(this);
        void 0 !== f ? (this.initWithPlaceHolder("", b, c, d, f), a && this.setPlaceHolder(a)) : void 0 === d && void 0 !== c && (this.initWithString("", b, c), a && this.setPlaceHolder(a))
    },
    onEnter: function () {
        cc.LabelTTF.prototype.onEnter.call(this);
        cc.imeDispatcher.addDelegate(this)
    },
    onExit: function () {
        cc.LabelTTF.prototype.onExit.call(this);
        cc.imeDispatcher.removeDelegate(this)
    },
    getDelegate: function () {
        return this.delegate
    },
    setDelegate: function (a) {
        this.delegate = a
    },
    getCharCount: function () {
        return this._charCount
    },
    getColorSpaceHolder: function () {
        return cc.color(this.colorSpaceHolder)
    },
    setColorSpaceHolder: function (a) {
        this.colorSpaceHolder.r = a.r;
        this.colorSpaceHolder.g = a.g;
        this.colorSpaceHolder.b = a.b;
        this.colorSpaceHolder.a = cc.isUndefined(a.a) ? 255 :
            a.a;
        this._inputText.length || this.setColor(this.colorSpaceHolder)
    },
    setTextColor: function (a) {
        this._colorText.r = a.r;
        this._colorText.g = a.g;
        this._colorText.b = a.b;
        this._colorText.a = cc.isUndefined(a.a) ? 255 : a.a;
        this._inputText.length && this.setColor(this._colorText)
    },
    initWithPlaceHolder: function (a, b, c, d, f) {
        switch (arguments.length) {
        case 5:
            return a && this.setPlaceHolder(a), this.initWithString(this._placeHolder, d, f, b, c);
        case 3:
            return a && this.setPlaceHolder(a), this.initWithString(this._placeHolder, arguments[1],
                arguments[2]);
        default:
            throw Error("Argument must be non-nil ");
        }
    },
    setString: function (a) {
        this._inputText = (a = String(a)) || "";
        this._inputText.length ? (cc.LabelTTF.prototype.setString.call(this, this._inputText), this.setColor(this._colorText)) : (cc.LabelTTF.prototype.setString.call(this, this._placeHolder), this.setColor(this.colorSpaceHolder));
        cc._renderType === cc.game.RENDER_TYPE_CANVAS && this._renderCmd._updateTexture();
        this._charCount = this._inputText.length
    },
    getString: function () {
        return this._inputText
    },
    setPlaceHolder: function (a) {
        this._placeHolder =
            a || "";
        this._inputText.length || (cc.LabelTTF.prototype.setString.call(this, this._placeHolder), this.setColor(this.colorSpaceHolder))
    },
    getPlaceHolder: function () {
        return this._placeHolder
    },
    draw: function (a) {
        a = a || cc._renderContext;
        (!this.delegate || !this.delegate.onDraw(this)) && cc.LabelTTF.prototype.draw.call(this, a)
    },
    attachWithIME: function () {
        return cc.imeDispatcher.attachDelegateWithIME(this)
    },
    detachWithIME: function () {
        return cc.imeDispatcher.detachDelegateWithIME(this)
    },
    canAttachWithIME: function () {
        return this.delegate ?
            !this.delegate.onTextFieldAttachWithIME(this) : !0
    },
    didAttachWithIME: function () {},
    canDetachWithIME: function () {
        return this.delegate ? !this.delegate.onTextFieldDetachWithIME(this) : !0
    },
    didDetachWithIME: function () {},
    deleteBackward: function () {
        var a = this._inputText.length;
        if (0 !== a && (!this.delegate || !this.delegate.onTextFieldDeleteBackward(this, this._inputText[a - 1], 1))) 1 >= a ? (this._inputText = "", this._charCount = 0, cc.LabelTTF.prototype.setString.call(this, this._placeHolder), this.setColor(this.colorSpaceHolder)) :
            this.string = this._inputText.substring(0, a - 1)
    },
    removeDelegate: function () {
        cc.imeDispatcher.removeDelegate(this)
    },
    _tipMessage: "please enter your word:",
    setTipMessage: function (a) {
        null != a && (this._tipMessage = a)
    },
    getTipMessage: function () {
        return this._tipMessage
    },
    insertText: function (a, b) {
        var c = a,
            d = c.indexOf("\n"); - 1 < d && (c = c.substring(0, d));
        if (0 < c.length) {
            if (this.delegate && this.delegate.onTextFieldInsertText(this, c, c.length)) return;
            c = this._inputText + c;
            this._charCount = c.length;
            this.string = c
        } - 1 !== d && (!this.delegate ||
            !this.delegate.onTextFieldInsertText(this, "\n", 1)) && this.detachWithIME()
    },
    getContentText: function () {
        return this._inputText
    },
    keyboardWillShow: function (a) {},
    keyboardDidShow: function (a) {},
    keyboardWillHide: function (a) {},
    keyboardDidHide: function (a) {}
});
_p = cc.TextFieldTTF.prototype;
cc.defineGetterSetter(_p, "charCount", _p.getCharCount);
cc.defineGetterSetter(_p, "placeHolder", _p.getPlaceHolder, _p.setPlaceHolder);
cc.TextFieldTTF.create = function (a, b, c, d, f) {
    return new cc.TextFieldTTF(a, b, c, d, f)
};
cc._globalFontSize = cc.ITEM_SIZE;
cc._globalFontName = "Arial";
cc._globalFontNameRelease = !1;
cc.MenuItem = cc.Node.extend({
    _enabled: !1,
    _target: null,
    _callback: null,
    _isSelected: !1,
    _className: "MenuItem",
    ctor: function (a, b) {
        var c = cc.Node.prototype;
        c.ctor.call(this);
        this._callback = this._target = null;
        this._enabled = this._isSelected = !1;
        c.setAnchorPoint.call(this, 0.5, 0.5);
        this._target = b || null;
        if (this._callback = a || null) this._enabled = !0
    },
    isSelected: function () {
        return this._isSelected
    },
    setOpacityModifyRGB: function (a) {},
    isOpacityModifyRGB: function () {
        return !1
    },
    setTarget: function (a, b) {
        this._target = b;
        this._callback =
            a
    },
    isEnabled: function () {
        return this._enabled
    },
    setEnabled: function (a) {
        this._enabled = a
    },
    initWithCallback: function (a, b) {
        this.anchorY = this.anchorX = 0.5;
        this._target = b;
        this._callback = a;
        this._enabled = !0;
        this._isSelected = !1;
        return !0
    },
    rect: function () {
        var a = this._position,
            b = this._contentSize,
            c = this._anchorPoint;
        return cc.rect(a.x - b.width * c.x, a.y - b.height * c.y, b.width, b.height)
    },
    selected: function () {
        this._isSelected = !0
    },
    unselected: function () {
        this._isSelected = !1
    },
    setCallback: function (a, b) {
        this._target = b;
        this._callback =
            a
    },
    activate: function () {
        if (this._enabled) {
            var a = this._target,
                b = this._callback;
            if (b)
                if (a && cc.isString(b)) a[b](this);
                else a && cc.isFunction(b) ? b.call(a, this) : b(this)
        }
    }
});
_p = cc.MenuItem.prototype;
cc.defineGetterSetter(_p, "enabled", _p.isEnabled, _p.setEnabled);
cc.MenuItem.create = function (a, b) {
    return new cc.MenuItem(a, b)
};
cc.MenuItemLabel = cc.MenuItem.extend({
    _disabledColor: null,
    _label: null,
    _originalScale: 0,
    _colorBackup: null,
    ctor: function (a, b, c) {
        cc.MenuItem.prototype.ctor.call(this, b, c);
        this._colorBackup = this._label = this._disabledColor = null;
        a && (this._originalScale = 1, this._colorBackup = cc.color.WHITE, this._disabledColor = cc.color(126, 126, 126), this.setLabel(a), a.textureLoaded && !a.textureLoaded() && a.addEventListener("load", function (a) {
                this.width = a.width;
                this.height = a.height;
                this.parent instanceof cc.Menu && this.parent.updateAlign()
            },
            this), this.setCascadeColorEnabled(!0), this.setCascadeOpacityEnabled(!0))
    },
    getDisabledColor: function () {
        return this._disabledColor
    },
    setDisabledColor: function (a) {
        this._disabledColor = a
    },
    getLabel: function () {
        return this._label
    },
    setLabel: function (a) {
        a && (this.addChild(a), a.anchorX = 0, a.anchorY = 0, this.width = a.width, this.height = a.height, a.setCascadeColorEnabled(!0));
        this._label && this.removeChild(this._label, !0);
        this._label = a
    },
    setEnabled: function (a) {
        this._enabled !== a && (a ? this.setColor(this._colorBackup) : (this._colorBackup =
            this.color, this.setColor(this._disabledColor)));
        cc.MenuItem.prototype.setEnabled.call(this, a)
    },
    initWithLabel: function (a, b, c) {
        this.initWithCallback(b, c);
        this._originalScale = 1;
        this._colorBackup = cc.color.WHITE;
        this._disabledColor = cc.color(126, 126, 126);
        this.setLabel(a);
        this.setCascadeColorEnabled(!0);
        this.setCascadeOpacityEnabled(!0);
        return !0
    },
    setString: function (a) {
        this._label.string = a;
        this.width = this._label.width;
        this.height = this._label.height
    },
    getString: function () {
        return this._label.string
    },
    activate: function () {
        this._enabled &&
            (this.stopAllActions(), this.scale = this._originalScale, cc.MenuItem.prototype.activate.call(this))
    },
    selected: function () {
        if (this._enabled) {
            cc.MenuItem.prototype.selected.call(this);
            var a = this.getActionByTag(cc.ZOOM_ACTION_TAG);
            a ? this.stopAction(a) : this._originalScale = this.scale;
            a = cc.scaleTo(0.1, 1.2 * this._originalScale);
            a.setTag(cc.ZOOM_ACTION_TAG);
            this.runAction(a)
        }
    },
    unselected: function () {
        if (this._enabled) {
            cc.MenuItem.prototype.unselected.call(this);
            this.stopActionByTag(cc.ZOOM_ACTION_TAG);
            var a = cc.scaleTo(0.1,
                this._originalScale);
            a.setTag(cc.ZOOM_ACTION_TAG);
            this.runAction(a)
        }
    }
});
_p = cc.MenuItemLabel.prototype;
cc.defineGetterSetter(_p, "string", _p.getString, _p.setString);
cc.defineGetterSetter(_p, "disabledColor", _p.getDisabledColor, _p.setDisabledColor);
cc.defineGetterSetter(_p, "label", _p.getLabel, _p.setLabel);
cc.MenuItemLabel.create = function (a, b, c) {
    return new cc.MenuItemLabel(a, b, c)
};
cc.MenuItemAtlasFont = cc.MenuItemLabel.extend({
    ctor: function (a, b, c, d, f, g, h) {
        var m;
        a && 0 < a.length && (m = new cc.LabelAtlas(a, b, c, d, f));
        cc.MenuItemLabel.prototype.ctor.call(this, m, g, h)
    },
    initWithString: function (a, b, c, d, f, g, h) {
        if (!a || 0 === a.length) throw Error("cc.MenuItemAtlasFont.initWithString(): value should be non-null and its length should be greater than 0");
        var m = new cc.LabelAtlas;
        m.initWithString(a, b, c, d, f);
        this.initWithLabel(m, g, h);
        return !0
    }
});
cc.MenuItemAtlasFont.create = function (a, b, c, d, f, g, h) {
    return new cc.MenuItemAtlasFont(a, b, c, d, f, g, h)
};
cc.MenuItemFont = cc.MenuItemLabel.extend({
    _fontSize: null,
    _fontName: null,
    ctor: function (a, b, c) {
        var d;
        a && 0 < a.length ? (this._fontName = cc._globalFontName, this._fontSize = cc._globalFontSize, d = new cc.LabelTTF(a, this._fontName, this._fontSize)) : (this._fontSize = 0, this._fontName = "");
        cc.MenuItemLabel.prototype.ctor.call(this, d, b, c)
    },
    initWithString: function (a, b, c) {
        if (!a || 0 === a.length) throw Error("Value should be non-null and its length should be greater than 0");
        this._fontName = cc._globalFontName;
        this._fontSize = cc._globalFontSize;
        a = new cc.LabelTTF(a, this._fontName, this._fontSize);
        this.initWithLabel(a, b, c);
        return !0
    },
    setFontSize: function (a) {
        this._fontSize = a;
        this._recreateLabel()
    },
    getFontSize: function () {
        return this._fontSize
    },
    setFontName: function (a) {
        this._fontName = a;
        this._recreateLabel()
    },
    getFontName: function () {
        return this._fontName
    },
    _recreateLabel: function () {
        var a = new cc.LabelTTF(this._label.string, this._fontName, this._fontSize);
        this.setLabel(a)
    }
});
cc.MenuItemFont.setFontSize = function (a) {
    cc._globalFontSize = a
};
cc.MenuItemFont.fontSize = function () {
    return cc._globalFontSize
};
cc.MenuItemFont.setFontName = function (a) {
    cc._globalFontNameRelease && (cc._globalFontName = "");
    cc._globalFontName = a;
    cc._globalFontNameRelease = !0
};
_p = cc.MenuItemFont.prototype;
cc.defineGetterSetter(_p, "fontSize", _p.getFontSize, _p.setFontSize);
cc.defineGetterSetter(_p, "fontName", _p.getFontName, _p.setFontName);
cc.MenuItemFont.fontName = function () {
    return cc._globalFontName
};
cc.MenuItemFont.create = function (a, b, c) {
    return new cc.MenuItemFont(a, b, c)
};
cc.MenuItemSprite = cc.MenuItem.extend({
    _normalImage: null,
    _selectedImage: null,
    _disabledImage: null,
    ctor: function (a, b, c, d, f) {
        cc.MenuItem.prototype.ctor.call(this);
        this._disabledImage = this._selectedImage = this._normalImage = null;
        this._loader = new cc.Sprite.LoadManager;
        if (void 0 !== a) {
            b = b || null;
            var g, h, m;
            void 0 !== f ? (g = c, m = d, h = f) : void 0 !== d && cc.isFunction(d) ? (g = c, m = d) : void 0 !== d && cc.isFunction(c) ? (h = d, m = c, g = null) : void 0 === c && (g = null);
            this._loader.clear();
            if (a.textureLoaded && !a.textureLoaded()) return this._loader.once(a,
                function () {
                    this.initWithNormalSprite(a, b, g, m, h)
                }, this), !1;
            this.initWithNormalSprite(a, b, g, m, h);
            return !0
        }
    },
    getNormalImage: function () {
        return this._normalImage
    },
    setNormalImage: function (a) {
        if (this._normalImage !== a && (a && (this.addChild(a, 0, cc.NORMAL_TAG), a.anchorX = 0, a.anchorY = 0), this._normalImage && this.removeChild(this._normalImage, !0), this._normalImage = a)) this.width = this._normalImage.width, this.height = this._normalImage.height, this._updateImagesVisibility(), a.textureLoaded && !a.textureLoaded() && a.addEventListener("load",
            function (a) {
                this.width = a.width;
                this.height = a.height;
                this.parent instanceof cc.Menu && this.parent.updateAlign()
            }, this)
    },
    getSelectedImage: function () {
        return this._selectedImage
    },
    setSelectedImage: function (a) {
        this._selectedImage !== a && (a && (this.addChild(a, 0, cc.SELECTED_TAG), a.anchorX = 0, a.anchorY = 0), this._selectedImage && this.removeChild(this._selectedImage, !0), this._selectedImage = a, this._updateImagesVisibility())
    },
    getDisabledImage: function () {
        return this._disabledImage
    },
    setDisabledImage: function (a) {
        this._disabledImage !==
            a && (a && (this.addChild(a, 0, cc.DISABLE_TAG), a.anchorX = 0, a.anchorY = 0), this._disabledImage && this.removeChild(this._disabledImage, !0), this._disabledImage = a, this._updateImagesVisibility())
    },
    initWithNormalSprite: function (a, b, c, d, f) {
        this._loader.clear();
        if (a.textureLoaded && !a.textureLoaded()) return this._loader.once(a, function () {
            this.initWithNormalSprite(a, b, c, d, f)
        }, this), !1;
        this.initWithCallback(d, f);
        this.setNormalImage(a);
        this.setSelectedImage(b);
        this.setDisabledImage(c);
        var g = this._normalImage;
        g && (this.width =
            g.width, this.height = g.height);
        this.setCascadeColorEnabled(!0);
        this.setCascadeOpacityEnabled(!0);
        return !0
    },
    selected: function () {
        cc.MenuItem.prototype.selected.call(this);
        this._normalImage && (this._disabledImage && (this._disabledImage.visible = !1), this._selectedImage ? (this._normalImage.visible = !1, this._selectedImage.visible = !0) : this._normalImage.visible = !0)
    },
    unselected: function () {
        cc.MenuItem.prototype.unselected.call(this);
        this._normalImage && (this._normalImage.visible = !0, this._selectedImage && (this._selectedImage.visible = !1), this._disabledImage && (this._disabledImage.visible = !1))
    },
    setEnabled: function (a) {
        this._enabled !== a && (cc.MenuItem.prototype.setEnabled.call(this, a), this._updateImagesVisibility())
    },
    _updateImagesVisibility: function () {
        var a = this._normalImage,
            b = this._selectedImage,
            c = this._disabledImage;
        this._enabled ? (a && (a.visible = !0), b && (b.visible = !1), c && (c.visible = !1)) : c ? (a && (a.visible = !1), b && (b.visible = !1), c && (c.visible = !0)) : (a && (a.visible = !0), b && (b.visible = !1))
    }
});
_p = cc.MenuItemSprite.prototype;
cc.defineGetterSetter(_p, "normalImage", _p.getNormalImage, _p.setNormalImage);
cc.defineGetterSetter(_p, "selectedImage", _p.getSelectedImage, _p.setSelectedImage);
cc.defineGetterSetter(_p, "disabledImage", _p.getDisabledImage, _p.setDisabledImage);
cc.MenuItemSprite.create = function (a, b, c, d, f) {
    return new cc.MenuItemSprite(a, b, c, d, f || void 0)
};
cc.MenuItemImage = cc.MenuItemSprite.extend({
    ctor: function (a, b, c, d, f) {
        var g = null,
            h = null,
            m = null,
            n = null,
            p = null;
        void 0 === a || null === a ? cc.MenuItemSprite.prototype.ctor.call(this) : (g = new cc.Sprite(a), b && (h = new cc.Sprite(b)), void 0 === d ? n = c : void 0 === f ? (n = c, p = d) : f && (m = new cc.Sprite(c), n = d, p = f), cc.MenuItemSprite.prototype.ctor.call(this, g, h, m, n, p))
    },
    setNormalSpriteFrame: function (a) {
        this.setNormalImage(new cc.Sprite(a))
    },
    setSelectedSpriteFrame: function (a) {
        this.setSelectedImage(new cc.Sprite(a))
    },
    setDisabledSpriteFrame: function (a) {
        this.setDisabledImage(new cc.Sprite(a))
    },
    initWithNormalImage: function (a, b, c, d, f) {
        var g = null,
            h = null,
            m = null;
        a && (g = new cc.Sprite(a));
        b && (h = new cc.Sprite(b));
        c && (m = new cc.Sprite(c));
        return this.initWithNormalSprite(g, h, m, d, f)
    }
});
cc.MenuItemImage.create = function (a, b, c, d, f) {
    return new cc.MenuItemImage(a, b, c, d, f)
};
cc.MenuItemToggle = cc.MenuItem.extend({
    subItems: null,
    _selectedIndex: 0,
    _opacity: null,
    _color: null,
    ctor: function () {
        cc.MenuItem.prototype.ctor.call(this);
        this._selectedIndex = 0;
        this.subItems = [];
        this._opacity = 0;
        this._color = cc.color.WHITE;
        0 < arguments.length && this.initWithItems(Array.prototype.slice.apply(arguments))
    },
    getOpacity: function () {
        return this._opacity
    },
    setOpacity: function (a) {
        this._opacity = a;
        if (this.subItems && 0 < this.subItems.length)
            for (var b = 0; b < this.subItems.length; b++) this.subItems[b].opacity = a;
        this._color.a = a
    },
    getColor: function () {
        var a = this._color;
        return cc.color(a.r, a.g, a.b, a.a)
    },
    setColor: function (a) {
        var b = this._color;
        b.r = a.r;
        b.g = a.g;
        b.b = a.b;
        if (this.subItems && 0 < this.subItems.length)
            for (b = 0; b < this.subItems.length; b++) this.subItems[b].setColor(a);
        void 0 !== a.a && !a.a_undefined && this.setOpacity(a.a)
    },
    getSelectedIndex: function () {
        return this._selectedIndex
    },
    setSelectedIndex: function (a) {
        if (a !== this._selectedIndex) {
            this._selectedIndex = a;
            (a = this.getChildByTag(cc.CURRENT_ITEM)) && a.removeFromParent(!1);
            a = this.subItems[this._selectedIndex];
            this.addChild(a, 0, cc.CURRENT_ITEM);
            var b = a.width,
                c = a.height;
            this.width = b;
            this.height = c;
            a.setPosition(b / 2, c / 2)
        }
    },
    getSubItems: function () {
        return this.subItems
    },
    setSubItems: function (a) {
        this.subItems = a
    },
    initWithItems: function (a) {
        var b = a.length;
        cc.isFunction(a[a.length - 2]) ? (this.initWithCallback(a[a.length - 2], a[a.length - 1]), b -= 2) : cc.isFunction(a[a.length - 1]) ? (this.initWithCallback(a[a.length - 1], null), b -= 1) : this.initWithCallback(null, null);
        for (var c = this.subItems, d = c.length =
                0; d < b; d++) a[d] && c.push(a[d]);
        this._selectedIndex = cc.UINT_MAX;
        this.setSelectedIndex(0);
        this.setCascadeColorEnabled(!0);
        this.setCascadeOpacityEnabled(!0);
        return !0
    },
    addSubItem: function (a) {
        this.subItems.push(a)
    },
    activate: function () {
        this._enabled && this.setSelectedIndex((this._selectedIndex + 1) % this.subItems.length);
        cc.MenuItem.prototype.activate.call(this)
    },
    selected: function () {
        cc.MenuItem.prototype.selected.call(this);
        this.subItems[this._selectedIndex].selected()
    },
    unselected: function () {
        cc.MenuItem.prototype.unselected.call(this);
        this.subItems[this._selectedIndex].unselected()
    },
    setEnabled: function (a) {
        if (this._enabled !== a) {
            cc.MenuItem.prototype.setEnabled.call(this, a);
            var b = this.subItems;
            if (b && 0 < b.length)
                for (var c = 0; c < b.length; c++) b[c].enabled = a
        }
    },
    selectedItem: function () {
        return this.subItems[this._selectedIndex]
    },
    getSelectedItem: function () {
        return this.subItems[this._selectedIndex]
    },
    onEnter: function () {
        cc.Node.prototype.onEnter.call(this);
        this.setSelectedIndex(this._selectedIndex)
    }
});
_p = cc.MenuItemToggle.prototype;
cc.defineGetterSetter(_p, "selectedIndex", _p.getSelectedIndex, _p.setSelectedIndex);
cc.MenuItemToggle.create = function () {
    0 < arguments.length && null == arguments[arguments.length - 1] && cc.log("parameters should not be ending with null in Javascript");
    var a = new cc.MenuItemToggle;
    a.initWithItems(Array.prototype.slice.apply(arguments));
    return a
};
cc.MENU_STATE_WAITING = 0;
cc.MENU_STATE_TRACKING_TOUCH = 1;
cc.MENU_HANDLER_PRIORITY = -128;
cc.DEFAULT_PADDING = 5;
cc.Menu = cc.Layer.extend({
    enabled: !1,
    _selectedItem: null,
    _state: -1,
    _touchListener: null,
    _className: "Menu",
    ctor: function (a) {
        cc.Layer.prototype.ctor.call(this);
        this._color = cc.color.WHITE;
        this.enabled = !1;
        this._opacity = 255;
        this._selectedItem = null;
        this._state = -1;
        this._touchListener = cc.EventListener.create({
            event: cc.EventListener.TOUCH_ONE_BY_ONE,
            swallowTouches: !0,
            onTouchBegan: this._onTouchBegan,
            onTouchMoved: this._onTouchMoved,
            onTouchEnded: this._onTouchEnded,
            onTouchCancelled: this._onTouchCancelled
        });
        var b =
            arguments.length,
            c;
        if (a instanceof Array) c = a;
        else if (0 === b) c = [];
        else if (0 < b) {
            c = [];
            for (var d = 0; d < b; d++) arguments[d] && c.push(arguments[d])
        }
        this.initWithArray(c)
    },
    onEnter: function () {
        var a = this._touchListener;
        a._isRegistered() || cc.eventManager.addListener(a, this);
        cc.Node.prototype.onEnter.call(this)
    },
    isEnabled: function () {
        return this.enabled
    },
    setEnabled: function (a) {
        this.enabled = a
    },
    initWithItems: function (a) {
        var b = [];
        if (a)
            for (var c = 0; c < a.length; c++) a[c] && b.push(a[c]);
        return this.initWithArray(b)
    },
    initWithArray: function (a) {
        if (cc.Layer.prototype.init.call(this)) {
            this.enabled = !0;
            var b = cc.winSize;
            this.setPosition(b.width / 2, b.height / 2);
            this.setContentSize(b);
            this.setAnchorPoint(0.5, 0.5);
            this.ignoreAnchorPointForPosition(!0);
            if (a)
                for (b = 0; b < a.length; b++) this.addChild(a[b], b);
            this._selectedItem = null;
            this._state = cc.MENU_STATE_WAITING;
            return this.cascadeOpacity = this.cascadeColor = !0
        }
        return !1
    },
    addChild: function (a, b, c) {
        if (!(a instanceof cc.MenuItem)) throw Error("cc.Menu.addChild() : Menu only supports MenuItem objects as children");
        cc.Layer.prototype.addChild.call(this, a, b, c)
    },
    updateAlign: function () {
        switch (this._align) {
        case "vertically":
            this.alignItemsVertically();
            break;
        case "horizontally":
            this.alignItemsHorizontally()
        }
    },
    alignItemsVertically: function () {
        this.alignItemsVerticallyWithPadding(cc.DEFAULT_PADDING)
    },
    alignItemsVerticallyWithPadding: function (a) {
        this._align = "vertically";
        var b = -a,
            c = this._children,
            d, f, g, h;
        if (c && 0 < c.length) {
            f = 0;
            for (d = c.length; f < d; f++) b += c[f].height * c[f].scaleY + a;
            var m = b / 2;
            f = 0;
            for (d = c.length; f < d; f++) h = c[f], g = h.height, b = h.scaleY, h.setPosition(0, m - g * b /
                2), m -= g * b + a
        }
    },
    alignItemsHorizontally: function () {
        this.alignItemsHorizontallyWithPadding(cc.DEFAULT_PADDING)
    },
    alignItemsHorizontallyWithPadding: function (a) {
        this._align = "horizontally";
        var b = -a,
            c = this._children,
            d, f, g, h;
        if (c && 0 < c.length) {
            d = 0;
            for (f = c.length; d < f; d++) b += c[d].width * c[d].scaleX + a;
            var m = -b / 2;
            d = 0;
            for (f = c.length; d < f; d++) h = c[d], b = h.scaleX, g = c[d].width, h.setPosition(m + g * b / 2, 0), m += g * b + a
        }
    },
    alignItemsInColumns: function () {
        0 < arguments.length && null == arguments[arguments.length - 1] && cc.log("parameters should not be ending with null in Javascript");
        var a, b = [];
        for (a = 0; a < arguments.length; a++) b.push(arguments[a]);
        var c = -5,
            d = 0,
            f = 0,
            g = 0,
            h, m, n, p = this._children;
        if (p && 0 < p.length) {
            a = 0;
            for (n = p.length; a < n; a++)
                if (!(d >= b.length) && (h = b[d])) m = p[a].height, f = f >= m || isNaN(m) ? f : m, ++g, g >= h && (c += f + 5, f = g = 0, ++d)
        }
        var u = cc.director.getWinSize(),
            v = h = f = d = 0,
            x = 0,
            c = c / 2;
        if (p && 0 < p.length) {
            a = 0;
            for (n = p.length; a < n; a++) {
                var y = p[a];
                0 === h && (h = b[d], x = v = u.width / (1 + h));
                m = y._getHeight();
                f = f >= m || isNaN(m) ? f : m;
                y.setPosition(x - u.width / 2, c - m / 2);
                x += v;
                ++g;
                g >= h && (c -= f + 5, f = h = g = 0, ++d)
            }
        }
    },
    alignItemsInRows: function () {
        0 <
            arguments.length && null == arguments[arguments.length - 1] && cc.log("parameters should not be ending with null in Javascript");
        var a, b = [];
        for (a = 0; a < arguments.length; a++) b.push(arguments[a]);
        var c = [],
            d = [],
            f = -10,
            g = -5,
            h = 0,
            m = 0,
            n = 0,
            p, u, v, x, y = this._children;
        if (y && 0 < y.length) {
            a = 0;
            for (v = y.length; a < v; a++)
                if (u = y[a], !(h >= b.length) && (p = b[h])) x = u.width, m = m >= x || isNaN(x) ? m : x, g += u.height + 5, ++n, n >= p && (c.push(m), d.push(g), f += m + 10, m = n = 0, g = -5, ++h)
        }
        g = cc.director.getWinSize();
        p = m = h = 0;
        var f = -f / 2,
            z = 0;
        if (y && 0 < y.length) {
            a = 0;
            for (v =
                y.length; a < v; a++) u = y[a], 0 === p && (p = b[h], z = d[h]), x = u._getWidth(), m = m >= x || isNaN(x) ? m : x, u.setPosition(f + c[h] / 2, z - g.height / 2), z -= u.height + 10, ++n, n >= p && (f += m + 5, m = p = n = 0, ++h)
        }
    },
    removeChild: function (a, b) {
        null != a && (a instanceof cc.MenuItem ? (this._selectedItem === a && (this._selectedItem = null), cc.Node.prototype.removeChild.call(this, a, b)) : cc.log("cc.Menu.removeChild():Menu only supports MenuItem objects as children"))
    },
    _onTouchBegan: function (a, b) {
        var c = b.getCurrentTarget();
        if (c._state !== cc.MENU_STATE_WAITING ||
            !c._visible || !c.enabled) return !1;
        for (var d = c.parent; null != d; d = d.parent)
            if (!d.isVisible()) return !1;
        c._selectedItem = c._itemForTouch(a);
        return c._selectedItem ? (c._state = cc.MENU_STATE_TRACKING_TOUCH, c._selectedItem.selected(), c._selectedItem.setNodeDirty(), !0) : !1
    },
    _onTouchEnded: function (a, b) {
        var c = b.getCurrentTarget();
        c._state !== cc.MENU_STATE_TRACKING_TOUCH ? cc.log("cc.Menu.onTouchEnded(): invalid state") : (c._selectedItem && (c._selectedItem.unselected(), c._selectedItem.setNodeDirty(), c._selectedItem.activate()),
            c._state = cc.MENU_STATE_WAITING)
    },
    _onTouchCancelled: function (a, b) {
        var c = b.getCurrentTarget();
        c._state !== cc.MENU_STATE_TRACKING_TOUCH ? cc.log("cc.Menu.onTouchCancelled(): invalid state") : (c._selectedItem && (c._selectedItem.unselected(), c._selectedItem.setNodeDirty()), c._state = cc.MENU_STATE_WAITING)
    },
    _onTouchMoved: function (a, b) {
        var c = b.getCurrentTarget();
        if (c._state !== cc.MENU_STATE_TRACKING_TOUCH) cc.log("cc.Menu.onTouchMoved(): invalid state");
        else {
            var d = c._itemForTouch(a);
            d !== c._selectedItem && (c._selectedItem &&
                (c._selectedItem.unselected(), c._selectedItem.setNodeDirty()), c._selectedItem = d, c._selectedItem && (c._selectedItem.selected(), c._selectedItem.setNodeDirty()))
        }
    },
    onExit: function () {
        this._state === cc.MENU_STATE_TRACKING_TOUCH && (this._selectedItem && (this._selectedItem.unselected(), this._selectedItem = null), this._state = cc.MENU_STATE_WAITING);
        cc.Node.prototype.onExit.call(this)
    },
    setOpacityModifyRGB: function (a) {},
    isOpacityModifyRGB: function () {
        return !1
    },
    _itemForTouch: function (a) {
        a = a.getLocation();
        var b = this._children,
            c;
        if (b && 0 < b.length)
            for (var d = b.length - 1; 0 <= d; d--)
                if (c = b[d], c.isVisible() && c.isEnabled()) {
                    var f = c.convertToNodeSpace(a),
                        g = c.rect();
                    g.x = 0;
                    g.y = 0;
                    if (cc.rectContainsPoint(g, f)) return c
                } return null
    }
});
_p = cc.Menu.prototype;
cc.Menu.create = function (a) {
    var b = arguments.length;
    0 < b && null == arguments[b - 1] && cc.log("parameters should not be ending with null in Javascript");
    return 0 === b ? new cc.Menu : 1 === b ? new cc.Menu(a) : new cc.Menu(Array.prototype.slice.call(arguments, 0))
};
cc.Codec.GZip = function (a) {
    this.data = a;
    this.debug = !1;
    this.gpflags = void 0;
    this.files = 0;
    this.unzipped = [];
    this.buf32k = Array(32768);
    this.bIdx = 0;
    this.modeZIP = !1;
    this.bytepos = 0;
    this.bb = 1;
    this.bits = 0;
    this.nameBuf = [];
    this.fileout = void 0;
    this.literalTree = Array(cc.Codec.GZip.LITERALS);
    this.distanceTree = Array(32);
    this.treepos = 0;
    this.Places = null;
    this.len = 0;
    this.fpos = Array(17);
    this.fpos[0] = 0;
    this.fmax = this.flens = void 0
};
cc.Codec.GZip.gunzip = function (a) {
    return (new cc.Codec.GZip(a)).gunzip()[0][0]
};
cc.Codec.GZip.HufNode = function () {
    this.b1 = this.b0 = 0;
    this.jump = null;
    this.jumppos = -1
};
cc.Codec.GZip.LITERALS = 288;
cc.Codec.GZip.NAMEMAX = 256;
cc.Codec.GZip.bitReverse = [0, 128, 64, 192, 32, 160, 96, 224, 16, 144, 80, 208, 48, 176, 112, 240, 8, 136, 72, 200, 40, 168, 104, 232, 24, 152, 88, 216, 56, 184, 120, 248, 4, 132, 68, 196, 36, 164, 100, 228, 20, 148, 84, 212, 52, 180, 116, 244, 12, 140, 76, 204, 44, 172, 108, 236, 28, 156, 92, 220, 60, 188, 124, 252, 2, 130, 66, 194, 34, 162, 98, 226, 18, 146, 82, 210, 50, 178, 114, 242, 10, 138, 74, 202, 42, 170, 106, 234, 26, 154, 90, 218, 58, 186, 122, 250, 6, 134, 70, 198, 38, 166, 102, 230, 22, 150, 86, 214, 54, 182, 118, 246, 14, 142, 78, 206, 46, 174, 110, 238, 30, 158, 94, 222, 62, 190, 126, 254, 1, 129, 65, 193, 33, 161,
    97, 225, 17, 145, 81, 209, 49, 177, 113, 241, 9, 137, 73, 201, 41, 169, 105, 233, 25, 153, 89, 217, 57, 185, 121, 249, 5, 133, 69, 197, 37, 165, 101, 229, 21, 149, 85, 213, 53, 181, 117, 245, 13, 141, 77, 205, 45, 173, 109, 237, 29, 157, 93, 221, 61, 189, 125, 253, 3, 131, 67, 195, 35, 163, 99, 227, 19, 147, 83, 211, 51, 179, 115, 243, 11, 139, 75, 203, 43, 171, 107, 235, 27, 155, 91, 219, 59, 187, 123, 251, 7, 135, 71, 199, 39, 167, 103, 231, 23, 151, 87, 215, 55, 183, 119, 247, 15, 143, 79, 207, 47, 175, 111, 239, 31, 159, 95, 223, 63, 191, 127, 255
];
cc.Codec.GZip.cplens = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0];
cc.Codec.GZip.cplext = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 99, 99];
cc.Codec.GZip.cpdist = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577];
cc.Codec.GZip.cpdext = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];
cc.Codec.GZip.border = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
cc.Codec.GZip.prototype.gunzip = function () {
    this.outputArr = [];
    this.nextFile();
    return this.unzipped
};
cc.Codec.GZip.prototype.readByte = function () {
    this.bits += 8;
    return this.bytepos < this.data.length ? this.data.charCodeAt(this.bytepos++) : -1
};
cc.Codec.GZip.prototype.byteAlign = function () {
    this.bb = 1
};
cc.Codec.GZip.prototype.readBit = function () {
    var a;
    this.bits++;
    a = this.bb & 1;
    this.bb >>= 1;
    0 === this.bb && (this.bb = this.readByte(), a = this.bb & 1, this.bb = this.bb >> 1 | 128);
    return a
};
cc.Codec.GZip.prototype.readBits = function (a) {
    for (var b = 0, c = a; c--;) b = b << 1 | this.readBit();
    a && (b = cc.Codec.GZip.bitReverse[b] >> 8 - a);
    return b
};
cc.Codec.GZip.prototype.flushBuffer = function () {
    this.bIdx = 0
};
cc.Codec.GZip.prototype.addBuffer = function (a) {
    this.buf32k[this.bIdx++] = a;
    this.outputArr.push(String.fromCharCode(a));
    32768 === this.bIdx && (this.bIdx = 0)
};
cc.Codec.GZip.prototype.IsPat = function () {
    for (;;) {
        if (this.fpos[this.len] >= this.fmax) return -1;
        if (this.flens[this.fpos[this.len]] === this.len) return this.fpos[this.len]++;
        this.fpos[this.len]++
    }
};
cc.Codec.GZip.prototype.Rec = function () {
    var a = this.Places[this.treepos],
        b;
    if (17 === this.len) return -1;
    this.treepos++;
    this.len++;
    b = this.IsPat();
    if (0 <= b) a.b0 = b;
    else if (a.b0 = 32768, this.Rec()) return -1;
    b = this.IsPat();
    if (0 <= b) a.b1 = b, a.jump = null;
    else if (a.b1 = 32768, a.jump = this.Places[this.treepos], a.jumppos = this.treepos, this.Rec()) return -1;
    this.len--;
    return 0
};
cc.Codec.GZip.prototype.CreateTree = function (a, b, c, d) {
    this.Places = a;
    this.treepos = 0;
    this.flens = c;
    this.fmax = b;
    for (a = 0; 17 > a; a++) this.fpos[a] = 0;
    this.len = 0;
    return this.Rec() ? -1 : 0
};
cc.Codec.GZip.prototype.DecodeValue = function (a) {
    for (var b, c, d = 0, f = a[d];;)
        if (b = this.readBit()) {
            if (!(f.b1 & 32768)) return f.b1;
            f = f.jump;
            b = a.length;
            for (c = 0; c < b; c++)
                if (a[c] === f) {
                    d = c;
                    break
                }
        } else {
            if (!(f.b0 & 32768)) return f.b0;
            d++;
            f = a[d]
        } return -1
};
cc.Codec.GZip.prototype.DeflateLoop = function () {
    var a, b, c, d, f;
    do
        if (a = this.readBit(), c = this.readBits(2), 0 === c) {
            this.byteAlign();
            c = this.readByte();
            c |= this.readByte() << 8;
            b = this.readByte();
            b |= this.readByte() << 8;
            for ((c ^ ~b) & 65535 && document.write("BlockLen checksum mismatch\n"); c--;) b = this.readByte(), this.addBuffer(b)
        } else if (1 === c)
        for (;;)
            if (c = cc.Codec.GZip.bitReverse[this.readBits(7)] >> 1, 23 < c ? (c = c << 1 | this.readBit(), 199 < c ? (c -= 128, c = c << 1 | this.readBit()) : (c -= 48, 143 < c && (c += 136))) : c += 256, 256 > c) this.addBuffer(c);
            else if (256 === c) break;
    else {
        var g;
        c -= 257;
        f = this.readBits(cc.Codec.GZip.cplext[c]) + cc.Codec.GZip.cplens[c];
        c = cc.Codec.GZip.bitReverse[this.readBits(5)] >> 3;
        8 < cc.Codec.GZip.cpdext[c] ? (g = this.readBits(8), g |= this.readBits(cc.Codec.GZip.cpdext[c] - 8) << 8) : g = this.readBits(cc.Codec.GZip.cpdext[c]);
        g += cc.Codec.GZip.cpdist[c];
        for (c = 0; c < f; c++) b = this.buf32k[this.bIdx - g & 32767], this.addBuffer(b)
    } else if (2 === c) {
        var h = Array(320);
        b = 257 + this.readBits(5);
        g = 1 + this.readBits(5);
        d = 4 + this.readBits(4);
        for (c = 0; 19 > c; c++) h[c] =
            0;
        for (c = 0; c < d; c++) h[cc.Codec.GZip.border[c]] = this.readBits(3);
        f = this.distanceTree.length;
        for (d = 0; d < f; d++) this.distanceTree[d] = new cc.Codec.GZip.HufNode;
        if (this.CreateTree(this.distanceTree, 19, h, 0)) return this.flushBuffer(), 1;
        f = b + g;
        d = 0;
        for (var m = -1; d < f;)
            if (m++, c = this.DecodeValue(this.distanceTree), 16 > c) h[d++] = c;
            else if (16 === c) {
            var n;
            c = 3 + this.readBits(2);
            if (d + c > f) return this.flushBuffer(), 1;
            for (n = d ? h[d - 1] : 0; c--;) h[d++] = n
        } else {
            c = 17 === c ? 3 + this.readBits(3) : 11 + this.readBits(7);
            if (d + c > f) return this.flushBuffer(),
                1;
            for (; c--;) h[d++] = 0
        }
        f = this.literalTree.length;
        for (d = 0; d < f; d++) this.literalTree[d] = new cc.Codec.GZip.HufNode;
        if (this.CreateTree(this.literalTree, b, h, 0)) return this.flushBuffer(), 1;
        f = this.literalTree.length;
        for (d = 0; d < f; d++) this.distanceTree[d] = new cc.Codec.GZip.HufNode;
        c = [];
        for (d = b; d < h.length; d++) c[d - b] = h[d];
        if (this.CreateTree(this.distanceTree, g, c, 0)) return this.flushBuffer(), 1;
        for (;;)
            if (c = this.DecodeValue(this.literalTree), 256 <= c) {
                c -= 256;
                if (0 === c) break;
                c--;
                f = this.readBits(cc.Codec.GZip.cplext[c]) +
                    cc.Codec.GZip.cplens[c];
                c = this.DecodeValue(this.distanceTree);
                8 < cc.Codec.GZip.cpdext[c] ? (g = this.readBits(8), g |= this.readBits(cc.Codec.GZip.cpdext[c] - 8) << 8) : g = this.readBits(cc.Codec.GZip.cpdext[c]);
                for (g += cc.Codec.GZip.cpdist[c]; f--;) b = this.buf32k[this.bIdx - g & 32767], this.addBuffer(b)
            } else this.addBuffer(c)
    }
    while (!a);
    this.flushBuffer();
    this.byteAlign();
    return 0
};
cc.Codec.GZip.prototype.unzipFile = function (a) {
    var b;
    this.gunzip();
    for (b = 0; b < this.unzipped.length; b++)
        if (this.unzipped[b][1] === a) return this.unzipped[b][0]
};
cc.Codec.GZip.prototype.nextFile = function () {
    this.outputArr = [];
    this.modeZIP = !1;
    var a = [];
    a[0] = this.readByte();
    a[1] = this.readByte();
    120 === a[0] && 218 === a[1] && (this.DeflateLoop(), this.unzipped[this.files] = [this.outputArr.join(""), "geonext.gxt"], this.files++);
    31 === a[0] && 139 === a[1] && (this.skipdir(), this.unzipped[this.files] = [this.outputArr.join(""), "file"], this.files++);
    if (80 === a[0] && 75 === a[1] && (this.modeZIP = !0, a[2] = this.readByte(), a[3] = this.readByte(), 3 === a[2] && 4 === a[3])) {
        a[0] = this.readByte();
        a[1] = this.readByte();
        this.gpflags = this.readByte();
        this.gpflags |= this.readByte() << 8;
        a = this.readByte();
        a |= this.readByte() << 8;
        this.readByte();
        this.readByte();
        this.readByte();
        this.readByte();
        this.readByte();
        this.readByte();
        this.readByte();
        this.readByte();
        this.readByte();
        this.readByte();
        this.readByte();
        this.readByte();
        var b = this.readByte(),
            b = b | this.readByte() << 8,
            c = this.readByte(),
            c = c | this.readByte() << 8,
            d = 0;
        for (this.nameBuf = []; b--;) {
            var f = this.readByte();
            "/" === f | ":" === f ? d = 0 : d < cc.Codec.GZip.NAMEMAX - 1 && (this.nameBuf[d++] = String.fromCharCode(f))
        }
        this.fileout ||
            (this.fileout = this.nameBuf);
        for (var d = 0; d < c;) this.readByte(), d++;
        8 === a && (this.DeflateLoop(), this.unzipped[this.files] = [this.outputArr.join(""), this.nameBuf.join("")], this.files++);
        this.skipdir()
    }
};
cc.Codec.GZip.prototype.skipdir = function () {
    var a = [],
        b;
    this.gpflags & 8 && (a[0] = this.readByte(), a[1] = this.readByte(), a[2] = this.readByte(), a[3] = this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte());
    this.modeZIP && this.nextFile();
    a[0] = this.readByte();
    if (8 !== a[0]) return 0;
    this.gpflags = this.readByte();
    this.readByte();
    this.readByte();
    this.readByte();
    this.readByte();
    this.readByte();
    this.readByte();
    if (this.gpflags & 4) {
        a[0] =
            this.readByte();
        a[2] = this.readByte();
        this.len = a[0] + 256 * a[1];
        for (a = 0; a < this.len; a++) this.readByte()
    }
    if (this.gpflags & 8) {
        a = 0;
        for (this.nameBuf = []; b = this.readByte();) {
            if ("7" === b || ":" === b) a = 0;
            a < cc.Codec.GZip.NAMEMAX - 1 && (this.nameBuf[a++] = b)
        }
    }
    if (this.gpflags & 16)
        for (; this.readByte(););
    this.gpflags & 2 && (this.readByte(), this.readByte());
    this.DeflateLoop();
    this.readByte();
    this.readByte();
    this.readByte();
    this.readByte();
    this.modeZIP && this.nextFile()
};
(function () {
    function a(a) {
        throw a;
    }

    function b(a, b) {
        var c = a.split("."),
            d = C;
        !(c[0] in d) && d.execScript && d.execScript("var " + c[0]);
        for (var f; c.length && (f = c.shift());) !c.length && b !== B ? d[f] = b : d = d[f] ? d[f] : d[f] = {}
    }

    function c(a) {
        if ("string" === typeof a) {
            a = a.split("");
            var b, c;
            b = 0;
            for (c = a.length; b < c; b++) a[b] = (a[b].charCodeAt(0) & 255) >>> 0
        }
        b = 1;
        c = 0;
        for (var d = a.length, f, g = 0; 0 < d;) {
            f = 1024 < d ? 1024 : d;
            d -= f;
            do b += a[g++], c += b; while (--f);
            b %= 65521;
            c %= 65521
        }
        return (c << 16 | b) >>> 0
    }

    function d(b, c) {
        this.index = "number" === typeof c ?
            c : 0;
        this.i = 0;
        this.buffer = b instanceof(D ? Uint8Array : Array) ? b : new(D ? Uint8Array : Array)(32768);
        2 * this.buffer.length <= this.index && a(Error("invalid index"));
        this.buffer.length <= this.index && this.f()
    }

    function f(a) {
        this.buffer = new(D ? Uint16Array : Array)(2 * a);
        this.length = 0
    }

    function g(a) {
        var b = a.length,
            c = 0,
            d = Number.POSITIVE_INFINITY,
            f, g, m, h, n, p, t, u, y;
        for (u = 0; u < b; ++u) a[u] > c && (c = a[u]), a[u] < d && (d = a[u]);
        f = 1 << c;
        g = new(D ? Uint32Array : Array)(f);
        m = 1;
        h = 0;
        for (n = 2; m <= c;) {
            for (u = 0; u < b; ++u)
                if (a[u] === m) {
                    p = 0;
                    t = h;
                    for (y = 0; y < m; ++y) p =
                        p << 1 | t & 1, t >>= 1;
                    for (y = p; y < f; y += n) g[y] = m << 16 | u;
                    ++h
                }++ m;
            h <<= 1;
            n <<= 1
        }
        return [g, c, d]
    }

    function h(a, b) {
        this.h = U;
        this.w = 0;
        this.input = a;
        this.b = 0;
        b && (b.lazy && (this.w = b.lazy), "number" === typeof b.compressionType && (this.h = b.compressionType), b.outputBuffer && (this.a = D && b.outputBuffer instanceof Array ? new Uint8Array(b.outputBuffer) : b.outputBuffer), "number" === typeof b.outputIndex && (this.b = b.outputIndex));
        this.a || (this.a = new(D ? Uint8Array : Array)(32768))
    }

    function m(a, b) {
        this.length = a;
        this.G = b
    }

    function n() {
        var b = P;
        switch (F) {
        case 3 ===
        b:
            return [257, b - 3, 0];
        case 4 === b:
            return [258, b - 4, 0];
        case 5 === b:
            return [259, b - 5, 0];
        case 6 === b:
            return [260, b - 6, 0];
        case 7 === b:
            return [261, b - 7, 0];
        case 8 === b:
            return [262, b - 8, 0];
        case 9 === b:
            return [263, b - 9, 0];
        case 10 === b:
            return [264, b - 10, 0];
        case 12 >= b:
            return [265, b - 11, 1];
        case 14 >= b:
            return [266, b - 13, 1];
        case 16 >= b:
            return [267, b - 15, 1];
        case 18 >= b:
            return [268, b - 17, 1];
        case 22 >= b:
            return [269, b - 19, 2];
        case 26 >= b:
            return [270, b - 23, 2];
        case 30 >= b:
            return [271, b - 27, 2];
        case 34 >= b:
            return [272, b - 31, 2];
        case 42 >= b:
            return [273, b - 35, 3];
        case 50 >=
        b:
            return [274, b - 43, 3];
        case 58 >= b:
            return [275, b - 51, 3];
        case 66 >= b:
            return [276, b - 59, 3];
        case 82 >= b:
            return [277, b - 67, 4];
        case 98 >= b:
            return [278, b - 83, 4];
        case 114 >= b:
            return [279, b - 99, 4];
        case 130 >= b:
            return [280, b - 115, 4];
        case 162 >= b:
            return [281, b - 131, 5];
        case 194 >= b:
            return [282, b - 163, 5];
        case 226 >= b:
            return [283, b - 195, 5];
        case 257 >= b:
            return [284, b - 227, 5];
        case 258 === b:
            return [285, b - 258, 0];
        default:
            a("invalid length: " + b)
        }
    }

    function p(b, c) {
        function d(b, c) {
            var f = b.G,
                g = [],
                h = 0,
                m;
            m = S[b.length];
            g[h++] = m & 65535;
            g[h++] = m >> 16 & 255;
            g[h++] =
                m >> 24;
            var n;
            switch (F) {
            case 1 === f:
                n = [0, f - 1, 0];
                break;
            case 2 === f:
                n = [1, f - 2, 0];
                break;
            case 3 === f:
                n = [2, f - 3, 0];
                break;
            case 4 === f:
                n = [3, f - 4, 0];
                break;
            case 6 >= f:
                n = [4, f - 5, 1];
                break;
            case 8 >= f:
                n = [5, f - 7, 1];
                break;
            case 12 >= f:
                n = [6, f - 9, 2];
                break;
            case 16 >= f:
                n = [7, f - 13, 2];
                break;
            case 24 >= f:
                n = [8, f - 17, 3];
                break;
            case 32 >= f:
                n = [9, f - 25, 3];
                break;
            case 48 >= f:
                n = [10, f - 33, 4];
                break;
            case 64 >= f:
                n = [11, f - 49, 4];
                break;
            case 96 >= f:
                n = [12, f - 65, 5];
                break;
            case 128 >= f:
                n = [13, f - 97, 5];
                break;
            case 192 >= f:
                n = [14, f - 129, 6];
                break;
            case 256 >= f:
                n = [15, f - 193, 6];
                break;
            case 384 >= f:
                n = [16, f - 257, 7];
                break;
            case 512 >= f:
                n = [17, f - 385, 7];
                break;
            case 768 >= f:
                n = [18, f - 513, 8];
                break;
            case 1024 >= f:
                n = [19, f - 769, 8];
                break;
            case 1536 >= f:
                n = [20, f - 1025, 9];
                break;
            case 2048 >= f:
                n = [21, f - 1537, 9];
                break;
            case 3072 >= f:
                n = [22, f - 2049, 10];
                break;
            case 4096 >= f:
                n = [23, f - 3073, 10];
                break;
            case 6144 >= f:
                n = [24, f - 4097, 11];
                break;
            case 8192 >= f:
                n = [25, f - 6145, 11];
                break;
            case 12288 >= f:
                n = [26, f - 8193, 12];
                break;
            case 16384 >= f:
                n = [27, f - 12289, 12];
                break;
            case 24576 >= f:
                n = [28, f - 16385, 13];
                break;
            case 32768 >= f:
                n = [29, f - 24577, 13];
                break;
            default:
                a("invalid distance")
            }
            m =
                n;
            g[h++] = m[0];
            g[h++] = m[1];
            g[h++] = m[2];
            f = 0;
            for (h = g.length; f < h; ++f) y[v++] = g[f];
            x[g[0]]++;
            z[g[3]]++;
            w = b.length + c - 1;
            u = null
        }
        var f, g, h, n, p, t = {},
            u, y = D ? new Uint16Array(2 * c.length) : [],
            v = 0,
            w = 0,
            x = new(D ? Uint32Array : Array)(286),
            z = new(D ? Uint32Array : Array)(30),
            V = b.w,
            Y;
        if (!D) {
            for (h = 0; 285 >= h;) x[h++] = 0;
            for (h = 0; 29 >= h;) z[h++] = 0
        }
        x[256] = 1;
        f = 0;
        for (g = c.length; f < g; ++f) {
            h = p = 0;
            for (n = 3; h < n && f + h !== g; ++h) p = p << 8 | c[f + h];
            t[p] === B && (t[p] = []);
            h = t[p];
            if (!(0 < w--)) {
                for (; 0 < h.length && 32768 < f - h[0];) h.shift();
                if (f + 3 >= g) {
                    u && d(u, -1);
                    h = 0;
                    for (n = g - f; h < n; ++h) Y = c[f + h], y[v++] = Y, ++x[Y];
                    break
                }
                if (0 < h.length) {
                    p = n = B;
                    var A = 0,
                        I = B,
                        T = B,
                        L = I = B,
                        X = c.length,
                        T = 0,
                        L = h.length;
                    a: for (; T < L; T++) {
                        n = h[L - T - 1];
                        I = 3;
                        if (3 < A) {
                            for (I = A; 3 < I; I--)
                                if (c[n + I - 1] !== c[f + I - 1]) continue a;
                            I = A
                        }
                        for (; 258 > I && f + I < X && c[n + I] === c[f + I];) ++I;
                        I > A && (p = n, A = I);
                        if (258 === I) break
                    }
                    n = new m(A, f - p);
                    u ? u.length < n.length ? (Y = c[f - 1], y[v++] = Y, ++x[Y], d(n, 0)) : d(u, -1) : n.length < V ? u = n : d(n, 0)
                } else u ? d(u, -1) : (Y = c[f], y[v++] = Y, ++x[Y])
            }
            h.push(f)
        }
        y[v++] = 256;
        x[256]++;
        b.L = x;
        b.K = z;
        return D ? y.subarray(0, v) : y
    }

    function u(a,
        b) {
        function c(a) {
            var b = y[a][v[a]];
            b === t ? (c(a + 1), c(a + 1)) : --u[b];
            ++v[a]
        }
        var d = a.length,
            g = new f(572),
            h = new(D ? Uint8Array : Array)(d),
            m, n, p;
        if (!D)
            for (n = 0; n < d; n++) h[n] = 0;
        for (n = 0; n < d; ++n) 0 < a[n] && g.push(n, a[n]);
        d = Array(g.length / 2);
        m = new(D ? Uint32Array : Array)(g.length / 2);
        if (1 === d.length) return h[g.pop().index] = 1, h;
        n = 0;
        for (p = g.length / 2; n < p; ++n) d[n] = g.pop(), m[n] = d[n].value;
        var t = m.length;
        n = new(D ? Uint16Array : Array)(b);
        var g = new(D ? Uint8Array : Array)(b),
            u = new(D ? Uint8Array : Array)(t);
        p = Array(b);
        var y = Array(b),
            v =
            Array(b),
            w = (1 << b) - t,
            x = 1 << b - 1,
            z, V, Y;
        n[b - 1] = t;
        for (z = 0; z < b; ++z) w < x ? g[z] = 0 : (g[z] = 1, w -= x), w <<= 1, n[b - 2 - z] = (n[b - 1 - z] / 2 | 0) + t;
        n[0] = g[0];
        p[0] = Array(n[0]);
        y[0] = Array(n[0]);
        for (z = 1; z < b; ++z) n[z] > 2 * n[z - 1] + g[z] && (n[z] = 2 * n[z - 1] + g[z]), p[z] = Array(n[z]), y[z] = Array(n[z]);
        for (w = 0; w < t; ++w) u[w] = b;
        for (x = 0; x < n[b - 1]; ++x) p[b - 1][x] = m[x], y[b - 1][x] = x;
        for (w = 0; w < b; ++w) v[w] = 0;
        1 === g[b - 1] && (--u[0], ++v[b - 1]);
        for (z = b - 2; 0 <= z; --z) {
            V = w = 0;
            Y = v[z + 1];
            for (x = 0; x < n[z]; x++) V = p[z + 1][Y] + p[z + 1][Y + 1], V > m[w] ? (p[z][x] = V, y[z][x] = t, Y += 2) : (p[z][x] = m[w],
                y[z][x] = w, ++w);
            v[z] = 0;
            1 === g[z] && c(z)
        }
        m = u;
        n = 0;
        for (p = d.length; n < p; ++n) h[d[n].index] = m[n];
        return h
    }

    function v(b) {
        var c = new(D ? Uint16Array : Array)(b.length),
            d = [],
            f = [],
            g = 0,
            h, m, n;
        h = 0;
        for (m = b.length; h < m; h++) d[b[h]] = (d[b[h]] | 0) + 1;
        h = 1;
        for (m = 16; h <= m; h++) f[h] = g, g += d[h] | 0, g > 1 << h && a("overcommitted"), g <<= 1;
        65536 > g && a("undercommitted");
        h = 0;
        for (m = b.length; h < m; h++) {
            g = f[b[h]];
            f[b[h]] += 1;
            d = c[h] = 0;
            for (n = b[h]; d < n; d++) c[h] = c[h] << 1 | g & 1, g >>>= 1
        }
        return c
    }

    function x(a, b) {
        this.input = a;
        this.a = new(D ? Uint8Array : Array)(32768);
        this.h =
            I.j;
        var c = {},
            d;
        if ((b || !(b = {})) && "number" === typeof b.compressionType) this.h = b.compressionType;
        for (d in b) c[d] = b[d];
        c.outputBuffer = this.a;
        this.z = new h(this.input, c)
    }

    function y(b, c) {
        this.k = [];
        this.l = 32768;
        this.e = this.g = this.c = this.q = 0;
        this.input = D ? new Uint8Array(b) : b;
        this.s = !1;
        this.m = W;
        this.B = !1;
        if (c || !(c = {})) c.index && (this.c = c.index), c.bufferSize && (this.l = c.bufferSize), c.bufferType && (this.m = c.bufferType), c.resize && (this.B = c.resize);
        switch (this.m) {
        case J:
            this.b = 32768;
            this.a = new(D ? Uint8Array : Array)(32768 +
                this.l + 258);
            break;
        case W:
            this.b = 0;
            this.a = new(D ? Uint8Array : Array)(this.l);
            this.f = this.J;
            this.t = this.H;
            this.o = this.I;
            break;
        default:
            a(Error("invalid inflate mode"))
        }
    }

    function z(b, c) {
        for (var d = b.g, f = b.e, g = b.input, h = b.c, m; f < c;) m = g[h++], m === B && a(Error("input buffer is broken")), d |= m << f, f += 8;
        b.g = d >>> c;
        b.e = f - c;
        b.c = h;
        return d & (1 << c) - 1
    }

    function t(b, c) {
        for (var d = b.g, f = b.e, g = b.input, h = b.c, m = c[0], n = c[1], p; f < n;) p = g[h++], p === B && a(Error("input buffer is broken")), d |= p << f, f += 8;
        g = m[d & (1 << n) - 1];
        m = g >>> 16;
        b.g = d >> m;
        b.e =
            f - m;
        b.c = h;
        return g & 65535
    }

    function A(a) {
        function b(a, c, d) {
            var f, g, h, m;
            for (m = 0; m < a;) switch (f = t(this, c), f) {
            case 16:
                for (h = 3 + z(this, 2); h--;) d[m++] = g;
                break;
            case 17:
                for (h = 3 + z(this, 3); h--;) d[m++] = 0;
                g = 0;
                break;
            case 18:
                for (h = 11 + z(this, 7); h--;) d[m++] = 0;
                g = 0;
                break;
            default:
                g = d[m++] = f
            }
            return d
        }
        var c = z(a, 5) + 257,
            d = z(a, 5) + 1,
            f = z(a, 4) + 4,
            h = new(D ? Uint8Array : Array)($.length),
            m;
        for (m = 0; m < f; ++m) h[$[m]] = z(a, 3);
        f = g(h);
        h = new(D ? Uint8Array : Array)(c);
        m = new(D ? Uint8Array : Array)(d);
        a.o(g(b.call(a, c, f, h)), g(b.call(a, d, f, m)))
    }

    function w(b,
        c) {
        var d, f;
        this.input = b;
        this.c = 0;
        if (c || !(c = {})) c.index && (this.c = c.index), c.verify && (this.M = c.verify);
        d = b[this.c++];
        f = b[this.c++];
        switch (d & 15) {
        case aa:
            this.method = aa;
            break;
        default:
            a(Error("unsupported compression method"))
        }
        0 !== ((d << 8) + f) % 31 && a(Error("invalid fcheck flag:" + ((d << 8) + f) % 31));
        f & 32 && a(Error("fdict flag is not supported"));
        this.A = new y(b, {
            index: this.c,
            bufferSize: c.bufferSize,
            bufferType: c.bufferType,
            resize: c.resize
        })
    }
    var B = void 0,
        F = !0,
        C = this,
        D = "undefined" !== typeof Uint8Array && "undefined" !==
        typeof Uint16Array && "undefined" !== typeof Uint32Array;
    d.prototype.f = function () {
        var a = this.buffer,
            b, c = a.length,
            d = new(D ? Uint8Array : Array)(c << 1);
        if (D) d.set(a);
        else
            for (b = 0; b < c; ++b) d[b] = a[b];
        return this.buffer = d
    };
    d.prototype.d = function (a, b, c) {
        var d = this.buffer,
            f = this.index,
            g = this.i,
            h = d[f];
        c && 1 < b && (a = 8 < b ? (N[a & 255] << 24 | N[a >>> 8 & 255] << 16 | N[a >>> 16 & 255] << 8 | N[a >>> 24 & 255]) >> 32 - b : N[a] >> 8 - b);
        if (8 > b + g) h = h << b | a, g += b;
        else
            for (c = 0; c < b; ++c) h = h << 1 | a >> b - c - 1 & 1, 8 === ++g && (g = 0, d[f++] = N[h], h = 0, f === d.length && (d = this.f()));
        d[f] = h;
        this.buffer = d;
        this.i = g;
        this.index = f
    };
    d.prototype.finish = function () {
        var a = this.buffer,
            b = this.index,
            c;
        0 < this.i && (a[b] <<= 8 - this.i, a[b] = N[a[b]], b++);
        D ? c = a.subarray(0, b) : (a.length = b, c = a);
        return c
    };
    var E = new(D ? Uint8Array : Array)(256),
        G;
    for (G = 0; 256 > G; ++G) {
        for (var H = G, M = H, K = 7, H = H >>> 1; H; H >>>= 1) M <<= 1, M |= H & 1, --K;
        E[G] = (M << K & 255) >>> 0
    }
    var N = E,
        E = [0, 1996959894, 3993919788, 2567524794, 124634137, 1886057615, 3915621685, 2657392035, 249268274, 2044508324, 3772115230, 2547177864, 162941995, 2125561021, 3887607047, 2428444049,
            498536548, 1789927666, 4089016648, 2227061214, 450548861, 1843258603, 4107580753, 2211677639, 325883990, 1684777152, 4251122042, 2321926636, 335633487, 1661365465, 4195302755, 2366115317, 997073096, 1281953886, 3579855332, 2724688242, 1006888145, 1258607687, 3524101629, 2768942443, 901097722, 1119000684, 3686517206, 2898065728, 853044451, 1172266101, 3705015759, 2882616665, 651767980, 1373503546, 3369554304, 3218104598, 565507253, 1454621731, 3485111705, 3099436303, 671266974, 1594198024, 3322730930, 2970347812, 795835527, 1483230225, 3244367275,
            3060149565, 1994146192, 31158534, 2563907772, 4023717930, 1907459465, 112637215, 2680153253, 3904427059, 2013776290, 251722036, 2517215374, 3775830040, 2137656763, 141376813, 2439277719, 3865271297, 1802195444, 476864866, 2238001368, 4066508878, 1812370925, 453092731, 2181625025, 4111451223, 1706088902, 314042704, 2344532202, 4240017532, 1658658271, 366619977, 2362670323, 4224994405, 1303535960, 984961486, 2747007092, 3569037538, 1256170817, 1037604311, 2765210733, 3554079995, 1131014506, 879679996, 2909243462, 3663771856, 1141124467, 855842277,
            2852801631, 3708648649, 1342533948, 654459306, 3188396048, 3373015174, 1466479909, 544179635, 3110523913, 3462522015, 1591671054, 702138776, 2966460450, 3352799412, 1504918807, 783551873, 3082640443, 3233442989, 3988292384, 2596254646, 62317068, 1957810842, 3939845945, 2647816111, 81470997, 1943803523, 3814918930, 2489596804, 225274430, 2053790376, 3826175755, 2466906013, 167816743, 2097651377, 4027552580, 2265490386, 503444072, 1762050814, 4150417245, 2154129355, 426522225, 1852507879, 4275313526, 2312317920, 282753626, 1742555852, 4189708143,
            2394877945, 397917763, 1622183637, 3604390888, 2714866558, 953729732, 1340076626, 3518719985, 2797360999, 1068828381, 1219638859, 3624741850, 2936675148, 906185462, 1090812512, 3747672003, 2825379669, 829329135, 1181335161, 3412177804, 3160834842, 628085408, 1382605366, 3423369109, 3138078467, 570562233, 1426400815, 3317316542, 2998733608, 733239954, 1555261956, 3268935591, 3050360625, 752459403, 1541320221, 2607071920, 3965973030, 1969922972, 40735498, 2617837225, 3943577151, 1913087877, 83908371, 2512341634, 3803740692, 2075208622, 213261112,
            2463272603, 3855990285, 2094854071, 198958881, 2262029012, 4057260610, 1759359992, 534414190, 2176718541, 4139329115, 1873836001, 414664567, 2282248934, 4279200368, 1711684554, 285281116, 2405801727, 4167216745, 1634467795, 376229701, 2685067896, 3608007406, 1308918612, 956543938, 2808555105, 3495958263, 1231636301, 1047427035, 2932959818, 3654703836, 1088359270, 936918E3, 2847714899, 3736837829, 1202900863, 817233897, 3183342108, 3401237130, 1404277552, 615818150, 3134207493, 3453421203, 1423857449, 601450431, 3009837614, 3294710456, 1567103746,
            711928724, 3020668471, 3272380065, 1510334235, 755167117
        ];
    D && new Uint32Array(E);
    f.prototype.getParent = function (a) {
        return 2 * ((a - 2) / 4 | 0)
    };
    f.prototype.push = function (a, b) {
        var c, d, f = this.buffer,
            g;
        c = this.length;
        f[this.length++] = b;
        for (f[this.length++] = a; 0 < c;)
            if (d = this.getParent(c), f[c] > f[d]) g = f[c], f[c] = f[d], f[d] = g, g = f[c + 1], f[c + 1] = f[d + 1], f[d + 1] = g, c = d;
            else break;
        return this.length
    };
    f.prototype.pop = function () {
        var a, b, c = this.buffer,
            d, f, g;
        b = c[0];
        a = c[1];
        this.length -= 2;
        c[0] = c[this.length];
        c[1] = c[this.length + 1];
        for (g =
            0;;) {
            f = 2 * g + 2;
            if (f >= this.length) break;
            f + 2 < this.length && c[f + 2] > c[f] && (f += 2);
            if (c[f] > c[g]) d = c[g], c[g] = c[f], c[f] = d, d = c[g + 1], c[g + 1] = c[f + 1], c[f + 1] = d;
            else break;
            g = f
        }
        return {
            index: a,
            value: b,
            length: this.length
        }
    };
    var U = 2,
        E = {
            NONE: 0,
            r: 1,
            j: U,
            N: 3
        },
        T = [];
    for (G = 0; 288 > G; G++) switch (F) {
    case 143 >= G:
        T.push([G + 48, 8]);
        break;
    case 255 >= G:
        T.push([G - 144 + 400, 9]);
        break;
    case 279 >= G:
        T.push([G - 256 + 0, 7]);
        break;
    case 287 >= G:
        T.push([G - 280 + 192, 8]);
        break;
    default:
        a("invalid literal: " + G)
    }
    h.prototype.n = function () {
        var b, c, f, g, h = this.input;
        switch (this.h) {
        case 0:
            f = 0;
            for (g = h.length; f < g;) {
                c = D ? h.subarray(f, f + 65535) : h.slice(f, f + 65535);
                f += c.length;
                var m = f === g,
                    n = B,
                    t = n = B,
                    t = n = B,
                    y = this.a,
                    w = this.b;
                if (D) {
                    for (y = new Uint8Array(this.a.buffer); y.length <= w + c.length + 5;) y = new Uint8Array(y.length << 1);
                    y.set(this.a)
                }
                n = m ? 1 : 0;
                y[w++] = n | 0;
                n = c.length;
                t = ~n + 65536 & 65535;
                y[w++] = n & 255;
                y[w++] = n >>> 8 & 255;
                y[w++] = t & 255;
                y[w++] = t >>> 8 & 255;
                if (D) y.set(c, w), w += c.length, y = y.subarray(0, w);
                else {
                    n = 0;
                    for (t = c.length; n < t; ++n) y[w++] = c[n];
                    y.length = w
                }
                this.b = w;
                this.a = y
            }
            break;
        case 1:
            f =
                new d(new Uint8Array(this.a.buffer), this.b);
            f.d(1, 1, F);
            f.d(1, 2, F);
            h = p(this, h);
            c = 0;
            for (m = h.length; c < m; c++)
                if (g = h[c], d.prototype.d.apply(f, T[g]), 256 < g) f.d(h[++c], h[++c], F), f.d(h[++c], 5), f.d(h[++c], h[++c], F);
                else if (256 === g) break;
            this.a = f.finish();
            this.b = this.a.length;
            break;
        case U:
            g = new d(new Uint8Array(this.a), this.b);
            var x, z, V, Y = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],
                I, A, n = Array(19),
                L, y = U;
            g.d(1, 1, F);
            g.d(y, 2, F);
            h = p(this, h);
            t = u(this.L, 15);
            I = v(t);
            y = u(this.K, 7);
            w = v(y);
            for (x = 286; 257 < x && 0 === t[x -
                    1]; x--);
            for (z = 30; 1 < z && 0 === y[z - 1]; z--);
            var X = x,
                P = z;
            b = new(D ? Uint32Array : Array)(X + P);
            var J = new(D ? Uint32Array : Array)(316),
                E, aa;
            A = new(D ? Uint8Array : Array)(19);
            for (L = V = 0; L < X; L++) b[V++] = t[L];
            for (L = 0; L < P; L++) b[V++] = y[L];
            if (!D) {
                L = 0;
                for (P = A.length; L < P; ++L) A[L] = 0
            }
            L = E = 0;
            for (P = b.length; L < P; L += V) {
                for (V = 1; L + V < P && b[L + V] === b[L]; ++V);
                X = V;
                if (0 === b[L])
                    if (3 > X)
                        for (; 0 < X--;) J[E++] = 0, A[0]++;
                    else
                        for (; 0 < X;) aa = 138 > X ? X : 138, aa > X - 3 && aa < X && (aa = X - 3), 10 >= aa ? (J[E++] = 17, J[E++] = aa - 3, A[17]++) : (J[E++] = 18, J[E++] = aa - 11, A[18]++), X -= aa;
                else if (J[E++] = b[L], A[b[L]]++, X--, 3 > X)
                    for (; 0 < X--;) J[E++] = b[L], A[b[L]]++;
                else
                    for (; 0 < X;) aa = 6 > X ? X : 6, aa > X - 3 && aa < X && (aa = X - 3), J[E++] = 16, J[E++] = aa - 3, A[16]++, X -= aa
            }
            b = D ? J.subarray(0, E) : J.slice(0, E);
            A = u(A, 7);
            for (L = 0; 19 > L; L++) n[L] = A[Y[L]];
            for (V = 19; 4 < V && 0 === n[V - 1]; V--);
            Y = v(A);
            g.d(x - 257, 5, F);
            g.d(z - 1, 5, F);
            g.d(V - 4, 4, F);
            for (L = 0; L < V; L++) g.d(n[L], 3, F);
            L = 0;
            for (n = b.length; L < n; L++)
                if (c = b[L], g.d(Y[c], A[c], F), 16 <= c) {
                    L++;
                    switch (c) {
                    case 16:
                        m = 2;
                        break;
                    case 17:
                        m = 3;
                        break;
                    case 18:
                        m = 7;
                        break;
                    default:
                        a("invalid code: " + c)
                    }
                    g.d(b[L],
                        m, F)
                } m = [I, t];
            w = [w, y];
            c = m[0];
            m = m[1];
            y = w[0];
            I = w[1];
            w = 0;
            for (n = h.length; w < n; ++w)
                if (f = h[w], g.d(c[f], m[f], F), 256 < f) g.d(h[++w], h[++w], F), t = h[++w], g.d(y[t], I[t], F), g.d(h[++w], h[++w], F);
                else if (256 === f) break;
            this.a = g.finish();
            this.b = this.a.length;
            break;
        default:
            a("invalid compression type")
        }
        return this.a
    };
    G = [];
    var P;
    for (P = 3; 258 >= P; P++) H = n(), G[P] = H[2] << 24 | H[1] << 16 | H[0];
    var S = D ? new Uint32Array(G) : G,
        I = E;
    x.prototype.n = function () {
        var b, d, f, g, h = 0;
        g = this.a;
        b = aa;
        switch (b) {
        case aa:
            d = Math.LOG2E * Math.log(32768) - 8;
            break;
        default:
            a(Error("invalid compression method"))
        }
        d = d << 4 | b;
        g[h++] = d;
        switch (b) {
        case aa:
            switch (this.h) {
            case I.NONE:
                f = 0;
                break;
            case I.r:
                f = 1;
                break;
            case I.j:
                f = 2;
                break;
            default:
                a(Error("unsupported compression type"))
            }
            break;
        default:
            a(Error("invalid compression method"))
        }
        b = f << 6 | 0;
        g[h++] = b | 31 - (256 * d + b) % 31;
        b = c(this.input);
        this.z.b = h;
        g = this.z.n();
        h = g.length;
        D && (g = new Uint8Array(g.buffer), g.length <= h + 4 && (this.a = new Uint8Array(g.length + 4), this.a.set(g), g = this.a), g = g.subarray(0, h + 4));
        g[h++] = b >> 24 & 255;
        g[h++] = b >> 16 &
            255;
        g[h++] = b >> 8 & 255;
        g[h++] = b & 255;
        return g
    };
    b("Zlib.Deflate", x);
    b("Zlib.Deflate.compress", function (a, b) {
        return (new x(a, b)).n()
    });
    b("Zlib.Deflate.CompressionType", I);
    b("Zlib.Deflate.CompressionType.NONE", I.NONE);
    b("Zlib.Deflate.CompressionType.FIXED", I.r);
    b("Zlib.Deflate.CompressionType.DYNAMIC", I.j);
    var J = 0,
        W = 1,
        E = {
            D: J,
            C: W
        };
    y.prototype.p = function () {
        for (; !this.s;) {
            var b = z(this, 3);
            b & 1 && (this.s = F);
            b >>>= 1;
            switch (b) {
            case 0:
                var b = this.input,
                    c = this.c,
                    d = this.a,
                    f = this.b,
                    g = B,
                    h = B,
                    m = B,
                    n = d.length,
                    g = B;
                this.e = this.g =
                    0;
                g = b[c++];
                g === B && a(Error("invalid uncompressed block header: LEN (first byte)"));
                h = g;
                g = b[c++];
                g === B && a(Error("invalid uncompressed block header: LEN (second byte)"));
                h |= g << 8;
                g = b[c++];
                g === B && a(Error("invalid uncompressed block header: NLEN (first byte)"));
                m = g;
                g = b[c++];
                g === B && a(Error("invalid uncompressed block header: NLEN (second byte)"));
                m |= g << 8;
                h === ~m && a(Error("invalid uncompressed block header: length verify"));
                c + h > b.length && a(Error("input buffer is broken"));
                switch (this.m) {
                case J:
                    for (; f + h > d.length;) {
                        g =
                            n - f;
                        h -= g;
                        if (D) d.set(b.subarray(c, c + g), f), f += g, c += g;
                        else
                            for (; g--;) d[f++] = b[c++];
                        this.b = f;
                        d = this.f();
                        f = this.b
                    }
                    break;
                case W:
                    for (; f + h > d.length;) d = this.f({
                        v: 2
                    });
                    break;
                default:
                    a(Error("invalid inflate mode"))
                }
                if (D) d.set(b.subarray(c, c + h), f), f += h, c += h;
                else
                    for (; h--;) d[f++] = b[c++];
                this.c = c;
                this.b = f;
                this.a = d;
                break;
            case 1:
                this.o(Y, X);
                break;
            case 2:
                A(this);
                break;
            default:
                a(Error("unknown BTYPE: " + b))
            }
        }
        return this.t()
    };
    G = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
    var $ = D ? new Uint16Array(G) : G;
    G = [3, 4, 5, 6,
        7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 258, 258
    ];
    var O = D ? new Uint16Array(G) : G;
    G = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0];
    var Z = D ? new Uint8Array(G) : G;
    G = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577];
    var V = D ? new Uint16Array(G) : G;
    G = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];
    var L = D ? new Uint8Array(G) : G;
    G = new(D ? Uint8Array : Array)(288);
    H = 0;
    for (M = G.length; H <
        M; ++H) G[H] = 143 >= H ? 8 : 255 >= H ? 9 : 279 >= H ? 7 : 8;
    var Y = g(G);
    G = new(D ? Uint8Array : Array)(30);
    H = 0;
    for (M = G.length; H < M; ++H) G[H] = 5;
    var X = g(G);
    y.prototype.o = function (a, b) {
        var c = this.a,
            d = this.b;
        this.u = a;
        for (var f = c.length - 258, g, h, m; 256 !== (g = t(this, a));)
            if (256 > g) d >= f && (this.b = d, c = this.f(), d = this.b), c[d++] = g;
            else {
                g -= 257;
                m = O[g];
                0 < Z[g] && (m += z(this, Z[g]));
                g = t(this, b);
                h = V[g];
                0 < L[g] && (h += z(this, L[g]));
                for (d >= f && (this.b = d, c = this.f(), d = this.b); m--;) c[d] = c[d++ - h]
            } for (; 8 <= this.e;) this.e -= 8, this.c--;
        this.b = d
    };
    y.prototype.I = function (a,
        b) {
        var c = this.a,
            d = this.b;
        this.u = a;
        for (var f = c.length, g, h, m; 256 !== (g = t(this, a));)
            if (256 > g) d >= f && (c = this.f(), f = c.length), c[d++] = g;
            else {
                g -= 257;
                m = O[g];
                0 < Z[g] && (m += z(this, Z[g]));
                g = t(this, b);
                h = V[g];
                0 < L[g] && (h += z(this, L[g]));
                for (d + m > f && (c = this.f(), f = c.length); m--;) c[d] = c[d++ - h]
            } for (; 8 <= this.e;) this.e -= 8, this.c--;
        this.b = d
    };
    y.prototype.f = function () {
        var a = new(D ? Uint8Array : Array)(this.b - 32768),
            b = this.b - 32768,
            c, d, f = this.a;
        if (D) a.set(f.subarray(32768, a.length));
        else {
            c = 0;
            for (d = a.length; c < d; ++c) a[c] = f[c + 32768]
        }
        this.k.push(a);
        this.q += a.length;
        if (D) f.set(f.subarray(b, b + 32768));
        else
            for (c = 0; 32768 > c; ++c) f[c] = f[b + c];
        this.b = 32768;
        return f
    };
    y.prototype.J = function (a) {
        var b, c = this.input.length / this.c + 1 | 0,
            d, f, g, h = this.input,
            m = this.a;
        a && ("number" === typeof a.v && (c = a.v), "number" === typeof a.F && (c += a.F));
        2 > c ? (d = (h.length - this.c) / this.u[2], g = 258 * (d / 2) | 0, f = g < m.length ? m.length + g : m.length << 1) : f = m.length * c;
        D ? (b = new Uint8Array(f), b.set(m)) : b = m;
        return this.a = b
    };
    y.prototype.t = function () {
        var a = 0,
            b = this.a,
            c = this.k,
            d, f = new(D ? Uint8Array : Array)(this.q +
                (this.b - 32768)),
            g, h, m, n;
        if (0 === c.length) return D ? this.a.subarray(32768, this.b) : this.a.slice(32768, this.b);
        g = 0;
        for (h = c.length; g < h; ++g) {
            d = c[g];
            m = 0;
            for (n = d.length; m < n; ++m) f[a++] = d[m]
        }
        g = 32768;
        for (h = this.b; g < h; ++g) f[a++] = b[g];
        this.k = [];
        return this.buffer = f
    };
    y.prototype.H = function () {
        var a, b = this.b;
        D ? this.B ? (a = new Uint8Array(b), a.set(this.a.subarray(0, b))) : a = this.a.subarray(0, b) : (this.a.length > b && (this.a.length = b), a = this.a);
        return this.buffer = a
    };
    w.prototype.p = function () {
        var b = this.input,
            d, f;
        d = this.A.p();
        this.c = this.A.c;
        this.M && (f = (b[this.c++] << 24 | b[this.c++] << 16 | b[this.c++] << 8 | b[this.c++]) >>> 0, f !== c(d) && a(Error("invalid adler-32 checksum")));
        return d
    };
    b("Zlib.Inflate", w);
    b("Zlib.Inflate.BufferType", E);
    E.ADAPTIVE = E.C;
    E.BLOCK = E.D;
    b("Zlib.Inflate.prototype.decompress", w.prototype.p);
    E = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
    D && new Uint16Array(E);
    E = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 258, 258];
    D && new Uint16Array(E);
    E = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1,
        2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0
    ];
    D && new Uint8Array(E);
    E = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577];
    D && new Uint16Array(E);
    E = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];
    D && new Uint8Array(E);
    E = new(D ? Uint8Array : Array)(288);
    G = 0;
    for (H = E.length; G < H; ++G) E[G] = 143 >= G ? 8 : 255 >= G ? 9 : 279 >= G ? 7 : 8;
    g(E);
    E = new(D ? Uint8Array : Array)(30);
    G = 0;
    for (H = E.length; G < H; ++G) E[G] = 5;
    g(E);
    var aa = 8
}).call(this);
_p = window;
_p = _p.Zlib = _p.Zlib;
_p.Deflate = _p.Deflate;
_p.Deflate.compress = _p.Deflate.compress;
_p.Inflate = _p.Inflate;
_p.Inflate.BufferType = _p.Inflate.BufferType;
_p.Inflate.prototype.decompress = _p.Inflate.prototype.decompress;
cc.TGA_OK = 0;
cc.TGA_ERROR_FILE_OPEN = 1;
cc.TGA_ERROR_READING_FILE = 2;
cc.TGA_ERROR_INDEXED_COLOR = 3;
cc.TGA_ERROR_MEMORY = 4;
cc.TGA_ERROR_COMPRESSED_FILE = 5;
cc.ImageTGA = function (a, b, c, d, f, g, h) {
    this.status = a || 0;
    this.type = b || 0;
    this.pixelDepth = c || 0;
    this.width = d || 0;
    this.height = f || 0;
    this.imageData = g || [];
    this.flipped = h || 0
};
cc.tgaLoadHeader = function (a, b, c) {
    var d = 2;
    if (d + 1 > b) return !1;
    a = new cc.BinaryStreamReader(a);
    a.setOffset(d);
    c.type = a.readByte();
    d += 10;
    if (d + 4 + 1 > b) return !1;
    a.setOffset(d);
    c.width = a.readUnsignedShort();
    c.height = a.readUnsignedInteger();
    c.pixelDepth = a.readByte();
    if (d + 5 + 1 > b) return !1;
    b = a.readByte();
    c.flipped = 0;
    b & 32 && (c.flipped = 1);
    return !0
};
cc.tgaLoadImageData = function (a, b, c) {
    var d, f;
    d = 0 | c.pixelDepth / 2;
    f = c.height * c.width * d;
    if (18 + f > b) return !1;
    c.imageData = cc.__getSubArray(a, 18, 18 + f);
    if (3 <= d)
        for (a = 0; a < f; a += d) b = c.imageData[a], c.imageData[a] = c.imageData[a + 2], c.imageData[a + 2] = b;
    return !0
};
cc.tgaRGBtogreyscale = function (a) {
    var b, c;
    if (8 !== a.pixelDepth) {
        var d = a.pixelDepth / 8,
            f = new Uint8Array(a.height * a.width);
        if (null !== f) {
            for (c = b = 0; c < a.width * a.height; b += d, c++) f[c] = 0.3 * a.imageData[b] + 0.59 * a.imageData[b + 1] + 0.11 * a.imageData[b + 2];
            a.pixelDepth = 8;
            a.type = 3;
            a.imageData = f
        }
    }
};
cc.tgaDestroy = function (a) {
    a && (a.imageData = null)
};
cc.tgaLoadRLEImageData = function (a, b, c) {
    var d, f, g, h = 0,
        m = 0,
        n = 0,
        p = [],
        u = 0,
        v = 18;
    d = c.pixelDepth / 8;
    f = c.height * c.width;
    for (g = 0; g < f; g++) {
        if (0 !== u) u--, m = 0 !== n;
        else {
            if (v + 1 > b) break;
            u = a[v];
            v += 1;
            (n = u & 128) && (u -= 128);
            m = 0
        }
        if (!m) {
            if (v + d > b) break;
            p = cc.__getSubArray(a, v, v + d);
            v += d;
            3 <= d && (m = p[0], p[0] = p[2], p[2] = m)
        }
        for (m = 0; m < d; m++) c.imageData[h + m] = p[m];
        h += d
    }
    return !0
};
cc.tgaFlipImage = function (a) {
    for (var b = a.width * (a.pixelDepth / 8), c = 0; c < a.height / 2; c++) {
        var d = cc.__getSubArray(a.imageData, c * b, c * b + b);
        cc.__setDataToArray(cc.__getSubArray(a.imageData, (a.height - (c + 1)) * b, b), a.imageData, c * b);
        cc.__setDataToArray(d, a.imageData, (a.height - (c + 1)) * b)
    }
    a.flipped = 0
};
cc.__getSubArray = function (a, b, c) {
    return a instanceof Array ? a.slice(b, c) : a.subarray(b, c)
};
cc.__setDataToArray = function (a, b, c) {
    for (var d = 0; d < a.length; d++) b[c + d] = a[d]
};
cc.BinaryStreamReader = cc.Class.extend({
    _binaryData: null,
    _offset: 0,
    ctor: function (a) {
        this._binaryData = a
    },
    setBinaryData: function (a) {
        this._binaryData = a;
        this._offset = 0
    },
    getBinaryData: function () {
        return this._binaryData
    },
    _checkSize: function (a) {
        if (!(this._offset + Math.ceil(a / 8) < this._data.length)) throw Error("Index out of bound");
    },
    _decodeFloat: function (a, b) {
        var c = a + b + 1,
            d = c >> 3;
        this._checkSize(c);
        var c = Math.pow(2, b - 1) - 1,
            f = this._readBits(a + b, 1, d),
            g = this._readBits(a, b, d),
            h = 0,
            m = 2,
            n = 0;
        do
            for (var p = this._readByte(++n,
                    d), u = a % 8 || 8, v = 1 << u; v >>= 1;) p & v && (h += 1 / m), m *= 2; while (a -= u);
        this._offset += d;
        return g === (c << 1) + 1 ? h ? NaN : f ? -Infinity : Infinity : (1 + -2 * f) * (g || h ? !g ? Math.pow(2, -c + 1) * h : Math.pow(2, g - c) * (1 + h) : 0)
    },
    _readByte: function (a, b) {
        return this._data[this._offset + b - a - 1]
    },
    _decodeInt: function (a, b) {
        var c = this._readBits(0, a, a / 8),
            d = Math.pow(2, a);
        this._offset += a / 8;
        return b && c >= d / 2 ? c - d : c
    },
    _shl: function (a, b) {
        for (++b; --b; a = 1073741824 === ((a %= 2147483648) & 1073741824) ? 2 * a : 2 * (a - 1073741824) + 2147483648);
        return a
    },
    _readBits: function (a, b, c) {
        var d =
            (a + b) % 8,
            f = a % 8,
            g = c - (a >> 3) - 1;
        a = c + (-(a + b) >> 3);
        var h = g - a;
        b = this._readByte(g, c) >> f & (1 << (h ? 8 - f : b)) - 1;
        for (h && d && (b += (this._readByte(a++, c) & (1 << d) - 1) << (h-- << 3) - f); h;) b += this._shl(this._readByte(a++, c), (h-- << 3) - f);
        return b
    },
    readInteger: function () {
        return this._decodeInt(32, !0)
    },
    readUnsignedInteger: function () {
        return this._decodeInt(32, !1)
    },
    readSingle: function () {
        return this._decodeFloat(23, 8)
    },
    readShort: function () {
        return this._decodeInt(16, !0)
    },
    readUnsignedShort: function () {
        return this._decodeInt(16, !1)
    },
    readByte: function () {
        var a =
            this._data[this._offset];
        this._offset += 1;
        return a
    },
    readData: function (a, b) {
        return this._binaryData instanceof Array ? this._binaryData.slice(a, b) : this._binaryData.subarray(a, b)
    },
    setOffset: function (a) {
        this._offset = a
    },
    getOffset: function () {
        return this._offset
    }
});
cc.TMX_ORIENTATION_ORTHO = 0;
cc.TMX_ORIENTATION_HEX = 1;
cc.TMX_ORIENTATION_ISO = 2;
cc.TMXTiledMap = cc.Node.extend({
    properties: null,
    mapOrientation: null,
    objectGroups: null,
    _mapSize: null,
    _tileSize: null,
    _tileProperties: null,
    _className: "TMXTiledMap",
    ctor: function (a, b) {
        cc.Node.prototype.ctor.call(this);
        this._mapSize = cc.size(0, 0);
        this._tileSize = cc.size(0, 0);
        void 0 !== b ? this.initWithXML(a, b) : void 0 !== a && this.initWithTMXFile(a)
    },
    getMapSize: function () {
        return cc.size(this._mapSize.width, this._mapSize.height)
    },
    setMapSize: function (a) {
        this._mapSize.width = a.width;
        this._mapSize.height = a.height
    },
    _getMapWidth: function () {
        return this._mapSize.width
    },
    _setMapWidth: function (a) {
        this._mapSize.width = a
    },
    _getMapHeight: function () {
        return this._mapSize.height
    },
    _setMapHeight: function (a) {
        this._mapSize.height = a
    },
    getTileSize: function () {
        return cc.size(this._tileSize.width, this._tileSize.height)
    },
    setTileSize: function (a) {
        this._tileSize.width = a.width;
        this._tileSize.height = a.height
    },
    _getTileWidth: function () {
        return this._tileSize.width
    },
    _setTileWidth: function (a) {
        this._tileSize.width = a
    },
    _getTileHeight: function () {
        return this._tileSize.height
    },
    _setTileHeight: function (a) {
        this._tileSize.height =
            a
    },
    getMapOrientation: function () {
        return this.mapOrientation
    },
    setMapOrientation: function (a) {
        this.mapOrientation = a
    },
    getObjectGroups: function () {
        return this.objectGroups
    },
    setObjectGroups: function (a) {
        this.objectGroups = a
    },
    getProperties: function () {
        return this.properties
    },
    setProperties: function (a) {
        this.properties = a
    },
    initWithTMXFile: function (a) {
        if (!a || 0 === a.length) throw Error("cc.TMXTiledMap.initWithTMXFile(): tmxFile should be non-null or non-empty string.");
        this.height = this.width = 0;
        a = new cc.TMXMapInfo(a);
        if (!a) return !1;
        var b = a.getTilesets();
        (!b || 0 === b.length) && cc.log("cc.TMXTiledMap.initWithTMXFile(): Map not found. Please check the filename.");
        this._buildWithMapInfo(a);
        return !0
    },
    initWithXML: function (a, b) {
        this.height = this.width = 0;
        var c = new cc.TMXMapInfo(a, b),
            d = c.getTilesets();
        (!d || 0 === d.length) && cc.log("cc.TMXTiledMap.initWithXML(): Map not found. Please check the filename.");
        this._buildWithMapInfo(c);
        return !0
    },
    _buildWithMapInfo: function (a) {
        this._mapSize = a.getMapSize();
        this._tileSize = a.getTileSize();
        this.mapOrientation = a.orientation;
        this.objectGroups = a.getObjectGroups();
        this.properties = a.properties;
        this._tileProperties = a.getTileProperties();
        var b = 0,
            c = a.getLayers();
        if (c)
            for (var d = null, f = 0, g = c.length; f < g; f++)
                if ((d = c[f]) && d.visible) d = this._parseLayer(d, a), this.addChild(d, b, b), this.width = Math.max(this.width, d.width), this.height = Math.max(this.height, d.height), b++
    },
    allLayers: function () {
        for (var a = [], b = this._children, c = 0, d = b.length; c < d; c++) {
            var f = b[c];
            f && f instanceof cc.TMXLayer && a.push(f)
        }
        return a
    },
    getLayer: function (a) {
        if (!a || 0 === a.length) throw Error("cc.TMXTiledMap.getLayer(): layerName should be non-null or non-empty string.");
        for (var b = this._children, c = 0; c < b.length; c++) {
            var d = b[c];
            if (d && d.layerName === a) return d
        }
        return null
    },
    getObjectGroup: function (a) {
        if (!a || 0 === a.length) throw Error("cc.TMXTiledMap.getObjectGroup(): groupName should be non-null or non-empty string.");
        if (this.objectGroups)
            for (var b = 0; b < this.objectGroups.length; b++) {
                var c = this.objectGroups[b];
                if (c && c.groupName === a) return c
            }
        return null
    },
    getProperty: function (a) {
        return this.properties[a.toString()]
    },
    propertiesForGID: function (a) {
        cc.log("propertiesForGID is deprecated. Please use getPropertiesForGID instead.");
        return this.getPropertiesForGID[a]
    },
    getPropertiesForGID: function (a) {
        return this._tileProperties[a]
    },
    _parseLayer: function (a, b) {
        var c = this._tilesetForLayer(a, b),
            c = new cc.TMXLayer(c, a, b);
        a.ownTiles = !1;
        return c
    },
    _tilesetForLayer: function (a, b) {
        var c = a._layerSize,
            d = b.getTilesets();
        if (d)
            for (var f = d.length - 1; 0 <= f; f--) {
                var g = d[f];
                if (g)
                    for (var h =
                            0; h < c.height; h++)
                        for (var m = 0; m < c.width; m++) {
                            var n = a._tiles[m + c.width * h];
                            if (0 !== n && (n & cc.TMX_TILE_FLIPPED_MASK) >>> 0 >= g.firstGid) return g
                        }
            }
        cc.log("cocos2d: Warning: TMX Layer " + a.name + " has no tiles");
        return null
    }
});
_p = cc.TMXTiledMap.prototype;
cc.defineGetterSetter(_p, "mapWidth", _p._getMapWidth, _p._setMapWidth);
cc.defineGetterSetter(_p, "mapHeight", _p._getMapHeight, _p._setMapHeight);
cc.defineGetterSetter(_p, "tileWidth", _p._getTileWidth, _p._setTileWidth);
cc.defineGetterSetter(_p, "tileHeight", _p._getTileHeight, _p._setTileHeight);
cc.TMXTiledMap.create = function (a, b) {
    return new cc.TMXTiledMap(a, b)
};
cc.TMX_PROPERTY_NONE = 0;
cc.TMX_PROPERTY_MAP = 1;
cc.TMX_PROPERTY_LAYER = 2;
cc.TMX_PROPERTY_OBJECTGROUP = 3;
cc.TMX_PROPERTY_OBJECT = 4;
cc.TMX_PROPERTY_TILE = 5;
cc.TMX_TILE_HORIZONTAL_FLAG = 2147483648;
cc.TMX_TILE_VERTICAL_FLAG = 1073741824;
cc.TMX_TILE_DIAGONAL_FLAG = 536870912;
cc.TMX_TILE_FLIPPED_ALL = (cc.TMX_TILE_HORIZONTAL_FLAG | cc.TMX_TILE_VERTICAL_FLAG | cc.TMX_TILE_DIAGONAL_FLAG) >>> 0;
cc.TMX_TILE_FLIPPED_MASK = ~cc.TMX_TILE_FLIPPED_ALL >>> 0;
cc.TMXLayerInfo = cc.Class.extend({
    properties: null,
    name: "",
    _layerSize: null,
    _tiles: null,
    visible: null,
    _opacity: null,
    ownTiles: !0,
    _minGID: 1E5,
    _maxGID: 0,
    offset: null,
    ctor: function () {
        this.properties = [];
        this.name = "";
        this._tiles = this._layerSize = null;
        this.visible = !0;
        this._opacity = 0;
        this.ownTiles = !0;
        this._minGID = 1E5;
        this._maxGID = 0;
        this.offset = cc.p(0, 0)
    },
    getProperties: function () {
        return this.properties
    },
    setProperties: function (a) {
        this.properties = a
    }
});
cc.TMXTilesetInfo = cc.Class.extend({
    name: "",
    firstGid: 0,
    _tileSize: null,
    spacing: 0,
    margin: 0,
    sourceImage: "",
    imageSize: null,
    ctor: function () {
        this._tileSize = cc.size(0, 0);
        this.imageSize = cc.size(0, 0)
    },
    rectForGID: function (a, b) {
        var c = b || cc.rect(0, 0, 0, 0);
        c.width = this._tileSize.width;
        c.height = this._tileSize.height;
        a &= cc.TMX_TILE_FLIPPED_MASK;
        a -= parseInt(this.firstGid, 10);
        var d = parseInt((this.imageSize.width - 2 * this.margin + this.spacing) / (this._tileSize.width + this.spacing), 10);
        c.x = parseInt(a % d * (this._tileSize.width +
            this.spacing) + this.margin, 10);
        c.y = parseInt(parseInt(a / d, 10) * (this._tileSize.height + this.spacing) + this.margin, 10);
        return c
    }
});
cc.TMXMapInfo = cc.SAXParser.extend({
    properties: null,
    orientation: null,
    parentElement: null,
    parentGID: null,
    layerAttrs: 0,
    storingCharacters: !1,
    tmxFileName: null,
    currentString: null,
    _objectGroups: null,
    _mapSize: null,
    _tileSize: null,
    _layers: null,
    _tilesets: null,
    _tileProperties: null,
    _resources: "",
    _currentFirstGID: 0,
    ctor: function (a, b) {
        cc.SAXParser.prototype.ctor.apply(this);
        this._mapSize = cc.size(0, 0);
        this._tileSize = cc.size(0, 0);
        this._layers = [];
        this._tilesets = [];
        this._objectGroups = [];
        this.properties = [];
        this._tileProperties = {};
        this._currentFirstGID = 0;
        void 0 !== b ? this.initWithXML(a, b) : void 0 !== a && this.initWithTMXFile(a)
    },
    getOrientation: function () {
        return this.orientation
    },
    setOrientation: function (a) {
        this.orientation = a
    },
    getMapSize: function () {
        return cc.size(this._mapSize.width, this._mapSize.height)
    },
    setMapSize: function (a) {
        this._mapSize.width = a.width;
        this._mapSize.height = a.height
    },
    _getMapWidth: function () {
        return this._mapSize.width
    },
    _setMapWidth: function (a) {
        this._mapSize.width = a
    },
    _getMapHeight: function () {
        return this._mapSize.height
    },
    _setMapHeight: function (a) {
        this._mapSize.height = a
    },
    getTileSize: function () {
        return cc.size(this._tileSize.width, this._tileSize.height)
    },
    setTileSize: function (a) {
        this._tileSize.width = a.width;
        this._tileSize.height = a.height
    },
    _getTileWidth: function () {
        return this._tileSize.width
    },
    _setTileWidth: function (a) {
        this._tileSize.width = a
    },
    _getTileHeight: function () {
        return this._tileSize.height
    },
    _setTileHeight: function (a) {
        this._tileSize.height = a
    },
    getLayers: function () {
        return this._layers
    },
    setLayers: function (a) {
        this._layers.push(a)
    },
    getTilesets: function () {
        return this._tilesets
    },
    setTilesets: function (a) {
        this._tilesets.push(a)
    },
    getObjectGroups: function () {
        return this._objectGroups
    },
    setObjectGroups: function (a) {
        this._objectGroups.push(a)
    },
    getParentElement: function () {
        return this.parentElement
    },
    setParentElement: function (a) {
        this.parentElement = a
    },
    getParentGID: function () {
        return this.parentGID
    },
    setParentGID: function (a) {
        this.parentGID = a
    },
    getLayerAttribs: function () {
        return this.layerAttrs
    },
    setLayerAttribs: function (a) {
        this.layerAttrs = a
    },
    getStoringCharacters: function () {
        return this.storingCharacters
    },
    setStoringCharacters: function (a) {
        this.storingCharacters = a
    },
    getProperties: function () {
        return this.properties
    },
    setProperties: function (a) {
        this.properties = a
    },
    initWithTMXFile: function (a) {
        this._internalInit(a, null);
        return this.parseXMLFile(a)
    },
    initWithXML: function (a, b) {
        this._internalInit(null, b);
        return this.parseXMLString(a)
    },
    parseXMLFile: function (a, b) {
        var c = (b = b || !1) ? a : cc.loader.getRes(a);
        if (!c) throw Error("Please load the resource first : " + a);
        var d, f, c = this._parseXML(c).documentElement;
        d = c.getAttribute("version");
        f = c.getAttribute("orientation");
        if ("map" === c.nodeName && ("1.0" !== d && null !== d && cc.log("cocos2d: TMXFormat: Unsupported TMX version:" + d), "orthogonal" === f ? this.orientation = cc.TMX_ORIENTATION_ORTHO : "isometric" === f ? this.orientation = cc.TMX_ORIENTATION_ISO : "hexagonal" === f ? this.orientation = cc.TMX_ORIENTATION_HEX : null !== f && cc.log("cocos2d: TMXFomat: Unsupported orientation:" + f), d = cc.size(0, 0), d.width = parseFloat(c.getAttribute("width")), d.height = parseFloat(c.getAttribute("height")), this.setMapSize(d), d = cc.size(0,
                0), d.width = parseFloat(c.getAttribute("tilewidth")), d.height = parseFloat(c.getAttribute("tileheight")), this.setTileSize(d), f = c.querySelectorAll("map > properties >  property"))) {
            var g = {};
            for (d = 0; d < f.length; d++) g[f[d].getAttribute("name")] = f[d].getAttribute("value");
            this.properties = g
        }
        g = c.getElementsByTagName("tileset");
        "map" !== c.nodeName && (g = [], g.push(c));
        for (d = 0; d < g.length; d++) {
            f = g[d];
            var h = f.getAttribute("source");
            if (h) f = b ? cc.path.join(this._resources, h) : cc.path.changeBasename(a, h), this.parseXMLFile(f);
            else {
                h = new cc.TMXTilesetInfo;
                h.name = f.getAttribute("name") || "";
                h.firstGid = parseInt(f.getAttribute("firstgid")) || 0;
                h.spacing = parseInt(f.getAttribute("spacing")) || 0;
                h.margin = parseInt(f.getAttribute("margin")) || 0;
                var m = cc.size(0, 0);
                m.width = parseFloat(f.getAttribute("tilewidth"));
                m.height = parseFloat(f.getAttribute("tileheight"));
                h._tileSize = m;
                var m = f.getElementsByTagName("image")[0].getAttribute("source"),
                    n = -1;
                this.tmxFileName && (n = this.tmxFileName.lastIndexOf("/")); - 1 !== n ? (n = this.tmxFileName.substr(0,
                    n + 1), h.sourceImage = n + m) : h.sourceImage = this._resources + (this._resources ? "/" : "") + m;
                this.setTilesets(h);
                if (m = f.getElementsByTagName("tile"))
                    for (n = 0; n < m.length; n++) {
                        f = m[n];
                        this.parentGID = parseInt(h.firstGid) + parseInt(f.getAttribute("id") || 0);
                        var p = f.querySelectorAll("properties > property");
                        if (p) {
                            var u = {};
                            for (f = 0; f < p.length; f++) {
                                var v = p[f].getAttribute("name");
                                u[v] = p[f].getAttribute("value")
                            }
                            this._tileProperties[this.parentGID] = u
                        }
                    }
            }
        }
        if (g = c.getElementsByTagName("layer"))
            for (d = 0; d < g.length; d++) {
                n = g[d];
                p = n.getElementsByTagName("data")[0];
                h = new cc.TMXLayerInfo;
                h.name = n.getAttribute("name");
                f = cc.size(0, 0);
                f.width = parseFloat(n.getAttribute("width"));
                f.height = parseFloat(n.getAttribute("height"));
                h._layerSize = f;
                f = n.getAttribute("visible");
                h.visible = "0" != f;
                f = n.getAttribute("opacity") || 1;
                h._opacity = f ? parseInt(255 * parseFloat(f)) : 255;
                h.offset = cc.p(parseFloat(n.getAttribute("x")) || 0, parseFloat(n.getAttribute("y")) || 0);
                u = "";
                for (f = 0; f < p.childNodes.length; f++) u += p.childNodes[f].nodeValue;
                u = u.trim();
                f = p.getAttribute("compression");
                v = p.getAttribute("encoding");
                if (f && "gzip" !== f && "zlib" !== f) return cc.log("cc.TMXMapInfo.parseXMLFile(): unsupported compression method"), null;
                switch (f) {
                case "gzip":
                    m = cc.unzipBase64AsArray(u, 4);
                    break;
                case "zlib":
                    m = new Zlib.Inflate(cc.Codec.Base64.decodeAsArray(u, 1));
                    m = cc.uint8ArrayToUint32Array(m.decompress());
                    break;
                case null:
                case "":
                    if ("base64" === v) m = cc.Codec.Base64.decodeAsArray(u, 4);
                    else if ("csv" === v) {
                        m = [];
                        f = u.split(",");
                        for (p = 0; p < f.length; p++) m.push(parseInt(f[p]))
                    } else {
                        f = p.getElementsByTagName("tile");
                        m = [];
                        for (p = 0; p < f.length; p++) m.push(parseInt(f[p].getAttribute("gid")))
                    }
                    break;
                default:
                    this.layerAttrs === cc.TMXLayerInfo.ATTRIB_NONE && cc.log("cc.TMXMapInfo.parseXMLFile(): Only base64 and/or gzip/zlib maps are supported")
                }
                m && (h._tiles = new Uint32Array(m));
                if (n = n.querySelectorAll("properties > property")) {
                    p = {};
                    for (f = 0; f < n.length; f++) p[n[f].getAttribute("name")] = n[f].getAttribute("value");
                    h.properties = p
                }
                this.setLayers(h)
            }
        if (m = c.getElementsByTagName("objectgroup"))
            for (d = 0; d < m.length; d++) {
                h = m[d];
                g = new cc.TMXObjectGroup;
                g.groupName = h.getAttribute("name");
                g.setPositionOffset(cc.p(parseFloat(h.getAttribute("x")) * this.getTileSize().width || 0, parseFloat(h.getAttribute("y")) * this.getTileSize().height || 0));
                if (n = h.querySelectorAll("objectgroup > properties > property"))
                    for (f = 0; f < n.length; f++) p = {}, p[n[f].getAttribute("name")] = n[f].getAttribute("value"), g.properties = p;
                h = h.querySelectorAll("object");
                n = cc.director.getContentScaleFactor();
                if (h)
                    for (f = 0; f < h.length; f++) {
                        u = h[f];
                        p = {};
                        p.name = u.getAttribute("name") || "";
                        p.type =
                            u.getAttribute("type") || "";
                        p.width = parseInt(u.getAttribute("width")) || 0;
                        p.height = parseInt(u.getAttribute("height")) || 0;
                        p.x = (((u.getAttribute("x") || 0) | 0) + g.getPositionOffset().x) / n;
                        v = ((u.getAttribute("y") || 0) | 0) + g.getPositionOffset().y / n;
                        p.y = (parseInt(this.getMapSize().height * this.getTileSize().height) - v - p.height) / cc.director.getContentScaleFactor();
                        p.rotation = parseInt(u.getAttribute("rotation")) || 0;
                        if (v = u.querySelectorAll("properties > property"))
                            for (var x = 0; x < v.length; x++) p[v[x].getAttribute("name")] =
                                v[x].getAttribute("value");
                        if ((v = u.querySelectorAll("polygon")) && 0 < v.length)(v = v[0].getAttribute("points")) && (p.points = this._parsePointsString(v));
                        if ((u = u.querySelectorAll("polyline")) && 0 < u.length)(u = u[0].getAttribute("points")) && (p.polylinePoints = this._parsePointsString(u));
                        g.setObjects(p)
                    }
                this.setObjectGroups(g)
            }
        return c
    },
    _parsePointsString: function (a) {
        if (!a) return null;
        var b = [];
        a = a.split(" ");
        for (var c = 0; c < a.length; c++) {
            var d = a[c].split(",");
            b.push({
                x: d[0],
                y: d[1]
            })
        }
        return b
    },
    parseXMLString: function (a) {
        return this.parseXMLFile(a,
            !0)
    },
    getTileProperties: function () {
        return this._tileProperties
    },
    setTileProperties: function (a) {
        this._tileProperties.push(a)
    },
    getCurrentString: function () {
        return this.currentString
    },
    setCurrentString: function (a) {
        this.currentString = a
    },
    getTMXFileName: function () {
        return this.tmxFileName
    },
    setTMXFileName: function (a) {
        this.tmxFileName = a
    },
    _internalInit: function (a, b) {
        this._tilesets.length = 0;
        this._layers.length = 0;
        this.tmxFileName = a;
        b && (this._resources = b);
        this._objectGroups.length = 0;
        this.properties.length = 0;
        this._tileProperties.length =
            0;
        this.currentString = "";
        this.storingCharacters = !1;
        this.layerAttrs = cc.TMXLayerInfo.ATTRIB_NONE;
        this.parentElement = cc.TMX_PROPERTY_NONE;
        this._currentFirstGID = 0
    }
});
_p = cc.TMXMapInfo.prototype;
cc.defineGetterSetter(_p, "mapWidth", _p._getMapWidth, _p._setMapWidth);
cc.defineGetterSetter(_p, "mapHeight", _p._getMapHeight, _p._setMapHeight);
cc.defineGetterSetter(_p, "tileWidth", _p._getTileWidth, _p._setTileWidth);
cc.defineGetterSetter(_p, "tileHeight", _p._getTileHeight, _p._setTileHeight);
cc.TMXMapInfo.create = function (a, b) {
    return new cc.TMXMapInfo(a, b)
};
cc.loader.register(["tmx", "tsx"], cc._txtLoader);
cc.TMXLayerInfo.ATTRIB_NONE = 1;
cc.TMXLayerInfo.ATTRIB_BASE64 = 2;
cc.TMXLayerInfo.ATTRIB_GZIP = 4;
cc.TMXLayerInfo.ATTRIB_ZLIB = 8;
cc.TMXObjectGroup = cc.Class.extend({
    properties: null,
    groupName: "",
    _positionOffset: null,
    _objects: null,
    ctor: function () {
        this.groupName = "";
        this._positionOffset = cc.p(0, 0);
        this.properties = [];
        this._objects = []
    },
    getPositionOffset: function () {
        return cc.p(this._positionOffset)
    },
    setPositionOffset: function (a) {
        this._positionOffset.x = a.x;
        this._positionOffset.y = a.y
    },
    getProperties: function () {
        return this.properties
    },
    setProperties: function (a) {
        this.properties.push(a)
    },
    getGroupName: function () {
        return this.groupName.toString()
    },
    setGroupName: function (a) {
        this.groupName = a
    },
    propertyNamed: function (a) {
        return this.properties[a]
    },
    objectNamed: function (a) {
        return this.getObject(a)
    },
    getObject: function (a) {
        if (this._objects && 0 < this._objects.length)
            for (var b = this._objects, c = 0, d = b.length; c < d; c++) {
                var f = b[c].name;
                if (f && f === a) return b[c]
            }
        return null
    },
    getObjects: function () {
        return this._objects
    },
    setObjects: function (a) {
        this._objects.push(a)
    }
});
cc.TMXLayer = cc.SpriteBatchNode.extend({
    tiles: null,
    tileset: null,
    layerOrientation: null,
    properties: null,
    layerName: "",
    _textures: null,
    _texGrids: null,
    _spriteTiles: null,
    _layerSize: null,
    _mapTileSize: null,
    _opacity: 255,
    _minGID: null,
    _maxGID: null,
    _vertexZvalue: null,
    _useAutomaticVertexZ: null,
    _reusedTile: null,
    _atlasIndexArray: null,
    _contentScaleFactor: null,
    _className: "TMXLayer",
    ctor: function (a, b, c) {
        cc.SpriteBatchNode.prototype.ctor.call(this);
        this._descendants = [];
        this._layerSize = cc.size(0, 0);
        this._mapTileSize = cc.size(0,
            0);
        this._spriteTiles = {};
        void 0 !== c && this.initWithTilesetInfo(a, b, c)
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new cc.TMXLayer.CanvasRenderCmd(this) : new cc.TMXLayer.WebGLRenderCmd(this)
    },
    _fillTextureGrids: function (a, b) {
        var c = this._textures[b];
        if (c.isLoaded()) {
            if (!a.imageSize.width || !a.imageSize.height) a.imageSize.width = c.width, a.imageSize.height = c.height;
            for (var d = a._tileSize.width, f = a._tileSize.height, g = c._contentSize.width, c = c._contentSize.height, h = a.spacing,
                    m = a.margin, n = a.firstGid, h = a.firstGid + Math.floor((c - 2 * m + h) / (f + h)) * Math.floor((g - 2 * m + h) / (d + h)), m = this._texGrids, p = null, u = m[n] ? !0 : !1; n < h; ++n) {
                u && !m[n] && (u = !1);
                if (!u && m[n]) break;
                p = {
                    texId: b,
                    x: 0,
                    y: 0,
                    width: d,
                    height: f,
                    t: 0,
                    l: 0,
                    r: 0,
                    b: 0
                };
                a.rectForGID(n, p);
                p.t = p.y / c;
                p.l = p.x / g;
                p.r = (p.x + p.width) / g;
                p.b = (p.y + p.height) / c;
                m[n] = p
            }
        } else c.addEventListener("load", function () {
            this._fillTextureGrids(a, b)
        }, this)
    },
    initWithTilesetInfo: function (a, b, c) {
        var d = b._layerSize;
        parseInt(d.width * d.height);
        this.layerName = b.name;
        this.tiles =
            b._tiles;
        this.properties = b.properties;
        this._layerSize = d;
        this._minGID = b._minGID;
        this._maxGID = b._maxGID;
        this._opacity = b._opacity;
        this.tileset = a;
        this.layerOrientation = c.orientation;
        this._mapTileSize = c.getTileSize();
        if (c = c._tilesets) {
            this._textures = [];
            this._texGrids = [];
            for (var f = c.length, g, h, d = 0; d < f; ++d) g = c[d], h = cc.textureCache.addImage(g.sourceImage), this._textures.push(h), this._fillTextureGrids(g, d), g === a && (this._texture = h)
        }
        a = this._calculateLayerOffset(b.offset);
        this.setPosition(cc.pointPixelsToPoints(a));
        this._parseInternalProperties();
        this.setContentSize(cc.sizePixelsToPoints(cc.size(this._layerSize.width * this._mapTileSize.width, this._layerSize.height * this._mapTileSize.height)));
        this._useAutomaticVertexZ = !1;
        this._vertexZvalue = 0;
        return !0
    },
    getLayerSize: function () {
        return cc.size(this._layerSize.width, this._layerSize.height)
    },
    setLayerSize: function (a) {
        this._layerSize.width = a.width;
        this._layerSize.height = a.height
    },
    _getLayerWidth: function () {
        return this._layerSize.width
    },
    _setLayerWidth: function (a) {
        this._layerSize.width =
            a
    },
    _getLayerHeight: function () {
        return this._layerSize.height
    },
    _setLayerHeight: function (a) {
        this._layerSize.height = a
    },
    getMapTileSize: function () {
        return cc.size(this._mapTileSize.width, this._mapTileSize.height)
    },
    setMapTileSize: function (a) {
        this._mapTileSize.width = a.width;
        this._mapTileSize.height = a.height
    },
    _getTileWidth: function () {
        return this._mapTileSize.width
    },
    _setTileWidth: function (a) {
        this._mapTileSize.width = a
    },
    _getTileHeight: function () {
        return this._mapTileSize.height
    },
    _setTileHeight: function (a) {
        this._mapTileSize.height =
            a
    },
    getTiles: function () {
        return this.tiles
    },
    setTiles: function (a) {
        this.tiles = a
    },
    getTileset: function () {
        return this.tileset
    },
    setTileset: function (a) {
        this.tileset = a
    },
    getLayerOrientation: function () {
        return this.layerOrientation
    },
    setLayerOrientation: function (a) {
        this.layerOrientation = a
    },
    getProperties: function () {
        return this.properties
    },
    setProperties: function (a) {
        this.properties = a
    },
    getProperty: function (a) {
        return this.properties[a]
    },
    getLayerName: function () {
        return this.layerName
    },
    setLayerName: function (a) {
        this.layerName =
            a
    },
    releaseMap: function () {
        this._spriteTiles = {}
    },
    getTileAt: function (a, b) {
        if (void 0 === a) throw Error("cc.TMXLayer.getTileAt(): pos should be non-null");
        var c = a;
        void 0 === b && (c = a.x, b = a.y);
        if (c >= this._layerSize.width || b >= this._layerSize.height || 0 > c || 0 > b) throw Error("cc.TMXLayer.getTileAt(): invalid position");
        if (!this.tiles) return cc.log("cc.TMXLayer.getTileAt(): TMXLayer: the tiles map has been released"), null;
        var d = null,
            f = this.getTileGIDAt(c, b);
        if (0 === f) return d;
        var g = 0 | c + b * this._layerSize.width,
            d = this._spriteTiles[g];
        d || (d = this._texGrids[f], f = this._textures[d.texId], d = cc.rectPixelsToPoints(d), d = new cc.Sprite(f, d), d.setPosition(this.getPositionAt(c, b)), c = this._vertexZForPos(c, b), d.setVertexZ(c), d.setAnchorPoint(0, 0), d.setOpacity(this._opacity), this.addChild(d, c, g));
        return d
    },
    getTileGIDAt: function (a, b) {
        if (void 0 === a) throw Error("cc.TMXLayer.getTileGIDAt(): pos should be non-null");
        var c = a;
        void 0 === b && (c = a.x, b = a.y);
        if (c >= this._layerSize.width || b >= this._layerSize.height || 0 > c || 0 > b) throw Error("cc.TMXLayer.getTileGIDAt(): invalid position");
        return !this.tiles ? (cc.log("cc.TMXLayer.getTileGIDAt(): TMXLayer: the tiles map has been released"), null) : (this.tiles[0 | c + b * this._layerSize.width] & cc.TMX_TILE_FLIPPED_MASK) >>> 0
    },
    setTileGID: function (a, b, c, d) {
        if (void 0 === b) throw Error("cc.TMXLayer.setTileGID(): pos should be non-null");
        void 0 !== d ? b = cc.p(b, c) : d = c;
        if (b.x >= this._layerSize.width || b.y >= this._layerSize.height || 0 > b.x || 0 > b.y) throw Error("cc.TMXLayer.setTileGID(): invalid position");
        if (this.tiles)
            if (0 !== a && a < this.tileset.firstGid) cc.log("cc.TMXLayer.setTileGID(): invalid gid:" +
                a);
            else {
                d = d || 0;
                c = this.getTileFlagsAt(b);
                var f = this.getTileGIDAt(b);
                if (f !== a || c !== d)
                    if (c = (a | d) >>> 0, 0 === a) this.removeTileAt(b);
                    else if (0 === f) this._updateTileForGID(c, b);
                else {
                    var f = b.x + b.y * this._layerSize.width,
                        g = this.getChildByTag(f);
                    if (g) {
                        a = this._texGrids[a];
                        var h = this._textures[a.texId];
                        a = cc.rectPixelsToPoints(a);
                        g.setTexture(h);
                        g.setTextureRect(a, !1);
                        null != d && this._setupTileSprite(g, b, c);
                        this.tiles[f] = c
                    } else this._updateTileForGID(c, b)
                }
            }
        else cc.log("cc.TMXLayer.setTileGID(): TMXLayer: the tiles map has been released")
    },
    addChild: function (a, b, c) {
        cc.Node.prototype.addChild.call(this, a, b, c);
        void 0 !== c && (this._spriteTiles[c] = a, a._vertexZ = this._vertexZ + cc.renderer.assignedZStep * c / this.tiles.length)
    },
    removeChild: function (a, b) {
        this._spriteTiles[a.tag] && (this._spriteTiles[a.tag] = null);
        cc.Node.prototype.removeChild.call(this, a, b)
    },
    getTileFlagsAt: function (a, b) {
        if (!a) throw Error("cc.TMXLayer.getTileFlagsAt(): pos should be non-null");
        void 0 !== b && (a = cc.p(a, b));
        if (a.x >= this._layerSize.width || a.y >= this._layerSize.height || 0 > a.x ||
            0 > a.y) throw Error("cc.TMXLayer.getTileFlagsAt(): invalid position");
        return !this.tiles ? (cc.log("cc.TMXLayer.getTileFlagsAt(): TMXLayer: the tiles map has been released"), null) : (this.tiles[0 | a.x + a.y * this._layerSize.width] & cc.TMX_TILE_FLIPPED_ALL) >>> 0
    },
    removeTileAt: function (a, b) {
        if (!a) throw Error("cc.TMXLayer.removeTileAt(): pos should be non-null");
        void 0 !== b && (a = cc.p(a, b));
        if (a.x >= this._layerSize.width || a.y >= this._layerSize.height || 0 > a.x || 0 > a.y) throw Error("cc.TMXLayer.removeTileAt(): invalid position");
        if (this.tiles) {
            if (0 !== this.getTileGIDAt(a)) {
                var c = 0 | a.x + a.y * this._layerSize.width;
                this.tiles[c] = 0;
                (c = this._spriteTiles[c]) && this.removeChild(c, !0)
            }
        } else cc.log("cc.TMXLayer.removeTileAt(): TMXLayer: the tiles map has been released")
    },
    getPositionAt: function (a, b) {
        void 0 !== b && (a = cc.p(a, b));
        var c = cc.p(0, 0);
        switch (this.layerOrientation) {
        case cc.TMX_ORIENTATION_ORTHO:
            c = this._positionForOrthoAt(a);
            break;
        case cc.TMX_ORIENTATION_ISO:
            c = this._positionForIsoAt(a);
            break;
        case cc.TMX_ORIENTATION_HEX:
            c = this._positionForHexAt(a)
        }
        return cc.pointPixelsToPoints(c)
    },
    _positionForIsoAt: function (a) {
        return cc.p(this._mapTileSize.width / 2 * (this._layerSize.width + a.x - a.y - 1), this._mapTileSize.height / 2 * (2 * this._layerSize.height - a.x - a.y - 2))
    },
    _positionForOrthoAt: function (a) {
        return cc.p(a.x * this._mapTileSize.width, (this._layerSize.height - a.y - 1) * this._mapTileSize.height)
    },
    _positionForHexAt: function (a) {
        return cc.p(3 * a.x * this._mapTileSize.width / 4, (this._layerSize.height - a.y - 1) * this._mapTileSize.height + (1 === a.x % 2 ? -this._mapTileSize.height / 2 : 0))
    },
    _calculateLayerOffset: function (a) {
        var b =
            cc.p(0, 0);
        switch (this.layerOrientation) {
        case cc.TMX_ORIENTATION_ORTHO:
            b = cc.p(a.x * this._mapTileSize.width, -a.y * this._mapTileSize.height);
            break;
        case cc.TMX_ORIENTATION_ISO:
            b = cc.p(this._mapTileSize.width / 2 * (a.x - a.y), this._mapTileSize.height / 2 * (-a.x - a.y));
            break;
        case cc.TMX_ORIENTATION_HEX:
            (0 !== a.x || 0 !== a.y) && cc.log("offset for hexagonal map not implemented yet")
        }
        return b
    },
    _updateTileForGID: function (a, b) {
        if (this._texGrids[a]) {
            var c = 0 | b.x + b.y * this._layerSize.width;
            c < this.tiles.length && (this.tiles[c] = a)
        }
    },
    _parseInternalProperties: function () {
        var a = this.getProperty("cc_vertexz");
        if (a)
            if ("automatic" === a) {
                this._useAutomaticVertexZ = !0;
                var a = this.getProperty("cc_alpha_func"),
                    b = 0;
                a && (b = parseFloat(a));
                cc._renderType === cc.game.RENDER_TYPE_WEBGL && (this.shaderProgram = cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST), this.shaderProgram.use(), this.shaderProgram.setUniformLocationWith1f(cc.UNIFORM_ALPHA_TEST_VALUE_S, b))
            } else this._vertexZvalue = parseInt(a, 10)
    },
    _setupTileSprite: function (a,
        b, c) {
        var d = this.getPositionAt(b);
        a.setPosition(d);
        a.setVertexZ(this._vertexZForPos(b));
        a.setAnchorPoint(0, 0);
        a.setOpacity(this._opacity);
        a.setFlippedX(!1);
        a.setFlippedY(!1);
        a.setRotation(0);
        (c & cc.TMX_TILE_DIAGONAL_FLAG) >>> 0 ? (a.setAnchorPoint(0.5, 0.5), a.setPosition(d.x + a.width / 2, d.y + a.height / 2), b = (c & (cc.TMX_TILE_HORIZONTAL_FLAG | cc.TMX_TILE_VERTICAL_FLAG) >>> 0) >>> 0, b === cc.TMX_TILE_HORIZONTAL_FLAG ? a.setRotation(90) : b === cc.TMX_TILE_VERTICAL_FLAG ? a.setRotation(270) : (b === (cc.TMX_TILE_VERTICAL_FLAG | cc.TMX_TILE_HORIZONTAL_FLAG) >>>
            0 ? a.setRotation(90) : a.setRotation(270), a.setFlippedX(!0))) : ((c & cc.TMX_TILE_HORIZONTAL_FLAG) >>> 0 && a.setFlippedX(!0), (c & cc.TMX_TILE_VERTICAL_FLAG) >>> 0 && a.setFlippedY(!0))
    },
    _vertexZForPos: function (a, b) {
        void 0 === b && (b = a.y, a = a.x);
        var c = 0,
            d = 0;
        if (this._useAutomaticVertexZ) switch (this.layerOrientation) {
        case cc.TMX_ORIENTATION_ISO:
            d = this._layerSize.width + this._layerSize.height;
            c = -(d - (a + b));
            break;
        case cc.TMX_ORIENTATION_ORTHO:
            c = -(this._layerSize.height - b);
            break;
        case cc.TMX_ORIENTATION_HEX:
            cc.log("TMX Hexa zOrder not supported");
            break;
        default:
            cc.log("TMX invalid value")
        } else c = this._vertexZvalue;
        return c
    }
});
_p = cc.TMXLayer.prototype;
cc.defineGetterSetter(_p, "layerWidth", _p._getLayerWidth, _p._setLayerWidth);
cc.defineGetterSetter(_p, "layerHeight", _p._getLayerHeight, _p._setLayerHeight);
cc.defineGetterSetter(_p, "tileWidth", _p._getTileWidth, _p._setTileWidth);
cc.defineGetterSetter(_p, "tileHeight", _p._getTileHeight, _p._setTileHeight);
cc.TMXLayer.create = function (a, b, c) {
    return new cc.TMXLayer(a, b, c)
};
(function () {
    cc.TMXLayer.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !0
    };
    var a = cc.TMXLayer.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    a.constructor = cc.TMXLayer.CanvasRenderCmd;
    a.visit = function (a) {
        var c = this._node,
            d = cc.renderer;
        if (a = a || this.getParentRenderCmd()) this._curLevel = a._curLevel + 1;
        if (c._visible) {
            isNaN(c._customZ) && (c._vertexZ = d.assignedZ, d.assignedZ += d.assignedZStep);
            this._syncStatus(a);
            a = c._children;
            var f = c._spriteTiles,
                g, h = a.length;
            if (0 < h) {
                c.sortAllChildren();
                for (g = 0; g < h; g++)
                    if (c = a[g], 0 > c._localZOrder) c._renderCmd.visit(this);
                    else break;
                for (d.pushRenderCommand(this); g < h; g++) c = a[g], 0 === c._localZOrder && f[c.tag] ? (isNaN(c._customZ) && (c._vertexZ = d.assignedZ, d.assignedZ += d.assignedZStep), c._renderCmd.updateStatus()) : c._renderCmd.visit(this)
            } else d.pushRenderCommand(this);
            this._dirtyFlag = 0
        }
    };
    a.rendering = function (a, c, d) {
        var f = this._node,
            g = f._rotationX || f._rotationY,
            h = f.layerOrientation,
            m = f._opacity / 255;
        if (f.tiles && !(0 >= m)) {
            var n = f._mapTileSize.width,
                p = f._mapTileSize.height,
                u = f.tileset._tileSize.width / cc.director._contentScaleFactor,
                v = f.tileset._tileSize.height / cc.director._contentScaleFactor,
                x = u - n,
                y = v - p,
                z = cc.winSize.width,
                t = cc.winSize.height,
                A = f._layerSize.height,
                w = f._layerSize.width,
                B = f._texGrids,
                F = f._spriteTiles,
                C = this._worldTransform,
                D = -f._contentSize.width * f._anchorPoint.x,
                E = -f._contentSize.height * f._anchorPoint.y,
                G = C.a,
                H = C.d,
                M = D * G + E * C.c + C.tx,
                D = D * C.b + E * H + C.ty,
                E = a || cc._renderContext,
                K = E.getContext(),
                N = 0,
                U = 0,
                T = w,
                P = A;
            !g && h === cc.TMX_ORIENTATION_ORTHO && (N = Math.floor(-(M -
                x * G) / (n * G)), U = Math.floor((D - y * H + p * A * H - t) / (p * H)), T = Math.ceil((z - M + x * G) / (n * G)), P = A - Math.floor(-(D + y * H) / (p * H)), 0 > N && (N = 0), 0 > U && (U = 0), T > w && (T = w), P > A && (P = A));
            var S, I, x = U * w,
                J, W, $, O = cc.TMX_TILE_FLIPPED_MASK,
                Z, V, L, Y, X = u * G,
                aa = v * H,
                da, ta, ja = !1,
                ha = !1,
                y = x + N;
            for (S in F)
                if (S < y && F[S]) J = F[S]._renderCmd, 0 === F[S]._localZOrder && J.rendering && J.rendering(a, c, d);
                else if (S >= y) break;
            E.setTransform(C, c, d);
            for (E.setGlobalAlpha(m); U < P; ++U) {
                for (I = N; I < T; ++I)
                    if (y = x + I, F[y]) J = F[y]._renderCmd, 0 === F[y]._localZOrder && J.rendering && (J.rendering(a,
                        c, d), E.setTransform(C, c, d), E.setGlobalAlpha(m));
                    else if (J = f.tiles[y], W = B[(J & O) >>> 0])
                    if (($ = f._textures[W.texId]) && $._htmlElementObj) {
                        switch (h) {
                        case cc.TMX_ORIENTATION_ORTHO:
                            V = I * n;
                            L = -(A - U - 1) * p;
                            break;
                        case cc.TMX_ORIENTATION_ISO:
                            V = n / 2 * (w + I - U - 1);
                            L = -p / 2 * (2 * A - I - U - 2);
                            break;
                        case cc.TMX_ORIENTATION_HEX:
                            V = 3 * I * n / 4, L = -(A - U - 1) * p + (1 === I % 2 ? -p / 2 : 0)
                        }
                        Y = V + u;
                        Z = L - v;
                        if (!g && h === cc.TMX_ORIENTATION_ISO) {
                            da = -D + L * H;
                            if (da < -t - aa) {
                                I += Math.floor(2 * (-t - da) / aa) - 1;
                                continue
                            }
                            da = M + Y * G;
                            if (da < -X) {
                                I += Math.floor(2 * -da / X) - 1;
                                continue
                            }
                            ta = M +
                                V * G;
                            da = -D + Z * H;
                            if (ta > z || 0 < da) {
                                I = T;
                                continue
                            }
                        }
                        J > cc.TMX_TILE_DIAGONAL_FLAG && (ja = (J & cc.TMX_TILE_HORIZONTAL_FLAG) >>> 0, ha = (J & cc.TMX_TILE_VERTICAL_FLAG) >>> 0);
                        ja && (V = -Y, K.scale(-1, 1));
                        ha && (Z = -L, K.scale(1, -1));
                        K.drawImage($._htmlElementObj, W.x, W.y, W.width, W.height, V, Z, u, v);
                        ja && K.scale(-1, 1);
                        ha && K.scale(1, -1);
                        cc.g_NumberOfDraws++
                    } x += w
            }
            for (S in F) S > y && F[S] && (J = F[S]._renderCmd, 0 === F[S]._localZOrder && J.rendering && J.rendering(a, c, d))
        }
    }
})();
(function () {
    cc.TMXLayer.WebGLRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !0;
        this._vertices = [{
            x: 0,
            y: 0
        }, {
            x: 0,
            y: 0
        }, {
            x: 0,
            y: 0
        }, {
            x: 0,
            y: 0
        }];
        this._color = new Uint32Array(1);
        this._shaderProgram = cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST);
        a = 90 * Math.PI / 180;
        this._sin90 = Math.sin(a);
        this._cos90 = Math.cos(a);
        a *= 3;
        this._sin270 = Math.sin(a);
        this._cos270 = Math.cos(a)
    };
    var a = cc.TMXLayer.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
    a.constructor = cc.TMXLayer.WebGLRenderCmd;
    a.uploadData = function (a, c, d) {
        var f = this._node,
            g = f._rotationX || f._rotationY,
            h = f.layerOrientation,
            m = f.tiles;
        if (!m) return 0;
        var n = f._mapTileSize.width,
            p = f._mapTileSize.height,
            u = f.tileset._tileSize.width / cc.director._contentScaleFactor,
            v = f.tileset._tileSize.height / cc.director._contentScaleFactor,
            x = u - n,
            y = v - p,
            z = cc.winSize.width,
            t = cc.winSize.height,
            A = f._layerSize.height,
            w = f._layerSize.width,
            B = f._texGrids,
            F = f._spriteTiles,
            C = this._worldTransform,
            D = C.a,
            E = C.b,
            G = C.c,
            H = C.d,
            M = C.tx,
            C = C.ty,
            K = -f._contentSize.width *
            f._anchorPoint.x,
            N = -f._contentSize.height * f._anchorPoint.y,
            U = K * D + N * G + M,
            K = K * E + N * H + C,
            N = f._opacity,
            T = this._displayedColor.r,
            P = this._displayedColor.g,
            S = this._displayedColor.b;
        if (f._opacityModifyRGB) var I = N / 255,
            T = T * I,
            P = P * I,
            S = S * I;
        this._color[0] = N << 24 | S << 16 | P << 8 | T;
        var J = N = 0,
            T = w,
            P = A;
        !g && h === cc.TMX_ORIENTATION_ORTHO && (N = Math.floor(-(U - x * D) / (n * D)), J = Math.floor((K - y * H + p * A * H - t) / (p * H)), T = Math.ceil((z - U + x * D) / (n * D)), P = A - Math.floor(-(K + y * H) / (p * H)), 0 > N && (N = 0), 0 > J && (J = 0), T > w && (T = w), P > A && (P = A));
        for (var W, x = d, y = J * w,
                $, O, Z, S = cc.TMX_TILE_FLIPPED_MASK, V, L, Y, X, I = u * D, aa = v * H, da, ta, ja = D, ha = E, sa = G, la = H, ua = M, na = C, pa = !1, qa = !1, ca = !1, va = this._vertices; J < P; ++J) {
            for (W = N; W < T; ++W)
                if (x + 24 > a.length && (cc.renderer._increaseBatchingSize((x - d) / 6), cc.renderer._batchRendering(), x = d = 0), $ = y + W, !F[$] && (O = f.tiles[$], Z = B[(O & S) >>> 0])) {
                    switch (h) {
                    case cc.TMX_ORIENTATION_ORTHO:
                        L = W * n;
                        Y = (A - J - 1) * p;
                        $ = f._vertexZ + cc.renderer.assignedZStep * $ / m.length;
                        break;
                    case cc.TMX_ORIENTATION_ISO:
                        L = n / 2 * (w + W - J - 1);
                        Y = p / 2 * (2 * A - W - J - 2);
                        $ = f._vertexZ + cc.renderer.assignedZStep *
                            (f.height - Y) / f.height;
                        break;
                    case cc.TMX_ORIENTATION_HEX:
                        L = 3 * W * n / 4, Y = (A - J - 1) * p + (1 === W % 2 ? -p / 2 : 0), $ = f._vertexZ + cc.renderer.assignedZStep * (f.height - Y) / f.height
                    }
                    X = L + u;
                    V = Y + v;
                    if (!g && h === cc.TMX_ORIENTATION_ISO) {
                        da = K + Y * H;
                        if (da > t + aa) {
                            W += Math.floor(2 * (da - t) / aa) - 1;
                            continue
                        }
                        da = U + X * D;
                        if (da < -I) {
                            W += Math.floor(2 * -da / I) - 1;
                            continue
                        }
                        ta = U + L * D;
                        da = K + V * H;
                        if (ta > z || 0 > da) {
                            W = T;
                            continue
                        }
                    }
                    O > cc.TMX_TILE_DIAGONAL_FLAG && (pa = !0, qa = (O & cc.TMX_TILE_HORIZONTAL_FLAG) >>> 0, ca = (O & cc.TMX_TILE_VERTICAL_FLAG) >>> 0);
                    va[0].x = L * ja + V * sa + ua;
                    va[0].y =
                        L * ha + V * la + na;
                    va[1].x = L * ja + Y * sa + ua;
                    va[1].y = L * ha + Y * la + na;
                    va[2].x = X * ja + V * sa + ua;
                    va[2].y = X * ha + V * la + na;
                    va[3].x = X * ja + Y * sa + ua;
                    va[3].y = X * ha + Y * la + na;
                    for (O = 0; 4 > O; ++O) {
                        a[x] = va[O].x;
                        a[x + 1] = va[O].y;
                        a[x + 2] = $;
                        c[x + 3] = this._color[0];
                        switch (O) {
                        case 0:
                            a[x + 4] = qa ? Z.r : Z.l;
                            a[x + 5] = ca ? Z.b : Z.t;
                            break;
                        case 1:
                            a[x + 4] = qa ? Z.r : Z.l;
                            a[x + 5] = ca ? Z.t : Z.b;
                            break;
                        case 2:
                            a[x + 4] = qa ? Z.l : Z.r;
                            a[x + 5] = ca ? Z.b : Z.t;
                            break;
                        case 3:
                            a[x + 4] = qa ? Z.l : Z.r, a[x + 5] = ca ? Z.t : Z.b
                        }
                        x += 6
                    }
                    pa && (ja = D, ha = E, sa = G, la = H, ua = M, na = C, pa = ca = qa = !1)
                } y += w
        }
        return (x - d) / 6
    }
})();
cc.PointObject = cc.Class.extend({
    _ratio: null,
    _offset: null,
    _child: null,
    ctor: function (a, b) {
        this.initWithCCPoint(a, b)
    },
    getRatio: function () {
        return this._ratio
    },
    setRatio: function (a) {
        this._ratio = a
    },
    getOffset: function () {
        return this._offset
    },
    setOffset: function (a) {
        this._offset = a
    },
    getChild: function () {
        return this._child
    },
    setChild: function (a) {
        this._child = a
    },
    initWithCCPoint: function (a, b) {
        this._ratio = a;
        this._offset = b;
        this._child = null;
        return !0
    }
});
cc.PointObject.create = function (a, b) {
    return new cc.PointObject(a, b)
};
cc.ParallaxNode = cc.Node.extend({
    parallaxArray: null,
    _lastPosition: null,
    _className: "ParallaxNode",
    getParallaxArray: function () {
        return this.parallaxArray
    },
    setParallaxArray: function (a) {
        this.parallaxArray = a
    },
    ctor: function () {
        cc.Node.prototype.ctor.call(this);
        this.parallaxArray = [];
        this._lastPosition = cc.p(-100, -100)
    },
    addChild: function (a, b, c, d) {
        if (3 === arguments.length) cc.log("ParallaxNode: use addChild(child, z, ratio, offset) instead");
        else {
            if (!a) throw Error("cc.ParallaxNode.addChild(): child should be non-null");
            var f = new cc.PointObject(c, d);
            f.setChild(a);
            this.parallaxArray.push(f);
            a.setPosition(this._position.x * c.x + d.x, this._position.y * c.y + d.y);
            cc.Node.prototype.addChild.call(this, a, b, a.tag)
        }
    },
    removeChild: function (a, b) {
        for (var c = this.parallaxArray, d = 0; d < c.length; d++)
            if (c[d].getChild() === a) {
                c.splice(d, 1);
                break
            } cc.Node.prototype.removeChild.call(this, a, b)
    },
    removeAllChildren: function (a) {
        this.parallaxArray.length = 0;
        cc.Node.prototype.removeAllChildren.call(this, a)
    },
    _updateParallaxPosition: function () {
        var a = this._absolutePosition();
        if (!cc.pointEqualToPoint(a, this._lastPosition)) {
            for (var b = this.parallaxArray, c = 0, d = b.length; c < d; c++) {
                var f = b[c];
                f.getChild().setPosition(-a.x + a.x * f.getRatio().x + f.getOffset().x, -a.y + a.y * f.getRatio().y + f.getOffset().y)
            }
            this._lastPosition = a
        }
    },
    _absolutePosition: function () {
        for (var a = this._position, b = this; null !== b.parent;) b = b.parent, a = cc.pAdd(a, b.getPosition());
        return a
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new cc.ParallaxNode.CanvasRenderCmd(this) : new cc.ParallaxNode.WebGLRenderCmd(this)
    }
});
cc.ParallaxNode.create = function () {
    return new cc.ParallaxNode
};
(function () {
    cc.ParallaxNode.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !1
    };
    var a = cc.ParallaxNode.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    a.constructor = cc.ParallaxNode.CanvasRenderCmd;
    a.updateStatus = function () {
        this._node._updateParallaxPosition();
        this.originUpdateStatus()
    };
    a._syncStatus = function (a) {
        this._node._updateParallaxPosition();
        this._originSyncStatus(a)
    }
})();
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
    if (cc._renderType === cc.game.RENDER_TYPE_WEBGL) {
        cc.ParallaxNode.WebGLRenderCmd = function (a) {
            this._rootCtor(a);
            this._needDraw = !1
        };
        var a = cc.ParallaxNode.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
        a.constructor = cc.ParallaxNode.WebGLRenderCmd;
        a.updateStatus = function () {
            this._node._updateParallaxPosition();
            this.originUpdateStatus()
        };
        a._syncStatus = function (a) {
            this._node._updateParallaxPosition();
            this._originSyncStatus(a)
        }
    }
});
(function () {
    var a = cc.sys,
        b = {
            ONLY_ONE: !1,
            WEB_AUDIO: !(!window.AudioContext && !window.webkitAudioContext && !window.mozAudioContext),
            DELAY_CREATE_CTX: !1,
            ONE_SOURCE: !1
        };
    a.browserType === a.BROWSER_TYPE_FIREFOX && (b.DELAY_CREATE_CTX = !0, b.USE_LOADER_EVENT = "canplay");
    a.os === a.OS_IOS && (b.USE_LOADER_EVENT = "loadedmetadata");
    a.os === a.OS_ANDROID && a.browserType === a.BROWSER_TYPE_UC && (b.ONE_SOURCE = !0);
    window.__audioSupport = b
})();
cc.Audio = cc.Class.extend({
    interruptPlay: !1,
    src: null,
    _element: null,
    _AUDIO_TYPE: "AUDIO",
    ctor: function (a) {
        this.src = a
    },
    setBuffer: function (a) {
        this._AUDIO_TYPE = "WEBAUDIO";
        this._element = new cc.Audio.WebAudio(a)
    },
    setElement: function (a) {
        this._AUDIO_TYPE = "AUDIO";
        this._element = a;
        a.addEventListener("ended", function () {
            a.loop || (a.paused = !0)
        })
    },
    play: function (a, b) {
        this._element ? (this._element.loop = b, this._element.play(), "AUDIO" === this._AUDIO_TYPE && this._element.paused && (this.stop(), cc.Audio.touchPlayList.push({
            loop: b,
            offset: a,
            audio: this._element
        })), !1 === cc.Audio.bindTouch && (cc.Audio.bindTouch = !0, cc.game.canvas.addEventListener("touchstart", cc.Audio.touchStart))) : this.interruptPlay = !1
    },
    getPlaying: function () {
        return !this._element ? !0 : !this._element.paused
    },
    stop: function () {
        if (this._element) {
            this._element.pause();
            try {
                this._element.currentTime = 0
            } catch (a) {}
        } else this.interruptPlay = !0
    },
    pause: function () {
        this._element ? this._element.pause() : this.interruptPlay = !0
    },
    resume: function () {
        this._element ? this._element.play() : this.interruptPlay = !1
    },
    setVolume: function (a) {
        this._element && (this._element.volume = a)
    },
    getVolume: function () {
        if (this._element) return this._element.volume
    },
    cloneNode: function () {
        var a = new cc.Audio(this.src);
        if ("AUDIO" === this._AUDIO_TYPE) {
            for (var b = document.createElement("audio"), c = b.getElementsByTagName("source"), d = 0; d < c.length; d++) b.appendChild(c[d]);
            b.src = this.src;
            a.setElement(b)
        } else a.setBuffer(this._element.buffer);
        return a
    }
});
cc.Audio.touchPlayList = [];
cc.Audio.bindTouch = !1;
cc.Audio.touchStart = function () {
    for (var a = cc.Audio.touchPlayList, b = null; b = a.pop();) b.audio.loop = !!b.loop, b.audio.play(b.offset)
};
cc.Audio.WebAudio = function (a) {
    this.buffer = a;
    this.context = cc.Audio._context;
    a = this.context.createGain();
    a.gain.value = 1;
    a.connect(this.context.destination);
    this._volume = a;
    this._loop = !1;
    this._startTime = -1;
    this._currentSource = null;
    this.playedLength = 0;
    this._currextTimer = null
};
cc.Audio.WebAudio.prototype = {
    constructor: cc.Audio.WebAudio,
    get paused() {
        return this._currentSource && this._currentSource.loop ? !1 : -1 === this._startTime ? !0 : this.context.currentTime - this._startTime > this.buffer.duration
    },
    set paused(a) {},
    get loop() {
        return this._loop
    },
    set loop(a) {
        return this._loop = a
    },
    get volume() {
        return this._volume.gain.value
    },
    set volume(a) {
        return this._volume.gain.value = a
    },
    get currentTime() {
        return this.playedLength
    },
    set currentTime(a) {
        return this.playedLength = a
    },
    play: function (a) {
        this._currentSource &&
            !this.paused && (this._currentSource.stop(0), this.playedLength = 0);
        var b = this.context.createBufferSource();
        b.buffer = this.buffer;
        b.connect(this._volume);
        b.loop = this._loop;
        this._startTime = this.context.currentTime;
        a = a || this.playedLength;
        var c = this.buffer.duration;
        this._loop ? b.start ? b.start(0) : b.notoGrainOn ? b.noteGrainOn(0) : b.noteOn(0) : b.start ? b.start(0, a, c - a) : b.notoGrainOn ? b.noteGrainOn(0, a, c - a) : b.noteOn(0, a, c - a);
        this._currentSource = b;
        if (0 === this.context.currentTime) {
            var d = this;
            clearTimeout(this._currextTimer);
            this._currextTimer = setTimeout(function () {
                0 === d.context.currentTime && cc.Audio.touchPlayList.push({
                    offset: a,
                    audio: d
                })
            }, 10)
        }
    },
    pause: function () {
        this.playedLength = this.context.currentTime - this._startTime;
        this.playedLength %= this.buffer.duration;
        var a = this._currentSource;
        this._currentSource = null;
        this._startTime = -1;
        a && a.stop(0)
    }
};
(function (a) {
    var b = a.WEB_AUDIO,
        c = a.ONLY_ONE,
        d = [];
    (function () {
        var a = document.createElement("audio");
        if (a.canPlayType) {
            var b = a.canPlayType('audio/ogg; codecs="vorbis"');
            b && "" !== b && d.push(".ogg");
            (b = a.canPlayType("audio/mpeg")) && "" !== b && d.push(".mp3");
            (b = a.canPlayType('audio/wav; codecs="1"')) && "" !== b && d.push(".wav");
            (b = a.canPlayType("audio/mp4")) && "" !== b && d.push(".mp4");
            (a = a.canPlayType("audio/x-m4a")) && "" !== a && d.push(".m4a")
        }
    })();
    try {
        if (b) {
            var f = new(window.AudioContext || window.webkitAudioContext ||
                window.mozAudioContext);
            cc.Audio._context = f;
            if (!f.createBufferSource || !f.createGain || !f.destination || !f.decodeAudioData) throw "context is incomplete";
            a.DELAY_CREATE_CTX && setTimeout(function () {
                f = new(window.AudioContext || window.webkitAudioContext || window.mozAudioContext);
                cc.Audio._context = f
            }, 0)
        }
    } catch (g) {
        b = !1, cc.log("browser don't support web audio")
    }
    var h = {
        cache: {},
        useWebAudio: !0,
        loadBuffer: function (a, c) {
            if (b) {
                var d = cc.loader.getXMLHttpRequest();
                d.open("GET", a, !0);
                d.responseType = "arraybuffer";
                d.onload =
                    function () {
                        0 <= d._timeoutId && clearTimeout(d._timeoutId);
                        f.decodeAudioData(d.response, function (a) {
                            c(null, a)
                        }, function () {
                            c("decode error - " + a)
                        })
                    };
                d.onerror = function () {
                    c("request error - " + a)
                };
                void 0 === d.ontimeout && (d._timeoutId = setTimeout(function () {
                    d.ontimeout()
                }, d.timeout));
                d.ontimeout = function () {
                    c("request timeout - " + a)
                };
                d.send()
            }
        },
        load: function (a, b, c, f) {
            if (0 === d.length) return f("can not support audio!");
            var g = cc.loader.getRes(b);
            if (g) return f(null, g);
            cc.loader.audioPath && (a = cc.path.join(cc.loader.audioPath,
                a));
            g = cc.path.extname(a);
            c = [g];
            for (var h = 0; h < d.length; h++) g !== d[h] && c.push(d[h]);
            g = new cc.Audio(a);
            cc.loader.cache[b] = g;
            this.loadAudioFromExtList(a, c, g, f);
            return g
        },
        loadAudioFromExtList: function (c, f, g, h) {
            if (0 === f.length) {
                var v = "can not found the resource of audio! Last match url is : ",
                    v = v + c.replace(/\.(.*)?$/, "(");
                d.forEach(function (a) {
                    v += a + "|"
                });
                v = v.replace(/\|$/, ")");
                return h({
                    status: 520,
                    errorMessage: v
                }, null)
            }
            if (b && this.useWebAudio) this.loadBuffer(c, function (a, b) {
                a && cc.log(a);
                b && g.setBuffer(b);
                h(null, g)
            });
            else {
                for (var x = a.ONE_SOURCE ? 1 : f.length, y = document.createElement("audio"), z = 0; z < x; z++) {
                    var t = document.createElement("source");
                    t.src = cc.path.changeExtname(c, f[z]);
                    y.appendChild(t)
                }
                g.setElement(y);
                var A = setTimeout(function () {
                        0 === y.readyState ? B() : w()
                    }, 8E3),
                    w = function () {
                        y.removeEventListener("canplaythrough", w, !1);
                        y.removeEventListener("error", B, !1);
                        y.removeEventListener("emptied", w, !1);
                        a.USE_LOADER_EVENT && y.removeEventListener(a.USE_LOADER_EVENT, w, !1);
                        clearTimeout(A);
                        h(null, g)
                    },
                    B = function () {
                        cc.log("load audio failure - " +
                            c);
                        w()
                    };
                y.addEventListener("canplaythrough", w, !1);
                y.addEventListener("error", B, !1);
                a.USE_LOADER_EVENT && y.addEventListener(a.USE_LOADER_EVENT, w, !1)
            }
        }
    };
    cc.loader.register(["mp3", "ogg", "wav", "mp4", "m4a"], h);
    cc.audioEngine = {
        _currMusic: null,
        _musicVolume: 1,
        features: a,
        willPlayMusic: function () {
            return !1
        },
        playMusic: function (a, b) {
            var c = this._currMusic;
            c && c.getPlaying() && c.stop();
            var d = this._musicVolume,
                f = cc.loader.getRes(a);
            f || (cc.loader.load(a, function () {
                !f.getPlaying() && !f.interruptPlay && (f.setVolume(d), f.play(0,
                    b || !1))
            }), f = cc.loader.getRes(a));
            f.setVolume(d);
            f.play(0, b || !1);
            this._currMusic = f
        },
        stopMusic: function (a) {
            var b = this._currMusic;
            if (b) {
                for (var c = cc.Audio.touchPlayList, d = c.length - 1; 0 <= d; --d) this[d] && this[d].audio === b._element && c.splice(d, 1);
                b.stop();
                this._currMusic = null;
                a && cc.loader.release(b.src)
            }
        },
        pauseMusic: function () {
            var a = this._currMusic;
            a && a.pause()
        },
        resumeMusic: function () {
            var a = this._currMusic;
            a && a.resume()
        },
        rewindMusic: function () {
            var a = this._currMusic;
            a && (a.stop(), a.play())
        },
        getMusicVolume: function () {
            return this._musicVolume
        },
        setMusicVolume: function (a) {
            a -= 0;
            isNaN(a) && (a = 1);
            1 < a && (a = 1);
            0 > a && (a = 0);
            this._musicVolume = a;
            var b = this._currMusic;
            b && b.setVolume(a)
        },
        isMusicPlaying: function () {
            var a = this._currMusic;
            return a ? a.getPlaying() : !1
        },
        _audioPool: {},
        _maxAudioInstance: 10,
        _effectVolume: 1,
        playEffect: function (a, d) {
            if (c && this._currMusic && this._currMusic.getPlaying()) return cc.log("Browser is only allowed to play one audio"), null;
            var f = this._audioPool[a];
            f || (f = this._audioPool[a] = []);
            for (var g = 0; g < f.length && f[g].getPlaying(); g++);
            !b &&
                g > this._maxAudioInstance && (g = f.shift(), g.stop(), f.push(g), g = f.length - 1);
            var v;
            if (f[g]) return v = f[g], v.setVolume(this._effectVolume), v.play(0, d || !1), v;
            if ((v = cc.loader.getRes(a)) && b && "AUDIO" === v._AUDIO_TYPE) cc.loader.release(a), v = null;
            if (v)
                if (b && "AUDIO" === v._AUDIO_TYPE) h.loadBuffer(a, function (a, b) {
                    v.setBuffer(b);
                    v.setVolume(cc.audioEngine._effectVolume);
                    v.getPlaying() || v.play(0, d || !1)
                });
                else return v = v.cloneNode(), v.setVolume(this._effectVolume), v.play(0, d || !1), f.push(v), v;
            g = h.useWebAudio;
            h.useWebAudio = !0;
            cc.loader.load(a, function (b) {
                b = cc.loader.getRes(a);
                b = b.cloneNode();
                b.setVolume(cc.audioEngine._effectVolume);
                b.play(0, d || !1);
                f.push(b)
            });
            h.useWebAudio = g;
            return v
        },
        setEffectsVolume: function (a) {
            a -= 0;
            isNaN(a) && (a = 1);
            1 < a && (a = 1);
            0 > a && (a = 0);
            this._effectVolume = a;
            var b = this._audioPool,
                c;
            for (c in b) {
                var d = b[c];
                if (Array.isArray(d))
                    for (var f = 0; f < d.length; f++) d[f].setVolume(a)
            }
        },
        getEffectsVolume: function () {
            return this._effectVolume
        },
        pauseEffect: function (a) {
            a && a.pause()
        },
        pauseAllEffects: function () {
            var a = this._audioPool,
                b;
            for (b in a)
                for (var c = a[b], d = 0; d < a[b].length; d++) c[d].getPlaying() && c[d].pause()
        },
        resumeEffect: function (a) {
            a && a.resume()
        },
        resumeAllEffects: function () {
            var a = this._audioPool,
                b;
            for (b in a)
                for (var c = a[b], d = 0; d < a[b].length; d++) c[d].resume()
        },
        stopEffect: function (a) {
            a && a.stop()
        },
        stopAllEffects: function () {
            var a = this._audioPool,
                b;
            for (b in a) {
                for (var c = a[b], d = 0; d < c.length; d++) c[d].stop();
                c.length = 0
            }
            a.length = 0
        },
        unloadEffect: function (a) {
            if (a) {
                cc.loader.release(a);
                var b = this._audioPool[a];
                if (b) {
                    for (var c = 0; c <
                        b.length; c++) b[c].stop();
                    b.length = 0
                }
                delete this._audioPool[a]
            }
        },
        end: function () {
            this.stopMusic();
            this.stopAllEffects()
        },
        _pauseCache: [],
        _pausePlaying: function () {
            var a = this._currMusic;
            a && a.getPlaying() && (a.pause(), this._pauseCache.push(a));
            var a = this._audioPool,
                b;
            for (b in a)
                for (var c = a[b], d = 0; d < a[b].length; d++) c[d].getPlaying() && (c[d].pause(), this._pauseCache.push(c[d]))
        },
        _resumePlaying: function () {
            for (var a = this._pauseCache, b = 0; b < a.length; b++) a[b].resume();
            a.length = 0
        }
    }
})(window.__audioSupport);
cc.CONTROL_EVENT_TOTAL_NUMBER = 9;
cc.CONTROL_EVENT_TOUCH_DOWN = 1;
cc.CONTROL_EVENT_TOUCH_DRAG_INSIDE = 2;
cc.CONTROL_EVENT_TOUCH_DRAG_OUTSIDE = 4;
cc.CONTROL_EVENT_TOUCH_DRAG_ENTER = 8;
cc.CONTROL_EVENT_TOUCH_DRAG_EXIT = 16;
cc.CONTROL_EVENT_TOUCH_UP_INSIDE = 32;
cc.CONTROL_EVENT_TOUCH_UP_OUTSIDE = 64;
cc.CONTROL_EVENT_TOUCH_CANCEL = 128;
cc.CONTROL_EVENT_VALUECHANGED = 256;
cc.CONTROL_STATE_NORMAL = 1;
cc.CONTROL_STATE_HIGHLIGHTED = 2;
cc.CONTROL_STATE_DISABLED = 4;
cc.CONTROL_STATE_SELECTED = 8;
cc.CONTROL_STATE_INITIAL = 8;
cc.Control = cc.Layer.extend({
    _isOpacityModifyRGB: !1,
    _hasVisibleParents: !1,
    _touchListener: null,
    _className: "Control",
    isOpacityModifyRGB: function () {
        return this._isOpacityModifyRGB
    },
    setOpacityModifyRGB: function (a) {
        this._isOpacityModifyRGB = a;
        for (var b = this.getChildren(), c = 0, d = b.length; c < d; c++) {
            var f = b[c];
            f && f.setOpacityModifyRGB(a)
        }
    },
    _state: cc.CONTROL_STATE_NORMAL,
    getState: function () {
        return this._state
    },
    _enabled: !1,
    _selected: !1,
    _highlighted: !1,
    _dispatchTable: null,
    setEnabled: function (a) {
        this._state = (this._enabled =
            a) ? cc.CONTROL_STATE_NORMAL : cc.CONTROL_STATE_DISABLED;
        this.needsLayout()
    },
    isEnabled: function () {
        return this._enabled
    },
    setSelected: function (a) {
        this._selected = a;
        this.needsLayout()
    },
    isSelected: function () {
        return this._selected
    },
    setHighlighted: function (a) {
        this._highlighted = a;
        this.needsLayout()
    },
    isHighlighted: function () {
        return this._highlighted
    },
    hasVisibleParents: function () {
        for (var a = this.getParent(); null != a; a = a.getParent())
            if (!a.isVisible()) return !1;
        return !0
    },
    ctor: function () {
        cc.Layer.prototype.ctor.call(this);
        this._dispatchTable = {};
        this._color = cc.color.WHITE
    },
    init: function () {
        this._state = cc.CONTROL_STATE_NORMAL;
        this._enabled = !0;
        this._highlighted = this._selected = !1;
        var a = cc.EventListener.create({
            event: cc.EventListener.TOUCH_ONE_BY_ONE,
            swallowTouches: !0
        });
        this.onTouchBegan && (a.onTouchBegan = this.onTouchBegan.bind(this));
        this.onTouchMoved && (a.onTouchMoved = this.onTouchMoved.bind(this));
        this.onTouchEnded && (a.onTouchEnded = this.onTouchEnded.bind(this));
        this.onTouchCancelled && (a.onTouchCancelled = this.onTouchCancelled.bind(this));
        this._touchListener = a;
        return !0
    },
    onEnter: function () {
        var a = this._touchListener;
        a._isRegistered() || cc.eventManager.addListener(a, this);
        cc.Node.prototype.onEnter.call(this)
    },
    sendActionsForControlEvents: function (a) {
        for (var b = 0, c = cc.CONTROL_EVENT_TOTAL_NUMBER; b < c; b++)
            if (a & 1 << b)
                for (var d = this._dispatchListforControlEvent(1 << b), f = 0, g = d.length; f < g; f++) d[f].invoke(this)
    },
    addTargetWithActionForControlEvents: function (a, b, c) {
        for (var d = 0, f = cc.CONTROL_EVENT_TOTAL_NUMBER; d < f; d++) c & 1 << d && this._addTargetWithActionForControlEvent(a,
            b, 1 << d)
    },
    removeTargetWithActionForControlEvents: function (a, b, c) {
        for (var d = 0, f = cc.CONTROL_EVENT_TOTAL_NUMBER; d < f; d++) c & 1 << d && this._removeTargetWithActionForControlEvent(a, b, 1 << d)
    },
    getTouchLocation: function (a) {
        a = a.getLocation();
        return this.convertToNodeSpace(a)
    },
    isTouchInside: function (a) {
        a = a.getLocation();
        a = this.getParent().convertToNodeSpace(a);
        return cc.rectContainsPoint(this.getBoundingBox(), a)
    },
    _invocationWithTargetAndActionForControlEvent: function (a, b, c) {
        return null
    },
    _dispatchListforControlEvent: function (a) {
        a =
            a.toString();
        this._dispatchTable[a] || (this._dispatchTable[a] = []);
        return this._dispatchTable[a]
    },
    _addTargetWithActionForControlEvent: function (a, b, c) {
        a = new cc.Invocation(a, b, c);
        this._dispatchListforControlEvent(c).push(a)
    },
    _removeTargetWithActionForControlEvent: function (a, b, c) {
        c = this._dispatchListforControlEvent(c);
        if (!a && !b) c.length = 0;
        else
            for (var d = 0; d < c.length;) {
                var f = c[d],
                    g = !0;
                a && (g = a === f.getTarget());
                b && (g = g && b === f.getAction());
                g ? cc.arrayRemoveObject(c, f) : d++
            }
    },
    needsLayout: function () {}
});
_p = cc.Control.prototype;
cc.defineGetterSetter(_p, "state", _p.getState);
cc.defineGetterSetter(_p, "enabled", _p.isEnabled, _p.setEnabled);
cc.defineGetterSetter(_p, "selected", _p.isSelected, _p.setSelected);
cc.defineGetterSetter(_p, "highlighted", _p.isHighlighted, _p.setHighlighted);
_p = null;
cc.Control.create = function () {
    var a = new cc.Control;
    return a && a.init() ? a : null
};
cc.CONTROL_ZOOM_ACTION_TAG = 3435855873;
cc.ControlButton = cc.Control.extend({
    _doesAdjustBackgroundImage: !1,
    zoomOnTouchDown: !1,
    _preferredSize: null,
    _labelAnchorPoint: null,
    _currentTitle: null,
    _currentTitleColor: null,
    _titleLabel: null,
    _backgroundSprite: null,
    _opacity: 0,
    _isPushed: !1,
    _titleDispatchTable: null,
    _titleColorDispatchTable: null,
    _titleLabelDispatchTable: null,
    _backgroundSpriteDispatchTable: null,
    _parentInited: !1,
    _marginV: 0,
    _marginH: 0,
    _className: "ControlButton",
    ctor: function (a, b, c) {
        cc.Control.prototype.ctor.call(this);
        this._preferredSize = cc.size(0,
            0);
        this._labelAnchorPoint = cc.p(0, 0);
        this._currentTitle = "";
        this._currentTitleColor = cc.color.WHITE;
        this._titleDispatchTable = {};
        this._titleColorDispatchTable = {};
        this._titleLabelDispatchTable = {};
        this._backgroundSpriteDispatchTable = {};
        void 0 != c ? this.initWithTitleAndFontNameAndFontSize(a, b, c) : void 0 != b ? this.initWithLabelAndBackgroundSprite(a, b) : void 0 != a ? this.initWithBackgroundSprite(a) : this.init()
    },
    init: function () {
        return this.initWithLabelAndBackgroundSprite(new cc.LabelTTF("", "Arial", 12), new cc.Scale9Sprite)
    },
    needsLayout: function () {
        if (this._parentInited) {
            this._titleLabel && this._titleLabel.setVisible(!1);
            this._backgroundSprite && this._backgroundSprite.setVisible(!1);
            this.setLabelAnchorPoint(this._labelAnchorPoint);
            var a = this._state;
            this._currentTitle = this.getTitleForState(a);
            this._currentTitleColor = this.getTitleColorForState(a);
            var b = this._titleLabel = this.getTitleLabelForState(a);
            b && b.setString && b.setString(this._currentTitle);
            b && b.setColor(this._currentTitleColor);
            var c = this.getContentSize();
            b && b.setPosition(c.width /
                2, c.height / 2);
            (a = this._backgroundSprite = this.getBackgroundSpriteForState(a)) && a.setPosition(c.width / 2, c.height / 2);
            c = cc.size(0, 0);
            if (b) {
                var d = b.getBoundingBox();
                c.width = d.width;
                c.height = d.height
            }
            this._doesAdjustBackgroundImage ? a && a.setContentSize(c.width + 2 * this._marginH, c.height + 2 * this._marginV) : a && (d = a.getPreferredSize(), d = cc.size(d.width, d.height), 0 >= d.width && (d.width = c.width), 0 >= d.height && (d.height = c.height), a.setContentSize(d));
            c = b ? b.getBoundingBox() : cc.rect(0, 0, 0, 0);
            d = a ? a.getBoundingBox() : cc.rect(0,
                0, 0, 0);
            c = cc.rectUnion(c, d);
            this.setContentSize(c.width, c.height);
            c = this.getContentSize();
            b && (b.setPosition(c.width / 2, c.height / 2), b.setVisible(!0));
            a && (a.setPosition(c.width / 2, c.height / 2), a.setVisible(!0))
        }
    },
    initWithLabelAndBackgroundSprite: function (a, b) {
        if (!a) throw Error("cc.ControlButton.initWithLabelAndBackgroundSprite(): label should be non-null");
        if (!b) throw Error("cc.ControlButton.initWithLabelAndBackgroundSprite(): backgroundSprite should be non-null");
        if (cc.Control.prototype.init.call(this,
                !0)) {
            this._parentInited = !0;
            this._titleDispatchTable = {};
            this._titleColorDispatchTable = {};
            this._titleLabelDispatchTable = {};
            this._backgroundSpriteDispatchTable = {};
            this._isPushed = !1;
            this.zoomOnTouchDown = !0;
            this._currentTitle = null;
            this.setAdjustBackgroundImage(!0);
            this.setPreferredSize(cc.size(0, 0));
            this.zoomOnTouchDown = !0;
            this.ignoreAnchorPointForPosition(!1);
            this.setAnchorPoint(0.5, 0.5);
            this._titleLabel = a;
            this._backgroundSprite = b;
            this.setOpacity(255);
            this.setOpacityModifyRGB(!0);
            var c = a.getString();
            this.setTitleForState(c, cc.CONTROL_STATE_NORMAL);
            this.setTitleColorForState(a.getColor(), cc.CONTROL_STATE_NORMAL);
            this.setTitleLabelForState(a, cc.CONTROL_STATE_NORMAL);
            this.setBackgroundSpriteForState(b, cc.CONTROL_STATE_NORMAL);
            this._state = cc.CONTROL_STATE_NORMAL;
            this._marginH = 24;
            this._marginV = 12;
            this._labelAnchorPoint = cc.p(0.5, 0.5);
            this.setPreferredSize(cc.size(0, 0));
            this.needsLayout();
            return !0
        }
        return !1
    },
    initWithTitleAndFontNameAndFontSize: function (a, b, c) {
        a = new cc.LabelTTF(a, b, c);
        return this.initWithLabelAndBackgroundSprite(a,
            new cc.Scale9Sprite)
    },
    initWithBackgroundSprite: function (a) {
        var b = new cc.LabelTTF("", "Arial", 30);
        return this.initWithLabelAndBackgroundSprite(b, a)
    },
    doesAdjustBackgroundImage: function () {
        return this._doesAdjustBackgroundImage
    },
    setAdjustBackgroundImage: function (a) {
        this._doesAdjustBackgroundImage = a;
        this.needsLayout()
    },
    getZoomOnTouchDown: function () {
        return this.zoomOnTouchDown
    },
    setZoomOnTouchDown: function (a) {
        return this.zoomOnTouchDown = a
    },
    getPreferredSize: function () {
        return this._preferredSize
    },
    setPreferredSize: function (a) {
        if (0 ===
            a.width && 0 === a.height) this._doesAdjustBackgroundImage = !0;
        else {
            this._doesAdjustBackgroundImage = !1;
            var b = this._backgroundSpriteDispatchTable,
                c;
            for (c in b) b[c].setPreferredSize(a)
        }
        this._preferredSize = a;
        this.needsLayout()
    },
    getLabelAnchorPoint: function () {
        return this._labelAnchorPoint
    },
    setLabelAnchorPoint: function (a) {
        this._labelAnchorPoint = a;
        this._titleLabel && this._titleLabel.setAnchorPoint(a)
    },
    _getCurrentTitle: function () {
        return this._currentTitle
    },
    _getCurrentTitleColor: function () {
        return this._currentTitleColor
    },
    getOpacity: function () {
        return this._opacity
    },
    setOpacity: function (a) {
        cc.Control.prototype.setOpacity.call(this, a);
        var b = this._backgroundSpriteDispatchTable,
            c;
        for (c in b) b[c].setOpacity(a)
    },
    setColor: function (a) {
        cc.Control.prototype.setColor.call(this, a);
        var b = this._backgroundSpriteDispatchTable,
            c;
        for (c in b) b[c].setColor(a)
    },
    getColor: function () {
        var a = this._realColor;
        return cc.color(a.r, a.g, a.b, a.a)
    },
    isPushed: function () {
        return this._isPushed
    },
    _getVerticalMargin: function () {
        return this._marginV
    },
    _getHorizontalOrigin: function () {
        return this._marginH
    },
    setMargins: function (a, b) {
        this._marginV = b;
        this._marginH = a;
        this.needsLayout()
    },
    setEnabled: function (a) {
        cc.Control.prototype.setEnabled.call(this, a);
        this.needsLayout()
    },
    setSelected: function (a) {
        cc.Control.prototype.setSelected.call(this, a);
        this.needsLayout()
    },
    setHighlighted: function (a) {
        this._state = a ? cc.CONTROL_STATE_HIGHLIGHTED : cc.CONTROL_STATE_NORMAL;
        cc.Control.prototype.setHighlighted.call(this, a);
        (a = this.getActionByTag(cc.CONTROL_ZOOM_ACTION_TAG)) && this.stopAction(a);
        this.zoomOnTouchDown && (a = this.isHighlighted() &&
            this.isEnabled() && !this.isSelected() ? 1.1 : 1, a = cc.scaleTo(0.05, a), a.setTag(cc.CONTROL_ZOOM_ACTION_TAG), this.runAction(a))
    },
    onTouchBegan: function (a, b) {
        if (!this.isTouchInside(a) || !this.isEnabled() || !this.isVisible() || !this.hasVisibleParents()) return !1;
        this._isPushed = !0;
        this.setHighlighted(!0);
        this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DOWN);
        return !0
    },
    onTouchMoved: function (a, b) {
        if (!this._enabled || !this._isPushed || this._selected) this._highlighted && this.setHighlighted(!1);
        else {
            var c = this.isTouchInside(a);
            c && !this._highlighted ? (this.setHighlighted(!0), this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_ENTER)) : c && this._highlighted ? this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_INSIDE) : !c && this._highlighted ? (this.setHighlighted(!1), this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_EXIT)) : !c && !this._highlighted && this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_OUTSIDE)
        }
    },
    onTouchEnded: function (a, b) {
        this._isPushed = !1;
        this.setHighlighted(!1);
        this.isTouchInside(a) ?
            this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_UP_INSIDE) : this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_UP_OUTSIDE)
    },
    onTouchCancelled: function (a, b) {
        this._isPushed = !1;
        this.setHighlighted(!1);
        this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_CANCEL)
    },
    getTitleForState: function (a) {
        var b = this._titleDispatchTable;
        return b ? b[a] ? b[a] : b[cc.CONTROL_STATE_NORMAL] : ""
    },
    setTitleForState: function (a, b) {
        this._titleDispatchTable[b] = a || "";
        this.getState() === b && this.needsLayout()
    },
    getTitleColorForState: function (a) {
        return (a =
            this._titleColorDispatchTable[a]) ? a : (a = this._titleColorDispatchTable[cc.CONTROL_STATE_NORMAL]) ? a : cc.color.WHITE
    },
    setTitleColorForState: function (a, b) {
        this._titleColorDispatchTable[b] = a;
        this.getState() === b && this.needsLayout()
    },
    getTitleLabelForState: function (a) {
        var b = this._titleLabelDispatchTable;
        return b[a] ? b[a] : b[cc.CONTROL_STATE_NORMAL]
    },
    setTitleLabelForState: function (a, b) {
        var c = this._titleLabelDispatchTable;
        if (c[b]) {
            var d = c[b];
            d && this.removeChild(d, !0)
        }
        c[b] = a;
        a.setVisible(!1);
        a.setAnchorPoint(0.5,
            0.5);
        this.addChild(a, 1);
        this.getState() === b && this.needsLayout()
    },
    setTitleTTFForState: function (a, b) {
        var c = this.getTitleForState(b);
        c || (c = "");
        this.setTitleLabelForState(new cc.LabelTTF(c, a, 12), b)
    },
    getTitleTTFForState: function (a) {
        a = this.getTitleLabelForState(a);
        return null != a && a instanceof cc.LabelTTF ? a.getFontName() : ""
    },
    setTitleTTFSizeForState: function (a, b) {
        var c = this.getTitleLabelForState(b);
        null != c && c instanceof cc.LabelTTF && c.setFontSize(a)
    },
    getTitleTTFSizeForState: function (a) {
        a = this.getTitleLabelForState(a);
        return null != a && a instanceof cc.LabelTTF ? a.getFontSize() : 0
    },
    setTitleBMFontForState: function (a, b) {
        var c = this.getTitleForState(b);
        c || (c = "");
        this.setTitleLabelForState(new cc.LabelBMFont(c, a), b)
    },
    getTitleBMFontForState: function (a) {
        a = this.getTitleLabelForState(a);
        return null != a && a instanceof cc.LabelBMFont ? a.getFntFile() : ""
    },
    getBackgroundSpriteForState: function (a) {
        var b = this._backgroundSpriteDispatchTable;
        return b[a] ? b[a] : b[cc.CONTROL_STATE_NORMAL]
    },
    setBackgroundSpriteForState: function (a, b) {
        var c = this._backgroundSpriteDispatchTable;
        if (c[b]) {
            var d = c[b];
            d && this.removeChild(d, !0)
        }
        c[b] = a;
        a.setVisible(!1);
        a.setAnchorPoint(0.5, 0.5);
        this.addChild(a);
        c = this._preferredSize;
        (0 !== c.width || 0 !== c.height) && a.setPreferredSize(c);
        this._state === b && this.needsLayout()
    },
    setBackgroundSpriteFrameForState: function (a, b) {
        var c = cc.Scale9Sprite.createWithSpriteFrame(a);
        this.setBackgroundSpriteForState(c, b)
    }
});
_p = cc.ControlButton.prototype;
cc.defineGetterSetter(_p, "adjustBackground", _p.getAdjustBackgroundImage, _p.setAdjustBackgroundImage);
cc.defineGetterSetter(_p, "preferredSize", _p.getPreferredSize, _p.setPreferredSize);
cc.defineGetterSetter(_p, "labelAnchor", _p.getLabelAnchorPoint, _p.setLabelAnchorPoint);
_p = null;
cc.ControlButton.create = function (a, b, c) {
    return new cc.ControlButton(a, b, c)
};
cc.RGBA = function (a, b, c, d) {
    this.r = a;
    this.g = b;
    this.b = c;
    this.a = d
};
cc.HSV = function (a, b, c) {
    this.h = a;
    this.s = b;
    this.v = c
};
cc.ControlUtils = {};
cc.ControlUtils.addSpriteToTargetWithPosAndAnchor = function (a, b, c, d) {
    a = new cc.Sprite("#" + a);
    if (!a) return null;
    a.setPosition(c);
    a.setAnchorPoint(d);
    b.addChild(a);
    return a
};
cc.ControlUtils.HSVfromRGB = function (a) {
    var b = new cc.HSV,
        c, d;
    c = a.r < a.g ? a.r : a.g;
    c = c < a.b ? c : a.b;
    d = a.r > a.g ? a.r : a.g;
    d = d > a.b ? d : a.b;
    b.v = d;
    c = d - c;
    if (0 < d) b.s = c / d;
    else return b.s = 0, b.h = -1, b;
    b.h = a.r >= d ? (a.g - a.b) / c : a.g >= d ? 2 + (a.b - a.r) / c : 4 + (a.r - a.g) / c;
    b.h *= 60;
    0 > b.h && (b.h += 360);
    return b
};
cc.ControlUtils.RGBfromHSV = function (a) {
    var b, c, d, f, g = new cc.RGBA;
    g.a = 1;
    if (0 >= a.s) {
        if (!a.h) return g.r = a.v, g.g = a.v, g.b = a.v, g;
        g.r = 0;
        g.g = 0;
        g.b = 0;
        return g
    }
    b = a.h;
    360 <= b && (b = 0);
    b /= 60;
    f = 0 | b;
    d = b - f;
    b = a.v * (1 - a.s);
    c = a.v * (1 - a.s * d);
    d = a.v * (1 - a.s * (1 - d));
    switch (f) {
    case 0:
        g.r = a.v;
        g.g = d;
        g.b = b;
        break;
    case 1:
        g.r = c;
        g.g = a.v;
        g.b = b;
        break;
    case 2:
        g.r = b;
        g.g = a.v;
        g.b = d;
        break;
    case 3:
        g.r = b;
        g.g = c;
        g.b = a.v;
        break;
    case 4:
        g.r = d;
        g.g = b;
        g.b = a.v;
        break;
    default:
        g.r = a.v, g.g = b, g.b = c
    }
    return g
};
cc.ControlUtils.CCRectUnion = function (a, b) {
    return cc.rectUnion(a, b)
};
cc.Invocation = cc.Class.extend({
    _action: null,
    _target: null,
    _controlEvent: null,
    ctor: function (a, b, c) {
        this._target = a;
        this._action = b;
        this._controlEvent = c
    },
    getAction: function () {
        return this._action
    },
    getTarget: function () {
        return this._target
    },
    getControlEvent: function () {
        return this._controlEvent
    },
    invoke: function (a) {
        if (this._target && this._action)
            if (cc.isString(this._action)) this._target[this._action](a, this._controlEvent);
            else this._action.call(this._target, a, this._controlEvent)
    }
});
cc.Spacer = cc.Layer.extend({});
cc.Spacer.verticalSpacer = function (a) {
    var b = new cc.Spacer;
    b.init();
    b.setContentSize(0, a);
    return b
};
cc.Spacer.horizontalSpacer = function (a) {
    var b = new cc.Spacer;
    b.init();
    b.setContentSize(a, 0);
    return b
};
cc.MenuPassive = cc.Layer.extend({
    _color: null,
    _opacity: 0,
    _className: "MenuPassive",
    ctor: function () {},
    getColor: function () {
        var a = this._color;
        return cc.color(a.r, a.g, a.b, a.a)
    },
    setColor: function (a) {
        var b = this._color;
        b.r = a.r;
        b.g = a.g;
        b.b = a.b;
        if (this._children && 0 < this._children.length)
            for (b = 0; b < this._children.length; b++) this._children[b] && this._children[b].setColor(a);
        void 0 !== a.a && !a.a_undefined && this.setOpacity(a.a)
    },
    getOpacity: function () {
        return this._opacity
    },
    setOpacity: function (a) {
        this._opacity = a;
        if (this._children &&
            0 < this._children.length)
            for (var b = 0; b < this._children.length; b++) this._children[b] && this._children[b].setOpacity(a);
        this._color.a = a
    },
    initWithItems: function (a, b) {
        if (this.init()) {
            var c = cc.director.getWinSize();
            this.ignoreAnchorPointForPosition(!0);
            this.setAnchorPoint(0.5, 0.5);
            this.setContentSize(c);
            this.setPosition(c.width / 2, c.height / 2);
            c = 0;
            if (a) {
                this.addChild(a, c);
                for (var d = 0; d < b.length; d++) b[d] && (c++, this.addChild(b[d], c))
            }
            return !0
        }
        return !1
    },
    alignItemsVertically: function () {
        this.alignItemsVerticallyWithPadding(cc.DEFAULT_PADDING)
    },
    alignItemsVerticallyWithPadding: function (a) {
        var b = -a,
            c;
        if (this._children && 0 < this._children.length)
            for (c = 0; c < this._children.length; c++) this._children[c] && (b += this._children[c].getContentSize().height * this._children[c].getScaleY() + a);
        var d = 0,
            f = b / 2;
        if (this._children && 0 < this._children.length)
            for (c = 0; c < this._children.length; c++) this._children[c] && (d = Math.max(d, this._children[c].getContentSize().width), this._children[c].setPosition(0, f - this._children[c].getContentSize().height * this._children[c].getScaleY() /
                2), f -= this._children[c].getContentSize().height * this._children[c].getScaleY() + a);
        this.setContentSize(d, b)
    },
    alignItemsHorizontally: function () {
        this.alignItemsHorizontallyWithPadding(cc.DEFAULT_PADDING)
    },
    alignItemsHorizontallyWithPadding: function (a) {
        var b = -a,
            c;
        if (this._children && 0 < this._children.length)
            for (c = 0; c < this._children.length; c++) this._children[c] && (b += this._children[c].getContentSize().width * this._children[c].getScaleX() + a);
        var d = 0,
            f = -b / 2;
        if (this._children && 0 < this._children.length)
            for (c = 0; c <
                this._children.length; c++) this._children[c] && (d = Math.max(d, this._children[c].getContentSize().height), this._children[c].setPosition(f + this._children[c].getContentSize().width * this._children[c].getScaleX() / 2, 0), f += this._children[c].getContentSize().width * this._children[c].getScaleX() + a);
        this.setContentSize(b, d)
    },
    alignItemsInColumns: function (a) {
        var b = [],
            c;
        for (c = 1; c < arguments.length; c++) b.push(arguments[c]);
        var d = -5,
            f = 0,
            g = 0,
            h = 0,
            m, n;
        if (this._children && 0 < this._children.length)
            for (c = 0; c < this._children.length; c++) this._children[c] &&
                (f >= b.length ? cc.log("cc.MenuPassive.alignItemsInColumns(): invalid row index") : (m = b[f]) ? (n = this._children[c].getContentSize().height, g = 0 | (g >= n || null == n ? g : n), ++h, h >= m && (d += g + 5, g = h = 0, ++f)) : cc.log("cc.MenuPassive.alignItemsInColumns(): can not have zero columns on a row"));
        var p = cc.director.getWinSize(),
            u = m = g = f = 0,
            v = 0,
            d = d / 2;
        if (this._children && 0 < this._children.length)
            for (c = 0; c < this._children.length; c++) this._children[c] && (0 === m && (m = b[f], v = u = p.width / (1 + m)), n = this._children[c].getContentSize().height, g =
                0 | (g >= n || null == n ? g : n), this._children[c].setPosition(v - p.width / 2, d - this._children[c].getContentSize().height / 2), v += u, ++h, h >= m && (d -= g + 5, g = m = h = 0, ++f))
    },
    alignItemsInRows: function (a) {
        var b = [],
            c;
        for (c = 1; c < arguments.length; c++) b.push(arguments[c]);
        var d = [],
            f = [],
            g = -10,
            h = -5,
            m = 0,
            n = 0,
            p = 0,
            u, v;
        if (this._children && 0 < this._children.length)
            for (c = 0; c < this._children.length; c++) this._children[c] && (m >= b.length ? cc.log("cc.MenuPassive.alignItemsInRows(): invalid row index") : (u = b[m]) ? (v = this._children[c].getContentSize().width,
                n = 0 | (n >= v || null == v ? n : v), h += 0 | this._children[c].getContentSize().height + 5, ++p, p >= u && (d.push(n), f.push(h), g += n + 10, n = p = 0, h = -5, ++m)) : cc.log("cc.MenuPassive.alignItemsInColumns(): can't have zero rows on a column"));
        h = cc.director.getWinSize();
        n = m = 0;
        u = null;
        var g = -g / 2,
            x = 0;
        if (this._children && 0 < this._children.length)
            for (c = 0; c < this._children.length; c++) this._children[c] && (null == u && (u = b[m], x = f[m]), v = this._children[c].getContentSize().width, n = 0 | (n >= v || null == v ? n : v), this._children[c].setPosition(g + d[m] / 2, x - h.height /
                2), x -= this._children[c].getContentSize().height + 10, ++p, p >= u && (g += n + 5, n = u = p = 0, ++m))
    },
    setOpacityModifyRGB: function (a) {},
    isOpacityModifyRGB: function () {
        return !1
    }
});
cc.MenuPassive.create = function (a) {
    a || (a = null);
    for (var b = [], c = 1; c < arguments.length; c++) b.push(arguments[c]);
    return (c = new cc.MenuPassive) && c.initWithItems(a, b) ? c : null
};
cc.MenuPassive.createWithItem = function (a) {
    return cc.MenuPassive.create(a, null)
};
cc.ControlSaturationBrightnessPicker = cc.Control.extend({
    _saturation: 0,
    _brightness: 0,
    _background: null,
    _overlay: null,
    _shadow: null,
    _slider: null,
    _startPos: null,
    _boxPos: 0,
    _boxSize: 0,
    _className: "ControlSaturationBrightnessPicker",
    ctor: function (a, b) {
        cc.Control.prototype.ctor.call(this);
        b && this.initWithTargetAndPos(a, b)
    },
    getSaturation: function () {
        return this._saturation
    },
    getBrightness: function () {
        return this._brightness
    },
    getBackground: function () {
        return this._background
    },
    getOverlay: function () {
        return this._brightness
    },
    getShadow: function () {
        return this._shadow
    },
    getSlider: function () {
        return this._slider
    },
    getStartPos: function () {
        return this._startPos
    },
    initWithTargetAndPos: function (a, b) {
        return cc.Control.prototype.init.call(this) ? (this._background = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPickerBackground.png", a, b, cc.p(0, 0)), this._overlay = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPickerOverlay.png", a, b, cc.p(0, 0)), this._shadow = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPickerShadow.png",
            a, b, cc.p(0, 0)), this._slider = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPicker.png", a, b, cc.p(0.5, 0.5)), this._startPos = b, this._boxPos = 35, this._boxSize = this._background.getContentSize().width / 2, !0) : !1
    },
    setEnabled: function (a) {
        cc.Control.prototype.setEnabled.call(this, a);
        this._slider && this._slider.setOpacity(a ? 255 : 128)
    },
    updateWithHSV: function (a) {
        var b = new cc.HSV;
        b.s = 1;
        b.h = a.h;
        b.v = 1;
        a = cc.ControlUtils.RGBfromHSV(b);
        this._background.setColor(cc.color(0 | 255 * a.r, 0 | 255 * a.g, 0 | 255 * a.b))
    },
    updateDraggerWithHSV: function (a) {
        a =
            cc.p(this._startPos.x + this._boxPos + this._boxSize * (1 - a.s), this._startPos.y + this._boxPos + this._boxSize * a.v);
        this._updateSliderPosition(a)
    },
    _updateSliderPosition: function (a) {
        var b = this._startPos.x + 0.5 * this._background.getBoundingBox().width,
            c = this._startPos.y + 0.5 * this._background.getBoundingBox().height,
            d = a.x - b,
            f = a.y - c,
            g = Math.sqrt(d * d + f * f),
            d = Math.atan2(f, d),
            f = 0.5 * this._background.getBoundingBox().width;
        g > f && (a.x = b + f * Math.cos(d), a.y = c + f * Math.sin(d));
        this._slider.setPosition(a);
        a.x < this._startPos.x + this._boxPos ?
            a.x = this._startPos.x + this._boxPos : a.x > this._startPos.x + this._boxPos + this._boxSize - 1 && (a.x = this._startPos.x + this._boxPos + this._boxSize - 1);
        a.y < this._startPos.y + this._boxPos ? a.y = this._startPos.y + this._boxPos : a.y > this._startPos.y + this._boxPos + this._boxSize && (a.y = this._startPos.y + this._boxPos + this._boxSize);
        this._saturation = 1 - Math.abs((this._startPos.x + this._boxPos - a.x) / this._boxSize);
        this._brightness = Math.abs((this._startPos.y + this._boxPos - a.y) / this._boxSize)
    },
    _checkSliderPosition: function (a) {
        var b = this._startPos.x +
            0.5 * this._background.getBoundingBox().width,
            c = this._startPos.y + 0.5 * this._background.getBoundingBox().height,
            b = a.x - b,
            c = a.y - c;
        return Math.sqrt(b * b + c * c) <= 0.5 * this._background.getBoundingBox().width ? (this._updateSliderPosition(a), this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED), !0) : !1
    },
    onTouchBegan: function (a, b) {
        if (!this.isEnabled() || !this.isVisible()) return !1;
        var c = this.getTouchLocation(a);
        return this._checkSliderPosition(c)
    },
    onTouchMoved: function (a, b) {
        var c = this.getTouchLocation(a);
        this._checkSliderPosition(c)
    }
});
_p = cc.ControlSaturationBrightnessPicker.prototype;
cc.defineGetterSetter(_p, "saturation", _p.getSaturation);
cc.defineGetterSetter(_p, "brightness", _p.getBrightness);
cc.defineGetterSetter(_p, "background", _p.getBackground);
cc.defineGetterSetter(_p, "overlay", _p.getOverlay);
cc.defineGetterSetter(_p, "shadow", _p.getShadow);
cc.defineGetterSetter(_p, "slider", _p.getSlider);
cc.defineGetterSetter(_p, "startPos", _p.getStartPos);
_p = null;
cc.ControlSaturationBrightnessPicker.create = function (a, b) {
    return new cc.ControlSaturationBrightnessPicker(a, b)
};
cc.ControlHuePicker = cc.Control.extend({
    _hue: 0,
    _huePercentage: 0,
    _background: null,
    _slider: null,
    _startPos: null,
    _className: "ControlHuePicker",
    ctor: function (a, b) {
        cc.Control.prototype.ctor.call(this);
        b && this.initWithTargetAndPos(a, b)
    },
    getHue: function () {
        return this._hue
    },
    setHue: function (a) {
        this._hue = a;
        this.setHuePercentage(this._hue / 360)
    },
    getHuePercentage: function () {
        return this._huePercentage
    },
    setHuePercentage: function (a) {
        this._huePercentage = a;
        this._hue = 360 * this._huePercentage;
        var b = this._background.getBoundingBox(),
            c = this._startPos.x + 0.5 * b.width;
        a = this._startPos.y + 0.5 * b.height;
        var b = 0.5 * b.width - 15,
            d = cc.degreesToRadians(360 * this._huePercentage - 180),
            c = c + b * Math.cos(d);
        a += b * Math.sin(d);
        this._slider.setPosition(c, a)
    },
    setEnabled: function (a) {
        cc.Control.prototype.setEnabled.call(this, a);
        this._slider && this._slider.setOpacity(a ? 255 : 128)
    },
    getBackground: function () {
        return this._background
    },
    getSlider: function () {
        return this._slider
    },
    getStartPos: function () {
        return this._startPos
    },
    initWithTargetAndPos: function (a, b) {
        return cc.Control.prototype.init.call(this) ?
            (this._background = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("huePickerBackground.png", a, b, cc.p(0, 0)), this._slider = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPicker.png", a, b, cc.p(0.5, 0.5)), this._slider.setPosition(b.x, b.y + 0.5 * this._background.getBoundingBox().height), this._startPos = b, this._huePercentage = this._hue = 0, !0) : !1
    },
    _updateSliderPosition: function (a) {
        var b = this._background.getBoundingBox();
        a = Math.atan2(a.y - (this._startPos.y + 0.5 * b.height), a.x - (this._startPos.x + 0.5 * b.width));
        a = cc.radiansToDegrees(a) + 180;
        this.setHue(a);
        this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)
    },
    _checkSliderPosition: function (a) {
        var b = Math.sqrt(Math.pow(a.x + 10, 2) + Math.pow(a.y, 2));
        return 80 > b && 59 < b ? (this._updateSliderPosition(a), !0) : !1
    },
    onTouchBegan: function (a, b) {
        if (!this.isEnabled() || !this.isVisible()) return !1;
        var c = this.getTouchLocation(a);
        return this._checkSliderPosition(c)
    },
    onTouchMoved: function (a, b) {
        var c = this.getTouchLocation(a);
        this._checkSliderPosition(c)
    }
});
_p = cc.ControlHuePicker.prototype;
cc.defineGetterSetter(_p, "hue", _p.getHue, _p.setHue);
cc.defineGetterSetter(_p, "huePercent", _p.getHuePercentage, _p.setHuePercentage);
cc.defineGetterSetter(_p, "background", _p.getBackground);
cc.defineGetterSetter(_p, "slider", _p.getSlider);
cc.defineGetterSetter(_p, "startPos", _p.getStartPos);
_p = null;
cc.ControlHuePicker.create = function (a, b) {
    return new cc.ControlHuePicker(a, b)
};
cc.ControlColourPicker = cc.Control.extend({
    _hsv: null,
    _colourPicker: null,
    _huePicker: null,
    _background: null,
    _className: "ControlColourPicker",
    ctor: function () {
        cc.Control.prototype.ctor.call(this);
        this.init()
    },
    hueSliderValueChanged: function (a, b) {
        this._hsv.h = a.getHue();
        var c = cc.ControlUtils.RGBfromHSV(this._hsv);
        cc.Control.prototype.setColor.call(this, cc.color(0 | 255 * c.r, 0 | 255 * c.g, 0 | 255 * c.b));
        this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED);
        this._updateControlPicker()
    },
    colourSliderValueChanged: function (a,
        b) {
        this._hsv.s = a.getSaturation();
        this._hsv.v = a.getBrightness();
        var c = cc.ControlUtils.RGBfromHSV(this._hsv);
        cc.Control.prototype.setColor.call(this, cc.color(0 | 255 * c.r, 0 | 255 * c.g, 0 | 255 * c.b));
        this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)
    },
    setColor: function (a) {
        cc.Control.prototype.setColor.call(this, a);
        var b = new cc.RGBA;
        b.r = a.r / 255;
        b.g = a.g / 255;
        b.b = a.b / 255;
        b.a = 1;
        this._hsv = cc.ControlUtils.HSVfromRGB(b);
        this._updateHueAndControlPicker()
    },
    getBackground: function () {
        return this._background
    },
    init: function () {
        if (cc.Control.prototype.init.call(this)) {
            cc.spriteFrameCache.addSpriteFrames(res.CCControlColourPickerSpriteSheet_plist);
            var a = new cc.SpriteBatchNode(res.CCControlColourPickerSpriteSheet_png);
            this.addChild(a);
            this._hsv = new cc.HSV(0, 0, 0);
            this._background = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("menuColourPanelBackground.png", a, cc.p(0, 0), cc.p(0.5, 0.5));
            var b = cc.pSub(this._background.getPosition(), cc.p(this._background.getContentSize().width / 2, this._background.getContentSize().height /
                2));
            this._huePicker = new cc.ControlHuePicker(a, cc.p(b.x + 8, b.y + 8));
            this._colourPicker = new cc.ControlSaturationBrightnessPicker(a, cc.p(b.x + 28, b.y + 28));
            this._huePicker.addTargetWithActionForControlEvents(this, this.hueSliderValueChanged, cc.CONTROL_EVENT_VALUECHANGED);
            this._colourPicker.addTargetWithActionForControlEvents(this, this.colourSliderValueChanged, cc.CONTROL_EVENT_VALUECHANGED);
            this._updateHueAndControlPicker();
            this.addChild(this._huePicker);
            this.addChild(this._colourPicker);
            this.setContentSize(this._background.getContentSize());
            return !0
        }
        return !1
    },
    _updateControlPicker: function () {
        this._huePicker.setHue(this._hsv.h);
        this._colourPicker.updateWithHSV(this._hsv)
    },
    _updateHueAndControlPicker: function () {
        this._huePicker.setHue(this._hsv.h);
        this._colourPicker.updateWithHSV(this._hsv);
        this._colourPicker.updateDraggerWithHSV(this._hsv)
    },
    setEnabled: function (a) {
        cc.Control.prototype.setEnabled.call(this, a);
        null !== this._huePicker && this._huePicker.setEnabled(a);
        this._colourPicker && this._colourPicker.setEnabled(a)
    },
    onTouchBegan: function () {
        return !1
    }
});
_p = cc.ControlColourPicker.prototype;
cc.defineGetterSetter(_p, "background", _p.getBackground);
_p = null;
cc.ControlColourPicker.create = function () {
    return new cc.ControlColourPicker
};
var res = res || {};
res.CCControlColourPickerSpriteSheet_plist = res.CCControlColourPickerSpriteSheet_plist || "res/extensions/CCControlColourPickerSpriteSheet.plist";
res.CCControlColourPickerSpriteSheet_png = res.CCControlColourPickerSpriteSheet_png || "res/extensions/CCControlColourPickerSpriteSheet.png";
cc.SLIDER_MARGIN_H = 24;
cc.SLIDER_MARGIN_V = 8;
cc.ControlSlider = cc.Control.extend({
    _value: 0,
    _minimumValue: 0,
    _maximumValue: 0,
    _minimumAllowedValue: 0,
    _maximumAllowedValue: 0,
    _thumbSprite: null,
    _progressSprite: null,
    _backgroundSprite: null,
    _className: "ControlSlider",
    ctor: function (a, b, c) {
        cc.Control.prototype.ctor.call(this);
        void 0 != c && (a = new cc.Sprite(a), b = new cc.Sprite(b), c = new cc.Sprite(c), this.initWithSprites(a, b, c))
    },
    getValue: function () {
        return this._value
    },
    setValue: function (a) {
        a = Math.max(a, this._minimumValue);
        this._value = a = Math.min(a, this._maximumValue);
        this.needsLayout();
        this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)
    },
    getMinimumValue: function () {
        return this._minimumValue
    },
    setMinimumValue: function (a) {
        this._minimumAllowedValue = this._minimumValue = a;
        this._minimumValue >= this._maximumValue && (this._maximumValue = this._minimumValue + 1);
        this.setValue(this._value)
    },
    getMaximumValue: function () {
        return this._maximumValue
    },
    setMaximumValue: function (a) {
        this._maximumAllowedValue = this._maximumValue = a;
        this._maximumValue <= this._minimumValue && (this._minimumValue =
            this._maximumValue - 1);
        this.setValue(this._value)
    },
    isTouchInside: function (a) {
        a = a.getLocation();
        a = this.getParent().convertToNodeSpace(a);
        var b = this.getBoundingBox();
        b.width += this._thumbSprite.getContentSize().width;
        b.x -= this._thumbSprite.getContentSize().width / 2;
        return cc.rectContainsPoint(b, a)
    },
    locationFromTouch: function (a) {
        a = a.getLocation();
        a = this.convertToNodeSpace(a);
        0 > a.x ? a.x = 0 : a.x > this._backgroundSprite.getContentSize().width && (a.x = this._backgroundSprite.getContentSize().width);
        return a
    },
    getMinimumAllowedValue: function () {
        return this._minimumAllowedValue
    },
    setMinimumAllowedValue: function (a) {
        this._minimumAllowedValue = a
    },
    getMaximumAllowedValue: function () {
        return this._maximumAllowedValue
    },
    setMaximumAllowedValue: function (a) {
        this._maximumAllowedValue = a
    },
    getThumbSprite: function () {
        return this._thumbSprite
    },
    getProgressSprite: function () {
        return this._progressSprite
    },
    getBackgroundSprite: function () {
        return this._backgroundSprite
    },
    initWithSprites: function (a, b, c) {
        return cc.Control.prototype.init.call(this) ? (this.ignoreAnchorPointForPosition(!1), this._backgroundSprite =
            a, this._progressSprite = b, this._thumbSprite = c, a = cc.ControlUtils.CCRectUnion(a.getBoundingBox(), c.getBoundingBox()), this.setContentSize(a.width, a.height), this._backgroundSprite.setAnchorPoint(0.5, 0.5), this._backgroundSprite.setPosition(a.width / 2, a.height / 2), this.addChild(this._backgroundSprite), this._progressSprite.setAnchorPoint(0, 0.5), this._progressSprite.setPosition(0, a.height / 2), this.addChild(this._progressSprite), this._thumbSprite.setPosition(0, a.height / 2), this.addChild(this._thumbSprite), this._minimumValue =
            0, this._maximumValue = 1, this.setValue(this._minimumValue), !0) : !1
    },
    setEnabled: function (a) {
        cc.Control.prototype.setEnabled.call(this, a);
        this._thumbSprite && this._thumbSprite.setOpacity(a ? 255 : 128)
    },
    sliderBegan: function (a) {
        this.setSelected(!0);
        this._thumbSprite.setColor(cc.color.GRAY);
        this.setValue(this.valueForLocation(a))
    },
    sliderMoved: function (a) {
        this.setValue(this.valueForLocation(a))
    },
    sliderEnded: function (a) {
        this.isSelected() && this.setValue(this.valueForLocation(this._thumbSprite.getPosition()));
        this._thumbSprite.setColor(cc.color.WHITE);
        this.setSelected(!1)
    },
    getTouchLocationInControl: function (a) {
        a = a.getLocation();
        a = this.convertToNodeSpace(a);
        0 > a.x ? a.x = 0 : a.x > this._backgroundSprite.getContentSize().width + cc.SLIDER_MARGIN_H && (a.x = this._backgroundSprite.getContentSize().width + cc.SLIDER_MARGIN_H);
        return a
    },
    onTouchBegan: function (a, b) {
        if (!this.isTouchInside(a) || !this.isEnabled() || !this.isVisible()) return !1;
        var c = this.locationFromTouch(a);
        this.sliderBegan(c);
        return !0
    },
    onTouchMoved: function (a, b) {
        var c = this.locationFromTouch(a);
        this.sliderMoved(c)
    },
    onTouchEnded: function (a, b) {
        this.sliderEnded(cc.p(0, 0))
    },
    needsLayout: function () {
        this._thumbSprite.setPositionX((this._value - this._minimumValue) / (this._maximumValue - this._minimumValue) * this._backgroundSprite.getContentSize().width);
        var a = this._progressSprite.getTextureRect(),
            a = cc.rect(a.x, a.y, this._thumbSprite.getPositionX(), a.height);
        this._progressSprite.setTextureRect(a, this._progressSprite.isTextureRectRotated());
        this._thumbSprite._renderCmd.transform(this._renderCmd)
    },
    valueForLocation: function (a) {
        a =
            a.x / this._backgroundSprite.getContentSize().width;
        return Math.max(Math.min(this._minimumValue + a * (this._maximumValue - this._minimumValue), this._maximumAllowedValue), this._minimumAllowedValue)
    }
});
_p = cc.ControlSlider.prototype;
cc.defineGetterSetter(_p, "value", _p.getValue, _p.setValue);
cc.defineGetterSetter(_p, "minValue", _p.getMinimumValue, _p.setMinimumValue);
cc.defineGetterSetter(_p, "maxValue", _p.getMaximumValue, _p.setMaximumValue);
cc.defineGetterSetter(_p, "minAllowedValue", _p.getMinimumAllowedValue, _p.setMinimumAllowedValue);
cc.defineGetterSetter(_p, "maxAllowedValue", _p.getMaximumAllowedValue, _p.setMaximumAllowedValue);
cc.defineGetterSetter(_p, "thumbSprite", _p.getThumbSprite);
cc.defineGetterSetter(_p, "progressSprite", _p.getProgressSprite);
cc.defineGetterSetter(_p, "backgroundSprite", _p.getBackgroundSprite);
_p = null;
cc.ControlSlider.create = function (a, b, c) {
    return new cc.ControlSlider(a, b, c)
};
cc.ControlSwitch = cc.Control.extend({
    _switchSprite: null,
    _initialTouchXPosition: 0,
    _moved: !1,
    _on: !1,
    _className: "ControlSwitch",
    ctor: function (a, b, c, d, f, g) {
        cc.Control.prototype.ctor.call(this);
        g && this.initWithMaskSprite(a, b, c, d, f, g)
    },
    initWithMaskSprite: function (a, b, c, d, f, g) {
        if (!a) throw Error("cc.ControlSwitch.initWithMaskSprite(): maskSprite should be non-null.");
        if (!b) throw Error("cc.ControlSwitch.initWithMaskSprite(): onSprite should be non-null.");
        if (!c) throw Error("cc.ControlSwitch.initWithMaskSprite(): offSprite should be non-null.");
        if (!d) throw Error("cc.ControlSwitch.initWithMaskSprite(): thumbSprite should be non-null.");
        return this.init() ? (this._on = !0, this._switchSprite = new cc.ControlSwitchSprite, this._switchSprite.initWithMaskSprite(a, b, c, d, f, g), this._switchSprite.setPosition(this._switchSprite.getContentSize().width / 2, this._switchSprite.getContentSize().height / 2), this.addChild(this._switchSprite), this.ignoreAnchorPointForPosition(!1), this.setAnchorPoint(0.5, 0.5), this.setContentSize(this._switchSprite.getContentSize()), !0) :
            !1
    },
    setOn: function (a, b) {
        b = b || !1;
        var c = (this._on = a) ? this._switchSprite.getOnPosition() : this._switchSprite.getOffPosition();
        b ? this._switchSprite.runAction(new cc.ActionTween(0.2, "sliderXPosition", this._switchSprite.getSliderXPosition(), c)) : this._switchSprite.setSliderXPosition(c);
        this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)
    },
    isOn: function () {
        return this._on
    },
    hasMoved: function () {
        return this._moved
    },
    setEnabled: function (a) {
        this._enabled = a;
        this._switchSprite.setOpacity(a ? 255 : 128)
    },
    locationFromTouch: function (a) {
        a =
            a.getLocation();
        return a = this.convertToNodeSpace(a)
    },
    onTouchBegan: function (a, b) {
        if (!this.isTouchInside(a) || !this.isEnabled() || !this.isVisible()) return !1;
        this._moved = !1;
        this._initialTouchXPosition = this.locationFromTouch(a).x - this._switchSprite.getSliderXPosition();
        this._switchSprite.getThumbSprite().setColor(cc.color.GRAY);
        this._switchSprite.needsLayout();
        return !0
    },
    onTouchMoved: function (a, b) {
        var c = this.locationFromTouch(a),
            c = cc.p(c.x - this._initialTouchXPosition, 0);
        this._moved = !0;
        this._switchSprite.setSliderXPosition(c.x)
    },
    onTouchEnded: function (a, b) {
        var c = this.locationFromTouch(a);
        this._switchSprite.getThumbSprite().setColor(cc.color.WHITE);
        this.hasMoved() ? this.setOn(!(c.x < this._switchSprite.getContentSize().width / 2), !0) : this.setOn(!this._on, !0)
    },
    onTouchCancelled: function (a, b) {
        var c = this.locationFromTouch(a);
        this._switchSprite.getThumbSprite().setColor(cc.color.WHITE);
        this.hasMoved() ? this.setOn(!(c.x < this._switchSprite.getContentSize().width / 2), !0) : this.setOn(!this._on, !0)
    }
});
cc.ControlSwitch.create = function (a, b, c, d, f, g) {
    return new cc.ControlSwitch(a, b, c, d, f, g)
};
cc.ControlSwitchSprite = cc.Sprite.extend({
    _sliderXPosition: 0,
    _onPosition: 0,
    _offPosition: 0,
    _textureLocation: 0,
    _maskLocation: 0,
    _maskSize: null,
    _onSprite: null,
    _offSprite: null,
    _thumbSprite: null,
    _onLabel: null,
    _offLabel: null,
    _clipper: null,
    _stencil: null,
    _backRT: null,
    ctor: function () {
        cc.Sprite.prototype.ctor.call(this);
        this._maskLocation = this._offPosition = this._onPosition = this._sliderXPosition = 0;
        this._maskSize = cc.size(0, 0);
        this._offLabel = this._onLabel = this._thumbSprite = this._offSprite = this._onSprite = null
    },
    initWithMaskSprite: function (a,
        b, c, d, f, g) {
        return cc.Sprite.prototype.init.call(this) ? (this.setSpriteFrame(a.displayFrame()), this._onPosition = 0, this._offPosition = -b.getContentSize().width + d.getContentSize().width / 2, this._sliderXPosition = this._onPosition, this.setOnSprite(b), this.setOffSprite(c), this.setThumbSprite(d), this.setOnLabel(f), this.setOffLabel(g), this._stencil = a, a = this._maskSize = this._stencil.getContentSize(), this._stencil.setPosition(0, 0), this._clipper = new cc.ClippingNode, this._clipper.setAnchorPoint(0.5, 0.5), this._clipper.setPosition(a.width /
            2, a.height / 2), this._clipper.setStencil(this._stencil), this.addChild(this._clipper), this._clipper.addChild(b), this._clipper.addChild(c), this._clipper.addChild(f), this._clipper.addChild(g), this.addChild(this._thumbSprite), this.needsLayout(), !0) : !1
    },
    needsLayout: function () {
        var a = this._maskSize;
        this._onSprite.setPosition(this._onSprite.getContentSize().width / 2 + this._sliderXPosition - a.width / 2, this._onSprite.getContentSize().height / 2 - a.height / 2);
        this._offSprite.setPosition(this._onSprite.getContentSize().width +
            this._offSprite.getContentSize().width / 2 + this._sliderXPosition - a.width / 2, this._offSprite.getContentSize().height / 2 - a.height / 2);
        this._onLabel && this._onLabel.setPosition(this._onSprite.getPositionX() - this._thumbSprite.getContentSize().width / 6, this._onSprite.getContentSize().height / 2 - a.height / 2);
        this._offLabel && this._offLabel.setPosition(this._offSprite.getPositionX() + this._thumbSprite.getContentSize().width / 6, this._offSprite.getContentSize().height / 2 - a.height / 2);
        this._thumbSprite.setPosition(this._onSprite.getContentSize().width +
            this._sliderXPosition, this._maskSize.height / 2)
    },
    setSliderXPosition: function (a) {
        a <= this._offPosition ? a = this._offPosition : a >= this._onPosition && (a = this._onPosition);
        this._sliderXPosition = a;
        this.needsLayout()
    },
    getSliderXPosition: function () {
        return this._sliderXPosition
    },
    _getOnSideWidth: function () {
        return this._onSprite.getContentSize().width
    },
    _getOffSideWidth: function () {
        return this._offSprite.getContentSize().height
    },
    updateTweenAction: function (a, b) {
        "sliderXPosition" === b && this.setSliderXPosition(a)
    },
    setOnPosition: function (a) {
        this._onPosition =
            a
    },
    getOnPosition: function () {
        return this._onPosition
    },
    setOffPosition: function (a) {
        this._offPosition = a
    },
    getOffPosition: function () {
        return this._offPosition
    },
    setMaskTexture: function (a) {
        this._stencil.setTexture(a)
    },
    getMaskTexture: function () {
        return this._stencil.getTexture()
    },
    setTextureLocation: function (a) {
        this._textureLocation = a
    },
    getTextureLocation: function () {
        return this._textureLocation
    },
    setMaskLocation: function (a) {
        this._maskLocation = a
    },
    getMaskLocation: function () {
        return this._maskLocation
    },
    setOnSprite: function (a) {
        this._onSprite =
            a
    },
    getOnSprite: function () {
        return this._onSprite
    },
    setOffSprite: function (a) {
        this._offSprite = a
    },
    getOffSprite: function () {
        return this._offSprite
    },
    setThumbSprite: function (a) {
        this._thumbSprite = a
    },
    getThumbSprite: function () {
        return this._thumbSprite
    },
    setOnLabel: function (a) {
        this._onLabel = a
    },
    getOnLabel: function () {
        return this._onLabel
    },
    setOffLabel: function (a) {
        this._offLabel = a
    },
    getOffLabel: function () {
        return this._offLabel
    }
});
_p = cc.ControlSwitchSprite.prototype;
cc.defineGetterSetter(_p, "sliderX", _p.getSliderXPosition, _p.setSliderXPosition);
cc.defineGetterSetter(_p, "onPos", _p.getOnPosition, _p.setOnPosition);
cc.defineGetterSetter(_p, "offPos", _p.getOffPosition, _p.setOffPosition);
cc.defineGetterSetter(_p, "maskTexture", _p.getMaskTexture, _p.setMaskTexture);
cc.defineGetterSetter(_p, "maskPos", _p.getMaskLocation, _p.setMaskLocation);
cc.defineGetterSetter(_p, "onSprite", _p.getOnSprite, _p.setOnSprite);
cc.defineGetterSetter(_p, "offSprite", _p.getOffSprite, _p.setOffSprite);
cc.defineGetterSetter(_p, "thumbSprite", _p.getThumbSprite, _p.setThumbSprite);
cc.defineGetterSetter(_p, "onLabel", _p.getOnLabel, _p.setOnLabel);
cc.defineGetterSetter(_p, "offLabel", _p.getOffLabel, _p.setOffLabel);
cc.defineGetterSetter(_p, "onSideWidth", _p._getOnSideWidth);
cc.defineGetterSetter(_p, "offSideWidth", _p._getOffSideWidth);
_p = null;
cc.CONTROL_STEPPER_PARTMINUS = 0;
cc.CONTROL_STEPPER_PARTPLUS = 1;
cc.CONTROL_STEPPER_PARTNONE = 2;
cc.CONTROL_STEPPER_LABELCOLOR_ENABLED = cc.color(55, 55, 55);
cc.CONTROL_STEPPER_LABELCOLOR_DISABLED = cc.color(147, 147, 147);
cc.CONTROL_STEPPER_LABELFONT = "CourierNewPSMT";
cc.AUTOREPEAT_DELTATIME = 0.15;
cc.AUTOREPEAT_INCREASETIME_INCREMENT = 12;
cc.ControlStepper = cc.Control.extend({
    _minusSprite: null,
    _plusSprite: null,
    _minusLabel: null,
    _plusLabel: null,
    _value: 0,
    _continuous: !1,
    _autorepeat: !1,
    _wraps: !1,
    _minimumValue: 0,
    _maximumValue: 0,
    _stepValue: 0,
    _touchInsideFlag: !1,
    _touchedPart: cc.CONTROL_STEPPER_PARTNONE,
    _autorepeatCount: 0,
    _className: "ControlStepper",
    ctor: function (a, b) {
        cc.Control.prototype.ctor.call(this);
        this._plusLabel = this._minusLabel = this._plusSprite = this._minusSprite = null;
        this._value = 0;
        this._wraps = this._autorepeat = this._continuous = !1;
        this._stepValue =
            this._maximumValue = this._minimumValue = 0;
        this._touchInsideFlag = !1;
        this._touchedPart = cc.CONTROL_STEPPER_PARTNONE;
        this._autorepeatCount = 0;
        b && this.initWithMinusSpriteAndPlusSprite(a, b)
    },
    initWithMinusSpriteAndPlusSprite: function (a, b) {
        if (!a) throw Error("cc.ControlStepper.initWithMinusSpriteAndPlusSprite(): Minus sprite should be non-null.");
        if (!b) throw Error("cc.ControlStepper.initWithMinusSpriteAndPlusSprite(): Plus sprite should be non-null.");
        if (this.init()) {
            this._continuous = this._autorepeat = !0;
            this._minimumValue =
                0;
            this._maximumValue = 100;
            this._value = 0;
            this._stepValue = 1;
            this._wraps = !1;
            this.ignoreAnchorPointForPosition(!1);
            this.setMinusSprite(a);
            this._minusSprite.setPosition(a.getContentSize().width / 2, a.getContentSize().height / 2);
            this.addChild(this._minusSprite);
            this.setMinusLabel(new cc.LabelTTF("-", cc.CONTROL_STEPPER_LABELFONT, 40, cc.size(40, 40), cc.TEXT_ALIGNMENT_CENTER, cc.VERTICAL_TEXT_ALIGNMENT_CENTER));
            this._minusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_DISABLED);
            this._minusLabel.setPosition(this._minusSprite.getContentSize().width /
                2, this._minusSprite.getContentSize().height / 2);
            this._minusSprite.addChild(this._minusLabel);
            this.setPlusSprite(b);
            this._plusSprite.setPosition(a.getContentSize().width + b.getContentSize().width / 2, a.getContentSize().height / 2);
            this.addChild(this._plusSprite);
            this.setPlusLabel(new cc.LabelTTF("+", cc.CONTROL_STEPPER_LABELFONT, 40, cc.size(40, 40), cc.TEXT_ALIGNMENT_CENTER, cc.VERTICAL_TEXT_ALIGNMENT_CENTER));
            this._plusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_ENABLED);
            this._plusLabel.setPosition(this._plusSprite.getContentSize().width /
                2, this._plusSprite.getContentSize().height / 2);
            this._plusSprite.addChild(this._plusLabel);
            var c = cc.ControlUtils.CCRectUnion(this._minusSprite.getBoundingBox(), this._plusSprite.getBoundingBox());
            this.setContentSize(this._minusSprite.getContentSize().width + this._plusSprite.getContentSize().height, c.height);
            return !0
        }
        return !1
    },
    setWraps: function (a) {
        if (this._wraps = a) this._minusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_ENABLED), this._plusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_ENABLED);
        this.setValue(this._value)
    },
    getWraps: function () {
        return this._wraps
    },
    setMinimumValue: function (a) {
        if (a >= this._maximumValue) throw Error("cc.ControlStepper.setMinimumValue(): minimumValue should be numerically less than maximumValue.");
        this._minimumValue = a;
        this.setValue(this._value)
    },
    getMinimumValue: function () {
        return this._minimumValue
    },
    setMaximumValue: function (a) {
        if (a <= this._minimumValue) throw Error("cc.ControlStepper.setMaximumValue(): maximumValue should be numerically less than maximumValue.");
        this._maximumValue = a;
        this.setValue(this._value)
    },
    getMaximumValue: function () {
        return this._maximumValue
    },
    setValue: function (a) {
        this.setValueWithSendingEvent(a, !0)
    },
    getValue: function () {
        return this._value
    },
    setStepValue: function (a) {
        if (0 >= a) throw Error("cc.ControlStepper.setMaximumValue(): stepValue should be numerically greater than 0.");
        this._stepValue = a
    },
    getStepValue: function () {
        return this._stepValue
    },
    isContinuous: function () {
        return this._continuous
    },
    setValueWithSendingEvent: function (a, b) {
        a < this._minimumValue ? a = this._wraps ? this._maximumValue : this._minimumValue :
            a > this._maximumValue && (a = this._wraps ? this._minimumValue : this._maximumValue);
        this._value = a;
        this._wraps || (this._minusLabel.setColor(a === this._minimumValue ? cc.CONTROL_STEPPER_LABELCOLOR_DISABLED : cc.CONTROL_STEPPER_LABELCOLOR_ENABLED), this._plusLabel.setColor(a === this._maximumValue ? cc.CONTROL_STEPPER_LABELCOLOR_DISABLED : cc.CONTROL_STEPPER_LABELCOLOR_ENABLED));
        b && this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)
    },
    startAutorepeat: function () {
        this._autorepeatCount = -1;
        this.schedule(this.update,
            cc.AUTOREPEAT_DELTATIME, cc.REPEAT_FOREVER, 3 * cc.AUTOREPEAT_DELTATIME)
    },
    stopAutorepeat: function () {
        this.unschedule(this.update)
    },
    update: function (a) {
        this._autorepeatCount++;
        this._autorepeatCount < cc.AUTOREPEAT_INCREASETIME_INCREMENT && 0 !== this._autorepeatCount % 3 || (this._touchedPart === cc.CONTROL_STEPPER_PARTMINUS ? this.setValueWithSendingEvent(this._value - this._stepValue, this._continuous) : this._touchedPart === cc.CONTROL_STEPPER_PARTPLUS && this.setValueWithSendingEvent(this._value + this._stepValue, this._continuous))
    },
    updateLayoutUsingTouchLocation: function (a) {
        a.x < this._minusSprite.getContentSize().width && this._value > this._minimumValue ? (this._touchedPart = cc.CONTROL_STEPPER_PARTMINUS, this._minusSprite.setColor(cc.color.GRAY), this._plusSprite.setColor(cc.color.WHITE)) : a.x >= this._minusSprite.getContentSize().width && this._value < this._maximumValue ? (this._touchedPart = cc.CONTROL_STEPPER_PARTPLUS, this._minusSprite.setColor(cc.color.WHITE), this._plusSprite.setColor(cc.color.GRAY)) : (this._touchedPart = cc.CONTROL_STEPPER_PARTNONE,
            this._minusSprite.setColor(cc.color.WHITE), this._plusSprite.setColor(cc.color.WHITE))
    },
    onTouchBegan: function (a, b) {
        if (!this.isTouchInside(a) || !this.isEnabled() || !this.isVisible()) return !1;
        var c = this.getTouchLocation(a);
        this.updateLayoutUsingTouchLocation(c);
        this._touchInsideFlag = !0;
        this._autorepeat && this.startAutorepeat();
        return !0
    },
    onTouchMoved: function (a, b) {
        if (this.isTouchInside(a)) {
            var c = this.getTouchLocation(a);
            this.updateLayoutUsingTouchLocation(c);
            this._touchInsideFlag || (this._touchInsideFlag = !0, this._autorepeat && this.startAutorepeat())
        } else this._touchInsideFlag = !1, this._touchedPart = cc.CONTROL_STEPPER_PARTNONE, this._minusSprite.setColor(cc.color.WHITE), this._plusSprite.setColor(cc.color.WHITE), this._autorepeat && this.stopAutorepeat()
    },
    onTouchEnded: function (a, b) {
        this._minusSprite.setColor(cc.color.WHITE);
        this._plusSprite.setColor(cc.color.WHITE);
        this._autorepeat && this.stopAutorepeat();
        if (this.isTouchInside(a)) {
            var c = this.getTouchLocation(a);
            this.setValue(this._value + (c.x < this._minusSprite.getContentSize().width ?
                0 - this._stepValue : this._stepValue))
        }
    },
    setMinusSprite: function (a) {
        this._minusSprite = a
    },
    getMinusSprite: function () {
        return this._minusSprite
    },
    setPlusSprite: function (a) {
        this._plusSprite = a
    },
    getPlusSprite: function () {
        return this._plusSprite
    },
    setMinusLabel: function (a) {
        this._minusLabel = a
    },
    getMinusLabel: function () {
        return this._minusLabel
    },
    setPlusLabel: function (a) {
        this._plusLabel = a
    },
    getPlusLabel: function () {
        return this._plusLabel
    }
});
_p = cc.ControlStepper.prototype;
cc.defineGetterSetter(_p, "wraps", _p.getWraps, _p.setWraps);
cc.defineGetterSetter(_p, "value", _p.getValue, _p.setValue);
cc.defineGetterSetter(_p, "minValue", _p.getMinimumValue, _p.setMinimumValue);
cc.defineGetterSetter(_p, "maxValue", _p.getMaximumValue, _p.setMaximumValue);
cc.defineGetterSetter(_p, "stepValue", _p.getStepValue, _p.setStepValue);
cc.defineGetterSetter(_p, "continuous", _p.isContinuous);
cc.defineGetterSetter(_p, "minusSprite", _p.getMinusSprite, _p.setMinusSprite);
cc.defineGetterSetter(_p, "plusSprite", _p.getPlusSprite, _p.setPlusSprite);
cc.defineGetterSetter(_p, "minusLabel", _p.getMinusLabel, _p.setMinusLabel);
cc.defineGetterSetter(_p, "plusLabel", _p.getPlusLabel, _p.setPlusLabel);
_p = null;
cc.ControlStepper.create = function (a, b) {
    return new cc.ControlStepper(a, b)
};
cc.ControlPotentiometer = cc.Control.extend({
    _thumbSprite: null,
    _progressTimer: null,
    _previousLocation: null,
    _value: 0,
    _minimumValue: 0,
    _maximumValue: 1,
    _className: "ControlPotentiometer",
    ctor: function (a, b, c) {
        cc.Control.prototype.ctor.call(this);
        void 0 != c && (a = new cc.Sprite(a), c = new cc.Sprite(c), b = new cc.ProgressTimer(new cc.Sprite(b)), this.initWithTrackSprite_ProgressTimer_ThumbSprite(a, b, c))
    },
    initWithTrackSprite_ProgressTimer_ThumbSprite: function (a, b, c) {
        return this.init() ? (this.setProgressTimer(b), this.setThumbSprite(c),
            this._thumbSprite.setPosition(b.getPosition()), this.addChild(c, 2), this.addChild(b, 1), this.addChild(a), this.setContentSize(a.getContentSize()), this._minimumValue = 0, this._maximumValue = 1, this.setValue(this._minimumValue), !0) : !1
    },
    setEnabled: function (a) {
        this.setEnabled(a);
        null !== this._thumbSprite && this._thumbSprite.setOpacity(a ? 255 : 128)
    },
    setValue: function (a) {
        a < this._minimumValue && (a = this._minimumValue);
        a > this._maximumValue && (a = this._maximumValue);
        this._value = a;
        a = (a - this._minimumValue) / (this._maximumValue -
            this._minimumValue);
        this._progressTimer.setPercentage(100 * a);
        this._thumbSprite.setRotation(360 * a);
        this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)
    },
    getValue: function () {
        return this._value
    },
    setMinimumValue: function (a) {
        this._minimumValue = a;
        this._minimumValue >= this._maximumValue && (this._maximumValue = this._minimumValue + 1);
        this.setValue(this._maximumValue)
    },
    getMinimumValue: function () {
        return this._minimumValue
    },
    setMaximumValue: function (a) {
        this._maximumValue = a;
        this._maximumValue <= this._minimumValue &&
            (this._minimumValue = this._maximumValue - 1);
        this.setValue(this._minimumValue)
    },
    getMaximumValue: function () {
        return this._maximumValue
    },
    isTouchInside: function (a) {
        a = this.getTouchLocation(a);
        return this.distanceBetweenPointAndPoint(this._progressTimer.getPosition(), a) < Math.min(this.getContentSize().width / 2, this.getContentSize().height / 2)
    },
    onTouchBegan: function (a, b) {
        if (!this.isTouchInside(a) || !this.isEnabled() || !this.isVisible()) return !1;
        this._previousLocation = this.getTouchLocation(a);
        this.potentiometerBegan(this._previousLocation);
        return !0
    },
    onTouchMoved: function (a, b) {
        var c = this.getTouchLocation(a);
        this.potentiometerMoved(c)
    },
    onTouchEnded: function (a, b) {
        this.potentiometerEnded(cc.p(0, 0))
    },
    distanceBetweenPointAndPoint: function (a, b) {
        var c = a.x - b.x,
            d = a.y - b.y;
        return Math.sqrt(c * c + d * d)
    },
    angleInDegreesBetweenLineFromPoint_toPoint_toLineFromPoint_toPoint: function (a, b, c, d) {
        var f = d.x - c.x;
        c = d.y - c.y;
        a = Math.atan2(b.x - a.x, b.y - a.y);
        f = Math.atan2(f, c);
        return 180 * (a - f) / Math.PI
    },
    potentiometerBegan: function (a) {
        this.setSelected(!0);
        this.getThumbSprite().setColor(cc.color.GRAY)
    },
    potentiometerMoved: function (a) {
        var b = this.angleInDegreesBetweenLineFromPoint_toPoint_toLineFromPoint_toPoint(this._progressTimer.getPosition(), a, this._progressTimer.getPosition(), this._previousLocation);
        180 < b ? b -= 360 : -180 > b && (b += 360);
        this.setValue(this._value + b / 360 * (this._maximumValue - this._minimumValue));
        this._previousLocation = a
    },
    potentiometerEnded: function (a) {
        this.getThumbSprite().setColor(cc.color.WHITE);
        this.setSelected(!1)
    },
    setThumbSprite: function (a) {
        this._thumbSprite = a
    },
    getThumbSprite: function () {
        return this._thumbSprite
    },
    setProgressTimer: function (a) {
        this._progressTimer = a
    },
    getProgressTimer: function () {
        return this._progressTimer
    },
    setPreviousLocation: function (a) {
        this._previousLocation = a
    },
    getPreviousLocation: function () {
        return this._previousLocation
    }
});
_p = cc.ControlPotentiometer.prototype;
cc.defineGetterSetter(_p, "value", _p.getValue, _p.setValue);
cc.defineGetterSetter(_p, "minValue", _p.getMinimumValue, _p.setMinimumValue);
cc.defineGetterSetter(_p, "maxValue", _p.getMaximumValue, _p.setMaximumValue);
cc.defineGetterSetter(_p, "progressTimer", _p.getProgressTimer, _p.setProgressTimer);
cc.defineGetterSetter(_p, "thumbSprite", _p.getThumbSprite, _p.setThumbSprite);
cc.defineGetterSetter(_p, "prevLocation", _p.getPreviousLocation, _p.setPreviousLocation);
_p = null;
cc.ControlPotentiometer.create = function (a, b, c) {
    return new cc.ControlPotentiometer(a, b, c)
};
cc.SCROLLVIEW_DIRECTION_NONE = -1;
cc.SCROLLVIEW_DIRECTION_HORIZONTAL = 0;
cc.SCROLLVIEW_DIRECTION_VERTICAL = 1;
cc.SCROLLVIEW_DIRECTION_BOTH = 2;
var SCROLL_DEACCEL_RATE = 0.95,
    SCROLL_DEACCEL_DIST = 1,
    BOUNCE_DURATION = 0.15,
    INSET_RATIO = 0.2,
    MOVE_INCH = 0.04375,
    BOUNCE_BACK_FACTOR = 0.35;
cc.convertDistanceFromPointToInch = function (a) {
    var b = cc.view,
        b = (b.getScaleX() + b.getScaleY()) / 2;
    return a * b / 160
};
cc.ScrollViewDelegate = cc.Class.extend({
    scrollViewDidScroll: function (a) {},
    scrollViewDidZoom: function (a) {}
});
cc.ScrollView = cc.Layer.extend({
    _zoomScale: 0,
    _minZoomScale: 0,
    _maxZoomScale: 0,
    _delegate: null,
    _direction: cc.SCROLLVIEW_DIRECTION_BOTH,
    _dragging: !1,
    _contentOffset: null,
    _container: null,
    _touchMoved: !1,
    _maxInset: null,
    _minInset: null,
    _bounceable: !1,
    _clippingToBounds: !1,
    _scrollDistance: null,
    _touchPoint: null,
    _touchLength: 0,
    _touches: null,
    _viewSize: null,
    _minScale: 0,
    _maxScale: 0,
    _parentScissorRect: null,
    _scissorRestored: !1,
    _tmpViewRect: null,
    _touchListener: null,
    _className: "ScrollView",
    ctor: function (a, b) {
        cc.Layer.prototype.ctor.call(this);
        this._contentOffset = cc.p(0, 0);
        this._maxInset = cc.p(0, 0);
        this._minInset = cc.p(0, 0);
        this._scrollDistance = cc.p(0, 0);
        this._touchPoint = cc.p(0, 0);
        this._touches = [];
        this._viewSize = cc.size(0, 0);
        this._parentScissorRect = new cc.Rect(0, 0, 0, 0);
        this._tmpViewRect = new cc.Rect(0, 0, 0, 0);
        void 0 != b ? this.initWithViewSize(a, b) : this.initWithViewSize(cc.size(200, 200), null)
    },
    init: function () {
        return this.initWithViewSize(cc.size(200, 200), null)
    },
    initWithViewSize: function (a, b) {
        var c = cc.p(0, 0);
        return cc.Layer.prototype.init.call(this) ?
            (!b && !this._container && (b = new cc.Layer), b && this.setContainer(b), this.setViewSize(a), this.setTouchEnabled(!0), this._touches.length = 0, this._delegate = null, this._clippingToBounds = this._bounceable = !0, this._direction = cc.SCROLLVIEW_DIRECTION_BOTH, this._container.setPosition(c), this._touchLength = 0, this._minScale = this._maxScale = 1, !0) : !1
    },
    visit: function (a) {
        var b = this._renderCmd,
            c = a ? a._renderCmd : null;
        if (this._visible) {
            a = cc.renderer;
            b.visit(c);
            this._clippingToBounds && a.pushRenderCommand(b.startCmd);
            var d = this._children,
                f = d.length;
            if (0 < f) {
                this._reorderChildDirty && this.sortAllChildren();
                for (c = 0; c < f; c++) d[c].visit(this)
            }
            this._clippingToBounds && a.pushRenderCommand(b.endCmd);
            b._dirtyFlag = 0
        } else b._propagateFlagsDown(c)
    },
    setContentOffset: function (a, b) {
        if (b) this.setContentOffsetInDuration(a, BOUNCE_DURATION);
        else {
            if (!this._bounceable) {
                var c = this.minContainerOffset(),
                    d = this.maxContainerOffset();
                a.x = Math.max(c.x, Math.min(d.x, a.x));
                a.y = Math.max(c.y, Math.min(d.y, a.y))
            }
            this._container.setPosition(a);
            c = this._delegate;
            null != c &&
                c.scrollViewDidScroll && c.scrollViewDidScroll(this)
        }
    },
    getContentOffset: function () {
        var a = this._container.getPosition();
        return cc.p(a.x, a.y)
    },
    setContentOffsetInDuration: function (a, b) {
        var c = cc.moveTo(b, a),
            d = cc.callFunc(this._stoppedAnimatedScroll, this);
        this._container.runAction(cc.sequence(c, d));
        this.schedule(this._performedAnimatedScroll)
    },
    setZoomScale: function (a, b) {
        if (b) this.setZoomScaleInDuration(a, BOUNCE_DURATION);
        else {
            var c = this._container;
            if (c.getScale() !== a) {
                var d, f;
                0 === this._touchLength ? (f = this._viewSize,
                    f = cc.p(0.5 * f.width, 0.5 * f.height), f = this.convertToWorldSpace(f)) : f = this._touchPoint;
                d = c.convertToNodeSpace(f);
                c.setScale(Math.max(this._minScale, Math.min(this._maxScale, a)));
                d = c.convertToWorldSpace(d);
                f = cc.pSub(f, d);
                this._delegate && this._delegate.scrollViewDidZoom && this._delegate.scrollViewDidZoom(this);
                this.setContentOffset(cc.pAdd(c.getPosition(), f))
            }
        }
    },
    getZoomScale: function () {
        return this._container.getScale()
    },
    setZoomScaleInDuration: function (a, b) {
        if (0 < b) {
            var c = this._container.getScale();
            c !== a &&
                (c = cc.actionTween(b, "zoomScale", c, a), this.runAction(c))
        } else this.setZoomScale(a)
    },
    minContainerOffset: function () {
        var a = this._container,
            b = a.getContentSize(),
            c = this._viewSize;
        return cc.p(c.width - b.width * a.getScaleX(), c.height - b.height * a.getScaleY())
    },
    maxContainerOffset: function () {
        return cc.p(0, 0)
    },
    isNodeVisible: function (a) {
        var b = this.getContentOffset(),
            c = this.getViewSize(),
            d = this.getZoomScale(),
            b = cc.rect(-b.x / d, -b.y / d, c.width / d, c.height / d);
        return cc.rectIntersectsRect(b, a.getBoundingBox())
    },
    pause: function (a) {
        this._container.pause();
        a = this._container.getChildren();
        for (var b = 0; b < a.length; b++) a[b].pause();
        this._super()
    },
    resume: function (a) {
        a = this._container.getChildren();
        for (var b = 0, c = a.length; b < c; b++) a[b].resume();
        this._container.resume();
        this._super()
    },
    isDragging: function () {
        return this._dragging
    },
    isTouchMoved: function () {
        return this._touchMoved
    },
    isBounceable: function () {
        return this._bounceable
    },
    setBounceable: function (a) {
        this._bounceable = a
    },
    getViewSize: function () {
        return this._viewSize
    },
    setViewSize: function (a) {
        this._viewSize = a;
        cc.Node.prototype.setContentSize.call(this,
            a)
    },
    getContainer: function () {
        return this._container
    },
    setContainer: function (a) {
        a && (this.removeAllChildren(!0), this._container = a, a.ignoreAnchorPointForPosition(!1), a.setAnchorPoint(0, 0), this.addChild(a), this.setViewSize(this._viewSize))
    },
    getDirection: function () {
        return this._direction
    },
    setDirection: function (a) {
        this._direction = a
    },
    getDelegate: function () {
        return this._delegate
    },
    setDelegate: function (a) {
        this._delegate = a
    },
    onTouchBegan: function (a, b) {
        for (var c = this; null != c; c = c.parent)
            if (!c.isVisible()) return !1;
        var c = this._getViewRect(),
            d = this._container,
            f = d.convertToWorldSpace(d.convertTouchToNodeSpace(a)),
            g = this._touches;
        if (2 < g.length || this._touchMoved || !cc.rectContainsPoint(c, f)) return !1;
        g.push(a);
        1 === g.length ? (this._touchPoint = this.convertTouchToNodeSpace(a), this._touchMoved = !1, this._dragging = !0, this._scrollDistance.x = 0, this._touchLength = this._scrollDistance.y = 0) : 2 === g.length && (this._touchPoint = cc.pMidpoint(this.convertTouchToNodeSpace(g[0]), this.convertTouchToNodeSpace(g[1])), this._touchLength = cc.pDistance(d.convertTouchToNodeSpace(g[0]),
            d.convertTouchToNodeSpace(g[1])), this._dragging = !1);
        return !0
    },
    onTouchMoved: function (a, b) {
        if (this.isVisible())
            if (this.setNodeDirty(), 1 === this._touches.length && this._dragging) {
                this._touchMoved = !0;
                this._getViewRect();
                var c = this.convertTouchToNodeSpace(a),
                    d = cc.pSub(c, this._touchPoint),
                    f = 0,
                    g = this._direction,
                    h;
                if (g === cc.SCROLLVIEW_DIRECTION_VERTICAL) f = d.y, h = this._container.getPositionY(), this.minContainerOffset().y <= h && h <= this.maxContainerOffset().y || (d.y *= BOUNCE_BACK_FACTOR);
                else if (g === cc.SCROLLVIEW_DIRECTION_HORIZONTAL) f =
                    d.x, h = this._container.getPositionX(), this.minContainerOffset().x <= h && h <= this.maxContainerOffset().x || (d.x *= BOUNCE_BACK_FACTOR);
                else {
                    f = Math.sqrt(d.x * d.x + d.y * d.y);
                    h = this._container.getPositionY();
                    var m = this.minContainerOffset(),
                        n = this.maxContainerOffset();
                    m.y <= h && h <= n.y || (d.y *= BOUNCE_BACK_FACTOR);
                    h = this._container.getPositionX();
                    m.x <= h && h <= n.x || (d.x *= BOUNCE_BACK_FACTOR)
                }
                if (this._touchMoved || !(Math.abs(cc.convertDistanceFromPointToInch(f)) < MOVE_INCH))
                    if (this._touchMoved || (d.x = 0, d.y = 0), this._touchPoint =
                        c, this._touchMoved = !0, this._dragging) {
                        switch (g) {
                        case cc.SCROLLVIEW_DIRECTION_VERTICAL:
                            d.x = 0;
                            break;
                        case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:
                            d.y = 0
                        }
                        f = this._container.getPosition();
                        c = f.x + d.x;
                        f = f.y + d.y;
                        this._scrollDistance = d;
                        this.setContentOffset(cc.p(c, f))
                    }
            } else 2 === this._touches.length && !this._dragging && (d = cc.pDistance(this._container.convertTouchToNodeSpace(this._touches[0]), this._container.convertTouchToNodeSpace(this._touches[1])), this.setZoomScale(this.getZoomScale() * d / this._touchLength))
    },
    onTouchEnded: function (a,
        b) {
        this.isVisible() && (1 === this._touches.length && this._touchMoved && this.schedule(this._deaccelerateScrolling), this._touches.length = 0, this._touchMoved = this._dragging = !1)
    },
    onTouchCancelled: function (a, b) {
        this.isVisible() && (this._touches.length = 0, this._touchMoved = this._dragging = !1)
    },
    setContentSize: function (a, b) {
        null !== this.getContainer() && (void 0 === b ? this.getContainer().setContentSize(a) : this.getContainer().setContentSize(a, b), this.updateInset())
    },
    _setWidth: function (a) {
        var b = this.getContainer();
        null !==
            b && (b._setWidth(a), this.updateInset())
    },
    _setHeight: function (a) {
        var b = this.getContainer();
        null !== b && (b._setHeight(a), this.updateInset())
    },
    getContentSize: function () {
        return this._container.getContentSize()
    },
    updateInset: function () {
        if (null !== this.getContainer()) {
            var a = this._viewSize,
                b = this.maxContainerOffset();
            this._maxInset.x = b.x + a.width * INSET_RATIO;
            this._maxInset.y = b.y + a.height * INSET_RATIO;
            b = this.minContainerOffset();
            this._minInset.x = b.x - a.width * INSET_RATIO;
            this._minInset.y = b.y - a.height * INSET_RATIO
        }
    },
    isClippingToBounds: function () {
        return this._clippingToBounds
    },
    setClippingToBounds: function (a) {
        this._clippingToBounds = a
    },
    addChild: function (a, b, c) {
        if (!a) throw Error("child must not nil!");
        b = b || a.getLocalZOrder();
        c = c || a.getTag();
        this._container !== a ? this._container.addChild(a, b, c) : cc.Layer.prototype.addChild.call(this, a, b, c)
    },
    isTouchEnabled: function () {
        return null !== this._touchListener
    },
    setTouchEnabled: function (a) {
        this._touchListener && cc.eventManager.removeListener(this._touchListener);
        this._touchListener =
            null;
        a ? (a = cc.EventListener.create({
            event: cc.EventListener.TOUCH_ONE_BY_ONE
        }), this.onTouchBegan && (a.onTouchBegan = this.onTouchBegan.bind(this)), this.onTouchMoved && (a.onTouchMoved = this.onTouchMoved.bind(this)), this.onTouchEnded && (a.onTouchEnded = this.onTouchEnded.bind(this)), this.onTouchCancelled && (a.onTouchCancelled = this.onTouchCancelled.bind(this)), this._touchListener = a, cc.eventManager.addListener(a, this)) : (this._touchMoved = this._dragging = !1, this._touches.length = 0)
    },
    _initWithViewSize: function (a) {
        return null
    },
    _relocateContainer: function (a) {
        var b = this.minContainerOffset(),
            c = this.maxContainerOffset(),
            d = this._direction,
            f = this._container.getPosition(),
            g = f.x,
            h = f.y;
        if (d === cc.SCROLLVIEW_DIRECTION_BOTH || d === cc.SCROLLVIEW_DIRECTION_HORIZONTAL) g = Math.max(g, b.x), g = Math.min(g, c.x);
        if (d === cc.SCROLLVIEW_DIRECTION_BOTH || d === cc.SCROLLVIEW_DIRECTION_VERTICAL) h = Math.min(h, c.y), h = Math.max(h, b.y);
        (h !== f.y || g !== f.x) && this.setContentOffset(cc.p(g, h), a)
    },
    _deaccelerateScrolling: function (a) {
        if (this._dragging) this.unschedule(this._deaccelerateScrolling);
        else {
            var b, c;
            b = this._container.getPosition();
            a = this._scrollDistance;
            this._container.setPosition(b.x + a.x, b.y + a.y);
            this._bounceable ? (b = this._maxInset, c = this._minInset) : (b = this.maxContainerOffset(), c = this.minContainerOffset());
            var d = this._container.getPositionX(),
                f = this._container.getPositionY();
            a.x *= SCROLL_DEACCEL_RATE;
            a.y *= SCROLL_DEACCEL_RATE;
            this.setContentOffset(cc.p(d, f));
            if (Math.abs(a.x) <= SCROLL_DEACCEL_DIST && Math.abs(a.y) <= SCROLL_DEACCEL_DIST || f > b.y || f < c.y || d > b.x || d < c.x || d === b.x || d === c.x || f ===
                b.y || f === c.y) this.unschedule(this._deaccelerateScrolling), this._relocateContainer(!0)
        }
    },
    _performedAnimatedScroll: function (a) {
        this._dragging ? this.unschedule(this._performedAnimatedScroll) : this._delegate && this._delegate.scrollViewDidScroll && this._delegate.scrollViewDidScroll(this)
    },
    _stoppedAnimatedScroll: function (a) {
        this.unschedule(this._performedAnimatedScroll);
        this._delegate && this._delegate.scrollViewDidScroll && this._delegate.scrollViewDidScroll(this)
    },
    _handleZoom: function () {},
    _getViewRect: function () {
        for (var a =
                this.convertToWorldSpace(cc.p(0, 0)), b = this._viewSize, c = this.getScaleX(), d = this.getScaleY(), f = this._parent; null != f; f = f.getParent()) c *= f.getScaleX(), d *= f.getScaleY();
        0 > c && (a.x += b.width * c, c = -c);
        0 > d && (a.y += b.height * d, d = -d);
        f = this._tmpViewRect;
        f.x = a.x;
        f.y = a.y;
        f.width = b.width * c;
        f.height = b.height * d;
        return f
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new cc.ScrollView.CanvasRenderCmd(this) : new cc.ScrollView.WebGLRenderCmd(this)
    }
});
_p = cc.ScrollView.prototype;
cc.defineGetterSetter(_p, "minOffset", _p.minContainerOffset);
cc.defineGetterSetter(_p, "maxOffset", _p.maxContainerOffset);
cc.defineGetterSetter(_p, "bounceable", _p.isBounceable, _p.setBounceable);
cc.defineGetterSetter(_p, "viewSize", _p.getViewSize, _p.setViewSize);
cc.defineGetterSetter(_p, "container", _p.getContainer, _p.setContainer);
cc.defineGetterSetter(_p, "direction", _p.getDirection, _p.setDirection);
cc.defineGetterSetter(_p, "delegate", _p.getDelegate, _p.setDelegate);
cc.defineGetterSetter(_p, "clippingToBounds", _p.isClippingToBounds, _p.setClippingToBounds);
_p = null;
cc.ScrollView.create = function (a, b) {
    return new cc.ScrollView(a, b)
};
(function () {
    cc.ScrollView.CanvasRenderCmd = function (a) {
        this._layerCmdCtor(a);
        this._needDraw = !1;
        this.startCmd = new cc.CustomRenderCmd(this, this._startCmd);
        this.startCmd._canUseDirtyRegion = !0;
        this.endCmd = new cc.CustomRenderCmd(this, this._endCmd);
        this.endCmd._canUseDirtyRegion = !0
    };
    var a = cc.ScrollView.CanvasRenderCmd.prototype = Object.create(cc.Layer.CanvasRenderCmd.prototype);
    a.constructor = cc.ScrollView.CanvasRenderCmd;
    a._startCmd = function (a, c, d) {
        var f = this._node,
            g = a || cc._renderContext;
        a = g.getContext();
        g.save();
        f._clippingToBounds && (this._scissorRestored = !1, g.setTransform(this._worldTransform, c, d), d = f.getScaleX(), c = f.getScaleY(), d *= f._viewSize.width, f = f._viewSize.height * c, a.beginPath(), a.rect(0, 0, d, -f), a.closePath(), a.clip())
    };
    a._endCmd = function (a) {
        a = a || cc._renderContext;
        a.restore()
    }
})();
(function () {
    cc.ScrollView.WebGLRenderCmd = function (a) {
        this._layerCmdCtor(a);
        this._needDraw = !1;
        this.startCmd = new cc.CustomRenderCmd(this, this._startCmd);
        this.endCmd = new cc.CustomRenderCmd(this, this._endCmd)
    };
    var a = cc.ScrollView.WebGLRenderCmd.prototype = Object.create(cc.Layer.WebGLRenderCmd.prototype);
    a.constructor = cc.ScrollView.WebGLRenderCmd;
    a._startCmd = function () {
        var a = this._node,
            c = cc.view,
            d = a._getViewRect();
        if (c.isScissorEnabled()) {
            if (a._scissorRestored = !0, a._parentScissorRect = c.getScissorRect(),
                cc.rectIntersection(d, a._parentScissorRect)) {
                var f = a._parentScissorRect,
                    a = Math.max(d.x, f.x),
                    g = Math.max(d.y, f.y),
                    h = Math.min(d.x + d.width, f.x + f.width),
                    d = Math.min(d.y + d.height, f.y + f.height);
                c.setScissorInPoints(a, g, h - a, d - g)
            }
        } else a = cc._renderContext, a.enable(a.SCISSOR_TEST), c.setScissorInPoints(d.x, d.y, d.width, d.height)
    };
    a._endCmd = function () {
        var a = this._node;
        a._scissorRestored ? (a = a._parentScissorRect, cc.view.setScissorInPoints(a.x, a.y, a.width, a.height)) : (a = cc._renderContext, a.disable(a.SCISSOR_TEST))
    }
})();
cc.SortableObject = cc.Class.extend({
    setObjectID: function (a) {},
    getObjectID: function () {
        return 0
    }
});
cc.SortedObject = cc.SortableObject.extend({
    _objectID: 0,
    ctor: function () {
        this._objectID = 0
    },
    setObjectID: function (a) {
        this._objectID = a
    },
    getObjectID: function () {
        return this._objectID
    }
});
var _compareObject = function (a, b) {
    return a.getObjectID() - b.getObjectID()
};
cc.ArrayForObjectSorting = cc.Class.extend({
    _saveObjectArr: null,
    ctor: function () {
        this._saveObjectArr = []
    },
    insertSortedObject: function (a) {
        if (!a) throw Error("cc.ArrayForObjectSorting.insertSortedObject(): addObject should be non-null.");
        var b = this.indexOfSortedObject(a);
        this.insertObject(a, b)
    },
    removeSortedObject: function (a) {
        if (0 !== this.count()) {
            var b = this.indexOfSortedObject(a);
            b < this.count() && b !== cc.INVALID_INDEX && this.objectAtIndex(b).getObjectID() === a.getObjectID() && this.removeObjectAtIndex(b)
        }
    },
    setObjectID_ofSortedObject: function (a,
        b) {
        var c = this.indexOfSortedObject(b);
        if (c < this.count() && c !== cc.INVALID_INDEX) {
            var d = this.objectAtIndex(c);
            d.getObjectID() === b.getObjectID() && (this.removeObjectAtIndex(c), d.setObjectID(a), this.insertSortedObject(d))
        }
    },
    objectWithObjectID: function (a) {
        if (0 === this.count()) return null;
        var b = new cc.SortedObject;
        b.setObjectID(a);
        var c = this.indexOfSortedObject(b);
        c < this.count() && c !== cc.INVALID_INDEX && (b = this.objectAtIndex(c), b.getObjectID() !== a && (b = null));
        return b
    },
    getObjectWithObjectID: function (a) {
        return null
    },
    indexOfSortedObject: function (a) {
        var b = 0;
        if (a) {
            var c = 0;
            a = a.getObjectID();
            for (var d = this._saveObjectArr, f = 0; f < d.length; f++) {
                var g = d[f].getObjectID();
                if (a === g || a >= c && a < g) break;
                c = g;
                b++
            }
        } else b = cc.INVALID_INDEX;
        return b
    },
    count: function () {
        return this._saveObjectArr.length
    },
    lastObject: function () {
        var a = this._saveObjectArr;
        return 0 === a.length ? null : a[a.length - 1]
    },
    objectAtIndex: function (a) {
        return this._saveObjectArr[a]
    },
    addObject: function (a) {
        this._saveObjectArr.push(a);
        this._saveObjectArr.sort(_compareObject)
    },
    removeObjectAtIndex: function (a) {
        this._saveObjectArr.splice(a, 1);
        this._saveObjectArr.sort(_compareObject)
    },
    insertObject: function (a, b) {
        this._saveObjectArr.splice(b, 0, a);
        this._saveObjectArr.sort(_compareObject)
    }
});
cc.TABLEVIEW_FILL_TOPDOWN = 0;
cc.TABLEVIEW_FILL_BOTTOMUP = 1;
cc.TableViewCell = cc.Node.extend({
    _idx: 0,
    _className: "TableViewCell",
    getIdx: function () {
        return this._idx
    },
    setIdx: function (a) {
        this._idx = a
    },
    reset: function () {
        this._idx = cc.INVALID_INDEX
    },
    setObjectID: function (a) {
        this._idx = a
    },
    getObjectID: function () {
        return this._idx
    }
});
_p = cc.TableViewCell.prototype;
cc.defineGetterSetter(_p, "objectId", _p.getObjectID, _p.setObjectID);
_p = null;
cc.TableViewDelegate = cc.ScrollViewDelegate.extend({
    tableCellTouched: function (a, b) {},
    tableCellHighlight: function (a, b) {},
    tableCellUnhighlight: function (a, b) {},
    tableCellWillRecycle: function (a, b) {}
});
cc.TableViewDataSource = cc.Class.extend({
    tableCellSizeForIndex: function (a, b) {
        return this.cellSizeForTable(a)
    },
    cellSizeForTable: function (a) {
        return cc.size(0, 0)
    },
    tableCellAtIndex: function (a, b) {
        return null
    },
    numberOfCellsInTableView: function (a) {
        return 0
    }
});
cc.TableView = cc.ScrollView.extend({
    _vOrdering: null,
    _indices: null,
    _cellsFreed: null,
    _dataSource: null,
    _tableViewDelegate: null,
    _oldDirection: null,
    _cellsPositions: null,
    _touchedCell: null,
    ctor: function (a, b, c) {
        cc.ScrollView.prototype.ctor.call(this);
        this._oldDirection = cc.SCROLLVIEW_DIRECTION_NONE;
        this._cellsPositions = [];
        this.initWithViewSize(b, c);
        this.setDataSource(a);
        this._updateCellPositions();
        this._updateContentSize()
    },
    __indexFromOffset: function (a) {
        var b = 0,
            c = this._dataSource.numberOfCellsInTableView(this) -
            1;
        switch (this.getDirection()) {
        case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:
            a = a.x;
            break;
        default:
            a = a.y
        }
        for (var d = this._cellsPositions; c >= b;) {
            var f = 0 | b + (c - b) / 2,
                g = d[f],
                h = d[f + 1];
            if (a >= g && a <= h) return f;
            a < g ? c = f - 1 : b = f + 1
        }
        return 0 >= b ? 0 : -1
    },
    _indexFromOffset: function (a) {
        var b = {
            x: a.x,
            y: a.y
        };
        a = this._dataSource.numberOfCellsInTableView(this) - 1;
        this._vOrdering === cc.TABLEVIEW_FILL_TOPDOWN && (b.y = this.getContainer().getContentSize().height - b.y);
        b = this.__indexFromOffset(b); - 1 !== b && (b = Math.max(0, b), b > a && (b = cc.INVALID_INDEX));
        return b
    },
    __offsetFromIndex: function (a) {
        switch (this.getDirection()) {
        case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:
            a = cc.p(this._cellsPositions[a], 0);
            break;
        default:
            a = cc.p(0, this._cellsPositions[a])
        }
        return a
    },
    _offsetFromIndex: function (a) {
        var b = this.__offsetFromIndex(a);
        a = this._dataSource.tableCellSizeForIndex(this, a);
        this._vOrdering === cc.TABLEVIEW_FILL_TOPDOWN && (b.y = this.getContainer().getContentSize().height - b.y - a.height);
        return b
    },
    _updateCellPositions: function () {
        var a = this._dataSource.numberOfCellsInTableView(this),
            b = this._cellsPositions;
        if (0 < a) {
            for (var c = 0, d, f = this._dataSource, g = 0; g < a; g++) switch (b[g] = c, d = f.tableCellSizeForIndex(this, g), this.getDirection()) {
            case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:
                c += d.width;
                break;
            default:
                c += d.height
            }
            this._cellsPositions[a] = c
        }
    },
    _updateContentSize: function () {
        var a = cc.size(0, 0),
            b = this._dataSource.numberOfCellsInTableView(this);
        if (0 < b) switch (a = this._cellsPositions[b], this.getDirection()) {
        case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:
            a = cc.size(a, this._viewSize.height);
            break;
        default:
            a =
                cc.size(this._viewSize.width, a)
        }
        this.setContentSize(a);
        this._oldDirection !== this._direction && (this._direction === cc.SCROLLVIEW_DIRECTION_HORIZONTAL ? this.setContentOffset(cc.p(0, 0)) : this.setContentOffset(cc.p(0, this.minContainerOffset().y)), this._oldDirection = this._direction)
    },
    _moveCellOutOfSight: function (a) {
        this._tableViewDelegate && this._tableViewDelegate.tableCellWillRecycle && this._tableViewDelegate.tableCellWillRecycle(this, a);
        this._cellsFreed.addObject(a);
        this._cellsUsed.removeSortedObject(a);
        cc.arrayRemoveObject(this._indices,
            a.getIdx());
        a.reset();
        a.getParent() === this.getContainer() && this.getContainer().removeChild(a, !0)
    },
    _setIndexForCell: function (a, b) {
        b.setAnchorPoint(0, 0);
        b.setPosition(this._offsetFromIndex(a));
        b.setIdx(a)
    },
    _addCellIfNecessary: function (a) {
        a.getParent() !== this.getContainer() && this.getContainer().addChild(a);
        this._cellsUsed.insertSortedObject(a);
        var b = this._indices;
        a = a.getIdx(); - 1 === b.indexOf(a) && (b.push(a), b.sort(function (a, b) {
            return a - b
        }))
    },
    getDataSource: function () {
        return this._dataSource
    },
    setDataSource: function (a) {
        this._dataSource =
            a
    },
    getDelegate: function () {
        return this._tableViewDelegate
    },
    setDelegate: function (a) {
        this._tableViewDelegate = a
    },
    setVerticalFillOrder: function (a) {
        this._vOrdering !== a && (this._vOrdering = a, 0 < this._cellsUsed.count() && this.reloadData())
    },
    getVerticalFillOrder: function () {
        return this._vOrdering
    },
    initWithViewSize: function (a, b) {
        return cc.ScrollView.prototype.initWithViewSize.call(this, a, b) ? (this._cellsUsed = new cc.ArrayForObjectSorting, this._cellsFreed = new cc.ArrayForObjectSorting, this._indices = [], this._tableViewDelegate =
            null, this._vOrdering = cc.TABLEVIEW_FILL_BOTTOMUP, this.setDirection(cc.SCROLLVIEW_DIRECTION_VERTICAL), cc.ScrollView.prototype.setDelegate.call(this, this), !0) : !1
    },
    updateCellAtIndex: function (a) {
        if (!(a === cc.INVALID_INDEX || a > this._dataSource.numberOfCellsInTableView(this) - 1)) {
            var b = this.cellAtIndex(a);
            b && this._moveCellOutOfSight(b);
            b = this._dataSource.tableCellAtIndex(this, a);
            this._setIndexForCell(a, b);
            this._addCellIfNecessary(b)
        }
    },
    insertCellAtIndex: function (a) {
        if (!(a === cc.INVALID_INDEX || a > this._dataSource.numberOfCellsInTableView(this) -
                1)) {
            var b, c = this._cellsUsed;
            if (b = c.objectWithObjectID(a))
                for (var d = b = c.indexOfSortedObject(b); d < c.count(); d++) b = c.objectAtIndex(d), this._setIndexForCell(b.getIdx() + 1, b);
            b = this._dataSource.tableCellAtIndex(this, a);
            this._setIndexForCell(a, b);
            this._addCellIfNecessary(b);
            this._updateCellPositions();
            this._updateContentSize()
        }
    },
    removeCellAtIndex: function (a) {
        if (!(a === cc.INVALID_INDEX || a > this._dataSource.numberOfCellsInTableView(this) - 1)) {
            var b = this.cellAtIndex(a);
            if (b) {
                var c = this._cellsUsed,
                    d = c.indexOfSortedObject(b);
                this._moveCellOutOfSight(b);
                cc.arrayRemoveObject(this._indices, a);
                this._updateCellPositions();
                for (a = c.count() - 1; a > d; a--) b = c.objectAtIndex(a), this._setIndexForCell(b.getIdx() - 1, b)
            }
        }
    },
    reloadData: function () {
        this._oldDirection = cc.SCROLLVIEW_DIRECTION_NONE;
        for (var a = this._cellsUsed, b = this._cellsFreed, c = this.getContainer(), d = 0, f = a.count(); d < f; d++) {
            var g = a.objectAtIndex(d);
            this._tableViewDelegate && this._tableViewDelegate.tableCellWillRecycle && this._tableViewDelegate.tableCellWillRecycle(this, g);
            b.addObject(g);
            g.reset();
            g.getParent() === c && c.removeChild(g, !0)
        }
        this._indices = [];
        this._cellsUsed = new cc.ArrayForObjectSorting;
        this._updateCellPositions();
        this._updateContentSize();
        0 < this._dataSource.numberOfCellsInTableView(this) && this.scrollViewDidScroll(this);
        this.setNodeDirty()
    },
    dequeueCell: function () {
        if (0 === this._cellsFreed.count()) return null;
        var a = this._cellsFreed.objectAtIndex(0);
        this._cellsFreed.removeObjectAtIndex(0);
        return a
    },
    cellAtIndex: function (a) {
        return -1 === this._indices.indexOf(a) ? null : this._cellsUsed.objectWithObjectID(a)
    },
    scrollViewDidScroll: function (a) {
        var b = this._dataSource.numberOfCellsInTableView(this);
        if (0 !== b) {
            null !== this._tableViewDelegate && this._tableViewDelegate.scrollViewDidScroll && this._tableViewDelegate.scrollViewDidScroll(this);
            var c = 0,
                d = this._viewSize,
                c = this.getContainer(),
                f = this.getContentOffset();
            f.x *= -1;
            f.y *= -1;
            var g = Math.max(b - 1, 0);
            this._vOrdering === cc.TABLEVIEW_FILL_TOPDOWN && (f.y += d.height / c.getScaleY());
            a = this._indexFromOffset(f);
            a === cc.INVALID_INDEX && (a = b - 1);
            f.y = this._vOrdering === cc.TABLEVIEW_FILL_TOPDOWN ?
                f.y - d.height / c.getScaleY() : f.y + d.height / c.getScaleY();
            f.x += d.width / c.getScaleX();
            d = this._indexFromOffset(f);
            d === cc.INVALID_INDEX && (d = b - 1);
            f = this._cellsUsed;
            if (0 < f.count()) {
                b = f.objectAtIndex(0);
                for (c = b.getIdx(); c < a;)
                    if (this._moveCellOutOfSight(b), 0 < f.count()) b = f.objectAtIndex(0), c = b.getIdx();
                    else break
            }
            if (0 < f.count()) {
                b = f.lastObject();
                for (c = b.getIdx(); c <= g && c > d;)
                    if (this._moveCellOutOfSight(b), 0 < f.count()) b = f.lastObject(), c = b.getIdx();
                    else break
            }
            for (g = this._indices; a <= d; a++) - 1 === g.indexOf(a) && this.updateCellAtIndex(a)
        }
    },
    scrollViewDidZoom: function (a) {},
    onTouchEnded: function (a, b) {
        if (this.isVisible()) {
            if (this._touchedCell) {
                var c = this.getBoundingBox(),
                    d = cc.p(c.x, c.y),
                    d = this._parent.convertToWorldSpace(d);
                c.x = d.x;
                c.y = d.y;
                d = this._tableViewDelegate;
                cc.rectContainsPoint(c, a.getLocation()) && null !== d && (d.tableCellUnhighlight && d.tableCellUnhighlight(this, this._touchedCell), d.tableCellTouched && d.tableCellTouched(this, this._touchedCell));
                this._touchedCell = null
            }
            cc.ScrollView.prototype.onTouchEnded.call(this, a, b)
        }
    },
    onTouchBegan: function (a,
        b) {
        for (var c = this; null != c; c = c.parent)
            if (!c.isVisible()) return !1;
        c = cc.ScrollView.prototype.onTouchBegan.call(this, a, b);
        if (1 === this._touches.length) {
            var d;
            d = this.getContainer().convertTouchToNodeSpace(a);
            d = this._indexFromOffset(d);
            (this._touchedCell = d === cc.INVALID_INDEX ? null : this.cellAtIndex(d)) && (null !== this._tableViewDelegate && this._tableViewDelegate.tableCellHighlight) && this._tableViewDelegate.tableCellHighlight(this, this._touchedCell)
        } else this._touchedCell && (null !== this._tableViewDelegate && this._tableViewDelegate.tableCellUnhighlight &&
            this._tableViewDelegate.tableCellUnhighlight(this, this._touchedCell), this._touchedCell = null);
        return c
    },
    onTouchMoved: function (a, b) {
        cc.ScrollView.prototype.onTouchMoved.call(this, a, b);
        this._touchedCell && this.isTouchMoved() && (null !== this._tableViewDelegate && this._tableViewDelegate.tableCellUnhighlight && this._tableViewDelegate.tableCellUnhighlight(this, this._touchedCell), this._touchedCell = null)
    },
    onTouchCancelled: function (a, b) {
        cc.ScrollView.prototype.onTouchCancelled.call(this, a, b);
        this._touchedCell &&
            (null !== this._tableViewDelegate && this._tableViewDelegate.tableCellUnhighlight && this._tableViewDelegate.tableCellUnhighlight(this, this._touchedCell), this._touchedCell = null)
    }
});
_p = cc.TableView.prototype;
cc.defineGetterSetter(_p, "dataSource", _p.getDataSource, _p.setDataSource);
cc.defineGetterSetter(_p, "delegate", _p.getDelegate, _p.setDelegate);
cc.defineGetterSetter(_p, "verticalFillOrder", _p.getVerticalFillOrder, _p.setVerticalFillOrder);
_p = null;
cc.TableView.create = function (a, b, c) {
    return new cc.TableView(a, b, c)
};
cc.KEYBOARD_RETURNTYPE_DEFAULT = 0;
cc.KEYBOARD_RETURNTYPE_DONE = 1;
cc.KEYBOARD_RETURNTYPE_SEND = 2;
cc.KEYBOARD_RETURNTYPE_SEARCH = 3;
cc.KEYBOARD_RETURNTYPE_GO = 4;
cc.EDITBOX_INPUT_MODE_ANY = 0;
cc.EDITBOX_INPUT_MODE_EMAILADDR = 1;
cc.EDITBOX_INPUT_MODE_NUMERIC = 2;
cc.EDITBOX_INPUT_MODE_PHONENUMBER = 3;
cc.EDITBOX_INPUT_MODE_URL = 4;
cc.EDITBOX_INPUT_MODE_DECIMAL = 5;
cc.EDITBOX_INPUT_MODE_SINGLELINE = 6;
cc.EDITBOX_INPUT_FLAG_PASSWORD = 0;
cc.EDITBOX_INPUT_FLAG_SENSITIVE = 1;
cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_WORD = 2;
cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_SENTENCE = 3;
cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_ALL_CHARACTERS = 4;
cc.EditBoxDelegate = cc.Class.extend({
    editBoxEditingDidBegan: function (a) {},
    editBoxEditingDidEnded: function (a) {},
    editBoxTextChanged: function (a, b) {},
    editBoxEditingReturn: function (a) {}
});
cc.EditBox = cc.Node.extend({
    _backgroundSprite: null,
    _delegate: null,
    _editBoxInputMode: cc.EDITBOX_INPUT_MODE_ANY,
    _editBoxInputFlag: cc.EDITBOX_INPUT_FLAG_SENSITIVE,
    _keyboardReturnType: cc.KEYBOARD_RETURNTYPE_DEFAULT,
    _maxLength: 50,
    _text: "",
    _textColor: null,
    _placeholderText: "",
    _placeholderFontName: "",
    _placeholderFontSize: 14,
    _placeholderColor: null,
    _className: "EditBox",
    ctor: function (a, b) {
        cc.Node.prototype.ctor.call(this);
        this._anchorPoint = cc.p(0.5, 0.5);
        this._textColor = cc.color.WHITE;
        this._placeholderColor = cc.color.GRAY;
        this._renderCmd._createLabels();
        this.createDomElementIfNeeded();
        this.initWithSizeAndBackgroundSprite(a, b);
        cc.eventManager.addListener({
            event: cc.EventListener.TOUCH_ONE_BY_ONE,
            swallowTouches: !0,
            onTouchBegan: this._onTouchBegan.bind(this),
            onTouchEnded: this._onTouchEnded.bind(this)
        }, this);
        this.setInputFlag(this._editBoxInputFlag)
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new cc.EditBox.CanvasRenderCmd(this) : new cc.EditBox.WebGLRenderCmd(this)
    },
    setContentSize: function (a,
        b) {
        void 0 !== a.width && void 0 !== a.height && (b = a.height, a = a.width);
        cc.Node.prototype.setContentSize.call(this, a, b);
        this._updateEditBoxSize(a, b)
    },
    setVisible: function (a) {
        cc.Node.prototype.setVisible.call(this, a);
        this._renderCmd.updateVisibility()
    },
    createDomElementIfNeeded: function () {
        this._renderCmd._edTxt || this._renderCmd._createDomTextArea()
    },
    setTabIndex: function (a) {
        this._renderCmd._edTxt && (this._renderCmd._edTxt.tabIndex = a)
    },
    getTabIndex: function () {
        if (this._renderCmd._edTxt) return this._renderCmd._edTxt.tabIndex;
        cc.warn("The dom control is not created!");
        return -1
    },
    setFocus: function () {
        this._renderCmd._edTxt && this._renderCmd._edTxt.focus()
    },
    isFocused: function () {
        if (this._renderCmd._edTxt) return document.activeElement === this._renderCmd._edTxt;
        cc.warn("The dom control is not created!");
        return !1
    },
    stayOnTop: function (a) {
        this._alwaysOnTop !== a && (this._alwaysOnTop = a, this._renderCmd.stayOnTop(this._alwaysOnTop))
    },
    cleanup: function () {
        this._super();
        this._renderCmd._removeDomFromGameContainer()
    },
    _onTouchBegan: function (a) {
        a =
            a.getLocation();
        var b = cc.rect(0, 0, this._contentSize.width, this._contentSize.height);
        if (cc.rectContainsPoint(b, this.convertToNodeSpace(a))) return !0;
        this._renderCmd._endEditing();
        return !1
    },
    _onTouchEnded: function () {
        this._renderCmd._beginEditing()
    },
    _updateBackgroundSpriteSize: function (a, b) {
        this._backgroundSprite && this._backgroundSprite.setContentSize(a, b)
    },
    _updateEditBoxSize: function (a, b) {
        var c = "number" === typeof a.width ? a.width : a,
            d = "number" === typeof a.height ? a.height : b;
        this._updateBackgroundSpriteSize(c,
            d);
        this._renderCmd.updateSize(c, d)
    },
    setLineHeight: function (a) {
        this._renderCmd.setLineHeight(a)
    },
    setFont: function (a, b) {
        this._renderCmd.setFont(a, b)
    },
    _setFont: function (a) {
        this._renderCmd._setFont(a)
    },
    getBackgroundSprite: function () {
        return this._backgroundSprite
    },
    setFontName: function (a) {
        this._renderCmd.setFontName(a)
    },
    setFontSize: function (a) {
        this._renderCmd.setFontSize(a)
    },
    setString: function (a) {
        a.length >= this._maxLength && (a = a.slice(0, this._maxLength));
        this._text = a;
        this._renderCmd.setString(a)
    },
    setFontColor: function (a) {
        this._textColor =
            a;
        this._renderCmd.setFontColor(a)
    },
    setMaxLength: function (a) {
        isNaN(a) || (0 > a && (a = 65535), this._maxLength = a, this._renderCmd.setMaxLength(a))
    },
    getMaxLength: function () {
        return this._maxLength
    },
    setPlaceHolder: function (a) {
        null !== a && (this._renderCmd.setPlaceHolder(a), this._placeholderText = a)
    },
    setPlaceholderFont: function (a, b) {
        this._placeholderFontName = a;
        this._placeholderFontSize = b;
        this._renderCmd._updateDOMPlaceholderFontStyle()
    },
    _setPlaceholderFont: function (a) {
        if (a = cc.LabelTTF._fontStyleRE.exec(a)) this._placeholderFontName =
            a[2], this._placeholderFontSize = parseInt(a[1]), this._renderCmd._updateDOMPlaceholderFontStyle()
    },
    setPlaceholderFontName: function (a) {
        this._placeholderFontName = a;
        this._renderCmd._updateDOMPlaceholderFontStyle()
    },
    setPlaceholderFontSize: function (a) {
        this._placeholderFontSize = a;
        this._renderCmd._updateDOMPlaceholderFontStyle()
    },
    setPlaceholderFontColor: function (a) {
        this._placeholderColor = a;
        this._renderCmd.setPlaceholderFontColor(a)
    },
    setInputFlag: function (a) {
        this._editBoxInputFlag = a;
        this._renderCmd.setInputFlag(a)
    },
    getString: function () {
        return this._text
    },
    initWithSizeAndBackgroundSprite: function (a, b) {
        this._backgroundSprite && this._backgroundSprite.removeFromParent();
        this._backgroundSprite = b;
        this.setContentSize(a);
        this._backgroundSprite && !this._backgroundSprite.parent && (this._backgroundSprite.setAnchorPoint(cc.p(0, 0)), this.addChild(this._backgroundSprite), this._updateBackgroundSpriteSize(a.width, a.height));
        this.y = this.x = 0;
        return !0
    },
    setDelegate: function (a) {
        this._delegate = a
    },
    getPlaceHolder: function () {
        return this._placeholderText
    },
    setInputMode: function (a) {
        if (this._editBoxInputMode !== a) {
            var b = this.getString();
            this._editBoxInputMode = a;
            this._renderCmd.setInputMode(a);
            this._renderCmd.transform();
            this.setString(b);
            this._renderCmd._updateLabelPosition(this.getContentSize())
        }
    },
    setReturnType: function (a) {
        this._keyboardReturnType = a;
        this._renderCmd._updateDomInputType()
    },
    initWithBackgroundColor: function (a, b) {
        this._edWidth = a.width;
        this.dom.style.width = this._edWidth.toString() + "px";
        this._edHeight = a.height;
        this.dom.style.height = this._edHeight.toString() +
            "px";
        this.dom.style.backgroundColor = cc.colorToHex(b)
    }
});
_p = cc.EditBox.prototype;
cc.defineGetterSetter(_p, "font", null, _p._setFont);
cc.defineGetterSetter(_p, "fontName", null, _p.setFontName);
cc.defineGetterSetter(_p, "fontSize", null, _p.setFontSize);
cc.defineGetterSetter(_p, "fontColor", null, _p.setFontColor);
cc.defineGetterSetter(_p, "string", _p.getString, _p.setString);
cc.defineGetterSetter(_p, "maxLength", _p.getMaxLength, _p.setMaxLength);
cc.defineGetterSetter(_p, "placeholder", _p.getPlaceHolder, _p.setPlaceHolder);
cc.defineGetterSetter(_p, "placeholderFont", null, _p._setPlaceholderFont);
cc.defineGetterSetter(_p, "placeholderFontName", null, _p.setPlaceholderFontName);
cc.defineGetterSetter(_p, "placeholderFontSize", null, _p.setPlaceholderFontSize);
cc.defineGetterSetter(_p, "placeholderFontColor", null, _p.setPlaceholderFontColor);
cc.defineGetterSetter(_p, "inputFlag", null, _p.setInputFlag);
cc.defineGetterSetter(_p, "delegate", null, _p.setDelegate);
cc.defineGetterSetter(_p, "inputMode", null, _p.setInputMode);
cc.defineGetterSetter(_p, "returnType", null, _p.setReturnType);
_p = null;
cc.EditBox.create = function (a, b, c, d) {
    return new cc.EditBox(a, b, c, d)
};
(function (a) {
    a._polyfill = {
        zoomInvalid: !1
    };
    if (cc.sys.OS_ANDROID === cc.sys.os && (cc.sys.browserType === cc.sys.BROWSER_TYPE_SOUGOU || cc.sys.browserType === cc.sys.BROWSER_TYPE_360)) a._polyfill.zoomInvalid = !0
})(cc.EditBox);
(function (a) {
    function b(a) {
        var b = a.convertToWorldSpace(cc.p(0, 0)),
            f = cc.visibleRect.height,
            g = 0.5;
        cc.visibleRect.width > f && (g = 0.7);
        setTimeout(function () {
            if (window.scrollY < c && b.y < f * g) {
                var a = f * g - b.y - window.scrollY;
                35 > a && (a = 35);
                320 < a && (a = 320);
                window.scrollTo(a, a)
            }
        }, d)
    }
    var c = 40,
        d = 400,
        f = function (a) {
            return a.replace(/(?:^|\s)\S/g, function (a) {
                return a.toUpperCase()
            })
        },
        g = function () {}.prototype = Object.create(Object.prototype);
    g.updateMatrix = function () {
        if (this._edTxt) {
            var b = this._node,
                c = cc.view._scaleX,
                d = cc.view._scaleY,
                f = cc.view._devicePixelRatio,
                g = this._worldTransform,
                c = c / f,
                d = d / f,
                h = cc.game.container,
                f = g.a * c,
                y = g.b,
                z = g.c,
                t = g.d * d,
                A = h && h.style.paddingLeft && parseInt(h.style.paddingLeft),
                h = h && h.style.paddingBottom && parseInt(h.style.paddingBottom),
                c = g.tx * c + A,
                d = g.ty * d + h;
            a.zoomInvalid && (this.updateSize(b._contentSize.width * f, b._contentSize.height * t), t = f = 1);
            b = "matrix(" + f + "," + -y + "," + -z + "," + t + "," + c + "," + -d + ")";
            this._edTxt.style.transform = b;
            this._edTxt.style["-webkit-transform"] = b;
            this._edTxt.style["transform-origin"] = "0px 100% 0px";
            this._edTxt.style["-webkit-transform-origin"] = "0px 100% 0px"
        }
    };
    g.updateVisibility = function () {
        this._edTxt && (this._edTxt.style.visibility = this._node.visible ? "visible" : "hidden")
    };
    g.stayOnTop = function (a) {
        a ? (this._removeLabels(), this._edTxt.style.display = "") : (this._createLabels(), this._edTxt.style.display = "none", this._showLabels())
    };
    g._beginEditingOnMobile = function (a) {
        this.__orientationChanged = function () {
            b(a)
        };
        window.addEventListener("orientationchange", this.__orientationChanged);
        cc.view.isAutoFullScreenEnabled() ?
            (this.__fullscreen = !0, cc.view.enableAutoFullScreen(!1), cc.screen.exitFullScreen()) : this.__fullscreen = !1;
        this.__autoResize = cc.view.__resizeWithBrowserSize;
        cc.view.resizeWithBrowserSize(!1)
    };
    g._endEditingOnMobile = function () {
        if (this.__rotateScreen) {
            var a = cc.game.container.style;
            a["-webkit-transform"] = "rotate(90deg)";
            a.transform = "rotate(90deg)";
            var a = cc.view,
                b = a._originalDesignResolutionSize.width,
                c = a._originalDesignResolutionSize.height;
            0 < b && a.setDesignResolutionSize(b, c, a._resolutionPolicy);
            this.__rotateScreen = !1
        }
        window.removeEventListener("orientationchange", this.__orientationChanged);
        window.scrollTo(0, 0);
        this.__fullscreen && cc.view.enableAutoFullScreen(!0);
        this.__autoResize && cc.view.resizeWithBrowserSize(!0)
    };
    g._onFocusOnMobile = function (a) {
        if (cc.view._isRotated) {
            var c = cc.game.container.style;
            c["-webkit-transform"] = "rotate(0deg)";
            c.transform = "rotate(0deg)";
            c.margin = "0px";
            window.scrollTo(35, 35);
            this.__rotateScreen = !0
        } else this.__rotateScreen = !1;
        b(a)
    };
    g._createDomInput = function () {
        this._removeDomFromGameContainer();
        var a = this,
            b = this._edTxt = document.createElement("input");
        b.type = "text";
        b.style.fontSize = this._edFontSize + "px";
        b.style.color = "#000000";
        b.style.border = 0;
        b.style.background = "transparent";
        b.style.width = "100%";
        b.style.height = "100%";
        b.style.active = 0;
        b.style.outline = "medium";
        b.style.padding = "0";
        b.style.textTransform = "uppercase";
        b.style.display = "none";
        b.style.position = "absolute";
        b.style.bottom = "0px";
        b.style.left = "2px";
        b.style.className = "cocosEditBox";
        this.setMaxLength(a._editBox._maxLength);
        b.addEventListener("input",
            function () {
                var b = a._editBox;
                this.value.length > this.maxLength && (this.value = this.value.slice(0, this.maxLength));
                b._delegate && b._delegate.editBoxTextChanged && b._text !== this.value && (b._text = this.value, a._updateDomTextCases(), b._delegate.editBoxTextChanged(b, b._text))
            });
        b.addEventListener("keypress", function (b) {
            var c = a._editBox;
            b.keyCode === cc.KEY.enter && (b.stopPropagation(), b.preventDefault(), "" === this.value && (this.style.fontSize = c._placeholderFontSize + "px", this.style.color = cc.colorToHex(c._placeholderColor)),
                c._text = this.value, a._updateDomTextCases(), a._endEditing(), c._delegate && c._delegate.editBoxEditingReturn && c._delegate.editBoxEditingReturn(c), cc._canvas.focus())
        });
        b.addEventListener("focus", function () {
            var b = a._editBox;
            this.style.fontSize = a._edFontSize + "px";
            this.style.color = cc.colorToHex(b._textColor);
            a._hiddenLabels();
            cc.sys.isMobile && a._onFocusOnMobile(b);
            b._delegate && b._delegate.editBoxEditingDidBegan && b._delegate.editBoxEditingDidBegan(b)
        });
        b.addEventListener("blur", function () {
            var b = a._editBox;
            b._text = this.value;
            a._updateDomTextCases();
            b._delegate && b._delegate.editBoxEditingDidEnded && b._delegate.editBoxEditingDidEnded(b);
            "" === this.value && (this.style.fontSize = b._placeholderFontSize + "px", this.style.color = cc.colorToHex(b._placeholderColor));
            a._endEditing()
        });
        this._addDomToGameContainer();
        return b
    };
    g._createDomTextArea = function () {
        this._removeDomFromGameContainer();
        var a = this,
            b = this._edTxt = document.createElement("textarea");
        b.type = "text";
        b.style.fontSize = this._edFontSize + "px";
        b.style.color =
            "#000000";
        b.style.border = 0;
        b.style.background = "transparent";
        b.style.width = "100%";
        b.style.height = "100%";
        b.style.active = 0;
        b.style.outline = "medium";
        b.style.padding = "0";
        b.style.resize = "none";
        b.style.textTransform = "uppercase";
        b.style.overflow_y = "scroll";
        b.style.display = "none";
        b.style.position = "absolute";
        b.style.bottom = "0px";
        b.style.left = "2px";
        b.style.className = "cocosEditBox";
        this.setMaxLength(a._editBox._maxLength);
        b.addEventListener("input", function () {
            this.value.length > this.maxLength && (this.value = this.value.slice(0,
                this.maxLength));
            var b = a._editBox;
            b._delegate && b._delegate.editBoxTextChanged && b._text.toLowerCase() !== this.value.toLowerCase() && (b._text = this.value, a._updateDomTextCases(), b._delegate.editBoxTextChanged(b, b._text))
        });
        b.addEventListener("focus", function () {
            var b = a._editBox;
            a._hiddenLabels();
            this.style.fontSize = a._edFontSize + "px";
            this.style.color = cc.colorToHex(b._textColor);
            cc.sys.isMobile && a._onFocusOnMobile(b);
            b._delegate && b._delegate.editBoxEditingDidBegan && b._delegate.editBoxEditingDidBegan(b)
        });
        b.addEventListener("keypress", function (b) {
            var c = a._editBox;
            b.keyCode === cc.KEY.enter && (b.stopPropagation(), c._delegate && c._delegate.editBoxEditingReturn && c._delegate.editBoxEditingReturn(c))
        });
        b.addEventListener("blur", function () {
            var b = a._editBox;
            b._text = this.value;
            a._updateDomTextCases();
            b._delegate && b._delegate.editBoxEditingDidEnded && b._delegate.editBoxEditingDidEnded(b);
            "" === this.value && (this.style.fontSize = b._placeholderFontSize + "px", this.style.color = cc.colorToHex(b._placeholderColor));
            a._endEditing()
        });
        this._addDomToGameContainer();
        return b
    };
    g._createLabels = function () {
        var a = this._editBox.getContentSize();
        this._textLabel || (this._textLabel = new cc.LabelTTF, this._textLabel.setAnchorPoint(cc.p(0, 1)), this._editBox.addChild(this._textLabel, 100));
        this._placeholderLabel || (this._placeholderLabel = new cc.LabelTTF, this._placeholderLabel.setAnchorPoint(cc.p(0, 1)), this._placeholderLabel.setColor(cc.color.GRAY), this._editBox.addChild(this._placeholderLabel, 100));
        this._updateLabelPosition(a)
    };
    g._removeLabels = function () {
        this._textLabel &&
            (this._editBox.removeChild(this._textLabel), this._textLabel = null)
    };
    g._updateLabelPosition = function (a) {
        if (this._textLabel && this._placeholderLabel) {
            var b = cc.size(a.width - 2, a.height);
            this._textLabel.setContentSize(b);
            this._textLabel.setDimensions(b);
            this._placeholderLabel.setLineHeight(a.height);
            b = this._placeholderLabel.getContentSize();
            this._editBox._editBoxInputMode === cc.EDITBOX_INPUT_MODE_ANY ? (this._textLabel.setPosition(2, a.height), this._placeholderLabel.setPosition(2, a.height), this._placeholderLabel.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_TOP),
                this._textLabel.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_TOP)) : (this._textLabel.setPosition(2, a.height), this._placeholderLabel.setPosition(2, (a.height + b.height) / 2), this._placeholderLabel.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER), this._textLabel.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER))
        }
    };
    g.setLineHeight = function (a) {
        this._textLabel && this._textLabel.setLineHeight(a)
    };
    g._hiddenLabels = function () {
        this._textLabel && this._textLabel.setVisible(!1);
        this._placeholderLabel &&
            this._placeholderLabel.setVisible(!1)
    };
    g._updateDomTextCases = function () {
        var a = this._editBox._editBoxInputFlag;
        a === cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_ALL_CHARACTERS ? this._editBox._text = this._editBox._text.toUpperCase() : a === cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_WORD ? this._editBox._text = f(this._editBox._text) : a === cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_SENTENCE && (this._editBox._text = this._editBox._text.charAt(0).toUpperCase() + this._editBox._text.slice(1))
    };
    g._updateLabelStringStyle = function () {
        if ("password" ===
            this._edTxt.type) {
            for (var a = "", b = this._editBox._text.length, c = 0; c < b; ++c) a += "●";
            this._textLabel && this._textLabel.setString(a)
        } else this._updateDomTextCases(), this._textLabel && this._textLabel.setString(this._editBox._text)
    };
    g._showLabels = function () {
        this._hiddenLabels();
        "" === this._edTxt.value ? this._placeholderLabel && (this._placeholderLabel.setVisible(!0), this._placeholderLabel.setString(this._editBox._placeholderText)) : this._textLabel && (this._textLabel.setVisible(!0), this._textLabel.setString(this._editBox._text));
        this._updateLabelStringStyle()
    };
    g._beginEditing = function () {
        !this._editBox._alwaysOnTop && "none" === this._edTxt.style.display && (this._edTxt.style.display = "", this._edTxt.focus());
        cc.sys.isMobile && !this._editingMode && this._beginEditingOnMobile(this._editBox);
        this._editingMode = !0
    };
    g._endEditing = function () {
        this._editBox._alwaysOnTop || (this._edTxt.style.display = "none");
        this._showLabels();
        if (cc.sys.isMobile && this._editingMode) {
            var a = this;
            setTimeout(function () {
                a._endEditingOnMobile()
            }, d)
        }
        this._editingMode = !1
    };
    g._setFont = function (a) {
        a = cc.LabelTTF._fontStyleRE.exec(a);
        var b = a[2],
            c = parseInt(a[1]);
        a && this.setFont(b, c)
    };
    g.setFont = function (a, b) {
        this._edFontName = a || this._edFontName;
        this._edFontSize = b || this._edFontSize;
        this._updateDOMFontStyle()
    };
    g.setFontName = function (a) {
        this._edFontName = a || this._edFontName;
        this._updateDOMFontStyle()
    };
    g.setFontSize = function (a) {
        this._edFontSize = a || this._edFontSize;
        this._updateDOMFontStyle()
    };
    g.setFontColor = function (a) {
        this._edTxt && (this._edTxt.value !== this._editBox._placeholderText &&
            (this._edTxt.style.color = cc.colorToHex(a)), this._textLabel && this._textLabel.setColor(a))
    };
    g.setPlaceHolder = function (a) {
        this._placeholderLabel.setString(a)
    };
    g.setMaxLength = function (a) {
        this._edTxt && (this._edTxt.maxLength = a)
    };
    g._updateDOMPlaceholderFontStyle = function () {
        this._placeholderLabel.setFontName(this._editBox._placeholderFontName);
        this._placeholderLabel.setFontSize(this._editBox._placeholderFontSize)
    };
    g.setPlaceholderFontColor = function (a) {
        this._placeholderLabel.setColor(a)
    };
    g._updateDomInputType =
        function () {
            var a = this._editBox._editBoxInputMode;
            a === cc.EDITBOX_INPUT_MODE_EMAILADDR ? this._edTxt.type = "email" : a === cc.EDITBOX_INPUT_MODE_DECIMAL || a === cc.EDITBOX_INPUT_MODE_NUMERIC ? this._edTxt.type = "number" : a === cc.EDITBOX_INPUT_MODE_PHONENUMBER ? (this._edTxt.type = "number", this._edTxt.pattern = "[0-9]*") : a === cc.EDITBOX_INPUT_MODE_URL ? this._edTxt.type = "url" : (this._edTxt.type = "text", this._editBox._keyboardReturnType === cc.KEYBOARD_RETURNTYPE_SEARCH && (this._edTxt.type = "search"));
            this._editBox._editBoxInputFlag ===
                cc.EDITBOX_INPUT_FLAG_PASSWORD && (this._edTxt.type = "password")
        };
    g.setInputFlag = function (a) {
        this._edTxt && (this._updateDomInputType(), this._edTxt.style.textTransform = "none", a === cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_ALL_CHARACTERS ? this._edTxt.style.textTransform = "uppercase" : a === cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_WORD && (this._edTxt.style.textTransform = "capitalize"), this._updateLabelStringStyle())
    };
    g.setInputMode = function (a) {
        a === cc.EDITBOX_INPUT_MODE_ANY ? this._createDomTextArea() : this._createDomInput();
        this._updateDomInputType();
        a = this._node.getContentSize();
        this.updateSize(a.width, a.height)
    };
    g.setString = function (a) {
        this._edTxt && null !== a && (this._edTxt.value = a, "" === a ? (this._placeholderLabel && (this._placeholderLabel.setString(this._editBox._placeholderText), this._placeholderLabel.setColor(this._editBox._placeholderColor)), this._editingMode || (this._placeholderLabel && this._placeholderLabel.setVisible(!0), this._textLabel && this._textLabel.setVisible(!1))) : (this._edTxt.style.color = cc.colorToHex(this._editBox._textColor), this._textLabel &&
            this._textLabel.setColor(this._editBox._textColor), this._editingMode || (this._placeholderLabel && this._placeholderLabel.setVisible(!1), this._textLabel && this._textLabel.setVisible(!0)), this._updateLabelStringStyle()))
    };
    g._updateDOMFontStyle = function () {
        this._edTxt && ("" !== this._edTxt.value && (this._edTxt.style.fontFamily = this._edFontName, this._edTxt.style.fontSize = this._edFontSize + "px"), this._textLabel && (this._textLabel.setFontSize(this._edFontSize), this._textLabel.setFontName(this._edFontName)))
    };
    g.updateSize =
        function (a, b) {
            var c = this._edTxt;
            c && (c.style.width = a + "px", c.style.height = b + "px", this._updateLabelPosition(cc.size(a, b)))
        };
    g._addDomToGameContainer = function () {
        cc.game.container.appendChild(this._edTxt)
    };
    g._removeDomFromGameContainer = function () {
        var a = this._edTxt;
        if (a) {
            var b = !1;
            (b = "contains" in cc.game.container ? cc.game.container.contains(a) : cc.game.container.compareDocumentPosition(a) % 16) && cc.game.container.removeChild(a)
        }
        this._edTxt = null
    };
    g.initializeRenderCmd = function (a) {
        this._editBox = a;
        this._edFontSize =
            14;
        this._edFontName = "Arial";
        this._placeholderLabel = this._textLabel = null;
        this.__rotateScreen = this.__autoResize = this.__fullscreen = this._editingMode = !1;
        this.__orientationChanged = null
    };
    cc.EditBox.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this.initializeRenderCmd(a)
    };
    var h = cc.EditBox.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    cc.inject(g, h);
    h.constructor = cc.EditBox.CanvasRenderCmd;
    h.transform = function (a, b) {
        this.originTransform(a, b);
        this.updateMatrix()
    };
    cc.EditBox.WebGLRenderCmd =
        function (a) {
            this._rootCtor(a);
            this.initializeRenderCmd(a)
        };
    h = cc.EditBox.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
    cc.inject(g, h);
    h.constructor = cc.EditBox.WebGLRenderCmd;
    h.transform = function (a, b) {
        this.originTransform(a, b);
        this.updateMatrix()
    }
})(cc.EditBox._polyfill);
cc.ProtectedNode = cc.Node.extend({
    _protectedChildren: null,
    _reorderProtectedChildDirty: !1,
    _insertProtectedChild: function (a, b) {
        this._reorderProtectedChildDirty = !0;
        this._protectedChildren.push(a);
        a._setLocalZOrder(b)
    },
    ctor: function () {
        cc.Node.prototype.ctor.call(this);
        this._protectedChildren = []
    },
    visit: function (a) {
        var b = this._renderCmd,
            c = a ? a._renderCmd : null;
        if (this._visible) {
            a = cc.renderer;
            var d = this._children,
                f = d.length,
                g, h = this._protectedChildren,
                m = h.length,
                n;
            b.visit(c);
            var p = this.grid;
            p && p._active && p.beforeDraw();
            this._reorderChildDirty && this.sortAllChildren();
            this._reorderProtectedChildDirty && this.sortAllProtectedChildren();
            for (c = 0; c < f; c++)
                if (g = d[c], 0 > g._localZOrder) g.visit(this);
                else break;
            for (g = 0; g < m; g++)
                if ((n = h[g]) && 0 > n._localZOrder) b._changeProtectedChild(n), n.visit(this);
                else break;
            for (a.pushRenderCommand(b); c < f; c++) d[c].visit(this);
            for (; g < m; g++)
                if (n = h[g]) b._changeProtectedChild(n), n.visit(this);
            p && p._active && p.afterDraw(this);
            b._dirtyFlag = 0
        } else b._propagateFlagsDown(c)
    },
    addProtectedChild: function (a,
        b, c) {
        cc.assert(null != a, "child must be non-nil");
        cc.assert(!a.parent, "child already added. It can't be added again");
        b = b || a.getLocalZOrder();
        c && a.setTag(c);
        this._insertProtectedChild(a, b);
        a.setParent(this);
        a.setOrderOfArrival(cc.s_globalOrderOfArrival);
        this._running && (a._performRecursive(cc.Node._stateCallbackType.onEnter), this._isTransitionFinished && a._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish));
        this._cascadeColorEnabled && this._renderCmd.setCascadeColorEnabledDirty();
        this._cascadeOpacityEnabled && this._renderCmd.setCascadeOpacityEnabledDirty()
    },
    getProtectedChildByTag: function (a) {
        cc.assert(a !== cc.NODE_TAG_INVALID, "Invalid tag");
        for (var b = this._protectedChildren, c = 0, d = b.length; c < d; c++)
            if (b.getTag() === a) return b[c];
        return null
    },
    removeProtectedChild: function (a, b) {
        null == b && (b = !0);
        var c = this._protectedChildren;
        if (0 !== c.length) {
            var d = c.indexOf(a); - 1 < d && (this._running && (a._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart), a._performRecursive(cc.Node._stateCallbackType.onExit)),
                b && a._performRecursive(cc.Node._stateCallbackType.cleanup), a.setParent(null), c.splice(d, 1))
        }
    },
    removeProtectedChildByTag: function (a, b) {
        cc.assert(a !== cc.NODE_TAG_INVALID, "Invalid tag");
        null == b && (b = !0);
        var c = this.getProtectedChildByTag(a);
        null == c ? cc.log("cocos2d: removeChildByTag(tag = %d): child not found!", a) : this.removeProtectedChild(c, b)
    },
    removeAllProtectedChildren: function () {
        this.removeAllProtectedChildrenWithCleanup(!0)
    },
    removeAllProtectedChildrenWithCleanup: function (a) {
        null == a && (a = !0);
        for (var b =
                this._protectedChildren, c = 0, d = b.length; c < d; c++) {
            var f = b[c];
            this._running && (f._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart), f._performRecursive(cc.Node._stateCallbackType.onExit));
            a && f._performRecursive(cc.Node._stateCallbackType.cleanup);
            f.setParent(null)
        }
        b.length = 0
    },
    reorderProtectedChild: function (a, b) {
        cc.assert(null != a, "Child must be non-nil");
        this._reorderProtectedChildDirty = !0;
        a.setOrderOfArrival(cc.s_globalOrderOfArrival++);
        a._setLocalZOrder(b)
    },
    sortAllProtectedChildren: function () {
        if (this._reorderProtectedChildDirty) {
            var a =
                this._protectedChildren,
                b, c, d = a.length,
                f;
            for (b = 1; b < d; b++) {
                f = a[b];
                for (c = b - 1; 0 <= c;) {
                    if (f._localZOrder < a[c]._localZOrder) a[c + 1] = a[c];
                    else if (f._localZOrder === a[c]._localZOrder && f.arrivalOrder < a[c].arrivalOrder) a[c + 1] = a[c];
                    else break;
                    c--
                }
                a[c + 1] = f
            }
            this._reorderProtectedChildDirty = !1
        }
    },
    _changePosition: function () {},
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new cc.ProtectedNode.CanvasRenderCmd(this) : new cc.ProtectedNode.WebGLRenderCmd(this)
    }
});
cc.ProtectedNode.create = function () {
    return new cc.ProtectedNode
};
(function () {
    cc.ProtectedNode.RenderCmd = {
        _updateDisplayColor: function (a) {
            var c = this._node,
                d = this._displayedColor,
                f = c._realColor,
                g, h;
            if (this._cascadeColorEnabledDirty && !c._cascadeColorEnabled) {
                d.r = f.r;
                d.g = f.g;
                d.b = f.b;
                d = new cc.Color(255, 255, 255, 255);
                g = c._children;
                f = 0;
                for (a = g.length; f < a; f++)(h = g[f]) && h._renderCmd && h._renderCmd._updateDisplayColor(d);
                this._cascadeColorEnabledDirty = !1
            } else {
                void 0 === a && (a = (a = c._parent) && a._cascadeColorEnabled ? a.getDisplayedColor() : cc.color.WHITE);
                d.r = 0 | f.r * a.r / 255;
                d.g = 0 |
                    f.g * a.g / 255;
                d.b = 0 | f.b * a.b / 255;
                if (c._cascadeColorEnabled) {
                    g = c._children;
                    f = 0;
                    for (a = g.length; f < a; f++)
                        if ((h = g[f]) && h._renderCmd) h._renderCmd._updateDisplayColor(d), h._renderCmd._updateColor()
                }
                g = c._protectedChildren;
                f = 0;
                for (a = g.length; f < a; f++)
                    if ((h = g[f]) && h._renderCmd) h._renderCmd._updateDisplayColor(d), h._renderCmd._updateColor()
            }
            this._dirtyFlag ^= this._dirtyFlag & cc.Node._dirtyFlags.colorDirty
        },
        _updateDisplayOpacity: function (a) {
            var c = this._node,
                d, f, g;
            if (this._cascadeOpacityEnabledDirty && !c._cascadeOpacityEnabled) {
                this._displayedOpacity =
                    c._realOpacity;
                f = c._children;
                a = 0;
                for (d = f.length; a < d; a++)(g = f[a]) && g._renderCmd && g._renderCmd._updateDisplayOpacity(255);
                this._cascadeOpacityEnabledDirty = !1
            } else {
                void 0 === a && (d = c._parent, a = 255, d && d._cascadeOpacityEnabled && (a = d.getDisplayedOpacity()));
                this._displayedOpacity = c._realOpacity * a / 255;
                if (c._cascadeOpacityEnabled) {
                    f = c._children;
                    a = 0;
                    for (d = f.length; a < d; a++)
                        if ((g = f[a]) && g._renderCmd) g._renderCmd._updateDisplayOpacity(this._displayedOpacity), g._renderCmd._updateColor()
                }
                f = c._protectedChildren;
                a =
                    0;
                for (d = f.length; a < d; a++)
                    if ((g = f[a]) && g._renderCmd) g._renderCmd._updateDisplayOpacity(this._displayedOpacity), g._renderCmd._updateColor()
            }
            this._dirtyFlag ^= this._dirtyFlag & cc.Node._dirtyFlags.opacityDirty
        },
        _changeProtectedChild: function (a) {
            a = a._renderCmd;
            var c = a._dirtyFlag,
                d = cc.Node._dirtyFlags;
            this._dirtyFlag & d.colorDirty && (c |= d.colorDirty);
            this._dirtyFlag & d.opacityDirty && (c |= d.opacityDirty);
            var f = c & d.colorDirty,
                c = c & d.opacityDirty;
            f && a._updateDisplayColor(this._displayedColor);
            c && a._updateDisplayOpacity(this._displayedOpacity);
            (f || c) && a._updateColor()
        }
    };
    cc.ProtectedNode.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this._cachedParent = null;
        this._cacheDirty = !1
    };
    var a = cc.ProtectedNode.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    cc.inject(cc.ProtectedNode.RenderCmd, a);
    a.constructor = cc.ProtectedNode.CanvasRenderCmd;
    a._pNodeCmdCtor = cc.ProtectedNode.CanvasRenderCmd;
    a.transform = function (a, c) {
        var d = this._node;
        d._changePosition && d._changePosition();
        this.originTransform(a, c);
        var f, g = d._protectedChildren;
        if (c && g && 0 !== g.length) {
            d = 0;
            for (f = g.length; d < f; d++) g[d]._renderCmd.transform(this, c)
        }
    };
    a.pNodeTransform = a.transform
})();
(function () {
    if (cc.Node.WebGLRenderCmd) {
        cc.ProtectedNode.WebGLRenderCmd = function (a) {
            this._rootCtor(a)
        };
        var a = cc.ProtectedNode.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
        cc.inject(cc.ProtectedNode.RenderCmd, a);
        a.constructor = cc.ProtectedNode.WebGLRenderCmd;
        a._pNodeCmdCtor = cc.ProtectedNode.WebGLRenderCmd;
        a.transform = function (a, c) {
            this.originTransform(a, c);
            var d, f, g = this._node._protectedChildren;
            if (c && g && 0 !== g.length) {
                d = 0;
                for (f = g.length; d < f; d++) g[d]._renderCmd.transform(this,
                    c)
            }
        };
        a.pNodeTransform = a.transform
    }
})();
var ccui = ccui || {};
ccui.Class = ccui.Class || cc.Class;
ccui.Class.extend = ccui.Class.extend || cc.Class.extend;
ccui.Node = ccui.Node || cc.Node;
ccui.Node.extend = ccui.Node.extend || cc.Node.extend;
ccui.ProtectedNode = ccui.ProtectedNode || cc.ProtectedNode;
ccui.ProtectedNode.extend = ccui.ProtectedNode.extend || cc.ProtectedNode.extend;
ccui.cocosGUIVersion = "CocosGUI v1.0.0.0";
ccui._FocusNavigationController = cc.Class.extend({
    _keyboardListener: null,
    _firstFocusedWidget: null,
    _enableFocusNavigation: !1,
    _keyboardEventPriority: 1,
    enableFocusNavigation: function (a) {
        this._enableFocusNavigation !== a && ((this._enableFocusNavigation = a) ? this._addKeyboardEventListener() : this._removeKeyboardEventListener())
    },
    _setFirstFocsuedWidget: function (a) {
        this._firstFocusedWidget = a
    },
    _onKeyPressed: function (a, b) {
        this._enableFocusNavigation && this._firstFocusedWidget && (a === cc.KEY.dpadDown && (this._firstFocusedWidget =
            this._firstFocusedWidget.findNextFocusedWidget(ccui.Widget.DOWN, this._firstFocusedWidget)), a === cc.KEY.dpadUp && (this._firstFocusedWidget = this._firstFocusedWidget.findNextFocusedWidget(ccui.Widget.UP, this._firstFocusedWidget)), a === cc.KEY.dpadLeft && (this._firstFocusedWidget = this._firstFocusedWidget.findNextFocusedWidget(ccui.Widget.LEFT, this._firstFocusedWidget)), a === cc.KEY.dpadRight && (this._firstFocusedWidget = this._firstFocusedWidget.findNextFocusedWidget(ccui.Widget.RIGHT, this._firstFocusedWidget)))
    },
    _addKeyboardEventListener: function () {
        this._keyboardListener || (this._keyboardListener = cc.EventListener.create({
            event: cc.EventListener.KEYBOARD,
            onKeyReleased: this._onKeyPressed.bind(this)
        }), cc.eventManager.addListener(this._keyboardListener, this._keyboardEventPriority))
    },
    _removeKeyboardEventListener: function () {
        this._keyboardListener && (cc.eventManager.removeEventListener(this._keyboardListener), this._keyboardListener = null)
    }
});
ccui.__LAYOUT_COMPONENT_NAME = "__ui_layout";
ccui.Widget = ccui.ProtectedNode.extend({
    _enabled: !0,
    _bright: !0,
    _touchEnabled: !1,
    _brightStyle: null,
    _touchBeganPosition: null,
    _touchMovePosition: null,
    _touchEndPosition: null,
    _touchEventListener: null,
    _touchEventSelector: null,
    _name: "default",
    _widgetType: null,
    _actionTag: 0,
    _customSize: null,
    _layoutParameterDictionary: null,
    _layoutParameterType: 0,
    _focused: !1,
    _focusEnabled: !0,
    _ignoreSize: !1,
    _affectByClipping: !1,
    _sizeType: null,
    _sizePercent: null,
    _positionType: null,
    _positionPercent: null,
    _hit: !1,
    _nodes: null,
    _touchListener: null,
    _className: "Widget",
    _flippedX: !1,
    _flippedY: !1,
    _opacity: 255,
    _highlight: !1,
    _touchEventCallback: null,
    _clickEventListener: null,
    _propagateTouchEvents: !0,
    _unifySize: !1,
    _callbackName: null,
    _callbackType: null,
    _usingLayoutComponent: !1,
    _inViewRect: !0,
    ctor: function () {
        cc.ProtectedNode.prototype.ctor.call(this);
        this._brightStyle = ccui.Widget.BRIGHT_STYLE_NONE;
        this._touchBeganPosition = cc.p(0, 0);
        this._touchMovePosition = cc.p(0, 0);
        this._touchEndPosition = cc.p(0, 0);
        this._widgetType = ccui.Widget.TYPE_WIDGET;
        this._customSize =
            cc.size(0, 0);
        this._layoutParameterDictionary = {};
        this._sizeType = ccui.Widget.SIZE_ABSOLUTE;
        this._sizePercent = cc.p(0, 0);
        this._positionType = ccui.Widget.POSITION_ABSOLUTE;
        this._positionPercent = cc.p(0, 0);
        this._nodes = [];
        this._layoutParameterType = ccui.LayoutParameter.NONE;
        ccui.Widget.prototype.init.call(this)
    },
    init: function () {
        this._layoutParameterDictionary = {};
        this._initRenderer();
        this.setBright(!0);
        this.onFocusChanged = this.onFocusChange;
        this.onNextFocusedWidget = null;
        this.setAnchorPoint(cc.p(0.5, 0.5));
        this.ignoreContentAdaptWithSize(!0);
        return !0
    },
    onEnter: function () {
        var a = this._touchListener;
        a && (!a._isRegistered() && this._touchEnabled) && cc.eventManager.addListener(a, this);
        this._usingLayoutComponent || this.updateSizeAndPosition();
        this._sizeDirty && this._onSizeChanged();
        cc.ProtectedNode.prototype.onEnter.call(this)
    },
    onExit: function () {
        this.unscheduleUpdate();
        cc.ProtectedNode.prototype.onExit.call(this)
    },
    _getOrCreateLayoutComponent: function () {
        var a = this.getComponent(ccui.__LAYOUT_COMPONENT_NAME);
        null == a && (a = new ccui.LayoutComponent, this.addComponent(a));
        return a
    },
    getWidgetParent: function () {
        var a = this.getParent();
        return a instanceof ccui.Widget ? a : null
    },
    _updateContentSizeWithTextureSize: function (a) {
        this._unifySize ? this.setContentSize(a) : this.setContentSize(this._ignoreSize ? a : this._customSize)
    },
    _isAncestorsEnabled: function () {
        var a = this._getAncensterWidget(this);
        return null == a ? !0 : a && !a.isEnabled() ? !1 : a._isAncestorsEnabled()
    },
    setPropagateTouchEvents: function (a) {
        this._propagateTouchEvents = a
    },
    isPropagateTouchEvents: function () {
        return this._propagateTouchEvents
    },
    setSwallowTouches: function (a) {
        this._touchListener && this._touchListener.setSwallowTouches(a)
    },
    isSwallowTouches: function () {
        return this._touchListener ? this._touchListener.isSwallowTouches() : !1
    },
    _getAncensterWidget: function (a) {
        if (null == a) return null;
        a = a.getParent();
        return null == a ? null : a instanceof ccui.Widget ? a : this._getAncensterWidget(a.getParent())
    },
    _isAncestorsVisible: function (a) {
        return null == a ? !0 : (a = a.getParent()) && !a.isVisible() ? !1 : this._isAncestorsVisible(a)
    },
    setEnabled: function (a) {
        this._enabled =
            a;
        this.setBright(a)
    },
    _initRenderer: function () {},
    setContentSize: function (a, b) {
        cc.Node.prototype.setContentSize.call(this, a, b);
        var c = this._contentSize.width,
            d = this._contentSize.height;
        this._customSize.width = c;
        this._customSize.height = d;
        !this._unifySize && this._ignoreSize && (this._contentSize = this.getVirtualRendererSize());
        if (!this._usingLayoutComponent && this._running) {
            var f = this.getWidgetParent(),
                f = f ? f.getContentSize() : this._parent.getContentSize();
            this._sizePercent.x = 0 < f.width ? c / f.width : 0;
            this._sizePercent.y =
                0 < f.height ? d / f.height : 0
        }
        this._running ? this._onSizeChanged() : this._sizeDirty = !0
    },
    _setWidth: function (a) {
        a !== this._contentSize.width && (cc.Node.prototype._setWidth.call(this, a), this._customSize.width = a, !this._unifySize && this._ignoreSize && (this._contentSize = this.getVirtualRendererSize()), !this._usingLayoutComponent && this._running && (a = (a = this.getWidgetParent()) ? a.width : this._parent.width, this._sizePercent.x = 0 < a ? this._customSize.width / a : 0), this._running ? this._onSizeChanged() : this._sizeDirty = !0)
    },
    _setHeight: function (a) {
        a !==
            this._contentSize.height && (cc.Node.prototype._setHeight.call(this, a), this._customSize.height = a, !this._unifySize && this._ignoreSize && (this._contentSize = this.getVirtualRendererSize()), !this._usingLayoutComponent && this._running && (a = (a = this.getWidgetParent()) ? a.height : this._parent.height, this._sizePercent.y = 0 < a ? this._customSize.height / a : 0), this._running ? this._onSizeChanged() : this._sizeDirty = !0)
    },
    setSizePercent: function (a) {
        if (this._usingLayoutComponent) {
            var b = this._getOrCreateLayoutComponent();
            b.setUsingPercentContentSize(!0);
            b.setPercentContentSize(a);
            b.refreshLayout()
        } else {
            this._sizePercent.x = a.x;
            this._sizePercent.y = a.y;
            var b = this._customSize.width,
                c = this._customSize.height;
            this._running && ((c = this.getWidgetParent()) ? (b = c.width * a.x, c = c.height * a.y) : (b = this._parent.width * a.x, c = this._parent.height * a.y));
            this._ignoreSize ? this.setContentSize(this.getVirtualRendererSize()) : this.setContentSize(b, c);
            this._customSize.width = b;
            this._customSize.height = c
        }
    },
    _setWidthPercent: function (a) {
        this._sizePercent.x = a;
        var b = this._customSize.width;
        this._running && (b = this.getWidgetParent(), b = (b ? b.width : this._parent.width) * a);
        this._ignoreSize ? this._setWidth(this.getVirtualRendererSize().width) : this._setWidth(b);
        this._customSize.width = b
    },
    _setHeightPercent: function (a) {
        this._sizePercent.y = a;
        var b = this._customSize.height;
        this._running && (b = this.getWidgetParent(), b = (b ? b.height : this._parent.height) * a);
        this._ignoreSize ? this._setHeight(this.getVirtualRendererSize().height) : this._setHeight(b);
        this._customSize.height = b
    },
    updateSizeAndPosition: function (a) {
        a ||
            (a = (a = this.getWidgetParent()) ? a.getLayoutSize() : this._parent.getContentSize());
        switch (this._sizeType) {
        case ccui.Widget.SIZE_ABSOLUTE:
            this._ignoreSize ? this.setContentSize(this.getVirtualRendererSize()) : this.setContentSize(this._customSize);
            this._sizePercent.x = 0 < a.width ? this._customSize.width / a.width : 0;
            this._sizePercent.y = 0 < a.height ? this._customSize.height / a.height : 0;
            break;
        case ccui.Widget.SIZE_PERCENT:
            var b = cc.size(a.width * this._sizePercent.x, a.height * this._sizePercent.y);
            this._ignoreSize ? this.setContentSize(this.getVirtualRendererSize()) :
                this.setContentSize(b);
            this._customSize.width = b.width;
            this._customSize.height = b.height
        }
        this._onSizeChanged();
        b = this.getPosition();
        switch (this._positionType) {
        case ccui.Widget.POSITION_ABSOLUTE:
            0 >= a.width || 0 >= a.height ? this._positionPercent.x = this._positionPercent.y = 0 : (this._positionPercent.x = b.x / a.width, this._positionPercent.y = b.y / a.height);
            break;
        case ccui.Widget.POSITION_PERCENT:
            b = cc.p(a.width * this._positionPercent.x, a.height * this._positionPercent.y)
        }
        if (this._parent instanceof ccui.ImageView && (a = this._parent._imageRenderer) &&
            !a._textureLoaded) return;
        this.setPosition(b)
    },
    setSizeType: function (a) {
        this._sizeType = a;
        this._usingLayoutComponent && this._getOrCreateLayoutComponent().setUsingPercentContentSize(this._sizeType === ccui.SIZE_PERCENT)
    },
    getSizeType: function () {
        return this._sizeType
    },
    ignoreContentAdaptWithSize: function (a) {
        this._unifySize ? this.setContentSize(this._customSize) : this._ignoreSize !== a && (this._ignoreSize = a, this.setContentSize(a ? this.getVirtualRendererSize() : this._customSize))
    },
    isIgnoreContentAdaptWithSize: function () {
        return this._ignoreSize
    },
    getCustomSize: function () {
        return cc.size(this._customSize)
    },
    getLayoutSize: function () {
        return cc.size(this._contentSize)
    },
    getSizePercent: function () {
        this._usingLayoutComponent && (this._sizePercent = this._getOrCreateLayoutComponent().getPercentContentSize());
        return this._sizePercent
    },
    _getWidthPercent: function () {
        return this._sizePercent.x
    },
    _getHeightPercent: function () {
        return this._sizePercent.y
    },
    getWorldPosition: function () {
        return this.convertToWorldSpace(cc.p(this._anchorPoint.x * this._contentSize.width, this._anchorPoint.y *
            this._contentSize.height))
    },
    getVirtualRenderer: function () {
        return this
    },
    getVirtualRendererSize: function () {
        return cc.size(this._contentSize)
    },
    _onSizeChanged: function () {
        if (!this._usingLayoutComponent) {
            for (var a = this.getChildren(), b = 0, c = a.length; b < c; b++) {
                var d = a[b];
                d instanceof ccui.Widget && d.updateSizeAndPosition()
            }
            this._sizeDirty = !1
        }
    },
    setTouchEnabled: function (a) {
        this._touchEnabled !== a && ((this._touchEnabled = a) ? (this._touchListener || (this._touchListener = cc.EventListener.create({
            event: cc.EventListener.TOUCH_ONE_BY_ONE,
            swallowTouches: !0,
            onTouchBegan: this.onTouchBegan.bind(this),
            onTouchMoved: this.onTouchMoved.bind(this),
            onTouchEnded: this.onTouchEnded.bind(this)
        })), cc.eventManager.addListener(this._touchListener, this)) : cc.eventManager.removeListener(this._touchListener))
    },
    isTouchEnabled: function () {
        return this._touchEnabled
    },
    isHighlighted: function () {
        return this._highlight
    },
    setHighlighted: function (a) {
        a !== this._highlight && (this._highlight = a, this._bright ? this._highlight ? this.setBrightStyle(ccui.Widget.BRIGHT_STYLE_HIGH_LIGHT) :
            this.setBrightStyle(ccui.Widget.BRIGHT_STYLE_NORMAL) : this._onPressStateChangedToDisabled())
    },
    isFocused: function () {
        return this._focused
    },
    setFocused: function (a) {
        if (this._focused = a) ccui.Widget._focusedWidget = this, ccui.Widget._focusNavigationController && ccui.Widget._focusNavigationController._setFirstFocsuedWidget(this)
    },
    isFocusEnabled: function () {
        return this._focusEnabled
    },
    setFocusEnabled: function (a) {
        this._focusEnabled = a
    },
    findNextFocusedWidget: function (a, b) {
        if (null === this.onNextFocusedWidget || null == this.onNextFocusedWidget(a)) {
            var c =
                b instanceof ccui.Layout;
            if (this.isFocused() || c) {
                var d = this.getParent();
                return null === d || !(d instanceof ccui.Layout) ? c ? b.findNextFocusedWidget(a, b) : b : d.findNextFocusedWidget(a, b)
            }
            return b
        }
        c = this.onNextFocusedWidget(a);
        this.dispatchFocusEvent(this, c);
        return c
    },
    requestFocus: function () {
        this !== ccui.Widget._focusedWidget && this.dispatchFocusEvent(ccui.Widget._focusedWidget, this)
    },
    getCurrentFocusedWidget: function () {
        return ccui.Widget._focusedWidget
    },
    onFocusChanged: null,
    onNextFocusedWidget: null,
    interceptTouchEvent: function (a,
        b, c) {
        var d = this.getWidgetParent();
        d && d.interceptTouchEvent(a, b, c)
    },
    onFocusChange: function (a, b) {
        a && a.setFocused(!1);
        b && b.setFocused(!0)
    },
    dispatchFocusEvent: function (a, b) {
        a && !a.isFocused() && (a = ccui.Widget._focusedWidget);
        if (b !== a) {
            if (b && b.onFocusChanged) b.onFocusChanged(a, b);
            if (a && b.onFocusChanged) a.onFocusChanged(a, b);
            cc.eventManager.dispatchEvent(new cc.EventFocus(a, b))
        }
    },
    setBright: function (a) {
        (this._bright = a) ? (this._brightStyle = ccui.Widget.BRIGHT_STYLE_NONE, this.setBrightStyle(ccui.Widget.BRIGHT_STYLE_NORMAL)) :
        this._onPressStateChangedToDisabled()
    },
    setBrightStyle: function (a) {
        if (this._brightStyle !== a) switch (this._brightStyle = a = a || ccui.Widget.BRIGHT_STYLE_NORMAL, this._brightStyle) {
        case ccui.Widget.BRIGHT_STYLE_NORMAL:
            this._onPressStateChangedToNormal();
            break;
        case ccui.Widget.BRIGHT_STYLE_HIGH_LIGHT:
            this._onPressStateChangedToPressed()
        }
    },
    _onPressStateChangedToNormal: function () {},
    _onPressStateChangedToPressed: function () {},
    _onPressStateChangedToDisabled: function () {},
    _updateChildrenDisplayedRGBA: function () {
        this.setColor(this.getColor());
        this.setOpacity(this.getOpacity())
    },
    didNotSelectSelf: function () {},
    onTouchBegan: function (a, b) {
        this._hit = !1;
        if (this.isVisible() && this.isEnabled() && this._isAncestorsEnabled() && this._isAncestorsVisible(this)) {
            var c = a.getLocation();
            this._touchBeganPosition.x = c.x;
            this._touchBeganPosition.y = c.y;
            this.hitTest(this._touchBeganPosition) && this.isClippingParentContainsPoint(this._touchBeganPosition) && (this._hit = !0)
        }
        if (!this._hit) return !1;
        this.setHighlighted(!0);
        this._propagateTouchEvents && this.propagateTouchEvent(ccui.Widget.TOUCH_BEGAN,
            this, a);
        this._pushDownEvent();
        return !0
    },
    propagateTouchEvent: function (a, b, c) {
        var d = this.getWidgetParent();
        d && d.interceptTouchEvent(a, b, c)
    },
    onTouchMoved: function (a, b) {
        var c = a.getLocation();
        this._touchMovePosition.x = c.x;
        this._touchMovePosition.y = c.y;
        this.setHighlighted(this.hitTest(c));
        this._propagateTouchEvents && this.propagateTouchEvent(ccui.Widget.TOUCH_MOVED, this, a);
        this._moveEvent()
    },
    onTouchEnded: function (a, b) {
        var c = a.getLocation();
        this._touchEndPosition.x = c.x;
        this._touchEndPosition.y = c.y;
        this._propagateTouchEvents &&
            this.propagateTouchEvent(ccui.Widget.TOUCH_ENDED, this, a);
        c = this._highlight;
        this.setHighlighted(!1);
        c ? this._releaseUpEvent() : this._cancelUpEvent()
    },
    onTouchCancelled: function (a) {
        this.setHighlighted(!1);
        this._cancelUpEvent()
    },
    onTouchLongClicked: function (a) {
        this.longClickEvent()
    },
    _pushDownEvent: function () {
        this._touchEventCallback && this._touchEventCallback(this, ccui.Widget.TOUCH_BEGAN);
        this._touchEventListener && this._touchEventSelector && this._touchEventSelector.call(this._touchEventListener, this, ccui.Widget.TOUCH_BEGAN)
    },
    _moveEvent: function () {
        this._touchEventCallback && this._touchEventCallback(this, ccui.Widget.TOUCH_MOVED);
        this._touchEventListener && this._touchEventSelector && this._touchEventSelector.call(this._touchEventListener, this, ccui.Widget.TOUCH_MOVED)
    },
    _releaseUpEvent: function () {
        this._touchEventCallback && this._touchEventCallback(this, ccui.Widget.TOUCH_ENDED);
        this._touchEventListener && this._touchEventSelector && this._touchEventSelector.call(this._touchEventListener, this, ccui.Widget.TOUCH_ENDED);
        this._clickEventListener &&
            this._clickEventListener(this)
    },
    _cancelUpEvent: function () {
        this._touchEventCallback && this._touchEventCallback(this, ccui.Widget.TOUCH_CANCELED);
        this._touchEventListener && this._touchEventSelector && this._touchEventSelector.call(this._touchEventListener, this, ccui.Widget.TOUCH_CANCELED)
    },
    longClickEvent: function () {},
    addTouchEventListener: function (a, b) {
        void 0 === b ? this._touchEventCallback = a : (this._touchEventSelector = a, this._touchEventListener = b)
    },
    addClickEventListener: function (a) {
        this._clickEventListener =
            a
    },
    hitTest: function (a) {
        var b = cc.rect(0, 0, this._contentSize.width, this._contentSize.height);
        return cc.rectContainsPoint(b, this.convertToNodeSpace(a))
    },
    isClippingParentContainsPoint: function (a) {
        this._affectByClipping = !1;
        for (var b = this.getParent(), c = null; b;) {
            if (b instanceof ccui.Layout && b.isClippingEnabled()) {
                this._affectByClipping = !0;
                c = b;
                break
            }
            b = b.getParent()
        }
        return !this._affectByClipping ? !0 : c ? c.hitTest(a) ? c.isClippingParentContainsPoint(a) : !1 : !0
    },
    checkChildInfo: function (a, b, c) {
        var d = this.getWidgetParent();
        d && d.checkChildInfo(a, b, c)
    },
    setPosition: function (a, b) {
        if (!this._usingLayoutComponent && this._running) {
            var c = this.getWidgetParent();
            c && (c = c.getContentSize(), 0 >= c.width || 0 >= c.height ? (this._positionPercent.x = 0, this._positionPercent.y = 0) : void 0 === b ? (this._positionPercent.x = a.x / c.width, this._positionPercent.y = a.y / c.height) : (this._positionPercent.x = a / c.width, this._positionPercent.y = b / c.height))
        }
        cc.Node.prototype.setPosition.call(this, a, b)
    },
    setPositionX: function (a) {
        if (this._running) {
            var b = this.getWidgetParent();
            b && (b = b.width, this._positionPercent.x = 0 >= b ? 0 : a / b)
        }
        cc.Node.prototype.setPositionX.call(this, a)
    },
    setPositionY: function (a) {
        if (this._running) {
            var b = this.getWidgetParent();
            b && (b = b.height, this._positionPercent.y = 0 >= b ? 0 : a / b)
        }
        cc.Node.prototype.setPositionY.call(this, a)
    },
    setPositionPercent: function (a) {
        if (this._usingLayoutComponent) {
            var b = this._getOrCreateLayoutComponent();
            b.setPositionPercentX(a.x);
            b.setPositionPercentY(a.y);
            b.refreshLayout()
        } else this._setXPercent(a.x), this._setYPercent(a.y), this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    _setXPercent: function (a) {
        if (this._usingLayoutComponent) {
            var b = this._getOrCreateLayoutComponent();
            b.setPositionPercentX(a.x);
            b.refreshLayout()
        } else this._positionPercent.x = a, this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    _setYPercent: function (a) {
        if (this._usingLayoutComponent) {
            var b = this._getOrCreateLayoutComponent();
            b.setPositionPercentY(a.x);
            b.refreshLayout()
        } else this._positionPercent.y = a, this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    getPositionPercent: function () {
        if (this._usingLayoutComponent) {
            var a =
                this._getOrCreateLayoutComponent();
            this._positionPercent.x = a.getPositionPercentX();
            this._positionPercent.y = a.getPositionPercentY()
        }
        return cc.p(this._positionPercent)
    },
    _getXPercent: function () {
        if (this._usingLayoutComponent) {
            var a = this._getOrCreateLayoutComponent();
            this._positionPercent.x = a.getPositionPercentX();
            this._positionPercent.y = a.getPositionPercentY()
        }
        return this._positionPercent.x
    },
    _getYPercent: function () {
        if (this._usingLayoutComponent) {
            var a = this._getOrCreateLayoutComponent();
            this._positionPercent.x =
                a.getPositionPercentX();
            this._positionPercent.y = a.getPositionPercentY()
        }
        return this._positionPercent.y
    },
    setPositionType: function (a) {
        this._positionType = a;
        if (this._usingLayoutComponent) {
            var b = this._getOrCreateLayoutComponent();
            a === ccui.POSITION_ABSOLUTE ? (b.setPositionPercentXEnabled(!1), b.setPositionPercentYEnabled(!1)) : (b.setPositionPercentXEnabled(!0), b.setPositionPercentYEnabled(!0))
        }
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
    },
    getPositionType: function () {
        return this._positionType
    },
    setFlippedX: function (a) {
        var b = this.getScaleX();
        this._flippedX = a;
        this.setScaleX(b)
    },
    isFlippedX: function () {
        return this._flippedX
    },
    setFlippedY: function (a) {
        var b = this.getScaleY();
        this._flippedY = a;
        this.setScaleY(b)
    },
    isFlippedY: function () {
        return this._flippedY
    },
    _adaptRenderers: function () {},
    isBright: function () {
        return this._bright
    },
    isEnabled: function () {
        return this._enabled
    },
    getLeftBoundary: function () {
        return this.getPositionX() - this._getAnchorX() * this._contentSize.width
    },
    getBottomBoundary: function () {
        return this.getPositionY() -
            this._getAnchorY() * this._contentSize.height
    },
    getRightBoundary: function () {
        return this.getLeftBoundary() + this._contentSize.width
    },
    getTopBoundary: function () {
        return this.getBottomBoundary() + this._contentSize.height
    },
    getTouchBeganPosition: function () {
        return cc.p(this._touchBeganPosition)
    },
    getTouchMovePosition: function () {
        return cc.p(this._touchMovePosition)
    },
    getTouchEndPosition: function () {
        return cc.p(this._touchEndPosition)
    },
    getWidgetType: function () {
        return this._widgetType
    },
    setLayoutParameter: function (a) {
        a &&
            (this._layoutParameterDictionary[a.getLayoutType()] = a, this._layoutParameterType = a.getLayoutType())
    },
    getLayoutParameter: function (a) {
        a = a || this._layoutParameterType;
        return this._layoutParameterDictionary[a]
    },
    getDescription: function () {
        return "Widget"
    },
    clone: function () {
        var a = this._createCloneInstance();
        a._copyProperties(this);
        a._copyClonedWidgetChildren(this);
        return a
    },
    _createCloneInstance: function () {
        return new ccui.Widget
    },
    _copyClonedWidgetChildren: function (a) {
        a = a.getChildren();
        for (var b = 0; b < a.length; b++) {
            var c =
                a[b];
            c instanceof ccui.Widget && this.addChild(c.clone())
        }
    },
    _copySpecialProperties: function (a) {},
    _copyProperties: function (a) {
        this.setEnabled(a.isEnabled());
        this.setVisible(a.isVisible());
        this.setBright(a.isBright());
        this.setTouchEnabled(a.isTouchEnabled());
        this.setLocalZOrder(a.getLocalZOrder());
        this.setTag(a.getTag());
        this.setName(a.getName());
        this.setActionTag(a.getActionTag());
        this._ignoreSize = a._ignoreSize;
        this.setContentSize(a._contentSize);
        this._customSize.width = a._customSize.width;
        this._customSize.height =
            a._customSize.height;
        this._copySpecialProperties(a);
        this._sizeType = a.getSizeType();
        this._sizePercent.x = a._sizePercent.x;
        this._sizePercent.y = a._sizePercent.y;
        this._positionType = a._positionType;
        this._positionPercent.x = a._positionPercent.x;
        this._positionPercent.y = a._positionPercent.y;
        this.setPosition(a.getPosition());
        this.setAnchorPoint(a.getAnchorPoint());
        this.setScaleX(a.getScaleX());
        this.setScaleY(a.getScaleY());
        this.setRotation(a.getRotation());
        this.setRotationX(a.getRotationX());
        this.setRotationY(a.getRotationY());
        this.setFlippedX(a.isFlippedX());
        this.setFlippedY(a.isFlippedY());
        this.setColor(a.getColor());
        this.setOpacity(a.getOpacity());
        this._touchEventCallback = a._touchEventCallback;
        this._touchEventListener = a._touchEventListener;
        this._touchEventSelector = a._touchEventSelector;
        this._clickEventListener = a._clickEventListener;
        this._focused = a._focused;
        this._focusEnabled = a._focusEnabled;
        this._propagateTouchEvents = a._propagateTouchEvents;
        for (var b in a._layoutParameterDictionary) {
            var c = a._layoutParameterDictionary[b];
            c && this.setLayoutParameter(c.clone())
        }
    },
    setActionTag: function (a) {
        this._actionTag = a
    },
    getActionTag: function () {
        return this._actionTag
    },
    getLeftInParent: function () {
        cc.log("getLeftInParent is deprecated. Please use getLeftBoundary instead.");
        return this.getLeftBoundary()
    },
    getBottomInParent: function () {
        cc.log("getBottomInParent is deprecated. Please use getBottomBoundary instead.");
        return this.getBottomBoundary()
    },
    getRightInParent: function () {
        cc.log("getRightInParent is deprecated. Please use getRightBoundary instead.");
        return this.getRightBoundary()
    },
    getTopInParent: function () {
        cc.log("getTopInParent is deprecated. Please use getTopBoundary instead.");
        return this.getTopBoundary()
    },
    getTouchEndPos: function () {
        cc.log("getTouchEndPos is deprecated. Please use getTouchEndPosition instead.");
        return this.getTouchEndPosition()
    },
    getTouchMovePos: function () {
        cc.log("getTouchMovePos is deprecated. Please use getTouchMovePosition instead.");
        return this.getTouchMovePosition()
    },
    clippingParentAreaContainPoint: function (a) {
        cc.log("clippingParentAreaContainPoint is deprecated. Please use isClippingParentContainsPoint instead.");
        this.isClippingParentContainsPoint(a)
    },
    getTouchStartPos: function () {
        cc.log("getTouchStartPos is deprecated. Please use getTouchBeganPosition instead.");
        return this.getTouchBeganPosition()
    },
    setSize: function (a) {
        this.setContentSize(a)
    },
    getSize: function () {
        return this.getContentSize()
    },
    addNode: function (a, b, c) {
        a instanceof ccui.Widget ? cc.log("Please use addChild to add a Widget.") : (cc.Node.prototype.addChild.call(this, a, b, c), this._nodes.push(a))
    },
    getNodeByTag: function (a) {
        for (var b = this._nodes, c = 0; c < b.length; c++) {
            var d =
                b[c];
            if (d && d.getTag() === a) return d
        }
        return null
    },
    getNodes: function () {
        return this._nodes
    },
    removeNode: function (a, b) {
        cc.Node.prototype.removeChild.call(this, a, b);
        cc.arrayRemoveObject(this._nodes, a)
    },
    _getNormalGLProgram: function () {
        return cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR)
    },
    _getGrayGLProgram: function () {
        return cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY)
    },
    removeNodeByTag: function (a, b) {
        var c = this.getChildByTag(a);
        c ? this.removeChild(c, b) : cc.log("cocos2d: removeNodeByTag(tag = %d): child not found!",
            a)
    },
    removeAllNodes: function () {
        for (var a = 0; a < this._nodes.length; a++) cc.Node.prototype.removeChild.call(this, this._nodes[a]);
        this._nodes.length = 0
    },
    _findLayout: function () {
        cc.renderer.childrenOrderDirty = !0;
        for (var a = this._parent; a;)
            if (a._doLayout) {
                a._doLayoutDirty = !0;
                break
            } else a = a._parent
    },
    isUnifySizeEnabled: function () {
        return this._unifySize
    },
    setUnifySizeEnabled: function (a) {
        this._unifySize = a
    },
    _ccEventCallback: null,
    addCCSEventListener: function (a) {
        this._ccEventCallback = a
    },
    setScaleX: function (a) {
        this._flippedX &&
            (a *= -1);
        cc.Node.prototype.setScaleX.call(this, a)
    },
    setScaleY: function (a) {
        this._flippedY && (a *= -1);
        cc.Node.prototype.setScaleY.call(this, a)
    },
    setScale: function (a, b) {
        void 0 === b && (b = a);
        this.setScaleX(a);
        this.setScaleY(b)
    },
    getScaleX: function () {
        var a = cc.Node.prototype.getScaleX.call(this);
        this._flippedX && (a *= -1);
        return a
    },
    getScaleY: function () {
        var a = cc.Node.prototype.getScaleY.call(this);
        this._flippedY && (a *= -1);
        return a
    },
    getScale: function () {
        this.getScaleX() !== this.getScaleY() && cc.log("Widget#scale. ScaleX != ScaleY. Don't know which one to return");
        return this.getScaleX()
    },
    setCallbackName: function (a) {
        this._callbackName = a
    },
    getCallbackName: function () {
        return this._callbackName
    },
    setCallbackType: function (a) {
        this._callbackType = a
    },
    getCallbackType: function () {
        return this._callbackType
    },
    setLayoutComponentEnabled: function (a) {
        this._usingLayoutComponent = a
    },
    isLayoutComponentEnabled: function () {
        return this._usingLayoutComponent
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_WEBGL ? new ccui.Widget.WebGLRenderCmd(this) : new ccui.Widget.CanvasRenderCmd(this)
    }
});
_p = ccui.Widget.prototype;
cc.defineGetterSetter(_p, "xPercent", _p._getXPercent, _p._setXPercent);
cc.defineGetterSetter(_p, "yPercent", _p._getYPercent, _p._setYPercent);
cc.defineGetterSetter(_p, "widthPercent", _p._getWidthPercent, _p._setWidthPercent);
cc.defineGetterSetter(_p, "heightPercent", _p._getHeightPercent, _p._setHeightPercent);
cc.defineGetterSetter(_p, "widgetParent", _p.getWidgetParent);
cc.defineGetterSetter(_p, "enabled", _p.isEnabled, _p.setEnabled);
cc.defineGetterSetter(_p, "focused", _p.isFocused, _p.setFocused);
cc.defineGetterSetter(_p, "sizeType", _p.getSizeType, _p.setSizeType);
cc.defineGetterSetter(_p, "widgetType", _p.getWidgetType);
cc.defineGetterSetter(_p, "touchEnabled", _p.isTouchEnabled, _p.setTouchEnabled);
cc.defineGetterSetter(_p, "updateEnabled", _p.isUpdateEnabled, _p.setUpdateEnabled);
cc.defineGetterSetter(_p, "bright", _p.isBright, _p.setBright);
cc.defineGetterSetter(_p, "name", _p.getName, _p.setName);
cc.defineGetterSetter(_p, "actionTag", _p.getActionTag, _p.setActionTag);
cc.defineGetterSetter(_p, "opacity", _p.getOpacity, _p.setOpacity);
_p = null;
ccui.Widget.create = function () {
    return new ccui.Widget
};
ccui.Widget._focusedWidget = null;
ccui.Widget._focusNavigationController = null;
ccui.Widget.enableDpadNavigation = function (a) {
    a ? (null == ccui.Widget._focusNavigationController && (ccui.Widget._focusNavigationController = new ccui._FocusNavigationController, ccui.Widget._focusedWidget && ccui.Widget._focusNavigationController._setFirstFocsuedWidget(ccui.Widget._focusedWidget)), ccui.Widget._focusNavigationController.enableFocusNavigation(!0)) : ccui.Widget._focusNavigationController && (ccui.Widget._focusNavigationController.enableFocusNavigation(!1), ccui.Widget._focusNavigationController = null)
};
ccui.Widget.getCurrentFocusedWidget = function () {
    return ccui.Widget._focusedWidget
};
ccui.Widget.BRIGHT_STYLE_NONE = -1;
ccui.Widget.BRIGHT_STYLE_NORMAL = 0;
ccui.Widget.BRIGHT_STYLE_HIGH_LIGHT = 1;
ccui.Widget.TYPE_WIDGET = 0;
ccui.Widget.TYPE_CONTAINER = 1;
ccui.Widget.LEFT = 0;
ccui.Widget.RIGHT = 1;
ccui.Widget.UP = 2;
ccui.Widget.DOWN = 3;
ccui.Widget.LOCAL_TEXTURE = 0;
ccui.Widget.PLIST_TEXTURE = 1;
ccui.Widget.TOUCH_BEGAN = 0;
ccui.Widget.TOUCH_MOVED = 1;
ccui.Widget.TOUCH_ENDED = 2;
ccui.Widget.TOUCH_CANCELED = 3;
ccui.Widget.SIZE_ABSOLUTE = 0;
ccui.Widget.SIZE_PERCENT = 1;
ccui.Widget.POSITION_ABSOLUTE = 0;
ccui.Widget.POSITION_PERCENT = 1;
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
    if (cc._renderType === cc.game.RENDER_TYPE_CANVAS) {
        ccui.Widget.CanvasRenderCmd = function (a) {
            this._pNodeCmdCtor(a);
            this._needDraw = !1
        };
        var a = ccui.Widget.CanvasRenderCmd.prototype = Object.create(cc.ProtectedNode.CanvasRenderCmd.prototype);
        a.constructor = ccui.Widget.CanvasRenderCmd;
        a.visit = function (a) {
            var c = this._node,
                d = cc.renderer;
            if (a = a || this.getParentRenderCmd()) this._curLevel = a._curLevel + 1;
            isNaN(c._customZ) && (c._vertexZ = d.assignedZ, d.assignedZ +=
                d.assignedZStep);
            c._adaptRenderers();
            this._syncStatus(a)
        };
        a.transform = function (a, c) {
            this._transform || (this._transform = {
                a: 1,
                b: 0,
                c: 0,
                d: 1,
                tx: 0,
                ty: 0
            }, this._worldTransform = {
                a: 1,
                b: 0,
                c: 0,
                d: 1,
                tx: 0,
                ty: 0
            });
            var d = this._node;
            if (d._visible && d._running) {
                d._adaptRenderers();
                if (!this._usingLayoutComponent) {
                    var f = d.getWidgetParent();
                    f && (f = f.getContentSize(), 0 !== f.width && 0 !== f.height && (d._position.x = f.width * d._positionPercent.x, d._position.y = f.height * d._positionPercent.y))
                }
                this.pNodeTransform(a, c)
            }
        }
    } else ccui.Widget.WebGLRenderCmd =
        function (a) {
            this._pNodeCmdCtor(a);
            this._needDraw = !1
        }, a = ccui.Widget.WebGLRenderCmd.prototype = Object.create(cc.ProtectedNode.WebGLRenderCmd.prototype), a.constructor = ccui.Widget.WebGLRenderCmd, a.visit = function (a) {
            var c = this._node,
                d = cc.renderer;
            if (a = a || this.getParentRenderCmd()) this._curLevel = a._curLevel + 1;
            isNaN(c._customZ) && (c._vertexZ = d.assignedZ, d.assignedZ += d.assignedZStep);
            c._adaptRenderers();
            this._syncStatus(a)
        }, a.transform = function (a, c) {
            this._transform || (this._transform = {
                    a: 1,
                    b: 0,
                    c: 0,
                    d: 1,
                    tx: 0,
                    ty: 0
                },
                this._worldTransform = {
                    a: 1,
                    b: 0,
                    c: 0,
                    d: 1,
                    tx: 0,
                    ty: 0
                });
            var d = this._node;
            if (d._visible && d._running) {
                d._adaptRenderers();
                if (!this._usingLayoutComponent) {
                    var f = d.getWidgetParent();
                    f && (f = f.getContentSize(), 0 !== f.width && 0 !== f.height && (d._position.x = f.width * d._positionPercent.x, d._position.y = f.height * d._positionPercent.y))
                }
                this.pNodeTransform(a, c)
            }
        };
    a.widgetTransform = a.transform
});
(function () {
    var a = {
            _pool: {},
            _lengths: [],
            put: function (a) {
                var b = a.length;
                this._pool[b] ? this._pool[b].push(a) : (this._pool[b] = [a], this._lengths.push(b), this._lengths.sort())
            },
            get: function (a) {
                for (var b, c = 0; c < this._lengths.length; c++)
                    if (this._lengths[c] >= a) {
                        b = this._lengths[c];
                        break
                    } if (b) return this._pool[b].pop()
            }
        },
        b = cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL,
        c, d = {
            _rebuildQuads_base: function (b, d, f, g) {
                var h = b._vertices,
                    x = b._renderCmd._worldTransform,
                    y, z, t;
                if (g) z = y = 0, t = f.width, f = f.height;
                else {
                    y = d._originalSize;
                    var A = d._rect,
                        w = d._offset;
                    t = f.width / y.width;
                    g = f.height / y.height;
                    var B = w.x - (y.width - A.width) / 2;
                    z = w.y + (y.height - A.height) / 2;
                    var F = w.y - (y.height - A.height) / 2;
                    y = (w.x + (y.width - A.width) / 2) * t;
                    z *= g;
                    t = f.width + B * t;
                    f = f.height + F * g
                }
                8 > h.length && (a.put(h), h = a.get(8) || new Float32Array(8), b._vertices = h);
                c ? (h[0] = y * x.a + z * x.c + x.tx, h[1] = y * x.b + z * x.d + x.ty, h[2] = t * x.a + z * x.c + x.tx, h[3] = t * x.b + z * x.d + x.ty, h[4] = y * x.a + f * x.c + x.tx, h[5] = y * x.b + f * x.d + x.ty, h[6] = t * x.a + f * x.c + x.tx, h[7] = t * x.b + f * x.d + x.ty) : (h[0] = y, h[1] = z, h[2] = t, h[3] = z, h[4] =
                    y, h[5] = f, h[6] = t, h[7] = f);
                b._uvsDirty && this._calculateUVs(b, d);
                b._vertCount = 4
            },
            _calculateUVs: function (c, d) {
                var f = c._uvs,
                    g = d._texture._pixelsWide,
                    h = d._texture._pixelsHigh,
                    x = d._rect,
                    x = cc.rectPointsToPixels(x);
                8 > f.length && (a.put(f), f = a.get(8) || new Float32Array(8), c._uvs = f);
                var y, z, t = b ? 0.5 : 0;
                d._rotated ? (y = (x.x + t) / g, z = (x.y + x.width - t) / h, g = (x.x + x.height - t) / g, h = (x.y + t) / h, f[0] = y, f[1] = h, f[2] = y, f[3] = z, f[4] = g, f[5] = h, f[6] = g, f[7] = z) : (y = (x.x + t) / g, z = (x.y + x.height - t) / h, g = (x.x + x.width - t) / g, h = (x.y + t) / h, f[0] = y, f[1] = z,
                    f[2] = g, f[3] = z, f[4] = y, f[5] = h, f[6] = g, f[7] = h)
            }
        },
        f = {
            x: Array(4),
            y: Array(4),
            _rebuildQuads_base: function (b, d, f, g, h, x, y) {
                var z = b._vertices,
                    t = b._renderCmd._worldTransform,
                    A = f.width - g - h,
                    w = f.height - x - y,
                    B = f.width / (g + h),
                    F = f.height / (x + y),
                    C = this.x,
                    D = this.y;
                C[0] = 0;
                C[1] = g * (1 < B ? 1 : B);
                C[2] = C[1] + (0 > A ? 0 : A);
                C[3] = f.width;
                D[0] = 0;
                D[1] = y * (1 < F ? 1 : F);
                D[2] = D[1] + (0 > w ? 0 : w);
                D[3] = f.height;
                32 > z.length && (a.put(z), z = a.get(32) || new Float32Array(32), b._vertices = z);
                f = 0;
                if (c)
                    for (A = 0; 4 > A; A++)
                        for (w = 0; 4 > w; w++) z[f] = C[w] * t.a + D[A] * t.c + t.tx, z[f +
                            1] = C[w] * t.b + D[A] * t.d + t.ty, f += 2;
                else
                    for (A = 0; 4 > A; A++)
                        for (w = 0; 4 > w; w++) z[f] = C[w], z[f + 1] = D[A], f += 2;
                b._uvsDirty && this._calculateUVs(b, d, g, h, x, y)
            },
            _calculateUVs: function (c, d, f, g, h, x) {
                var y = c._uvs,
                    z = d._rect,
                    t = d._texture._pixelsWide,
                    A = d._texture._pixelsHigh,
                    w, B = d._rect,
                    B = cc.rectPointsToPixels(B),
                    z = cc.rectPointsToPixels(z),
                    F = cc.contentScaleFactor();
                f *= F;
                g = z.width - f - g * F;
                h *= F;
                x *= F;
                w = z.height - h - x;
                32 > y.length && (a.put(y), y = a.get(32) || new Float32Array(32), c._uvs = y);
                c = this.x;
                var z = this.y,
                    C = b ? 0.5 : 0,
                    F = 0;
                if (d._rotated) {
                    c[0] =
                        (B.x + C) / t;
                    c[1] = (x + B.x) / t;
                    c[2] = (x + w + B.x) / t;
                    c[3] = (B.x + B.height - C) / t;
                    z[3] = (B.y + C) / A;
                    z[2] = (f + B.y) / A;
                    z[1] = (f + g + B.y) / A;
                    z[0] = (B.y + B.width - C) / A;
                    for (d = 0; 4 > d; d++)
                        for (t = 0; 4 > t; t++) y[F] = c[d], y[F + 1] = z[3 - t], F += 2
                } else {
                    c[0] = (B.x + C) / t;
                    c[1] = (f + B.x) / t;
                    c[2] = (f + g + B.x) / t;
                    c[3] = (B.x + B.width - C) / t;
                    z[3] = (B.y + C) / A;
                    z[2] = (h + B.y) / A;
                    z[1] = (h + w + B.y) / A;
                    z[0] = (B.y + B.height - C) / A;
                    for (d = 0; 4 > d; d++)
                        for (t = 0; 4 > t; t++) y[F] = c[t], y[F + 1] = z[d], F += 2
                }
            }
        };
    ccui.Scale9Sprite = cc.Scale9Sprite = cc.Node.extend({
        _spriteFrame: null,
        _scale9Image: null,
        _insetLeft: 0,
        _insetRight: 0,
        _insetTop: 0,
        _insetBottom: 0,
        _blendFunc: null,
        _renderingType: 1,
        _brightState: 0,
        _opacityModifyRGB: !1,
        _rawVerts: null,
        _rawUvs: null,
        _vertices: null,
        _uvs: null,
        _vertCount: 0,
        _quadsDirty: !0,
        _uvsDirty: !0,
        _isTriangle: !1,
        _isTrimmedContentSize: !1,
        _textureLoaded: !1,
        _flippedX: !1,
        _flippedY: !1,
        _className: "Scale9Sprite",
        ctor: function (b, d, f) {
            cc.Node.prototype.ctor.call(this);
            this._loader = new cc.Sprite.LoadManager;
            this._renderCmd.setState(this._brightState);
            this._blendFunc = cc.BlendFunc._alphaPremultiplied();
            this.setAnchorPoint(cc.p(0.5, 0.5));
            this._rawUvs = this._rawVerts = null;
            this._vertices = a.get(8) || new Float32Array(8);
            this._uvs = a.get(8) || new Float32Array(8);
            if (void 0 !== b)
                if (b instanceof cc.SpriteFrame) this.initWithSpriteFrame(b, d);
                else {
                    var g = cc.spriteFrameCache.getSpriteFrame(b);
                    g ? this.initWithSpriteFrame(g, d) : this.initWithFile(b, d, f)
                } void 0 === c && (c = cc._renderType === cc.game.RENDER_TYPE_WEBGL)
        },
        textureLoaded: function () {
            return this._textureLoaded
        },
        getCapInsets: function () {
            return cc.rect(this._capInsetsInternal)
        },
        _asyncSetCapInsets: function () {
            this.removeEventListener("load", this._asyncSetCapInsets, this);
            this.setCapInsets(this._cacheCapInsets);
            this._cacheCapInsets = null
        },
        setCapInsets: function (a) {
            if (!this.loaded()) return this._cacheCapInsets = a, this.removeEventListener("load", this._asyncSetCapInsets, this), this.addEventListener("load", this._asyncSetCapInsets, this), !1;
            this._capInsetsInternal = a;
            this._updateCapInsets(this._spriteFrame._rect, this._capInsetsInternal)
        },
        _updateCapInsets: function (a, b) {
            !b || !a || cc._rectEqualToZero(b) ?
                (a = a || {
                    x: 0,
                    y: 0,
                    width: this._contentSize.width,
                    height: this._contentSize.height
                }, this._capInsetsInternal = cc.rect(a.width / 3, a.height / 3, a.width / 3, a.height / 3)) : this._capInsetsInternal = b;
            cc._rectEqualToZero(a) || (this._insetLeft = this._capInsetsInternal.x, this._insetTop = this._capInsetsInternal.y, this._insetRight = a.width - this._insetLeft - this._capInsetsInternal.width, this._insetBottom = a.height - this._insetTop - this._capInsetsInternal.height)
        },
        initWithFile: function (a, b, c) {
            a instanceof cc.Rect ? (c = a = b, b = cc.rect(0,
                0, 0, 0)) : (b = b || cc.rect(0, 0, 0, 0), c = c || cc.rect(0, 0, 0, 0));
            if (!a) throw Error("ccui.Scale9Sprite.initWithFile(): file should be non-null");
            var d = cc.textureCache.getTextureForKey(a);
            d || (d = cc.textureCache.addImage(a));
            var f = d.isLoaded();
            this._textureLoaded = f;
            this._loader.clear();
            if (!f) return this._loader.once(d, function () {
                this.initWithFile(a, b, c);
                this.dispatchEvent("load")
            }, this), !1;
            cc._rectEqualToZero(b) && (f = d.getContentSize(), b = cc.rect(0, 0, f.width, f.height));
            this.setTexture(d, b);
            this._updateCapInsets(b,
                c);
            return !0
        },
        updateWithBatchNode: function (a, b, c, d) {
            if (!a) return !1;
            var f = a.getTexture();
            this._loader.clear();
            if (!f.isLoaded()) return this._loader.once(f, function () {
                this.updateWithBatchNode(a, b, c, d);
                this.dispatchEvent("load")
            }, this), !1;
            this.setTexture(f, b);
            this._updateCapInsets(b, d);
            return !0
        },
        initWithSpriteFrame: function (a, b) {
            this.setSpriteFrame(a);
            b = b || cc.rect(0, 0, 0, 0);
            this._updateCapInsets(a._rect, b)
        },
        initWithSpriteFrameName: function (a, b) {
            if (!a) throw Error("ccui.Scale9Sprite.initWithSpriteFrameName(): spriteFrameName should be non-null");
            b = b || cc.rect(0, 0, 0, 0);
            var c = cc.spriteFrameCache.getSpriteFrame(a);
            if (null == c) return cc.log("ccui.Scale9Sprite.initWithSpriteFrameName(): can't find the sprite frame by spriteFrameName"), !1;
            this.setSpriteFrame(c);
            b = b || cc.rect(0, 0, 0, 0);
            this._updateCapInsets(c._rect, b)
        },
        loaded: function () {
            return null === this._spriteFrame ? !1 : this._spriteFrame.textureLoaded()
        },
        setTexture: function (a, b) {
            var c = new cc.SpriteFrame(a, b);
            this.setSpriteFrame(c)
        },
        _updateBlendFunc: function () {
            var a = this._blendFunc;
            !this._spriteFrame ||
                !this._spriteFrame._texture.hasPremultipliedAlpha() ? (a.src === cc.ONE && a.dst === cc.BLEND_DST && (a.src = cc.SRC_ALPHA), this._opacityModifyRGB = !1) : (a.src === cc.SRC_ALPHA && a.dst === cc.BLEND_DST && (a.src = cc.ONE), this._opacityModifyRGB = !0)
        },
        setOpacityModifyRGB: function (a) {
            this._opacityModifyRGB !== a && (this._opacityModifyRGB = a, this._renderCmd._setColorDirty())
        },
        isOpacityModifyRGB: function () {
            return this._opacityModifyRGB
        },
        setSpriteFrame: function (a) {
            if (a) {
                this._spriteFrame = a;
                this._uvsDirty = this._quadsDirty = !0;
                var b =
                    this,
                    c = function () {
                        cc.sizeEqualToSize(b._contentSize, cc.size(0, 0)) && b.setContentSize(b._spriteFrame._rect);
                        b._textureLoaded = !0;
                        b._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty);
                        cc.renderer.childrenOrderDirty = !0
                    };
                b._textureLoaded = a.textureLoaded();
                b._textureLoaded ? c() : (this._loader.clear(), this._loader.once(a, function () {
                    c();
                    this.dispatchEvent("load")
                }, this))
            }
        },
        setBlendFunc: function (a, b) {
            void 0 === b ? (this._blendFunc.src = a.src || cc.BLEND_SRC, this._blendFunc.dst = a.dst || cc.BLEND_DST) : (this._blendFunc.src =
                a || cc.BLEND_SRC, this._blendFunc.dst = b || cc.BLEND_DST);
            this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty)
        },
        getBlendFunc: function () {
            return new cc.BlendFunc(this._blendFunc.src, this._blendFunc.dst)
        },
        setPreferredSize: function (a) {
            a && !cc.sizeEqualToSize(this._contentSize, a) && this.setContentSize(a)
        },
        getPreferredSize: function () {
            return this.getContentSize()
        },
        setContentSize: function (a, b) {
            void 0 === b && (b = a.height, a = a.width);
            a === this._contentSize.width && b === this._contentSize.height || (cc.Node.prototype.setContentSize.call(this,
                a, b), this._quadsDirty = !0)
        },
        getContentSize: function () {
            return this._renderingType === ccui.Scale9Sprite.RenderingType.SIMPLE ? this._spriteFrame ? this._spriteFrame._originalSize : cc.size(this._contentSize) : cc.size(this._contentSize)
        },
        _setWidth: function (a) {
            cc.Node.prototype._setWidth.call(this, a);
            this._quadsDirty = !0
        },
        _setHeight: function (a) {
            cc.Node.prototype._setHeight.call(this, a);
            this._quadsDirty = !0
        },
        setState: function (a) {
            this._brightState = a;
            this._renderCmd.setState(a);
            this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty)
        },
        getState: function () {
            return this._brightState
        },
        setRenderingType: function (a) {
            this._renderingType !== a && (this._renderingType = a, this._uvsDirty = this._quadsDirty = !0, this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty))
        },
        getRenderingType: function () {
            return this._renderingType
        },
        setInsetLeft: function (a) {
            this._insetLeft = a;
            this._uvsDirty = this._quadsDirty = !0;
            this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty)
        },
        getInsetLeft: function () {
            return this._insetLeft
        },
        setInsetTop: function (a) {
            this._insetTop =
                a;
            this._uvsDirty = this._quadsDirty = !0;
            this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty)
        },
        getInsetTop: function () {
            return this._insetTop
        },
        setInsetRight: function (a) {
            this._insetRight = a;
            this._uvsDirty = this._quadsDirty = !0;
            this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty)
        },
        getInsetRight: function () {
            return this._insetRight
        },
        setInsetBottom: function (a) {
            this._insetBottom = a;
            this._uvsDirty = this._quadsDirty = !0;
            this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty)
        },
        getInsetBottom: function () {
            return this._insetBottom
        },
        _rebuildQuads: function () {
            if (this._spriteFrame && this._spriteFrame._textureLoaded) {
                this._updateBlendFunc();
                this._isTriangle = !1;
                switch (this._renderingType) {
                case h.SIMPLE:
                    d._rebuildQuads_base(this, this._spriteFrame, this._contentSize, this._isTrimmedContentSize);
                    break;
                case h.SLICED:
                    f._rebuildQuads_base(this, this._spriteFrame, this._contentSize, this._insetLeft, this._insetRight, this._insetTop, this._insetBottom);
                    break;
                default:
                    this._uvsDirty = this._quadsDirty = !1;
                    cc.error("Can not generate quad");
                    return
                }
                this._uvsDirty =
                    this._quadsDirty = !1
            }
        },
        _createRenderCmd: function () {
            return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new ccui.Scale9Sprite.CanvasRenderCmd(this) : new ccui.Scale9Sprite.WebGLRenderCmd(this)
        }
    });
    var g = ccui.Scale9Sprite.prototype;
    cc.EventHelper.prototype.apply(g);
    cc.defineGetterSetter(g, "preferredSize", g.getPreferredSize, g.setPreferredSize);
    cc.defineGetterSetter(g, "capInsets", g.getCapInsets, g.setCapInsets);
    cc.defineGetterSetter(g, "insetLeft", g.getInsetLeft, g.setInsetLeft);
    cc.defineGetterSetter(g, "insetTop",
        g.getInsetTop, g.setInsetTop);
    cc.defineGetterSetter(g, "insetRight", g.getInsetRight, g.setInsetRight);
    cc.defineGetterSetter(g, "insetBottom", g.getInsetBottom, g.setInsetBottom);
    g = null;
    ccui.Scale9Sprite.create = function (a, b, c) {
        return new ccui.Scale9Sprite(a, b, c)
    };
    ccui.Scale9Sprite.createWithSpriteFrame = function (a, b) {
        return new ccui.Scale9Sprite(a, b)
    };
    ccui.Scale9Sprite.createWithSpriteFrameName = function (a, b) {
        return new ccui.Scale9Sprite(a, b)
    };
    ccui.Scale9Sprite.POSITIONS_CENTRE = 0;
    ccui.Scale9Sprite.POSITIONS_TOP =
        1;
    ccui.Scale9Sprite.POSITIONS_LEFT = 2;
    ccui.Scale9Sprite.POSITIONS_RIGHT = 3;
    ccui.Scale9Sprite.POSITIONS_BOTTOM = 4;
    ccui.Scale9Sprite.POSITIONS_TOPRIGHT = 5;
    ccui.Scale9Sprite.POSITIONS_TOPLEFT = 6;
    ccui.Scale9Sprite.POSITIONS_BOTTOMRIGHT = 7;
    ccui.Scale9Sprite.state = {
        NORMAL: 0,
        GRAY: 1
    };
    var h = ccui.Scale9Sprite.RenderingType = {
        SIMPLE: 0,
        SLICED: 1
    }
})();
(function () {
    ccui.Scale9Sprite.CanvasRenderCmd = function (a) {
        cc.Node.CanvasRenderCmd.call(this, a);
        this._needDraw = !0;
        this._state = ccui.Scale9Sprite.state.NORMAL;
        this._originalTexture = this._textureToRender = null
    };
    var a = ccui.Scale9Sprite.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    a.constructor = ccui.Scale9Sprite.CanvasRenderCmd;
    a.transform = function (a, c) {
        this.originTransform(a, c);
        this._node._rebuildQuads()
    };
    a.needDraw = function () {
        return this._needDraw && this._node.loaded()
    };
    a._updateDisplayColor =
        function (a) {
            cc.Node.RenderCmd.prototype._updateDisplayColor.call(this, a);
            this._originalTexture = this._textureToRender = null
        };
    a.setState = function (a) {
        this._state !== a && (this._state = a, this._originalTexture = this._textureToRender = null)
    };
    a._setColorDirty = function () {
        this.setDirtyFlag(cc.Node._dirtyFlags.colorDirty | cc.Node._dirtyFlags.opacityDirty)
    };
    a.rendering = function (a, c, d) {
        var f = this._node,
            g = this._displayedOpacity,
            h = g / 255,
            m = null;
        f._spriteFrame && (m = f._spriteFrame._texture);
        if (f.loaded() && 0 !== g) {
            if (null ===
                this._textureToRender || this._originalTexture !== m)
                if (this._textureToRender = this._originalTexture = m, cc.Scale9Sprite.state.GRAY === this._state && (this._textureToRender = this._textureToRender._generateGrayTexture()), g = f.getDisplayedColor(), m && (255 !== g.r || 255 !== g.g || 255 !== g.b)) this._textureToRender = this._textureToRender._generateColorTexture(g.r, g.g, g.b);
            m = a || cc._renderContext;
            a = m.getContext();
            m.setTransform(this._worldTransform, c, d);
            m.setCompositeOperation(cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc(f._blendFunc));
            m.setGlobalAlpha(h);
            if (this._textureToRender) {
                f._quadsDirty && f._rebuildQuads();
                var n, p, u, v, x, y, z;
                c = this._textureToRender._pixelsWide;
                d = this._textureToRender._pixelsHigh;
                var h = this._textureToRender._htmlElementObj,
                    g = f._vertices,
                    t = f._uvs,
                    A = 0,
                    w = 0;
                if (f._renderingType === cc.Scale9Sprite.RenderingType.SLICED) {
                    for (m = 0; 3 > m; ++m)
                        for (A = 0; 3 > A; ++A) w = 8 * m + 2 * A, v = g[w], x = g[w + 1], y = g[w + 10] - v, z = g[w + 11] - x, x = -x - z, f = t[w] * c, n = t[w + 11] * d, p = (t[w + 10] - t[w]) * c, u = (t[w + 1] - t[w + 11]) * d, 0 < p && (0 < u && 0 < y && 0 < z) && a.drawImage(h, f, n, p, u, v, x,
                            y, z);
                    cc.g_NumberOfDraws += 9
                } else {
                    for (var B = Math.floor(f._vertCount / 4), w = A = 0; A < B; A++) v = g[w], x = g[w + 1], y = g[w + 6] - v, z = g[w + 7] - x, x = -x - z, f = t[w] * c, n = t[w + 7] * d, p = (t[w + 6] - t[w]) * c, u = (t[w + 1] - t[w + 7]) * d, "" !== this._textureToRender._pattern ? (m.setFillStyle(a.createPattern(h, this._textureToRender._pattern)), a.fillRect(v, x, y, z)) : 0 < p && (0 < u && 0 < y && 0 < z) && a.drawImage(h, f, n, p, u, v, x, y, z), w += 8;
                    cc.g_NumberOfDraws += B
                }
            }
        }
    }
})();
(function () {
    if (cc.Node.WebGLRenderCmd) {
        ccui.Scale9Sprite.WebGLRenderCmd = function (a) {
            cc.Node.WebGLRenderCmd.call(this, a);
            this._needDraw = !0;
            this._color = new Uint32Array(1);
            this._dirty = !1;
            this._shaderProgram = cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR)
        };
        var a = ccui.Scale9Sprite,
            b = ccui.Scale9Sprite.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
        b.constructor = ccui.Scale9Sprite.WebGLRenderCmd;
        b.needDraw = function () {
            return this._needDraw && this._node.loaded()
        };
        b._uploadSliced = function (a, b, f, g, h, m, n) {
            for (var p, u = 0; 3 > u; ++u)
                for (var v = 0; 3 > v; ++v) p = 8 * u + 2 * v, h[n] = a[p], h[n + 1] = a[p + 1], h[n + 2] = g, m[n + 3] = f[0], h[n + 4] = b[p], h[n + 5] = b[p + 1], n += 6, h[n] = a[p + 2], h[n + 1] = a[p + 3], h[n + 2] = g, m[n + 3] = f[0], h[n + 4] = b[p + 2], h[n + 5] = b[p + 3], n += 6, h[n] = a[p + 8], h[n + 1] = a[p + 9], h[n + 2] = g, m[n + 3] = f[0], h[n + 4] = b[p + 8], h[n + 5] = b[p + 9], n += 6, h[n] = a[p + 10], h[n + 1] = a[p + 11], h[n + 2] = g, m[n + 3] = f[0], h[n + 4] = b[p + 10], h[n + 5] = b[p + 11], n += 6;
            return 36
        };
        b.transform = function (a, b) {
            this.originTransform(a, b);
            this._node._rebuildQuads()
        };
        b._setColorDirty = function () {};
        b.uploadData = function (b, d, f) {
            var g = this._node;
            if (0 === this._displayedOpacity) return 0;
            g._quadsDirty && g._rebuildQuads();
            var h = this._displayedOpacity,
                m = this._displayedColor.r,
                n = this._displayedColor.g,
                p = this._displayedColor.b;
            if (g._opacityModifyRGB) var u = h / 255,
                m = m * u,
                n = n * u,
                p = p * u;
            this._color[0] = h << 24 | p << 16 | n << 8 | m;
            h = g._vertexZ;
            m = g._vertices;
            n = g._uvs;
            u = a.RenderingType;
            p = 0;
            switch (g._renderingType) {
            case u.SIMPLE:
                p = this._node._vertCount;
                for (u = g = 0; g < p; g++, u += 2) b[f] = m[u], b[f + 1] = m[u +
                    1], b[f + 2] = h, d[f + 3] = this._color[0], b[f + 4] = n[u], b[f + 5] = n[u + 1], f += 6;
                break;
            case u.SLICED:
                p = this._uploadSliced(m, n, this._color, h, b, d, f)
            }
            return p
        };
        b.setState = function (b) {
            b === a.state.NORMAL ? this._shaderProgram = cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR) : b === a.state.GRAY && (this._shaderProgram = cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY))
        }
    }
})();
ccui.Layout = ccui.Widget.extend({
    _clippingEnabled: !1,
    _backGroundScale9Enabled: null,
    _backGroundImage: null,
    _backGroundImageFileName: null,
    _backGroundImageCapInsets: null,
    _colorType: null,
    _bgImageTexType: ccui.Widget.LOCAL_TEXTURE,
    _colorRender: null,
    _gradientRender: null,
    _color: null,
    _startColor: null,
    _endColor: null,
    _alongVector: null,
    _opacity: 255,
    _backGroundImageTextureSize: null,
    _layoutType: null,
    _doLayoutDirty: !0,
    _clippingRectDirty: !0,
    _clippingType: null,
    _clippingStencil: null,
    _scissorRectDirty: !1,
    _clippingRect: null,
    _clippingParent: null,
    _className: "Layout",
    _backGroundImageColor: null,
    _finalPositionX: 0,
    _finalPositionY: 0,
    _backGroundImageOpacity: 0,
    _loopFocus: !1,
    __passFocusToChild: !0,
    _isFocusPassing: !1,
    _isInterceptTouch: !1,
    ctor: function () {
        this._layoutType = ccui.Layout.ABSOLUTE;
        this._widgetType = ccui.Widget.TYPE_CONTAINER;
        this._clippingType = ccui.Layout.CLIPPING_SCISSOR;
        this._colorType = ccui.Layout.BG_COLOR_NONE;
        ccui.Widget.prototype.ctor.call(this);
        this.ignoreContentAdaptWithSize(!1);
        this.setContentSize(cc.size(0, 0));
        this.setAnchorPoint(0, 0);
        this.onPassFocusToChild = this._findNearestChildWidgetIndex.bind(this);
        this._backGroundImageCapInsets = cc.rect(0, 0, 0, 0);
        this._color = cc.color(255, 255, 255, 255);
        this._startColor = cc.color(255, 255, 255, 255);
        this._endColor = cc.color(255, 255, 255, 255);
        this._alongVector = cc.p(0, -1);
        this._backGroundImageTextureSize = cc.size(0, 0);
        this._clippingRect = cc.rect(0, 0, 0, 0);
        this._backGroundImageColor = cc.color(255, 255, 255, 255)
    },
    onEnter: function () {
        ccui.Widget.prototype.onEnter.call(this);
        this._clippingStencil &&
            this._clippingStencil._performRecursive(cc.Node._stateCallbackType.onEnter);
        this._clippingRectDirty = this._doLayoutDirty = !0
    },
    onExit: function () {
        ccui.Widget.prototype.onExit.call(this);
        this._clippingStencil && this._clippingStencil._performRecursive(cc.Node._stateCallbackType.onExit)
    },
    visit: function (a) {
        var b = this._renderCmd,
            c = a ? a._renderCmd : null;
        if (this._visible) {
            this._adaptRenderers();
            this._doLayout();
            b.visit(c);
            a = this._clippingEnabled && this._clippingType === ccui.Layout.CLIPPING_STENCIL;
            var d = this._clippingEnabled &&
                this._clippingType === ccui.Layout.CLIPPING_SCISSOR;
            a ? b.stencilClippingVisit(c) : d && b.scissorClippingVisit(c);
            var f = this._children,
                g = f.length,
                h, m = this._protectedChildren,
                n = m.length,
                p;
            this._reorderChildDirty && this.sortAllChildren();
            this._reorderProtectedChildDirty && this.sortAllProtectedChildren();
            for (c = 0; c < g; c++)
                if (h = f[c], 0 > h._localZOrder) h.visit(this);
                else break;
            for (h = 0; h < n; h++)
                if (p = m[h], 0 > p._localZOrder) b._changeProtectedChild(p), p.visit(this);
                else break;
            for (; c < g; c++) f[c].visit(this);
            for (; h < n; h++) p =
                m[h], b._changeProtectedChild(p), p.visit(this);
            a ? b.postStencilVisit() : d && b.postScissorVisit();
            b._dirtyFlag = 0
        } else b._propagateFlagsDown(c)
    },
    setLoopFocus: function (a) {
        this._loopFocus = a
    },
    isLoopFocus: function () {
        return this._loopFocus
    },
    setPassFocusToChild: function (a) {
        this.__passFocusToChild = a
    },
    isPassFocusToChild: function () {
        return this.__passFocusToChild
    },
    findNextFocusedWidget: function (a, b) {
        if (this._isFocusPassing || this.isFocused()) {
            var c = this.getParent();
            this._isFocusPassing = !1;
            if (this.__passFocusToChild) {
                var d =
                    this._passFocusToChild(a, b);
                return d instanceof ccui.Layout && c ? (c._isFocusPassing = !0, c.findNextFocusedWidget(a, this)) : d
            }
            if (null == c || !(c instanceof ccui.Layout)) return this;
            c._isFocusPassing = !0;
            return c.findNextFocusedWidget(a, this)
        }
        if (b.isFocused() || b instanceof ccui.Layout)
            if (this._layoutType === ccui.Layout.LINEAR_HORIZONTAL) switch (a) {
                case ccui.Widget.LEFT:
                    return this._getPreviousFocusedWidget(a, b);
                case ccui.Widget.RIGHT:
                    return this._getNextFocusedWidget(a, b);
                case ccui.Widget.DOWN:
                case ccui.Widget.UP:
                    return this._isLastWidgetInContainer(this,
                        a) ? this._isWidgetAncestorSupportLoopFocus(b, a) ? ccui.Widget.prototype.findNextFocusedWidget.call(this, a, this) : b : ccui.Widget.prototype.findNextFocusedWidget.call(this, a, this);
                default:
                    return cc.assert(0, "Invalid Focus Direction"), b
                } else if (this._layoutType === ccui.Layout.LINEAR_VERTICAL) switch (a) {
                case ccui.Widget.LEFT:
                case ccui.Widget.RIGHT:
                    return this._isLastWidgetInContainer(this, a) ? this._isWidgetAncestorSupportLoopFocus(b, a) ? ccui.Widget.prototype.findNextFocusedWidget.call(this, a, this) : b : ccui.Widget.prototype.findNextFocusedWidget.call(this,
                        a, this);
                case ccui.Widget.DOWN:
                    return this._getNextFocusedWidget(a, b);
                case ccui.Widget.UP:
                    return this._getPreviousFocusedWidget(a, b);
                default:
                    return cc.assert(0, "Invalid Focus Direction"), b
                } else return cc.assert(0, "Un Supported Layout type, please use VBox and HBox instead!!!"), b;
                else return b
    },
    onPassFocusToChild: null,
    addChild: function (a, b, c) {
        a instanceof ccui.Widget && this._supplyTheLayoutParameterLackToChild(a);
        ccui.Widget.prototype.addChild.call(this, a, b, c);
        this._doLayoutDirty = !0
    },
    removeChild: function (a,
        b) {
        ccui.Widget.prototype.removeChild.call(this, a, b);
        this._doLayoutDirty = !0
    },
    removeAllChildren: function (a) {
        ccui.Widget.prototype.removeAllChildren.call(this, a);
        this._doLayoutDirty = !0
    },
    removeAllChildrenWithCleanup: function (a) {
        ccui.Widget.prototype.removeAllChildrenWithCleanup.call(this, a);
        this._doLayoutDirty = !0
    },
    isClippingEnabled: function () {
        return this._clippingEnabled
    },
    setClippingEnabled: function (a) {
        if (a !== this._clippingEnabled) switch (this._clippingEnabled = a, this._clippingType) {
        case ccui.Layout.CLIPPING_SCISSOR:
        case ccui.Layout.CLIPPING_STENCIL:
            a ?
                (this._clippingStencil = new cc.DrawNode, this._renderCmd.rebindStencilRendering(this._clippingStencil), this._running && this._clippingStencil._performRecursive(cc.Node._stateCallbackType.onEnter), this._setStencilClippingSize(this._contentSize)) : (this._running && this._clippingStencil && this._clippingStencil._performRecursive(cc.Node._stateCallbackType.onExit), this._clippingStencil = null)
        }
    },
    setClippingType: function (a) {
        if (a !== this._clippingType) {
            var b = this.isClippingEnabled();
            this.setClippingEnabled(!1);
            this._clippingType =
                a;
            this.setClippingEnabled(b)
        }
    },
    getClippingType: function () {
        return this._clippingType
    },
    _setStencilClippingSize: function (a) {
        if (this._clippingEnabled) {
            var b = [];
            b[0] = cc.p(0, 0);
            b[1] = cc.p(a.width, 0);
            b[2] = cc.p(a.width, a.height);
            b[3] = cc.p(0, a.height);
            var c = cc.color.GREEN;
            this._clippingStencil.clear();
            this._clippingStencil.setLocalBB && this._clippingStencil.setLocalBB(0, 0, a.width, a.height);
            this._clippingStencil.drawPoly(b, 4, c, 0, c)
        }
    },
    _getClippingRect: function () {
        if (this._clippingRectDirty) {
            var a = this.convertToWorldSpace(cc.p(0,
                    0)),
                b = this.getNodeToWorldTransform(),
                c = this._contentSize.width * b.a,
                b = this._contentSize.height * b.d,
                d;
            for (d = this; d;)
                if ((d = d.getParent()) && d instanceof ccui.Layout && d.isClippingEnabled()) {
                    this._clippingParent = d;
                    break
                } this._clippingParent ? (d = this._clippingParent._getClippingRect(), this._clippingRect.x = Math.max(a.x, d.x), this._clippingRect.y = Math.max(a.y, d.y), c = Math.min(a.x + c, d.x + d.width), a = Math.min(a.y + b, d.y + d.height), this._clippingRect.width = Math.max(0, c - this._clippingRect.x), this._clippingRect.height =
                Math.max(0, a - this._clippingRect.y)) : (this._clippingRect.x = a.x, this._clippingRect.y = a.y, this._clippingRect.width = c, this._clippingRect.height = b);
            this._clippingRectDirty = !1
        }
        return this._clippingRect
    },
    _onSizeChanged: function () {
        ccui.Widget.prototype._onSizeChanged.call(this);
        var a = this._contentSize;
        this._setStencilClippingSize(a);
        this._clippingRectDirty = this._doLayoutDirty = !0;
        this._backGroundImage && (this._backGroundImage.setPosition(0.5 * a.width, 0.5 * a.height), this._backGroundScale9Enabled && this._backGroundImage instanceof ccui.Scale9Sprite && this._backGroundImage.setPreferredSize(a));
        this._colorRender && this._colorRender.setContentSize(a);
        this._gradientRender && this._gradientRender.setContentSize(a)
    },
    setBackGroundImageScale9Enabled: function (a) {
        this._backGroundScale9Enabled !== a && (this.removeProtectedChild(this._backGroundImage), this._backGroundImage = null, this._backGroundScale9Enabled = a, this._addBackGroundImage(), this.setBackGroundImage(this._backGroundImageFileName, this._bgImageTexType), this.setBackGroundImageCapInsets(this._backGroundImageCapInsets))
    },
    isBackGroundImageScale9Enabled: function () {
        return this._backGroundScale9Enabled
    },
    setBackGroundImage: function (a, b) {
        if (a) {
            b = b || ccui.Widget.LOCAL_TEXTURE;
            null === this._backGroundImage && (this._addBackGroundImage(), this.setBackGroundImageScale9Enabled(this._backGroundScale9Enabled));
            this._backGroundImageFileName = a;
            this._bgImageTexType = b;
            var c = this._backGroundImage;
            switch (this._bgImageTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                c.initWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                c.initWithSpriteFrameName(a)
            }
            this._backGroundScale9Enabled &&
                c.setPreferredSize(this._contentSize);
            this._backGroundImageTextureSize = c.getContentSize();
            c.setPosition(0.5 * this._contentSize.width, 0.5 * this._contentSize.height);
            this._updateBackGroundImageColor()
        }
    },
    setBackGroundImageCapInsets: function (a) {
        if (a) {
            var b = this._backGroundImageCapInsets;
            b.x = a.x;
            b.y = a.y;
            b.width = a.width;
            b.height = a.height;
            this._backGroundScale9Enabled && this._backGroundImage.setCapInsets(a)
        }
    },
    getBackGroundImageCapInsets: function () {
        return cc.rect(this._backGroundImageCapInsets)
    },
    _supplyTheLayoutParameterLackToChild: function (a) {
        if (a) switch (this._layoutType) {
        case ccui.Layout.LINEAR_HORIZONTAL:
        case ccui.Layout.LINEAR_VERTICAL:
            var b =
                a.getLayoutParameter(ccui.LayoutParameter.LINEAR);
            b || a.setLayoutParameter(new ccui.LinearLayoutParameter);
            break;
        case ccui.Layout.RELATIVE:
            (b = a.getLayoutParameter(ccui.LayoutParameter.RELATIVE)) || a.setLayoutParameter(new ccui.RelativeLayoutParameter)
        }
    },
    _addBackGroundImage: function () {
        var a = this._contentSize;
        this._backGroundScale9Enabled ? (this._backGroundImage = new ccui.Scale9Sprite, this._backGroundImage.setPreferredSize(a)) : this._backGroundImage = new cc.Sprite;
        this.addProtectedChild(this._backGroundImage,
            ccui.Layout.BACKGROUND_IMAGE_ZORDER, -1);
        this._backGroundImage.setPosition(0.5 * a.width, 0.5 * a.height)
    },
    removeBackGroundImage: function () {
        this._backGroundImage && (this.removeProtectedChild(this._backGroundImage), this._backGroundImage = null, this._backGroundImageFileName = "", this._backGroundImageTextureSize.width = 0, this._backGroundImageTextureSize.height = 0)
    },
    setBackGroundColorType: function (a) {
        if (this._colorType !== a) {
            switch (this._colorType) {
            case ccui.Layout.BG_COLOR_NONE:
                this._colorRender && (this.removeProtectedChild(this._colorRender),
                    this._colorRender = null);
                this._gradientRender && (this.removeProtectedChild(this._gradientRender), this._gradientRender = null);
                break;
            case ccui.Layout.BG_COLOR_SOLID:
                this._colorRender && (this.removeProtectedChild(this._colorRender), this._colorRender = null);
                break;
            case ccui.Layout.BG_COLOR_GRADIENT:
                this._gradientRender && (this.removeProtectedChild(this._gradientRender), this._gradientRender = null)
            }
            this._colorType = a;
            switch (this._colorType) {
            case ccui.Layout.BG_COLOR_SOLID:
                this._colorRender = new cc.LayerColor;
                this._colorRender.setContentSize(this._contentSize);
                this._colorRender.setOpacity(this._opacity);
                this._colorRender.setColor(this._color);
                this.addProtectedChild(this._colorRender, ccui.Layout.BACKGROUND_RENDERER_ZORDER, -1);
                break;
            case ccui.Layout.BG_COLOR_GRADIENT:
                this._gradientRender = new cc.LayerGradient(cc.color(255, 0, 0, 255), cc.color(0, 255, 0, 255)), this._gradientRender.setContentSize(this._contentSize), this._gradientRender.setOpacity(this._opacity), this._gradientRender.setStartColor(this._startColor), this._gradientRender.setEndColor(this._endColor), this._gradientRender.setVector(this._alongVector),
                    this.addProtectedChild(this._gradientRender, ccui.Layout.BACKGROUND_RENDERER_ZORDER, -1)
            }
        }
    },
    getBackGroundColorType: function () {
        return this._colorType
    },
    setBackGroundColor: function (a, b) {
        b ? (this._startColor.r = a.r, this._startColor.g = a.g, this._startColor.b = a.b, this._gradientRender && this._gradientRender.setStartColor(a), this._endColor.r = b.r, this._endColor.g = b.g, this._endColor.b = b.b, this._gradientRender && this._gradientRender.setEndColor(b)) : (this._color.r = a.r, this._color.g = a.g, this._color.b = a.b, this._colorRender &&
            this._colorRender.setColor(a))
    },
    getBackGroundColor: function () {
        var a = this._color;
        return cc.color(a.r, a.g, a.b, a.a)
    },
    getBackGroundStartColor: function () {
        var a = this._startColor;
        return cc.color(a.r, a.g, a.b, a.a)
    },
    getBackGroundEndColor: function () {
        var a = this._endColor;
        return cc.color(a.r, a.g, a.b, a.a)
    },
    setBackGroundColorOpacity: function (a) {
        this._opacity = a;
        switch (this._colorType) {
        case ccui.Layout.BG_COLOR_SOLID:
            this._colorRender.setOpacity(a);
            break;
        case ccui.Layout.BG_COLOR_GRADIENT:
            this._gradientRender.setOpacity(a)
        }
    },
    getBackGroundColorOpacity: function () {
        return this._opacity
    },
    setBackGroundColorVector: function (a) {
        this._alongVector.x = a.x;
        this._alongVector.y = a.y;
        this._gradientRender && this._gradientRender.setVector(a)
    },
    getBackGroundColorVector: function () {
        return this._alongVector
    },
    setBackGroundImageColor: function (a) {
        this._backGroundImageColor.r = a.r;
        this._backGroundImageColor.g = a.g;
        this._backGroundImageColor.b = a.b;
        this._updateBackGroundImageColor()
    },
    setBackGroundImageOpacity: function (a) {
        this._backGroundImageColor.a =
            a;
        this.getBackGroundImageColor()
    },
    getBackGroundImageColor: function () {
        var a = this._backGroundImageColor;
        return cc.color(a.r, a.g, a.b, a.a)
    },
    getBackGroundImageOpacity: function () {
        return this._backGroundImageColor.a
    },
    _updateBackGroundImageColor: function () {
        this._backGroundImage && this._backGroundImage.setColor(this._backGroundImageColor)
    },
    getBackGroundImageTextureSize: function () {
        return this._backGroundImageTextureSize
    },
    setLayoutType: function (a) {
        this._layoutType = a;
        a = this._children;
        for (var b = null, c = 0; c < a.length; c++) b =
            a[c], b instanceof ccui.Widget && this._supplyTheLayoutParameterLackToChild(b);
        this._doLayoutDirty = !0
    },
    getLayoutType: function () {
        return this._layoutType
    },
    requestDoLayout: function () {
        this._doLayoutDirty = !0
    },
    _doLayout: function () {
        if (this._doLayoutDirty) {
            this.sortAllChildren();
            var a = ccui.getLayoutManager(this._layoutType);
            a && a._doLayout(this);
            this._doLayoutDirty = !1
        }
    },
    _getLayoutContentSize: function () {
        return this.getContentSize()
    },
    _getLayoutElements: function () {
        return this.getChildren()
    },
    _updateBackGroundImageOpacity: function () {
        this._backGroundImage &&
            this._backGroundImage.setOpacity(this._backGroundImageOpacity)
    },
    _updateBackGroundImageRGBA: function () {
        this._backGroundImage && (this._backGroundImage.setColor(this._backGroundImageColor), this._backGroundImage.setOpacity(this._backGroundImageOpacity))
    },
    _getLayoutAccumulatedSize: function () {
        for (var a = this.getChildren(), b = cc.size(0, 0), c = 0, d, f = 0, g = a.length; f < g; f++)
            if (d = a[f], null !== d && d instanceof ccui.Layout) d = d._getLayoutAccumulatedSize(), b.width += d.width, b.height += d.height;
            else if (d instanceof ccui.Widget) {
            c++;
            var h = d.getLayoutParameter().getMargin();
            d = d.getContentSize();
            b.width += d.width + 0.5 * (h.right + h.left);
            b.height += d.height + 0.5 * (h.top + h.bottom)
        }
        a = this.getLayoutType();
        a === ccui.Layout.LINEAR_HORIZONTAL && (b.height -= b.height / c * (c - 1));
        a === ccui.Layout.LINEAR_VERTICAL && (b.width -= b.width / c * (c - 1));
        return b
    },
    _findNearestChildWidgetIndex: function (a, b) {
        if (null == b || b === this) return this._findFirstFocusEnabledWidgetIndex();
        var c = 0,
            d = this.getChildren(),
            f = d.length,
            g, h = cc.FLT_MAX,
            m = 0;
        if (a === ccui.Widget.LEFT || a === ccui.Widget.RIGHT ||
            a === ccui.Widget.DOWN || a === ccui.Widget.UP) {
            for (g = this._getWorldCenterPoint(b); c < f;) {
                var n = d[c];
                n && (n instanceof ccui.Widget && n.isFocusEnabled()) && (n = n instanceof ccui.Layout ? n._calculateNearestDistance(b) : cc.pLength(cc.pSub(this._getWorldCenterPoint(n), g)), n < h && (m = c, h = n));
                c++
            }
            return m
        }
        cc.log("invalid focus direction!");
        return 0
    },
    _findFarthestChildWidgetIndex: function (a, b) {
        if (null == b || b === this) return this._findFirstFocusEnabledWidgetIndex();
        var c = 0,
            d = this.getChildren(),
            f = d.length,
            g = -cc.FLT_MAX,
            h = 0;
        if (a === ccui.Widget.LEFT || a === ccui.Widget.RIGHT || a === ccui.Widget.DOWN || a === ccui.Widget.UP) {
            for (var m = this._getWorldCenterPoint(b); c < f;) {
                var n = d[c];
                n && (n instanceof ccui.Widget && n.isFocusEnabled()) && (n = n instanceof ccui.Layout ? n._calculateFarthestDistance(b) : cc.pLength(cc.pSub(this._getWorldCenterPoint(n), m)), n > g && (h = c, g = n));
                c++
            }
            return h
        }
        cc.log("invalid focus direction!!!");
        return 0
    },
    _calculateNearestDistance: function (a) {
        for (var b = cc.FLT_MAX, c = this._getWorldCenterPoint(a), d = this._children, f = 0, g = d.length; f <
            g; f++) {
            var h = d[f];
            if (h instanceof ccui.Layout) h = h._calculateNearestDistance(a);
            else if (h instanceof ccui.Widget && h.isFocusEnabled()) h = cc.pLength(cc.pSub(this._getWorldCenterPoint(h), c));
            else continue;
            h < b && (b = h)
        }
        return b
    },
    _calculateFarthestDistance: function (a) {
        for (var b = -cc.FLT_MAX, c = this._getWorldCenterPoint(a), d = this._children, f = 0, g = d.length; f < g; f++) {
            var h = d[f];
            if (h instanceof ccui.Layout) h = h._calculateFarthestDistance(a);
            else if (h instanceof ccui.Widget && h.isFocusEnabled()) h = this._getWorldCenterPoint(h),
                h = cc.pLength(cc.pSub(h, c));
            else continue;
            h > b && (b = h)
        }
        return b
    },
    _findProperSearchingFunctor: function (a, b) {
        if (void 0 !== b) {
            var c = this._getWorldCenterPoint(b),
                d = this._getWorldCenterPoint(this._findFirstNonLayoutWidget());
            a === ccui.Widget.LEFT ? this.onPassFocusToChild = c.x > d.x ? this._findNearestChildWidgetIndex : this._findFarthestChildWidgetIndex : a === ccui.Widget.RIGHT ? this.onPassFocusToChild = c.x > d.x ? this._findFarthestChildWidgetIndex : this._findNearestChildWidgetIndex : a === ccui.Widget.DOWN ? this.onPassFocusToChild =
                c.y > d.y ? this._findNearestChildWidgetIndex : this._findFarthestChildWidgetIndex : a === ccui.Widget.UP ? this.onPassFocusToChild = c.y < d.y ? this._findNearestChildWidgetIndex : this._findFarthestChildWidgetIndex : cc.log("invalid direction!")
        }
    },
    _findFirstNonLayoutWidget: function () {
        for (var a = this._children, b = 0, c = a.length; b < c; b++) {
            var d = a[b];
            if (d instanceof ccui.Layout) {
                if (d = d._findFirstNonLayoutWidget()) return d
            } else if (d instanceof ccui.Widget) return d
        }
        return null
    },
    _findFirstFocusEnabledWidgetIndex: function () {
        for (var a =
                0, b = this.getChildren(), c = b.length; a < c;) {
            var d = b[a];
            if (d && d instanceof ccui.Widget && d.isFocusEnabled()) return a;
            a++
        }
        return 0
    },
    _findFocusEnabledChildWidgetByIndex: function (a) {
        var b = this._getChildWidgetByIndex(a);
        return b ? b.isFocusEnabled() ? b : this._findFocusEnabledChildWidgetByIndex(a + 1) : null
    },
    _getWorldCenterPoint: function (a) {
        var b = a instanceof ccui.Layout ? a._getLayoutAccumulatedSize() : a.getContentSize();
        return a.convertToWorldSpace(cc.p(b.width / 2, b.height / 2))
    },
    _getNextFocusedWidget: function (a, b) {
        var c =
            null,
            c = this._children,
            d = c.indexOf(b),
            d = d + 1;
        if (d < c.length) {
            if (c = this._getChildWidgetByIndex(d)) {
                if (c.isFocusEnabled()) {
                    if (c instanceof ccui.Layout) return c._isFocusPassing = !0, c.findNextFocusedWidget(a, c);
                    this.dispatchFocusEvent(b, c);
                    return c
                }
                return this._getNextFocusedWidget(a, c)
            }
            return b
        }
        if (this._loopFocus) {
            if (this._checkFocusEnabledChild()) {
                c = this._getChildWidgetByIndex(0);
                if (c.isFocusEnabled()) {
                    if (c instanceof ccui.Layout) return c._isFocusPassing = !0, c.findNextFocusedWidget(a, c);
                    this.dispatchFocusEvent(b,
                        c);
                    return c
                }
                return this._getNextFocusedWidget(a, c)
            }
            return b instanceof ccui.Layout ? b : ccui.Widget._focusedWidget
        }
        return this._isLastWidgetInContainer(b, a) ? this._isWidgetAncestorSupportLoopFocus(this, a) ? ccui.Widget.prototype.findNextFocusedWidget.call(this, a, this) : b instanceof ccui.Layout ? b : ccui.Widget._focusedWidget : ccui.Widget.prototype.findNextFocusedWidget.call(this, a, this)
    },
    _getPreviousFocusedWidget: function (a, b) {
        var c = null,
            c = this._children,
            d = c.indexOf(b),
            d = d - 1;
        if (0 <= d) {
            c = this._getChildWidgetByIndex(d);
            if (c.isFocusEnabled()) {
                if (c instanceof ccui.Layout) return c._isFocusPassing = !0, c.findNextFocusedWidget(a, c);
                this.dispatchFocusEvent(b, c);
                return c
            }
            return this._getPreviousFocusedWidget(a, c)
        }
        if (this._loopFocus) {
            if (this._checkFocusEnabledChild()) {
                d = c.length - 1;
                c = this._getChildWidgetByIndex(d);
                if (c.isFocusEnabled()) {
                    if (c instanceof ccui.Layout) return c._isFocusPassing = !0, c.findNextFocusedWidget(a, c);
                    this.dispatchFocusEvent(b, c);
                    return c
                }
                return this._getPreviousFocusedWidget(a, c)
            }
            return b instanceof ccui.Layout ?
                b : ccui.Widget._focusedWidget
        }
        return this._isLastWidgetInContainer(b, a) ? this._isWidgetAncestorSupportLoopFocus(this, a) ? ccui.Widget.prototype.findNextFocusedWidget.call(this, a, this) : b instanceof ccui.Layout ? b : ccui.Widget._focusedWidget : ccui.Widget.prototype.findNextFocusedWidget.call(this, a, this)
    },
    _getChildWidgetByIndex: function (a) {
        for (var b = this._children, c = b.length, d = 0, f = a; a < c;) {
            var g = b[a];
            if (g && g instanceof ccui.Widget) return g;
            d++;
            a++
        }
        for (a = 0; a < f;) {
            if ((c = b[a]) && c instanceof ccui.Widget) return c;
            d++;
            a++
        }
        return null
    },
    _isLastWidgetInContainer: function (a, b) {
        var c = a.getParent();
        if (null == c || !(c instanceof ccui.Layout)) return !0;
        var d = c.getChildren(),
            f = d.indexOf(a);
        if (c.getLayoutType() === ccui.Layout.LINEAR_HORIZONTAL) {
            if (b === ccui.Widget.LEFT) return 0 === f ? this._isLastWidgetInContainer(c, b) : !1;
            if (b === ccui.Widget.RIGHT) return f === d.length - 1 ? this._isLastWidgetInContainer(c, b) : !1;
            if (b === ccui.Widget.DOWN || b === ccui.Widget.UP) return this._isLastWidgetInContainer(c, b)
        } else if (c.getLayoutType() === ccui.Layout.LINEAR_VERTICAL) {
            if (b ===
                ccui.Widget.UP) return 0 === f ? this._isLastWidgetInContainer(c, b) : !1;
            if (b === ccui.Widget.DOWN) return f === d.length - 1 ? this._isLastWidgetInContainer(c, b) : !1;
            if (b === ccui.Widget.LEFT || b === ccui.Widget.RIGHT) return this._isLastWidgetInContainer(c, b)
        } else return cc.log("invalid layout Type"), !1
    },
    _isWidgetAncestorSupportLoopFocus: function (a, b) {
        var c = a.getParent();
        if (null == c || !(c instanceof ccui.Layout)) return !1;
        if (c.isLoopFocus()) {
            var d = c.getLayoutType();
            if (d === ccui.Layout.LINEAR_HORIZONTAL) return b === ccui.Widget.LEFT ||
                b === ccui.Widget.RIGHT ? !0 : this._isWidgetAncestorSupportLoopFocus(c, b);
            if (d === ccui.Layout.LINEAR_VERTICAL) return b === ccui.Widget.DOWN || b === ccui.Widget.UP ? !0 : this._isWidgetAncestorSupportLoopFocus(c, b);
            cc.assert(0, "invalid layout type");
            return !1
        }
        return this._isWidgetAncestorSupportLoopFocus(c, b)
    },
    _passFocusToChild: function (a, b) {
        if (this._checkFocusEnabledChild()) {
            var c = ccui.Widget.getCurrentFocusedWidget();
            this._findProperSearchingFunctor(a, c);
            c = this.onPassFocusToChild(a, c);
            c = this._getChildWidgetByIndex(c);
            if (c instanceof ccui.Layout) return c._isFocusPassing = !0, c.findNextFocusedWidget(a, c);
            this.dispatchFocusEvent(b, c);
            return c
        }
        return this
    },
    _checkFocusEnabledChild: function () {
        for (var a = this._children, b = 0, c = a.length; b < c; b++) {
            var d = a[b];
            if (d && d instanceof ccui.Widget && d.isFocusEnabled()) return !0
        }
        return !1
    },
    getDescription: function () {
        return "Layout"
    },
    _createCloneInstance: function () {
        return new ccui.Layout
    },
    _copyClonedWidgetChildren: function (a) {
        ccui.Widget.prototype._copyClonedWidgetChildren.call(this, a)
    },
    _copySpecialProperties: function (a) {
        a instanceof
        ccui.Layout && (this.setBackGroundImageScale9Enabled(a._backGroundScale9Enabled), this.setBackGroundImage(a._backGroundImageFileName, a._bgImageTexType), this.setBackGroundImageCapInsets(a._backGroundImageCapInsets), this.setBackGroundColorType(a._colorType), this.setBackGroundColor(a._color), this.setBackGroundColor(a._startColor, a._endColor), this.setBackGroundColorOpacity(a._opacity), this.setBackGroundColorVector(a._alongVector), this.setLayoutType(a._layoutType), this.setClippingEnabled(a._clippingEnabled),
            this.setClippingType(a._clippingType), this._loopFocus = a._loopFocus, this.__passFocusToChild = a.__passFocusToChild, this._isInterceptTouch = a._isInterceptTouch)
    },
    forceDoLayout: function () {
        this.requestDoLayout();
        this._doLayout()
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_WEBGL ? new ccui.Layout.WebGLRenderCmd(this) : new ccui.Layout.CanvasRenderCmd(this)
    }
});
_p = ccui.Layout.prototype;
cc.defineGetterSetter(_p, "clippingEnabled", _p.isClippingEnabled, _p.setClippingEnabled);
cc.defineGetterSetter(_p, "clippingType", null, _p.setClippingType);
cc.defineGetterSetter(_p, "layoutType", _p.getLayoutType, _p.setLayoutType);
_p = null;
ccui.Layout.create = function () {
    return new ccui.Layout
};
ccui.Layout.BG_COLOR_NONE = 0;
ccui.Layout.BG_COLOR_SOLID = 1;
ccui.Layout.BG_COLOR_GRADIENT = 2;
ccui.Layout.ABSOLUTE = 0;
ccui.Layout.LINEAR_VERTICAL = 1;
ccui.Layout.LINEAR_HORIZONTAL = 2;
ccui.Layout.RELATIVE = 3;
ccui.Layout.CLIPPING_STENCIL = 0;
ccui.Layout.CLIPPING_SCISSOR = 1;
ccui.Layout.BACKGROUND_IMAGE_ZORDER = -1;
ccui.Layout.BACKGROUND_RENDERER_ZORDER = -2;
(function () {
    ccui.Layout.CanvasRenderCmd = function (a) {
        this._pNodeCmdCtor(a);
        this._needDraw = !1;
        this._rendererRestoreCmd = this._rendererClipCmd = this._rendererSaveCmd = null
    };
    var a = ccui.Layout.CanvasRenderCmd.prototype = Object.create(ccui.ProtectedNode.CanvasRenderCmd.prototype);
    a.constructor = ccui.Layout.CanvasRenderCmd;
    a._layoutCmdCtor = ccui.Layout.CanvasRenderCmd;
    a._onRenderSaveCmd = function (a, c, d) {
        var f = a || cc._renderContext;
        a = f.getContext();
        f.save();
        f.save();
        f.setTransform(this._worldTransform, c, d);
        c = this._node._clippingStencil._renderCmd._buffer;
        d = 0;
        for (f = c.length; d < f; d++) {
            var g = c[d].verts,
                h = g[0];
            a.beginPath();
            a.moveTo(h.x, -h.y);
            for (var h = 1, m = g.length; h < m; h++) a.lineTo(g[h].x, -g[h].y);
            a.closePath()
        }
    };
    a._onRenderClipCmd = function (a) {
        a = a || cc._renderContext;
        var c = a.getContext();
        a.restore();
        c.clip()
    };
    a._onRenderRestoreCmd = function (a) {
        a = a || cc._renderContext;
        a.getContext();
        a.restore()
    };
    a.rebindStencilRendering = function (a) {
        a._renderCmd.rendering = this.__stencilDraw;
        a._renderCmd._canUseDirtyRegion = !0
    };
    a.__stencilDraw = function (a, c, d) {};
    a.stencilClippingVisit =
        a.scissorClippingVisit = function (a) {
            a = this._node;
            a._clippingStencil && a._clippingStencil.isVisible() && (this._rendererSaveCmd || (this._rendererSaveCmd = new cc.CustomRenderCmd(this, this._onRenderSaveCmd), this._rendererClipCmd = new cc.CustomRenderCmd(this, this._onRenderClipCmd), this._rendererRestoreCmd = new cc.CustomRenderCmd(this, this._onRenderRestoreCmd)), cc.renderer.pushRenderCommand(this._rendererSaveCmd), a._clippingStencil.visit(this), cc.renderer.pushRenderCommand(this._rendererClipCmd))
        };
    a.postStencilVisit =
        a.postScissorVisit = function () {
            cc.renderer.pushRenderCommand(this._rendererRestoreCmd)
        };
    ccui.Layout.CanvasRenderCmd._getSharedCache = function () {
        return cc.ClippingNode._sharedCache || (cc.ClippingNode._sharedCache = document.createElement("canvas"))
    }
})();
(function () {
    if (ccui.ProtectedNode.WebGLRenderCmd) {
        ccui.Layout.WebGLRenderCmd = function (a) {
            this._pNodeCmdCtor(a);
            this._needDraw = !1;
            this._currentStencilEnabled = 0;
            this._scissorOldState = !1;
            this._clippingOldRect = null;
            this._mask_layer_le = 0;
            this._afterVisitCmdScissor = this._beforeVisitCmdScissor = this._afterVisitCmdStencil = this._afterDrawStencilCmd = this._beforeVisitCmdStencil = null
        };
        var a = ccui.Layout.WebGLRenderCmd.prototype = Object.create(ccui.ProtectedNode.WebGLRenderCmd.prototype);
        a.constructor = ccui.Layout.WebGLRenderCmd;
        a._layoutCmdCtor = ccui.Layout.CanvasRenderCmd;
        a._syncStatus = function (a) {
            this._originSyncStatus(a);
            a && a._dirtyFlag & cc.Node._dirtyFlags.transformDirty && (this._node._clippingRectDirty = !0)
        };
        a._onBeforeVisitStencil = function (a) {
            a = a || cc._renderContext;
            ccui.Layout.WebGLRenderCmd._layer++;
            var c = 1 << ccui.Layout.WebGLRenderCmd._layer;
            this._mask_layer_le = c | c - 1;
            this._currentStencilEnabled = a.isEnabled(a.STENCIL_TEST);
            a.clear(a.DEPTH_BUFFER_BIT);
            a.enable(a.STENCIL_TEST);
            a.depthMask(!1);
            a.stencilFunc(a.NEVER, c, c);
            a.stencilOp(a.REPLACE, a.KEEP, a.KEEP);
            a.stencilMask(c);
            a.clear(a.STENCIL_BUFFER_BIT)
        };
        a._onAfterDrawStencil = function (a) {
            a = a || cc._renderContext;
            a.depthMask(!0);
            a.stencilFunc(a.EQUAL, this._mask_layer_le, this._mask_layer_le);
            a.stencilOp(a.KEEP, a.KEEP, a.KEEP)
        };
        a._onAfterVisitStencil = function (a) {
            a = a || cc._renderContext;
            ccui.Layout.WebGLRenderCmd._layer--;
            if (this._currentStencilEnabled) {
                var c = 1 << ccui.Layout.WebGLRenderCmd._layer,
                    d = c | c - 1;
                a.stencilMask(c);
                a.stencilFunc(a.EQUAL, d, d)
            } else a.disable(a.STENCIL_TEST)
        };
        a._onBeforeVisitScissor = function (a) {
            this._node._clippingRectDirty = !0;
            var c = this._node._getClippingRect();
            a = a || cc._renderContext;
            (this._scissorOldState = a.isEnabled(a.SCISSOR_TEST)) ? (this._clippingOldRect = cc.view.getScissorRect(), cc.rectEqualToRect(this._clippingOldRect, c) || cc.view.setScissorInPoints(c.x, c.y, c.width, c.height)) : (a.enable(a.SCISSOR_TEST), cc.view.setScissorInPoints(c.x, c.y, c.width, c.height))
        };
        a._onAfterVisitScissor = function (a) {
            a = a || cc._renderContext;
            this._scissorOldState ? cc.rectEqualToRect(this._clippingOldRect,
                this._node._clippingRect) || cc.view.setScissorInPoints(this._clippingOldRect.x, this._clippingOldRect.y, this._clippingOldRect.width, this._clippingOldRect.height) : a.disable(a.SCISSOR_TEST)
        };
        a.rebindStencilRendering = function (a) {};
        a.transform = function (a, c) {
            var d = this._node;
            this.pNodeTransform(a, c);
            d._clippingStencil && d._clippingStencil._renderCmd.transform(this, c)
        };
        a.stencilClippingVisit = function (a) {
            a = this._node;
            if (a._clippingStencil && a._clippingStencil.isVisible())
                if (ccui.Layout.WebGLRenderCmd._layer +
                    1 === cc.stencilBits) ccui.Layout.WebGLRenderCmd._visit_once = !0, ccui.Layout.WebGLRenderCmd._visit_once && (cc.log("Nesting more than " + cc.stencilBits + "stencils is not supported. Everything will be drawn without stencil for this node and its childs."), ccui.Layout.WebGLRenderCmd._visit_once = !1);
                else {
                    this._beforeVisitCmdStencil || (this._beforeVisitCmdStencil = new cc.CustomRenderCmd(this, this._onBeforeVisitStencil), this._afterDrawStencilCmd = new cc.CustomRenderCmd(this, this._onAfterDrawStencil), this._afterVisitCmdStencil =
                        new cc.CustomRenderCmd(this, this._onAfterVisitStencil));
                    cc.renderer.pushRenderCommand(this._beforeVisitCmdStencil);
                    var c = cc.current_stack;
                    c.stack.push(c.top);
                    c.top = this._stackMatrix;
                    a._clippingStencil.visit(this);
                    cc.renderer.pushRenderCommand(this._afterDrawStencilCmd)
                }
        };
        a.postStencilVisit = function () {
            renderer.pushRenderCommand(cmd._afterVisitCmdStencil);
            cc.current_stack.top = cc.current_stack.stack.pop()
        };
        a.scissorClippingVisit = function (a) {
            this._beforeVisitCmdScissor || (this._beforeVisitCmdScissor = new cc.CustomRenderCmd(this,
                this._onBeforeVisitScissor), this._afterVisitCmdScissor = new cc.CustomRenderCmd(this, this._onAfterVisitScissor));
            cc.renderer.pushRenderCommand(this._beforeVisitCmdScissor)
        };
        a.postScissorVisit = function () {
            cc.renderer.pushRenderCommand(this._afterVisitCmdScissor)
        };
        ccui.Layout.WebGLRenderCmd._layer = -1;
        ccui.Layout.WebGLRenderCmd._visit_once = null
    }
})();
ccui.Margin = ccui.Class.extend({
    left: 0,
    top: 0,
    right: 0,
    bottom: 0,
    ctor: function (a, b, c, d) {
        void 0 !== a && void 0 === b && (this.left = a.left, this.top = a.top, this.right = a.right, this.bottom = a.bottom);
        void 0 !== d && (this.left = a, this.top = b, this.right = c, this.bottom = d)
    },
    setMargin: function (a, b, c, d) {
        this.left = a;
        this.top = b;
        this.right = c;
        this.bottom = d
    },
    equals: function (a) {
        return this.left === a.left && this.top === a.top && this.right === a.right && this.bottom === a.bottom
    }
});
ccui.MarginZero = function () {
    return new ccui.Margin(0, 0, 0, 0)
};
ccui.LayoutParameter = ccui.Class.extend({
    _margin: null,
    _layoutParameterType: null,
    ctor: function () {
        this._margin = new ccui.Margin;
        this._layoutParameterType = ccui.LayoutParameter.NONE
    },
    setMargin: function (a, b, c, d) {
        cc.isObject(a) ? (this._margin.left = a.left, this._margin.top = a.top, this._margin.right = a.right, this._margin.bottom = a.bottom) : (this._margin.left = a, this._margin.top = b, this._margin.right = c, this._margin.bottom = d)
    },
    getMargin: function () {
        return this._margin
    },
    getLayoutType: function () {
        return this._layoutParameterType
    },
    clone: function () {
        var a = this._createCloneInstance();
        a._copyProperties(this);
        return a
    },
    _createCloneInstance: function () {
        return new ccui.LayoutParameter
    },
    _copyProperties: function (a) {
        this._margin.bottom = a._margin.bottom;
        this._margin.left = a._margin.left;
        this._margin.right = a._margin.right;
        this._margin.top = a._margin.top
    }
});
ccui.LayoutParameter.create = function () {
    return new ccui.LayoutParameter
};
ccui.LayoutParameter.NONE = 0;
ccui.LayoutParameter.LINEAR = 1;
ccui.LayoutParameter.RELATIVE = 2;
ccui.LinearLayoutParameter = ccui.LayoutParameter.extend({
    _linearGravity: null,
    ctor: function () {
        ccui.LayoutParameter.prototype.ctor.call(this);
        this._linearGravity = ccui.LinearLayoutParameter.NONE;
        this._layoutParameterType = ccui.LayoutParameter.LINEAR
    },
    setGravity: function (a) {
        this._linearGravity = a
    },
    getGravity: function () {
        return this._linearGravity
    },
    _createCloneInstance: function () {
        return new ccui.LinearLayoutParameter
    },
    _copyProperties: function (a) {
        ccui.LayoutParameter.prototype._copyProperties.call(this, a);
        a instanceof ccui.LinearLayoutParameter && this.setGravity(a._linearGravity)
    }
});
ccui.LinearLayoutParameter.create = function () {
    return new ccui.LinearLayoutParameter
};
ccui.LinearLayoutParameter.NONE = 0;
ccui.LinearLayoutParameter.LEFT = 1;
ccui.LinearLayoutParameter.TOP = 2;
ccui.LinearLayoutParameter.RIGHT = 3;
ccui.LinearLayoutParameter.BOTTOM = 4;
ccui.LinearLayoutParameter.CENTER_VERTICAL = 5;
ccui.LinearLayoutParameter.CENTER_HORIZONTAL = 6;
ccui.RelativeLayoutParameter = ccui.LayoutParameter.extend({
    _relativeAlign: null,
    _relativeWidgetName: "",
    _relativeLayoutName: "",
    _put: !1,
    ctor: function () {
        ccui.LayoutParameter.prototype.ctor.call(this);
        this._relativeAlign = ccui.RelativeLayoutParameter.NONE;
        this._relativeLayoutName = this._relativeWidgetName = "";
        this._put = !1;
        this._layoutParameterType = ccui.LayoutParameter.RELATIVE
    },
    setAlign: function (a) {
        this._relativeAlign = a
    },
    getAlign: function () {
        return this._relativeAlign
    },
    setRelativeToWidgetName: function (a) {
        this._relativeWidgetName =
            a
    },
    getRelativeToWidgetName: function () {
        return this._relativeWidgetName
    },
    setRelativeName: function (a) {
        this._relativeLayoutName = a
    },
    getRelativeName: function () {
        return this._relativeLayoutName
    },
    _createCloneInstance: function () {
        return new ccui.RelativeLayoutParameter
    },
    _copyProperties: function (a) {
        ccui.LayoutParameter.prototype._copyProperties.call(this, a);
        a instanceof ccui.RelativeLayoutParameter && (this.setAlign(a._relativeAlign), this.setRelativeToWidgetName(a._relativeWidgetName), this.setRelativeName(a._relativeLayoutName))
    }
});
ccui.RelativeLayoutParameter.create = function () {
    return new ccui.RelativeLayoutParameter
};
ccui.RelativeLayoutParameter.NONE = 0;
ccui.RelativeLayoutParameter.PARENT_TOP_LEFT = 1;
ccui.RelativeLayoutParameter.PARENT_TOP_CENTER_HORIZONTAL = 2;
ccui.RelativeLayoutParameter.PARENT_TOP_RIGHT = 3;
ccui.RelativeLayoutParameter.PARENT_LEFT_CENTER_VERTICAL = 4;
ccui.RelativeLayoutParameter.CENTER_IN_PARENT = 5;
ccui.RelativeLayoutParameter.PARENT_RIGHT_CENTER_VERTICAL = 6;
ccui.RelativeLayoutParameter.PARENT_LEFT_BOTTOM = 7;
ccui.RelativeLayoutParameter.PARENT_BOTTOM_CENTER_HORIZONTAL = 8;
ccui.RelativeLayoutParameter.PARENT_RIGHT_BOTTOM = 9;
ccui.RelativeLayoutParameter.LOCATION_ABOVE_LEFTALIGN = 10;
ccui.RelativeLayoutParameter.LOCATION_ABOVE_CENTER = 11;
ccui.RelativeLayoutParameter.LOCATION_ABOVE_RIGHTALIGN = 12;
ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_TOPALIGN = 13;
ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_CENTER = 14;
ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_BOTTOMALIGN = 15;
ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_TOPALIGN = 16;
ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_CENTER = 17;
ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_BOTTOMALIGN = 18;
ccui.RelativeLayoutParameter.LOCATION_BELOW_LEFTALIGN = 19;
ccui.RelativeLayoutParameter.LOCATION_BELOW_CENTER = 20;
ccui.RelativeLayoutParameter.LOCATION_BELOW_RIGHTALIGN = 21;
ccui.LINEAR_GRAVITY_NONE = 0;
ccui.LINEAR_GRAVITY_LEFT = 1;
ccui.LINEAR_GRAVITY_TOP = 2;
ccui.LINEAR_GRAVITY_RIGHT = 3;
ccui.LINEAR_GRAVITY_BOTTOM = 4;
ccui.LINEAR_GRAVITY_CENTER_VERTICAL = 5;
ccui.LINEAR_GRAVITY_CENTER_HORIZONTAL = 6;
ccui.RELATIVE_ALIGN_NONE = 0;
ccui.RELATIVE_ALIGN_PARENT_TOP_LEFT = 1;
ccui.RELATIVE_ALIGN_PARENT_TOP_CENTER_HORIZONTAL = 2;
ccui.RELATIVE_ALIGN_PARENT_TOP_RIGHT = 3;
ccui.RELATIVE_ALIGN_PARENT_LEFT_CENTER_VERTICAL = 4;
ccui.RELATIVE_ALIGN_PARENT_CENTER = 5;
ccui.RELATIVE_ALIGN_PARENT_RIGHT_CENTER_VERTICAL = 6;
ccui.RELATIVE_ALIGN_PARENT_LEFT_BOTTOM = 7;
ccui.RELATIVE_ALIGN_PARENT_BOTTOM_CENTER_HORIZONTAL = 8;
ccui.RELATIVE_ALIGN_PARENT_RIGHT_BOTTOM = 9;
ccui.RELATIVE_ALIGN_LOCATION_ABOVE_LEFT = 10;
ccui.RELATIVE_ALIGN_LOCATION_ABOVE_CENTER = 11;
ccui.RELATIVE_ALIGN_LOCATION_ABOVE_RIGHT = 12;
ccui.RELATIVE_ALIGN_LOCATION_LEFT_TOP = 13;
ccui.RELATIVE_ALIGN_LOCATION_LEFT_CENTER = 14;
ccui.RELATIVE_ALIGN_LOCATION_LEFT_BOTTOM = 15;
ccui.RELATIVE_ALIGN_LOCATION_RIGHT_TOP = 16;
ccui.RELATIVE_ALIGN_LOCATION_RIGHT_CENTER = 17;
ccui.RELATIVE_ALIGN_LOCATION_RIGHT_BOTTOM = 18;
ccui.RELATIVE_ALIGN_LOCATION_BELOW_TOP = 19;
ccui.RELATIVE_ALIGN_LOCATION_BELOW_CENTER = 20;
ccui.RELATIVE_ALIGN_LOCATION_BELOW_BOTTOM = 21;
ccui.getLayoutManager = function (a) {
    switch (a) {
    case ccui.Layout.LINEAR_VERTICAL:
        return ccui.linearVerticalLayoutManager;
    case ccui.Layout.LINEAR_HORIZONTAL:
        return ccui.linearHorizontalLayoutManager;
    case ccui.Layout.RELATIVE:
        return ccui.relativeLayoutManager
    }
    return null
};
ccui.linearVerticalLayoutManager = {
    _doLayout: function (a) {
        var b = a._getLayoutContentSize();
        a = a._getLayoutElements();
        for (var c = b.height, d = 0, f = a.length; d < f; d++) {
            var g = a[d];
            if (g) {
                var h = g.getLayoutParameter();
                if (h) {
                    var m = h.getGravity(),
                        n = g.getAnchorPoint(),
                        p = g.getContentSize(),
                        u = n.x * p.width,
                        c = c - (1 - n.y) * p.height;
                    switch (m) {
                    case ccui.LinearLayoutParameter.RIGHT:
                        u = b.width - (1 - n.x) * p.width;
                        break;
                    case ccui.LinearLayoutParameter.CENTER_HORIZONTAL:
                        u = b.width / 2 - p.width * (0.5 - n.x)
                    }
                    h = h.getMargin();
                    u += h.left;
                    c -= h.top;
                    g.setPosition(u, c);
                    c = g.getPositionY() - n.y * p.height - h.bottom
                }
            }
        }
    }
};
ccui.linearHorizontalLayoutManager = {
    _doLayout: function (a) {
        var b = a._getLayoutContentSize();
        a = a._getLayoutElements();
        for (var c = 0, d = 0, f = a.length; d < f; d++) {
            var g = a[d];
            if (g) {
                var h = g.getLayoutParameter();
                if (h) {
                    var m = h.getGravity(),
                        n = g.getAnchorPoint(),
                        p = g.getContentSize(),
                        c = c + n.x * p.width,
                        u = b.height - (1 - n.y) * p.height;
                    switch (m) {
                    case ccui.LinearLayoutParameter.BOTTOM:
                        u = n.y * p.height;
                        break;
                    case ccui.LinearLayoutParameter.CENTER_VERTICAL:
                        u = b.height / 2 - p.height * (0.5 - n.y)
                    }
                    h = h.getMargin();
                    c += h.left;
                    u -= h.top;
                    g.setPosition(c,
                        u);
                    c = g.getRightBoundary() + h.right
                }
            }
        }
    }
};
ccui.relativeLayoutManager = {
    _unlayoutChildCount: 0,
    _widgetChildren: [],
    _widget: null,
    _finalPositionX: 0,
    _finalPositionY: 0,
    _relativeWidgetLP: null,
    _doLayout: function (a) {
        for (var b = this._widgetChildren = this._getAllWidgets(a); 0 < this._unlayoutChildCount;) {
            for (var c = 0, d = b.length; c < d; c++) {
                this._widget = b[c];
                var f = this._widget.getLayoutParameter();
                f && !f._put && this._calculateFinalPositionWithRelativeWidget(a) && (this._calculateFinalPositionWithRelativeAlign(), this._widget.setPosition(this._finalPositionX, this._finalPositionY),
                    f._put = !0)
            }
            this._unlayoutChildCount--
        }
        this._widgetChildren.length = 0
    },
    _getAllWidgets: function (a) {
        a = a._getLayoutElements();
        for (var b = this._widgetChildren, c = b.length = 0, d = a.length; c < d; c++) {
            var f = a[c];
            f && f instanceof ccui.Widget && (f.getLayoutParameter()._put = !1, this._unlayoutChildCount++, b.push(f))
        }
        return b
    },
    _getRelativeWidget: function (a) {
        var b = null;
        if ((a = a.getLayoutParameter().getRelativeToWidgetName()) && 0 !== a.length)
            for (var c = this._widgetChildren, d = 0, f = c.length; d < f; d++) {
                var g = c[d];
                if (g) {
                    var h = g.getLayoutParameter();
                    if (h && h.getRelativeName() === a) {
                        b = g;
                        this._relativeWidgetLP = h;
                        break
                    }
                }
            }
        return b
    },
    _calculateFinalPositionWithRelativeWidget: function (a) {
        var b = this._widget,
            c = b.getAnchorPoint(),
            d = b.getContentSize();
        this._finalPositionY = this._finalPositionX = 0;
        var f = this._getRelativeWidget(b),
            b = b.getLayoutParameter().getAlign();
        a = a._getLayoutContentSize();
        switch (b) {
        case ccui.RelativeLayoutParameter.NONE:
        case ccui.RelativeLayoutParameter.PARENT_TOP_LEFT:
            this._finalPositionX = c.x * d.width;
            this._finalPositionY = a.height - (1 - c.y) *
                d.height;
            break;
        case ccui.RelativeLayoutParameter.PARENT_TOP_CENTER_HORIZONTAL:
            this._finalPositionX = 0.5 * a.width - d.width * (0.5 - c.x);
            this._finalPositionY = a.height - (1 - c.y) * d.height;
            break;
        case ccui.RelativeLayoutParameter.PARENT_TOP_RIGHT:
            this._finalPositionX = a.width - (1 - c.x) * d.width;
            this._finalPositionY = a.height - (1 - c.y) * d.height;
            break;
        case ccui.RelativeLayoutParameter.PARENT_LEFT_CENTER_VERTICAL:
            this._finalPositionX = c.x * d.width;
            this._finalPositionY = 0.5 * a.height - d.height * (0.5 - c.y);
            break;
        case ccui.RelativeLayoutParameter.CENTER_IN_PARENT:
            this._finalPositionX =
                0.5 * a.width - d.width * (0.5 - c.x);
            this._finalPositionY = 0.5 * a.height - d.height * (0.5 - c.y);
            break;
        case ccui.RelativeLayoutParameter.PARENT_RIGHT_CENTER_VERTICAL:
            this._finalPositionX = a.width - (1 - c.x) * d.width;
            this._finalPositionY = 0.5 * a.height - d.height * (0.5 - c.y);
            break;
        case ccui.RelativeLayoutParameter.PARENT_LEFT_BOTTOM:
            this._finalPositionX = c.x * d.width;
            this._finalPositionY = c.y * d.height;
            break;
        case ccui.RelativeLayoutParameter.PARENT_BOTTOM_CENTER_HORIZONTAL:
            this._finalPositionX = 0.5 * a.width - d.width * (0.5 - c.x);
            this._finalPositionY =
                c.y * d.height;
            break;
        case ccui.RelativeLayoutParameter.PARENT_RIGHT_BOTTOM:
            this._finalPositionX = a.width - (1 - c.x) * d.width;
            this._finalPositionY = c.y * d.height;
            break;
        case ccui.RelativeLayoutParameter.LOCATION_ABOVE_LEFTALIGN:
            if (f) {
                if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
                this._finalPositionY = f.getTopBoundary() + c.y * d.height;
                this._finalPositionX = f.getLeftBoundary() + c.x * d.width
            }
            break;
        case ccui.RelativeLayoutParameter.LOCATION_ABOVE_CENTER:
            if (f) {
                if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
                a = f.getContentSize();
                this._finalPositionY = f.getTopBoundary() + c.y * d.height;
                this._finalPositionX = f.getLeftBoundary() + 0.5 * a.width + c.x * d.width - 0.5 * d.width
            }
            break;
        case ccui.RelativeLayoutParameter.LOCATION_ABOVE_RIGHTALIGN:
            if (f) {
                if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
                this._finalPositionY = f.getTopBoundary() + c.y * d.height;
                this._finalPositionX = f.getRightBoundary() - (1 - c.x) * d.width
            }
            break;
        case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_TOPALIGN:
            if (f) {
                if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
                this._finalPositionY = f.getTopBoundary() - (1 - c.y) * d.height;
                this._finalPositionX = f.getLeftBoundary() - (1 - c.x) * d.width
            }
            break;
        case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_CENTER:
            if (f) {
                if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
                a = f.getContentSize();
                this._finalPositionX = f.getLeftBoundary() - (1 - c.x) * d.width;
                this._finalPositionY = f.getBottomBoundary() + 0.5 * a.height + c.y * d.height - 0.5 * d.height
            }
            break;
        case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_BOTTOMALIGN:
            if (f) {
                if (this._relativeWidgetLP &&
                    !this._relativeWidgetLP._put) return !1;
                this._finalPositionY = f.getBottomBoundary() + c.y * d.height;
                this._finalPositionX = f.getLeftBoundary() - (1 - c.x) * d.width
            }
            break;
        case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_TOPALIGN:
            if (f) {
                if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
                this._finalPositionY = f.getTopBoundary() - (1 - c.y) * d.height;
                this._finalPositionX = f.getRightBoundary() + c.x * d.width
            }
            break;
        case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_CENTER:
            if (f) {
                if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
                a = f.getContentSize();
                this._finalPositionX = f.getRightBoundary() + c.x * d.width;
                this._finalPositionY = f.getBottomBoundary() + 0.5 * a.height + c.y * d.height - 0.5 * d.height
            }
            break;
        case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_BOTTOMALIGN:
            if (f) {
                if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
                this._finalPositionY = f.getBottomBoundary() + c.y * d.height;
                this._finalPositionX = f.getRightBoundary() + c.x * d.width
            }
            break;
        case ccui.RelativeLayoutParameter.LOCATION_BELOW_LEFTALIGN:
            if (f) {
                if (this._relativeWidgetLP &&
                    !this._relativeWidgetLP._put) return !1;
                this._finalPositionY = f.getBottomBoundary() - (1 - c.y) * d.height;
                this._finalPositionX = f.getLeftBoundary() + c.x * d.width
            }
            break;
        case ccui.RelativeLayoutParameter.LOCATION_BELOW_CENTER:
            if (f) {
                if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
                a = f.getContentSize();
                this._finalPositionY = f.getBottomBoundary() - (1 - c.y) * d.height;
                this._finalPositionX = f.getLeftBoundary() + 0.5 * a.width + c.x * d.width - 0.5 * d.width
            }
            break;
        case ccui.RelativeLayoutParameter.LOCATION_BELOW_RIGHTALIGN:
            if (f) {
                if (this._relativeWidgetLP &&
                    !this._relativeWidgetLP._put) return !1;
                this._finalPositionY = f.getBottomBoundary() - (1 - c.y) * d.height;
                this._finalPositionX = f.getRightBoundary() - (1 - c.x) * d.width
            }
        }
        return !0
    },
    _calculateFinalPositionWithRelativeAlign: function () {
        var a = this._widget.getLayoutParameter(),
            b = a.getMargin();
        switch (a.getAlign()) {
        case ccui.RelativeLayoutParameter.NONE:
        case ccui.RelativeLayoutParameter.PARENT_TOP_LEFT:
            this._finalPositionX += b.left;
            this._finalPositionY -= b.top;
            break;
        case ccui.RelativeLayoutParameter.PARENT_TOP_CENTER_HORIZONTAL:
            this._finalPositionY -=
                b.top;
            break;
        case ccui.RelativeLayoutParameter.PARENT_TOP_RIGHT:
            this._finalPositionX -= b.right;
            this._finalPositionY -= b.top;
            break;
        case ccui.RelativeLayoutParameter.PARENT_LEFT_CENTER_VERTICAL:
            this._finalPositionX += b.left;
            break;
        case ccui.RelativeLayoutParameter.PARENT_RIGHT_CENTER_VERTICAL:
            this._finalPositionX -= b.right;
            break;
        case ccui.RelativeLayoutParameter.PARENT_LEFT_BOTTOM:
            this._finalPositionX += b.left;
            this._finalPositionY += b.bottom;
            break;
        case ccui.RelativeLayoutParameter.PARENT_BOTTOM_CENTER_HORIZONTAL:
            this._finalPositionY +=
                b.bottom;
            break;
        case ccui.RelativeLayoutParameter.PARENT_RIGHT_BOTTOM:
            this._finalPositionX -= b.right;
            this._finalPositionY += b.bottom;
            break;
        case ccui.RelativeLayoutParameter.LOCATION_ABOVE_LEFTALIGN:
            this._finalPositionY += b.bottom;
            this._finalPositionX += b.left;
            break;
        case ccui.RelativeLayoutParameter.LOCATION_ABOVE_RIGHTALIGN:
            this._finalPositionY += b.bottom;
            this._finalPositionX -= b.right;
            break;
        case ccui.RelativeLayoutParameter.LOCATION_ABOVE_CENTER:
            this._finalPositionY += b.bottom;
            break;
        case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_TOPALIGN:
            this._finalPositionX -=
                b.right;
            this._finalPositionY -= b.top;
            break;
        case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_BOTTOMALIGN:
            this._finalPositionX -= b.right;
            this._finalPositionY += b.bottom;
            break;
        case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_CENTER:
            this._finalPositionX -= b.right;
            break;
        case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_TOPALIGN:
            this._finalPositionX += b.left;
            this._finalPositionY -= b.top;
            break;
        case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_BOTTOMALIGN:
            this._finalPositionX += b.left;
            this._finalPositionY +=
                b.bottom;
            break;
        case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_CENTER:
            this._finalPositionX += b.left;
            break;
        case ccui.RelativeLayoutParameter.LOCATION_BELOW_LEFTALIGN:
            this._finalPositionY -= b.top;
            this._finalPositionX += b.left;
            break;
        case ccui.RelativeLayoutParameter.LOCATION_BELOW_RIGHTALIGN:
            this._finalPositionY -= b.top;
            this._finalPositionX -= b.right;
            break;
        case ccui.RelativeLayoutParameter.LOCATION_BELOW_CENTER:
            this._finalPositionY -= b.top
        }
    }
};
ccui.HBox = ccui.Layout.extend({
    ctor: function (a) {
        ccui.Layout.prototype.ctor.call(this);
        this.setLayoutType(ccui.Layout.LINEAR_HORIZONTAL);
        a && this.setContentSize(a)
    }
});
ccui.HBox.create = function (a) {
    return new ccui.HBox(a)
};
ccui.RelativeBox = ccui.Layout.extend({
    ctor: function (a) {
        ccui.Layout.prototype.ctor.call(this);
        this.setLayoutType(ccui.Layout.RELATIVE);
        a && this.setContentSize(a)
    }
});
ccui.RelativeBox.create = function (a) {
    return new ccui.RelativeBox(a)
};
ccui.VBox = ccui.Layout.extend({
    ctor: function (a) {
        ccui.Layout.prototype.ctor.call(this);
        this.setLayoutType(ccui.Layout.LINEAR_VERTICAL);
        a && this.setContentSize(a)
    },
    initWithSize: function (a) {
        return this.init() ? !0 : !1
    }
});
ccui.VBox.create = function (a) {
    return new ccui.VBox(a)
};
ccui.helper = {
    seekWidgetByTag: function (a, b) {
        if (!a) return null;
        if (a.getTag() === b) return a;
        for (var c = a.getChildren(), d = c.length, f = 0; f < d; f++) {
            var g = ccui.helper.seekWidgetByTag(c[f], b);
            if (null !== g) return g
        }
        return null
    },
    seekWidgetByName: function (a, b) {
        if (!a) return null;
        if (a.getName() === b) return a;
        for (var c = a.getChildren(), d = c.length, f = 0; f < d; f++) {
            var g = ccui.helper.seekWidgetByName(c[f], b);
            if (null !== g) return g
        }
        return null
    },
    seekWidgetByRelativeName: function (a, b) {
        if (!a) return null;
        for (var c = a.getChildren(),
                d = c.length, f = 0; f < d; f++) {
            var g = c[f],
                h = g.getLayoutParameter(ccui.LayoutParameter.RELATIVE);
            if (h && h.getRelativeName() === b) return g
        }
        return null
    },
    seekActionWidgetByActionTag: function (a, b) {
        if (!a) return null;
        if (a.getActionTag() === b) return a;
        for (var c = a.getChildren(), d = 0; d < c.length; d++) {
            var f = ccui.helper.seekActionWidgetByActionTag(c[d], b);
            if (null !== f) return f
        }
        return null
    },
    _activeLayout: !0,
    doLayout: function (a) {
        if (this._activeLayout) {
            a = a.getChildren();
            for (var b, c = 0, d = a.length; c < d; c++) {
                b = a[c];
                var f = b.getComponent(ccui.LayoutComponent.NAME);
                b = b.getParent();
                null != f && (null !== b && f.refreshLayout) && f.refreshLayout()
            }
        }
    },
    changeLayoutSystemActiveState: function (a) {
        this._activeLayout = a
    },
    restrictCapInsetRect: function (a, b) {
        var c = a.x,
            d = a.y,
            f = a.width,
            g = a.height;
        b.width < f && (f = c = 0);
        b.height < g && (g = d = 0);
        return cc.rect(c, d, f, g)
    },
    _createSpriteFromBase64: function (a, b) {
        var c = cc.textureCache.getTextureForKey(b);
        c || (c = new Image, c.src = a, cc.textureCache.cacheImage(b, c), c = cc.textureCache.getTextureForKey(b));
        return new cc.Sprite(c)
    }
};
ccui.Button = ccui.Widget.extend({
    _buttonScale9Renderer: null,
    _buttonNormalSpriteFrame: null,
    _buttonClickedSpriteFrame: null,
    _buttonDisableSpriteFrame: null,
    _titleRenderer: null,
    _normalFileName: "",
    _clickedFileName: "",
    _disabledFileName: "",
    _prevIgnoreSize: !0,
    _scale9Enabled: !1,
    _capInsetsNormal: null,
    _normalTexType: ccui.Widget.LOCAL_TEXTURE,
    _pressedTexType: ccui.Widget.LOCAL_TEXTURE,
    _disabledTexType: ccui.Widget.LOCAL_TEXTURE,
    _normalTextureSize: null,
    pressedActionEnabled: !1,
    _titleColor: null,
    _zoomScale: 0.1,
    _normalTextureLoaded: !1,
    _pressedTextureLoaded: !1,
    _disabledTextureLoaded: !1,
    _className: "Button",
    _normalTextureAdaptDirty: !0,
    _fontName: "Thonburi",
    _fontSize: 12,
    _type: 0,
    ctor: function (a, b, c, d) {
        this._capInsetsNormal = cc.rect(0, 0, 0, 0);
        this._normalTextureSize = cc.size(0, 0);
        ccui.Widget.prototype.ctor.call(this);
        this.setTouchEnabled(!0);
        this._normalLoader = new cc.Sprite.LoadManager;
        this._clickedLoader = new cc.Sprite.LoadManager;
        this._disabledLoader = new cc.Sprite.LoadManager;
        a && this.loadTextures(a, b, c, d)
    },
    _createTitleRendererIfNeeded: function () {
        this._titleRenderer ||
            (this._titleRenderer = new cc.LabelTTF(""), this._titleRenderer.setAnchorPoint(0.5, 0.5), this._titleColor = cc.color.WHITE, this._titleRenderer.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER), this.addProtectedChild(this._titleRenderer, ccui.Button.TITLE_RENDERER_ZORDER, -1))
    },
    _initRenderer: function () {
        this._buttonScale9Renderer = new ccui.Scale9Sprite;
        this._buttonScale9Renderer.setRenderingType(ccui.Scale9Sprite.RenderingType.SIMPLE);
        this.addProtectedChild(this._buttonScale9Renderer, ccui.Button.DISABLED_RENDERER_ZORDER,
            -1)
    },
    setScale9Enabled: function (a) {
        this._scale9Enabled !== a && (this._brightStyle = ccui.Widget.BRIGHT_STYLE_NONE, (this._scale9Enabled = a) ? this._buttonScale9Renderer.setRenderingType(ccui.Scale9Sprite.RenderingType.SLICED) : this._buttonScale9Renderer.setRenderingType(ccui.Scale9Sprite.RenderingType.SIMPLE), this._scale9Enabled ? (a = this._ignoreSize, this.ignoreContentAdaptWithSize(!1), this._prevIgnoreSize = a) : this.ignoreContentAdaptWithSize(this._prevIgnoreSize), this.setCapInsets(this._capInsetsNormal), this.setBright(this._bright),
            this._normalTextureAdaptDirty = !0)
    },
    isScale9Enabled: function () {
        return this._scale9Enabled
    },
    ignoreContentAdaptWithSize: function (a) {
        if (this._unifySize) this._updateContentSize();
        else if (!this._scale9Enabled || this._scale9Enabled && !a) ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this, a), this._prevIgnoreSize = a
    },
    getVirtualRendererSize: function () {
        return this._unifySize ? this._getNormalSize() : !this._normalTextureLoaded && this._titleRenderer && 0 < this._titleRenderer.getString().length ? this._titleRenderer.getContentSize() :
            cc.size(this._normalTextureSize)
    },
    loadTextures: function (a, b, c, d) {
        this.loadTextureNormal(a, d);
        this.loadTexturePressed(b, d);
        this.loadTextureDisabled(c, d)
    },
    _createSpriteFrameWithFile: function (a) {
        var b = cc.textureCache.getTextureForKey(a);
        b || (b = cc.textureCache.addImage(a));
        if (!b._textureLoaded) return b;
        a = b.getContentSize();
        a = cc.rect(0, 0, a.width, a.height);
        return new cc.SpriteFrame(b, a)
    },
    _createSpriteFrameWithName: function (a) {
        a = cc.spriteFrameCache.getSpriteFrame(a);
        return null == a ? (cc.log("ccui.Scale9Sprite.initWithSpriteFrameName(): can't find the sprite frame by spriteFrameName"),
            null) : a
    },
    loadTextureNormal: function (a, b) {
        if (a) {
            b = b || ccui.Widget.LOCAL_TEXTURE;
            this._normalFileName = a;
            this._normalTexType = b;
            var c;
            switch (this._normalTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                c = this._createSpriteFrameWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                "#" === a[0] && (a = a.substr(1, a.length - 1)), c = this._createSpriteFrameWithName(a)
            }
            c && (c._textureLoaded ? (this._normalTextureLoaded = c._textureLoaded, this._buttonNormalSpriteFrame = c, this._buttonScale9Renderer.setSpriteFrame(c), this._scale9Enabled &&
                this._buttonScale9Renderer.setCapInsets(this._capInsetsNormal), !this._ignoreSize && cc.sizeEqualToSize(this._customSize, cc.size(0, 0)) && (this._customSize = this._buttonScale9Renderer.getContentSize()), this._normalTextureSize = this._buttonScale9Renderer.getContentSize(), this._updateChildrenDisplayedRGBA(), this._unifySize ? this._scale9Enabled && (this._buttonScale9Renderer.setCapInsets(this._capInsetsNormal), this._updateContentSizeWithTextureSize(this._getNormalSize())) : this._updateContentSizeWithTextureSize(this._normalTextureSize),
                this._normalTextureAdaptDirty = !0, this._findLayout()) : (this._normalLoader.clear(), this._normalLoader.once(c, function () {
                this.loadTextureNormal(this._normalFileName, this._normalTexType)
            }, this)))
        }
    },
    loadTexturePressed: function (a, b) {
        if (a) {
            b = b || ccui.Widget.LOCAL_TEXTURE;
            this._clickedFileName = a;
            this._pressedTexType = b;
            var c;
            switch (this._pressedTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                c = this._createSpriteFrameWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                "#" === a[0] && (a = a.substr(1, a.length - 1)), c = this._createSpriteFrameWithName(a)
            }
            c &&
                (c._textureLoaded ? (this._buttonClickedSpriteFrame = c, this._updateChildrenDisplayedRGBA(), this._pressedTextureLoaded = !0) : (this._clickedLoader.clear(), this._clickedLoader.once(c, function () {
                    this.loadTexturePressed(this._clickedFileName, this._pressedTexType)
                }, this)))
        }
    },
    loadTextureDisabled: function (a, b) {
        if (a) {
            b = b || ccui.Widget.LOCAL_TEXTURE;
            this._disabledFileName = a;
            this._disabledTexType = b;
            var c;
            switch (this._disabledTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                c = this._createSpriteFrameWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                "#" ===
                a[0] && (a = a.substr(1, a.length - 1)), c = this._createSpriteFrameWithName(a)
            }
            c && (c._textureLoaded ? (this._buttonDisableSpriteFrame = c, this._updateChildrenDisplayedRGBA(), this._disabledTextureLoaded = !0, this._findLayout()) : (this._disabledLoader.clear(), this._disabledLoader.once(c, function () {
                this.loadTextureDisabled(this._disabledFileName, this._disabledTexType)
            }, this)))
        }
    },
    setCapInsets: function (a) {
        this.setCapInsetsNormalRenderer(a)
    },
    setCapInsetsNormalRenderer: function (a) {
        if (a && this._scale9Enabled) {
            var b = a.x,
                c =
                a.y,
                d = a.width;
            a = a.height;
            this._normalTextureSize.width < d && (d = b = 0);
            this._normalTextureSize.height < a && (a = c = 0);
            var f = this._capInsetsNormal;
            f.x = b;
            f.y = c;
            f.width = d;
            f.height = a;
            this._capInsetsNormal = f;
            this._buttonScale9Renderer.setCapInsets(f)
        }
    },
    getCapInsetsNormalRenderer: function () {
        return cc.rect(this._capInsetsNormal)
    },
    setCapInsetsPressedRenderer: function (a) {
        this.setCapInsetsNormalRenderer(a)
    },
    getCapInsetsPressedRenderer: function () {
        return cc.rect(this._capInsetsNormal)
    },
    setCapInsetsDisabledRenderer: function (a) {
        this.setCapInsetsNormalRenderer(a)
    },
    getCapInsetsDisabledRenderer: function () {
        return cc.rect(this._capInsetsNormal)
    },
    _onPressStateChangedToNormal: function () {
        this._buttonScale9Renderer.setSpriteFrame(this._buttonNormalSpriteFrame);
        this._buttonScale9Renderer.setState(ccui.Scale9Sprite.state.NORMAL);
        if (this._pressedTextureLoaded) {
            if (this.pressedActionEnabled && (this._buttonScale9Renderer.stopAllActions(), this._buttonScale9Renderer.setScale(1), this._titleRenderer))
                if (this._titleRenderer.stopAllActions(), this._unifySize) {
                    var a = cc.scaleTo(ccui.Button.ZOOM_ACTION_TIME_STEP,
                        1, 1);
                    this._titleRenderer.runAction(a)
                } else this._titleRenderer.setScaleX(1), this._titleRenderer.setScaleY(1)
        } else this._buttonScale9Renderer.stopAllActions(), this._buttonScale9Renderer.setScale(1), this._scale9Enabled && this._buttonScale9Renderer.setColor(cc.color.WHITE), this._titleRenderer && (this._titleRenderer.stopAllActions(), this._titleRenderer.setScaleX(1), this._titleRenderer.setScaleY(1))
    },
    _onPressStateChangedToPressed: function () {
        this._buttonScale9Renderer.setState(ccui.Scale9Sprite.state.NORMAL);
        if (this._pressedTextureLoaded) {
            if (this._buttonScale9Renderer.setSpriteFrame(this._buttonClickedSpriteFrame), this.pressedActionEnabled) {
                this._buttonScale9Renderer.stopAllActions();
                var a = cc.scaleTo(ccui.Button.ZOOM_ACTION_TIME_STEP, 1 + this._zoomScale, 1 + this._zoomScale);
                this._buttonScale9Renderer.runAction(a);
                this._titleRenderer && (this._titleRenderer.stopAllActions(), this._titleRenderer.runAction(cc.scaleTo(ccui.Button.ZOOM_ACTION_TIME_STEP, 1 + this._zoomScale, 1 + this._zoomScale)))
            }
        } else this._buttonScale9Renderer.setSpriteFrame(this._buttonClickedSpriteFrame),
            this._buttonScale9Renderer.stopAllActions(), this._buttonScale9Renderer.setScale(1 + this._zoomScale, 1 + this._zoomScale), this._titleRenderer && (this._titleRenderer.stopAllActions(), this._titleRenderer.setScaleX(1 + this._zoomScale), this._titleRenderer.setScaleY(1 + this._zoomScale))
    },
    _onPressStateChangedToDisabled: function () {
        this._disabledTextureLoaded ? this._buttonScale9Renderer.setSpriteFrame(this._buttonDisableSpriteFrame) : this._normalTextureLoaded && this._buttonScale9Renderer.setState(ccui.Scale9Sprite.state.GRAY);
        this._buttonScale9Renderer.setScale(1)
    },
    _updateContentSize: function () {
        if (this._unifySize) {
            if (this._scale9Enabled) ccui.ProtectedNode.setContentSize(this._customSize);
            else {
                var a = this._getNormalSize();
                ccui.ProtectedNode.setContentSize(a)
            }
            this._onSizeChanged()
        } else this._ignoreSize && this.setContentSize(this.getVirtualRendererSize())
    },
    _onSizeChanged: function () {
        ccui.Widget.prototype._onSizeChanged.call(this);
        this._titleRenderer && this._updateTitleLocation();
        this._normalTextureAdaptDirty = !0
    },
    getVirtualRenderer: function () {
        return this._buttonScale9Renderer
    },
    _normalTextureScaleChangedWithSize: function () {
        this._buttonScale9Renderer.setContentSize(this._contentSize);
        this._buttonScale9Renderer.setPosition(this._contentSize.width / 2, this._contentSize.height / 2)
    },
    _adaptRenderers: function () {
        this._normalTextureAdaptDirty && (this._normalTextureScaleChangedWithSize(), this._normalTextureAdaptDirty = !1)
    },
    _updateTitleLocation: function () {
        this._titleRenderer.setPosition(0.5 * this._contentSize.width, 0.5 * this._contentSize.height)
    },
    setPressedActionEnabled: function (a) {
        this.pressedActionEnabled =
            a
    },
    setTitleText: function (a) {
        a !== this.getTitleText() && (this._createTitleRendererIfNeeded(), this._titleRenderer.setString(a), this._ignoreSize ? (a = this.getVirtualRendererSize(), this.setContentSize(a)) : this._titleRenderer._renderCmd._updateTTF())
    },
    getTitleText: function () {
        return this._titleRenderer ? this._titleRenderer.getString() : ""
    },
    setTitleColor: function (a) {
        this._createTitleRendererIfNeeded();
        this._titleRenderer.setFontFillColor(a)
    },
    getTitleColor: function () {
        return this._titleRenderer ? this._titleRenderer._getFillStyle() :
            cc.color.WHITE
    },
    setTitleFontSize: function (a) {
        this._createTitleRendererIfNeeded();
        this._titleRenderer.setFontSize(a);
        this._fontSize = a
    },
    getTitleFontSize: function () {
        return this._titleRenderer ? this._titleRenderer.getFontSize() : this._fontSize
    },
    setZoomScale: function (a) {
        this._zoomScale = a
    },
    getZoomScale: function () {
        return this._zoomScale
    },
    getNormalTextureSize: function () {
        return this._normalTextureSize
    },
    setTitleFontName: function (a) {
        this._createTitleRendererIfNeeded();
        this._titleRenderer.setFontName(a);
        this._fontName =
            a
    },
    getTitleRenderer: function () {
        return this._titleRenderer
    },
    getTitleFontName: function () {
        return this._titleRenderer ? this._titleRenderer.getFontName() : this._fontName
    },
    _setTitleFont: function (a) {
        this._titleRenderer.font = a
    },
    _getTitleFont: function () {
        return this._titleRenderer.font
    },
    getDescription: function () {
        return "Button"
    },
    _createCloneInstance: function () {
        return new ccui.Button
    },
    _copySpecialProperties: function (a) {
        this._prevIgnoreSize = a._prevIgnoreSize;
        this._capInsetsNormal = a._capInsetsNormal;
        this.setScale9Enabled(a._scale9Enabled);
        this.loadTextureNormal(a._normalFileName, a._normalTexType);
        this.loadTexturePressed(a._clickedFileName, a._pressedTexType);
        this.loadTextureDisabled(a._disabledFileName, a._disabledTexType);
        a._titleRenderer && a._titleRenderer._string && (this.setTitleText(a.getTitleText()), this.setTitleFontName(a.getTitleFontName()), this.setTitleFontSize(a.getTitleFontSize()), this.setTitleColor(a.getTitleColor()));
        this.setPressedActionEnabled(a.pressedActionEnabled);
        this.setZoomScale(a._zoomScale)
    },
    _getNormalSize: function () {
        var a;
        null !== this._titleRenderer && (a = this._titleRenderer.getContentSize());
        var b = this._buttonScale9Renderer.getContentSize();
        return cc.size(a.width > b.width ? a.width : b.width, a.height > b.height ? a.height : b.height)
    }
});
_p = ccui.Button.prototype;
cc.defineGetterSetter(_p, "titleText", _p.getTitleText, _p.setTitleText);
cc.defineGetterSetter(_p, "titleFont", _p._getTitleFont, _p._setTitleFont);
cc.defineGetterSetter(_p, "titleFontSize", _p.getTitleFontSize, _p.setTitleFontSize);
cc.defineGetterSetter(_p, "titleFontName", _p.getTitleFontName, _p.setTitleFontName);
cc.defineGetterSetter(_p, "titleColor", _p.getTitleColor, _p.setTitleColor);
_p = null;
ccui.Button.create = function (a, b, c, d) {
    return new ccui.Button(a, b, c, d)
};
ccui.Button.NORMAL_RENDERER_ZORDER = -2;
ccui.Button.PRESSED_RENDERER_ZORDER = -2;
ccui.Button.DISABLED_RENDERER_ZORDER = -2;
ccui.Button.TITLE_RENDERER_ZORDER = -1;
ccui.Button.ZOOM_ACTION_TIME_STEP = 0.05;
ccui.Button.SYSTEM = 0;
ccui.Button.TTF = 1;
ccui.CheckBox = ccui.Widget.extend({
    _backGroundBoxRenderer: null,
    _backGroundSelectedBoxRenderer: null,
    _frontCrossRenderer: null,
    _backGroundBoxDisabledRenderer: null,
    _frontCrossDisabledRenderer: null,
    _isSelected: !0,
    _checkBoxEventListener: null,
    _checkBoxEventSelector: null,
    _backGroundTexType: ccui.Widget.LOCAL_TEXTURE,
    _backGroundSelectedTexType: ccui.Widget.LOCAL_TEXTURE,
    _frontCrossTexType: ccui.Widget.LOCAL_TEXTURE,
    _backGroundDisabledTexType: ccui.Widget.LOCAL_TEXTURE,
    _frontCrossDisabledTexType: ccui.Widget.LOCAL_TEXTURE,
    _backGroundFileName: "",
    _backGroundSelectedFileName: "",
    _frontCrossFileName: "",
    _backGroundDisabledFileName: "",
    _frontCrossDisabledFileName: "",
    _className: "CheckBox",
    _zoomScale: 0.1,
    _backgroundTextureScaleX: 0.1,
    _backgroundTextureScaleY: 0.1,
    _backGroundBoxRendererAdaptDirty: !0,
    _backGroundSelectedBoxRendererAdaptDirty: !0,
    _frontCrossRendererAdaptDirty: !0,
    _backGroundBoxDisabledRendererAdaptDirty: !0,
    _frontCrossDisabledRendererAdaptDirty: !0,
    ctor: function (a, b, c, d, f, g) {
        ccui.Widget.prototype.ctor.call(this);
        this.setTouchEnabled(!0);
        for (var h = 0, m = 0; m < arguments.length; m++) {
            var n = typeof arguments[m];
            "string" === n ? isNaN(arguments[m] - 0) ? h++ : (g = arguments[m], arguments[m] = void 0) : "number" === n && h++
        }
        switch (h) {
        case 2:
            g = c, c = b, b = void 0
        }
        g = void 0 === g ? 0 : g;
        this._isSelected = !0;
        this.setSelected(!1);
        this.loadTextures(a, b, c, d, f, g)
    },
    _initRenderer: function () {
        this._backGroundBoxRenderer = new cc.Sprite;
        this._backGroundSelectedBoxRenderer = new cc.Sprite;
        this._frontCrossRenderer = new cc.Sprite;
        this._backGroundBoxDisabledRenderer = new cc.Sprite;
        this._frontCrossDisabledRenderer =
            new cc.Sprite;
        this.addProtectedChild(this._backGroundBoxRenderer, ccui.CheckBox.BOX_RENDERER_ZORDER, -1);
        this.addProtectedChild(this._backGroundSelectedBoxRenderer, ccui.CheckBox.BOX_SELECTED_RENDERER_ZORDER, -1);
        this.addProtectedChild(this._frontCrossRenderer, ccui.CheckBox.FRONT_CROSS_RENDERER_ZORDER, -1);
        this.addProtectedChild(this._backGroundBoxDisabledRenderer, ccui.CheckBox.BOX_DISABLED_RENDERER_ZORDER, -1);
        this.addProtectedChild(this._frontCrossDisabledRenderer, ccui.CheckBox.FRONT_CROSS_DISABLED_RENDERER_ZORDER,
            -1)
    },
    loadTextures: function (a, b, c, d, f, g) {
        a && this.loadTextureBackGround(a, g);
        b && this.loadTextureBackGroundSelected(b, g);
        c && this.loadTextureFrontCross(c, g);
        d && this.loadTextureBackGroundDisabled(d, g);
        f && this.loadTextureFrontCrossDisabled(f, g)
    },
    loadTextureBackGround: function (a, b) {
        if (a) {
            b = b || ccui.Widget.LOCAL_TEXTURE;
            this._backGroundFileName = a;
            this._backGroundTexType = b;
            var c = this._backGroundBoxRenderer;
            c._textureLoaded ? this._backGroundBoxRenderer.setContentSize(this._customSize) : c.addEventListener("load",
                function () {
                    this._updateContentSizeWithTextureSize(this._backGroundBoxRenderer.getContentSize());
                    this.loadTextureBackGround(this._backGroundFileName, this._backGroundTexType)
                }, this);
            switch (this._backGroundTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                c.initWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                c.initWithSpriteFrameName(a)
            }
            this._updateChildrenDisplayedRGBA();
            this._updateContentSizeWithTextureSize(this._backGroundBoxRenderer.getContentSize());
            this._backGroundBoxRendererAdaptDirty = !0;
            this._findLayout()
        }
    },
    loadTextureBackGroundSelected: function (a, b) {
        if (a) {
            b = b || ccui.Widget.LOCAL_TEXTURE;
            this._backGroundSelectedFileName = a;
            this._backGroundSelectedTexType = b;
            var c = this._backGroundSelectedBoxRenderer;
            c._textureLoaded || c.addEventListener("load", function () {
                this.loadTextureBackGroundSelected(this._backGroundSelectedFileName, this._backGroundSelectedTexType)
            }, this);
            switch (this._backGroundSelectedTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                c.initWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                c.initWithSpriteFrameName(a)
            }
            this._updateChildrenDisplayedRGBA();
            this._backGroundSelectedBoxRendererAdaptDirty = !0;
            this._findLayout()
        }
    },
    loadTextureFrontCross: function (a, b) {
        if (a) {
            b = b || ccui.Widget.LOCAL_TEXTURE;
            this._frontCrossFileName = a;
            this._frontCrossTexType = b;
            var c = this._frontCrossRenderer;
            c._textureLoaded || c.addEventListener("load", function () {
                this.loadTextureFrontCross(this._frontCrossFileName, this._frontCrossTexType)
            }, this);
            switch (this._frontCrossTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                c.initWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                c.initWithSpriteFrameName(a)
            }
            this._updateChildrenDisplayedRGBA();
            this._frontCrossRendererAdaptDirty = !0;
            this._findLayout()
        }
    },
    loadTextureBackGroundDisabled: function (a, b) {
        if (a) {
            b = b || ccui.Widget.LOCAL_TEXTURE;
            this._backGroundDisabledFileName = a;
            this._backGroundDisabledTexType = b;
            var c = this._backGroundBoxDisabledRenderer;
            c._textureLoaded || c.addEventListener("load", function () {
                this.loadTextureBackGroundDisabled(this._backGroundDisabledFileName, this._backGroundDisabledTexType)
            }, this);
            switch (this._backGroundDisabledTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                c.initWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                c.initWithSpriteFrameName(a)
            }
            this._updateChildrenDisplayedRGBA();
            this._backGroundBoxDisabledRendererAdaptDirty = !0;
            this._findLayout()
        }
    },
    loadTextureFrontCrossDisabled: function (a, b) {
        if (a) {
            b = b || ccui.Widget.LOCAL_TEXTURE;
            this._frontCrossDisabledFileName = a;
            this._frontCrossDisabledTexType = b;
            var c = this._frontCrossDisabledRenderer;
            c._textureLoaded || c.addEventListener("load", function () {
                    this.loadTextureFrontCrossDisabled(this._frontCrossDisabledFileName, this._frontCrossDisabledTexType)
                },
                this);
            switch (this._frontCrossDisabledTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                c.initWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                c.initWithSpriteFrameName(a)
            }
            this._updateChildrenDisplayedRGBA();
            this._frontCrossDisabledRendererAdaptDirty = !0;
            this._findLayout()
        }
    },
    _onPressStateChangedToNormal: function () {
        this._backGroundBoxRenderer.setVisible(!0);
        this._backGroundSelectedBoxRenderer.setVisible(!1);
        this._backGroundBoxDisabledRenderer.setVisible(!1);
        this._frontCrossDisabledRenderer.setVisible(!1);
        this._backGroundBoxRenderer.setScale(this._backgroundTextureScaleX,
            this._backgroundTextureScaleY);
        this._frontCrossRenderer.setScale(this._backgroundTextureScaleX, this._backgroundTextureScaleY);
        this._isSelected && (this._frontCrossRenderer.setVisible(!0), this._frontCrossRendererAdaptDirty = !0)
    },
    _onPressStateChangedToPressed: function () {
        this._backGroundSelectedFileName ? (this._backGroundBoxRenderer.setVisible(!1), this._backGroundSelectedBoxRenderer.setVisible(!0), this._backGroundBoxDisabledRenderer.setVisible(!1), this._frontCrossDisabledRenderer.setVisible(!1)) : (this._backGroundBoxRenderer.setScale(this._backgroundTextureScaleX +
            this._zoomScale, this._backgroundTextureScaleY + this._zoomScale), this._frontCrossRenderer.setScale(this._backgroundTextureScaleX + this._zoomScale, this._backgroundTextureScaleY + this._zoomScale))
    },
    _onPressStateChangedToDisabled: function () {
        this._backGroundDisabledFileName && this._frontCrossDisabledFileName && (this._backGroundBoxRenderer.setVisible(!1), this._backGroundBoxDisabledRenderer.setVisible(!0));
        this._backGroundSelectedBoxRenderer.setVisible(!1);
        this._frontCrossRenderer.setVisible(!1);
        this._backGroundBoxRenderer.setScale(this._backgroundTextureScaleX,
            this._backgroundTextureScaleY);
        this._frontCrossRenderer.setScale(this._backgroundTextureScaleX, this._backgroundTextureScaleY);
        this._isSelected && (this._frontCrossDisabledRenderer.setVisible(!0), this._frontCrossDisabledRendererAdaptDirty = !0)
    },
    setZoomScale: function (a) {
        this._zoomScale = a
    },
    getZoomScale: function () {
        return this._zoomScale
    },
    setSelectedState: function (a) {
        this.setSelected(a)
    },
    setSelected: function (a) {
        a !== this._isSelected && (this._isSelected = a, this._frontCrossRenderer.setVisible(this._isSelected))
    },
    getSelectedState: function () {
        return this.isSelected()
    },
    isSelected: function () {
        return this._isSelected
    },
    _selectedEvent: function () {
        this._checkBoxEventSelector && (this._checkBoxEventListener ? this._checkBoxEventSelector.call(this._checkBoxEventListener, this, ccui.CheckBox.EVENT_SELECTED) : this._checkBoxEventSelector(this, ccui.CheckBox.EVENT_SELECTED))
    },
    _unSelectedEvent: function () {
        this._checkBoxEventSelector && (this._checkBoxEventListener ? this._checkBoxEventSelector.call(this._checkBoxEventListener, this, ccui.CheckBox.EVENT_UNSELECTED) :
            this._checkBoxEventSelector(this, ccui.CheckBox.EVENT_UNSELECTED))
    },
    _releaseUpEvent: function () {
        ccui.Widget.prototype._releaseUpEvent.call(this);
        this._isSelected ? (this.setSelected(!1), this._unSelectedEvent()) : (this.setSelected(!0), this._selectedEvent())
    },
    addEventListenerCheckBox: function (a, b) {
        this.addEventListener(a, b)
    },
    addEventListener: function (a, b) {
        this._checkBoxEventSelector = a;
        this._checkBoxEventListener = b
    },
    getVirtualRendererSize: function () {
        return this._backGroundBoxRenderer.getContentSize()
    },
    _onSizeChanged: function () {
        ccui.Widget.prototype._onSizeChanged.call(this);
        this._frontCrossDisabledRendererAdaptDirty = this._backGroundBoxDisabledRendererAdaptDirty = this._frontCrossRendererAdaptDirty = this._backGroundSelectedBoxRendererAdaptDirty = this._backGroundBoxRendererAdaptDirty = !0
    },
    getVirtualRenderer: function () {
        return this._backGroundBoxRenderer
    },
    _backGroundTextureScaleChangedWithSize: function () {
        var a = this._backGroundBoxRenderer,
            b = this._contentSize;
        if (this._ignoreSize) a.setScale(1), this._backgroundTextureScaleX = this._backgroundTextureScaleY = 1;
        else {
            var c = a.getContentSize();
            if (0 >= c.width || 0 >= c.height) {
                a.setScale(1);
                this._backgroundTextureScaleX = this._backgroundTextureScaleY = 1;
                return
            }
            var d = b.width / c.width,
                c = b.height / c.height;
            this._backgroundTextureScaleX = d;
            this._backgroundTextureScaleY = c;
            a.setScaleX(d);
            a.setScaleY(c)
        }
        a.setPosition(0.5 * b.width, 0.5 * b.height)
    },
    _backGroundSelectedTextureScaleChangedWithSize: function () {
        var a = this._backGroundSelectedBoxRenderer,
            b = this._contentSize;
        if (this._ignoreSize) a.setScale(1);
        else {
            var c = a.getContentSize();
            if (0 >= c.width || 0 >= c.height) {
                a.setScale(1);
                return
            }
            var d = b.height / c.height;
            a.setScaleX(b.width / c.width);
            a.setScaleY(d)
        }
        a.setPosition(0.5 * b.width, 0.5 * b.height)
    },
    _frontCrossTextureScaleChangedWithSize: function () {
        var a = this._frontCrossRenderer,
            b = this._contentSize;
        if (this._ignoreSize) a.setScale(1);
        else {
            var c = a.getContentSize();
            if (0 >= c.width || 0 >= c.height) {
                a.setScale(1);
                return
            }
            var d = b.height / c.height;
            a.setScaleX(b.width / c.width);
            a.setScaleY(d)
        }
        a.setPosition(0.5 * b.width, 0.5 * b.height)
    },
    _backGroundDisabledTextureScaleChangedWithSize: function () {
        var a =
            this._backGroundBoxDisabledRenderer,
            b = this._contentSize;
        if (this._ignoreSize) a.setScale(1);
        else {
            var c = a.getContentSize();
            if (0 >= c.width || 0 >= c.height) {
                a.setScale(1);
                return
            }
            var d = b.height / c.height;
            a.setScaleX(b.width / c.width);
            a.setScaleY(d)
        }
        a.setPosition(0.5 * b.width, 0.5 * b.height)
    },
    _frontCrossDisabledTextureScaleChangedWithSize: function () {
        var a = this._frontCrossDisabledRenderer,
            b = this._contentSize;
        if (this._ignoreSize) a.setScale(1);
        else {
            var c = a.getContentSize();
            if (0 >= c.width || 0 >= c.height) {
                a.setScale(1);
                return
            }
            var d = b.height / c.height;
            a.setScaleX(b.width / c.width);
            a.setScaleY(d)
        }
        a.setPosition(0.5 * b.width, 0.5 * b.height)
    },
    getDescription: function () {
        return "CheckBox"
    },
    _createCloneInstance: function () {
        return new ccui.CheckBox
    },
    _copySpecialProperties: function (a) {
        a instanceof ccui.CheckBox && (this.loadTextureBackGround(a._backGroundFileName, a._backGroundTexType), this.loadTextureBackGroundSelected(a._backGroundSelectedFileName, a._backGroundSelectedTexType), this.loadTextureFrontCross(a._frontCrossFileName, a._frontCrossTexType),
            this.loadTextureBackGroundDisabled(a._backGroundDisabledFileName, a._backGroundDisabledTexType), this.loadTextureFrontCrossDisabled(a._frontCrossDisabledFileName, a._frontCrossDisabledTexType), this.setSelected(a._isSelected), this._checkBoxEventListener = a._checkBoxEventListener, this._checkBoxEventSelector = a._checkBoxEventSelector, this._ccEventCallback = a._ccEventCallback, this._zoomScale = a._zoomScale, this._backgroundTextureScaleX = a._backgroundTextureScaleX, this._backgroundTextureScaleY = a._backgroundTextureScaleY)
    },
    _adaptRenderers: function () {
        this._backGroundBoxRendererAdaptDirty && (this._backGroundTextureScaleChangedWithSize(), this._backGroundBoxRendererAdaptDirty = !1);
        this._backGroundSelectedBoxRendererAdaptDirty && (this._backGroundSelectedTextureScaleChangedWithSize(), this._backGroundSelectedBoxRendererAdaptDirty = !1);
        this._frontCrossRendererAdaptDirty && (this._frontCrossTextureScaleChangedWithSize(), this._frontCrossRendererAdaptDirty = !1);
        this._backGroundBoxDisabledRendererAdaptDirty && (this._backGroundDisabledTextureScaleChangedWithSize(),
            this._backGroundBoxDisabledRendererAdaptDirty = !1);
        this._frontCrossDisabledRendererAdaptDirty && (this._frontCrossDisabledTextureScaleChangedWithSize(), this._frontCrossDisabledRendererAdaptDirty = !1)
    }
});
_p = ccui.CheckBox.prototype;
cc.defineGetterSetter(_p, "selected", _p.isSelected, _p.setSelected);
_p = null;
ccui.CheckBox.create = function (a, b, c, d, f, g) {
    return new ccui.CheckBox(a, b, c, d, f, g)
};
ccui.CheckBox.EVENT_SELECTED = 0;
ccui.CheckBox.EVENT_UNSELECTED = 1;
ccui.CheckBox.BOX_RENDERER_ZORDER = -1;
ccui.CheckBox.BOX_SELECTED_RENDERER_ZORDER = -1;
ccui.CheckBox.BOX_DISABLED_RENDERER_ZORDER = -1;
ccui.CheckBox.FRONT_CROSS_RENDERER_ZORDER = -1;
ccui.CheckBox.FRONT_CROSS_DISABLED_RENDERER_ZORDER = -1;
ccui.ImageView = ccui.Widget.extend({
    _scale9Enabled: !1,
    _prevIgnoreSize: !0,
    _capInsets: null,
    _imageRenderer: null,
    _textureFile: "",
    _imageTexType: ccui.Widget.LOCAL_TEXTURE,
    _imageTextureSize: null,
    _className: "ImageView",
    _imageRendererAdaptDirty: !0,
    ctor: function (a, b) {
        this._capInsets = cc.rect(0, 0, 0, 0);
        this._imageTextureSize = cc.size(this._capInsets.width, this._capInsets.height);
        ccui.Widget.prototype.ctor.call(this);
        a ? this.loadTexture(a, void 0 === b ? 0 : b) : this._imageTexType = ccui.Widget.LOCAL_TEXTURE
    },
    _initRenderer: function () {
        this._imageRenderer =
            new ccui.Scale9Sprite;
        this._imageRenderer.setRenderingType(ccui.Scale9Sprite.RenderingType.SIMPLE);
        this.addProtectedChild(this._imageRenderer, ccui.ImageView.RENDERER_ZORDER, -1)
    },
    loadTexture: function (a, b) {
        if (a && !(this._textureFile == a && this._imageTexType == b)) {
            var c = this;
            b = b || ccui.Widget.LOCAL_TEXTURE;
            this._textureFile = a;
            this._imageTexType = b;
            var d = c._imageRenderer;
            switch (c._imageTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                c._scale9Enabled ? (d.initWithFile(a), d.setCapInsets(c._capInsets)) : d.initWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                c._scale9Enabled ? (d.initWithSpriteFrameName(a), d.setCapInsets(c._capInsets)) : d.initWithSpriteFrameName(a)
            }
            if (!d._textureLoaded) {
                var f = function () {
                    d.removeEventListener("load", f);
                    !c._ignoreSize && cc.sizeEqualToSize(c._customSize, cc.size(0, 0)) && (c._customSize = c._imageRenderer.getContentSize());
                    c._imageTextureSize = d.getContentSize();
                    c._updateChildrenDisplayedRGBA();
                    c._updateContentSizeWithTextureSize(c._imageTextureSize)
                };
                d.addEventListener("load", f)
            }!this._ignoreSize &&
                cc.sizeEqualToSize(this._customSize, cc.size(0, 0)) && (this._customSize = this._imageRenderer.getContentSize());
            c._imageTextureSize = d.getContentSize();
            this._updateChildrenDisplayedRGBA();
            c._updateContentSizeWithTextureSize(c._imageTextureSize);
            c._imageRendererAdaptDirty = !0;
            c._findLayout()
        }
    },
    setTextureRect: function () {
        cc.warn("ImageView.setTextureRect  is deprecated!")
    },
    setScale9Enabled: function (a) {
        this._scale9Enabled !== a && ((this._scale9Enabled = a) ? this._imageRenderer.setRenderingType(ccui.Scale9Sprite.RenderingType.SLICED) :
            this._imageRenderer.setRenderingType(ccui.Scale9Sprite.RenderingType.SIMPLE), this._scale9Enabled ? (a = this._ignoreSize, this.ignoreContentAdaptWithSize(!1), this._prevIgnoreSize = a) : this.ignoreContentAdaptWithSize(this._prevIgnoreSize), this.setCapInsets(this._capInsets), this._imageRendererAdaptDirty = !0)
    },
    isScale9Enabled: function () {
        return this._scale9Enabled
    },
    ignoreContentAdaptWithSize: function (a) {
        if (!this._scale9Enabled || this._scale9Enabled && !a) ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this,
            a), this._prevIgnoreSize = a
    },
    setCapInsets: function (a) {
        if (a) {
            var b = this._capInsets;
            b.x = a.x;
            b.y = a.y;
            b.width = a.width;
            b.height = a.height;
            this._scale9Enabled && this._imageRenderer.setCapInsets(a)
        }
    },
    getCapInsets: function () {
        return cc.rect(this._capInsets)
    },
    _onSizeChanged: function () {
        ccui.Widget.prototype._onSizeChanged.call(this);
        this._imageRendererAdaptDirty = !0
    },
    _adaptRenderers: function () {
        this._imageRendererAdaptDirty && (this._imageTextureScaleChangedWithSize(), this._imageRendererAdaptDirty = !1)
    },
    getVirtualRendererSize: function () {
        return cc.size(this._imageTextureSize)
    },
    getVirtualRenderer: function () {
        return this._imageRenderer
    },
    _imageTextureScaleChangedWithSize: function () {
        this._imageRenderer.setContentSize(this._contentSize);
        this._imageRenderer.setPosition(this._contentSize.width / 2, this._contentSize.height / 2)
    },
    getDescription: function () {
        return "ImageView"
    },
    _createCloneInstance: function () {
        return new ccui.ImageView
    },
    _copySpecialProperties: function (a) {
        a instanceof ccui.ImageView && (this._prevIgnoreSize = a._prevIgnoreSize, this._capInsets = a._capInsets, this.loadTexture(a._textureFile,
            a._imageTexType), this.setScale9Enabled(a._scale9Enabled))
    },
    setContentSize: function (a, b) {
        b && (a = cc.size(a, b));
        ccui.Widget.prototype.setContentSize.call(this, a);
        this._imageRenderer.setContentSize(a)
    }
});
ccui.ImageView.create = function (a, b) {
    return new ccui.ImageView(a, b)
};
ccui.ImageView.RENDERER_ZORDER = -1;
ccui.LoadingBar = ccui.Widget.extend({
    _direction: null,
    _percent: 100,
    _totalLength: 0,
    _barRenderer: null,
    _renderBarTexType: ccui.Widget.LOCAL_TEXTURE,
    _barRendererTextureSize: null,
    _scale9Enabled: !1,
    _prevIgnoreSize: !0,
    _capInsets: null,
    _textureFile: "",
    _isTextureLoaded: !1,
    _className: "LoadingBar",
    _barRendererAdaptDirty: !0,
    ctor: function (a, b) {
        this._direction = ccui.LoadingBar.TYPE_LEFT;
        this._barRendererTextureSize = cc.size(0, 0);
        this._capInsets = cc.rect(0, 0, 0, 0);
        ccui.Widget.prototype.ctor.call(this);
        void 0 !== a && this.loadTexture(a);
        void 0 !== b && this.setPercent(b)
    },
    _initRenderer: function () {
        this._barRenderer = new cc.Sprite;
        this.addProtectedChild(this._barRenderer, ccui.LoadingBar.RENDERER_ZORDER, -1);
        this._barRenderer.setAnchorPoint(0, 0.5)
    },
    setDirection: function (a) {
        if (this._direction !== a) switch (this._direction = a, this._direction) {
        case ccui.LoadingBar.TYPE_LEFT:
            this._barRenderer.setAnchorPoint(0, 0.5);
            this._barRenderer.setPosition(0, 0.5 * this._contentSize.height);
            this._scale9Enabled || this._barRenderer.setFlippedX(!1);
            break;
        case ccui.LoadingBar.TYPE_RIGHT:
            this._barRenderer.setAnchorPoint(1,
                0.5), this._barRenderer.setPosition(this._totalLength, 0.5 * this._contentSize.height), this._scale9Enabled || this._barRenderer.setFlippedX(!0)
        }
    },
    getDirection: function () {
        return this._direction
    },
    loadTexture: function (a, b) {
        if (a) {
            this._renderBarTexType = b = b || ccui.Widget.LOCAL_TEXTURE;
            this._textureFile = a;
            var c = this._barRenderer,
                d = this;
            c._textureLoaded || c.addEventListener("load", function () {
                d.loadTexture(d._textureFile, d._renderBarTexType);
                d._setPercent(d._percent)
            });
            switch (this._renderBarTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                c.initWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                c.initWithSpriteFrameName(a)
            }
            var f = c.getContentSize();
            this._barRendererTextureSize.width = f.width;
            this._barRendererTextureSize.height = f.height;
            switch (this._direction) {
            case ccui.LoadingBar.TYPE_LEFT:
                c.setAnchorPoint(0, 0.5);
                this._scale9Enabled || c.setFlippedX(!1);
                break;
            case ccui.LoadingBar.TYPE_RIGHT:
                c.setAnchorPoint(1, 0.5), this._scale9Enabled || c.setFlippedX(!0)
            }
            this._scale9Enabled && c.setCapInsets(this._capInsets);
            this._updateChildrenDisplayedRGBA();
            this._barRendererScaleChangedWithSize();
            this._updateContentSizeWithTextureSize(this._barRendererTextureSize);
            this._barRendererAdaptDirty = !0;
            this._findLayout()
        }
    },
    setScale9Enabled: function (a) {
        this._scale9Enabled !== a && (this._scale9Enabled = a, this.removeProtectedChild(this._barRenderer), this._barRenderer = this._scale9Enabled ? new ccui.Scale9Sprite : new cc.Sprite, this.loadTexture(this._textureFile, this._renderBarTexType), this.addProtectedChild(this._barRenderer, ccui.LoadingBar.RENDERER_ZORDER, -1), this._scale9Enabled ? (a = this._ignoreSize, this.ignoreContentAdaptWithSize(!1),
            this._prevIgnoreSize = a) : this.ignoreContentAdaptWithSize(this._prevIgnoreSize), this.setCapInsets(this._capInsets), this.setPercent(this._percent), this._barRendererAdaptDirty = !0)
    },
    isScale9Enabled: function () {
        return this._scale9Enabled
    },
    setCapInsets: function (a) {
        if (a) {
            var b = this._capInsets;
            b.x = a.x;
            b.y = a.y;
            b.width = a.width;
            b.height = a.height;
            this._scale9Enabled && this._barRenderer.setCapInsets(a)
        }
    },
    getCapInsets: function () {
        return cc.rect(this._capInsets)
    },
    setPercent: function (a) {
        100 < a && (a = 100);
        0 > a && (a = 0);
        a !==
            this._percent && (this._percent = a, this._setPercent(a))
    },
    _setPercent: function () {
        var a, b, c, d;
        0 >= this._totalLength || (a = this._percent / 100, this._scale9Enabled ? this._setScale9Scale() : (c = this._barRenderer, d = this._barRendererTextureSize, b = c.getTextureRect(), b.width = d.width * a, c.setTextureRect(cc.rect(b.x, b.y, d.width * a, d.height), c._rectRotated)))
    },
    setContentSize: function (a, b) {
        ccui.Widget.prototype.setContentSize.call(this, a, b);
        this._totalLength = void 0 === b ? a.width : a
    },
    getPercent: function () {
        return this._percent
    },
    _onSizeChanged: function () {
        ccui.Widget.prototype._onSizeChanged.call(this);
        this._barRendererAdaptDirty = !0
    },
    _adaptRenderers: function () {
        this._barRendererAdaptDirty && (this._barRendererScaleChangedWithSize(), this._barRendererAdaptDirty = !1)
    },
    ignoreContentAdaptWithSize: function (a) {
        if (!this._scale9Enabled || this._scale9Enabled && !a) ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this, a), this._prevIgnoreSize = a
    },
    getVirtualRendererSize: function () {
        return cc.size(this._barRendererTextureSize)
    },
    getVirtualRenderer: function () {
        return this._barRenderer
    },
    _barRendererScaleChangedWithSize: function () {
        var a = this._barRenderer,
            b = this._contentSize;
        if (this._unifySize) this._totalLength = this._contentSize.width, this.setPercent(this._percent);
        else if (this._ignoreSize) this._scale9Enabled || (this._totalLength = this._barRendererTextureSize.width, a.setScale(1));
        else if (this._totalLength = b.width, this._scale9Enabled) this._setScale9Scale(), a.setScale(1);
        else {
            var c = this._barRendererTextureSize;
            if (0 >= c.width || 0 >= c.height) {
                a.setScale(1);
                return
            }
            var d = b.height / c.height;
            a.setScaleX(b.width /
                c.width);
            a.setScaleY(d)
        }
        switch (this._direction) {
        case ccui.LoadingBar.TYPE_LEFT:
            a.setPosition(0, 0.5 * b.height);
            break;
        case ccui.LoadingBar.TYPE_RIGHT:
            a.setPosition(this._totalLength, 0.5 * b.height)
        }
    },
    _setScale9Scale: function () {
        this._barRenderer.setPreferredSize(cc.size(this._percent / 100 * this._totalLength, this._contentSize.height))
    },
    getDescription: function () {
        return "LoadingBar"
    },
    _createCloneInstance: function () {
        return new ccui.LoadingBar
    },
    _copySpecialProperties: function (a) {
        a instanceof ccui.LoadingBar && (this._prevIgnoreSize =
            a._prevIgnoreSize, this.setScale9Enabled(a._scale9Enabled), this.loadTexture(a._textureFile, a._renderBarTexType), this.setCapInsets(a._capInsets), this.setPercent(a._percent), this.setDirection(a._direction))
    }
});
_p = ccui.LoadingBar.prototype;
cc.defineGetterSetter(_p, "direction", _p.getDirection, _p.setDirection);
cc.defineGetterSetter(_p, "percent", _p.getPercent, _p.setPercent);
_p = null;
ccui.LoadingBar.create = function (a, b) {
    return new ccui.LoadingBar(a, b)
};
ccui.LoadingBar.TYPE_LEFT = 0;
ccui.LoadingBar.TYPE_RIGHT = 1;
ccui.LoadingBar.RENDERER_ZORDER = -1;
ccui.Slider = ccui.Widget.extend({
    _barRenderer: null,
    _progressBarRenderer: null,
    _barTextureSize: null,
    _progressBarTextureSize: null,
    _slidBallNormalRenderer: null,
    _slidBallPressedRenderer: null,
    _slidBallDisabledRenderer: null,
    _slidBallRenderer: null,
    _barLength: 0,
    _percent: 0,
    _scale9Enabled: !1,
    _prevIgnoreSize: !0,
    _textureFile: "",
    _progressBarTextureFile: "",
    _slidBallNormalTextureFile: "",
    _slidBallPressedTextureFile: "",
    _slidBallDisabledTextureFile: "",
    _capInsetsBarRenderer: null,
    _capInsetsProgressBarRenderer: null,
    _sliderEventListener: null,
    _sliderEventSelector: null,
    _barTexType: ccui.Widget.LOCAL_TEXTURE,
    _progressBarTexType: ccui.Widget.LOCAL_TEXTURE,
    _ballNTexType: ccui.Widget.LOCAL_TEXTURE,
    _ballPTexType: ccui.Widget.LOCAL_TEXTURE,
    _ballDTexType: ccui.Widget.LOCAL_TEXTURE,
    _isTextureLoaded: !1,
    _className: "Slider",
    _barRendererAdaptDirty: !0,
    _progressBarRendererDirty: !0,
    _unifySize: !1,
    _zoomScale: 0.1,
    _sliderBallNormalTextureScaleX: 1,
    _sliderBallNormalTextureScaleY: 1,
    ctor: function (a, b, c) {
        this._barTextureSize = cc.size(0, 0);
        this._progressBarTextureSize =
            cc.size(0, 0);
        this._capInsetsBarRenderer = cc.rect(0, 0, 0, 0);
        this._capInsetsProgressBarRenderer = cc.rect(0, 0, 0, 0);
        ccui.Widget.prototype.ctor.call(this);
        c = c || 0;
        this.setTouchEnabled(!0);
        a && this.loadBarTexture(a, c);
        b && this.loadSlidBallTextures(b, c)
    },
    _initRenderer: function () {
        this._barRenderer = new cc.Sprite;
        this._progressBarRenderer = new cc.Sprite;
        this._progressBarRenderer.setAnchorPoint(0, 0.5);
        this.addProtectedChild(this._barRenderer, ccui.Slider.BASEBAR_RENDERER_ZORDER, -1);
        this.addProtectedChild(this._progressBarRenderer,
            ccui.Slider.PROGRESSBAR_RENDERER_ZORDER, -1);
        this._slidBallNormalRenderer = new cc.Sprite;
        this._slidBallPressedRenderer = new cc.Sprite;
        this._slidBallPressedRenderer.setVisible(!1);
        this._slidBallDisabledRenderer = new cc.Sprite;
        this._slidBallDisabledRenderer.setVisible(!1);
        this._slidBallRenderer = new cc.Node;
        this._slidBallRenderer.addChild(this._slidBallNormalRenderer);
        this._slidBallRenderer.addChild(this._slidBallPressedRenderer);
        this._slidBallRenderer.addChild(this._slidBallDisabledRenderer);
        this._slidBallRenderer.setCascadeColorEnabled(!0);
        this._slidBallRenderer.setCascadeOpacityEnabled(!0);
        this.addProtectedChild(this._slidBallRenderer, ccui.Slider.BALL_RENDERER_ZORDER, -1)
    },
    loadBarTexture: function (a, b) {
        if (a) {
            b = b || ccui.Widget.LOCAL_TEXTURE;
            this._textureFile = a;
            this._barTexType = b;
            var c = this._barRenderer,
                d = this;
            c._textureLoaded || c.addEventListener("load", function () {
                d.loadBarTexture(d._textureFile, d._barTexType)
            });
            switch (this._barTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                c.initWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                c.initWithSpriteFrameName(a)
            }
            this._updateChildrenDisplayedRGBA();
            this._progressBarRendererDirty = this._barRendererAdaptDirty = !0;
            this._updateContentSizeWithTextureSize(this._barRenderer.getContentSize());
            this._findLayout();
            this._barTextureSize = this._barRenderer.getContentSize()
        }
    },
    loadProgressBarTexture: function (a, b) {
        if (a) {
            b = b || ccui.Widget.LOCAL_TEXTURE;
            this._progressBarTextureFile = a;
            this._progressBarTexType = b;
            var c = this._progressBarRenderer,
                d = this;
            c._textureLoaded || c.addEventListener("load", function () {
                d.loadProgressBarTexture(d._progressBarTextureFile, d._progressBarTexType)
            });
            switch (this._progressBarTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                c.initWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                c.initWithSpriteFrameName(a)
            }
            this._updateChildrenDisplayedRGBA();
            this._progressBarRenderer.setAnchorPoint(cc.p(0, 0.5));
            c = this._progressBarRenderer.getContentSize();
            this._progressBarTextureSize = {
                width: c.width,
                height: c.height
            };
            this._progressBarRendererDirty = !0;
            this._findLayout()
        }
    },
    setScale9Enabled: function (a) {
        this._scale9Enabled !== a && (this._scale9Enabled = a, this.removeProtectedChild(this._barRenderer,
            !0), this.removeProtectedChild(this._progressBarRenderer, !0), this._progressBarRenderer = this._barRenderer = null, this._scale9Enabled ? (this._barRenderer = new ccui.Scale9Sprite, this._progressBarRenderer = new ccui.Scale9Sprite) : (this._barRenderer = new cc.Sprite, this._progressBarRenderer = new cc.Sprite), this.loadBarTexture(this._textureFile, this._barTexType), this.loadProgressBarTexture(this._progressBarTextureFile, this._progressBarTexType), this.addProtectedChild(this._barRenderer, ccui.Slider.BASEBAR_RENDERER_ZORDER,
            -1), this.addProtectedChild(this._progressBarRenderer, ccui.Slider.PROGRESSBAR_RENDERER_ZORDER, -1), this._scale9Enabled ? (a = this._ignoreSize, this.ignoreContentAdaptWithSize(!1), this._prevIgnoreSize = a) : this.ignoreContentAdaptWithSize(this._prevIgnoreSize), this.setCapInsetsBarRenderer(this._capInsetsBarRenderer), this.setCapInsetProgressBarRenderer(this._capInsetsProgressBarRenderer), this._progressBarRendererDirty = this._barRendererAdaptDirty = !0)
    },
    isScale9Enabled: function () {
        return this._scale9Enabled
    },
    ignoreContentAdaptWithSize: function (a) {
        if (!this._scale9Enabled ||
            this._scale9Enabled && !a) ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this, a), this._prevIgnoreSize = a
    },
    setCapInsets: function (a) {
        this.setCapInsetsBarRenderer(a);
        this.setCapInsetProgressBarRenderer(a)
    },
    setCapInsetsBarRenderer: function (a) {
        if (a) {
            var b = this._capInsetsBarRenderer;
            b.x = a.x;
            b.y = a.y;
            b.width = a.width;
            b.height = a.height;
            this._scale9Enabled && this._barRenderer.setCapInsets(a)
        }
    },
    getCapInsetsBarRenderer: function () {
        return cc.rect(this._capInsetsBarRenderer)
    },
    setCapInsetProgressBarRenderer: function (a) {
        if (a) {
            var b =
                this._capInsetsProgressBarRenderer;
            b.x = a.x;
            b.y = a.y;
            b.width = a.width;
            b.height = a.height;
            this._scale9Enabled && this._progressBarRenderer.setCapInsets(a)
        }
    },
    getCapInsetsProgressBarRenderer: function () {
        return cc.rect(this._capInsetsProgressBarRenderer)
    },
    loadSlidBallTextures: function (a, b, c, d) {
        this.loadSlidBallTextureNormal(a, d);
        this.loadSlidBallTexturePressed(b, d);
        this.loadSlidBallTextureDisabled(c, d)
    },
    loadSlidBallTextureNormal: function (a, b) {
        if (a) {
            b = b || ccui.Widget.LOCAL_TEXTURE;
            this._slidBallNormalTextureFile =
                a;
            this._ballNTexType = b;
            var c = this;
            this._slidBallNormalRenderer._textureLoaded || this._slidBallNormalRenderer.addEventListener("load", function () {
                c.loadSlidBallTextureNormal(c._slidBallNormalTextureFile, c._ballNTexType)
            });
            switch (this._ballNTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                this._slidBallNormalRenderer.initWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                this._slidBallNormalRenderer.initWithSpriteFrameName(a)
            }
            this._updateChildrenDisplayedRGBA();
            this._findLayout()
        }
    },
    loadSlidBallTexturePressed: function (a,
        b) {
        if (a) {
            b = b || ccui.Widget.LOCAL_TEXTURE;
            this._slidBallPressedTextureFile = a;
            this._ballPTexType = b;
            var c = this;
            this._slidBallPressedRenderer._textureLoaded || this._slidBallPressedRenderer.addEventListener("load", function () {
                c.loadSlidBallTexturePressed(c._slidBallPressedTextureFile, c._ballPTexType)
            });
            switch (this._ballPTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                this._slidBallPressedRenderer.initWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                this._slidBallPressedRenderer.initWithSpriteFrameName(a)
            }
            this._updateChildrenDisplayedRGBA();
            this._findLayout()
        }
    },
    loadSlidBallTextureDisabled: function (a, b) {
        if (a) {
            b = b || ccui.Widget.LOCAL_TEXTURE;
            this._slidBallDisabledTextureFile = a;
            this._ballDTexType = b;
            var c = this;
            this._slidBallDisabledRenderer._textureLoaded || this._slidBallDisabledRenderer.addEventListener("load", function () {
                c.loadSlidBallTextureDisabled(c._slidBallDisabledTextureFile, c._ballDTexType)
            });
            switch (this._ballDTexType) {
            case ccui.Widget.LOCAL_TEXTURE:
                this._slidBallDisabledRenderer.initWithFile(a);
                break;
            case ccui.Widget.PLIST_TEXTURE:
                this._slidBallDisabledRenderer.initWithSpriteFrameName(a)
            }
            this._updateChildrenDisplayedRGBA();
            this._findLayout()
        }
    },
    setPercent: function (a) {
        100 < a && (a = 100);
        0 > a && (a = 0);
        this._percent = a;
        a = this._barLength * (a / 100);
        this._slidBallRenderer.setPosition(a, this._contentSize.height / 2);
        if (this._scale9Enabled) this._progressBarRenderer.setPreferredSize(cc.size(a, this._contentSize.height));
        else {
            var b = this._progressBarRenderer,
                c = b.getTextureRect();
            b.setTextureRect(cc.rect(c.x, c.y, a / b._scaleX, c.height), b.isTextureRectRotated())
        }
    },
    hitTest: function (a) {
        a = this._slidBallNormalRenderer.convertToNodeSpace(a);
        var b = this._slidBallNormalRenderer.getContentSize(),
            b = cc.rect(0, 0, b.width, b.height);
        return a.x >= b.x && a.x <= b.x + b.width && a.y >= b.y && a.y <= b.y + b.height
    },
    onTouchBegan: function (a, b) {
        var c = ccui.Widget.prototype.onTouchBegan.call(this, a, b);
        if (this._hit) {
            var d = this.convertToNodeSpace(this._touchBeganPosition);
            this.setPercent(this._getPercentWithBallPos(d.x));
            this._percentChangedEvent()
        }
        return c
    },
    onTouchMoved: function (a, b) {
        var c = a.getLocation(),
            c = this.convertToNodeSpace(c);
        this.setPercent(this._getPercentWithBallPos(c.x));
        this._percentChangedEvent()
    },
    onTouchEnded: function (a,
        b) {
        ccui.Widget.prototype.onTouchEnded.call(this, a, b)
    },
    onTouchCancelled: function (a, b) {
        ccui.Widget.prototype.onTouchCancelled.call(this, a, b)
    },
    _getPercentWithBallPos: function (a) {
        return 100 * (a / this._barLength)
    },
    addEventListenerSlider: function (a, b) {
        this.addEventListener(a, b)
    },
    addEventListener: function (a, b) {
        this._sliderEventSelector = a;
        this._sliderEventListener = b
    },
    _percentChangedEvent: function () {
        this._sliderEventSelector && (this._sliderEventListener ? this._sliderEventSelector.call(this._sliderEventListener,
            this, ccui.Slider.EVENT_PERCENT_CHANGED) : this._sliderEventSelector(this, ccui.Slider.EVENT_PERCENT_CHANGED));
        this._ccEventCallback && this._ccEventCallback(this, ccui.Slider.EVENT_PERCENT_CHANGED)
    },
    getPercent: function () {
        return this._percent
    },
    _onSizeChanged: function () {
        ccui.Widget.prototype._onSizeChanged.call(this);
        this._progressBarRendererDirty = this._barRendererAdaptDirty = !0
    },
    _adaptRenderers: function () {
        this._barRendererAdaptDirty && (this._barRendererScaleChangedWithSize(), this._barRendererAdaptDirty = !1);
        this._progressBarRendererDirty && (this._progressBarRendererScaleChangedWithSize(), this._progressBarRendererDirty = !1)
    },
    getVirtualRendererSize: function () {
        return this._barRenderer.getContentSize()
    },
    getVirtualRenderer: function () {
        return this._barRenderer
    },
    _barRendererScaleChangedWithSize: function () {
        if (this._unifySize) this._barLength = this._contentSize.width, this._barRenderer.setPreferredSize(this._contentSize);
        else if (this._ignoreSize) this._barRenderer.setScale(1), this._barLength = this._contentSize.width;
        else if (this._barLength = this._contentSize.width, this._scale9Enabled) this._barRenderer.setPreferredSize(this._contentSize), this._barRenderer.setScale(1);
        else {
            var a = this._barTextureSize;
            if (0 >= a.width || 0 >= a.height) this._barRenderer.setScale(1);
            else {
                var b = this._contentSize.height / a.height;
                this._barRenderer.setScaleX(this._contentSize.width / a.width);
                this._barRenderer.setScaleY(b)
            }
        }
        this._barRenderer.setPosition(this._contentSize.width / 2, this._contentSize.height / 2);
        this.setPercent(this._percent)
    },
    _progressBarRendererScaleChangedWithSize: function () {
        if (this._unifySize) this._progressBarRenderer.setPreferredSize(this._contentSize);
        else if (this._ignoreSize) {
            if (!this._scale9Enabled) {
                var a = this._progressBarTextureSize,
                    b = this._contentSize.width / a.width,
                    a = this._contentSize.height / a.height;
                this._progressBarRenderer.setScaleX(b);
                this._progressBarRenderer.setScaleY(a)
            }
        } else if (this._scale9Enabled) this._progressBarRenderer.setPreferredSize(this._contentSize), this._progressBarRenderer.setScale(1);
        else {
            a = this._progressBarTextureSize;
            if (0 >= a.width || 0 >= a.height) {
                this._progressBarRenderer.setScale(1);
                return
            }
            b = this._contentSize.width / a.width;
            a = this._contentSize.height / a.height;
            this._progressBarRenderer.setScaleX(b);
            this._progressBarRenderer.setScaleY(a)
        }
        this._progressBarRenderer.setPosition(0, this._contentSize.height / 2);
        this.setPercent(this._percent)
    },
    _onPressStateChangedToNormal: function () {
        this._slidBallNormalRenderer.setVisible(!0);
        this._slidBallPressedRenderer.setVisible(!1);
        this._slidBallDisabledRenderer.setVisible(!1);
        this._slidBallNormalRenderer.setScale(this._sliderBallNormalTextureScaleX, this._sliderBallNormalTextureScaleY);
        cc._renderType ===
            cc.game.RENDER_TYPE_WEBGL && (this._slidBallNormalRenderer._renderCmd._shaderProgram = this._getNormalGLProgram())
    },
    _onPressStateChangedToPressed: function () {
        this._slidBallPressedTextureFile ? (this._slidBallNormalRenderer.setVisible(!1), this._slidBallPressedRenderer.setVisible(!0), this._slidBallDisabledRenderer.setVisible(!1)) : this._slidBallNormalRenderer.setScale(this._sliderBallNormalTextureScaleX + this._zoomScale, this._sliderBallNormalTextureScaleY + this._zoomScale);
        cc._renderType === cc.game.RENDER_TYPE_WEBGL &&
            (this._slidBallNormalRenderer._renderCmd._shaderProgram = this._getNormalGLProgram())
    },
    _onPressStateChangedToDisabled: function () {
        this._slidBallDisabledTextureFile ? (this._slidBallNormalRenderer.setVisible(!1), this._slidBallDisabledRenderer.setVisible(!0)) : (this._slidBallNormalRenderer.setVisible(!0), cc._renderType === cc.game.RENDER_TYPE_WEBGL && (this._slidBallNormalRenderer._renderCmd._shaderProgram = this._getGrayGLProgram()));
        this._slidBallNormalRenderer.setScale(this._sliderBallNormalTextureScaleX, this._sliderBallNormalTextureScaleY);
        this._slidBallPressedRenderer.setVisible(!1)
    },
    setZoomScale: function (a) {
        this._zoomScale = a
    },
    getZoomScale: function () {
        return this._zoomScale
    },
    getSlidBallNormalRenderer: function () {
        return this._slidBallNormalRenderer
    },
    getSlidBallPressedRenderer: function () {
        return this._slidBallPressedRenderer
    },
    getSlidBallDisabledRenderer: function () {
        return this._slidBallDisabledRenderer
    },
    getSlidBallRenderer: function () {
        return this._slidBallRenderer
    },
    getDescription: function () {
        return "Slider"
    },
    _createCloneInstance: function () {
        return new ccui.Slider
    },
    _copySpecialProperties: function (a) {
        this._prevIgnoreSize = a._prevIgnoreSize;
        this.setScale9Enabled(a._scale9Enabled);
        this.loadBarTexture(a._textureFile, a._barTexType);
        this.loadProgressBarTexture(a._progressBarTextureFile, a._progressBarTexType);
        this.loadSlidBallTextureNormal(a._slidBallNormalTextureFile, a._ballNTexType);
        this.loadSlidBallTexturePressed(a._slidBallPressedTextureFile, a._ballPTexType);
        this.loadSlidBallTextureDisabled(a._slidBallDisabledTextureFile, a._ballDTexType);
        this.setPercent(a.getPercent());
        this._sliderEventListener = a._sliderEventListener;
        this._sliderEventSelector = a._sliderEventSelector;
        this._zoomScale = a._zoomScale;
        this._ccEventCallback = a._ccEventCallback
    }
});
_p = ccui.Slider.prototype;
cc.defineGetterSetter(_p, "percent", _p.getPercent, _p.setPercent);
_p = null;
ccui.Slider.create = function (a, b, c) {
    return new ccui.Slider(a, b, c)
};
ccui.Slider.EVENT_PERCENT_CHANGED = 0;
ccui.Slider.BASEBAR_RENDERER_ZORDER = -3;
ccui.Slider.PROGRESSBAR_RENDERER_ZORDER = -2;
ccui.Slider.BALL_RENDERER_ZORDER = -1;
ccui.Text = ccui.Widget.extend({
    _touchScaleChangeEnabled: !1,
    _normalScaleValueX: 1,
    _normalScaleValueY: 1,
    _fontName: "Arial",
    _fontSize: 16,
    _onSelectedScaleOffset: 0.5,
    _labelRenderer: null,
    _textAreaSize: null,
    _textVerticalAlignment: 0,
    _textHorizontalAlignment: 0,
    _className: "Text",
    _type: null,
    _labelRendererAdaptDirty: !0,
    ctor: function (a, b, c) {
        this._type = ccui.Text.Type.SYSTEM;
        this._textAreaSize = cc.size(0, 0);
        ccui.Widget.prototype.ctor.call(this);
        void 0 !== c ? (this.setFontName(b), this.setFontSize(c), this.setString(a)) :
            this.setFontName(this._fontName)
    },
    _initRenderer: function () {
        this._labelRenderer = new cc.LabelTTF;
        this.addProtectedChild(this._labelRenderer, ccui.Text.RENDERER_ZORDER, -1)
    },
    setText: function (a) {
        cc.log("Please use the setString");
        this.setString(a)
    },
    setString: function (a) {
        a !== this._labelRenderer.getString() && (this._setString(a), this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize()))
    },
    _setString: function (a) {
        this._labelRenderer.setString(a);
        this._labelRendererAdaptDirty = !0
    },
    getStringValue: function () {
        cc.log("Please use the getString");
        return this._labelRenderer.getString()
    },
    getString: function () {
        return this._labelRenderer.getString()
    },
    getStringLength: function () {
        return this._labelRenderer.getStringLength()
    },
    setFontSize: function (a) {
        this._setFontSize(a);
        this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize())
    },
    _setFontSize: function (a) {
        this._labelRenderer.setFontSize(a);
        this._fontSize = a;
        this._labelRendererAdaptDirty = !0
    },
    getFontSize: function () {
        return this._fontSize
    },
    setFontName: function (a) {
        this._setFontName(a);
        this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize())
    },
    _setFontName: function (a) {
        this._fontName = a;
        this._labelRenderer.setFontName(a);
        this._labelRendererAdaptDirty = !0
    },
    _updateUITextContentSize: function () {
        this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize())
    },
    getFontName: function () {
        return this._fontName
    },
    _setFont: function (a) {
        var b = cc.LabelTTF._fontStyleRE.exec(a);
        b && (this._fontSize = parseInt(b[1]), this._fontName = b[2], this._labelRenderer._setFont(a), this._labelScaleChangedWithSize())
    },
    _getFont: function () {
        return this._labelRenderer._getFont()
    },
    getType: function () {
        return this._type
    },
    setTextAreaSize: function (a) {
        this._setTextAreaSize(a);
        this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize())
    },
    _setTextAreaSize: function (a) {
        this._labelRenderer.setDimensions(a);
        this._ignoreSize || (this._customSize = a);
        this._labelRendererAdaptDirty = !0
    },
    getTextAreaSize: function () {
        return this._labelRenderer.getDimensions()
    },
    setTextHorizontalAlignment: function (a) {
        this._setTextHorizontalAlignment(a);
        this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize())
    },
    _setTextHorizontalAlignment: function (a) {
        this._labelRenderer.setHorizontalAlignment(a);
        this._labelRendererAdaptDirty = !0
    },
    getTextHorizontalAlignment: function () {
        return this._labelRenderer.getHorizontalAlignment()
    },
    setTextVerticalAlignment: function (a) {
        this._setTextVerticalAlignment(a);
        this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize())
    },
    _setTextVerticalAlignment: function (a) {
        this._labelRenderer.setVerticalAlignment(a);
        this._labelRendererAdaptDirty = !0
    },
    getTextVerticalAlignment: function () {
        return this._labelRenderer.getVerticalAlignment()
    },
    setTouchScaleChangeEnabled: function (a) {
        this._touchScaleChangeEnabled = a
    },
    isTouchScaleChangeEnabled: function () {
        return this._touchScaleChangeEnabled
    },
    _onPressStateChangedToNormal: function () {
        this._touchScaleChangeEnabled && (this._labelRenderer.setScaleX(this._normalScaleValueX), this._labelRenderer.setScaleY(this._normalScaleValueY))
    },
    _onPressStateChangedToPressed: function () {
        this._touchScaleChangeEnabled && (this._labelRenderer.setScaleX(this._normalScaleValueX + this._onSelectedScaleOffset), this._labelRenderer.setScaleY(this._normalScaleValueY +
            this._onSelectedScaleOffset))
    },
    _onPressStateChangedToDisabled: function () {},
    _onSizeChanged: function () {
        ccui.Widget.prototype._onSizeChanged.call(this);
        this._labelRendererAdaptDirty = !0
    },
    _adaptRenderers: function () {
        this._labelRendererAdaptDirty && (this._labelScaleChangedWithSize(), this._labelRendererAdaptDirty = !1)
    },
    getVirtualRendererSize: function () {
        return this._labelRenderer.getContentSize()
    },
    getVirtualRenderer: function () {
        return this._labelRenderer
    },
    getAutoRenderSize: function () {
        var a = this._labelRenderer.getContentSize();
        this._ignoreSize || (this._labelRenderer.setDimensions(0, 0), a = this._labelRenderer.getContentSize(), this._labelRenderer.setDimensions(this._contentSize.width, this._contentSize.height));
        return a
    },
    _labelScaleChangedWithSize: function () {
        var a = this._contentSize;
        if (this._ignoreSize) this._labelRenderer.setScale(1), this._normalScaleValueX = this._normalScaleValueY = 1;
        else {
            this._labelRenderer.setDimensions(cc.size(a.width, a.height));
            var b = this._labelRenderer.getContentSize();
            if (0 >= b.width || 0 >= b.height) {
                this._labelRenderer.setScale(1);
                return
            }
            var c = a.width / b.width,
                b = a.height / b.height;
            this._labelRenderer.setScaleX(c);
            this._labelRenderer.setScaleY(b);
            this._normalScaleValueX = c;
            this._normalScaleValueY = b
        }
        this._labelRenderer.setPosition(a.width / 2, a.height / 2)
    },
    getDescription: function () {
        return "Label"
    },
    enableShadow: function (a, b, c) {
        this._labelRenderer.enableShadow(a, b, c)
    },
    enableOutline: function (a, b) {
        this._labelRenderer.enableStroke(a, b)
    },
    enableGlow: function (a) {
        this._type === ccui.Text.Type.TTF && this._labelRenderer.enableGlow(a)
    },
    disableEffect: function () {
        this._labelRenderer.disableEffect &&
            this._labelRenderer.disableEffect()
    },
    _createCloneInstance: function () {
        return new ccui.Text
    },
    _copySpecialProperties: function (a) {
        a instanceof ccui.Text && (this.setFontName(a._fontName), this.setFontSize(a.getFontSize()), this.setString(a.getString()), this.setTouchScaleChangeEnabled(a.touchScaleEnabled), this.setTextAreaSize(a._textAreaSize), this.setTextHorizontalAlignment(a._labelRenderer.getHorizontalAlignment()), this.setTextVerticalAlignment(a._labelRenderer.getVerticalAlignment()), this.setContentSize(a.getContentSize()),
            this.setTextColor(a.getTextColor()))
    },
    _setBoundingWidth: function (a) {
        this._textAreaSize.width = a;
        this._labelRenderer._setBoundingWidth(a);
        this._labelScaleChangedWithSize()
    },
    _setBoundingHeight: function (a) {
        this._textAreaSize.height = a;
        this._labelRenderer._setBoundingHeight(a);
        this._labelScaleChangedWithSize()
    },
    _getBoundingWidth: function () {
        return this._textAreaSize.width
    },
    _getBoundingHeight: function () {
        return this._textAreaSize.height
    },
    _changePosition: function () {
        this._adaptRenderers()
    },
    setColor: function (a) {
        cc.ProtectedNode.prototype.setColor.call(this,
            a);
        this._labelRenderer.setColor(a)
    },
    setTextColor: function (a) {
        this._labelRenderer.setFontFillColor(a)
    },
    getTextColor: function () {
        return this._labelRenderer._getFillStyle()
    }
});
_p = ccui.Text.prototype;
cc.defineGetterSetter(_p, "boundingWidth", _p._getBoundingWidth, _p._setBoundingWidth);
cc.defineGetterSetter(_p, "boundingHeight", _p._getBoundingHeight, _p._setBoundingHeight);
cc.defineGetterSetter(_p, "string", _p.getString, _p.setString);
cc.defineGetterSetter(_p, "stringLength", _p.getStringLength);
cc.defineGetterSetter(_p, "font", _p._getFont, _p._setFont);
cc.defineGetterSetter(_p, "fontSize", _p.getFontSize, _p.setFontSize);
cc.defineGetterSetter(_p, "fontName", _p.getFontName, _p.setFontName);
cc.defineGetterSetter(_p, "textAlign", _p.getTextHorizontalAlignment, _p.setTextHorizontalAlignment);
cc.defineGetterSetter(_p, "verticalAlign", _p.getTextVerticalAlignment, _p.setTextVerticalAlignment);
_p = null;
ccui.Label = ccui.Text.create = function (a, b, c) {
    return new ccui.Text(a, b, c)
};
ccui.Text.RENDERER_ZORDER = -1;
ccui.Text.Type = {
    SYSTEM: 0,
    TTF: 1
};
ccui.TextAtlas = ccui.Widget.extend({
    _labelAtlasRenderer: null,
    _stringValue: "",
    _charMapFileName: "",
    _itemWidth: 0,
    _itemHeight: 0,
    _startCharMap: "",
    _className: "TextAtlas",
    _labelAtlasRendererAdaptDirty: null,
    ctor: function (a, b, c, d, f) {
        ccui.Widget.prototype.ctor.call(this);
        void 0 !== f && this.setProperty(a, b, c, d, f)
    },
    _initRenderer: function () {
        this._labelAtlasRenderer = new cc.LabelAtlas;
        this._labelAtlasRenderer.setAnchorPoint(cc.p(0.5, 0.5));
        this.addProtectedChild(this._labelAtlasRenderer, ccui.TextAtlas.RENDERER_ZORDER,
            -1);
        this._labelAtlasRenderer.addEventListener("load", function () {
            this._updateContentSizeWithTextureSize(this._labelAtlasRenderer.getContentSize());
            this._findLayout()
        }, this)
    },
    setProperty: function (a, b, c, d, f) {
        this._stringValue = a;
        this._charMapFileName = b;
        this._itemWidth = c;
        this._itemHeight = d;
        this._startCharMap = f;
        this._labelAtlasRenderer.initWithString(a, this._charMapFileName, this._itemWidth, this._itemHeight, this._startCharMap[0]);
        this._updateContentSizeWithTextureSize(this._labelAtlasRenderer.getContentSize());
        this._labelAtlasRendererAdaptDirty = !0
    },
    setString: function (a) {
        a !== this._labelAtlasRenderer.getString() && (this._stringValue = a, this._labelAtlasRenderer.setString(a), this._updateContentSizeWithTextureSize(this._labelAtlasRenderer.getContentSize()), this._labelAtlasRendererAdaptDirty = !0)
    },
    setStringValue: function (a) {
        cc.log("Please use the setString");
        this.setString(a)
    },
    getStringValue: function () {
        cc.log("Please use the getString");
        return this.getString()
    },
    getString: function () {
        return this._labelAtlasRenderer.getString()
    },
    getStringLength: function () {
        return this._labelAtlasRenderer.getStringLength()
    },
    _onSizeChanged: function () {
        ccui.Widget.prototype._onSizeChanged.call(this);
        this._labelAtlasRendererAdaptDirty = !0
    },
    _adaptRenderers: function () {
        this._labelAtlasRendererAdaptDirty && (this._labelAtlasScaleChangedWithSize(), this._labelAtlasRendererAdaptDirty = !1)
    },
    getVirtualRendererSize: function () {
        return this._labelAtlasRenderer.getContentSize()
    },
    getVirtualRenderer: function () {
        return this._labelAtlasRenderer
    },
    _labelAtlasScaleChangedWithSize: function () {
        var a =
            this._labelAtlasRenderer;
        if (this._ignoreSize) a.setScale(1);
        else {
            var b = a.getContentSize();
            if (0 >= b.width || 0 >= b.height) {
                a.setScale(1);
                return
            }
            a.setScaleX(this._contentSize.width / b.width);
            a.setScaleY(this._contentSize.height / b.height)
        }
        a.setPosition(this._contentSize.width / 2, this._contentSize.height / 2)
    },
    getDescription: function () {
        return "LabelAtlas"
    },
    _copySpecialProperties: function (a) {
        a && this.setProperty(a._stringValue, a._charMapFileName, a._itemWidth, a._itemHeight, a._startCharMap)
    },
    _createCloneInstance: function () {
        return new ccui.TextAtlas
    }
});
_p = ccui.TextAtlas.prototype;
cc.defineGetterSetter(_p, "string", _p.getString, _p.setString);
_p = null;
ccui.TextAtlas.create = function (a, b, c, d, f) {
    return new ccui.TextAtlas(a, b, c, d, f)
};
ccui.TextAtlas.RENDERER_ZORDER = -1;
ccui.LabelBMFont = ccui.TextBMFont = ccui.Widget.extend({
    _labelBMFontRenderer: null,
    _fntFileHasInit: !1,
    _fntFileName: "",
    _stringValue: "",
    _className: "TextBMFont",
    _labelBMFontRendererAdaptDirty: !0,
    ctor: function (a, b) {
        ccui.Widget.prototype.ctor.call(this);
        this._loader = new cc.Sprite.LoadManager;
        void 0 !== b && (this.setFntFile(b), this.setString(a))
    },
    _initRenderer: function () {
        this._labelBMFontRenderer = new cc.LabelBMFont;
        this.addProtectedChild(this._labelBMFontRenderer, ccui.TextBMFont.RENDERER_ZORDER, -1)
    },
    setFntFile: function (a) {
        if (a) {
            this._fntFileName =
                a;
            this._fntFileHasInit = !0;
            this._labelBMFontRenderer.initWithString(this._stringValue, a);
            this._updateContentSizeWithTextureSize(this._labelBMFontRenderer.getContentSize());
            this._labelBMFontRendererAdaptDirty = !0;
            var b = this;
            a = b._labelBMFontRenderer;
            a._textureLoaded || a.addEventListener("load", function () {
                b.setFntFile(b._fntFileName)
            })
        }
    },
    setText: function (a) {
        cc.log("Please use the setString");
        this.setString(a)
    },
    setString: function (a) {
        this._loader.clear();
        this._labelBMFontRenderer._textureLoaded ? a !== this._labelBMFontRenderer.getString() &&
            (this._stringValue = a, this._labelBMFontRenderer.setString(a), this._fntFileHasInit && (this._updateContentSizeWithTextureSize(this._labelBMFontRenderer.getContentSize()), this._labelBMFontRendererAdaptDirty = !0)) : this._loader.add(this._labelBMFontRenderer, function () {
                this.setString(a)
            }, this)
    },
    getString: function () {
        return this._stringValue
    },
    getStringLength: function () {
        return this._labelBMFontRenderer.getStringLength()
    },
    _onSizeChanged: function () {
        ccui.Widget.prototype._onSizeChanged.call(this);
        this._labelBMFontRendererAdaptDirty = !0
    },
    _adaptRenderers: function () {
        this._labelBMFontRendererAdaptDirty && (this._labelBMFontScaleChangedWithSize(), this._labelBMFontRendererAdaptDirty = !1)
    },
    getVirtualRendererSize: function () {
        return this._labelBMFontRenderer.getContentSize()
    },
    getVirtualRenderer: function () {
        return this._labelBMFontRenderer
    },
    _labelBMFontScaleChangedWithSize: function () {
        var a = this._labelBMFontRenderer;
        if (this._ignoreSize) a.setScale(1);
        else {
            var b = a.getContentSize();
            if (0 >= b.width || 0 >= b.height) {
                a.setScale(1);
                return
            }
            a.setScaleX(this._contentSize.width /
                b.width);
            a.setScaleY(this._contentSize.height / b.height)
        }
        a.setPosition(this._contentSize.width / 2, this._contentSize.height / 2)
    },
    getDescription: function () {
        return "TextBMFont"
    },
    _createCloneInstance: function () {
        return new ccui.TextBMFont
    },
    _copySpecialProperties: function (a) {
        this.setFntFile(a._fntFileName);
        this.setString(a._stringValue)
    }
});
_p = ccui.TextBMFont.prototype;
cc.defineGetterSetter(_p, "string", _p.getString, _p.setString);
_p = null;
ccui.TextBMFont.create = function (a, b) {
    return new ccui.TextBMFont(a, b)
};
ccui.TextBMFont.RENDERER_ZORDER = -1;
ccui._TextFieldRenderer = cc.TextFieldTTF.extend({
    _maxLengthEnabled: !1,
    _maxLength: 0,
    _passwordEnabled: !1,
    _passwordStyleText: "",
    _attachWithIME: !1,
    _detachWithIME: !1,
    _insertText: !1,
    _deleteBackward: !1,
    _className: "_TextFieldRenderer",
    ctor: function () {
        cc.TextFieldTTF.prototype.ctor.call(this);
        this._maxLengthEnabled = !1;
        this._maxLength = 0;
        this._passwordEnabled = !1;
        this._passwordStyleText = "*";
        this._deleteBackward = this._insertText = this._detachWithIME = this._attachWithIME = !1
    },
    onEnter: function () {
        cc.TextFieldTTF.prototype.onEnter.call(this);
        cc.TextFieldTTF.prototype.setDelegate.call(this, this)
    },
    onTextFieldAttachWithIME: function (a) {
        this.setAttachWithIME(!0);
        return !1
    },
    onTextFieldInsertText: function (a, b, c) {
        if (1 === c && "\n" === b) return !1;
        this.setInsertText(!0);
        return this._maxLengthEnabled && cc.TextFieldTTF.prototype.getCharCount.call(this) >= this._maxLength
    },
    onTextFieldDeleteBackward: function (a, b, c) {
        this.setDeleteBackward(!0);
        return !1
    },
    onTextFieldDetachWithIME: function (a) {
        this.setDetachWithIME(!0);
        return !1
    },
    insertText: function (a, b) {
        "\n" !== a &&
            this._maxLengthEnabled && this.getString().length >= this._maxLength ? this._passwordEnabled && this.setPasswordText(this.getString()) : (cc.TextFieldTTF.prototype.insertText.call(this, a, b), this._passwordEnabled && 0 < cc.TextFieldTTF.prototype.getCharCount.call(this) && this.setPasswordText(this.getString()))
    },
    deleteBackward: function () {
        cc.TextFieldTTF.prototype.deleteBackward.call(this);
        0 < cc.TextFieldTTF.prototype.getCharCount.call(this) && this._passwordEnabled && this.setPasswordText(this._inputText)
    },
    openIME: function () {
        cc.TextFieldTTF.prototype.attachWithIME.call(this)
    },
    closeIME: function () {
        cc.TextFieldTTF.prototype.detachWithIME.call(this)
    },
    setMaxLengthEnabled: function (a) {
        this._maxLengthEnabled = a
    },
    isMaxLengthEnabled: function () {
        return this._maxLengthEnabled
    },
    setMaxLength: function (a) {
        this._maxLength = a
    },
    getMaxLength: function () {
        return this._maxLength
    },
    getCharCount: function () {
        return cc.TextFieldTTF.prototype.getCharCount.call(this)
    },
    setPasswordEnabled: function (a) {
        this._passwordEnabled = a
    },
    isPasswordEnabled: function () {
        return this._passwordEnabled
    },
    setPasswordStyleText: function (a) {
        if (!(1 <
                a.length)) {
            var b = a.charCodeAt(0);
            33 > b || 126 < b || (this._passwordStyleText = a)
        }
    },
    setPasswordText: function (a) {
        var b = "",
            c = a.length;
        a = c;
        this._maxLengthEnabled && c > this._maxLength && (a = this._maxLength);
        for (c = 0; c < a; ++c) b += this._passwordStyleText;
        cc.LabelTTF.prototype.setString.call(this, b)
    },
    setAttachWithIME: function (a) {
        this._attachWithIME = a
    },
    getAttachWithIME: function () {
        return this._attachWithIME
    },
    setDetachWithIME: function (a) {
        this._detachWithIME = a
    },
    getDetachWithIME: function () {
        return this._detachWithIME
    },
    setInsertText: function (a) {
        this._insertText =
            a
    },
    getInsertText: function () {
        return this._insertText
    },
    setDeleteBackward: function (a) {
        this._deleteBackward = a
    },
    getDeleteBackward: function () {
        return this._deleteBackward
    },
    onDraw: function (a) {
        return !1
    }
});
ccui._TextFieldRenderer.create = function (a, b, c) {
    var d = new ccui._TextFieldRenderer;
    return d && d.initWithString("", b, c) ? (a && d.setPlaceHolder(a), d) : null
};
ccui.TextField = ccui.Widget.extend({
    _textFieldRenderer: null,
    _touchWidth: 0,
    _touchHeight: 0,
    _useTouchArea: !1,
    _textFieldEventListener: null,
    _textFieldEventSelector: null,
    _passwordStyleText: "",
    _textFieldRendererAdaptDirty: !0,
    _fontName: "",
    _fontSize: 12,
    _ccEventCallback: null,
    ctor: function (a, b, c) {
        ccui.Widget.prototype.ctor.call(this);
        this.setTouchEnabled(!0);
        b && this.setFontName(b);
        c && this.setFontSize(c);
        a && this.setPlaceHolder(a)
    },
    onEnter: function () {
        ccui.Widget.prototype.onEnter.call(this);
        this.scheduleUpdate()
    },
    _initRenderer: function () {
        this._textFieldRenderer = ccui._TextFieldRenderer.create("input words here", "Thonburi", 20);
        this.addProtectedChild(this._textFieldRenderer, ccui.TextField.RENDERER_ZORDER, -1)
    },
    setTouchSize: function (a) {
        this._touchWidth = a.width;
        this._touchHeight = a.height
    },
    setTouchAreaEnabled: function (a) {
        this._useTouchArea = a
    },
    hitTest: function (a) {
        if (this._useTouchArea) {
            a = this.convertToNodeSpace(a);
            var b = cc.rect(-this._touchWidth * this._anchorPoint.x, -this._touchHeight * this._anchorPoint.y, this._touchWidth,
                this._touchHeight);
            return a.x >= b.x && a.x <= b.x + b.width && a.y >= b.y && a.y <= b.y + b.height
        }
        return ccui.Widget.prototype.hitTest.call(this, a)
    },
    getTouchSize: function () {
        return cc.size(this._touchWidth, this._touchHeight)
    },
    setText: function (a) {
        cc.log("Please use the setString");
        this.setString(a)
    },
    setString: function (a) {
        null != a && (a = String(a), this.isMaxLengthEnabled() && (a = a.substr(0, this.getMaxLength())), this.isPasswordEnabled() ? (this._textFieldRenderer.setPasswordText(a), this._textFieldRenderer.setString(""), this._textFieldRenderer.insertText(a,
            a.length)) : this._textFieldRenderer.setString(a), this._textFieldRendererAdaptDirty = !0, this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize()))
    },
    setPlaceHolder: function (a) {
        this._textFieldRenderer.setPlaceHolder(a);
        this._textFieldRendererAdaptDirty = !0;
        this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize())
    },
    getPlaceHolder: function () {
        return this._textFieldRenderer.getPlaceHolder()
    },
    getPlaceHolderColor: function () {
        return this._textFieldRenderer.getPlaceHolderColor()
    },
    setPlaceHolderColor: function (a) {
        this._textFieldRenderer.setColorSpaceHolder(a)
    },
    setTextColor: function (a) {
        this._textFieldRenderer.setTextColor(a)
    },
    setFontSize: function (a) {
        this._textFieldRenderer.setFontSize(a);
        this._fontSize = a;
        this._textFieldRendererAdaptDirty = !0;
        this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize())
    },
    getFontSize: function () {
        return this._fontSize
    },
    setFontName: function (a) {
        this._textFieldRenderer.setFontName(a);
        this._fontName = a;
        this._textFieldRendererAdaptDirty = !0;
        this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize())
    },
    getFontName: function () {
        return this._fontName
    },
    didNotSelectSelf: function () {
        this._textFieldRenderer.detachWithIME()
    },
    getStringValue: function () {
        cc.log("Please use the getString");
        return this.getString()
    },
    getString: function () {
        return this._textFieldRenderer.getString()
    },
    getStringLength: function () {
        return this._textFieldRenderer.getStringLength()
    },
    onTouchBegan: function (a, b) {
        var c = this,
            d = ccui.Widget.prototype.onTouchBegan.call(c,
                a, b);
        c._hit ? setTimeout(function () {
            c._textFieldRenderer.attachWithIME()
        }, 0) : setTimeout(function () {
            c._textFieldRenderer.detachWithIME()
        }, 0);
        return d
    },
    setMaxLengthEnabled: function (a) {
        this._textFieldRenderer.setMaxLengthEnabled(a)
    },
    isMaxLengthEnabled: function () {
        return this._textFieldRenderer.isMaxLengthEnabled()
    },
    setMaxLength: function (a) {
        this._textFieldRenderer.setMaxLength(a);
        this.setString(this.getString())
    },
    getMaxLength: function () {
        return this._textFieldRenderer.getMaxLength()
    },
    setPasswordEnabled: function (a) {
        this._textFieldRenderer.setPasswordEnabled(a)
    },
    isPasswordEnabled: function () {
        return this._textFieldRenderer.isPasswordEnabled()
    },
    setPasswordStyleText: function (a) {
        this._textFieldRenderer.setPasswordStyleText(a);
        this._passwordStyleText = a;
        this.setString(this.getString())
    },
    getPasswordStyleText: function () {
        return this._passwordStyleText
    },
    update: function (a) {
        this.getDetachWithIME() && (this._detachWithIMEEvent(), this.setDetachWithIME(!1));
        this.getAttachWithIME() && (this._attachWithIMEEvent(), this.setAttachWithIME(!1));
        this.getInsertText() && (this._textFieldRendererAdaptDirty = !0, this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize()), this._insertTextEvent(), this.setInsertText(!1));
        this.getDeleteBackward() && (this._textFieldRendererAdaptDirty = !0, this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize()), this._deleteBackwardEvent(), this.setDeleteBackward(!1))
    },
    getAttachWithIME: function () {
        return this._textFieldRenderer.getAttachWithIME()
    },
    setAttachWithIME: function (a) {
        this._textFieldRenderer.setAttachWithIME(a)
    },
    getDetachWithIME: function () {
        return this._textFieldRenderer.getDetachWithIME()
    },
    setDetachWithIME: function (a) {
        this._textFieldRenderer.setDetachWithIME(a)
    },
    getInsertText: function () {
        return this._textFieldRenderer.getInsertText()
    },
    setInsertText: function (a) {
        this._textFieldRenderer.setInsertText(a)
    },
    getDeleteBackward: function () {
        return this._textFieldRenderer.getDeleteBackward()
    },
    setDeleteBackward: function (a) {
        this._textFieldRenderer.setDeleteBackward(a)
    },
    _attachWithIMEEvent: function () {
        this._textFieldEventSelector && (this._textFieldEventListener ? this._textFieldEventSelector.call(this._textFieldEventListener,
            this, ccui.TextField.EVENT_ATTACH_WITH_IME) : this._textFieldEventSelector(this, ccui.TextField.EVENT_ATTACH_WITH_IME));
        this._ccEventCallback && this._ccEventCallback(this, ccui.TextField.EVENT_ATTACH_WITH_IME)
    },
    _detachWithIMEEvent: function () {
        this._textFieldEventSelector && (this._textFieldEventListener ? this._textFieldEventSelector.call(this._textFieldEventListener, this, ccui.TextField.EVENT_DETACH_WITH_IME) : this._textFieldEventSelector(this, ccui.TextField.EVENT_DETACH_WITH_IME));
        this._ccEventCallback && this._ccEventCallback(this,
            ccui.TextField.EVENT_DETACH_WITH_IME)
    },
    _insertTextEvent: function () {
        this._textFieldEventSelector && (this._textFieldEventListener ? this._textFieldEventSelector.call(this._textFieldEventListener, this, ccui.TextField.EVENT_INSERT_TEXT) : this._textFieldEventSelector(this, ccui.TextField.EVENT_INSERT_TEXT));
        this._ccEventCallback && this._ccEventCallback(this, ccui.TextField.EVENT_INSERT_TEXT)
    },
    _deleteBackwardEvent: function () {
        this._textFieldEventSelector && (this._textFieldEventListener ? this._textFieldEventSelector.call(this._textFieldEventListener,
            this, ccui.TextField.EVENT_DELETE_BACKWARD) : this._textFieldEventSelector(this, ccui.TextField.EVENT_DELETE_BACKWARD));
        this._ccEventCallback && this._ccEventCallback(this, ccui.TextField.EVENT_DELETE_BACKWARD)
    },
    addEventListenerTextField: function (a, b) {
        this.addEventListener(a, b)
    },
    addEventListener: function (a, b) {
        this._textFieldEventSelector = a;
        this._textFieldEventListener = b
    },
    _onSizeChanged: function () {
        ccui.Widget.prototype._onSizeChanged.call(this);
        this._textFieldRendererAdaptDirty = !0
    },
    _adaptRenderers: function () {
        this._textFieldRendererAdaptDirty &&
            (this._textfieldRendererScaleChangedWithSize(), this._textFieldRendererAdaptDirty = !1)
    },
    _textfieldRendererScaleChangedWithSize: function () {
        this._ignoreSize || this._textFieldRenderer.setDimensions(this._contentSize);
        this._textFieldRenderer.setPosition(this._contentSize.width / 2, this._contentSize.height / 2)
    },
    getAutoRenderSize: function () {
        var a = this._textFieldRenderer.getContentSize();
        this._ignoreSize || (this._textFieldRenderer.setDimensions(0, 0), a = this._textFieldRenderer.getContentSize(), this._textFieldRenderer.setDimensions(this._contentSize.width,
            this._contentSize.height));
        return a
    },
    getVirtualRendererSize: function () {
        return this._textFieldRenderer.getContentSize()
    },
    getVirtualRenderer: function () {
        return this._textFieldRenderer
    },
    getDescription: function () {
        return "TextField"
    },
    attachWithIME: function () {
        this._textFieldRenderer.attachWithIME()
    },
    _createCloneInstance: function () {
        return new ccui.TextField
    },
    _copySpecialProperties: function (a) {
        this.setString(a._textFieldRenderer.getString());
        this.setPlaceHolder(a.getString());
        this.setFontSize(a._textFieldRenderer.getFontSize());
        this.setFontName(a._textFieldRenderer.getFontName());
        this.setMaxLengthEnabled(a.isMaxLengthEnabled());
        this.setMaxLength(a.getMaxLength());
        this.setPasswordEnabled(a.isPasswordEnabled());
        this.setPasswordStyleText(a._passwordStyleText);
        this.setAttachWithIME(a.getAttachWithIME());
        this.setDetachWithIME(a.getDetachWithIME());
        this.setInsertText(a.getInsertText());
        this.setDeleteBackward(a.getDeleteBackward());
        this._ccEventCallback = a._ccEventCallback;
        this._textFieldEventListener = a._textFieldEventListener;
        this._textFieldEventSelector = a._textFieldEventSelector
    },
    setTextAreaSize: function (a) {
        this.setContentSize(a)
    },
    setTextHorizontalAlignment: function (a) {
        this._textFieldRenderer.setHorizontalAlignment(a)
    },
    setTextVerticalAlignment: function (a) {
        this._textFieldRenderer.setVerticalAlignment(a)
    },
    _setFont: function (a) {
        this._textFieldRenderer._setFont(a);
        this._textFieldRendererAdaptDirty = !0
    },
    _getFont: function () {
        return this._textFieldRenderer._getFont()
    },
    _changePosition: function () {
        this._adaptRenderers()
    }
});
ccui.TextField.create = function (a, b, c) {
    return new ccui.TextField(a, b, c)
};
_p = ccui.TextField.prototype;
cc.defineGetterSetter(_p, "string", _p.getString, _p.setString);
cc.defineGetterSetter(_p, "placeHolder", _p.getPlaceHolder, _p.setPlaceHolder);
cc.defineGetterSetter(_p, "font", _p._getFont, _p._setFont);
cc.defineGetterSetter(_p, "fontSize", _p.getFontSize, _p.setFontSize);
cc.defineGetterSetter(_p, "fontName", _p.getFontName, _p.setFontName);
cc.defineGetterSetter(_p, "maxLengthEnabled", _p.isMaxLengthEnabled, _p.setMaxLengthEnabled);
cc.defineGetterSetter(_p, "maxLength", _p.getMaxLength, _p.setMaxLength);
cc.defineGetterSetter(_p, "passwordEnabled", _p.isPasswordEnabled, _p.setPasswordEnabled);
_p = null;
ccui.TextField.EVENT_ATTACH_WITH_IME = 0;
ccui.TextField.EVENT_DETACH_WITH_IME = 1;
ccui.TextField.EVENT_INSERT_TEXT = 2;
ccui.TextField.EVENT_DELETE_BACKWARD = 3;
ccui.TextField.RENDERER_ZORDER = -1;
ccui.VideoPlayer = ccui.Widget.extend({
    _played: !1,
    _playing: !1,
    _stopped: !0,
    ctor: function (a) {
        ccui.Widget.prototype.ctor.call(this);
        this._EventList = {};
        a && this.setURL(a)
    },
    _createRenderCmd: function () {
        return new ccui.VideoPlayer.RenderCmd(this)
    },
    visit: function () {
        var a = this._renderCmd,
            b = cc.container,
            c = cc.eventManager;
        if (this._visible) b.appendChild(a._video), null === this._listener && (this._listener = cc.eventManager.addCustomListener(cc.game.EVENT_RESIZE, function () {
            a.resize()
        }));
        else {
            var d = !1;
            (d = "contains" in b ?
                b.contains(a._video) : b.compareDocumentPosition(a._video) % 16) && b.removeChild(a._video);
            c.removeListener(a._listener);
            a._listener = null
        }
        a.updateStatus();
        a.resize()
    },
    setURL: function (a) {
        this._renderCmd.updateURL(a)
    },
    getURL: function () {
        return this._renderCmd._url
    },
    play: function () {
        var a = this,
            b = this._renderCmd._video;
        if (b) {
            this._played = !0;
            b.pause();
            if (!1 !== this._stopped || !1 !== this._playing || !0 !== this._played) b.currentTime = 0;
            ccui.VideoPlayer._polyfill.autoplayAfterOperation ? setTimeout(function () {
                b.play();
                a._playing = !0;
                a._stopped = !1
            }, 20) : (b.play(), this._playing = !0, this._stopped = !1)
        }
    },
    pause: function () {
        var a = this._renderCmd._video;
        a && (!0 === this._playing && !1 === this._stopped) && (a.pause(), this._playing = !1)
    },
    resume: function () {
        !1 === this._stopped && (!1 === this._playing && !0 === this._played) && this.play()
    },
    stop: function () {
        var a = this,
            b = this._renderCmd._video;
        b && (b.pause(), b.currentTime = 0, this._playing = !1, this._stopped = !0);
        setTimeout(function () {
            a._dispatchEvent(ccui.VideoPlayer.EventType.STOPPED)
        }, 0)
    },
    seekTo: function (a) {
        var b =
            this._renderCmd._video;
        b && (b.currentTime = a, ccui.VideoPlayer._polyfill.autoplayAfterOperation && this.isPlaying() && setTimeout(function () {
            b.play()
        }, 20))
    },
    isPlaying: function () {
        ccui.VideoPlayer._polyfill.autoplayAfterOperation && this._playing && setTimeout(function () {
            video.play()
        }, 20);
        return this._playing
    },
    setKeepAspectRatioEnabled: function (a) {
        cc.log("On the web is always keep the aspect ratio")
    },
    isKeepAspectRatioEnabled: function () {
        return !1
    },
    setFullScreenEnabled: function (a) {
        var b = this._renderCmd._video;
        b &&
            (a ? cc.screen.requestFullScreen(b) : cc.screen.exitFullScreen(b))
    },
    isFullScreenEnabled: function () {
        cc.log("Can't know status")
    },
    setEventListener: function (a, b) {
        this._EventList[a] = b
    },
    removeEventListener: function (a) {
        this._EventList[a] = null
    },
    _dispatchEvent: function (a) {
        (a = this._EventList[a]) && a.call(this, this, this._renderCmd._video.src)
    },
    onPlayEvent: function () {
        var a = this._EventList[ccui.VideoPlayer.EventType.PLAYING];
        if (a)
            for (var b = 0; b < a.length; b++) a[b].call(this, this, this._renderCmd._video.src)
    },
    setContentSize: function (a,
        b) {
        ccui.Widget.prototype.setContentSize.call(this, a, b);
        void 0 === b && (b = a.height, a = a.width);
        this._renderCmd.changeSize(a, b)
    },
    cleanup: function () {
        this._renderCmd.removeDom();
        this.stopAllActions();
        this.unscheduleAllCallbacks()
    },
    onEnter: function () {
        ccui.Widget.prototype.onEnter.call(this);
        var a = ccui.VideoPlayer.elements; - 1 === a.indexOf(this) && a.push(this)
    },
    onExit: function () {
        ccui.Widget.prototype.onExit.call(this);
        var a = ccui.VideoPlayer.elements,
            b = a.indexOf(this); - 1 !== b && a.splice(b, 1)
    }
});
ccui.VideoPlayer.elements = [];
ccui.VideoPlayer.pauseElements = [];
cc.eventManager.addCustomListener(cc.game.EVENT_HIDE, function () {
    for (var a = ccui.VideoPlayer.elements, b, c = 0; c < a.length; c++) b = a[c], a[c]._playing && (b.pause(), ccui.VideoPlayer.pauseElements.push(b))
});
cc.eventManager.addCustomListener(cc.game.EVENT_SHOW, function () {
    for (var a = ccui.VideoPlayer.pauseElements, b = a.pop(); b;) b.play(), b = a.pop()
});
ccui.VideoPlayer.EventType = {
    PLAYING: "play",
    PAUSED: "pause",
    STOPPED: "stop",
    COMPLETED: "complete"
};
(function (a) {
    a._polyfill = {
        devicePixelRatio: !1,
        event: "canplay",
        canPlayType: []
    };
    var b = document.createElement("video");
    b.canPlayType("video/ogg") && (a._polyfill.canPlayType.push(".ogg"), a._polyfill.canPlayType.push(".ogv"));
    b.canPlayType("video/mp4") && a._polyfill.canPlayType.push(".mp4");
    b.canPlayType("video/webm") && a._polyfill.canPlayType.push(".webm");
    cc.sys.OS_IOS === cc.sys.os && (a._polyfill.devicePixelRatio = !0, a._polyfill.event = "progress");
    cc.sys.browserType === cc.sys.BROWSER_TYPE_FIREFOX && (a._polyfill.autoplayAfterOperation = !0);
    a = document.createElement("style");
    a.innerHTML = ".cocosVideo:-moz-full-screen{transform:matrix(1,0,0,1,0,0) !important;}.cocosVideo:full-screen{transform:matrix(1,0,0,1,0,0) !important;}.cocosVideo:-webkit-full-screen{transform:matrix(1,0,0,1,0,0) !important;}";
    document.head.appendChild(a)
})(ccui.VideoPlayer);
(function (a) {
    var b = null,
        b = cc._renderType === cc.game.RENDER_TYPE_WEBGL ? cc.Node.WebGLRenderCmd : cc.Node.CanvasRenderCmd;
    ccui.VideoPlayer.RenderCmd = function (a) {
        this._rootCtor(a);
        this._listener = null;
        this._url = "";
        this.initStyle()
    };
    b = ccui.VideoPlayer.RenderCmd.prototype = Object.create(b.prototype);
    b.constructor = ccui.VideoPlayer.RenderCmd;
    b.transform = function (a, b) {
        this.originTransform(a, b);
        this.updateMatrix(this._worldTransform, cc.view._scaleX, cc.view._scaleY)
    };
    b.updateStatus = function () {
        a.devicePixelRatio =
            cc.view.isRetinaEnabled();
        var b = cc.Node._dirtyFlags,
            d = this._dirtyFlag;
        d & b.transformDirty && (this.transform(this.getParentRenderCmd(), !0), this.updateMatrix(this._worldTransform, cc.view._scaleX, cc.view._scaleY), this._dirtyFlag ^= this._dirtyFlag & cc.Node._dirtyFlags.transformDirty);
        d & b.orderDirty && (this._dirtyFlag ^= this._dirtyFlag & b.orderDirty)
    };
    b.resize = function (a) {
        a = a || cc.view;
        var b = this._node,
            f = cc.eventManager;
        b._parent && b._visible ? this.updateMatrix(this._worldTransform, a._scaleX, a._scaleY) : (f.removeListener(this._listener),
            this._listener = null)
    };
    b.updateMatrix = function (b, d, f) {
        var g = this._node;
        if (a.devicePixelRatio) {
            var h = cc.view.getDevicePixelRatio();
            d /= h;
            f /= h
        }
        if (!1 !== this._loaded) {
            var m = cc.game.container.style,
                h = parseInt(m.paddingLeft),
                m = parseInt(m.paddingBottom),
                n = g._contentSize.width,
                p = g._contentSize.height;
            b = "matrix(" + b.a * d + "," + b.b + "," + b.c + "," + b.d * f + "," + (h + b.tx * d - n / 2 + n * g._scaleX / 2 * d) + "," + -(m + b.ty * f - p / 2 + p * g._scaleY / 2 * f) + ")";
            this._video.style.transform = b;
            this._video.style["-webkit-transform"] = b
        }
    };
    b.updateURL = function (b) {
        var d,
            f, g, h = this._node;
        if (this._url != b) {
            this._url = b;
            cc.loader.resPath && !/^http/.test(b) && (b = cc.path.join(cc.loader.resPath, b));
            d = !1;
            g = cc.container;
            (d = "contains" in g ? g.contains(this._video) : g.compareDocumentPosition(this._video) % 16) && g.removeChild(this._video);
            f = this._video = document.createElement("video");
            this.bindEvent();
            var m = this,
                n = function () {
                    !0 != m._loaded && (m._loaded = !0, m.changeSize(), m.setDirtyFlag(cc.Node._dirtyFlags.transformDirty), f.removeEventListener(a.event, n), f.currentTime = 0, f.style.visibility =
                        "visible", f.play(), h._played || (f.pause(), f.currentTime = 0))
                };
            f.addEventListener(a.event, n);
            f.preload = "metadata";
            f.style.visibility = "hidden";
            this._loaded = !1;
            h._played = !1;
            h._playing = !1;
            h._stopped = !0;
            this.initStyle();
            this._node.visit();
            d = document.createElement("source");
            d.src = b;
            f.appendChild(d);
            g = cc.path.extname(b);
            for (var p = 0; p < a.canPlayType.length; p++) g !== a.canPlayType[p] && (d = document.createElement("source"), d.src = b.replace(g, a.canPlayType[p]), f.appendChild(d))
        }
    };
    b.bindEvent = function () {
        var a = this,
            b =
            this._node,
            f = this._video;
        f.addEventListener("ended", function () {
            b._renderCmd.updateMatrix(a._worldTransform, cc.view._scaleX, cc.view._scaleY);
            b._playing = !1;
            b._dispatchEvent(ccui.VideoPlayer.EventType.COMPLETED)
        });
        f.addEventListener("play", function () {
            b._dispatchEvent(ccui.VideoPlayer.EventType.PLAYING)
        });
        f.addEventListener("pause", function () {
            b._dispatchEvent(ccui.VideoPlayer.EventType.PAUSED)
        })
    };
    b.initStyle = function () {
        if (this._video) {
            var a = this._video;
            a.style.position = "absolute";
            a.style.bottom = "0px";
            a.style.left = "0px";
            a.className = "cocosVideo"
        }
    };
    b.changeSize = function (a, b) {
        var f = this._node._contentSize;
        a = a || f.width;
        b = b || f.height;
        if (f = this._video) 0 !== a && (f.width = a), 0 !== b && (f.height = b)
    };
    b.removeDom = function () {
        var a = this._video;
        if (a) {
            var b = !1;
            (b = "contains" in cc.container ? cc.container.contains(a) : cc.container.compareDocumentPosition(a) % 16) && cc.container.removeChild(a)
        }
    }
})(ccui.VideoPlayer._polyfill);
ccui.RichElement = ccui.Class.extend({
    _type: 0,
    _tag: 0,
    _color: null,
    _opacity: 0,
    ctor: function (a, b, c) {
        this._type = 0;
        this._tag = a || 0;
        this._color = cc.color(255, 255, 255, 255);
        b && (this._color.r = b.r, this._color.g = b.g, this._color.b = b.b);
        this._opacity = c || 0;
        this._color.a = void 0 === c ? b.a : c
    }
});
ccui.RichElementText = ccui.RichElement.extend({
    _text: "",
    _fontName: "",
    _fontSize: 0,
    _fontDefinition: null,
    ctor: function (a, b, c, d, f, g) {
        var h = b;
        b && b instanceof cc.FontDefinition && (h = b.fillStyle, f = b.fontName, g = b.fontSize, this._fontDefinition = b);
        ccui.RichElement.prototype.ctor.call(this, a, h, c);
        this._type = ccui.RichElement.TEXT;
        this._text = d;
        this._fontName = f;
        this._fontSize = g
    }
});
ccui.RichElementText.create = function (a, b, c, d, f, g) {
    return new ccui.RichElementText(a, b, c, d, f, g)
};
ccui.RichElementImage = ccui.RichElement.extend({
    _filePath: "",
    _textureRect: null,
    _textureType: 0,
    ctor: function (a, b, c, d) {
        ccui.RichElement.prototype.ctor.call(this, a, b, c);
        this._type = ccui.RichElement.IMAGE;
        this._filePath = d || "";
        this._textureRect = cc.rect(0, 0, 0, 0);
        this._textureType = 0
    }
});
ccui.RichElementImage.create = function (a, b, c, d) {
    return new ccui.RichElementImage(a, b, c, d)
};
ccui.RichElementCustomNode = ccui.RichElement.extend({
    _customNode: null,
    ctor: function (a, b, c, d) {
        ccui.RichElement.prototype.ctor.call(this, a, b, c);
        this._type = ccui.RichElement.CUSTOM;
        this._customNode = d || null
    }
});
ccui.RichElementCustomNode.create = function (a, b, c, d) {
    return new ccui.RichElementCustomNode(a, b, c, d)
};
ccui.RichText = ccui.Widget.extend({
    _formatTextDirty: !1,
    _richElements: null,
    _elementRenders: null,
    _leftSpaceWidth: 0,
    _verticalSpace: 0,
    _elementRenderersContainer: null,
    _lineBreakOnSpace: !1,
    _textHorizontalAlignment: null,
    _textVerticalAlignment: null,
    ctor: function () {
        ccui.Widget.prototype.ctor.call(this);
        this._formatTextDirty = !1;
        this._richElements = [];
        this._elementRenders = [];
        this._verticalSpace = this._leftSpaceWidth = 0;
        this._textHorizontalAlignment = cc.TEXT_ALIGNMENT_LEFT;
        this._textVerticalAlignment = cc.VERTICAL_TEXT_ALIGNMENT_TOP
    },
    _initRenderer: function () {
        this._elementRenderersContainer = new cc.Node;
        this._elementRenderersContainer.setAnchorPoint(0.5, 0.5);
        this.addProtectedChild(this._elementRenderersContainer, 0, -1)
    },
    insertElement: function (a, b) {
        this._richElements.splice(b, 0, a);
        this._formatTextDirty = !0
    },
    pushBackElement: function (a) {
        this._richElements.push(a);
        this._formatTextDirty = !0
    },
    removeElement: function (a) {
        cc.isNumber(a) ? this._richElements.splice(a, 1) : cc.arrayRemoveObject(this._richElements, a);
        this._formatTextDirty = !0
    },
    formatText: function () {
        if (this._formatTextDirty) {
            this._elementRenderersContainer.removeAllChildren();
            this._elementRenders.length = 0;
            var a, b, c = this._richElements;
            if (this._ignoreSize) {
                this._addNewLine();
                for (a = 0; a < c.length; a++) {
                    b = c[a];
                    var d = null;
                    switch (b._type) {
                    case ccui.RichElement.TEXT:
                        d = b._fontDefinition ? new cc.LabelTTF(b._text, b._fontDefinition) : new cc.LabelTTF(b._text, b._fontName, b._fontSize);
                        break;
                    case ccui.RichElement.IMAGE:
                        d = new cc.Sprite(b._filePath);
                        break;
                    case ccui.RichElement.CUSTOM:
                        d = b._customNode
                    }
                    d.setColor(b._color);
                    d.setOpacity(b._color.a);
                    this._pushToContainer(d)
                }
            } else {
                this._addNewLine();
                for (a = 0; a < c.length; a++) switch (b = c[a], b._type) {
                case ccui.RichElement.TEXT:
                    b._fontDefinition ? this._handleTextRenderer(b._text, b._fontDefinition, b._fontDefinition.fontSize, b._fontDefinition.fillStyle) : this._handleTextRenderer(b._text, b._fontName, b._fontSize, b._color);
                    break;
                case ccui.RichElement.IMAGE:
                    this._handleImageRenderer(b._filePath, b._color, b._color.a);
                    break;
                case ccui.RichElement.CUSTOM:
                    this._handleCustomRenderer(b._customNode)
                }
            }
            this.formatRenderers();
            this._formatTextDirty = !1
        }
    },
    _handleTextRenderer: function (a,
        b, c, d) {
        if ("" !== a)
            if ("\n" === a) this._addNewLine();
            else {
                var f = b instanceof cc.FontDefinition ? new cc.LabelTTF(a, b) : new cc.LabelTTF(a, b, c),
                    g = f.getContentSize().width;
                this._leftSpaceWidth -= g;
                if (0 > this._leftSpaceWidth) {
                    var f = a.length * (1 - -this._leftSpaceWidth / g),
                        g = a.substr(0, f),
                        h = a.substr(f, a.length - 1),
                        m = 0 < f;
                    this._lineBreakOnSpace && (h = g.lastIndexOf(" "), f = -1 === h ? f : h + 1, h = a.substr(f, a.length - 1), m = 0 < f && " " !== h);
                    m && (a = null, b instanceof cc.FontDefinition ? (a = new cc.LabelTTF(g.substr(0, f), b), a.setOpacity(b.fillStyle.a)) :
                        (a = new cc.LabelTTF(g.substr(0, f), b, c), a.setColor(d), a.setOpacity(d.a)), this._pushToContainer(a));
                    this._addNewLine();
                    this._handleTextRenderer(h, b, c, d)
                } else b instanceof cc.FontDefinition ? f.setOpacity(b.fillStyle.a) : (f.setColor(d), f.setOpacity(d.a)), this._pushToContainer(f)
            }
    },
    _handleImageRenderer: function (a, b, c) {
        a = new cc.Sprite(a);
        this._handleCustomRenderer(a)
    },
    _handleCustomRenderer: function (a) {
        var b = a.getContentSize();
        this._leftSpaceWidth -= b.width;
        0 > this._leftSpaceWidth ? (this._addNewLine(), this._pushToContainer(a),
            this._leftSpaceWidth -= b.width) : this._pushToContainer(a)
    },
    _addNewLine: function () {
        this._leftSpaceWidth = this._customSize.width;
        this._elementRenders.push([])
    },
    formatRenderers: function () {
        var a = 0,
            b = this._elementRenderersContainer,
            c = this._elementRenders,
            d, f, g, h, m, n;
        if (this._ignoreSize) {
            d = 0;
            g = c[0];
            for (f = h = 0; f < g.length; f++) m = g[f], m.setAnchorPoint(cc.p(0, 0)), m.setPosition(h, 0), b.addChild(m, 1, f), n = m.getLineHeight ? m.getLineHeight() : a, m = m.getContentSize(), d += m.width, a = Math.max(Math.min(a, n), m.height), h += m.width;
            if (this._textHorizontalAlignment !== cc.TEXT_ALIGNMENT_LEFT) {
                n = 0;
                this._textHorizontalAlignment === cc.TEXT_ALIGNMENT_RIGHT ? n = this._contentSize.width - h : this._textHorizontalAlignment === cc.TEXT_ALIGNMENT_CENTER && (n = (this._contentSize.width - h) / 2);
                for (f = 0; f < g.length; f++) g[f].x += n
            }
            b.setContentSize(d, a)
        } else {
            var p = [];
            for (d = 0; d < c.length; d++) {
                g = c[d];
                for (f = h = 0; f < g.length; f++) m = g[f], n = m.getLineHeight ? m.getLineHeight() : m.getContentSize().height, h = Math.max(Math.min(m.getContentSize().height, n), h);
                p[d] = h;
                a += p[d]
            }
            var u =
                this._customSize.height;
            for (d = 0; d < c.length; d++) {
                g = c[d];
                h = 0;
                u -= p[d] + this._verticalSpace;
                for (f = 0; f < g.length; f++) m = g[f], m.setAnchorPoint(cc.p(0, 0)), m.setPosition(cc.p(h, u)), b.addChild(m, 1), h += m.getContentSize().width;
                if (this._textHorizontalAlignment !== cc.TEXT_ALIGNMENT_LEFT || this._textVerticalAlignment !== cc.VERTICAL_TEXT_ALIGNMENT_TOP) {
                    n = 0;
                    this._textHorizontalAlignment === cc.TEXT_ALIGNMENT_RIGHT ? n = this._contentSize.width - h : this._textHorizontalAlignment === cc.TEXT_ALIGNMENT_CENTER && (n = (this._contentSize.width -
                        h) / 2);
                    h = 0;
                    this._textVerticalAlignment === cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM ? h = this._customSize.height - a : this._textVerticalAlignment === cc.VERTICAL_TEXT_ALIGNMENT_CENTER && (h = (this._customSize.height - a) / 2);
                    for (f = 0; f < g.length; f++) m = g[f], m.x += n, m.y -= h
                }
            }
            b.setContentSize(this._contentSize)
        }
        a = c.length;
        for (d = 0; d < a; d++) c[d].length = 0;
        this._elementRenders.length = 0;
        this.setContentSize(this._ignoreSize ? this.getVirtualRendererSize() : this._customSize);
        this._updateContentSizeWithTextureSize(this._contentSize);
        b.setPosition(0.5 *
            this._contentSize.width, 0.5 * this._contentSize.height)
    },
    _pushToContainer: function (a) {
        0 >= this._elementRenders.length || this._elementRenders[this._elementRenders.length - 1].push(a)
    },
    _adaptRenderers: function () {
        this.formatText()
    },
    setVerticalSpace: function (a) {
        this._verticalSpace = a
    },
    setAnchorPoint: function (a) {
        ccui.Widget.prototype.setAnchorPoint.call(this, a);
        this._elementRenderersContainer.setAnchorPoint(a)
    },
    _setAnchorX: function (a) {
        ccui.Widget.prototype._setAnchorX.call(this, a);
        this._elementRenderersContainer._setAnchorX(a)
    },
    _setAnchorY: function (a) {
        ccui.Widget.prototype._setAnchorY.call(this, a);
        this._elementRenderersContainer._setAnchorY(a)
    },
    getVirtualRendererSize: function () {
        return this._elementRenderersContainer.getContentSize()
    },
    ignoreContentAdaptWithSize: function (a) {
        this._ignoreSize !== a && (this._formatTextDirty = !0, ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this, a))
    },
    getContentSize: function () {
        this.formatText();
        return cc.Node.prototype.getContentSize.call(this)
    },
    _getWidth: function () {
        this.formatText();
        return cc.Node.prototype._getWidth.call(this)
    },
    _getHeight: function () {
        this.formatText();
        return cc.Node.prototype._getHeight.call(this)
    },
    setContentSize: function (a, b) {
        ccui.Widget.prototype.setContentSize.call(this, void 0 === b ? a.width : a, void 0 === b ? a.height : b);
        this._formatTextDirty = !0
    },
    getDescription: function () {
        return "RichText"
    },
    setCascadeOpacityEnabled: function (a) {
        ccui.Widget.prototype.setCascadeOpacityEnabled.call(this, a);
        this._elementRenderersContainer.setCascadeOpacityEnabled(a)
    },
    setLineBreakOnSpace: function (a) {
        this._lineBreakOnSpace = a;
        this._formatTextDirty = !0;
        this.formatText()
    },
    setTextHorizontalAlignment: function (a) {
        a !== this._textHorizontalAlignment && (this._textHorizontalAlignment = a, this.formatText())
    },
    setTextVerticalAlignment: function (a) {
        a !== this._textVerticalAlignment && (this._textVerticalAlignment = a, this.formatText())
    }
});
ccui.RichText.create = function () {
    return new ccui.RichText
};
ccui.RichElement.TEXT = 0;
ccui.RichElement.IMAGE = 1;
ccui.RichElement.CUSTOM = 2;
ccui.WebView = ccui.Widget.extend({
    ctor: function (a) {
        ccui.Widget.prototype.ctor.call(this);
        this._EventList = {};
        a && this.loadURL(a)
    },
    visit: function () {
        var a = this._renderCmd,
            b = a._div,
            c = cc.container,
            d = cc.eventManager;
        if (this._visible) c.appendChild(b), null === this._listener && (this._listener = d.addCustomListener(cc.game.EVENT_RESIZE, function () {
            a.resize()
        }));
        else {
            var f = !1;
            (f = "contains" in c ? c.contains(b) : c.compareDocumentPosition(b) % 16) && c.removeChild(b);
            b = d._listenersMap[cc.game.EVENT_RESIZE].getFixedPriorityListeners();
            d._removeListenerInVector(b, a._listener);
            a._listener = null
        }
        a.updateStatus();
        a.resize(cc.view)
    },
    setJavascriptInterfaceScheme: function (a) {},
    loadData: function (a, b, c, d) {},
    loadHTMLString: function (a, b) {},
    loadURL: function (a) {
        this._renderCmd.updateURL(a);
        this._dispatchEvent(ccui.WebView.EventType.LOADING)
    },
    stopLoading: function () {
        cc.log("Web does not support loading")
    },
    reload: function () {
        var a = this._renderCmd._iframe;
        a && (a = a.contentWindow) && a.location && a.location.reload()
    },
    canGoBack: function () {
        cc.log("Web does not support query history");
        return !0
    },
    canGoForward: function () {
        cc.log("Web does not support query history");
        return !0
    },
    goBack: function () {
        try {
            if (ccui.WebView._polyfill.closeHistory) return cc.log("The current browser does not support the GoBack");
            var a = this._renderCmd._iframe;
            if (a) {
                var b = a.contentWindow;
                if (b && b.location) try {
                    b.history.back.call(b)
                } catch (c) {
                    b.history.back()
                }
            }
        } catch (d) {
            cc.log(d)
        }
    },
    goForward: function () {
        try {
            if (ccui.WebView._polyfill.closeHistory) return cc.log("The current browser does not support the GoForward");
            var a =
                this._renderCmd._iframe;
            if (a) {
                var b = a.contentWindow;
                if (b && b.location) try {
                    b.history.forward.call(b)
                } catch (c) {
                    b.history.forward()
                }
            }
        } catch (d) {
            cc.log(d)
        }
    },
    evaluateJS: function (a) {
        var b = this._renderCmd._iframe;
        if (b) {
            b = b.contentWindow;
            try {
                b.eval(a), this._dispatchEvent(ccui.WebView.EventType.JS_EVALUATED)
            } catch (c) {
                console.error(c)
            }
        }
    },
    setScalesPageToFit: function () {
        cc.log("Web does not support zoom")
    },
    setEventListener: function (a, b) {
        this._EventList[a] = b
    },
    removeEventListener: function (a) {
        this._EventList[a] = null
    },
    _dispatchEvent: function (a) {
        (a = this._EventList[a]) && a.call(this, this, this._renderCmd._iframe.src)
    },
    _createRenderCmd: function () {
        return new ccui.WebView.RenderCmd(this)
    },
    setContentSize: function (a, b) {
        ccui.Widget.prototype.setContentSize.call(this, a, b);
        void 0 === b && (b = a.height, a = a.width);
        this._renderCmd.changeSize(a, b)
    },
    cleanup: function () {
        this._renderCmd.removeDom();
        this.stopAllActions();
        this.unscheduleAllCallbacks()
    }
});
ccui.WebView.EventType = {
    LOADING: "loading",
    LOADED: "load",
    ERROR: "error",
    JS_EVALUATED: "js"
};
(function () {
    var a = ccui.WebView._polyfill = {
        devicePixelRatio: !1,
        enableDiv: !1
    };
    cc.sys.os === cc.sys.OS_IOS && (a.enableDiv = !0);
    cc.sys.isMobile ? cc.sys.browserType === cc.sys.BROWSER_TYPE_FIREFOX && (a.enableBG = !0) : cc.sys.browserType === cc.sys.BROWSER_TYPE_IE && (a.closeHistory = !0)
})();
(function (a) {
    var b = null,
        b = cc._renderType === cc.game.RENDER_TYPE_WEBGL ? cc.Node.WebGLRenderCmd : cc.Node.CanvasRenderCmd;
    ccui.WebView.RenderCmd = function (b) {
        this._rootCtor(b);
        this._iframe = this._div = null;
        a.enableDiv ? (this._div = document.createElement("div"), this._div.style["-webkit-overflow"] = "auto", this._div.style["-webkit-overflow-scrolling"] = "touch", this._iframe = document.createElement("iframe"), this._iframe.style.width = "100%", this._iframe.style.height = "100%", this._div.appendChild(this._iframe)) : this._div =
            this._iframe = document.createElement("iframe");
        a.enableBG && (this._div.style.background = "#FFF");
        this._iframe.addEventListener("load", function () {
            b._dispatchEvent(ccui.WebView.EventType.LOADED)
        });
        this._iframe.addEventListener("error", function () {
            b._dispatchEvent(ccui.WebView.EventType.ERROR)
        });
        this._div.style.background = "#FFF";
        this._div.style.height = "200px";
        this._div.style.width = "300px";
        this._div.style.overflow = "scroll";
        this._div.style.border = "none";
        this._listener = null;
        this.initStyle()
    };
    b = ccui.WebView.RenderCmd.prototype =
        Object.create(b.prototype);
    b.constructor = ccui.WebView.RenderCmd;
    b.transform = function (a, b) {
        this.originTransform(a, b);
        this.updateMatrix(this._worldTransform, cc.view._scaleX, cc.view._scaleY)
    };
    b.updateStatus = function () {
        a.devicePixelRatio = cc.view.isRetinaEnabled();
        var b = cc.Node._dirtyFlags,
            d = this._dirtyFlag;
        d & b.transformDirty && (this.transform(this.getParentRenderCmd(), !0), this.updateMatrix(this._worldTransform, cc.view._scaleX, cc.view._scaleY), this._dirtyFlag ^= this._dirtyFlag & cc.Node._dirtyFlags.transformDirty);
        d & b.orderDirty && (this._dirtyFlag ^= this._dirtyFlag & b.orderDirty)
    };
    b.resize = function (a) {
        a = a || cc.view;
        var b = this._node,
            f = cc.eventManager;
        b._parent && b._visible ? this.updateMatrix(this._worldTransform, a._scaleX, a._scaleY) : (a = f._listenersMap[cc.game.EVENT_RESIZE].getFixedPriorityListeners(), f._removeListenerInVector(a, this._listener), this._listener = null)
    };
    b.updateMatrix = function (b, d, f) {
        var g = this._node;
        if (a.devicePixelRatio) {
            var h = cc.view.getDevicePixelRatio();
            d /= h;
            f /= h
        }
        if (!1 !== this._loaded) {
            var m = cc.game.container.style,
                h = parseInt(m.paddingLeft),
                m = parseInt(m.paddingBottom),
                n = g._contentSize.width,
                p = g._contentSize.height;
            b = "matrix(" + b.a * d + "," + b.b + "," + b.c + "," + b.d * f + "," + (h + b.tx * d - n / 2 + n * g._scaleX / 2 * d) + "," + -(m + b.ty * f - p / 2 + p * g._scaleY / 2 * f) + ")";
            this._div.style.transform = b;
            this._div.style["-webkit-transform"] = b
        }
    };
    b.initStyle = function () {
        if (this._div) {
            var a = this._div;
            a.style.position = "absolute";
            a.style.bottom = "0px";
            a.style.left = "0px"
        }
    };
    b.updateURL = function (a) {
        var b = this._iframe;
        b.src = a;
        var f = this,
            g = function () {
                f._loaded = !0;
                b.removeEventListener("load",
                    g)
            };
        b.addEventListener("load", g)
    };
    b.changeSize = function (a, b) {
        var f = this._div;
        f && (f.style.width = a + "px", f.style.height = b + "px")
    };
    b.removeDom = function () {
        var a = this._div;
        if (a) {
            var b = !1;
            (b = "contains" in cc.container ? cc.container.contains(a) : cc.container.compareDocumentPosition(a) % 16) && cc.container.removeChild(a)
        }
    }
})(ccui.WebView._polyfill);
ccui.ScrollViewBar = ccui.ProtectedNode.extend({
    _parentScroll: null,
    _direction: null,
    _upperHalfCircle: null,
    _lowerHalfCircle: null,
    _body: null,
    _opacity: 255,
    _marginFromBoundary: 0,
    _marginForLength: 0,
    _touching: !1,
    _autoHideEnabled: !0,
    autoHideTime: 0,
    _autoHideRemainingTime: 0,
    _className: "ScrollViewBar",
    ctor: function (a, b) {
        cc.ProtectedNode.prototype.ctor.call(this);
        this._direction = b;
        this._parentScroll = a;
        this._marginForLength = this._marginFromBoundary = ccui.ScrollViewBar.DEFAULT_MARGIN;
        this.opacity = 255 * ccui.ScrollViewBar.DEFAULT_SCROLLBAR_OPACITY;
        this.autoHideTime = ccui.ScrollViewBar.DEFAULT_AUTO_HIDE_TIME;
        this._autoHideEnabled = !0;
        ccui.ScrollViewBar.prototype.init.call(this);
        this.setCascadeColorEnabled(!0);
        this.setCascadeOpacityEnabled(!0)
    },
    init: function () {
        this._upperHalfCircle = ccui.helper._createSpriteFromBase64(ccui.ScrollViewBar.HALF_CIRCLE_IMAGE, ccui.ScrollViewBar.HALF_CIRCLE_IMAGE_KEY);
        this._upperHalfCircle.setAnchorPoint(cc.p(0.5, 0));
        this._lowerHalfCircle = ccui.helper._createSpriteFromBase64(ccui.ScrollViewBar.HALF_CIRCLE_IMAGE, ccui.ScrollViewBar.HALF_CIRCLE_IMAGE_KEY);
        this._lowerHalfCircle.setAnchorPoint(cc.p(0.5, 0));
        this._lowerHalfCircle.setScaleY(-1);
        this.addProtectedChild(this._upperHalfCircle);
        this.addProtectedChild(this._lowerHalfCircle);
        this._body = ccui.helper._createSpriteFromBase64(ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT, ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT_KEY);
        this._body.setAnchorPoint(cc.p(0.5, 0));
        this.addProtectedChild(this._body);
        this.setColor(ccui.ScrollViewBar.DEFAULT_COLOR);
        this.onScrolled(cc.p(0, 0));
        cc.ProtectedNode.prototype.setOpacity.call(this,
            0);
        this._autoHideRemainingTime = 0;
        this._direction === ccui.ScrollView.DIR_HORIZONTAL && this.setRotation(90)
    },
    setPositionFromCorner: function (a) {
        this._direction === ccui.ScrollView.DIR_VERTICAL ? (this._marginForLength = a.y, this._marginFromBoundary = a.x) : (this._marginForLength = a.x, this._marginFromBoundary = a.y)
    },
    onEnter: function () {
        cc.ProtectedNode.prototype.onEnter.call(this);
        this.scheduleUpdate()
    },
    getPositionFromCorner: function () {
        return this._direction === ccui.ScrollView.DIR_VERTICAL ? cc.p(this._marginFromBoundary,
            this._marginForLength) : cc.p(this._marginForLength, this._marginFromBoundary)
    },
    setWidth: function (a) {
        a /= this._body.width;
        this._body.setScaleX(a);
        this._upperHalfCircle.setScale(a);
        this._lowerHalfCircle.setScale(-a)
    },
    getWidth: function () {
        return this._body.getBoundingBox().width
    },
    setAutoHideEnabled: function (a) {
        this._autoHideEnabled = a;
        !this._autoHideEnabled && !this._touching && 0 >= this._autoHideRemainingTime ? cc.ProtectedNode.prototype.setOpacity.call(this, this.opacity) : cc.ProtectedNode.prototype.setOpacity.call(this,
            0)
    },
    isAutoHideEnabled: function () {
        return this._autoHideEnabled
    },
    setOpacity: function (a) {
        this._opacity = a
    },
    getOpacity: function () {
        return this._opacity
    },
    _updateLength: function (a) {
        var b = a / this._body.getTextureRect().height;
        this._body.setScaleY(b);
        this._upperHalfCircle.setPositionY(this._body.getPositionY() + a)
    },
    _processAutoHide: function (a) {
        this._autoHideEnabled && !(0 >= this._autoHideRemainingTime) && !this._touching && (this._autoHideRemainingTime -= a, this._autoHideRemainingTime <= this.autoHideTime && (this._autoHideRemainingTime =
            Math.max(0, this._autoHideRemainingTime), cc.ProtectedNode.prototype.setOpacity.call(this, this._opacity * (this._autoHideRemainingTime / this.autoHideTime))))
    },
    update: function (a) {
        this._processAutoHide(a)
    },
    onTouchBegan: function () {
        this._autoHideEnabled && (this._touching = !0)
    },
    onTouchEnded: function () {
        this._autoHideEnabled && (this._touching = !1, 0 >= this._autoHideRemainingTime || (this._autoHideRemainingTime = this.autoHideTime))
    },
    onScrolled: function (a) {
        this._autoHideEnabled && (this._autoHideRemainingTime = this.autoHideTime,
            cc.ProtectedNode.prototype.setOpacity.call(this, this.opacity));
        var b = this._parentScroll.getInnerContainer(),
            c = 0,
            d = 0,
            f = 0,
            g = 0;
        this._direction === ccui.ScrollView.DIR_VERTICAL ? (c = b.height, d = this._parentScroll.height, f = a.y, g = -b.getPositionY()) : this._direction === ccui.ScrollView.DIR_HORIZONTAL && (c = b.width, d = this._parentScroll.width, f = a.x, g = -b.getPositionX());
        a = this._calculateLength(c, d, f);
        c = this._calculatePosition(c, d, g, f, a);
        this._updateLength(a);
        this.setPosition(c)
    },
    _calculateLength: function (a, b, c) {
        0 !==
            c && (a += 20 * (0 < c ? c : -c));
        return Math.abs(b - 2 * this._marginForLength) * (b / a)
    },
    _calculatePosition: function (a, b, c, d, f) {
        a -= b;
        0 !== d && (a += Math.abs(d));
        d = 0;
        0 !== a && (d = Math.max(c / a, 0), d = Math.min(d, 1));
        b = (b - f - 2 * this._marginForLength) * d + this._marginForLength;
        return this._direction === ccui.ScrollView.DIR_VERTICAL ? cc.p(this._parentScroll.width - this._marginFromBoundary, b) : cc.p(b, this._marginFromBoundary)
    }
});
_p = ccui.ScrollViewBar.prototype;
cc.defineGetterSetter(_p, "opacity", _p.getOpacity, _p.setOpacity);
cc.defineGetterSetter(_p, "autoHideEnabled", _p.isAutoHideEnabled, _p.setAutoHideEnabled);
ccui.ScrollViewBar.DEFAULT_COLOR = cc.color(52, 65, 87);
ccui.ScrollViewBar.DEFAULT_MARGIN = 20;
ccui.ScrollViewBar.DEFAULT_AUTO_HIDE_TIME = 0.2;
ccui.ScrollViewBar.DEFAULT_SCROLLBAR_OPACITY = 0.4;
ccui.ScrollViewBar.HALF_CIRCLE_IMAGE_KEY = "/__half_circle_image";
ccui.ScrollViewBar.HALF_CIRCLE_IMAGE = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAGCAMAAADAMI+zAAAAJ1BMVEX///////////////////////////////////////////////////9Ruv0SAAAADHRSTlMABgcbbW7Hz9Dz+PmlcJP5AAAAMElEQVR4AUXHwQ2AQAhFwYcLH1H6r1djzDK3ASxUpTBeK/uTCyz7dx54b44m4p5cD1MwAooEJyk3AAAAAElFTkSuQmCC";
ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT_KEY = "/__body_image_height";
ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAABCAMAAADdNb8LAAAAA1BMVEX///+nxBvIAAAACklEQVR4AWNABgAADQABYc2cpAAAAABJRU5ErkJggg==";
ccui.ScrollView = ccui.Layout.extend({
    _innerContainer: null,
    _direction: null,
    _topBoundary: 0,
    _bottomBoundary: 0,
    _leftBoundary: 0,
    _rightBoundary: 0,
    _touchMoveDisplacements: null,
    _touchMoveTimeDeltas: null,
    _touchMovePreviousTimestamp: 0,
    _touchTotalTimeThreshold: 0.5,
    _autoScrolling: !1,
    _autoScrollTargetDelta: null,
    _autoScrollAttenuate: !0,
    _autoScrollStartPosition: null,
    _autoScrollTotalTime: 0,
    _autoScrollAccumulatedTime: 0,
    _autoScrollCurrentlyOutOfBoundary: !1,
    _autoScrollBraking: !1,
    _autoScrollBrakingStartPosition: null,
    _bePressed: !1,
    _childFocusCancelOffset: 0,
    bounceEnabled: !1,
    _outOfBoundaryAmount: null,
    _outOfBoundaryAmountDirty: !0,
    inertiaScrollEnabled: !1,
    _scrollBarEnabled: !0,
    _verticalScrollBar: null,
    _horizontalScrollBar: null,
    _scrollViewEventListener: null,
    _scrollViewEventSelector: null,
    _className: "ScrollView",
    ctor: function () {
        ccui.Layout.prototype.ctor.call(this);
        this.setClippingEnabled(!0);
        this._innerContainer.setTouchEnabled(!1);
        this._direction = ccui.ScrollView.DIR_NONE;
        this._childFocusCancelOffset = 5;
        this.inertiaScrollEnabled = !0;
        this._outOfBoundaryAmount = cc.p(0, 0);
        this._autoScrollTargetDelta = cc.p(0, 0);
        this._autoScrollStartPosition = cc.p(0, 0);
        this._autoScrollBrakingStartPosition = cc.p(0, 0);
        this._touchMoveDisplacements = [];
        this._touchMoveTimeDeltas = [];
        this._touchMovePreviousTimestamp = 0;
        this._scrollBarEnabled = !0;
        this._initScrollBar();
        this.setTouchEnabled(!0)
    },
    onEnter: function () {
        ccui.Layout.prototype.onEnter.call(this);
        this.scheduleUpdate()
    },
    onExit: function () {
        cc.renderer._removeCache(this.__instanceId);
        ccui.Layout.prototype.onExit.call(this)
    },
    visit: function (a) {
        var b = this._renderCmd,
            c = a ? a._renderCmd : null;
        if (this._visible) {
            this._adaptRenderers();
            this._doLayout();
            a = cc.renderer;
            b.visit(c);
            a.pushRenderCommand(b);
            b instanceof ccui.ScrollView.WebGLRenderCmd && a._turnToCacheMode(this.__instanceId);
            var d = this._clippingEnabled && this._clippingType === ccui.Layout.CLIPPING_STENCIL,
                f = this._clippingEnabled && this._clippingType === ccui.Layout.CLIPPING_SCISSOR;
            d ? b.stencilClippingVisit(c) : f && b.scissorClippingVisit(c);
            var g, h = this._children,
                m = h.length,
                n, c = this._protectedChildren,
                p = c.length;
            this._reorderChildDirty && this.sortAllChildren();
            this._reorderProtectedChildDirty && this.sortAllProtectedChildren();
            for (g = 0; g < m; g++)(n = h[g]) && n._visible && n.visit(this);
            for (g = 0; g < p; g++)
                if ((h = c[g]) && h._visible) b._changeProtectedChild(h), h.visit(this);
            d ? b.postStencilVisit() : f && b.postScissorVisit();
            b instanceof ccui.ScrollView.WebGLRenderCmd && a._turnToNormalMode();
            this.updateChildren();
            b._dirtyFlag = 0
        } else b._propagateFlagsDown(c)
    },
    findNextFocusedWidget: function (a, b) {
        return this.getLayoutType() ===
            ccui.Layout.LINEAR_VERTICAL || this.getLayoutType() === ccui.Layout.LINEAR_HORIZONTAL ? this._innerContainer.findNextFocusedWidget(a, b) : ccui.Widget.prototype.findNextFocusedWidget.call(this, a, b)
    },
    _initRenderer: function () {
        ccui.Layout.prototype._initRenderer.call(this);
        this._innerContainer = new ccui.Layout;
        this._innerContainer.setColor(cc.color(255, 255, 255));
        this._innerContainer.setOpacity(255);
        this._innerContainer.setCascadeColorEnabled(!0);
        this._innerContainer.setCascadeOpacityEnabled(!0);
        this.addProtectedChild(this._innerContainer,
            1, 1)
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_WEBGL ? new ccui.ScrollView.WebGLRenderCmd(this) : new ccui.ScrollView.CanvasRenderCmd(this)
    },
    _onSizeChanged: function () {
        ccui.Layout.prototype._onSizeChanged.call(this);
        var a = this._contentSize;
        this._topBoundary = a.height;
        this._rightBoundary = a.width;
        var b = this._innerContainer.getContentSize();
        this._innerContainer.setContentSize(cc.size(Math.max(b.width, a.width), Math.max(b.height, a.height)));
        this._innerContainer.setPosition(0, a.height -
            this._innerContainer.getContentSize().height);
        if (this._verticalScrollBar) this._verticalScrollBar.onScrolled(this._getHowMuchOutOfBoundary());
        if (this._horizontalScrollBar) this._horizontalScrollBar.onScrolled(this._getHowMuchOutOfBoundary())
    },
    setInnerContainerSize: function (a) {
        var b = this._innerContainer,
            c = this._contentSize,
            d = c.width,
            f = c.height;
        a.width < c.width ? cc.log("Inner width <= ScrollView width, it will be force sized!") : d = a.width;
        a.height < c.height ? cc.log("Inner height <= ScrollView height, it will be force sized!") :
            f = a.height;
        b.setContentSize(cc.size(d, f));
        a = this._innerContainer.getPosition();
        b = this._innerContainer.getAnchorPoint();
        0 != this._innerContainer.getLeftBoundary() && (a.x = b.x * d);
        this._innerContainer.getTopBoundary() != this._contentSize.height && (a.y = this._contentSize.height - (1 - b.y) * f);
        this.setInnerContainerPosition(a);
        this._updateScrollBar(cc.p(0, 0))
    },
    _setInnerWidth: function (a) {
        var b = this._contentSize.width,
            c = b,
            d = this._innerContainer,
            f = d.width;
        a < b ? cc.log("Inner width <= scrollview width, it will be force sized!") :
            c = a;
        d.width = c;
        switch (this._direction) {
        case ccui.ScrollView.DIR_HORIZONTAL:
        case ccui.ScrollView.DIR_BOTH:
            d.getRightBoundary() <= b && this._scrollChildren(f - d.width, 0)
        }
        a = d.anchorX;
        0 < d.getLeftBoundary() && (d.x = a * c);
        d.getRightBoundary() < b && (d.x = b - (1 - a) * c)
    },
    _setInnerHeight: function (a) {
        var b = this._contentSize.height,
            c = b,
            d = this._innerContainer,
            f = d.height;
        a < b ? cc.log("Inner height <= scrollview height, it will be force sized!") : c = a;
        d.height = c;
        switch (this._direction) {
        case ccui.ScrollView.DIR_VERTICAL:
        case ccui.ScrollView.DIR_BOTH:
            this._scrollChildren(0,
                f - c)
        }
        a = d.anchorY;
        0 < d.getLeftBoundary() && (d.y = a * c);
        d.getRightBoundary() < b && (d.y = b - (1 - a) * c)
    },
    setInnerContainerPosition: function (a) {
        if (!(a.x === this._innerContainer.getPositionX() && a.y === this._innerContainer.getPositionY())) {
            this._innerContainer.setPosition(a);
            this._outOfBoundaryAmountDirty = !0;
            if (this.bounceEnabled)
                for (a = ccui.ScrollView.MOVEDIR_TOP; a < ccui.ScrollView.MOVEDIR_RIGHT; ++a) this._isOutOfBoundary(a) && this._processScrollEvent(a, !0);
            this._dispatchEvent(ccui.ScrollView.EVENT_CONTAINER_MOVED)
        }
    },
    getInnerContainerPosition: function () {
        return this._innerContainer.getPosition()
    },
    getInnerContainerSize: function () {
        return this._innerContainer.getContentSize()
    },
    _getInnerWidth: function () {
        return this._innerContainer.width
    },
    _getInnerHeight: function () {
        return this._innerContainer.height
    },
    _isInContainer: function (a) {
        if (!this._clippingEnabled) return !0;
        var b = a._position,
            c = a._contentSize;
        a = a._anchorPoint;
        var d = this._customSize,
            f = this._innerContainer._position,
            g = 0;
        return (g = b.y - a.y * c.height) >= d.height - f.y || g +
            c.height <= -f.y || b.x - a.x * c.width >= d.width - f.x || 0 + c.width <= -f.x ? !1 : !0
    },
    updateChildren: function () {
        var a, b, c, d = this._innerContainer._children;
        b = 0;
        for (c = d.length; b < c; b++) a = d[b], !0 === a._inViewRect && !1 === this._isInContainer(a) ? a._inViewRect = !1 : !1 === a._inViewRect && !0 === this._isInContainer(a) && (a._inViewRect = !0)
    },
    addChild: function (a, b, c) {
        if (!a) return !1;
        !1 === this._isInContainer(a) && (a._inViewRect = !1);
        b = b || a.getLocalZOrder();
        c = c || a.getTag();
        return this._innerContainer.addChild(a, b, c)
    },
    removeAllChildren: function () {
        this.removeAllChildrenWithCleanup(!0)
    },
    removeAllChildrenWithCleanup: function (a) {
        this._innerContainer.removeAllChildrenWithCleanup(a)
    },
    removeChild: function (a, b) {
        return this._innerContainer.removeChild(a, b)
    },
    getChildren: function () {
        return this._innerContainer.getChildren()
    },
    getChildrenCount: function () {
        return this._innerContainer.getChildrenCount()
    },
    getChildByTag: function (a) {
        return this._innerContainer.getChildByTag(a)
    },
    getChildByName: function (a) {
        return this._innerContainer.getChildByName(a)
    },
    _flattenVectorByDirection: function (a) {
        var b = cc.p(0,
            0);
        b.x = this._direction === ccui.ScrollView.DIR_VERTICAL ? 0 : a.x;
        b.y = this._direction === ccui.ScrollView.DIR_HORIZONTAL ? 0 : a.y;
        return b
    },
    _getHowMuchOutOfBoundary: function (a) {
        void 0 === a && (a = cc.p(0, 0));
        if (0 === a.x && 0 === a.y && !this._outOfBoundaryAmountDirty) return this._outOfBoundaryAmount;
        var b = cc.p(0, 0);
        this._innerContainer.getLeftBoundary() + a.x > this._leftBoundary ? b.x = this._leftBoundary - (this._innerContainer.getLeftBoundary() + a.x) : this._innerContainer.getRightBoundary() + a.x < this._rightBoundary && (b.x = this._rightBoundary -
            (this._innerContainer.getRightBoundary() + a.x));
        this._innerContainer.getTopBoundary() + a.y < this._topBoundary ? b.y = this._topBoundary - (this._innerContainer.getTopBoundary() + a.y) : this._innerContainer.getBottomBoundary() + a.y > this._bottomBoundary && (b.y = this._bottomBoundary - (this._innerContainer.getBottomBoundary() + a.y));
        0 === a.x && 0 === a.y && (this._outOfBoundaryAmount = b, this._outOfBoundaryAmountDirty = !1);
        return b
    },
    _isOutOfBoundary: function (a) {
        var b = this._getHowMuchOutOfBoundary();
        if (void 0 !== a) switch (a) {
        case ccui.ScrollView.MOVEDIR_TOP:
            return 0 <
                b.y;
        case ccui.ScrollView.MOVEDIR_BOTTOM:
            return 0 > b.y;
        case ccui.ScrollView.MOVEDIR_LEFT:
            return 0 > b.x;
        case ccui.ScrollView.MOVEDIR_RIGHT:
            return 0 < b.x
        } else return !this._fltEqualZero(b);
        return !1
    },
    _moveInnerContainer: function (a, b) {
        var c = this._flattenVectorByDirection(a);
        this.setInnerContainerPosition(cc.pAdd(this.getInnerContainerPosition(), c));
        c = this._getHowMuchOutOfBoundary();
        this._updateScrollBar(c);
        this.bounceEnabled && b && this._startBounceBackIfNeeded()
    },
    _updateScrollBar: function (a) {
        if (this._verticalScrollBar) this._verticalScrollBar.onScrolled(a);
        if (this._horizontalScrollBar) this._horizontalScrollBar.onScrolled(a)
    },
    _calculateTouchMoveVelocity: function () {
        for (var a = 0, b = 0; b < this._touchMoveTimeDeltas.length; ++b) a += this._touchMoveTimeDeltas[b];
        if (0 == a || a >= this._touchTotalTimeThreshold) return cc.p(0, 0);
        for (var c = cc.p(0, 0), b = 0; b < this._touchMoveDisplacements.length; ++b) c.x += this._touchMoveDisplacements[b].x, c.y += this._touchMoveDisplacements[b].y;
        return cc.pMult(c, 1 / a)
    },
    setTouchTotalTimeThreshold: function (a) {
        this._touchTotalTimeThreshold = a
    },
    getTouchTotalTimeThreshold: function () {
        return this._touchTotalTimeThreshold
    },
    _startInertiaScroll: function (a) {
        var b = cc.pMult(a, 0.7);
        this._startAttenuatingAutoScroll(b, a)
    },
    _startBounceBackIfNeeded: function () {
        if (!this.bounceEnabled) return !1;
        var a = this._getHowMuchOutOfBoundary();
        if (this._fltEqualZero(a)) return !1;
        this._startAutoScroll(a, 1, !0);
        return !0
    },
    _startAutoScrollToDestination: function (a, b, c) {
        this._startAutoScroll(cc.pSub(a, this._innerContainer.getPosition()), b, c)
    },
    _calculateAutoScrollTimeByInitialSpeed: function (a) {
        return Math.sqrt(Math.sqrt(a / 5))
    },
    _startAttenuatingAutoScroll: function (a,
        b) {
        var c = this._calculateAutoScrollTimeByInitialSpeed(cc.pLength(b));
        this._startAutoScroll(a, c, !0)
    },
    _startAutoScroll: function (a, b, c) {
        a = this._flattenVectorByDirection(a);
        this._autoScrolling = !0;
        this._autoScrollTargetDelta = a;
        this._autoScrollAttenuate = c;
        this._autoScrollStartPosition = this._innerContainer.getPosition();
        this._autoScrollTotalTime = b;
        this._autoScrollAccumulatedTime = 0;
        this._autoScrollBraking = !1;
        this._autoScrollBrakingStartPosition = cc.p(0, 0);
        b = this._getHowMuchOutOfBoundary();
        if (!this._fltEqualZero(b) &&
            (this._autoScrollCurrentlyOutOfBoundary = !0, c = this._getHowMuchOutOfBoundary(a), 0 < b.x * c.x || 0 < b.y * c.y)) this._autoScrollBraking = !0
    },
    stopAutoScroll: function () {
        this._autoScrolling = !1;
        this._autoScrollAttenuate = !0;
        this._autoScrollAccumulatedTime = this._autoScrollTotalTime = 0
    },
    _isNecessaryAutoScrollBrake: function () {
        if (this._autoScrollBraking) return !0;
        if (this._isOutOfBoundary()) {
            if (!this._autoScrollCurrentlyOutOfBoundary) return this._autoScrollBraking = this._autoScrollCurrentlyOutOfBoundary = !0, this._autoScrollBrakingStartPosition =
                this.getInnerContainerPosition(), !0
        } else this._autoScrollCurrentlyOutOfBoundary = !1;
        return !1
    },
    _getAutoScrollStopEpsilon: function () {
        return 1E-4
    },
    _fltEqualZero: function (a) {
        return 1E-4 >= Math.abs(a.x) && 1E-4 >= Math.abs(a.y)
    },
    _processAutoScrolling: function (a) {
        var b = this._isNecessaryAutoScrollBrake() ? 0.05 : 1;
        this._autoScrollAccumulatedTime += a * (1 / b);
        var c = Math.min(1, this._autoScrollAccumulatedTime / this._autoScrollTotalTime);
        this._autoScrollAttenuate && (c -= 1, c = c * c * c * c * c + 1);
        a = cc.pAdd(this._autoScrollStartPosition,
            cc.pMult(this._autoScrollTargetDelta, c));
        c = Math.abs(c - 1) <= this._getAutoScrollStopEpsilon();
        this.bounceEnabled ? a = cc.pAdd(this._autoScrollBrakingStartPosition, cc.pMult(cc.pSub(a, this._autoScrollBrakingStartPosition), b)) : (b = cc.pSub(a, this.getInnerContainerPosition()), b = this._getHowMuchOutOfBoundary(b), this._fltEqualZero(b) || (a.x += b.x, a.y += b.y, c = !0));
        c && (this._autoScrolling = !1, this._dispatchEvent(ccui.ScrollView.EVENT_AUTOSCROLL_ENDED));
        this._moveInnerContainer(cc.pSub(a, this.getInnerContainerPosition()),
            c)
    },
    _jumpToDestination: function (a, b) {
        void 0 === a.x && (a = cc.p(a, b));
        this._autoScrolling = !1;
        this._moveInnerContainer(cc.pSub(a, this.getInnerContainerPosition()), !0)
    },
    _scrollChildren: function (a) {
        if (this.bounceEnabled) {
            var b = this._getHowMuchOutOfBoundary();
            a.x *= 0 == b.x ? 1 : 0.5;
            a.y *= 0 == b.y ? 1 : 0.5
        }
        this.bounceEnabled || (b = this._getHowMuchOutOfBoundary(a), a.x += b.x, a.y += b.y);
        var c = b = !1,
            d = !1,
            f = !1;
        0 < a.y ? this._innerContainer.getBottomBoundary() + a.y >= this._bottomBoundary && (f = !0) : 0 > a.y && this._innerContainer.getTopBoundary() +
            a.y <= this._topBoundary && (d = !0);
        0 > a.x ? this._innerContainer.getRightBoundary() + a.x <= this._rightBoundary && (c = !0) : 0 < a.x && this._innerContainer.getLeftBoundary() + a.x >= this._leftBoundary && (b = !0);
        this._moveInnerContainer(a, !1);
        (0 != a.x || 0 != a.y) && this._processScrollingEvent();
        f && this._processScrollEvent(ccui.ScrollView.MOVEDIR_BOTTOM, !1);
        d && this._processScrollEvent(ccui.ScrollView.MOVEDIR_TOP, !1);
        b && this._processScrollEvent(ccui.ScrollView.MOVEDIR_LEFT, !1);
        c && this._processScrollEvent(ccui.ScrollView.MOVEDIR_RIGHT,
            !1)
    },
    scrollToBottom: function (a, b) {
        this._startAutoScrollToDestination(cc.p(this._innerContainer.getPositionX(), 0), a, b)
    },
    scrollToTop: function (a, b) {
        this._startAutoScrollToDestination(cc.p(this._innerContainer.getPositionX(), this._contentSize.height - this._innerContainer.getContentSize().height), a, b)
    },
    scrollToLeft: function (a, b) {
        this._startAutoScrollToDestination(cc.p(0, this._innerContainer.getPositionY()), a, b)
    },
    scrollToRight: function (a, b) {
        this._startAutoScrollToDestination(cc.p(this._contentSize.width -
            this._innerContainer.getContentSize().width, this._innerContainer.getPositionY()), a, b)
    },
    scrollToTopLeft: function (a, b) {
        this._direction !== ccui.ScrollView.DIR_BOTH ? cc.log("Scroll direction is not both!") : this._startAutoScrollToDestination(cc.p(0, this._contentSize.height - this._innerContainer.getContentSize().height), a, b)
    },
    scrollToTopRight: function (a, b) {
        if (this._direction !== ccui.ScrollView.DIR_BOTH) cc.log("Scroll direction is not both!");
        else {
            var c = this._innerContainer.getContentSize();
            this._startAutoScrollToDestination(cc.p(this._contentSize.width -
                c.width, this._contentSize.height - c.height), a, b)
        }
    },
    scrollToBottomLeft: function (a, b) {
        this._direction !== ccui.ScrollView.DIR_BOTH ? cc.log("Scroll direction is not both!") : this._startAutoScrollToDestination(cc.p(0, 0), a, b)
    },
    scrollToBottomRight: function (a, b) {
        this._direction !== ccui.ScrollView.DIR_BOTH ? cc.log("Scroll direction is not both!") : this._startAutoScrollToDestination(cc.p(this._contentSize.width - this._innerContainer.getContentSize().width, 0), a, b)
    },
    scrollToPercentVertical: function (a, b, c) {
        var d = this._contentSize.height -
            this._innerContainer.getContentSize().height,
            f = -d;
        this._startAutoScrollToDestination(cc.p(this._innerContainer.getPositionX(), d + a * f / 100), b, c)
    },
    scrollToPercentHorizontal: function (a, b, c) {
        var d = this._innerContainer.getContentSize().width - this._contentSize.width;
        this._startAutoScrollToDestination(cc.p(-(a * d / 100), this._innerContainer.getPositionY()), b, c)
    },
    scrollToPercentBothDirection: function (a, b, c) {
        if (this._direction === ccui.ScrollView.DIR_BOTH) {
            var d = this._contentSize.height - this._innerContainer.getContentSize().height,
                f = -d,
                g = this._innerContainer.getContentSize().width - this._contentSize.width;
            this._startAutoScrollToDestination(cc.p(-(a.x * g / 100), d + a.y * f / 100), b, c)
        }
    },
    jumpToBottom: function () {
        this._jumpToDestination(this._innerContainer.getPositionX(), 0)
    },
    jumpToTop: function () {
        this._jumpToDestination(this._innerContainer.getPositionX(), this._contentSize.height - this._innerContainer.getContentSize().height)
    },
    jumpToLeft: function () {
        this._jumpToDestination(0, this._innerContainer.getPositionY())
    },
    jumpToRight: function () {
        this._jumpToDestination(this._contentSize.width -
            this._innerContainer.getContentSize().width, this._innerContainer.getPositionY())
    },
    jumpToTopLeft: function () {
        this._direction !== ccui.ScrollView.DIR_BOTH ? cc.log("Scroll _direction is not both!") : this._jumpToDestination(0, this._contentSize.height - this._innerContainer.getContentSize().height)
    },
    jumpToTopRight: function () {
        if (this._direction !== ccui.ScrollView.DIR_BOTH) cc.log("Scroll _direction is not both!");
        else {
            var a = this._innerContainer.getContentSize();
            this._jumpToDestination(this._contentSize.width - a.width,
                this._contentSize.height - a.height)
        }
    },
    jumpToBottomLeft: function () {
        this._direction !== ccui.ScrollView.DIR_BOTH ? cc.log("Scroll _direction is not both!") : this._jumpToDestination(0, 0)
    },
    jumpToBottomRight: function () {
        this._direction !== ccui.ScrollView.DIR_BOTH ? cc.log("Scroll _direction is not both!") : this._jumpToDestination(this._contentSize.width - this._innerContainer.getContentSize().width, 0)
    },
    jumpToPercentVertical: function (a) {
        var b = this._contentSize.height - this._innerContainer.getContentSize().height,
            c = -b;
        this._jumpToDestination(this._innerContainer.getPositionX(), b + a * c / 100)
    },
    jumpToPercentHorizontal: function (a) {
        var b = this._innerContainer.getContentSize().width - this._contentSize.width;
        this._jumpToDestination(-(a * b / 100), this._innerContainer.getPositionY())
    },
    jumpToPercentBothDirection: function (a) {
        if (this._direction === ccui.ScrollView.DIR_BOTH) {
            var b = this._innerContainer.getContentSize(),
                c = this._contentSize.height - b.height;
            this._jumpToDestination(-(a.x * (b.width - this._contentSize.width) / 100), c + a.y * -c / 100)
        }
    },
    _gatherTouchMove: function (a) {
        for (; 5 <= this._touchMoveDisplacements.length;) this._touchMoveDisplacements.splice(0, 1), this._touchMoveTimeDeltas.splice(0, 1);
        this._touchMoveDisplacements.push(a);
        a = (new Date).getTime();
        this._touchMoveTimeDeltas.push((a - this._touchMovePreviousTimestamp) / 1E3);
        this._touchMovePreviousTimestamp = a
    },
    _handlePressLogic: function (a) {
        this._bePressed = !0;
        this._autoScrolling = !1;
        this._touchMovePreviousTimestamp = (new Date).getTime();
        this._touchMoveDisplacements.length = 0;
        this._touchMoveTimeDeltas.length =
            0;
        if (this._verticalScrollBar) this._verticalScrollBar.onTouchBegan();
        if (this._horizontalScrollBar) this._horizontalScrollBar.onTouchBegan()
    },
    _handleMoveLogic: function (a) {
        var b = this.convertToNodeSpace(a.getLocation());
        a = this.convertToNodeSpace(a.getPreviousLocation());
        b = cc.pSub(b, a);
        this._scrollChildren(b);
        this._gatherTouchMove(b)
    },
    _handleReleaseLogic: function (a) {
        var b = this.convertToNodeSpace(a.getLocation());
        a = this.convertToNodeSpace(a.getPreviousLocation());
        b = cc.pSub(b, a);
        this._gatherTouchMove(b);
        this._bePressed = !1;
        !this._startBounceBackIfNeeded() && this.inertiaScrollEnabled && (b = this._calculateTouchMoveVelocity(), (0 !== b.x || 0 !== b.y) && this._startInertiaScroll(b));
        if (this._verticalScrollBar) this._verticalScrollBar.onTouchEnded();
        if (this._horizontalScrollBar) this._horizontalScrollBar.onTouchEnded()
    },
    onTouchBegan: function (a, b) {
        var c = ccui.Layout.prototype.onTouchBegan.call(this, a, b);
        this._isInterceptTouch || this._hit && this._handlePressLogic(a);
        return c
    },
    onTouchMoved: function (a, b) {
        ccui.Layout.prototype.onTouchMoved.call(this,
            a, b);
        this._isInterceptTouch || this._handleMoveLogic(a)
    },
    onTouchEnded: function (a, b) {
        ccui.Layout.prototype.onTouchEnded.call(this, a, b);
        this._isInterceptTouch || this._handleReleaseLogic(a);
        this._isInterceptTouch = !1
    },
    onTouchCancelled: function (a, b) {
        ccui.Layout.prototype.onTouchCancelled.call(this, a, b);
        this._isInterceptTouch || this._handleReleaseLogic(a);
        this._isInterceptTouch = !1
    },
    update: function (a) {
        this._autoScrolling && this._processAutoScrolling(a)
    },
    interceptTouchEvent: function (a, b, c) {
        if (this._touchEnabled) {
            if (this._direction !==
                ccui.ScrollView.DIR_NONE) {
                var d = c.getLocation();
                switch (a) {
                case ccui.Widget.TOUCH_BEGAN:
                    this._isInterceptTouch = !0;
                    this._touchBeganPosition.x = d.x;
                    this._touchBeganPosition.y = d.y;
                    this._handlePressLogic(c);
                    break;
                case ccui.Widget.TOUCH_MOVED:
                    a = cc.pLength(cc.pSub(b.getTouchBeganPosition(), d));
                    this._touchMovePosition.x = d.x;
                    this._touchMovePosition.y = d.y;
                    a > this._childFocusCancelOffset && (b.setHighlighted(!1), this._handleMoveLogic(c));
                    break;
                case ccui.Widget.TOUCH_CANCELED:
                case ccui.Widget.TOUCH_ENDED:
                    this._touchEndPosition.x =
                        d.x, this._touchEndPosition.y = d.y, this._handleReleaseLogic(c), b.isSwallowTouches() && (this._isInterceptTouch = !1)
                }
            }
        } else ccui.Layout.prototype.interceptTouchEvent.call(this, a, b, c)
    },
    _processScrollEvent: function (a, b) {
        var c = 0;
        switch (a) {
        case ccui.ScrollView.MOVEDIR_TOP:
            c = b ? ccui.ScrollView.EVENT_BOUNCE_TOP : ccui.ScrollView.EVENT_SCROLL_TO_TOP;
            break;
        case ccui.ScrollView.MOVEDIR_BOTTOM:
            c = b ? ccui.ScrollView.EVENT_BOUNCE_BOTTOM : ccui.ScrollView.EVENT_SCROLL_TO_BOTTOM;
            break;
        case ccui.ScrollView.MOVEDIR_LEFT:
            c = b ?
                ccui.ScrollView.EVENT_BOUNCE_LEFT : ccui.ScrollView.EVENT_SCROLL_TO_LEFT;
            break;
        case ccui.ScrollView.MOVEDIR_RIGHT:
            c = b ? ccui.ScrollView.EVENT_BOUNCE_RIGHT : ccui.ScrollView.EVENT_SCROLL_TO_RIGHT
        }
        this._dispatchEvent(c)
    },
    _processScrollingEvent: function () {
        this._dispatchEvent(ccui.ScrollView.EVENT_SCROLLING)
    },
    _dispatchEvent: function (a) {
        this._scrollViewEventSelector && (this._scrollViewEventListener ? this._scrollViewEventSelector.call(this._scrollViewEventListener, this, a) : this._scrollViewEventSelector(this, a));
        this._ccEventCallback && this._ccEventCallback(this, a)
    },
    addEventListenerScrollView: function (a, b) {
        this._scrollViewEventSelector = a;
        this._scrollViewEventListener = b
    },
    addEventListener: function (a) {
        this._ccEventCallback = a
    },
    setDirection: function (a) {
        this._direction = a;
        this._scrollBarEnabled && (this._removeScrollBar(), this._initScrollBar())
    },
    getDirection: function () {
        return this._direction
    },
    setBounceEnabled: function (a) {
        this.bounceEnabled = a
    },
    isBounceEnabled: function () {
        return this.bounceEnabled
    },
    setInertiaScrollEnabled: function (a) {
        this.inertiaScrollEnabled =
            a
    },
    isInertiaScrollEnabled: function () {
        return this.inertiaScrollEnabled
    },
    setScrollBarEnabled: function (a) {
        this._scrollBarEnabled !== a && (this._scrollBarEnabled && this._removeScrollBar(), (this._scrollBarEnabled = a) && this._initScrollBar())
    },
    isScrollBarEnabled: function () {
        return this._scrollBarEnabled
    },
    setScrollBarPositionFromCorner: function (a) {
        this._direction !== ccui.ScrollView.DIR_HORIZONTAL && this.setScrollBarPositionFromCornerForVertical(a);
        this._direction !== ccui.ScrollView.DIR_VERTICAL && this.setScrollBarPositionFromCornerForHorizontal(a)
    },
    setScrollBarPositionFromCornerForVertical: function (a) {
        cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
        cc.assert(this._direction !== ccui.ScrollView.DIR_HORIZONTAL, "Scroll view doesn't have a vertical scroll bar!");
        this._verticalScrollBar.setPositionFromCorner(a)
    },
    getScrollBarPositionFromCornerForVertical: function () {
        cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
        cc.assert(this._direction !== ccui.ScrollView.DIR_HORIZONTAL, "Scroll view doesn't have a vertical scroll bar!");
        return this._verticalScrollBar.getPositionFromCorner()
    },
    setScrollBarPositionFromCornerForHorizontal: function (a) {
        cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
        cc.assert(this._direction !== ccui.ScrollView.DIR_VERTICAL, "Scroll view doesn't have a horizontal scroll bar!");
        this._horizontalScrollBar.setPositionFromCorner(a)
    },
    getScrollBarPositionFromCornerForHorizontal: function () {
        cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
        cc.assert(this._direction !== ccui.ScrollView.DIR_VERTICAL,
            "Scroll view doesn't have a horizontal scroll bar!");
        return this._horizontalScrollBar.getPositionFromCorner()
    },
    setScrollBarWidth: function (a) {
        cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
        this._verticalScrollBar && this._verticalScrollBar.setWidth(a);
        this._horizontalScrollBar && this._horizontalScrollBar.setWidth(a)
    },
    getScrollBarWidth: function () {
        cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
        return this._verticalScrollBar ? this._verticalScrollBar.getWidth() : this._horizontalScrollBar ?
            this._horizontalScrollBar.getWidth() : 0
    },
    setScrollBarColor: function (a) {
        cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
        this._verticalScrollBar && this._verticalScrollBar.setColor(a);
        this._horizontalScrollBar && this._horizontalScrollBar.setColor(a)
    },
    getScrollBarColor: function () {
        cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
        this._verticalScrollBar && this._verticalScrollBar.getColor();
        this._horizontalScrollBar && this._horizontalScrollBar.getColor();
        return cc.color.WHITE
    },
    setScrollBarOpacity: function (a) {
        cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
        this._verticalScrollBar && (this._verticalScrollBar.opacity = a);
        this._horizontalScrollBar && (this._horizontalScrollBar.opacity = a)
    },
    getScrollBarOpacity: function () {
        cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
        return this._verticalScrollBar ? this._verticalScrollBar.opacity : this._horizontalScrollBar ? this._horizontalScrollBar.opacity : -1
    },
    setScrollBarAutoHideEnabled: function (a) {
        cc.assert(this._scrollBarEnabled,
            "Scroll bar should be enabled!");
        this._verticalScrollBar && (this._verticalScrollBar.autoHideEnabled = a);
        this._horizontalScrollBar && (this._horizontalScrollBar.autoHideEnabled = a)
    },
    isScrollBarAutoHideEnabled: function () {
        cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
        return this._verticalScrollBar ? this._verticalScrollBar.autoHideEnabled : this._horizontalScrollBar ? this._horizontalScrollBar.autoHideEnabled : !1
    },
    setScrollBarAutoHideTime: function (a) {
        cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
        this._verticalScrollBar && (this._verticalScrollBar.autoHideTime = a);
        this._horizontalScrollBar && (this._horizontalScrollBar.autoHideTime = a)
    },
    getScrollBarAutoHideTime: function () {
        cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
        return this._verticalScrollBar ? this._verticalScrollBar.autoHideTime : this._horizontalScrollBar ? this._horizontalScrollBar.autoHideTime : 0
    },
    getInnerContainer: function () {
        return this._innerContainer
    },
    setLayoutType: function (a) {
        this._innerContainer.setLayoutType(a)
    },
    getLayoutType: function () {
        return this._innerContainer.getLayoutType()
    },
    _doLayout: function () {
        this._doLayoutDirty && (this._doLayoutDirty = !1)
    },
    getDescription: function () {
        return "ScrollView"
    },
    _createCloneInstance: function () {
        return new ccui.ScrollView
    },
    _copyClonedWidgetChildren: function (a) {
        ccui.Layout.prototype._copyClonedWidgetChildren.call(this, a)
    },
    _copySpecialProperties: function (a) {
        a instanceof ccui.ScrollView && (ccui.Layout.prototype._copySpecialProperties.call(this, a), this.setInnerContainerSize(a.getInnerContainerSize()), this.setInnerContainerPosition(a.getInnerContainerPosition()),
            this.setDirection(a._direction), this._topBoundary = a._topBoundary, this._bottomBoundary = a._bottomBoundary, this._leftBoundary = a._leftBoundary, this._rightBoundary = a._rightBoundary, this._bePressed = a._bePressed, this._childFocusCancelOffset = a._childFocusCancelOffset, this._touchMoveDisplacements = a._touchMoveDisplacements, this._touchMoveTimeDeltas = a._touchMoveTimeDeltas, this._touchMovePreviousTimestamp = a._touchMovePreviousTimestamp, this._autoScrolling = a._autoScrolling, this._autoScrollAttenuate = a._autoScrollAttenuate,
            this._autoScrollStartPosition = a._autoScrollStartPosition, this._autoScrollTargetDelta = a._autoScrollTargetDelta, this._autoScrollTotalTime = a._autoScrollTotalTime, this._autoScrollAccumulatedTime = a._autoScrollAccumulatedTime, this._autoScrollCurrentlyOutOfBoundary = a._autoScrollCurrentlyOutOfBoundary, this._autoScrollBraking = a._autoScrollBraking, this._autoScrollBrakingStartPosition = a._autoScrollBrakingStartPosition, this.setBounceEnabled(a.bounceEnabled), this.setInertiaScrollEnabled(a.inertiaScrollEnabled),
            this._scrollViewEventListener = a._scrollViewEventListener, this._scrollViewEventSelector = a._scrollViewEventSelector, this._ccEventCallback = a._ccEventCallback, this.setScrollBarEnabled(a.isScrollBarEnabled()), this.isScrollBarEnabled() && (this._direction !== ccui.ScrollView.DIR_HORIZONTAL && this.setScrollBarPositionFromCornerForVertical(a.getScrollBarPositionFromCornerForVertical()), this._direction !== ccui.ScrollView.DIR_VERTICAL && this.setScrollBarPositionFromCornerForHorizontal(a.getScrollBarPositionFromCornerForHorizontal()),
                this.setScrollBarWidth(a.getScrollBarWidth()), this.setScrollBarColor(a.getScrollBarColor()), this.setScrollBarAutoHideEnabled(a.isScrollBarAutoHideEnabled()), this.setScrollBarAutoHideTime(a.getScrollBarAutoHideTime())))
    },
    _initScrollBar: function () {
        this._direction !== ccui.ScrollView.DIR_HORIZONTAL && !this._verticalScrollBar && (this._verticalScrollBar = new ccui.ScrollViewBar(this, ccui.ScrollView.DIR_VERTICAL), this.addProtectedChild(this._verticalScrollBar, 2));
        this._direction !== ccui.ScrollView.DIR_VERTICAL &&
            !this._horizontalScrollBar && (this._horizontalScrollBar = new ccui.ScrollViewBar(this, ccui.ScrollView.DIR_HORIZONTAL), this.addProtectedChild(this._horizontalScrollBar, 2))
    },
    _removeScrollBar: function () {
        this._verticalScrollBar && (this.removeProtectedChild(this._verticalScrollBar), this._verticalScrollBar = null);
        this._horizontalScrollBar && (this.removeProtectedChild(this._horizontalScrollBar), this._horizontalScrollBar = null)
    },
    getNodeByTag: function (a) {
        return this._innerContainer.getNodeByTag(a)
    },
    getNodes: function () {
        return this._innerContainer.getNodes()
    },
    removeNode: function (a) {
        this._innerContainer.removeNode(a)
    },
    removeNodeByTag: function (a) {
        this._innerContainer.removeNodeByTag(a)
    },
    removeAllNodes: function () {
        this._innerContainer.removeAllNodes()
    },
    addNode: function (a, b, c) {
        this._innerContainer.addNode(a, b, c)
    }
});
_p = ccui.ScrollView.prototype;
cc.defineGetterSetter(_p, "innerWidth", _p._getInnerWidth, _p._setInnerWidth);
cc.defineGetterSetter(_p, "innerHeight", _p._getInnerHeight, _p._setInnerHeight);
cc.defineGetterSetter(_p, "direction", _p.getDirection, _p.setDirection);
cc.defineGetterSetter(_p, "touchTotalTimeThreshold", _p.getTouchTotalTimeThreshold, _p.setTouchTotalTimeThreshold);
_p = null;
ccui.ScrollView.create = function () {
    return new ccui.ScrollView
};
ccui.ScrollView.DIR_NONE = 0;
ccui.ScrollView.DIR_VERTICAL = 1;
ccui.ScrollView.DIR_HORIZONTAL = 2;
ccui.ScrollView.DIR_BOTH = 3;
ccui.ScrollView.EVENT_SCROLL_TO_TOP = 0;
ccui.ScrollView.EVENT_SCROLL_TO_BOTTOM = 1;
ccui.ScrollView.EVENT_SCROLL_TO_LEFT = 2;
ccui.ScrollView.EVENT_SCROLL_TO_RIGHT = 3;
ccui.ScrollView.EVENT_SCROLLING = 4;
ccui.ScrollView.EVENT_BOUNCE_TOP = 5;
ccui.ScrollView.EVENT_BOUNCE_BOTTOM = 6;
ccui.ScrollView.EVENT_BOUNCE_LEFT = 7;
ccui.ScrollView.EVENT_BOUNCE_RIGHT = 8;
ccui.ScrollView.EVENT_CONTAINER_MOVED = 9;
ccui.ScrollView.EVENT_AUTOSCROLL_ENDED = 10;
ccui.ScrollView.MOVEDIR_TOP = 0;
ccui.ScrollView.MOVEDIR_BOTTOM = 1;
ccui.ScrollView.MOVEDIR_LEFT = 2;
ccui.ScrollView.MOVEDIR_RIGHT = 3;
ccui.ListView = ccui.ScrollView.extend({
    _model: null,
    _items: null,
    _gravity: null,
    _itemsMargin: 0,
    _curSelectedIndex: 0,
    _refreshViewDirty: !0,
    _listViewEventListener: null,
    _listViewEventSelector: null,
    _ccListViewEventCallback: null,
    _magneticAllowedOutOfBoundary: !0,
    _magneticType: 0,
    _className: "ListView",
    ctor: function () {
        this._items = [];
        ccui.ScrollView.prototype.ctor.call(this);
        this._gravity = ccui.ListView.GRAVITY_CENTER_VERTICAL;
        this.setTouchEnabled(!0);
        this.setDirection(ccui.ScrollView.DIR_VERTICAL)
    },
    setItemModel: function (a) {
        a ?
            this._model = a : cc.log("Can't set a null to item model!")
    },
    _handleReleaseLogic: function (a) {
        ccui.ScrollView.prototype._handleReleaseLogic.call(this, a);
        this._autoScrolling || this._startMagneticScroll()
    },
    _onItemListChanged: function () {
        this._outOfBoundaryAmountDirty = !0
    },
    _updateInnerContainerSize: function () {
        var a, b = this._items,
            c;
        switch (this.direction) {
        case ccui.ScrollView.DIR_VERTICAL:
            c = b.length;
            var d = (c - 1) * this._itemsMargin;
            for (a = 0; a < c; a++) d += b[a].getContentSize().height;
            this.setInnerContainerSize(cc.size(this._contentSize.width,
                d));
            break;
        case ccui.ScrollView.DIR_HORIZONTAL:
            c = b.length;
            d = (c - 1) * this._itemsMargin;
            for (a = 0; a < c; a++) d += b[a].getContentSize().width;
            this.setInnerContainerSize(cc.size(d, this._contentSize.height))
        }
    },
    _remedyLayoutParameter: function (a) {
        cc.assert(null != a, "ListView Item can't be nil!");
        var b = a.getLayoutParameter(ccui.LayoutParameter.LINEAR),
            c = !0;
        b || (b = new ccui.LinearLayoutParameter, c = !1);
        var d = this.getIndex(a);
        switch (this.direction) {
        case ccui.ScrollView.DIR_VERTICAL:
            this._remedyVerticalLayoutParameter(b,
                d);
            break;
        case ccui.ScrollView.DIR_HORIZONTAL:
            this._remedyHorizontalLayoutParameter(b, d)
        }
        c || a.setLayoutParameter(b)
    },
    _remedyVerticalLayoutParameter: function (a, b) {
        cc.assert(null != a, "Layout parameter can't be nil!");
        switch (this._gravity) {
        case ccui.ListView.GRAVITY_LEFT:
            a.setGravity(ccui.LinearLayoutParameter.LEFT);
            break;
        case ccui.ListView.GRAVITY_RIGHT:
            a.setGravity(ccui.LinearLayoutParameter.RIGHT);
            break;
        case ccui.ListView.GRAVITY_CENTER_HORIZONTAL:
            a.setGravity(ccui.LinearLayoutParameter.CENTER_HORIZONTAL)
        }
        0 ===
            b ? a.setMargin(ccui.MarginZero()) : a.setMargin(new ccui.Margin(0, this._itemsMargin, 0, 0))
    },
    _remedyHorizontalLayoutParameter: function (a, b) {
        cc.assert(null != a, "Layout parameter can't be nil!");
        switch (this._gravity) {
        case ccui.ListView.GRAVITY_TOP:
            a.setGravity(ccui.LinearLayoutParameter.TOP);
            break;
        case ccui.ListView.GRAVITY_BOTTOM:
            a.setGravity(ccui.LinearLayoutParameter.BOTTOM);
            break;
        case ccui.ListView.GRAVITY_CENTER_VERTICAL:
            a.setGravity(ccui.LinearLayoutParameter.CENTER_VERTICAL)
        }
        0 === b ? a.setMargin(ccui.MarginZero()) :
            a.setMargin(new ccui.Margin(this._itemsMargin, 0, 0, 0))
    },
    pushBackDefaultItem: function () {
        if (null != this._model) {
            var a = this._model.clone();
            this._remedyLayoutParameter(a);
            this.addChild(a);
            this._refreshViewDirty = !0
        }
    },
    insertDefaultItem: function (a) {
        if (null != this._model) {
            var b = this._model.clone();
            this._items.splice(a, 0, b);
            ccui.ScrollView.prototype.addChild.call(this, b);
            this._remedyLayoutParameter(b);
            this._refreshViewDirty = !0
        }
    },
    pushBackCustomItem: function (a) {
        this._remedyLayoutParameter(a);
        this.addChild(a);
        this._refreshViewDirty = !0
    },
    addChild: function (a, b, c) {
        a && (b = b || a.getLocalZOrder(), c = c || a.getName(), ccui.ScrollView.prototype.addChild.call(this, a, b, c), a instanceof ccui.Widget && (this._items.push(a), this._onItemListChanged()))
    },
    removeChild: function (a, b) {
        if (a) {
            var c = this._items.indexOf(a); - 1 < c && this._items.splice(c, 1);
            this._onItemListChanged();
            ccui.ScrollView.prototype.removeChild.call(this, a, b)
        }
    },
    removeAllChildren: function () {
        this.removeAllChildrenWithCleanup(!0)
    },
    removeAllChildrenWithCleanup: function (a) {
        ccui.ScrollView.prototype.removeAllChildrenWithCleanup.call(this,
            a);
        this._items = [];
        this._onItemListChanged()
    },
    insertCustomItem: function (a, b) {
        this._items.splice(b, 0, a);
        this._onItemListChanged();
        ccui.ScrollView.prototype.addChild.call(this, a);
        this._remedyLayoutParameter(a);
        this._refreshViewDirty = !0
    },
    removeItem: function (a) {
        a = this.getItem(a);
        null != a && (this.removeChild(a, !0), this._refreshViewDirty = !0)
    },
    removeLastItem: function () {
        this.removeItem(this._items.length - 1)
    },
    removeAllItems: function () {
        this.removeAllChildren()
    },
    getItem: function (a) {
        return 0 > a || a >= this._items.length ?
            null : this._items[a]
    },
    getItems: function () {
        return this._items
    },
    getIndex: function (a) {
        return null == a ? -1 : this._items.indexOf(a)
    },
    setGravity: function (a) {
        this._gravity !== a && (this._gravity = a, this._refreshViewDirty = !0)
    },
    setMagneticType: function (a) {
        this._magneticType = a;
        this._onItemListChanged();
        this._startMagneticScroll()
    },
    getMagneticType: function () {
        return this._magneticType
    },
    setMagneticAllowedOutOfBoundary: function (a) {
        this._magneticAllowedOutOfBoundary = a
    },
    getMagneticAllowedOutOfBoundary: function () {
        return this._magneticAllowedOutOfBoundary
    },
    setItemsMargin: function (a) {
        this._itemsMargin !== a && (this._itemsMargin = a, this._refreshViewDirty = !0)
    },
    getItemsMargin: function () {
        return this._itemsMargin
    },
    setDirection: function (a) {
        switch (a) {
        case ccui.ScrollView.DIR_VERTICAL:
            this.setLayoutType(ccui.Layout.LINEAR_VERTICAL);
            break;
        case ccui.ScrollView.DIR_HORIZONTAL:
            this.setLayoutType(ccui.Layout.LINEAR_HORIZONTAL);
            break;
        case ccui.ScrollView.DIR_BOTH:
            return;
        default:
            return
        }
        ccui.ScrollView.prototype.setDirection.call(this, a)
    },
    _getHowMuchOutOfBoundary: function (a) {
        void 0 ===
            a && (a = cc.p(0, 0));
        if (!this._magneticAllowedOutOfBoundary || 0 === this._items.length || this._magneticType === ccui.ListView.MAGNETIC_NONE || this._magneticType === ccui.ListView.MAGNETIC_BOTH_END) return ccui.ScrollView.prototype._getHowMuchOutOfBoundary.call(this, a);
        if (0 === a.x && 0 === a.y && !this._outOfBoundaryAmountDirty) return this._outOfBoundaryAmount;
        var b = this._leftBoundary,
            c = this._rightBoundary,
            d = this._topBoundary,
            f = this._bottomBoundary,
            g = this._items.length - 1,
            h = this.getContentSize(),
            m = cc.p(0, 0),
            n = cc.p(0, 0);
        switch (this._magneticType) {
        case ccui.ListView.MAGNETIC_CENTER:
            m.x = (h.width - this._items[0].width) / 2;
            m.y = (h.height - this._items[0].height) / 2;
            n.x = (h.width - this._items[g].width) / 2;
            n.y = (h.height - this._items[g].height) / 2;
            break;
        case ccui.ListView.MAGNETIC_LEFT:
        case ccui.ListView.MAGNETIC_TOP:
            n.x = h.width - this._items[g].width;
            n.y = h.height - this._items[g].height;
            break;
        case ccui.ListView.MAGNETIC_RIGHT:
        case ccui.ListView.MAGNETIC_BOTTOM:
            m.x = h.width - this._items[0].width, m.y = h.height - this._items[0].height
        }
        b += m.x;
        c -= n.x;
        d -= m.y;
        f += n.y;
        g = cc.p(0, 0);
        this._innerContainer.getLeftBoundary() + a.x > b ? g.x = b - (this._innerContainer.getLeftBoundary() + a.x) : this._innerContainer.getRightBoundary() + a.x < c && (g.x = c - (this._innerContainer.getRightBoundary() + a.x));
        this._innerContainer.getTopBoundary() + a.y < d ? g.y = d - (this._innerContainer.getTopBoundary() + a.y) : this._innerContainer.getBottomBoundary() + a.y > f && (g.y = f - (this._innerContainer.getBottomBoundary() + a.y));
        0 === a.x && 0 === a.y && (this._outOfBoundaryAmount = g, this._outOfBoundaryAmountDirty = !1);
        return g
    },
    _calculateItemPositionWithAnchor: function (a, b) {
        var c = cc.p(a.getLeftBoundary(), a.getBottomBoundary()),
            d = a.getContentSize();
        return cc.p(c.x + d.width * b.x, c.y + d.height * b.y)
    },
    _findClosestItem: function (a, b, c, d, f, g, h) {
        cc.assert(0 <= d && g < b.length && d <= g, "");
        if (d === g) return b[d];
        if (1 === g - d) return f <= h ? b[d] : b[g];
        var m = Math.floor((d + g) / 2),
            n = this._calculateItemPositionWithAnchor(b[m], c),
            n = cc.pLength(cc.pSub(a, n));
        return f <= h ? this._findClosestItem(a, b, c, d, f, m, n) : this._findClosestItem(a, b, c, m, n, g, h)
    },
    getClosestItemToPosition: function (a, b) {
        if (0 === this._items.length) return null;
        var c = this._calculateItemPositionWithAnchor(this._items[0], b),
            c = cc.pLength(cc.pSub(a, c)),
            d = this._items.length - 1,
            f = this._calculateItemPositionWithAnchor(this._items[d], b),
            f = cc.pLength(cc.pSub(a, f));
        return this._findClosestItem(a, this._items, b, 0, c, d, f)
    },
    getClosestItemToPositionInCurrentView: function (a, b) {
        var c = this.getContentSize(),
            d = cc.pMult(this._innerContainer.getPosition(), -1);
        d.x += c.width * a.x;
        d.y += c.height * a.y;
        return this.getClosestItemToPosition(d,
            b)
    },
    getCenterItemInCurrentView: function () {
        return this.getClosestItemToPositionInCurrentView(cc.p(0.5, 0.5), cc.p(0.5, 0.5))
    },
    getLeftmostItemInCurrentView: function () {
        return this._direction === ccui.ScrollView.DIR_HORIZONTAL ? this.getClosestItemToPositionInCurrentView(cc.p(0, 0.5), cc.p(0.5, 0.5)) : null
    },
    getRightmostItemInCurrentView: function () {
        return this._direction === ccui.ScrollView.DIR_HORIZONTAL ? this.getClosestItemToPositionInCurrentView(cc.p(1, 0.5), cc.p(0.5, 0.5)) : null
    },
    getTopmostItemInCurrentView: function () {
        return this._direction ===
            ccui.ScrollView.DIR_VERTICAL ? this.getClosestItemToPositionInCurrentView(cc.p(0.5, 1), cc.p(0.5, 0.5)) : null
    },
    getBottommostItemInCurrentView: function () {
        return this._direction === ccui.ScrollView.DIR_VERTICAL ? this.getClosestItemToPositionInCurrentView(cc.p(0.5, 0), cc.p(0.5, 0.5)) : null
    },
    _calculateItemDestination: function (a, b, c) {
        var d = this.getContentSize(),
            f = cc.p(0, 0);
        f.x += d.width * a.x;
        f.y += d.height * a.y;
        a = this._calculateItemPositionWithAnchor(b, c);
        return cc.pMult(cc.pSub(a, f), -1)
    },
    jumpToBottom: function () {
        this.doLayout();
        ccui.ScrollView.prototype.jumpToBottom.call(this)
    },
    jumpToTop: function () {
        this.doLayout();
        ccui.ScrollView.prototype.jumpToTop.call(this)
    },
    jumpToLeft: function () {
        this.doLayout();
        ccui.ScrollView.prototype.jumpToLeft.call(this)
    },
    jumpToRight: function () {
        this.doLayout();
        ccui.ScrollView.prototype.jumpToRight.call(this)
    },
    jumpToTopLeft: function () {
        this.doLayout();
        ccui.ScrollView.prototype.jumpToTopLeft.call(this)
    },
    jumpToTopRight: function () {
        this.doLayout();
        ccui.ScrollView.prototype.jumpToTopRight.call(this)
    },
    jumpToBottomLeft: function () {
        this.doLayout();
        ccui.ScrollView.prototype.jumpToBottomLeft.call(this)
    },
    jumpToBottomRight: function () {
        this.doLayout();
        ccui.ScrollView.prototype.jumpToBottomRight.call(this)
    },
    jumpToPercentVertical: function (a) {
        this.doLayout();
        ccui.ScrollView.prototype.jumpToPercentVertical.call(this, a)
    },
    jumpToPercentHorizontal: function (a) {
        this.doLayout();
        ccui.ScrollView.prototype.jumpToPercentHorizontal.call(this, a)
    },
    jumpToPercentBothDirection: function (a) {
        this.doLayout();
        ccui.ScrollView.prototype.jumpToPercentBothDirection.call(this,
            a)
    },
    jumpToItem: function (a, b, c) {
        if (a = this.getItem(a)) this.doLayout(), b = this._calculateItemDestination(b, a, c), this.bounceEnabled || (c = cc.pSub(b, this._innerContainer.getPosition()), c = this._getHowMuchOutOfBoundary(c), b.x += c.x, b.y += c.y), this._jumpToDestination(b)
    },
    scrollToItem: function (a, b, c, d) {
        void 0 === d && (d = 1);
        if (a = this.getItem(a)) b = this._calculateItemDestination(b, a, c), this._startAutoScrollToDestination(b, d, !0)
    },
    requestRefreshView: function () {
        this._refreshViewDirty = !0
    },
    refreshView: function () {
        this.forceDoLayout()
    },
    doLayout: function () {
        this._doLayout()
    },
    requestDoLayout: function () {
        this._refreshViewDirty = !0
    },
    _doLayout: function () {
        if (this._refreshViewDirty) {
            for (var a = this._items, b = 0; b < a.length; b++) {
                var c = a[b];
                c.setLocalZOrder(b);
                this._remedyLayoutParameter(c)
            }
            this._updateInnerContainerSize();
            this._innerContainer.forceDoLayout();
            this._refreshViewDirty = !1
        }
    },
    addEventListenerListView: function (a, b) {
        this._listViewEventListener = b;
        this._listViewEventSelector = a
    },
    addEventListener: function (a) {
        this._ccListViewEventCallback =
            a
    },
    _selectedItemEvent: function (a) {
        a = a === ccui.Widget.TOUCH_BEGAN ? ccui.ListView.ON_SELECTED_ITEM_START : ccui.ListView.ON_SELECTED_ITEM_END;
        this._listViewEventSelector && (this._listViewEventListener ? this._listViewEventSelector.call(this._listViewEventListener, this, a) : this._listViewEventSelector(this, a));
        this._ccListViewEventCallback && this._ccListViewEventCallback(this, a)
    },
    interceptTouchEvent: function (a, b, c) {
        ccui.ScrollView.prototype.interceptTouchEvent.call(this, a, b, c);
        if (this._touchEnabled && a !== ccui.Widget.TOUCH_MOVED) {
            for (c =
                b; c;) {
                if (c && c.getParent() === this._innerContainer) {
                    this._curSelectedIndex = this.getIndex(c);
                    break
                }
                c = c.getParent()
            }
            b.isHighlighted() && this._selectedItemEvent(a)
        }
    },
    getCurSelectedIndex: function () {
        return this._curSelectedIndex
    },
    _onSizeChanged: function () {
        ccui.ScrollView.prototype._onSizeChanged.call(this);
        this._refreshViewDirty = !0
    },
    getDescription: function () {
        return "ListView"
    },
    _createCloneInstance: function () {
        return new ccui.ListView
    },
    _copyClonedWidgetChildren: function (a) {
        a = a.getItems();
        for (var b = 0; b < a.length; b++) this.pushBackCustomItem(a[b].clone())
    },
    _copySpecialProperties: function (a) {
        a instanceof ccui.ListView && (ccui.ScrollView.prototype._copySpecialProperties.call(this, a), this.setItemModel(a._model), this.setItemsMargin(a._itemsMargin), this.setGravity(a._gravity), this._listViewEventListener = a._listViewEventListener, this._listViewEventSelector = a._listViewEventSelector)
    },
    _startAttenuatingAutoScroll: function (a, b) {
        var c = a;
        if (0 !== this._items.length && this._magneticType !== ccui.ListView.MAGNETIC_NONE) {
            var c = this._flattenVectorByDirection(c),
                d = this._getHowMuchOutOfBoundary(c);
            if (0 === d.x && 0 === d.y) {
                d = this._magneticType;
                d === ccui.ListView.MAGNETIC_BOTH_END && (this._direction === ccui.ScrollView.DIR_HORIZONTAL ? d = 0 < c.x ? ccui.ListView.MAGNETIC_LEFT : ccui.ListView.MAGNETIC_RIGHT : this._direction === ccui.ScrollView.DIR_VERTICAL && (d = 0 < c.y ? ccui.ListView.MAGNETIC_BOTTOM : ccui.ListView.MAGNETIC_TOP));
                var f = this._getAnchorPointByMagneticType(d),
                    d = cc.pMult(this._innerContainer.getPosition(), -1);
                d.x += this.width * f.x;
                d.y += this.height * f.y;
                c = this.getClosestItemToPosition(cc.pSub(d, c), f);
                c = this._calculateItemPositionWithAnchor(c,
                    f);
                c = cc.pSub(d, c)
            }
        }
        ccui.ScrollView.prototype._startAttenuatingAutoScroll.call(this, c, b)
    },
    _getAnchorPointByMagneticType: function (a) {
        switch (a) {
        case ccui.ListView.MAGNETIC_BOTH_END:
            return cc.p(0, 1);
        case ccui.ListView.MAGNETIC_CENTER:
            return cc.p(0.5, 0.5);
        case ccui.ListView.MAGNETIC_LEFT:
            return cc.p(0, 0.5);
        case ccui.ListView.MAGNETIC_RIGHT:
            return cc.p(1, 0.5);
        case ccui.ListView.MAGNETIC_TOP:
            return cc.p(0.5, 1);
        case ccui.ListView.MAGNETIC_BOTTOM:
            return cc.p(0.5, 0)
        }
        return cc.p(0, 0)
    },
    _startMagneticScroll: function () {
        if (!(0 ===
                this._items.length || this._magneticType === ccui.ListView.MAGNETIC_NONE)) {
            var a = this._getAnchorPointByMagneticType(this._magneticType),
                b = cc.pMult(this._innerContainer.getPosition(), -1);
            b.x += this.width * a.x;
            b.y += this.height * a.y;
            b = this.getClosestItemToPosition(b, a);
            this.scrollToItem(this.getIndex(b), a, a)
        }
    }
});
ccui.ListView.create = function () {
    return new ccui.ListView
};
ccui.ListView.EVENT_SELECTED_ITEM = 0;
ccui.ListView.ON_SELECTED_ITEM_START = 0;
ccui.ListView.ON_SELECTED_ITEM_END = 1;
ccui.ListView.GRAVITY_LEFT = 0;
ccui.ListView.GRAVITY_RIGHT = 1;
ccui.ListView.GRAVITY_CENTER_HORIZONTAL = 2;
ccui.ListView.GRAVITY_TOP = 3;
ccui.ListView.GRAVITY_BOTTOM = 4;
ccui.ListView.GRAVITY_CENTER_VERTICAL = 5;
ccui.ListView.MAGNETIC_NONE = 0;
ccui.ListView.MAGNETIC_CENTER = 1;
ccui.ListView.MAGNETIC_BOTH_END = 2;
ccui.ListView.MAGNETIC_LEFT = 3;
ccui.ListView.MAGNETIC_RIGHT = 4;
ccui.ListView.MAGNETIC_TOP = 5;
ccui.ListView.MAGNETIC_BOTTOM = 6;
ccui.PageView = ccui.ListView.extend({
    _curPageIdx: 0,
    _childFocusCancelOffset: 0,
    _pageViewEventListener: null,
    _pageViewEventSelector: null,
    _className: "PageView",
    _indicator: null,
    _indicatorPositionAsAnchorPoint: null,
    ctor: function () {
        ccui.ListView.prototype.ctor.call(this);
        this._childFocusCancelOffset = 5;
        this._indicatorPositionAsAnchorPoint = cc.p(0.5, 0.1);
        this._pageViewEventSelector = this._pageViewEventListener = null;
        this.setDirection(ccui.ScrollView.DIR_HORIZONTAL);
        this.setMagneticType(ccui.ListView.MAGNETIC_CENTER);
        this.setScrollBarEnabled(!1)
    },
    addWidgetToPage: function (a, b, c) {
        this.insertCustomItem(a, b)
    },
    addPage: function (a) {
        this.pushBackCustomItem(a)
    },
    insertPage: function (a, b) {
        this.insertCustomItem(a, b)
    },
    removePage: function (a) {
        this.removeItem(this.getIndex(a))
    },
    removePageAtIndex: function (a) {
        this.removeItem(a)
    },
    removeAllPages: function () {
        this.removeAllItems()
    },
    scrollToItem: function (a) {
        ccui.ListView.prototype.scrollToItem.call(this, a, cc.p(0.5, 0.5), cc.p(0.5, 0.5))
    },
    scrollToPage: function (a) {
        this.scrollToItem(a)
    },
    _doLayout: function () {
        if (this._refreshViewDirty) {
            ccui.ListView.prototype._doLayout.call(this);
            if (this._indicator) {
                var a = this.getIndex(this.getCenterItemInCurrentView());
                this._indicator.indicate(a)
            }
            this._refreshViewDirty = !1
        }
    },
    setDirection: function (a) {
        ccui.ListView.prototype.setDirection.call(this, a);
        a === ccui.ScrollView.DIR_HORIZONTAL ? this._indicatorPositionAsAnchorPoint = cc.p(0.5, 0.1) : a === ccui.ScrollView.DIR_VERTICAL && (this._indicatorPositionAsAnchorPoint = cc.p(0.1, 0.5));
        this._indicator && (this._indicator.setDirection(a), this._refreshIndicatorPosition())
    },
    setCustomScrollThreshold: function (a) {},
    getCustomScrollThreshold: function () {
        return 0
    },
    setUsingCustomScrollThreshold: function (a) {},
    isUsingCustomScrollThreshold: function () {
        return !1
    },
    _moveInnerContainer: function (a, b) {
        ccui.ListView.prototype._moveInnerContainer.call(this, a, b);
        this._curPageIdx = this.getIndex(this.getCenterItemInCurrentView());
        this._indicator && this._indicator.indicate(this._curPageIdx)
    },
    _onItemListChanged: function () {
        ccui.ListView.prototype._onItemListChanged.call(this);
        this._indicator && this._indicator.reset(this._items.length)
    },
    _onSizeChanged: function () {
        ccui.ListView.prototype._onSizeChanged.call(this);
        this._refreshIndicatorPosition()
    },
    _remedyLayoutParameter: function (a) {
        a.setContentSize(this.getContentSize());
        ccui.ListView.prototype._remedyLayoutParameter.call(this, a)
    },
    _refreshIndicatorPosition: function () {
        if (this._indicator) {
            var a = this.getContentSize();
            this._indicator.setPosition(cc.p(a.width * this._indicatorPositionAsAnchorPoint.x, a.height * this._indicatorPositionAsAnchorPoint.y))
        }
    },
    _handleReleaseLogic: function (a) {
        ccui.ScrollView.prototype._handleReleaseLogic.call(this,
            a);
        if (!(0 >= this._items.length))
            if (a = this._flattenVectorByDirection(this._calculateTouchMoveVelocity()), 500 > cc.pLength(a)) this._startMagneticScroll();
            else {
                var b = this.getItem(this._curPageIdx),
                    b = this._calculateItemDestination(cc.p(0.5, 0.5), b, cc.p(0.5, 0.5)),
                    b = cc.pSub(b, this.getInnerContainerPosition()),
                    b = this._flattenVectorByDirection(b);
                0 < a.x * b.x || 0 < a.y * b.y ? this._startMagneticScroll() : (0 > a.x || 0 < a.y ? ++this._curPageIdx : --this._curPageIdx, this._curPageIdx = Math.min(this._curPageIdx, this._items.length),
                    this._curPageIdx = Math.max(this._curPageIdx, 0), this.scrollToItem(this._curPageIdx))
            }
    },
    _getAutoScrollStopEpsilon: function () {
        return 0.0010
    },
    _pageTurningEvent: function () {
        this._pageViewEventSelector && (this._pageViewEventListener ? this._pageViewEventSelector.call(this._pageViewEventListener, this, ccui.PageView.EVENT_TURNING) : this._pageViewEventSelector(this, ccui.PageView.EVENT_TURNING));
        this._ccEventCallback && this._ccEventCallback(this, ccui.PageView.EVENT_TURNING)
    },
    addEventListenerPageView: function (a, b) {
        this._pageViewEventSelector =
            a;
        this._pageViewEventListener = b
    },
    addEventListener: function (a) {
        this._ccEventCallback = function (b, c) {
            c == ccui.ScrollView.EVENT_AUTOSCROLL_ENDED && a(this, c)
        }
    },
    setCurrentPageIndex: function (a) {
        this.jumpToItem(a, cc.p(0.5, 0.5), cc.p(0.5, 0.5))
    },
    setCurPageIndex: function (a) {
        this.setCurrentPageIndex(a)
    },
    getCurrentPageIndex: function () {
        return this._curPageIdx
    },
    getCurPageIndex: function () {
        var a = this.getCenterItemInCurrentView();
        return this.getIndex(a)
    },
    getPages: function () {
        return this.getItems()
    },
    getPage: function (a) {
        return this.getItem(a)
    },
    getDescription: function () {
        return "PageView"
    },
    _createCloneInstance: function () {
        return new ccui.PageView
    },
    _copyClonedWidgetChildren: function (a) {
        a = a.getPages();
        for (var b = 0; b < a.length; b++) this.addPage(a[b].clone())
    },
    _copySpecialProperties: function (a) {
        ccui.ListView.prototype._copySpecialProperties.call(this, a);
        this._ccEventCallback = a._ccEventCallback;
        this._pageViewEventListener = a._pageViewEventListener;
        this._pageViewEventSelector = a._pageViewEventSelector;
        this._customScrollThreshold = a._customScrollThreshold
    },
    setIndicatorEnabled: function (a) {
        a != (null !== this._indicator) && (a ? (this._indicator = new ccui.PageViewIndicator, this._indicator.setDirection(this.getDirection()), this.addProtectedChild(this._indicator, 1E4), this.setIndicatorSelectedIndexColor(cc.color(100, 100, 255)), this._refreshIndicatorPosition()) : (this.removeProtectedChild(this._indicator), this._indicator = null))
    },
    getIndicatorEnabled: function () {
        return null !== this._indicator
    },
    setIndicatorPositionAsAnchorPoint: function (a) {
        this._indicatorPositionAsAnchorPoint =
            a;
        this._refreshIndicatorPosition()
    },
    getIndicatorPositionAsAnchorPoint: function () {
        return this._indicatorPositionAsAnchorPoint
    },
    setIndicatorPosition: function (a) {
        if (this._indicator) {
            var b = this.getContentSize();
            this._indicatorPositionAsAnchorPoint.x = a.x / b.width;
            this._indicatorPositionAsAnchorPoint.y = a.y / b.height;
            this._indicator.setPosition(a)
        }
    },
    getIndicatorPosition: function () {
        cc.assert(null !== this._indicator, "");
        return this._indicator.getPosition()
    },
    setIndicatorSpaceBetweenIndexNodes: function (a) {
        this._indicator &&
            this._indicator.setSpaceBetweenIndexNodes(a)
    },
    getIndicatorSpaceBetweenIndexNodes: function () {
        cc.assert(null !== this._indicator, "");
        return this._indicator.getSpaceBetweenIndexNodes()
    },
    setIndicatorSelectedIndexColor: function (a) {
        this._indicator && this._indicator.setSelectedIndexColor(a)
    },
    getIndicatorSelectedIndexColor: function () {
        cc.assert(null !== this._indicator, "");
        return this._indicator.getSelectedIndexColor()
    },
    setIndicatorIndexNodesColor: function (a) {
        this._indicator && this._indicator.setIndexNodesColor(a)
    },
    getIndicatorIndexNodesColor: function () {
        cc.assert(null !== this._indicator, "");
        return this._indicator.getIndexNodesColor()
    },
    setIndicatorIndexNodesScale: function (a) {
        this._indicator && (this._indicator.setIndexNodesScale(a), this._indicator.indicate(this._curPageIdx))
    },
    getIndicatorIndexNodesScale: function () {
        cc.assert(null !== this._indicator, "");
        return this._indicator.getIndexNodesScale()
    },
    setIndicatorIndexNodesTexture: function (a, b) {
        this._indicator && (this._indicator.setIndexNodesTexture(a, b), this._indicator.indicate(this._curPageIdx))
    }
});
ccui.PageView.create = function () {
    return new ccui.PageView
};
ccui.PageView.EVENT_TURNING = 0;
ccui.PageView.TOUCH_DIR_LEFT = 0;
ccui.PageView.TOUCH_DIR_RIGHT = 1;
ccui.PageView.DIRECTION_LEFT = 0;
ccui.PageView.DIRECTION_RIGHT = 1;
ccui.PageViewIndicator = ccui.ProtectedNode.extend({
    _direction: null,
    _indexNodes: null,
    _currentIndexNode: null,
    _spaceBetweenIndexNodes: 0,
    _indexNodesScale: 1,
    _indexNodesColor: null,
    _useDefaultTexture: !0,
    _indexNodesTextureFile: "",
    _indexNodesTexType: ccui.Widget.LOCAL_TEXTURE,
    _className: "PageViewIndicator",
    ctor: function () {
        cc.ProtectedNode.prototype.ctor.call(this);
        this._direction = ccui.ScrollView.DIR_HORIZONTAL;
        this._indexNodes = [];
        this._spaceBetweenIndexNodes = ccui.PageViewIndicator.SPACE_BETWEEN_INDEX_NODES_DEFAULT;
        this._indexNodesColor = cc.color.WHITE;
        this._currentIndexNode = ccui.helper._createSpriteFromBase64(ccui.PageViewIndicator.CIRCLE_IMAGE, ccui.PageViewIndicator.CIRCLE_IMAGE_KEY);
        this._currentIndexNode.setVisible(!1);
        this.addProtectedChild(this._currentIndexNode, 1)
    },
    setDirection: function (a) {
        this._direction = a;
        this._rearrange()
    },
    reset: function (a) {
        for (; this._indexNodes.length < a;) this._increaseNumberOfPages();
        for (; this._indexNodes.length > a;) this._decreaseNumberOfPages();
        this._rearrange();
        this._currentIndexNode.setVisible(0 <
            this._indexNodes.length)
    },
    indicate: function (a) {
        0 > a || a >= this._indexNodes.length || this._currentIndexNode.setPosition(this._indexNodes[a].getPosition())
    },
    _rearrange: function () {
        if (0 !== this._indexNodes.length)
            for (var a = this._direction === ccui.ScrollView.DIR_HORIZONTAL, b = this._indexNodes[0].getContentSize(), c = a ? b.width : b.height, d = this._indexNodes.length, d = -((c * d + this._spaceBetweenIndexNodes * (d - 1)) / 2) + c / 2, f = 0; f < this._indexNodes.length; ++f) {
                var g;
                g = a ? cc.p(d, b.height / 2) : cc.p(b.width / 2, -d);
                this._indexNodes[f].setPosition(g);
                d += c + this._spaceBetweenIndexNodes
            }
    },
    setSpaceBetweenIndexNodes: function (a) {
        this._spaceBetweenIndexNodes !== a && (this._spaceBetweenIndexNodes = a, this._rearrange())
    },
    getSpaceBetweenIndexNodes: function () {
        return this._spaceBetweenIndexNodes
    },
    setSelectedIndexColor: function (a) {
        this._currentIndexNode.setColor(a)
    },
    getSelectedIndexColor: function () {
        return this._currentIndexNode.getColor()
    },
    setIndexNodesColor: function (a) {
        this._indexNodesColor = a;
        for (var b = 0; b < this._indexNodes.length; ++b) this._indexNodes[b].setColor(a)
    },
    getIndexNodesColor: function () {
        var a = this._indexNodesColor;
        return cc.color(a.r, a.g, a.b, a.a)
    },
    setIndexNodesScale: function (a) {
        if (this._indexNodesScale !== a) {
            this._indexNodesScale = a;
            this._currentIndexNode.setScale(a);
            for (a = 0; a < this._indexNodes.length; ++a) this._indexNodes[a].setScale(this, _indexNodesScale);
            this._rearrange()
        }
    },
    getIndexNodesScale: function () {
        return this._indexNodesScale
    },
    setIndexNodesTexture: function (a, b) {
        void 0 === b && (b = ccui.Widget.LOCAL_TEXTURE);
        this._useDefaultTexture = !1;
        this._indexNodesTextureFile =
            a;
        this._indexNodesTexType = b;
        switch (b) {
        case ccui.Widget.LOCAL_TEXTURE:
            this._currentIndexNode.setTexture(a);
            for (var c = 0; c < this._indexNodes.length; ++c) this._indexNodes[c].setTexture(a);
            break;
        case ccui.Widget.PLIST_TEXTURE:
            this._currentIndexNode.setSpriteFrame(a);
            for (c = 0; c < this._indexNodes.length; ++c) this._indexNodes[c].setSpriteFrame(a)
        }
        this._rearrange()
    },
    _increaseNumberOfPages: function () {
        var a;
        if (this._useDefaultTexture) a = ccui.helper._createSpriteFromBase64(ccui.PageViewIndicator.CIRCLE_IMAGE, ccui.PageViewIndicator.CIRCLE_IMAGE_KEY);
        else switch (a = new cc.Sprite, this._indexNodesTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
            a.initWithFile(this._indexNodesTextureFile);
            break;
        case ccui.Widget.PLIST_TEXTURE:
            a.initWithSpriteFrameName(this._indexNodesTextureFile)
        }
        a.setColor(this._indexNodesColor);
        a.setScale(this._indexNodesScale);
        this.addProtectedChild(a);
        this._indexNodes.push(a)
    },
    _decreaseNumberOfPages: function () {
        0 !== this._indexNodes.length && (this.removeProtectedChild(this._indexNodes[0]), this._indexNodes.splice(0, 1))
    },
    clear: function () {
        for (var a =
                0; a < this._indexNodes.length; ++a) this.removeProtectedChild(this._indexNodes[a]);
        this._indexNodes.length = 0;
        this._currentIndexNode.setVisible(!1)
    }
});
_p = ccui.PageViewIndicator.prototype;
cc.defineGetterSetter(_p, "spaceBetweenIndexNodes", _p.getSpaceBetweenIndexNodes, _p.setSpaceBetweenIndexNodes);
ccui.PageViewIndicator.SPACE_BETWEEN_INDEX_NODES_DEFAULT = 23;
ccui.PageViewIndicator.CIRCLE_IMAGE_KEY = "/__circle_image";
ccui.PageViewIndicator.CIRCLE_IMAGE = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAA8ElEQVRIx62VyRGCQBBF+6gWRCEmYDIQkhiBCgHhSclC8YqWzOV5oVzKAYZp3r1/9fpbxAIBMTsKrjx5cqVgR0wgLhCRUWOjJiPqD56xoaGPhpRZV/iSEy6crHmw5oIrF9b/lVeMofrJgjlnxlIy/wik+JB+mme8BExbBhm+5CJC2LE2LtSEQoyGWDioBA5CoRIohJtK4CYDxzNEM4GAugR1E9VjVC+SZpXvhCJCrjomESLvc17pDGX7bWmlh6UtpjPVCWy9zaJ0TD7qfm3pwERMz2trRVZk3K3BD/L34AY+dEDCniMVBkPFkT2J/b2/AIV+dRpFLOYoAAAAAElFTkSuQmCC";
(function () {
    if (ccui.ProtectedNode.CanvasRenderCmd) {
        ccui.ScrollView.CanvasRenderCmd = function (a) {
            this._layoutCmdCtor(a);
            this._dirty = !1
        };
        var a = ccui.ScrollView.CanvasRenderCmd.prototype = Object.create(ccui.Layout.CanvasRenderCmd.prototype);
        a.constructor = ccui.ScrollView.CanvasRenderCmd;
        a.rendering = function (a) {
            var c = cc.renderer._cacheToCanvasCmds[this._node.__instanceId],
                d, f = cc.view.getScaleX(),
                g = cc.view.getScaleY(),
                h = a || cc._renderContext;
            h.computeRealOffsetY();
            this._node.updateChildren();
            a = 0;
            for (d = c.length; a <
                d; a++) {
                var m = c[a]._node;
                m instanceof ccui.ScrollView || (!m || !(m._parent && !1 === m._parent._inViewRect)) && c[a].rendering(h, f, g)
            }
        }
    }
})();
(function () {
    if (ccui.ProtectedNode.WebGLRenderCmd) {
        ccui.ScrollView.WebGLRenderCmd = function (a) {
            this._layoutCmdCtor(a);
            this._needDraw = !0;
            this._dirty = !1
        };
        var a = ccui.ScrollView.WebGLRenderCmd.prototype = Object.create(ccui.Layout.WebGLRenderCmd.prototype);
        a.constructor = ccui.ScrollView.WebGLRenderCmd;
        a.rendering = function (a) {
            var c = cc.renderer._cacheToBufferCmds[this._node.__instanceId],
                d, f, g, h = a || cc._renderContext;
            if (c) {
                this._node.updateChildren();
                h.bindBuffer(gl.ARRAY_BUFFER, null);
                a = 0;
                for (d = c.length; a < d; a++)
                    if (g =
                        c[a], f = g._node, !f || !(f._parent && !1 === f._parent._inViewRect)) g.uploadData ? cc.renderer._uploadBufferData(g) : (0 < g._batchingSize && cc.renderer._batchRendering(), g.rendering(h)), cc.renderer._batchRendering()
            }
        }
    }
})();
cc.Component = cc.Class.extend({
    _owner: null,
    _name: "",
    _enabled: !0,
    ctor: function () {
        this._owner = null;
        this._name = "";
        this._enabled = !0
    },
    init: function () {
        return !0
    },
    onEnter: function () {},
    onExit: function () {},
    update: function (a) {},
    serialize: function (a) {},
    isEnabled: function () {
        return this._enabled
    },
    setEnabled: function (a) {
        this._enabled = a
    },
    getName: function () {
        return this._name
    },
    setName: function (a) {
        this._name = a
    },
    setOwner: function (a) {
        this._owner = a
    },
    getOwner: function () {
        return this._owner
    }
});
cc.Component.create = function () {
    return new cc.Component
};
cc.ComponentContainer = cc.Class.extend({
    _components: null,
    _owner: null,
    ctor: function (a) {
        this._components = null;
        this._owner = a
    },
    getComponent: function (a) {
        if (!a) throw Error("cc.ComponentContainer.getComponent(): name should be non-null");
        a = a.trim();
        this._components || (this._components = {});
        return this._components[a]
    },
    add: function (a) {
        if (!a) throw Error("cc.ComponentContainer.add(): component should be non-null");
        if (a.getOwner()) return cc.log("cc.ComponentContainer.add(): Component already added. It can't be added again"),
            !1;
        null == this._components && (this._components = {}, this._owner.scheduleUpdate());
        if (this._components[a.getName()]) return cc.log("cc.ComponentContainer.add(): Component already added. It can't be added again"), !1;
        a.setOwner(this._owner);
        this._components[a.getName()] = a;
        a.onEnter();
        return !0
    },
    remove: function (a) {
        if (!a) throw Error("cc.ComponentContainer.remove(): name should be non-null");
        if (!this._components) return !1;
        if (a instanceof cc.Component) return this._removeByComponent(a);
        a = a.trim();
        return this._removeByComponent(this._components[a])
    },
    _removeByComponent: function (a) {
        if (!a) return !1;
        a.onExit();
        a.setOwner(null);
        delete this._components[a.getName()];
        return !0
    },
    removeAll: function () {
        if (this._components) {
            var a = this._components,
                b;
            for (b in a) {
                var c = a[b];
                c.onExit();
                c.setOwner(null);
                delete a[b]
            }
            this._owner.unscheduleUpdate();
            this._components = null
        }
    },
    _alloc: function () {
        this._components = {}
    },
    visit: function (a) {
        if (this._components) {
            var b = this._components,
                c;
            for (c in b) b[c].update(a)
        }
    },
    isEmpty: function () {
        return !this._components ? !0 : 0 === this._components.length
    }
});
ccui.LayoutComponent_ReferencePoint = {
    BOTTOM_LEFT: 0,
    TOP_LEFT: 1,
    BOTTOM_RIGHT: 2,
    TOP_RIGHT: 3
};
ccui.LayoutComponent_PositionType = {
    Position: 0,
    RelativePosition: 1,
    PreRelativePosition: 2,
    PreRelativePositionEnable: 3
};
ccui.LayoutComponent_SizeType = {
    Size: 0,
    PreSize: 1,
    PreSizeEnable: 2
};
ccui.LayoutComponent = cc.Component.extend({
    _horizontalEdge: 0,
    _verticalEdge: 0,
    _leftMargin: 0,
    _rightMargin: 0,
    _bottomMargin: 0,
    _topMargin: 0,
    _usingPositionPercentX: !1,
    _positionPercentX: 0,
    _usingPositionPercentY: !1,
    _positionPercentY: 0,
    _usingStretchWidth: !1,
    _usingStretchHeight: !1,
    _percentWidth: 0,
    _usingPercentWidth: !1,
    _percentHeight: 0,
    _usingPercentHeight: !1,
    _actived: !0,
    _isPercentOnly: !1,
    ctor: function () {
        this._name = ccui.LayoutComponent.NAME
    },
    init: function () {
        return !cc.Component.prototype.init.call(this) ? !1 : !0
    },
    getPercentContentSize: function () {
        return cc.p(this._percentWidth, this._percentHeight)
    },
    setPercentContentSize: function (a) {
        this.setPercentWidth(a.x);
        this.setPercentHeight(a.y)
    },
    setUsingPercentContentSize: function (a) {
        this._usingPercentWidth = this._usingPercentHeight = a
    },
    SetActiveEnable: function (a) {
        this._actived = a
    },
    getUsingPercentContentSize: function () {
        return this._usingPercentWidth && this._usingPercentHeight
    },
    getAnchorPosition: function () {
        return this._owner.getAnchorPoint()
    },
    setAnchorPosition: function (a,
        b) {
        var c = this._owner.getBoundingBox();
        this._owner.setAnchorPoint(a, b);
        var d = this._owner.getBoundingBox(),
            f = c.x - d.x,
            c = c.y - d.y,
            d = this._owner.getPosition();
        d.x += f;
        d.y += c;
        this.setPosition(d)
    },
    getPosition: function () {
        return this._owner.getPosition()
    },
    setPosition: function (a, b) {
        var c = this._getOwnerParent(),
            d;
        null != c ? (void 0 === b ? (d = a.x, b = a.y) : d = a, c = c.getContentSize(), 0 !== c.width ? this._positionPercentX = d / c.width : (this._positionPercentX = 0, this._usingPositionPercentX && (d = 0)), 0 !== c.height ? this._positionPercentY =
            b / c.height : (this._positionPercentY = 0, this._usingPositionPercentY && (b = 0)), this._owner.setPosition(d, b), this._refreshHorizontalMargin(), this._refreshVerticalMargin()) : this._owner.setPosition(a, b)
    },
    isPositionPercentXEnabled: function () {
        return this._usingPositionPercentX
    },
    setPositionPercentXEnabled: function (a) {
        if (this._usingPositionPercentX = a) this._horizontalEdge = ccui.LayoutComponent.horizontalEdge.NONE
    },
    getPositionPercentX: function () {
        return this._positionPercentX
    },
    setPositionPercentX: function (a) {
        this._positionPercentX =
            a;
        a = this._getOwnerParent();
        null !== a && (this._owner.setPositionX(a.width * this._positionPercentX), this._refreshHorizontalMargin())
    },
    isPositionPercentYEnabled: function () {
        return this._usingPositionPercentY
    },
    setPositionPercentYEnabled: function (a) {
        if (this._usingPositionPercentY = a) this._verticalEdge = ccui.LayoutComponent.verticalEdge.NONE
    },
    getPositionPercentY: function () {
        return this._positionPercentY
    },
    setPositionPercentY: function (a) {
        this._positionPercentY = a;
        a = this._getOwnerParent();
        null !== a && (this._owner.setPositionY(a.height *
            this._positionPercentY), this._refreshVerticalMargin())
    },
    getHorizontalEdge: function () {
        return this._horizontalEdge
    },
    setHorizontalEdge: function (a) {
        this._horizontalEdge = a;
        this._horizontalEdge !== ccui.LayoutComponent.horizontalEdge.NONE && (this._usingPositionPercentX = !1);
        var b = this._getOwnerParent();
        null !== b && (a = this._owner.getPosition(), b = b.getContentSize(), 0 !== b.width ? this._positionPercentX = a.x / b.width : (this._positionPercentX = 0, a.x = 0, this._usingPositionPercentX && this._owner.setPosition(a)), this._refreshHorizontalMargin())
    },
    getVerticalEdge: function () {
        return this._verticalEdge
    },
    setVerticalEdge: function (a) {
        this._verticalEdge = a;
        this._verticalEdge !== ccui.LayoutComponent.verticalEdge.NONE && (this._usingPositionPercentY = !1);
        var b = this._getOwnerParent();
        null !== b && (a = this._owner.getPosition(), b = b.getContentSize(), 0 !== b.height ? this._positionPercentY = a.y / b.height : (this._positionPercentY = 0, a.y = 0, this._usingPositionPercentY && this._owner.setPosition(a)), this._refreshVerticalMargin())
    },
    getLeftMargin: function () {
        return this._leftMargin
    },
    setLeftMargin: function (a) {
        this._leftMargin = a
    },
    getRightMargin: function () {
        return this._rightMargin
    },
    setRightMargin: function (a) {
        this._rightMargin = a
    },
    getTopMargin: function () {
        return this._topMargin
    },
    setTopMargin: function (a) {
        this._topMargin = a
    },
    getBottomMargin: function () {
        return this._bottomMargin
    },
    setBottomMargin: function (a) {
        this._bottomMargin = a
    },
    getSize: function () {
        return this.getOwner().getContentSize()
    },
    setSize: function (a) {
        var b = this._getOwnerParent();
        null !== b ? (b = b.getContentSize(), 0 !== b.width ? this._percentWidth =
            a.width / b.width : (this._percentWidth = 0, this._usingPercentWidth && (a.width = 0)), 0 !== b.height ? this._percentHeight = a.height / b.height : (this._percentHeight = 0, this._usingPercentHeight && (a.height = 0)), this._owner.setContentSize(a), this._refreshHorizontalMargin(), this._refreshVerticalMargin()) : this._owner.setContentSize(a)
    },
    isPercentWidthEnabled: function () {
        return this._usingPercentWidth
    },
    setPercentWidthEnabled: function (a) {
        if (this._usingPercentWidth = a) this._usingStretchWidth = !1
    },
    getSizeWidth: function () {
        return this._owner.width
    },
    setSizeWidth: function (a) {
        var b = this._owner.getContentSize();
        b.width = a;
        a = this._getOwnerParent();
        null !== a ? (a = a.getContentSize(), 0 !== a.width ? this._percentWidth = b.width / a.width : (this._percentWidth = 0, this._usingPercentWidth && (b.width = 0)), this._owner.setContentSize(b), this._refreshHorizontalMargin()) : this._owner.setContentSize(b)
    },
    getPercentWidth: function () {
        return this._percentWidth
    },
    setPercentWidth: function (a) {
        this._percentWidth = a;
        a = this._getOwnerParent();
        if (null !== a) {
            var b = this._owner.getContentSize();
            b.width = a.width * this._percentWidth;
            this._owner.setContentSize(b);
            this._refreshHorizontalMargin()
        }
    },
    isPercentHeightEnabled: function () {
        return this._usingPercentHeight
    },
    setPercentHeightEnabled: function (a) {
        if (this._usingPercentHeight = a) this._usingStretchHeight = !1
    },
    getSizeHeight: function () {
        return this._owner.height
    },
    setSizeHeight: function (a) {
        var b = this._owner.getContentSize();
        b.height = a;
        a = this._getOwnerParent();
        null !== a ? (a = a.getContentSize(), 0 !== a.height ? this._percentHeight = b.height / a.height : (this._percentHeight =
            0, this._usingPercentHeight && (b.height = 0)), this._owner.setContentSize(b), this._refreshVerticalMargin()) : this._owner.setContentSize(b)
    },
    getPercentHeight: function () {
        return this._percentHeight
    },
    setPercentHeight: function (a) {
        this._percentHeight = a;
        a = this._getOwnerParent();
        if (null !== a) {
            var b = this._owner.getContentSize();
            b.height = a.height * this._percentHeight;
            this._owner.setContentSize(b);
            this._refreshVerticalMargin()
        }
    },
    isStretchWidthEnabled: function () {
        return this._usingStretchWidth
    },
    setStretchWidthEnabled: function (a) {
        if (this._usingStretchWidth =
            a) this._usingPercentWidth = !1
    },
    isStretchHeightEnabled: function () {
        return this._usingStretchHeight
    },
    setStretchHeightEnabled: function (a) {
        if (this._usingStretchHeight = a) this._usingPercentHeight = !1
    },
    setPercentOnlyEnabled: function (a) {
        this._isPercentOnly = a
    },
    setActiveEnabled: function (a) {
        this._actived = a
    },
    refreshLayout: function () {
        if (this._actived) {
            var a = this._getOwnerParent();
            if (null !== a) {
                var a = a.getContentSize(),
                    b = this._owner,
                    c = b.getAnchorPoint(),
                    d = b.getContentSize(),
                    f = b.getPosition();
                switch (this._horizontalEdge) {
                case ccui.LayoutComponent.horizontalEdge.NONE:
                    this._usingStretchWidth &&
                        !this._isPercentOnly ? (d.width = a.width * this._percentWidth, f.x = this._leftMargin + c.x * d.width) : (this._usingPositionPercentX && (f.x = a.width * this._positionPercentX), this._usingPercentWidth && (d.width = a.width * this._percentWidth));
                    break;
                case ccui.LayoutComponent.horizontalEdge.LEFT:
                    if (this._isPercentOnly) break;
                    if (this._usingPercentWidth || this._usingStretchWidth) d.width = a.width * this._percentWidth;
                    f.x = this._leftMargin + c.x * d.width;
                    break;
                case ccui.LayoutComponent.horizontalEdge.RIGHT:
                    if (this._isPercentOnly) break;
                    if (this._usingPercentWidth || this._usingStretchWidth) d.width = a.width * this._percentWidth;
                    f.x = a.width - (this._rightMargin + (1 - c.x) * d.width);
                    break;
                case ccui.LayoutComponent.horizontalEdge.CENTER:
                    if (this._isPercentOnly) break;
                    this._usingStretchWidth ? (d.width = a.width - this._leftMargin - this._rightMargin, 0 > d.width && (d.width = 0), f.x = this._leftMargin + c.x * d.width) : (this._usingPercentWidth && (d.width = a.width * this._percentWidth), f.x = a.width * this._positionPercentX)
                }
                switch (this._verticalEdge) {
                case ccui.LayoutComponent.verticalEdge.NONE:
                    this._usingStretchHeight &&
                        !this._isPercentOnly ? (d.height = a.height * this._percentHeight, f.y = this._bottomMargin + c.y * d.height) : (this._usingPositionPercentY && (f.y = a.height * this._positionPercentY), this._usingPercentHeight && (d.height = a.height * this._percentHeight));
                    break;
                case ccui.LayoutComponent.verticalEdge.BOTTOM:
                    if (this._isPercentOnly) break;
                    if (this._usingPercentHeight || this._usingStretchHeight) d.height = a.height * this._percentHeight;
                    f.y = this._bottomMargin + c.y * d.height;
                    break;
                case ccui.LayoutComponent.verticalEdge.TOP:
                    if (this._isPercentOnly) break;
                    if (this._usingPercentHeight || this._usingStretchHeight) d.height = a.height * this._percentHeight;
                    f.y = a.height - (this._topMargin + (1 - c.y) * d.height);
                    break;
                case ccui.LayoutComponent.verticalEdge.CENTER:
                    if (this._isPercentOnly) break;
                    this._usingStretchHeight ? (d.height = a.height - this._topMargin - this._bottomMargin, 0 > d.height && (d.height = 0), f.y = this._bottomMargin + c.y * d.height) : (this._usingPercentHeight && (d.height = a.height * this._percentHeight), f.y = a.height * this._positionPercentY)
                }
                b.setPosition(f);
                b.setContentSize(d);
                if (b instanceof ccui.PageView) {
                    b.forceDoLayout();
                    a = b.getPages();
                    for (b = 0; b < a.length; b++) ccui.helper.doLayout(a[b])
                } else ccui.helper.doLayout(b)
            }
        }
    },
    _getOwnerParent: function () {
        return this._owner ? this._owner.getParent() : null
    },
    _refreshHorizontalMargin: function () {
        var a = this._getOwnerParent();
        if (null !== a) {
            var b = this._owner.getPosition(),
                c = this._owner.getAnchorPoint(),
                d = this._owner.getContentSize(),
                a = a.getContentSize();
            this._leftMargin = b.x - c.x * d.width;
            this._rightMargin = a.width - (b.x + (1 - c.x) * d.width)
        }
    },
    _refreshVerticalMargin: function () {
        var a =
            this._getOwnerParent();
        if (null !== a) {
            var b = this._owner.getPosition(),
                c = this._owner.getAnchorPoint(),
                d = this._owner.getContentSize(),
                a = a.getContentSize();
            this._bottomMargin = b.y - c.y * d.height;
            this._topMargin = a.height - (b.y + (1 - c.y) * d.height)
        }
    }
});
ccui.LayoutComponent.horizontalEdge = {
    NONE: 0,
    LEFT: 1,
    RIGHT: 2,
    CENTER: 3
};
ccui.LayoutComponent.verticalEdge = {
    NONE: 0,
    BOTTOM: 1,
    TOP: 2,
    CENTER: 3
};
ccui.LayoutComponent.NAME = "__ui_layout";
ccui.LayoutComponent.bindLayoutComponent = function (a) {
    var b = a.getComponent(ccui.LayoutComponent.NAME);
    if (void 0 !== b) return b;
    b = new ccui.LayoutComponent;
    b.init();
    a.addComponent(b);
    a instanceof ccui.Widget || a.addEventListener && a.addEventListener("load", function () {
        b.refreshLayout()
    }, this);
    return b
};
var ccs = ccs || {};
ccs.Class = ccs.Class || cc.Class;
ccs.Class.extend = ccs.Class.extend || cc.Class.extend;
ccs.Node = ccs.Node || cc.Node;
ccs.Node.extend = ccs.Node.extend || cc.Node.extend;
ccs.Sprite = ccs.Sprite || cc.Sprite;
ccs.Sprite.extend = ccs.Sprite.extend || cc.Sprite.extend;
ccs.Component = ccs.Component || cc.Component;
ccs.Component.extend = ccs.Component.extend || cc.Component.extend;
ccs.cocostudioVersion = "v1.3.0.0";
ccs.VERSION_COMBINED = 0.3;
ccs.VERSION_CHANGE_ROTATION_RANGE = 1;
ccs.VERSION_COLOR_READING = 1.1;
ccs.MAX_VERTEXZ_VALUE = 5E6;
ccs.ARMATURE_MAX_CHILD = 50;
ccs.ARMATURE_MAX_ZORDER = 100;
ccs.ARMATURE_MAX_COUNT = ccs.MAX_VERTEXZ_VALUE / ccs.ARMATURE_MAX_CHILD / ccs.ARMATURE_MAX_ZORDER;
ccs.AUTO_ADD_SPRITE_FRAME_NAME_PREFIX = !1;
ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT = !1;
ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX = !1;
ccs.armatureVersion = function () {
    return "v1.1.0.0"
};
ccs.CONST_VERSION = "version";
ccs.CONST_VERSION_2_0 = 2;
ccs.CONST_VERSION_COMBINED = 0.3;
ccs.CONST_ARMATURES = "armatures";
ccs.CONST_ARMATURE = "armature";
ccs.CONST_BONE = "b";
ccs.CONST_DISPLAY = "d";
ccs.CONST_ANIMATIONS = "animations";
ccs.CONST_ANIMATION = "animation";
ccs.CONST_MOVEMENT = "mov";
ccs.CONST_FRAME = "f";
ccs.CONST_TEXTURE_ATLAS = "TextureAtlas";
ccs.CONST_SUB_TEXTURE = "SubTexture";
ccs.CONST_SKELETON = "skeleton";
ccs.CONST_A_NAME = "name";
ccs.CONST_A_DURATION = "dr";
ccs.CONST_A_FRAME_INDEX = "fi";
ccs.CONST_A_DURATION_TO = "to";
ccs.CONST_A_DURATION_TWEEN = "drTW";
ccs.CONST_A_LOOP = "lp";
ccs.CONST_A_MOVEMENT_SCALE = "sc";
ccs.CONST_A_MOVEMENT_DELAY = "dl";
ccs.CONST_A_DISPLAY_INDEX = "dI";
ccs.CONST_A_PLIST = "plist";
ccs.CONST_A_PARENT = "parent";
ccs.CONST_A_SKEW_X = "kX";
ccs.CONST_A_SKEW_Y = "kY";
ccs.CONST_A_SCALE_X = "cX";
ccs.CONST_A_SCALE_Y = "cY";
ccs.CONST_A_Z = "z";
ccs.CONST_A_EVENT = "evt";
ccs.CONST_A_SOUND = "sd";
ccs.CONST_A_SOUND_EFFECT = "sdE";
ccs.CONST_A_TWEEN_EASING = "twE";
ccs.CONST_A_EASING_PARAM = "twEP";
ccs.CONST_A_TWEEN_ROTATE = "twR";
ccs.CONST_A_IS_ARMATURE = "isArmature";
ccs.CONST_A_DISPLAY_TYPE = "displayType";
ccs.CONST_A_MOVEMENT = "mov";
ccs.CONST_A_X = "x";
ccs.CONST_A_Y = "y";
ccs.CONST_A_COCOS2DX_X = "cocos2d_x";
ccs.CONST_A_COCOS2DX_Y = "cocos2d_y";
ccs.CONST_A_WIDTH = "width";
ccs.CONST_A_HEIGHT = "height";
ccs.CONST_A_PIVOT_X = "pX";
ccs.CONST_A_PIVOT_Y = "pY";
ccs.CONST_A_COCOS2D_PIVOT_X = "cocos2d_pX";
ccs.CONST_A_COCOS2D_PIVOT_Y = "cocos2d_pY";
ccs.CONST_A_BLEND_TYPE = "bd";
ccs.CONST_A_BLEND_SRC = "bd_src";
ccs.CONST_A_BLEND_DST = "bd_dst";
ccs.CONST_A_ALPHA = "a";
ccs.CONST_A_RED = "r";
ccs.CONST_A_GREEN = "g";
ccs.CONST_A_BLUE = "b";
ccs.CONST_A_ALPHA_OFFSET = "aM";
ccs.CONST_A_RED_OFFSET = "rM";
ccs.CONST_A_GREEN_OFFSET = "gM";
ccs.CONST_A_BLUE_OFFSET = "bM";
ccs.CONST_A_COLOR_TRANSFORM = "colorTransform";
ccs.CONST_A_TWEEN_FRAME = "tweenFrame";
ccs.CONST_CONTOUR = "con";
ccs.CONST_CONTOUR_VERTEX = "con_vt";
ccs.CONST_FL_NAN = "NaN";
ccs.CONST_FRAME_DATA = "frame_data";
ccs.CONST_MOVEMENT_BONE_DATA = "mov_bone_data";
ccs.CONST_MOVEMENT_DATA = "mov_data";
ccs.CONST_ANIMATION_DATA = "animation_data";
ccs.CONST_DISPLAY_DATA = "display_data";
ccs.CONST_SKIN_DATA = "skin_data";
ccs.CONST_BONE_DATA = "bone_data";
ccs.CONST_ARMATURE_DATA = "armature_data";
ccs.CONST_CONTOUR_DATA = "contour_data";
ccs.CONST_TEXTURE_DATA = "texture_data";
ccs.CONST_VERTEX_POINT = "vertex";
ccs.CONST_COLOR_INFO = "color";
ccs.CONST_CONFIG_FILE_PATH = "config_file_path";
ccs.CONST_CONTENT_SCALE = "content_scale";
ccs.DataInfo = function () {
    this.asyncStruct = null;
    this.configFileQueue = [];
    this.contentScale = 1;
    this.baseFilePath = this.filename = "";
    this.cocoStudioVersion = this.flashToolVersion = 0
};
ccs.dataReaderHelper = {
    ConfigType: {
        DragonBone_XML: 0,
        CocoStudio_JSON: 1,
        CocoStudio_Binary: 2
    },
    _configFileList: [],
    _flashToolVersion: ccs.CONST_VERSION_2_0,
    _positionReadScale: 1,
    _asyncRefCount: 0,
    _asyncRefTotalCount: 0,
    _dataQueue: null,
    setPositionReadScale: function (a) {
        this._positionReadScale = a
    },
    getPositionReadScale: function () {
        return this._positionReadScale
    },
    addDataFromFile: function (a) {
        if (-1 === this._configFileList.indexOf(a)) {
            this._configFileList.push(a);
            var b = this._initBaseFilePath(a),
                c = cc.path.extname(a).toLowerCase(),
                d = new ccs.DataInfo;
            d.filename = a;
            d.basefilePath = b;
            ".xml" === c ? ccs.dataReaderHelper.addDataFromXML(a, d) : ".json" === c || ".exportjson" === c ? ccs.dataReaderHelper.addDataFromJson(a, d) : ".csb" === c && ccs.dataReaderHelper.addDataFromBinaryCache(a, d)
        }
    },
    addDataFromFileAsync: function (a, b, c, d, f) {
        if (-1 !== this._configFileList.indexOf(c)) f && d && (0 === this._asyncRefTotalCount && 0 === this._asyncRefCount ? this._asyncCallBack(d, f, 1) : this._asyncCallBack(d, f, (this._asyncRefTotalCount - this._asyncRefCount) / this._asyncRefTotalCount));
        else {
            this._asyncRefTotalCount++;
            this._asyncRefCount++;
            var g = this;
            cc.director.getScheduler().schedule(function () {
                g.addDataFromFile(c);
                g._asyncRefCount--;
                g._asyncCallBack(d, f, (g._asyncRefTotalCount - g._asyncRefCount) / g._asyncRefTotalCount)
            }, this, 0.1, !1, 0, !1, "armatrueDataHelper")
        }
    },
    removeConfigFile: function (a) {
        for (var b = this._configFileList, c = b.length, d = b[c], f = 0; f < c; f++) b[f] === a && (d = f);
        d !== b[c] && cc.arrayRemoveObject(b, a)
    },
    addDataFromCache: function (a, b) {
        if (a) {
            b.flashToolVersion = parseFloat(a.getAttribute(ccs.CONST_VERSION));
            var c = a.querySelectorAll(ccs.CONST_SKELETON + " > " + ccs.CONST_ARMATURES + " >  " + ccs.CONST_ARMATURE + ""),
                d = ccs.armatureDataManager,
                f;
            for (f = 0; f < c.length; f++) {
                var g = this.decodeArmature(c[f], b);
                d.addArmatureData(g.name, g, b.filename)
            }
            c = a.querySelectorAll(ccs.CONST_SKELETON + " > " + ccs.CONST_ANIMATIONS + " >  " + ccs.CONST_ANIMATION + "");
            for (f = 0; f < c.length; f++) g = this.decodeAnimation(c[f], b), d.addAnimationData(g.name, g, b.filename);
            c = a.querySelectorAll(ccs.CONST_SKELETON + " > " + ccs.CONST_TEXTURE_ATLAS +
                " >  " + ccs.CONST_SUB_TEXTURE + "");
            for (f = 0; f < c.length; f++) g = this.decodeTexture(c[f], b), d.addTextureData(g.name, g, b.filename)
        } else cc.log("XML error  or  XML is empty.")
    },
    decodeArmature: function (a, b) {
        var c = new ccs.ArmatureData;
        c.init();
        c.name = a.getAttribute(ccs.CONST_A_NAME);
        for (var d = a.querySelectorAll(ccs.CONST_ARMATURE + " > " + ccs.CONST_BONE), f = 0; f < d.length; f++) {
            var g = d[f],
                h = g.getAttribute(ccs.CONST_A_PARENT),
                m = null;
            if (h)
                for (var n = 0; n < d.length && !(m = d[n], h == d[n].getAttribute(ccs.CONST_A_NAME)); n++);
            g = this.decodeBone(g, m, b);
            c.addBoneData(g)
        }
        return c
    },
    decodeArmatureFromJSON: function (a, b) {
        var c = new ccs.ArmatureData;
        c.init();
        var d = a[ccs.CONST_A_NAME];
        d && (c.name = d);
        b.cocoStudioVersion = c.dataVersion = a[ccs.CONST_VERSION] || 0.1;
        for (var d = a[ccs.CONST_BONE_DATA], f = 0; f < d.length; f++) {
            var g = this.decodeBoneFromJson(d[f], b);
            c.addBoneData(g)
        }
        return c
    },
    decodeBone: function (a, b, c) {
        b = new ccs.BoneData;
        b.init();
        b.name = a.getAttribute(ccs.CONST_A_NAME);
        b.parentName = a.getAttribute(ccs.CONST_A_PARENT) || "";
        b.zOrder = parseInt(a.getAttribute(ccs.CONST_A_Z)) ||
            0;
        a = a.querySelectorAll(ccs.CONST_BONE + " > " + ccs.CONST_DISPLAY);
        for (var d = 0; d < a.length; d++) {
            var f = this.decodeBoneDisplay(a[d], c);
            b.addDisplayData(f)
        }
        return b
    },
    decodeBoneFromJson: function (a, b) {
        var c = new ccs.BoneData;
        c.init();
        this.decodeNodeFromJson(c, a, b);
        c.name = a[ccs.CONST_A_NAME] || "";
        c.parentName = a[ccs.CONST_A_PARENT] || "";
        for (var d = a[ccs.CONST_DISPLAY_DATA] || [], f = 0; f < d.length; f++) {
            var g = this.decodeBoneDisplayFromJson(d[f], b);
            c.addDisplayData(g)
        }
        return c
    },
    decodeBoneDisplay: function (a, b) {
        var c = null;
        1 === (parseFloat(a.getAttribute(ccs.CONST_A_IS_ARMATURE)) || 0) ? (c = new ccs.ArmatureDisplayData, c.displayType = ccs.DISPLAY_TYPE_ARMATURE) : (c = new ccs.SpriteDisplayData, c.displayType = ccs.DISPLAY_TYPE_SPRITE);
        var d = a.getAttribute(ccs.CONST_A_NAME) || "";
        d && (c.displayName = d);
        return c
    },
    decodeBoneDisplayFromJson: function (a, b) {
        var c = a[ccs.CONST_A_DISPLAY_TYPE] || ccs.DISPLAY_TYPE_SPRITE,
            d = null;
        switch (c) {
        case ccs.DISPLAY_TYPE_SPRITE:
            var d = new ccs.SpriteDisplayData,
                f = a[ccs.CONST_A_NAME];
            null != f && (d.displayName = f);
            if (f = (a[ccs.CONST_SKIN_DATA] || [])[0]) {
                var g = d.skinData;
                g.x = f[ccs.CONST_A_X] * this._positionReadScale;
                g.y = f[ccs.CONST_A_Y] * this._positionReadScale;
                g.scaleX = null == f[ccs.CONST_A_SCALE_X] ? 1 : f[ccs.CONST_A_SCALE_X];
                g.scaleY = null == f[ccs.CONST_A_SCALE_Y] ? 1 : f[ccs.CONST_A_SCALE_Y];
                g.skewX = null == f[ccs.CONST_A_SKEW_X] ? 1 : f[ccs.CONST_A_SKEW_X];
                g.skewY = null == f[ccs.CONST_A_SKEW_Y] ? 1 : f[ccs.CONST_A_SKEW_Y];
                g.x *= b.contentScale;
                g.y *= b.contentScale
            }
            break;
        case ccs.DISPLAY_TYPE_ARMATURE:
            d = new ccs.ArmatureDisplayData;
            f = a[ccs.CONST_A_NAME];
            null != f && (d.displayName = a[ccs.CONST_A_NAME]);
            break;
        case ccs.DISPLAY_TYPE_PARTICLE:
            d = new ccs.ParticleDisplayData;
            f = a[ccs.CONST_A_PLIST];
            null != f && (d.displayName = b.asyncStruct ? b.asyncStruct.basefilePath + f : b.basefilePath + f);
            break;
        default:
            d = new ccs.SpriteDisplayData
        }
        d.displayType = c;
        return d
    },
    decodeAnimation: function (a, b) {
        var c = new ccs.AnimationData,
            d = a.getAttribute(ccs.CONST_A_NAME),
            f = ccs.armatureDataManager.getArmatureData(d);
        c.name = d;
        for (var d = a.querySelectorAll(ccs.CONST_ANIMATION + " > " + ccs.CONST_MOVEMENT),
                g = null, h = 0; h < d.length; h++) g = d[h], g = this.decodeMovement(g, f, b), c.addMovement(g);
        return c
    },
    decodeAnimationFromJson: function (a, b) {
        var c = new ccs.AnimationData;
        a[ccs.CONST_A_NAME] && (c.name = a[ccs.CONST_A_NAME]);
        for (var d = a[ccs.CONST_MOVEMENT_DATA] || [], f = 0; f < d.length; f++) {
            var g = this.decodeMovementFromJson(d[f], b);
            c.addMovement(g)
        }
        return c
    },
    decodeMovement: function (a, b, c) {
        var d = new ccs.MovementData;
        d.name = a.getAttribute(ccs.CONST_A_NAME);
        var f;
        f = 0;
        f = a.getAttribute(ccs.CONST_A_DURATION);
        d.duration = null == f ?
            0 : parseFloat(f);
        f = a.getAttribute(ccs.CONST_A_DURATION_TO);
        d.durationTo = null == f ? 0 : parseFloat(f);
        f = a.getAttribute(ccs.CONST_A_DURATION_TWEEN);
        d.durationTween = null == f ? 0 : parseFloat(f);
        f = a.getAttribute(ccs.CONST_A_LOOP);
        d.loop = f ? Boolean(parseFloat(f)) : !0;
        if (f = a.getAttribute(ccs.CONST_A_TWEEN_EASING)) f != ccs.CONST_FL_NAN ? (f = null == f ? 0 : parseFloat(f), d.tweenEasing = 2 === f ? ccs.TweenType.SINE_EASEINOUT : f) : d.tweenEasing = ccs.TweenType.LINEAR;
        a = a.querySelectorAll(ccs.CONST_MOVEMENT + " > " + ccs.CONST_BONE);
        var g =
            null;
        for (f = 0; f < a.length; f++) {
            var g = a[f],
                h = g.getAttribute(ccs.CONST_A_NAME);
            if (!d.getMovementBoneData(h)) {
                var h = b.getBoneData(h),
                    m = h.parentName,
                    n = null;
                if ("" !== m)
                    for (var p = 0; p < a.length && !(n = a[p], m === n.getAttribute(ccs.CONST_A_NAME)); p++);
                g = this.decodeMovementBone(g, n, h, c);
                d.addMovementBoneData(g)
            }
        }
        return d
    },
    decodeMovementFromJson: function (a, b) {
        var c = new ccs.MovementData;
        c.loop = null == a[ccs.CONST_A_LOOP] ? !1 : a[ccs.CONST_A_LOOP];
        c.durationTween = a[ccs.CONST_A_DURATION_TWEEN] || 0;
        c.durationTo = a[ccs.CONST_A_DURATION_TO] ||
            0;
        c.duration = a[ccs.CONST_A_DURATION] || 0;
        c.scale = null == a[ccs.CONST_A_DURATION] ? 1 : null == a[ccs.CONST_A_MOVEMENT_SCALE] ? 1 : a[ccs.CONST_A_MOVEMENT_SCALE];
        c.tweenEasing = null == a[ccs.CONST_A_TWEEN_EASING] ? ccs.TweenType.LINEAR : a[ccs.CONST_A_TWEEN_EASING];
        var d = a[ccs.CONST_A_NAME];
        d && (c.name = d);
        for (var d = a[ccs.CONST_MOVEMENT_BONE_DATA] || [], f = 0; f < d.length; f++) {
            var g = this.decodeMovementBoneFromJson(d[f], b);
            c.addMovementBoneData(g)
        }
        return c
    },
    decodeMovementBone: function (a, b, c, d) {
        var f = new ccs.MovementBoneData;
        f.init();
        var g;
        a && (g = parseFloat(a.getAttribute(ccs.CONST_A_MOVEMENT_SCALE)) || 0, f.scale = g, g = parseFloat(a.getAttribute(ccs.CONST_A_MOVEMENT_DELAY)) || 0, 0 < g && (g -= 1), f.delay = g);
        var h = 0,
            m = g = 0,
            n = null,
            p = [];
        if (null != b) {
            for (var u = b.querySelectorAll(ccs.CONST_BONE + " > " + ccs.CONST_FRAME), h = 0; h < u.length; h++) p.push(u[h]);
            h = p.length
        }
        f.name = a.getAttribute(ccs.CONST_A_NAME);
        a = a.querySelectorAll(ccs.CONST_BONE + " > " + ccs.CONST_FRAME);
        for (var v = u = 0, x = 0; x < a.length; x++) {
            var y = a[x];
            if (b)
                for (; u < h && (n ? v < g || v >= g + m : 1);) n = p[u],
                    g += m, m = parseFloat(n.getAttribute(ccs.CONST_A_DURATION)), u++;
            y = this.decodeFrame(y, n, c, d);
            f.addFrameData(y);
            y.frameID = v;
            v += y.duration;
            f.duration = v
        }
        b = f.frameList;
        c = Math.PI;
        for (h = b.length - 1; 0 <= h; h--)
            if (0 < h) {
                d = b[h].skewX - b[h - 1].skewX;
                g = b[h].skewY - b[h - 1].skewY;
                if (d < -c || d > c) b[h - 1].skewX = 0 > d ? b[h - 1].skewX - 2 * c : b[h - 1].skewX + 2 * c;
                if (g < -c || g > c) b[h - 1].skewY = 0 > g ? b[h - 1].skewY - 2 * c : b[h - 1].skewY + 2 * c
            } b = new ccs.FrameData;
        b.copy(f.frameList[f.frameList.length - 1]);
        b.frameID = f.duration;
        f.addFrameData(b);
        return f
    },
    decodeMovementBoneFromJson: function (a,
        b) {
        var c = new ccs.MovementBoneData;
        c.init();
        c.delay = a[ccs.CONST_A_MOVEMENT_DELAY] || 0;
        var d = a[ccs.CONST_A_NAME];
        d && (c.name = d);
        for (var f = (a[ccs.CONST_FRAME_DATA] || []).length, d = 0; d < f; d++) {
            var g = this.decodeFrameFromJson(a[ccs.CONST_FRAME_DATA][d], b);
            c.addFrameData(g);
            b.cocoStudioVersion < ccs.CONST_VERSION_COMBINED && (g.frameID = c.duration, c.duration += g.duration)
        }
        if (b.cocoStudioVersion < ccs.VERSION_CHANGE_ROTATION_RANGE) {
            f = c.frameList;
            g = Math.PI;
            for (d = f.length - 1; 0 <= d; d--)
                if (0 < d) {
                    var h = f[d].skewX - f[d - 1].skewX,
                        m = f[d].skewY - f[d - 1].skewY;
                    if (h < -g || h > g) f[d - 1].skewX = 0 > h ? f[d - 1].skewX - 2 * g : f[d - 1].skewX + 2 * g;
                    if (m < -g || m > g) f[d - 1].skewY = 0 > m ? f[d - 1].skewY - 2 * g : f[d - 1].skewY + 2 * g
                }
        }
        b.cocoStudioVersion < ccs.CONST_VERSION_COMBINED && 0 < c.frameList.length && (g = new ccs.FrameData, g.copy(c.frameList[c.frameList.length - 1]), c.addFrameData(g), g.frameID = c.duration);
        return c
    },
    decodeFrame: function (a, b, c, d) {
        var f = 0,
            f = f = f = f = f = f = f = f = f = f = f = 0;
        c = new ccs.FrameData;
        c.strMovement = a.getAttribute(ccs.CONST_A_MOVEMENT) || "";
        c.movement = c.strMovement;
        c.strEvent =
            a.getAttribute(ccs.CONST_A_EVENT) || "";
        c.event = c.strEvent;
        c.strSound = a.getAttribute(ccs.CONST_A_SOUND) || "";
        c.sound = c.strSound;
        c.strSoundEffect = a.getAttribute(ccs.CONST_A_SOUND_EFFECT) || "";
        c.soundEffect = c.strSoundEffect;
        f = a.getAttribute(ccs.CONST_A_TWEEN_FRAME);
        c.isTween = !(void 0 !== f && ("false" === f || "0" === f));
        if (d.flashToolVersion >= ccs.CONST_VERSION_2_0) {
            if (f = a.getAttribute(ccs.CONST_A_COCOS2DX_X)) c.x = parseFloat(f), c.x *= this._positionReadScale;
            f = a.getAttribute(ccs.CONST_A_COCOS2DX_Y)
        } else {
            if (f = a.getAttribute(ccs.CONST_A_X)) c.x =
                parseFloat(f), c.x *= this._positionReadScale;
            f = a.getAttribute(ccs.CONST_A_Y)
        }
        f && (c.y = -parseFloat(f), c.y *= this._positionReadScale);
        f = a.getAttribute(ccs.CONST_A_SCALE_X);
        null != f && (c.scaleX = parseFloat(f));
        f = a.getAttribute(ccs.CONST_A_SCALE_Y);
        null != f && (c.scaleY = parseFloat(f));
        f = a.getAttribute(ccs.CONST_A_SKEW_X);
        null != f && (c.skewX = cc.degreesToRadians(parseFloat(f)));
        f = a.getAttribute(ccs.CONST_A_SKEW_Y);
        null != f && (c.skewY = cc.degreesToRadians(-parseFloat(f)));
        f = a.getAttribute(ccs.CONST_A_DURATION);
        null != f &&
            (c.duration = parseFloat(f));
        f = a.getAttribute(ccs.CONST_A_DISPLAY_INDEX);
        null != f && (c.displayIndex = parseFloat(f));
        f = a.getAttribute(ccs.CONST_A_Z);
        null != f && (c.zOrder = parseInt(f));
        f = a.getAttribute(ccs.CONST_A_TWEEN_ROTATE);
        null != f && (c.tweenRotate = parseFloat(f));
        f = a.getAttribute(ccs.CONST_A_BLEND_TYPE);
        if (null != f) {
            var g = c.blendFunc;
            switch (f) {
            case ccs.BLEND_TYPE_NORMAL:
                g.src = cc.BLEND_SRC;
                g.dst = cc.BLEND_DST;
                break;
            case ccs.BLEND_TYPE_ADD:
                g.src = cc.SRC_ALPHA;
                g.dst = cc.ONE;
                break;
            case ccs.BLEND_TYPE_MULTIPLY:
                g.src =
                    cc.DST_COLOR;
                g.dst = cc.ONE_MINUS_SRC_ALPHA;
                break;
            case ccs.BLEND_TYPE_SCREEN:
                g.src = cc.ONE;
                g.dst = cc.ONE_MINUS_DST_COLOR;
                break;
            default:
                c.blendFunc.src = cc.BLEND_SRC, c.blendFunc.dst = cc.BLEND_DST
            }
        }
        var h = a.querySelectorAll(ccs.CONST_FRAME + " > " + ccs.CONST_A_COLOR_TRANSFORM);
        if (h && 0 < h.length) {
            var h = h[0],
                m, n, p, u, v, f = parseFloat(h.getAttribute(ccs.CONST_A_ALPHA)) || 0,
                g = parseFloat(h.getAttribute(ccs.CONST_A_RED)) || 0;
            m = parseFloat(h.getAttribute(ccs.CONST_A_GREEN)) || 0;
            n = parseFloat(h.getAttribute(ccs.CONST_A_BLUE)) ||
                0;
            p = parseFloat(h.getAttribute(ccs.CONST_A_ALPHA_OFFSET)) || 0;
            u = parseFloat(h.getAttribute(ccs.CONST_A_RED_OFFSET)) || 0;
            v = parseFloat(h.getAttribute(ccs.CONST_A_GREEN_OFFSET)) || 0;
            h = parseFloat(h.getAttribute(ccs.CONST_A_BLUE_OFFSET)) || 0;
            c.a = 2.55 * p + f;
            c.r = 2.55 * u + g;
            c.g = 2.55 * v + m;
            c.b = 2.55 * h + n;
            c.isUseColorInfo = !0
        }
        f = a.getAttribute(ccs.CONST_A_TWEEN_EASING);
        null != f && (f != ccs.CONST_FL_NAN ? (f = a.getAttribute(ccs.CONST_A_TWEEN_EASING)) && (c.tweenEasing = 2 === f ? ccs.TweenType.SINE_EASEINOUT : f) : c.tweenEasing = ccs.TweenType.LINEAR);
        b && (a = new ccs.BaseData, d.flashToolVersion >= ccs.CONST_VERSION_2_0 ? (a.x = parseFloat(b.getAttribute(ccs.CONST_A_COCOS2DX_X)), a.y = parseFloat(b.getAttribute(ccs.CONST_A_COCOS2DX_Y))) : (a.x = parseFloat(b.getAttribute(ccs.CONST_A_X)), a.y = parseFloat(b.getAttribute(ccs.CONST_A_Y))), a.skewX = parseFloat(b.getAttribute(ccs.CONST_A_SKEW_X)), a.skewY = parseFloat(b.getAttribute(ccs.CONST_A_SKEW_Y)), a.y = -a.y, a.skewX = cc.degreesToRadians(a.skewX), a.skewY = cc.degreesToRadians(-a.skewY), ccs.TransformHelp.transformFromParent(c,
            a));
        return c
    },
    decodeFrameFromJson: function (a, b) {
        var c = new ccs.FrameData;
        this.decodeNodeFromJson(c, a, b);
        c.tweenEasing = a[ccs.CONST_A_TWEEN_EASING] || ccs.TweenType.LINEAR;
        c.displayIndex = a[ccs.CONST_A_DISPLAY_INDEX];
        var d = null == a[ccs.CONST_A_BLEND_DST] ? cc.BLEND_DST : a[ccs.CONST_A_BLEND_DST];
        c.blendFunc.src = null == a[ccs.CONST_A_BLEND_SRC] ? cc.BLEND_SRC : a[ccs.CONST_A_BLEND_SRC];
        c.blendFunc.dst = d;
        c.isTween = null == a[ccs.CONST_A_TWEEN_FRAME] ? !0 : a[ccs.CONST_A_TWEEN_FRAME];
        d = a[ccs.CONST_A_EVENT];
        null != d && (c.strEvent =
            d, c.event = d);
        b.cocoStudioVersion < ccs.CONST_VERSION_COMBINED ? c.duration = null == a[ccs.CONST_A_DURATION] ? 1 : a[ccs.CONST_A_DURATION] : c.frameID = a[ccs.CONST_A_FRAME_INDEX];
        for (var d = a[ccs.CONST_A_EASING_PARAM] || [], f = 0; f < d.length; f++) c.easingParams[f] = d[f];
        return c
    },
    decodeTexture: function (a, b) {
        var c = new ccs.TextureData;
        c.init();
        a.getAttribute(ccs.CONST_A_NAME) && (c.name = a.getAttribute(ccs.CONST_A_NAME));
        var d, f;
        b.flashToolVersion >= ccs.CONST_VERSION_2_0 ? (d = parseFloat(a.getAttribute(ccs.CONST_A_COCOS2D_PIVOT_X)) ||
            0, f = parseFloat(a.getAttribute(ccs.CONST_A_COCOS2D_PIVOT_Y)) || 0) : (d = parseFloat(a.getAttribute(ccs.CONST_A_PIVOT_X)) || 0, f = parseFloat(a.getAttribute(ccs.CONST_A_PIVOT_Y)) || 0);
        var g = parseFloat(a.getAttribute(ccs.CONST_A_WIDTH)) || 0,
            h = parseFloat(a.getAttribute(ccs.CONST_A_HEIGHT)) || 0;
        c.pivotX = d / g;
        c.pivotY = (h - f) / h;
        d = a.querySelectorAll(ccs.CONST_SUB_TEXTURE + " > " + ccs.CONST_CONTOUR);
        for (f = 0; f < d.length; f++) c.addContourData(this.decodeContour(d[f], b));
        return c
    },
    decodeTextureFromJson: function (a) {
        var b = new ccs.TextureData;
        b.init();
        var c = a[ccs.CONST_A_NAME];
        null != c && (b.name = c);
        b.width = a[ccs.CONST_A_WIDTH] || 0;
        b.height = a[ccs.CONST_A_HEIGHT] || 0;
        b.pivotX = a[ccs.CONST_A_PIVOT_X] || 0;
        b.pivotY = a[ccs.CONST_A_PIVOT_Y] || 0;
        a = a[ccs.CONST_CONTOUR_DATA] || [];
        for (c = 0; c < a.length; c++) b.contourDataList.push(this.decodeContourFromJson(a[c]));
        return b
    },
    decodeContour: function (a, b) {
        var c = new ccs.ContourData;
        c.init();
        for (var d = a.querySelectorAll(ccs.CONST_CONTOUR + " > " + ccs.CONST_CONTOUR_VERTEX), f, g = 0; g < d.length; g++) {
            f = d[g];
            var h = cc.p(0, 0);
            h.x = parseFloat(f.getAttribute(ccs.CONST_A_X)) || 0;
            h.y = parseFloat(f.getAttribute(ccs.CONST_A_Y)) || 0;
            h.y = -h.y;
            c.vertexList.push(h)
        }
        return c
    },
    decodeContourFromJson: function (a) {
        var b = new ccs.ContourData;
        b.init();
        a = a[ccs.CONST_VERTEX_POINT] || [];
        for (var c = a.length, d = 0; d < c; d++) {
            var f = a[d],
                g = cc.p(0, 0);
            g.x = f[ccs.CONST_A_X] || 0;
            g.y = f[ccs.CONST_A_Y] || 0;
            b.vertexList.push(g)
        }
        return b
    },
    addDataFromJsonCache: function (a, b) {
        b.contentScale = null == a[ccs.CONST_CONTENT_SCALE] ? 1 : a[ccs.CONST_CONTENT_SCALE];
        var c = a[ccs.CONST_ARMATURE_DATA] || [],
            d, f;
        for (d = 0; d < c.length; d++) f = this.decodeArmatureFromJSON(c[d], b), ccs.armatureDataManager.addArmatureData(f.name, f, b.filename);
        c = a[ccs.CONST_ANIMATION_DATA] || [];
        for (d = 0; d < c.length; d++) f = this.decodeAnimationFromJson(c[d], b), ccs.armatureDataManager.addAnimationData(f.name, f, b.filename);
        c = a[ccs.CONST_TEXTURE_DATA] || [];
        for (d = 0; d < c.length; d++) f = this.decodeTextureFromJson(c[d], b), ccs.armatureDataManager.addTextureData(f.name, f, b.filename);
        if (null == b.asyncStruct ? ccs.armatureDataManager.isAutoLoadSpriteFile() :
            b.asyncStruct.autoLoadSpriteFile) {
            var c = a[ccs.CONST_CONFIG_FILE_PATH] || [],
                g;
            for (d = 0; d < c.length; d++) f = c[d], g = f.lastIndexOf("."), f = f.substring(0, g), g = b.basefilePath + f + ".plist", f = b.basefilePath + f + ".png", ccs.armatureDataManager.addSpriteFrameFromFile(g, f, b.filename)
        }
    },
    decodeNodeFromJson: function (a, b, c) {
        a.x = b[ccs.CONST_A_X] * this._positionReadScale;
        a.y = b[ccs.CONST_A_Y] * this._positionReadScale;
        a.x *= c.contentScale;
        a.y *= c.contentScale;
        a.zOrder = b[ccs.CONST_A_Z];
        a.skewX = b[ccs.CONST_A_SKEW_X] || 0;
        a.skewY = b[ccs.CONST_A_SKEW_Y] ||
            0;
        a.scaleX = null == b[ccs.CONST_A_SCALE_X] ? 1 : b[ccs.CONST_A_SCALE_X];
        a.scaleY = null == b[ccs.CONST_A_SCALE_Y] ? 1 : b[ccs.CONST_A_SCALE_Y];
        if (b = c.cocoStudioVersion < ccs.VERSION_COLOR_READING ? b[0] : b[ccs.CONST_COLOR_INFO] || null) a.a = null == b[ccs.CONST_A_ALPHA] ? 255 : b[ccs.CONST_A_ALPHA], a.r = null == b[ccs.CONST_A_RED] ? 255 : b[ccs.CONST_A_RED], a.g = null == b[ccs.CONST_A_GREEN] ? 255 : b[ccs.CONST_A_GREEN], a.b = null == b[ccs.CONST_A_BLUE] ? 255 : b[ccs.CONST_A_BLUE], a.isUseColorInfo = !0
    },
    clear: function () {
        this._configFileList = [];
        this._asyncRefTotalCount =
            this._asyncRefCount = 0
    },
    _asyncCallBack: function (a, b, c) {
        a && cc.isFunction(a) && a.call(b, c);
        if (b && a && "string" === typeof a) b[a](c)
    },
    _initBaseFilePath: function (a) {
        var b = a.lastIndexOf("/");
        return a = -1 < b ? a.substr(0, b + 1) : ""
    },
    addDataFromXML: function (a, b) {
        var c = cc.loader.getRes(a);
        if (!c) throw Error("Please load the resource first : " + a);
        (c = cc.saxParser.parse(c).documentElement) && this.addDataFromCache(c, b)
    },
    addDataFromJson: function (a, b) {
        var c = cc.loader.getRes(a);
        this.addDataFromJsonCache(c, b)
    }
};
ccs.spriteFrameCacheHelper = {
    _textureAtlasDic: {},
    _imagePaths: [],
    addSpriteFrameFromFile: function (a, b) {
        cc.spriteFrameCache.addSpriteFrames(a, b)
    },
    getTextureAtlasWithTexture: function (a) {
        return null
    },
    clear: function () {
        this._textureAtlasDic = {};
        this._imagePaths = []
    }
};
ccs.TransformHelp = ccs.TransformHelp || ccs.Class.extend({});
ccs.TransformHelp.helpMatrix1 = cc.affineTransformMake(1, 0, 0, 1, 0, 0);
ccs.TransformHelp.helpMatrix2 = cc.affineTransformMake(1, 0, 0, 1, 0, 0);
ccs.TransformHelp.helpPoint1 = cc.p(0, 0);
ccs.TransformHelp.helpPoint2 = cc.p(0, 0);
ccs.TransformHelp.helpParentNode = {};
ccs.TransformHelp.transformFromParent = function (a, b) {
    this.nodeToMatrix(a, this.helpMatrix1);
    this.nodeToMatrix(b, this.helpMatrix2);
    this.helpMatrix2 = cc.affineTransformInvert(this.helpMatrix2);
    this.helpMatrix1 = cc.affineTransformConcat(this.helpMatrix1, this.helpMatrix2);
    this.matrixToNode(this.helpMatrix1, a)
};
ccs.TransformHelp.transformToParent = function (a, b) {
    this.nodeToMatrix(a, this.helpMatrix1);
    this.nodeToMatrix(b, this.helpMatrix2);
    this.helpMatrix1 = cc.affineTransformConcat(this.helpMatrix1, this.helpMatrix2);
    this.matrixToNode(this.helpMatrix1, a)
};
ccs.TransformHelp.transformFromParentWithoutScale = function (a, b) {
    for (var c in b) this.helpParentNode[c] = b[c];
    this.helpParentNode.scaleX = 1;
    this.helpParentNode.scaleY = 1;
    this.nodeToMatrix(a, this.helpMatrix1);
    this.nodeToMatrix(this.helpParentNode, this.helpMatrix2);
    this.helpMatrix2 = cc.affineTransformInvert(this.helpMatrix2);
    this.helpMatrix1 = cc.affineTransformConcat(this.helpMatrix1, this.helpMatrix2);
    this.matrixToNode(this.helpMatrix1, a)
};
ccs.TransformHelp.transformToParentWithoutScale = function (a, b) {
    for (var c in b) this.helpParentNode[c] = b[c];
    this.helpParentNode.scaleX = 1;
    this.helpParentNode.scaleY = 1;
    this.nodeToMatrix(a, this.helpMatrix1);
    this.nodeToMatrix(this.helpParentNode, this.helpMatrix2);
    this.helpMatrix1 = cc.affineTransformConcat(this.helpMatrix1, this.helpMatrix2);
    this.matrixToNode(this.helpMatrix1, a)
};
ccs.TransformHelp.nodeToMatrix = function (a, b) {
    if (a.skewX === -a.skewY) {
        var c = Math.sin(a.skewX),
            d = Math.cos(a.skewX);
        b.a = a.scaleX * d;
        b.b = a.scaleX * -c;
        b.c = a.scaleY * c;
        b.d = a.scaleY * d
    } else b.a = a.scaleX * Math.cos(a.skewY), b.b = a.scaleX * Math.sin(a.skewY), b.c = a.scaleY * Math.sin(a.skewX), b.d = a.scaleY * Math.cos(a.skewX);
    b.tx = a.x;
    b.ty = a.y
};
ccs.TransformHelp.matrixToNode = function (a, b) {
    this.helpPoint1.x = 0;
    this.helpPoint1.y = 1;
    this.helpPoint1 = cc.pointApplyAffineTransform(this.helpPoint1, a);
    this.helpPoint1.x -= a.tx;
    this.helpPoint1.y -= a.ty;
    this.helpPoint2.x = 1;
    this.helpPoint2.y = 0;
    this.helpPoint2 = cc.pointApplyAffineTransform(this.helpPoint2, a);
    this.helpPoint2.x -= a.tx;
    this.helpPoint2.y -= a.ty;
    b.skewX = -(Math.atan2(this.helpPoint1.y, this.helpPoint1.x) - 1.5707964);
    b.skewY = Math.atan2(this.helpPoint2.y, this.helpPoint2.x);
    b.scaleX = Math.sqrt(a.a * a.a +
        a.b * a.b);
    b.scaleY = Math.sqrt(a.c * a.c + a.d * a.d);
    b.x = a.tx;
    b.y = a.ty
};
ccs.TransformHelp.nodeConcat = function (a, b) {
    a.x += b.x;
    a.y += b.y;
    a.skewX += b.skewX;
    a.skewY += b.skewY;
    a.scaleX += b.scaleX;
    a.scaleY += b.scaleY
};
ccs.TransformHelp.nodeSub = function (a, b) {
    a.x -= b.x;
    a.y -= b.y;
    a.skewX -= b.skewX;
    a.skewY -= b.skewY;
    a.scaleX -= b.scaleX;
    a.scaleY -= b.scaleY
};
ccs.TweenType = {
    CUSTOM_EASING: -1,
    LINEAR: 0,
    SINE_EASEIN: 1,
    SINE_EASEOUT: 2,
    SINE_EASEINOUT: 3,
    QUAD_EASEIN: 4,
    QUAD_EASEOUT: 5,
    QUAD_EASEINOUT: 6,
    CUBIC_EASEIN: 7,
    CUBIC_EASEOUT: 8,
    CUBIC_EASEINOUT: 9,
    QUART_EASEIN: 10,
    QUART_EASEOUT: 11,
    QUART_EASEINOUT: 12,
    QUINT_EASEIN: 13,
    QUINT_EASEOUT: 14,
    QUINT_EASEINOUT: 15,
    EXPO_EASEIN: 16,
    EXPO_EASEOUT: 17,
    EXPO_EASEINOUT: 18,
    CIRC_EASEIN: 19,
    CIRC_EASEOUT: 20,
    CIRC_EASEINOUT: 21,
    ELASTIC_EASEIN: 22,
    ELASTIC_EASEOUT: 23,
    ELASTIC_EASEINOUT: 24,
    BACK_EASEIN: 25,
    BACK_EASEOUT: 26,
    BACK_EASEINOUT: 27,
    BOUNCE_EASEIN: 28,
    BOUNCE_EASEOUT: 29,
    BOUNCE_EASEINOUT: 30,
    TWEEN_EASING_MAX: 1E4
};
ccs.TweenFunction = ccs.TweenFunction || ccs.Class.extend({});
ccs.DOUBLE_PI = ccs.M_PI_X_2 = 2 * Math.PI;
ccs.HALF_PI = ccs.M_PI_2 = Math.PI / 2;
ccs.M_PI = Math.PI;
ccs.TweenFunction.tweenTo = function (a, b, c) {
    var d = 0;
    switch (b) {
    case ccs.TweenType.CUSTOM_EASING:
        d = this.customEase(a, c);
        break;
    case ccs.TweenType.LINEAR:
        d = this.linear(a);
        break;
    case ccs.TweenType.SINE_EASEIN:
        d = this.sineEaseIn(a);
        break;
    case ccs.TweenType.SINE_EASEOUT:
        d = this.sineEaseOut(a);
        break;
    case ccs.TweenType.SINE_EASEINOUT:
        d = this.sineEaseInOut(a);
        break;
    case ccs.TweenType.QUAD_EASEIN:
        d = this.quadEaseIn(a);
        break;
    case ccs.TweenType.QUAD_EASEOUT:
        d = this.quadEaseOut(a);
        break;
    case ccs.TweenType.QUAD_EASEINOUT:
        d =
            this.quadEaseInOut(a);
        break;
    case ccs.TweenType.CUBIC_EASEIN:
        d = this.cubicEaseIn(a);
        break;
    case ccs.TweenType.CUBIC_EASEOUT:
        d = this.cubicEaseOut(a);
        break;
    case ccs.TweenType.CUBIC_EASEINOUT:
        d = this.cubicEaseInOut(a);
        break;
    case ccs.TweenType.QUART_EASEIN:
        d = this.quartEaseIn(a);
        break;
    case ccs.TweenType.QUART_EASEOUT:
        d = this.quartEaseOut(a);
        break;
    case ccs.TweenType.QUART_EASEINOUT:
        d = this.quartEaseInOut(a);
        break;
    case ccs.TweenType.QUINT_EASEIN:
        d = this.quintEaseIn(a);
        break;
    case ccs.TweenType.QUINT_EASEOUT:
        d = this.quintEaseOut(a);
        break;
    case ccs.TweenType.QUINT_EASEINOUT:
        d = this.quintEaseInOut(a);
        break;
    case ccs.TweenType.EXPO_EASEIN:
        d = this.expoEaseIn(a);
        break;
    case ccs.TweenType.EXPO_EASEOUT:
        d = this.expoEaseOut(a);
        break;
    case ccs.TweenType.EXPO_EASEINOUT:
        d = this.expoEaseInOut(a);
        break;
    case ccs.TweenType.CIRC_EASEIN:
        d = this.circEaseIn(a);
        break;
    case ccs.TweenType.CIRC_EASEOUT:
        d = this.circEaseOut(a);
        break;
    case ccs.TweenType.CIRC_EASEINOUT:
        d = this.circEaseInOut(a);
        break;
    case ccs.TweenType.ELASTIC_EASEIN:
        b = 0.3;
        null != c && 0 < c.length && (b = c[0]);
        d = this.elasticEaseIn(a, b);
        break;
    case ccs.TweenType.ELASTIC_EASEOUT:
        b = 0.3;
        null != c && 0 < c.length && (b = c[0]);
        d = this.elasticEaseOut(a, b);
        break;
    case ccs.TweenType.ELASTIC_EASEINOUT:
        b = 0.3;
        null != c && 0 < c.length && (b = c[0]);
        d = this.elasticEaseInOut(a, b);
        break;
    case ccs.TweenType.BACK_EASEIN:
        d = this.backEaseIn(a);
        break;
    case ccs.TweenType.BACK_EASEOUT:
        d = this.backEaseOut(a);
        break;
    case ccs.TweenType.BACK_EASEINOUT:
        d = this.backEaseInOut(a);
        break;
    case ccs.TweenType.BOUNCE_EASEIN:
        d = this.bounceEaseIn(a);
        break;
    case ccs.TweenType.BOUNCE_EASEOUT:
        d =
            this.bounceEaseOut(a);
        break;
    case ccs.TweenType.BOUNCE_EASEINOUT:
        d = this.bounceEaseInOut(a);
        break;
    default:
        d = this.sineEaseInOut(a)
    }
    return d
};
ccs.TweenFunction.linear = function (a) {
    return a
};
ccs.TweenFunction.sineEaseIn = function (a) {
    return -1 * Math.cos(a * ccs.HALF_PI) + 1
};
ccs.TweenFunction.sineEaseOut = function (a) {
    return Math.sin(a * ccs.HALF_PI)
};
ccs.TweenFunction.sineEaseInOut = function (a) {
    return -0.5 * (Math.cos(ccs.M_PI * a) - 1)
};
ccs.TweenFunction.quadEaseIn = function (a) {
    return a * a
};
ccs.TweenFunction.quadEaseOut = function (a) {
    return -1 * a * (a - 2)
};
ccs.TweenFunction.quadEaseInOut = function (a) {
    a *= 2;
    if (1 > a) return 0.5 * a * a;
    --a;
    return -0.5 * (a * (a - 2) - 1)
};
ccs.TweenFunction.cubicEaseIn = function (a) {
    return a * a * a
};
ccs.TweenFunction.cubicEaseOut = function (a) {
    a -= 1;
    return a * a * a + 1
};
ccs.TweenFunction.cubicEaseInOut = function (a) {
    a *= 2;
    if (1 > a) return 0.5 * a * a * a;
    a -= 2;
    return 0.5 * (a * a * a + 2)
};
ccs.TweenFunction.quartEaseIn = function (a) {
    return a * a * a * a
};
ccs.TweenFunction.quartEaseOut = function (a) {
    a -= 1;
    return -(a * a * a * a - 1)
};
ccs.TweenFunction.quartEaseInOut = function (a) {
    a *= 2;
    if (1 > a) return 0.5 * a * a * a * a;
    a -= 2;
    return -0.5 * (a * a * a * a - 2)
};
ccs.TweenFunction.quintEaseIn = function (a) {
    return a * a * a * a * a
};
ccs.TweenFunction.quintEaseOut = function (a) {
    a -= 1;
    return a * a * a * a * a + 1
};
ccs.TweenFunction.quintEaseInOut = function (a) {
    a *= 2;
    if (1 > a) return 0.5 * a * a * a * a * a;
    a -= 2;
    return 0.5 * (a * a * a * a * a + 2)
};
ccs.TweenFunction.expoEaseIn = function (a) {
    return 0 === a ? 0 : Math.pow(2, 10 * (a - 1)) - 0.0010
};
ccs.TweenFunction.expoEaseOut = function (a) {
    return 1 === a ? 1 : -Math.pow(2, -10 * a) + 1
};
ccs.TweenFunction.expoEaseInOut = function (a) {
    a /= 0.5;
    return a = 1 > a ? 0.5 * Math.pow(2, 10 * (a - 1)) : 0.5 * (-Math.pow(2, -10 * (a - 1)) + 2)
};
ccs.TweenFunction.circEaseIn = function (a) {
    return -1 * (Math.sqrt(1 - a * a) - 1)
};
ccs.TweenFunction.circEaseOut = function (a) {
    a -= 1;
    return Math.sqrt(1 - a * a)
};
ccs.TweenFunction.circEaseInOut = function (a) {
    a *= 2;
    if (1 > a) return -0.5 * (Math.sqrt(1 - a * a) - 1);
    a -= 2;
    return 0.5 * (Math.sqrt(1 - a * a) + 1)
};
ccs.TweenFunction.elasticEaseIn = function (a, b) {
    var c = 0.3;
    0 < b.length && (c = b[0]);
    var d = 0;
    0 === a || 1 === a ? d = a : (d = c / 4, a -= 1, d = -Math.pow(2, 10 * a) * Math.sin((a - d) * ccs.DOUBLE_PI / c));
    return d
};
ccs.TweenFunction.elasticEaseOut = function (a, b) {
    var c = 0.3;
    0 < b.length && (c = b[0]);
    var d = 0;
    0 === a || 1 === a ? d = a : (d = c / 4, d = Math.pow(2, -10 * a) * Math.sin((a - d) * ccs.DOUBLE_PI / c) + 1);
    return d
};
ccs.TweenFunction.elasticEaseInOut = function (a, b) {
    var c = 0.3;
    0 < b.length && (c = b[0]);
    var d = 0;
    0 === a || 1 === a ? d = a : (c || (c = 0.3 * 1.5), d = c / 4, a = 2 * a - 1, d = 0 > a ? -0.5 * Math.pow(2, 10 * a) * Math.sin((a - d) * ccs.DOUBLE_PI / c) : 0.5 * Math.pow(2, -10 * a) * Math.sin((a - d) * ccs.DOUBLE_PI / c) + 1);
    return d
};
ccs.TweenFunction.backEaseIn = function (a) {
    return a * a * (2.70158 * a - 1.70158)
};
ccs.TweenFunction.backEaseOut = function (a) {
    a -= 1;
    return a * a * (2.70158 * a + 1.70158) + 1
};
ccs.TweenFunction.backEaseInOut = function (a) {
    a *= 2;
    if (1 > a) return a * a * (3.5949095 * a - 2.5949095) / 2;
    a -= 2;
    return a * a * (3.5949095 * a + 2.5949095) / 2 + 1
};
ccs.bounceTime = function (a) {
    if (a < 1 / 2.75) return 7.5625 * a * a;
    if (a < 2 / 2.75) return a -= 1.5 / 2.75, 7.5625 * a * a + 0.75;
    if (a < 2.5 / 2.75) return a -= 2.25 / 2.75, 7.5625 * a * a + 0.9375;
    a -= 2.625 / 2.75;
    return 7.5625 * a * a + 0.984375
};
ccs.TweenFunction.bounceEaseIn = function (a) {
    return 1 - ccs.bounceTime(1 - a)
};
ccs.TweenFunction.bounceEaseOut = function (a) {
    return ccs.bounceTime(a)
};
ccs.TweenFunction.bounceEaseInOut = function (a) {
    var b = 0;
    return b = 0.5 > a ? 0.5 * (1 - ccs.bounceTime(1 - 2 * a)) : 0.5 * ccs.bounceTime(2 * a - 1) + 0.5
};
ccs.TweenFunction.customEase = function (a, b) {
    if (0 < b.length) {
        var c = 1 - a;
        return b[1] * c * c * c + 3 * b[3] * a * c * c + 3 * b[5] * a * a * c + b[7] * a * a * a
    }
    return a
};
ccs.TweenFunction.easeIn = function (a, b) {
    return Math.pow(a, b)
};
ccs.TweenFunction.easeOut = function (a, b) {
    return Math.pow(a, 1 / b)
};
ccs.TweenFunction.easeInOut = function (a, b) {
    a *= 2;
    return 1 > a ? 0.5 * Math.pow(a, b) : 1 - 0.5 * Math.pow(2 - a, b)
};
ccs.TweenFunction.quadraticIn = function (a) {
    return Math.pow(a, 2)
};
ccs.TweenFunction.quadraticOut = function (a) {
    return -a * (a - 2)
};
ccs.TweenFunction.bezieratFunction = function (a, b, c, d, f) {
    return Math.pow(1 - f, 3) * a + 3 * f * Math.pow(1 - f, 2) * b + 3 * Math.pow(f, 2) * (1 - f) * c + Math.pow(f, 3) * d
};
var ENABLE_PHYSICS_DETECT = !1;
ccs.fmodf = function (a, b) {
    for (; a > b;) a -= b;
    return a
};
var CC_SAFE_RELEASE = function (a) {
    a && a.release && a.release()
};
ccs.isSpriteContainPoint = function (a, b, c) {
    b = a.convertToNodeSpace(b);
    c && (c.x = b.x, c.y = b.y);
    a = a.getContentSize();
    return cc.rectContainsPoint(cc.rect(0, 0, a.width, a.height), b)
};
ccs.SPRITE_CONTAIN_POINT = ccs.isSpriteContainPoint;
ccs.SPRITE_CONTAIN_POINT_WITH_RETURN = ccs.isSpriteContainPoint;
ccs.extBezierTo = function (a, b, c, d, f) {
    var g = cc.p(0, 0);
    d && !f && (g.x = Math.pow(1 - a, 2) * b.x + 2 * a * (1 - a) * c.x + Math.pow(a, 2) * d.x, g.y = Math.pow(1 - a, 2) * b.y + 2 * a * (1 - a) * c.y + Math.pow(a, 2) * d.y);
    f && (g.x = b.x * Math.pow(1 - a, 3) + 3 * a * c.x * Math.pow(1 - a, 2) + 3 * d.x * Math.pow(a, 2) * (1 - a) + f.x * Math.pow(a, 3), g.y = b.y * Math.pow(1 - a, 3) + 3 * a * c.y * Math.pow(1 - a, 2) + 3 * d.y * Math.pow(a, 2) * (1 - a) + f.y * Math.pow(a, 3));
    return g
};
ccs.extCircleTo = function (a, b, c, d, f) {
    var g = cc.p(0, 0);
    g.x = b.x + c * Math.cos(d + f * a);
    g.y = b.y + c * Math.sin(d + f * a);
    return g
};
ccs.RelativeData = function () {
    this.plistFiles = [];
    this.armatures = [];
    this.animations = [];
    this.textures = []
};
ccs.armatureDataManager = {
    _animationDatas: {},
    _armatureDatas: {},
    _textureDatas: {},
    _autoLoadSpriteFile: !1,
    _relativeDatas: {},
    s_sharedArmatureDataManager: null,
    removeArmatureFileInfo: function (a) {
        var b = this.getRelativeData(a);
        if (b) {
            var c, d;
            for (c = 0; c < b.armatures.length; c++) d = b.armatures[c], this.removeArmatureData(d);
            for (c = 0; c < b.animations.length; c++) d = b.animations[c], this.removeAnimationData(d);
            for (c = 0; c < b.textures.length; c++) d = b.textures[c], this.removeTextureData(d);
            for (c = 0; c < b.plistFiles.length; c++) d = b.plistFiles[c],
                cc.spriteFrameCache.removeSpriteFramesFromFile(d);
            delete this._relativeDatas[a];
            ccs.dataReaderHelper.removeConfigFile(a)
        }
    },
    addArmatureData: function (a, b, c) {
        (c = this.getRelativeData(c)) && c.armatures.push(a);
        this._armatureDatas[a] = b
    },
    getArmatureData: function (a) {
        var b = null;
        this._armatureDatas && (b = this._armatureDatas[a]);
        return b
    },
    removeArmatureData: function (a) {
        this._armatureDatas[a] && delete this._armatureDatas[a]
    },
    addAnimationData: function (a, b, c) {
        (c = this.getRelativeData(c)) && c.animations.push(a);
        this._animationDatas[a] =
            b
    },
    getAnimationData: function (a) {
        var b = null;
        this._animationDatas[a] && (b = this._animationDatas[a]);
        return b
    },
    removeAnimationData: function (a) {
        this._animationDatas[a] && delete this._animationDatas[a]
    },
    addTextureData: function (a, b, c) {
        (c = this.getRelativeData(c)) && c.textures.push(a);
        this._textureDatas[a] = b
    },
    getTextureData: function (a) {
        var b = null;
        this._textureDatas && (b = this._textureDatas[a]);
        return b
    },
    removeTextureData: function (a) {
        this._textureDatas[a] && delete this._textureDatas[a]
    },
    addArmatureFileInfo: function () {
        var a,
            b, c;
        switch (arguments.length) {
        case 1:
            c = arguments[0];
            this.addRelativeData(c);
            this._autoLoadSpriteFile = !0;
            ccs.dataReaderHelper.addDataFromFile(c);
            break;
        case 3:
            a = arguments[0], b = arguments[1], c = arguments[2], this.addRelativeData(c), this._autoLoadSpriteFile = !1, ccs.dataReaderHelper.addDataFromFile(c), this.addSpriteFrameFromFile(b, a)
        }
    },
    addArmatureFileInfoAsync: function () {
        var a, b, c, d, f;
        switch (arguments.length) {
        case 3:
            c = arguments[0];
            d = arguments[2];
            f = arguments[1];
            this.addRelativeData(c);
            this._autoLoadSpriteFile = !0;
            ccs.dataReaderHelper.addDataFromFileAsync("", "", c, f, d);
            break;
        case 5:
            a = arguments[0], b = arguments[1], c = arguments[2], d = arguments[4], f = arguments[3], this.addRelativeData(c), this._autoLoadSpriteFile = !1, ccs.dataReaderHelper.addDataFromFileAsync(a, b, c, f, d), this.addSpriteFrameFromFile(b, a)
        }
    },
    addSpriteFrameFromFile: function (a, b, c) {
        (c = this.getRelativeData(c)) && c.plistFiles.push(a);
        ccs.spriteFrameCacheHelper.addSpriteFrameFromFile(a, b)
    },
    isAutoLoadSpriteFile: function () {
        return this._autoLoadSpriteFile
    },
    getArmatureDatas: function () {
        return this._armatureDatas
    },
    getAnimationDatas: function () {
        return this._animationDatas
    },
    getTextureDatas: function () {
        return this._textureDatas
    },
    addRelativeData: function (a) {
        this._relativeDatas[a] || (this._relativeDatas[a] = new ccs.RelativeData)
    },
    getRelativeData: function (a) {
        return this._relativeDatas[a]
    },
    clear: function () {
        for (var a in this._relativeDatas) this.removeArmatureFileInfo(a);
        this._animationDatas = {};
        this._armatureDatas = {};
        this._textureDatas = {};
        this._relativeDatas = {};
        ccs.spriteFrameCacheHelper.clear();
        ccs.dataReaderHelper.clear()
    }
};
ccs.BLEND_TYPE_NORMAL = 0;
ccs.BLEND_TYPE_LAYER = 1;
ccs.BLEND_TYPE_DARKEN = 2;
ccs.BLEND_TYPE_MULTIPLY = 3;
ccs.BLEND_TYPE_LIGHTEN = 4;
ccs.BLEND_TYPE_SCREEN = 5;
ccs.BLEND_TYPE_OVERLAY = 6;
ccs.BLEND_TYPE_HIGHLIGHT = 7;
ccs.BLEND_TYPE_ADD = 8;
ccs.BLEND_TYPE_SUBTRACT = 9;
ccs.BLEND_TYPE_DIFFERENCE = 10;
ccs.BLEND_TYPE_INVERT = 11;
ccs.BLEND_TYPE_ALPHA = 12;
ccs.BLEND_TYPE_ERASE = 13;
ccs.DISPLAY_TYPE_SPRITE = 0;
ccs.DISPLAY_TYPE_ARMATURE = 1;
ccs.DISPLAY_TYPE_PARTICLE = 2;
ccs.DISPLAY_TYPE_MAX = 3;
ccs.BaseData = ccs.Class.extend({
    x: 0,
    y: 0,
    zOrder: 0,
    skewX: 0,
    skewY: 0,
    scaleX: 1,
    scaleY: 1,
    tweenRotate: 0,
    isUseColorInfo: !1,
    r: 255,
    g: 255,
    b: 255,
    a: 255,
    ctor: function () {
        this.skewY = this.skewX = this.zOrder = this.y = this.x = 0;
        this.scaleY = this.scaleX = 1;
        this.tweenRotate = 0;
        this.isUseColorInfo = !1;
        this.a = this.b = this.g = this.r = 255
    },
    copy: function (a) {
        this.x = a.x;
        this.y = a.y;
        this.zOrder = a.zOrder;
        this.scaleX = a.scaleX;
        this.scaleY = a.scaleY;
        this.skewX = a.skewX;
        this.skewY = a.skewY;
        this.tweenRotate = a.tweenRotate;
        this.isUseColorInfo = a.isUseColorInfo;
        this.r = a.r;
        this.g = a.g;
        this.b = a.b;
        this.a = a.a
    },
    setColor: function (a) {
        this.r = a.r;
        this.g = a.g;
        this.b = a.b;
        this.a = a.a
    },
    getColor: function () {
        return cc.color(this.r, this.g, this.b, this.a)
    },
    subtract: function (a, b, c) {
        this.x = b.x - a.x;
        this.y = b.y - a.y;
        this.scaleX = b.scaleX - a.scaleX;
        this.scaleY = b.scaleY - a.scaleY;
        this.skewX = b.skewX - a.skewX;
        this.skewY = b.skewY - a.skewY;
        this.isUseColorInfo || a.isUseColorInfo || b.isUseColorInfo ? (this.a = b.a - a.a, this.r = b.r - a.r, this.g = b.g - a.g, this.b = b.b - a.b, this.isUseColorInfo = !0) : (this.a = this.r =
            this.g = this.b = 0, this.isUseColorInfo = !1);
        c && (this.skewX > ccs.M_PI && (this.skewX -= ccs.DOUBLE_PI), this.skewX < -ccs.M_PI && (this.skewX += ccs.DOUBLE_PI), this.skewY > ccs.M_PI && (this.skewY -= ccs.DOUBLE_PI), this.skewY < -ccs.M_PI && (this.skewY += ccs.DOUBLE_PI));
        b.tweenRotate && (this.skewX += 2 * b.tweenRotate * ccs.PI, this.skewY -= 2 * b.tweenRotate * ccs.PI)
    }
});
ccs.DisplayData = ccs.Class.extend({
    displayType: ccs.DISPLAY_TYPE_MAX,
    displayName: "",
    ctor: function () {
        this.displayType = ccs.DISPLAY_TYPE_MAX
    },
    changeDisplayToTexture: function (a) {
        var b = a.lastIndexOf("."); - 1 !== b && (a = a.substring(0, b));
        return a
    },
    copy: function (a) {
        this.displayName = a.displayName;
        this.displayType = a.displayType
    }
});
ccs.SpriteDisplayData = ccs.DisplayData.extend({
    skinData: null,
    ctor: function () {
        this.skinData = new ccs.BaseData;
        this.displayType = ccs.DISPLAY_TYPE_SPRITE
    },
    copy: function (a) {
        ccs.DisplayData.prototype.copy.call(this, a);
        this.skinData = a.skinData
    }
});
ccs.ArmatureDisplayData = ccs.DisplayData.extend({
    ctor: function () {
        this.displayName = "";
        this.displayType = ccs.DISPLAY_TYPE_ARMATURE
    }
});
ccs.ParticleDisplayData = ccs.DisplayData.extend({
    ctor: function () {
        this.displayType = ccs.DISPLAY_TYPE_PARTICLE
    }
});
ccs.BoneData = ccs.BaseData.extend({
    displayDataList: null,
    name: "",
    parentName: "",
    boneDataTransform: null,
    ctor: function () {
        this.displayDataList = [];
        this.parentName = this.name = "";
        this.boneDataTransform = null
    },
    init: function () {
        this.displayDataList.length = 0;
        return !0
    },
    addDisplayData: function (a) {
        this.displayDataList.push(a)
    },
    getDisplayData: function (a) {
        return this.displayDataList[a]
    }
});
ccs.ArmatureData = ccs.Class.extend({
    boneDataDic: null,
    name: "",
    dataVersion: 0.1,
    ctor: function () {
        this.boneDataDic = {};
        this.name = "";
        this.dataVersion = 0.1
    },
    init: function () {
        return !0
    },
    addBoneData: function (a) {
        this.boneDataDic[a.name] = a
    },
    getBoneDataDic: function () {
        return this.boneDataDic
    },
    getBoneData: function (a) {
        return this.boneDataDic[a]
    }
});
ccs.FrameData = ccs.BaseData.extend({
    duration: 0,
    tweenEasing: 0,
    easingParamNumber: 0,
    easingParams: null,
    displayIndex: -1,
    movement: "",
    event: "",
    sound: "",
    soundEffect: "",
    blendFunc: null,
    frameID: 0,
    isTween: !0,
    ctor: function () {
        ccs.BaseData.prototype.ctor.call(this);
        this.duration = 1;
        this.tweenEasing = ccs.TweenType.LINEAR;
        this.easingParamNumber = 0;
        this.easingParams = [];
        this.displayIndex = 0;
        this.soundEffect = this.sound = this.event = this.movement = "";
        this.blendFunc = new cc.BlendFunc(cc.BLEND_SRC, cc.BLEND_DST);
        this.frameID = 0;
        this.isTween = !0
    },
    copy: function (a) {
        ccs.BaseData.prototype.copy.call(this, a);
        this.duration = a.duration;
        this.displayIndex = a.displayIndex;
        this.tweenEasing = a.tweenEasing;
        this.easingParamNumber = a.easingParamNumber;
        if (0 !== this.easingParamNumber)
            for (var b = this.easingParams.length = 0; b < this.easingParamNumber; b++) this.easingParams[b] = a.easingParams[b];
        this.blendFunc = a.blendFunc;
        this.isTween = a.isTween
    }
});
ccs.MovementBoneData = ccs.Class.extend({
    delay: 0,
    scale: 1,
    duration: 0,
    frameList: null,
    name: "",
    ctor: function () {
        this.delay = 0;
        this.scale = 1;
        this.duration = 0;
        this.frameList = [];
        this.name = ""
    },
    init: function () {
        return !0
    },
    addFrameData: function (a) {
        this.frameList.push(a)
    },
    getFrameData: function (a) {
        return this.frameList[a]
    }
});
ccs.MovementData = function () {
    this.name = "";
    this.duration = 0;
    this.scale = 1;
    this.durationTween = this.durationTo = 0;
    this.loop = !0;
    this.tweenEasing = ccs.TweenType.LINEAR;
    this.movBoneDataDic = {}
};
ccs.MovementData.prototype.addMovementBoneData = function (a) {
    this.movBoneDataDic[a.name] = a
};
ccs.MovementData.prototype.getMovementBoneData = function (a) {
    return this.movBoneDataDic[a]
};
ccs.AnimationData = function () {
    this.movementDataDic = {};
    this.movementNames = [];
    this.name = ""
};
ccs.AnimationData.prototype.addMovement = function (a) {
    this.movementDataDic[a.name] = a;
    this.movementNames.push(a.name)
};
ccs.AnimationData.prototype.getMovement = function (a) {
    return this.movementDataDic[a]
};
ccs.AnimationData.prototype.getMovementCount = function () {
    return Object.keys(this.movementDataDic).length
};
ccs.ContourVertex2 = function (a, b) {
    this.x = a || 0;
    this.y = b || 0
};
ccs.ContourData = function () {
    this.vertexList = []
};
ccs.ContourData.prototype.init = function () {
    this.vertexList.length = 0;
    return !0
};
ccs.ContourData.prototype.addVertex = function (a) {
    this.vertexList.push(a)
};
ccs.TextureData = function () {
    this.width = this.height = 0;
    this.pivotY = this.pivotX = 0.5;
    this.name = "";
    this.contourDataList = []
};
ccs.TextureData.prototype.init = function () {
    this.contourDataList.length = 0
};
ccs.TextureData.prototype.addContourData = function (a) {
    this.contourDataList.push(a)
};
ccs.TextureData.prototype.getContourData = function (a) {
    return this.contourDataList[a]
};
ccs.DecorativeDisplay = ccs.Class.extend({
    _display: null,
    _colliderDetector: null,
    _displayData: null,
    ctor: function () {
        this._displayData = this._colliderDetector = this._display = null
    },
    init: function () {
        return !0
    },
    setDisplay: function (a) {
        a._parent && (a._parent.removeChild(a), delete a._parent);
        this._display = a
    },
    getDisplay: function () {
        return this._display
    },
    setColliderDetector: function (a) {
        this._colliderDetector = a
    },
    getColliderDetector: function () {
        return this._colliderDetector
    },
    setDisplayData: function (a) {
        this._displayData =
            a
    },
    getDisplayData: function () {
        return this._displayData
    },
    release: function () {
        this._colliderDetector = this._displayData = this._display = null
    }
});
ccs.DecorativeDisplay.create = function () {
    return new ccs.DecorativeDisplay
};
ccs.displayFactory = {
    addDisplay: function (a, b, c) {
        switch (c.displayType) {
        case ccs.DISPLAY_TYPE_SPRITE:
            this.addSpriteDisplay(a, b, c);
            break;
        case ccs.DISPLAY_TYPE_PARTICLE:
            this.addParticleDisplay(a, b, c);
            break;
        case ccs.DISPLAY_TYPE_ARMATURE:
            this.addArmatureDisplay(a, b, c)
        }
    },
    createDisplay: function (a, b) {
        switch (b.getDisplayData().displayType) {
        case ccs.DISPLAY_TYPE_SPRITE:
            this.createSpriteDisplay(a, b);
            break;
        case ccs.DISPLAY_TYPE_PARTICLE:
            this.createParticleDisplay(a, b);
            break;
        case ccs.DISPLAY_TYPE_ARMATURE:
            this.createArmatureDisplay(a,
                b)
        }
    },
    _helpTransform: {
        a: 1,
        b: 0,
        c: 0,
        d: 1,
        tx: 0,
        ty: 0
    },
    updateDisplay: function (a, b, c) {
        var d = a.getDisplayRenderNode();
        if (d) {
            switch (a.getDisplayRenderNodeType()) {
            case ccs.DISPLAY_TYPE_SPRITE:
                c && (d._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty), d.updateArmatureTransform());
                break;
            case ccs.DISPLAY_TYPE_PARTICLE:
                this.updateParticleDisplay(a, d, b);
                break;
            case ccs.DISPLAY_TYPE_ARMATURE:
                this.updateArmatureDisplay(a, d, b);
                break;
            default:
                b = a.getNodeToArmatureTransform(), d.setAdditionalTransform(b)
            }
            if ((ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT ||
                    ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX) && c)
                if (d = a.getDisplayManager().getCurrentDecorativeDisplay(), c = d.getColliderDetector()) {
                    b = d.getDisplay();
                    var f = b.getNodeToParentTransform(),
                        d = this._helpTransform;
                    d.a = f.a;
                    d.b = f.b;
                    d.c = f.c;
                    d.d = f.d;
                    d.tx = f.tx;
                    d.ty = f.ty;
                    b = cc.pointApplyAffineTransform(b.getAnchorPointInPoints(), d);
                    d.tx = b.x;
                    d.ty = b.y;
                    a = cc.affineTransformConcat(d, a.getArmature().getNodeToParentTransform());
                    c.updateTransform(a)
                }
        }
    },
    addSpriteDisplay: function (a, b, c) {
        var d = new ccs.SpriteDisplayData;
        d.copy(c);
        b.setDisplayData(d);
        this.createSpriteDisplay(a, b)
    },
    createSpriteDisplay: function (a, b) {
        var c = null,
            d = b.getDisplayData(),
            c = d.displayName,
            f = c.lastIndexOf("."); - 1 !== f && (c = c.substring(0, f));
        c = "" === c ? new ccs.Skin : new ccs.Skin("#" + c + ".png");
        b.setDisplay(c);
        c.setBone(a);
        this.initSpriteDisplay(a, b, d.displayName, c);
        (f = a.getArmature()) && (f.getArmatureData().dataVersion >= ccs.CONST_VERSION_COMBINED ? c.setSkinData(d.skinData) : c.setSkinData(a.boneData))
    },
    initSpriteDisplay: function (a, b, c, d) {
        var f = c.lastIndexOf("."); -
        1 !== f && (c = c.substring(0, f));
        (c = ccs.armatureDataManager.getTextureData(c)) && d.setAnchorPoint(cc.p(c.pivotX, c.pivotY));
        if ((ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT || ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX) && c && 0 < c.contourDataList.length) a = new ccs.ColliderDetector(a), a.addContourDataList(c.contourDataList), b.setColliderDetector(a)
    },
    addArmatureDisplay: function (a, b, c) {
        var d = new ccs.ArmatureDisplayData;
        d.copy(c);
        b.setDisplayData(d);
        this.createArmatureDisplay(a, b)
    },
    createArmatureDisplay: function (a, b) {
        var c =
            b.getDisplayData(),
            c = new ccs.Armature(c.displayName, a);
        b.setDisplay(c)
    },
    updateArmatureDisplay: function (a, b, c) {
        b && (b.sortAllChildren(), b.update(c))
    },
    addParticleDisplay: function (a, b, c) {
        var d = new ccs.ParticleDisplayData;
        d.copy(c);
        b.setDisplayData(d);
        this.createParticleDisplay(a, b)
    },
    createParticleDisplay: function (a, b) {
        var c = b.getDisplayData(),
            c = new cc.ParticleSystem(c.displayName);
        c.removeFromParent();
        c.cleanup();
        a.getArmature() && c.setParent(a.getArmature());
        b.setDisplay(c)
    },
    updateParticleDisplay: function (a,
        b, c) {
        var d = new ccs.BaseData;
        ccs.TransformHelp.matrixToNode(a.nodeToArmatureTransform(), d);
        b.setPosition(d.x, d.y);
        b.setScaleX(d.scaleX);
        b.setScaleY(d.scaleY);
        b.update(c)
    }
};
ccs.DisplayManager = ccs.Class.extend({
    _decoDisplayList: null,
    _currentDecoDisplay: null,
    _displayRenderNode: null,
    _displayIndex: null,
    _forceChangeDisplay: !1,
    _bone: null,
    _visible: !0,
    _displayType: null,
    ctor: function (a) {
        this._decoDisplayList = [];
        this._displayIndex = this._displayRenderNode = this._currentDecoDisplay = null;
        this._forceChangeDisplay = !1;
        this._bone = null;
        this._visible = !0;
        this._displayType = ccs.DISPLAY_TYPE_MAX;
        a && ccs.DisplayManager.prototype.init.call(this, a)
    },
    init: function (a) {
        this._bone = a;
        this.initDisplayList(a.getBoneData());
        return !0
    },
    addDisplay: function (a, b) {
        var c, d = this._decoDisplayList;
        0 <= b && b < d.length ? c = d[b] : (c = new ccs.DecorativeDisplay, d.push(c));
        if (a instanceof ccs.DisplayData) ccs.displayFactory.addDisplay(this._bone, c, a);
        else {
            var f = null;
            if (a instanceof ccs.Skin) {
                a.setBone(this._bone);
                f = new ccs.SpriteDisplayData;
                ccs.displayFactory.initSpriteDisplay(this._bone, c, a.getDisplayName(), a);
                var g = c.getDisplayData();
                if (g instanceof ccs.SpriteDisplayData) a.setSkinData(g.skinData), f.skinData = g.skinData;
                else {
                    for (var g = !1, h =
                            d.length - 2; 0 <= h; h--) {
                        var m = d[h].getDisplayData();
                        if (m instanceof ccs.SpriteDisplayData) {
                            g = !0;
                            a.setSkinData(m.skinData);
                            f.skinData = m.skinData;
                            break
                        }
                    }
                    g || a.setSkinData(new ccs.BaseData)
                }
            } else a instanceof cc.ParticleSystem ? (f = new ccs.ParticleDisplayData, a.removeFromParent(), a._performRecursive(cc.Node._stateCallbackType.cleanup), (d = this._bone.getArmature()) && a.setParent(d)) : a instanceof ccs.Armature ? (f = new ccs.ArmatureDisplayData, f.displayName = a.getName(), a.setParentBone(this._bone)) : f = new ccs.DisplayData;
            c.setDisplay(a);
            c.setDisplayData(f)
        }
        b === this._displayIndex && (this._displayIndex = -1, this.changeDisplayWithIndex(b, !1))
    },
    _addDisplayOther: function (a, b) {
        var c = null;
        if (b instanceof ccs.Skin) {
            b.setBone(this._bone);
            c = new ccs.SpriteDisplayData;
            c.displayName = b.getDisplayName();
            ccs.displayFactory.initSpriteDisplay(this._bone, a, b.getDisplayName(), b);
            var d = a.getDisplayData();
            if (d instanceof ccs.SpriteDisplayData) b.setSkinData(d.skinData);
            else {
                for (var d = !1, f = this._decoDisplayList.length - 2; 0 <= f; f--) {
                    var g = this._decoDisplayList[f].getDisplayData();
                    if (g) {
                        d = !0;
                        b.setSkinData(g.skinData);
                        c.skinData = g.skinData;
                        break
                    }
                }
                d || b.setSkinData(new ccs.BaseData);
                b.setSkinData(new ccs.BaseData)
            }
        } else b instanceof cc.ParticleSystem ? (c = new ccs.ParticleDisplayData, c.displayName = b._plistFile) : b instanceof ccs.Armature ? (c = new ccs.ArmatureDisplayData, c.displayName = b.getName(), b.setParentBone(this._bone)) : c = new ccs.DisplayData;
        a.setDisplay(b);
        a.setDisplayData(c)
    },
    removeDisplay: function (a) {
        this._decoDisplayList.splice(a, 1);
        a === this._displayIndex && (this.setCurrentDecorativeDisplay(null),
            this._displayIndex = -1)
    },
    getDecorativeDisplayList: function () {
        return this._decoDisplayList
    },
    changeDisplayWithIndex: function (a, b) {
        a >= this._decoDisplayList.length ? cc.log("the index value is out of range") : (this._forceChangeDisplay = b, this._displayIndex !== a && (this._displayIndex = a, 0 > a ? this._displayRenderNode && (this._displayRenderNode.removeFromParent(!0), this.setCurrentDecorativeDisplay(null)) : this.setCurrentDecorativeDisplay(this._decoDisplayList[a])))
    },
    changeDisplayWithName: function (a, b) {
        for (var c = this._decoDisplayList,
                d = 0; d < c.length; d++)
            if (c[d].getDisplayData().displayName === a) {
                this.changeDisplayWithIndex(d, b);
                break
            }
    },
    setCurrentDecorativeDisplay: function (a) {
        var b = this._currentDecoDisplay;
        (ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT || ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX) && b && b.getColliderDetector() && b.getColliderDetector().setActive(!1);
        b = this._currentDecoDisplay = a;
        (ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT || ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX) && b && b.getColliderDetector() && b.getColliderDetector().setActive(!0);
        a = !b ?
            null : b.getDisplay();
        var b = this._displayRenderNode,
            c = this._bone;
        b && (b instanceof ccs.Armature && c.setChildArmature(null), b.removeFromParent(!0));
        (this._displayRenderNode = a) ? (a instanceof ccs.Armature ? (this._bone.setChildArmature(a), a.setParentBone(this._bone)) : a instanceof cc.ParticleSystem && (a instanceof ccs.Armature ? (c.setChildArmature(a), a.setParentBone(c)) : a instanceof cc.ParticleSystem && a.resetSystem()), a.setColor(c.getDisplayedColor()), a.setOpacity(c.getDisplayedOpacity()), this._displayRenderNode.setVisible(this._visible),
            this._displayType = this._currentDecoDisplay.getDisplayData().displayType) : this._displayType = ccs.DISPLAY_TYPE_MAX;
        cc.renderer.childrenOrderDirty = !0
    },
    getDisplayRenderNode: function () {
        return this._displayRenderNode
    },
    getDisplayRenderNodeType: function () {
        return this._displayType
    },
    getCurrentDisplayIndex: function () {
        return this._displayIndex
    },
    getCurrentDecorativeDisplay: function () {
        return this._currentDecoDisplay
    },
    getDecorativeDisplayByIndex: function (a) {
        return this._decoDisplayList[a]
    },
    initDisplayList: function (a) {
        this._decoDisplayList.length =
            0;
        if (a) {
            a = a.displayDataList;
            for (var b = this._decoDisplayList, c = this._bone, d = 0; d < a.length; d++) {
                var f = a[d],
                    g = new ccs.DecorativeDisplay;
                g.setDisplayData(f);
                ccs.displayFactory.createDisplay(c, g);
                b.push(g)
            }
        }
    },
    containPoint: function (a, b) {
        if (!this._visible || 0 > this._displayIndex) return !1;
        void 0 !== b && (a = cc.p(a, b));
        if (this._currentDecoDisplay.getDisplayData().displayType === ccs.DISPLAY_TYPE_SPRITE) {
            var c = this._currentDecoDisplay.getDisplay(),
                c = c.getChildByTag(0);
            return ccs.SPRITE_CONTAIN_POINT_WITH_RETURN(c, a)
        }
        return !1
    },
    setVisible: function (a) {
        this._displayRenderNode && (this._visible = a, this._displayRenderNode.setVisible(a))
    },
    isVisible: function () {
        return this._visible
    },
    getContentSize: function () {
        return !this._displayRenderNode ? cc.size(0, 0) : this._displayRenderNode.getContentSize()
    },
    getBoundingBox: function () {
        return !this._displayRenderNode ? cc.rect(0, 0, 0, 0) : this._displayRenderNode.getBoundingBox()
    },
    getAnchorPoint: function () {
        return !this._displayRenderNode ? cc.p(0, 0) : this._displayRenderNode.getAnchorPoint()
    },
    getAnchorPointInPoints: function () {
        return !this._displayRenderNode ?
            cc.p(0, 0) : this._displayRenderNode.getAnchorPointInPoints()
    },
    getForceChangeDisplay: function () {
        return this._forceChangeDisplay
    },
    release: function () {
        this._decoDisplayList = null;
        this._displayRenderNode && (this._displayRenderNode.removeFromParent(!0), this._displayRenderNode = null)
    }
});
ccs.DisplayManager.create = function (a) {
    return new ccs.DisplayManager(a)
};
ccs.Skin = ccs.Sprite.extend({
    _skinData: null,
    bone: null,
    _skinTransform: null,
    _displayName: "",
    _armature: null,
    _className: "Skin",
    ctor: function (a, b) {
        cc.Sprite.prototype.ctor.call(this);
        this.bone = this._skinData = null;
        this._displayName = "";
        this._skinTransform = cc.affineTransformIdentity();
        this._armature = null;
        null == a || "" === a ? ccs.Skin.prototype.init.call(this) : "#" === a[0] ? ccs.Skin.prototype.initWithSpriteFrameName.call(this, a.substr(1)) : ccs.Skin.prototype.initWithFile.call(this, a, b)
    },
    initWithSpriteFrameName: function (a) {
        if ("" ===
            a) return !1;
        var b = cc.spriteFrameCache.getSpriteFrame(a),
            c = !0;
        b ? this.initWithSpriteFrame(b) : (cc.log("Can't find CCSpriteFrame with %s. Please check your .plist file", a), c = !1);
        this._displayName = a;
        return c
    },
    initWithFile: function (a, b) {
        var c = b ? cc.Sprite.prototype.initWithFile.call(this, a, b) : cc.Sprite.prototype.initWithFile.call(this, a);
        this._displayName = a;
        return c
    },
    setSkinData: function (a) {
        this._skinData = a;
        this.setScaleX(a.scaleX);
        this.setScaleY(a.scaleY);
        this.setRotationX(cc.radiansToDegrees(a.skewX));
        this.setRotationY(cc.radiansToDegrees(-a.skewY));
        this.setPosition(a.x, a.y);
        this._renderCmd.transform()
    },
    getSkinData: function () {
        return this._skinData
    },
    updateArmatureTransform: function () {
        this._renderCmd.transform()
    },
    getNodeToWorldTransform: function () {
        return this._renderCmd.getNodeToWorldTransform()
    },
    getNodeToWorldTransformAR: function () {
        return this._renderCmd.getNodeToWorldTransformAR()
    },
    setBone: function (a) {
        this.bone = a;
        if (a = this.bone.getArmature()) this._armature = a
    },
    getBone: function () {
        return this.bone
    },
    getDisplayName: function () {
        return this._displayName
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new ccs.Skin.CanvasRenderCmd(this) : new ccs.Skin.WebGLRenderCmd(this)
    }
});
_p = ccs.Skin.prototype;
cc.defineGetterSetter(_p, "skinData", _p.getSkinData, _p.setSkinData);
cc.defineGetterSetter(_p, "displayName", _p.getDisplayName);
_p = null;
ccs.Skin.create = function (a, b) {
    return new ccs.Skin(a, b)
};
ccs.Skin.createWithSpriteFrameName = function (a) {
    return new ccs.Skin("#" + a)
};
(function () {
    ccs.Skin.RenderCmd = {
        _realWorldTM: null,
        transform: function (a, c) {
            this._transform || (this._transform = {
                a: 1,
                b: 0,
                c: 0,
                d: 1,
                tx: 0,
                ty: 0
            }, this._worldTransform = {
                a: 1,
                b: 0,
                c: 0,
                d: 1,
                tx: 0,
                ty: 0
            });
            var d = this._node,
                f = a ? a._worldTransform : null,
                g = this._transform,
                h = this._worldTransform;
            if (this._dirtyFlag & cc.Node._dirtyFlags.transformDirty || f) this.originTransform(), cc.affineTransformConcatIn(this._transform, d.bone.getNodeToArmatureTransform()), this._dirtyFlag &= ~cc.Node._dirtyFlags.transformDirty;
            if (f) {
                if (h.a = g.a *
                    f.a + g.b * f.c, h.b = g.a * f.b + g.b * f.d, h.c = g.c * f.a + g.d * f.c, h.d = g.c * f.b + g.d * f.d, h.tx = g.tx * f.a + g.ty * f.c + f.tx, h.ty = g.tx * f.b + g.ty * f.d + f.ty, f = this._vertices) {
                    var m = d._offsetPosition.x,
                        n = m + d._rect.width,
                        p = d._offsetPosition.y,
                        d = p + d._rect.height;
                    f[0].x = m * h.a + d * h.c + h.tx;
                    f[0].y = m * h.b + d * h.d + h.ty;
                    f[1].x = m * h.a + p * h.c + h.tx;
                    f[1].y = m * h.b + p * h.d + h.ty;
                    f[2].x = n * h.a + d * h.c + h.tx;
                    f[2].y = n * h.b + d * h.d + h.ty;
                    f[3].x = n * h.a + p * h.c + h.tx;
                    f[3].y = n * h.b + p * h.d + h.ty
                }
            } else h.a = g.a, h.b = g.b, h.c = g.c, h.d = g.d, h.tx = g.tx, h.ty = g.ty;
            if (h = this._realWorldTM) h.a =
                g.a, h.b = g.b, h.c = g.c, h.d = g.d, h.tx = g.tx, h.ty = g.ty, cc.affineTransformConcatIn(h, this._node.bone.getArmature()._renderCmd._worldTransform)
        },
        getNodeToWorldTransform: function () {
            return cc.affineTransformConcat(this._transform, this._node.bone.getArmature().getNodeToWorldTransform())
        },
        getNodeToWorldTransformAR: function () {
            var a = this._transform,
                c = this._node;
            this._anchorPointInPoints = cc.pointApplyAffineTransform(this._anchorPointInPoints, a);
            a.tx = this._anchorPointInPoints.x;
            a.ty = this._anchorPointInPoints.y;
            return cc.affineTransformConcat(a,
                c.bone.getArmature().getNodeToWorldTransform())
        }
    };
    ccs.Skin.CanvasRenderCmd = function (a) {
        this._spriteCmdCtor(a);
        this._realWorldTM = {
            a: 1,
            b: 0,
            c: 0,
            d: 1,
            tx: 0,
            ty: 0
        }
    };
    var a = ccs.Skin.CanvasRenderCmd.prototype = Object.create(cc.Sprite.CanvasRenderCmd.prototype);
    cc.inject(ccs.Skin.RenderCmd, a);
    a.constructor = ccs.Skin.CanvasRenderCmd;
    a._updateCurrentRegions = function () {
        var a = this._currentRegion;
        this._currentRegion = this._oldRegion;
        this._oldRegion = a;
        cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble === this._regionFlag &&
            !this._currentRegion.isEmpty() && this._oldRegion.union(this._currentRegion);
        this._currentRegion.updateRegion(this.getLocalBB(), this._realWorldTM)
    };
    ccs.Skin.WebGLRenderCmd = function (a) {
        this._spriteCmdCtor(a)
    };
    a = ccs.Skin.WebGLRenderCmd.prototype = Object.create(cc.Sprite.WebGLRenderCmd.prototype);
    cc.inject(ccs.Skin.RenderCmd, a);
    a.constructor = ccs.Skin.WebGLRenderCmd
})();
ccs.ANIMATION_TYPE_SINGLE_FRAME = -4;
ccs.ANIMATION_TYPE_NO_LOOP = -3;
ccs.ANIMATION_TYPE_TO_LOOP_FRONT = -2;
ccs.ANIMATION_TYPE_TO_LOOP_BACK = -1;
ccs.ANIMATION_TYPE_LOOP_FRONT = 0;
ccs.ANIMATION_TYPE_LOOP_BACK = 1;
ccs.ANIMATION_TYPE_MAX = 2;
ccs.ProcessBase = ccs.Class.extend({
    _processScale: 1,
    _isComplete: !0,
    _isPause: !0,
    _isPlaying: !1,
    _currentPercent: 0,
    _rawDuration: 0,
    _loopType: 0,
    _tweenEasing: 0,
    animationInternal: null,
    _currentFrame: 0,
    _durationTween: 0,
    _nextFrameIndex: 0,
    _curFrameIndex: null,
    _isLoopBack: !1,
    ctor: function () {
        this._processScale = 1;
        this._isPause = this._isComplete = !0;
        this._isPlaying = !1;
        this._rawDuration = this._durationTween = this._currentPercent = this._currentFrame = 0;
        this._loopType = ccs.ANIMATION_TYPE_LOOP_BACK;
        this._tweenEasing = ccs.TweenType.LINEAR;
        this.animationInternal = 1 / 60;
        this._durationTween = this._curFrameIndex = 0;
        this._isLoopBack = !1
    },
    pause: function () {
        this._isPause = !0;
        this._isPlaying = !1
    },
    resume: function () {
        this._isPause = !1;
        this._isPlaying = !0
    },
    stop: function () {
        this._isComplete = !0;
        this._isPlaying = !1
    },
    play: function (a, b, c, d) {
        this._isPause = this._isComplete = !1;
        this._isPlaying = !0;
        this._currentFrame = 0;
        this._nextFrameIndex = a;
        this._tweenEasing = d
    },
    update: function (a) {
        if (!this._isComplete && !this._isPause && !(0 >= this._rawDuration || 1 < a)) {
            var b = void 0 === this._nextFrameIndex ?
                0 : this._nextFrameIndex,
                c = this._currentFrame;
            0 >= b ? (this._currentPercent = 1, c = 0) : (c += this._processScale * (a / this.animationInternal), this._currentPercent = c / b, c = ccs.fmodf(c, b));
            this._currentFrame = c;
            this.updateHandler()
        }
    },
    gotoFrame: function (a) {
        var b = this._loopType;
        b === ccs.ANIMATION_TYPE_NO_LOOP ? b = ccs.ANIMATION_TYPE_MAX : b === ccs.ANIMATION_TYPE_TO_LOOP_FRONT && (b = ccs.ANIMATION_TYPE_LOOP_FRONT);
        this._loopType = b;
        this._curFrameIndex = a;
        this._nextFrameIndex = this._durationTween
    },
    getCurrentFrameIndex: function () {
        return this._curFrameIndex =
            (this._rawDuration - 1) * this._currentPercent
    },
    updateHandler: function () {},
    isPause: function () {
        return this._isPause
    },
    isComplete: function () {
        return this._isComplete
    },
    getCurrentPercent: function () {
        return this._currentPercent
    },
    getRawDuration: function () {
        return this._rawDuration
    },
    getLoop: function () {
        return this._loopType
    },
    getTweenEasing: function () {
        return this._tweenEasing
    },
    getAnimationInternal: function () {
        return this.animationInternal
    },
    setAnimationInternal: function (a) {
        this.animationInternal = a
    },
    getProcessScale: function () {
        return this._processScale
    },
    setProcessScale: function (a) {
        this._processScale = a
    },
    isPlaying: function () {
        return this._isPlaying
    }
});
_p = ccs.ProcessBase.prototype;
cc.defineGetterSetter(_p, "currentFrameIndex", _p.getCurrentFrameIndex);
cc.defineGetterSetter(_p, "paused", _p.isPause);
cc.defineGetterSetter(_p, "completed", _p.isComplete);
cc.defineGetterSetter(_p, "currentPercent", _p.getCurrentPercent);
cc.defineGetterSetter(_p, "rawDuration", _p.getRawDuration);
cc.defineGetterSetter(_p, "loop", _p.getLoop);
cc.defineGetterSetter(_p, "tweenEasing", _p.getTweenEasing);
cc.defineGetterSetter(_p, "playing", _p.isPlaying);
_p = null;
ccs.MovementEventType = {
    start: 0,
    complete: 1,
    loopComplete: 2
};
ccs.AnimationEvent = ccs.Class.extend({
    _arguments: null,
    _callFunc: null,
    _selectorTarget: null,
    ctor: function (a, b, c) {
        this._data = c;
        this._callFunc = a;
        this._selectorTarget = b
    },
    call: function () {
        this._callFunc && this._callFunc.apply(this._selectorTarget, this._arguments)
    },
    setArguments: function (a) {
        this._arguments = a
    }
});
ccs.MovementEvent = function () {
    this.armature = null;
    this.movementType = ccs.MovementEventType.start;
    this.movementID = ""
};
ccs.FrameEvent = function () {
    this.bone = null;
    this.frameEventName = "";
    this.currentFrameIndex = this.originFrameIndex = 0
};
ccs.ArmatureAnimation = ccs.ProcessBase.extend({
    _animationData: null,
    _movementData: null,
    _armature: null,
    _movementID: "",
    _toIndex: 0,
    _tweenList: null,
    _speedScale: 1,
    _ignoreFrameEvent: !1,
    _frameEventQueue: null,
    _movementEventQueue: null,
    _movementList: null,
    _onMovementList: !1,
    _movementListLoop: !1,
    _movementIndex: 0,
    _movementListDurationTo: -1,
    _movementEventCallFunc: null,
    _frameEventCallFunc: null,
    _movementEventTarget: null,
    _frameEventTarget: null,
    _movementEventListener: null,
    _frameEventListener: null,
    ctor: function (a) {
        ccs.ProcessBase.prototype.ctor.call(this);
        this._tweenList = [];
        this._movementList = [];
        this._frameEventQueue = [];
        this._movementEventQueue = [];
        this._armature = null;
        a && ccs.ArmatureAnimation.prototype.init.call(this, a)
    },
    init: function (a) {
        this._armature = a;
        this._tweenList.length = 0;
        return !0
    },
    pause: function () {
        for (var a = this._tweenList, b = 0; b < a.length; b++) a[b].pause();
        ccs.ProcessBase.prototype.pause.call(this)
    },
    resume: function () {
        for (var a = this._tweenList, b = 0; b < a.length; b++) a[b].resume();
        ccs.ProcessBase.prototype.resume.call(this)
    },
    stop: function () {
        for (var a =
                this._tweenList, b = 0; b < a.length; b++) a[b].stop();
        a.length = 0;
        ccs.ProcessBase.prototype.stop.call(this)
    },
    setAnimationScale: function (a) {
        this.setSpeedScale(a)
    },
    getAnimationScale: function () {
        return this.getSpeedScale()
    },
    setSpeedScale: function (a) {
        if (a !== this._speedScale) {
            this._speedScale = a;
            this._processScale = !this._movementData ? this._speedScale : this._speedScale * this._movementData.scale;
            a = this._armature.getBoneDic();
            for (var b in a) {
                var c = a[b];
                c.getTween().setProcessScale(this._processScale);
                c.getChildArmature() &&
                    c.getChildArmature().getAnimation().setSpeedScale(this._processScale)
            }
        }
    },
    getSpeedScale: function () {
        return this._speedScale
    },
    play: function (a, b, c) {
        cc.assert(this._animationData, "this.animationData can not be null");
        this._movementData = this._animationData.getMovement(a);
        cc.assert(this._movementData, "this._movementData can not be null");
        b = void 0 === b ? -1 : b;
        c = void 0 === c ? -1 : c;
        this._rawDuration = this._movementData.duration;
        this._movementID = a;
        this._processScale = this._speedScale * this._movementData.scale;
        b = -1 ===
            b ? this._movementData.durationTo : b;
        a = 0 === this._movementData.durationTween ? this._rawDuration : this._movementData.durationTween;
        var d = this._movementData.tweenEasing;
        c = 0 > c ? this._movementData.loop : c;
        this._onMovementList = !1;
        ccs.ProcessBase.prototype.play.call(this, b, a, c, d);
        0 === this._rawDuration ? this._loopType = ccs.ANIMATION_TYPE_SINGLE_FRAME : (this._loopType = c ? ccs.ANIMATION_TYPE_TO_LOOP_FRONT : ccs.ANIMATION_TYPE_NO_LOOP, this._durationTween = a);
        this._tweenList.length = 0;
        var f, g = this._armature.getBoneDic(),
            h;
        for (h in g) {
            var m =
                g[h];
            f = this._movementData.movBoneDataDic[m.getName()];
            var n = m.getTween();
            f && 0 < f.frameList.length ? (this._tweenList.push(n), f.duration = this._movementData.duration, n.play(f, b, a, c, d), n.setProcessScale(this._processScale), m.getChildArmature() && (m.getChildArmature().getAnimation().setSpeedScale(this._processScale), m.getChildArmature().getAnimation().isPlaying() || m.getChildArmature().getAnimation().playWithIndex(0))) : m.isIgnoreMovementBoneData() || (m.getDisplayManager().changeDisplayWithIndex(-1, !1), n.stop())
        }
        this._armature.update(0)
    },
    playByIndex: function (a, b, c, d, f) {
        cc.log("playByIndex is deprecated. Use playWithIndex instead.");
        this.playWithIndex(a, b, d)
    },
    playWithIndex: function (a, b, c) {
        var d = this._animationData.movementNames;
        cc.assert(-1 < a && a < d.length);
        this.play(d[a], b, c)
    },
    playWithNames: function (a, b, c) {
        this._movementListLoop = void 0 === c ? !0 : c;
        this._movementListDurationTo = void 0 === b ? -1 : b;
        this._onMovementList = !0;
        this._movementIndex = 0;
        a instanceof Array ? this._movementList = a : this._movementList.length = 0;
        this.updateMovementList()
    },
    playWithIndexes: function (a,
        b, c) {
        this._movementList.length = 0;
        this._movementListLoop = void 0 === c ? !0 : c;
        this._movementListDurationTo = void 0 === b ? -1 : b;
        this._onMovementList = !0;
        this._movementIndex = 0;
        b = this._animationData.movementNames;
        for (c = 0; c < a.length; c++) this._movementList.push(b[a[c]]);
        this.updateMovementList()
    },
    gotoAndPlay: function (a) {
        if (!this._movementData || 0 > a || a >= this._movementData.duration) cc.log("Please ensure you have played a movement, and the frameIndex is in the range.");
        else {
            var b = this._ignoreFrameEvent;
            this._isPlaying =
                this._ignoreFrameEvent = !0;
            this._isComplete = this._isPause = !1;
            ccs.ProcessBase.prototype.gotoFrame.call(this, a);
            this._currentPercent = this._curFrameIndex / (this._movementData.duration - 1);
            this._currentFrame = this._nextFrameIndex * this._currentPercent;
            for (var c = this._tweenList, d = 0; d < c.length; d++) c[d].gotoAndPlay(a);
            this._armature.update(0);
            this._ignoreFrameEvent = b
        }
    },
    gotoAndPause: function (a) {
        this.gotoAndPlay(a);
        this.pause()
    },
    getMovementCount: function () {
        return this._animationData.getMovementCount()
    },
    update: function (a) {
        ccs.ProcessBase.prototype.update.call(this,
            a);
        for (var b = this._tweenList, c = 0; c < b.length; c++) b[c].update(a);
        for (b = this._frameEventQueue; 0 < b.length;) a = b.shift(), this._ignoreFrameEvent = !0, this._frameEventCallFunc && this._frameEventCallFunc.call(this._frameEventTarget, a.bone, a.frameEventName, a.originFrameIndex, a.currentFrameIndex), this._frameEventListener && this._frameEventListener(a.bone, a.frameEventName, a.originFrameIndex, a.currentFrameIndex), this._ignoreFrameEvent = !1;
        for (b = this._movementEventQueue; 0 < b.length;) a = b.shift(), this._movementEventCallFunc &&
            this._movementEventCallFunc.call(this._movementEventTarget, a.armature, a.movementType, a.movementID), this._movementEventListener && this._movementEventListener(a.armature, a.movementType, a.movementID)
    },
    updateHandler: function () {
        var a = this._currentPercent;
        if (1 <= a) {
            switch (this._loopType) {
            case ccs.ANIMATION_TYPE_NO_LOOP:
                this._loopType = ccs.ANIMATION_TYPE_MAX;
                this._currentFrame = (a - 1) * this._nextFrameIndex;
                a = this._currentFrame / this._durationTween;
                if (1 > a) {
                    this._nextFrameIndex = this._durationTween;
                    this.movementEvent(this._armature,
                        ccs.MovementEventType.start, this._movementID);
                    break
                }
                break;
            case ccs.ANIMATION_TYPE_MAX:
            case ccs.ANIMATION_TYPE_SINGLE_FRAME:
                a = 1;
                this._isComplete = !0;
                this._isPlaying = !1;
                this.movementEvent(this._armature, ccs.MovementEventType.complete, this._movementID);
                this.updateMovementList();
                break;
            case ccs.ANIMATION_TYPE_TO_LOOP_FRONT:
                this._loopType = ccs.ANIMATION_TYPE_LOOP_FRONT;
                a = ccs.fmodf(a, 1);
                this._currentFrame = 0 === this._nextFrameIndex ? 0 : ccs.fmodf(this._currentFrame, this._nextFrameIndex);
                this._nextFrameIndex = 0 <
                    this._durationTween ? this._durationTween : 1;
                this.movementEvent(this, ccs.MovementEventType.start, this._movementID);
                break;
            default:
                this._currentFrame = ccs.fmodf(this._currentFrame, this._nextFrameIndex), this._toIndex = 0, this.movementEvent(this._armature, ccs.MovementEventType.loopComplete, this._movementID)
            }
            this._currentPercent = a
        }
    },
    getCurrentMovementID: function () {
        return this._isComplete ? "" : this._movementID
    },
    setMovementEventCallFunc: function (a, b) {
        1 === arguments.length ? this._movementEventListener = a : 2 === arguments.length &&
            (this._movementEventTarget = b, this._movementEventCallFunc = a)
    },
    setFrameEventCallFunc: function (a, b) {
        1 === arguments.length ? this._frameEventListener = a : 2 === arguments.length && (this._frameEventTarget = b, this._frameEventCallFunc = a)
    },
    setUserObject: function (a) {
        this._userObject = a
    },
    frameEvent: function (a, b, c, d) {
        if (this._frameEventTarget && this._frameEventCallFunc || this._frameEventListener) {
            var f = new ccs.FrameEvent;
            f.bone = a;
            f.frameEventName = b;
            f.originFrameIndex = c;
            f.currentFrameIndex = d;
            this._frameEventQueue.push(f)
        }
    },
    movementEvent: function (a, b, c) {
        if (this._movementEventTarget && this._movementEventCallFunc || this._movementEventListener) {
            var d = new ccs.MovementEvent;
            d.armature = a;
            d.movementType = b;
            d.movementID = c;
            this._movementEventQueue.push(d)
        }
    },
    updateMovementList: function () {
        if (this._onMovementList) {
            var a, b = this._movementList;
            this._movementListLoop ? (a = b[this._movementIndex], this.play(a, a.durationTo, 0), this._movementIndex++, this._movementIndex >= b.length && (this._movementIndex = 0)) : this._movementIndex < b.length ? (a = b[this._movementIndex],
                this.play(a, a.durationTo, 0), this._movementIndex++) : this._onMovementList = !1;
            this._onMovementList = !0
        }
    },
    setAnimationData: function (a) {
        this._animationData !== a && (this._animationData = a)
    },
    getAnimationData: function () {
        return this._animationData
    },
    getUserObject: function () {
        return this._userObject
    },
    isIgnoreFrameEvent: function () {
        return this._ignoreFrameEvent
    }
});
_p = ccs.ArmatureAnimation.prototype;
cc.defineGetterSetter(_p, "speedScale", _p.getSpeedScale, _p.setSpeedScale);
cc.defineGetterSetter(_p, "animationScale", _p.getAnimationScale, _p.setAnimationScale);
_p = null;
ccs.ArmatureAnimation.create = function (a) {
    return new ccs.ArmatureAnimation(a)
};
ccs.Tween = ccs.ProcessBase.extend({
    _tweenData: null,
    _to: null,
    _from: null,
    _between: null,
    _movementBoneData: null,
    _bone: null,
    _frameTweenEasing: 0,
    _betweenDuration: 0,
    _totalDuration: 0,
    _toIndex: 0,
    _fromIndex: 0,
    _animation: null,
    _passLastFrame: !1,
    ctor: function (a) {
        ccs.ProcessBase.prototype.ctor.call(this);
        this._frameTweenEasing = ccs.TweenType.LINEAR;
        ccs.Tween.prototype.init.call(this, a)
    },
    init: function (a) {
        this._from = new ccs.FrameData;
        this._between = new ccs.FrameData;
        this._bone = a;
        this._tweenData = this._bone.getTweenData();
        this._tweenData.displayIndex = -1;
        this._animation = null !== this._bone && null !== this._bone.getArmature() ? this._bone.getArmature().getAnimation() : null;
        return !0
    },
    play: function (a, b, c, d, f) {
        ccs.ProcessBase.prototype.play.call(this, b, c, d, f);
        this._loopType = d ? ccs.ANIMATION_TYPE_TO_LOOP_FRONT : ccs.ANIMATION_TYPE_NO_LOOP;
        this._fromIndex = this._toIndex = this._betweenDuration = this._totalDuration = 0;
        f = a !== this._movementBoneData;
        this.setMovementBoneData(a);
        this._rawDuration = this._movementBoneData.duration;
        a = this._movementBoneData.getFrameData(0);
        this._tweenData.displayIndex = a.displayIndex;
        this._bone.getArmature().getArmatureData().dataVersion >= ccs.CONST_VERSION_COMBINED && (ccs.TransformHelp.nodeSub(this._tweenData, this._bone.getBoneData()), this._tweenData.scaleX += 1, this._tweenData.scaleY += 1);
        0 === this._rawDuration ? (this._loopType = ccs.ANIMATION_TYPE_SINGLE_FRAME, 0 === b ? this.setBetween(a, a) : this.setBetween(this._tweenData, a), this._frameTweenEasing = ccs.TweenType.LINEAR) : 1 < this._movementBoneData.frameList.length && (this._durationTween = c * this._movementBoneData.scale,
            d && 0 !== this._movementBoneData.delay ? this.setBetween(this._tweenData, this.tweenNodeTo(this.updateFrameData(1 - this._movementBoneData.delay), this._between)) : !f || 0 === b ? this.setBetween(a, a) : this.setBetween(this._tweenData, a));
        this.tweenNodeTo(0)
    },
    gotoAndPlay: function (a) {
        ccs.ProcessBase.prototype.gotoFrame.call(this, a);
        this._fromIndex = this._toIndex = this._betweenDuration = this._totalDuration = 0;
        this._isPlaying = !0;
        this._isComplete = this._isPause = !1;
        this._currentPercent = this._curFrameIndex / (this._rawDuration -
            1);
        this._currentFrame = this._nextFrameIndex * this._currentPercent
    },
    gotoAndPause: function (a) {
        this.gotoAndPlay(a);
        this.pause()
    },
    updateHandler: function () {
        var a = null == this._currentPercent ? 1 : this._currentPercent,
            b = this._loopType;
        if (1 <= a) switch (b) {
        case ccs.ANIMATION_TYPE_SINGLE_FRAME:
            a = 1;
            this._isComplete = !0;
            this._isPlaying = !1;
            break;
        case ccs.ANIMATION_TYPE_NO_LOOP:
            b = ccs.ANIMATION_TYPE_MAX;
            a = 0 >= this._durationTween ? 1 : (a - 1) * this._nextFrameIndex / this._durationTween;
            1 <= a ? (a = 1, this._isComplete = !0, this._isPlaying = !1) : (this._nextFrameIndex = this._durationTween, this._currentFrame = a * this._nextFrameIndex, this._fromIndex = this._toIndex = this._betweenDuration = this._totalDuration = 0);
            break;
        case ccs.ANIMATION_TYPE_TO_LOOP_FRONT:
            b = ccs.ANIMATION_TYPE_LOOP_FRONT;
            this._nextFrameIndex = 0 < this._durationTween ? this._durationTween : 1;
            0 !== this._movementBoneData.delay ? (this._currentFrame = (1 - this._movementBoneData.delay) * this._nextFrameIndex, a = this._currentFrame / this._nextFrameIndex) : this._currentFrame = a = 0;
            this._fromIndex = this._toIndex =
                this._betweenDuration = this._totalDuration = 0;
            break;
        case ccs.ANIMATION_TYPE_MAX:
            a = 1;
            this._isComplete = !0;
            this._isPlaying = !1;
            break;
        default:
            this._currentFrame = ccs.fmodf(this._currentFrame, this._nextFrameIndex)
        }
        1 > a && b < ccs.ANIMATION_TYPE_TO_LOOP_BACK && (a = Math.sin(a * cc.PI / 2));
        this._currentPercent = a;
        this._loopType = b;
        b > ccs.ANIMATION_TYPE_TO_LOOP_BACK && (a = this.updateFrameData(a));
        this._frameTweenEasing !== ccs.TweenType.TWEEN_EASING_MAX && this.tweenNodeTo(a)
    },
    setBetween: function (a, b, c) {
        void 0 === c && (c = !0);
        0 > a.displayIndex &&
            0 <= b.displayIndex ? (this._from.copy(b), this._between.subtract(b, b, c)) : 0 > b.displayIndex && 0 <= a.displayIndex ? (this._from.copy(a), this._between.subtract(b, b, c)) : (this._from.copy(a), this._between.subtract(a, b, c));
        a.isTween || (this._tweenData.copy(a), this._tweenData.isTween = !0);
        this.arriveKeyFrame(a)
    },
    arriveKeyFrame: function (a) {
        if (a) {
            var b = this._bone,
                c = b.getDisplayManager(),
                d = a.displayIndex;
            c.getForceChangeDisplay() || c.changeDisplayWithIndex(d, !1);
            this._tweenData.zOrder = a.zOrder;
            b.updateZOrder();
            this._bone.setBlendFunc(a.blendFunc);
            (b = b.getChildArmature()) && "" !== a.movement && b.getAnimation().play(a.movement)
        }
    },
    tweenNodeTo: function (a, b) {
        b || (b = this._tweenData);
        var c = this._from,
            d = this._between;
        c.isTween || (a = 0);
        b.x = c.x + a * d.x;
        b.y = c.y + a * d.y;
        b.scaleX = c.scaleX + a * d.scaleX;
        b.scaleY = c.scaleY + a * d.scaleY;
        b.skewX = c.skewX + a * d.skewX;
        b.skewY = c.skewY + a * d.skewY;
        this._bone.setTransformDirty(!0);
        b && d.isUseColorInfo && this.tweenColorTo(a, b);
        return b
    },
    tweenColorTo: function (a, b) {
        var c = this._from,
            d = this._between;
        b.a = c.a + a * d.a;
        b.r = c.r + a * d.r;
        b.g = c.g + a *
            d.g;
        b.b = c.b + a * d.b;
        this._bone.updateColor()
    },
    updateFrameData: function (a) {
        1 < a && 0 !== this._movementBoneData.delay && (a = ccs.fmodf(a, 1));
        a *= this._rawDuration - 1;
        var b, c, d = this._totalDuration,
            f = this._betweenDuration,
            g = this._toIndex;
        if (a < d || a >= d + f) {
            var f = this._movementBoneData.frameList,
                h = f.length;
            if (a < f[0].frameID) return b = c = f[0], this.setBetween(b, c), this._currentPercent;
            if (a >= f[h - 1].frameID) {
                if (this._passLastFrame) return b = c = f[h - 1], this.setBetween(b, c), this._currentPercent;
                this._passLastFrame = !0
            } else this._passLastFrame = !1;
            do
                if (this._fromIndex = g, b = f[this._fromIndex], d = b.frameID, g = this._fromIndex + 1, g >= h && (g = 0), c = f[g], b.strEvent && !this._animation.isIgnoreFrameEvent() && this._animation.frameEvent(this._bone, b.strEvent, b.frameID, a), a === b.frameID || this._passLastFrame && this._fromIndex === h - 1) break; while (a < b.frameID || a >= c.frameID);
            f = c.frameID - b.frameID;
            this._frameTweenEasing = b.tweenEasing;
            this.setBetween(b, c, !1);
            this._totalDuration = d;
            this._betweenDuration = f;
            this._toIndex = g
        }
        a = 0 === f ? 0 : (a - this._totalDuration) / this._betweenDuration;
        b = this._frameTweenEasing !== ccs.TweenType.LINEAR ? this._frameTweenEasing : this._tweenEasing;
        b !== ccs.TweenType.TWEEN_EASING_MAX && (b !== ccs.TweenType.LINEAR && !this._passLastFrame) && (a = ccs.TweenFunction.tweenTo(a, b, this._from.easingParams));
        return a
    },
    setAnimation: function (a) {
        this._animation = a
    },
    getAnimation: function () {
        return this._animation
    },
    setMovementBoneData: function (a) {
        this._movementBoneData = a
    }
});
_p = ccs.Tween.prototype;
cc.defineGetterSetter(_p, "animation", _p.getAnimation, _p.setAnimation);
_p = null;
ccs.Tween.create = function (a) {
    return new ccs.Tween(a)
};
ccs.PT_RATIO = 32;
ccs.ColliderFilter = ccs.Class.extend({
    _collisionType: 0,
    _group: 0,
    _categoryBits: 0,
    _groupIndex: 0,
    _maskBits: 0,
    ctor: function (a, b) {
        this._collisionType = a || 0;
        this._group = b || 0
    },
    updateShape: function (a) {
        if (a instanceof cp.Shape) a.collision_type = this._collisionType, a.group = this._group;
        else if (a instanceof Box2D.b2FilterData) {
            var b = new Box2D.b2FilterData;
            b.categoryBits = this._categoryBits;
            b.groupIndex = this._groupIndex;
            b.maskBits = this._maskBits;
            a.SetFilterData(b)
        }
    }
});
ccs.ColliderBody = ccs.Class.extend({
    shape: null,
    coutourData: null,
    colliderFilter: null,
    _calculatedVertexList: null,
    ctor: function (a) {
        this.shape = null;
        this.coutourData = a;
        this.colliderFilter = new ccs.ColliderFilter;
        ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX && (this._calculatedVertexList = [])
    },
    getContourData: function () {
        return this.coutourData
    },
    setColliderFilter: function (a) {
        this.colliderFilter = a
    },
    getCalculatedVertexList: function () {
        return this._calculatedVertexList
    },
    setB2Fixture: function (a) {
        this._fixture = a
    },
    getB2Fixture: function () {
        return this._fixture
    },
    setShape: function (a) {
        this.shape = a
    },
    getShape: function () {
        return this.shape
    },
    setContourData: function (a) {
        this.coutourData = a
    },
    getColliderFilter: function () {
        return this.colliderFilter
    }
});
ccs.ColliderDetector = ccs.Class.extend({
    _colliderBodyList: null,
    _bone: null,
    _body: null,
    _active: !1,
    _filter: null,
    helpPoint: cc.p(0, 0),
    ctor: function (a) {
        this._colliderBodyList = [];
        this._body = this._bone = null;
        this._active = !1;
        this._filter = null;
        ccs.ColliderDetector.prototype.init.call(this, a)
    },
    init: function (a) {
        this._colliderBodyList.length = 0;
        a && (this._bone = a);
        this._filter = new ccs.ColliderFilter;
        return !0
    },
    addContourData: function (a) {
        var b = new ccs.ColliderBody(a);
        this._colliderBodyList.push(b);
        if (ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX) {
            b =
                b.getCalculatedVertexList();
            a = a.vertexList;
            for (var c = 0; c < a.length; c++) {
                var d = new ccs.ContourVertex2(0, 0);
                b.push(d)
            }
        }
    },
    addContourDataList: function (a) {
        for (var b = 0; b < a.length; b++) this.addContourData(a[b])
    },
    removeContourData: function (a) {
        var b = [],
            c, d = this._colliderBodyList;
        for (c = 0; c < d.length; c++) {
            var f = d[c];
            f && f.getContourData() === a && b.push(f)
        }
        for (c = 0; c < b.length; c++) cc.arrayRemoveObject(d, b[c])
    },
    removeAll: function () {
        this._colliderBodyList.length = 0
    },
    setActive: function (a) {
        if (this._active !== a) {
            this._active =
                a;
            a = this._body;
            var b;
            if (a)
                if (b = null, this._active)
                    for (var c = 0; c < this._colliderBodyList.length; c++) b = this._colliderBodyList[c], b = b.getShape(), a.space.addShape(b);
                else
                    for (c = 0; c < this._colliderBodyList.length; c++) b = this._colliderBodyList[c], b = b.getShape(), a.space.removeShape(b)
        }
    },
    getActive: function () {
        return this._active
    },
    getColliderBodyList: function () {
        return this._colliderBodyList
    },
    setColliderFilter: function (a) {
        this._filter = a;
        for (var b = this._colliderBodyList, c = 0; c < b.length; c++) {
            var d = b[c];
            d.setColliderFilter(a);
            d.getShape() && d.getColliderFilter().updateShape(d.getShape())
        }
    },
    getColliderFilter: function () {
        return this._filter
    },
    updateTransform: function (a) {
        if (this._active)
            for (var b = null, c = this._body, d = this.helpPoint, f = 0; f < this._colliderBodyList.length; f++) {
                var b = this._colliderBodyList[f],
                    g = b.getContourData(),
                    h = null;
                c && (h = b.getShape());
                for (var g = g.vertexList, m = b.getCalculatedVertexList(), b = 0; b < g.length; b++) {
                    d.x = g[b].x;
                    d.y = g[b].y;
                    d = cc.pointApplyAffineTransform(d, a);
                    if (ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX) {
                        var n =
                            cc.p(0, 0);
                        n.x = d.x;
                        n.y = d.y;
                        m[b] = n
                    }
                    h && (h.verts[2 * b] = d.x, h.verts[2 * b + 1] = d.y)
                }
                if (h)
                    for (b = 0; b < g.length; b++) m = cp.v.normalize(cp.v.perp(cp.v.sub(h.verts[(b + 1) % h.verts.length], h.verts[b]))), h.planes && (h.planes[b].n = m, h.planes[b].d = cp.v.dot(m, h.verts[b]))
            }
    },
    setBody: function (a) {
        this._body = a;
        for (var b = this._colliderBodyList, c = 0; c < b.length; c++) {
            a = b[c];
            for (var d = [], f = a.getContourData().vertexList, g = 0; g < f.length; g++) {
                var h = f[g];
                d.push(h.x);
                d.push(h.y)
            }
            d = new cp.PolyShape(this._body, d, cp.vzero);
            d.sensor = !0;
            d.data =
                this._bone;
            this._active && this._body.space.addShape(d);
            a.setShape(d);
            a.getColliderFilter().updateShape(d)
        }
    },
    getBody: function () {
        return this._body
    }
});
_p = ccs.ColliderDetector.prototype;
cc.defineGetterSetter(_p, "colliderFilter", _p.getColliderFilter, _p.setColliderFilter);
cc.defineGetterSetter(_p, "active", _p.getActive, _p.setActive);
cc.defineGetterSetter(_p, "body", _p.getBody, _p.setBody);
_p = null;
ccs.ColliderDetector.create = function (a) {
    return new ccs.ColliderDetector(a)
};
ccs.Armature = ccs.Node.extend({
    animation: null,
    armatureData: null,
    batchNode: null,
    _parentBone: null,
    _boneDic: null,
    _topBoneList: null,
    _armatureIndexDic: null,
    _offsetPoint: null,
    version: 0,
    _armatureTransformDirty: !0,
    _body: null,
    _blendFunc: null,
    _className: "Armature",
    ctor: function (a, b) {
        cc.Node.prototype.ctor.call(this);
        this._name = "";
        this._topBoneList = [];
        this._armatureIndexDic = {};
        this._offsetPoint = cc.p(0, 0);
        this._armatureTransformDirty = !0;
        this._blendFunc = {
            src: cc.BLEND_SRC,
            dst: cc.BLEND_DST
        };
        a && ccs.Armature.prototype.init.call(this,
            a, b);
        this._texture = {}
    },
    init: function (a, b) {
        b && (this._parentBone = b);
        this.removeAllChildren();
        this.animation = new ccs.ArmatureAnimation;
        this.animation.init(this);
        this._boneDic = {};
        this._topBoneList.length = 0;
        var c = ccs.armatureDataManager,
            d;
        if ("" !== a) {
            d = c.getAnimationData(a);
            cc.assert(d, "AnimationData not exist!");
            this.animation.setAnimationData(d);
            c = c.getArmatureData(a);
            cc.assert(c, "ArmatureData not exist!");
            this.armatureData = c;
            var c = c.getBoneDataDic(),
                f;
            for (f in c) {
                var c = this.createBone(String(f)),
                    g = d.getMovement(d.movementNames[0]);
                if (g && (g = g.getMovementBoneData(c.getName())) && !(0 >= g.frameList.length))
                    if (g = g.getFrameData(0)) c.getTweenData().copy(g), c.changeDisplayWithIndex(g.displayIndex, !1)
            }
            this.update(0);
            this.updateOffsetPoint()
        } else a = "new_armature", this.armatureData = new ccs.ArmatureData, this.armatureData.name = a, d = new ccs.AnimationData, d.name = a, c.addArmatureData(a, this.armatureData), c.addAnimationData(a, d), this.animation.setAnimationData(d);
        this._renderCmd.initShaderCache();
        this.setCascadeOpacityEnabled(!0);
        this.setCascadeColorEnabled(!0);
        return !0
    },
    visit: function (a) {
        var b = this._renderCmd;
        a = a ? a._renderCmd : null;
        this._visible ? (b.visit(a), b._dirtyFlag = 0) : b._propagateFlagsDown(a)
    },
    addChild: function (a, b, c) {
        a instanceof ccui.Widget ? cc.log("Armature doesn't support to add Widget as its child, it will be fix soon.") : cc.Node.prototype.addChild.call(this, a, b, c)
    },
    createBone: function (a) {
        var b = this.getBone(a);
        if (b) return b;
        var b = this.armatureData.getBoneData(a),
            c = b.parentName,
            d = null;
        c ? (this.createBone(c), d = new ccs.Bone(a), this.addBone(d, c)) : (d =
            new ccs.Bone(a), this.addBone(d, ""));
        d.setBoneData(b);
        d.getDisplayManager().changeDisplayWithIndex(-1, !1);
        return d
    },
    addBone: function (a, b) {
        cc.assert(a, "Argument must be non-nil");
        var c = this._boneDic;
        a.getName() && cc.assert(!c[a.getName()], "bone already added. It can't be added again");
        if (b) {
            var d = c[b];
            d ? d.addChildBone(a) : this._topBoneList.push(a)
        } else this._topBoneList.push(a);
        a.setArmature(this);
        c[a.getName()] = a;
        this.addChild(a)
    },
    removeBone: function (a, b) {
        cc.assert(a, "bone must be added to the bone dictionary!");
        a.setArmature(null);
        a.removeFromParent(b);
        cc.arrayRemoveObject(this._topBoneList, a);
        delete this._boneDic[a.getName()];
        this.removeChild(a, !0)
    },
    getBone: function (a) {
        return this._boneDic[a]
    },
    changeBoneParent: function (a, b) {
        cc.assert(a, "bone must be added to the bone dictionary!");
        var c = a.getParentBone();
        c && (cc.arrayRemoveObject(c.getChildren(), a), a.setParentBone(null));
        b && ((c = this._boneDic[b]) ? (c.addChildBone(a), cc.arrayRemoveObject(this._topBoneList, a)) : this._topBoneList.push(a))
    },
    getBoneDic: function () {
        return this._boneDic
    },
    updateOffsetPoint: function () {
        var a = this.getBoundingBox();
        this.setContentSize(a);
        var b = this._offsetPoint;
        b.x = -a.x;
        b.y = -a.y;
        0 !== a.width && 0 !== a.height && this.setAnchorPoint(b.x / a.width, b.y / a.height)
    },
    getOffsetPoints: function () {
        return {
            x: this._offsetPoint.x,
            y: this._offsetPoint.y
        }
    },
    setAnimation: function (a) {
        this.animation = a
    },
    getAnimation: function () {
        return this.animation
    },
    getArmatureTransformDirty: function () {
        return this._armatureTransformDirty
    },
    update: function (a) {
        this.animation.update(a);
        for (var b = this._topBoneList,
                c = 0; c < b.length; c++) b[c].update(a);
        this._armatureTransformDirty = !1
    },
    onEnter: function () {
        cc.Node.prototype.onEnter.call(this);
        this.scheduleUpdate()
    },
    onExit: function () {
        cc.Node.prototype.onExit.call(this);
        this.unscheduleUpdate()
    },
    getBoundingBox: function () {
        for (var a, b, c, d = 0, f = !0, g = cc.rect(0, 0, 0, 0), h = this._children, m = h.length, n = 0; n < m; n++)
            if (a = h[n]) d = a.getDisplayManager().getBoundingBox(), 0 === d.x && 0 === d.y && 0 === d.width && 0 === d.height || (f ? (a = d.x, b = d.y, c = d.x + d.width, d = d.y + d.height, f = !1) : (a = d.x < g.x ? d.x : g.x, b =
                d.y < g.y ? d.y : g.y, c = d.x + d.width > g.x + g.width ? d.x + d.width : g.x + g.width, d = d.y + d.height > g.y + g.height ? d.y + d.height : g.y + g.height), g.x = a, g.y = b, g.width = c - a, g.height = d - b);
        return cc.rectApplyAffineTransform(g, this.getNodeToParentTransform())
    },
    getBoneAtPoint: function (a, b) {
        for (var c = this._children, d = c.length - 1; 0 <= d; d--) {
            var f = c[d];
            if (f instanceof ccs.Bone && f.getDisplayManager().containPoint(a, b)) return f
        }
        return null
    },
    setParentBone: function (a) {
        this._parentBone = a;
        a = this._boneDic;
        for (var b in a) a[b].setArmature(this)
    },
    getParentBone: function () {
        return this._parentBone
    },
    drawContour: function () {
        cc._drawingUtil.setDrawColor(255, 255, 255, 255);
        cc._drawingUtil.setLineWidth(1);
        var a = this._boneDic,
            b;
        for (b in a) {
            var c = a[b].getColliderDetector();
            if (c)
                for (var c = c.getColliderBodyList(), d = 0; d < c.length; d++) {
                    var f = c[d].getCalculatedVertexList();
                    cc._drawingUtil.drawPoly(f, f.length, !0)
                }
        }
    },
    setBody: function (a) {
        if (this._body !== a) {
            this._body = a;
            this._body.data = this;
            var b, c;
            a = this._children;
            for (var d = 0; d < a.length; d++)
                if (b = a[d], b instanceof ccs.Bone) {
                    b = b.getDisplayManager().getDecorativeDisplayList();
                    for (var f = 0; f < b.length; f++) c = b[f], (c = c.getColliderDetector()) && c.setBody(this._body)
                }
        }
    },
    getShapeList: function () {
        return this._body ? this._body.shapeList : null
    },
    getBody: function () {
        return this._body
    },
    setBlendFunc: function (a, b) {
        void 0 === b ? (this._blendFunc.src = a.src, this._blendFunc.dst = a.dst) : (this._blendFunc.src = a, this._blendFunc.dst = b)
    },
    getBlendFunc: function () {
        return new cc.BlendFunc(this._blendFunc.src, this._blendFunc.dst)
    },
    setColliderFilter: function (a) {
        var b =
            this._boneDic,
            c;
        for (c in b) b[c].setColliderFilter(a)
    },
    getArmatureData: function () {
        return this.armatureData
    },
    setArmatureData: function (a) {
        this.armatureData = a
    },
    getBatchNode: function () {
        return this.batchNode
    },
    setBatchNode: function (a) {
        this.batchNode = a
    },
    getVersion: function () {
        return this.version
    },
    setVersion: function (a) {
        this.version = a
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new ccs.Armature.CanvasRenderCmd(this) : new ccs.Armature.WebGLRenderCmd(this)
    }
});
_p = ccs.Armature.prototype;
cc.defineGetterSetter(_p, "parentBone", _p.getParentBone, _p.setParentBone);
cc.defineGetterSetter(_p, "body", _p.getBody, _p.setBody);
cc.defineGetterSetter(_p, "colliderFilter", null, _p.setColliderFilter);
_p = null;
ccs.Armature.create = function (a, b) {
    return new ccs.Armature(a, b)
};
(function () {
    ccs.Armature.RenderCmd = {
        _updateAnchorPointInPoint: function () {
            var a = this._node,
                b = a._contentSize,
                c = a._anchorPoint,
                a = a._offsetPoint;
            this._anchorPointInPoints.x = b.width * c.x - a.x;
            this._anchorPointInPoints.y = b.height * c.y - a.y;
            this._realAnchorPointInPoints.x = b.width * c.x;
            this._realAnchorPointInPoints.y = b.height * c.y;
            this.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)
        },
        getAnchorPointInPoints: function () {
            return cc.p(this._realAnchorPointInPoints)
        }
    }
})();
(function () {
    ccs.Armature.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !0;
        this._realAnchorPointInPoints = new cc.Point(0, 0);
        this._canUseDirtyRegion = !0;
        this._startRenderCmd = new cc.CustomRenderCmd(this, this._startCmdCallback);
        this._RestoreRenderCmd = new cc.CustomRenderCmd(this, this._RestoreCmdCallback);
        this._startRenderCmd._canUseDirtyRegion = !0;
        this._RestoreRenderCmd._canUseDirtyRegion = !0;
        this._transform = {
            a: 1,
            b: 0,
            c: 0,
            d: 1,
            tx: 0,
            ty: 0
        };
        this._worldTransform = {
            a: 1,
            b: 0,
            c: 0,
            d: 1,
            tx: 0,
            ty: 0
        }
    };
    var a =
        ccs.Armature.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    cc.inject(ccs.Armature.RenderCmd, a);
    a.constructor = ccs.Armature.CanvasRenderCmd;
    a._startCmdCallback = function (a, c, d) {
        var f = this._node._parent;
        this.transform(f ? f._renderCmd : null);
        a = a || cc._renderContext;
        a.save();
        a._switchToArmatureMode(!0, this._worldTransform, c, d)
    };
    a.transform = function (a, c) {
        this.originTransform(a, c);
        for (var d = this._node._children, f = 0, g = d.length; f < g; f++) {
            var h = d[f],
                m = h._renderCmd;
            if (h && h.getDisplayRenderNode) {
                var n =
                    h.getDisplayRenderNodeType(),
                    p = h.getDisplayRenderNode();
                if (p && p._renderCmd) {
                    p = p._renderCmd;
                    p.transform(null);
                    n !== ccs.DISPLAY_TYPE_ARMATURE && n !== ccs.DISPLAY_TYPE_SPRITE && cc.affineTransformConcatIn(p._worldTransform, h._worldTransform);
                    var n = cc.Node._dirtyFlags,
                        u = p._dirtyFlag,
                        v = m._dirtyFlag,
                        x = v & n.colorDirty,
                        v = v & n.opacityDirty;
                    x && m._updateDisplayColor(this._displayedColor);
                    v && m._updateDisplayOpacity(this._displayedOpacity);
                    (x || v) && m._updateColor();
                    m = h._renderCmd._displayedColor;
                    h = h._renderCmd._displayedOpacity;
                    x = u & n.colorDirty;
                    v = u & n.opacityDirty;
                    x && p._updateDisplayColor(m);
                    v && p._updateDisplayOpacity(h);
                    (x || v) && p._updateColor()
                }
            }
        }
    };
    a._RestoreCmdCallback = function (a) {
        this._cacheDirty = !1;
        a._switchToArmatureMode(!1);
        a.restore()
    };
    a.initShaderCache = function () {};
    a.setShaderProgram = function () {};
    a.updateChildPosition = function (a, c) {
        a.visit()
    };
    a.rendering = function (a, c, d) {
        for (var f = this._node._children, g = 0, h = f.length; g < h; g++) {
            var m = f[g];
            if (m && m.getDisplayRenderNode) {
                var n = m.getDisplayRenderNode();
                if (null !== n) switch (m._renderCmd._syncStatus(this),
                    m.getDisplayRenderNodeType()) {
                case ccs.DISPLAY_TYPE_SPRITE:
                    n.visit(m);
                    break;
                case ccs.DISPLAY_TYPE_ARMATURE:
                    n._renderCmd.rendering(a, c, d);
                    break;
                default:
                    n.visit(m)
                }
            } else m instanceof cc.Node && this._visitNormalChild(m)
        }
    };
    a._visitNormalChild = function (a) {
        if (a) {
            var c = a._renderCmd;
            if (a._visible) {
                c._curLevel = this._curLevel + 1;
                var d, f = a._children,
                    g;
                c._syncStatus(this);
                c.transform(null);
                var h = f.length;
                if (0 < h) {
                    a.sortAllChildren();
                    for (d = 0; d < h; d++)
                        if (g = f[d], 0 > g._localZOrder) g.visit(a);
                        else break;
                    for (cc.renderer.pushRenderCommand(c); d <
                        h; d++) f[d].visit(a)
                } else cc.renderer.pushRenderCommand(c);
                this._dirtyFlag = 0
            }
        }
    };
    a.visit = function (a) {
        var c = this._node;
        c._visible && (this._syncStatus(a), c.sortAllChildren(), cc.renderer.pushRenderCommand(this._startRenderCmd), this.rendering(), cc.renderer.pushRenderCommand(this._RestoreRenderCmd), this._cacheDirty = !1)
    }
})();
(function () {
    ccs.Armature.WebGLRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !0;
        this._parentCmd = null;
        this._realAnchorPointInPoints = new cc.Point(0, 0);
        this._transform = {
            a: 1,
            b: 0,
            c: 0,
            d: 1,
            tx: 0,
            ty: 0
        };
        this._worldTransform = {
            a: 1,
            b: 0,
            c: 0,
            d: 1,
            tx: 0,
            ty: 0
        }
    };
    var a = ccs.Armature.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
    cc.inject(ccs.Armature.RenderCmd, a);
    a.constructor = ccs.Armature.WebGLRenderCmd;
    a.uploadData = function (a, c, d) {
        a = this._node;
        d = this._parentCmd || this;
        for (var f = a._children,
                g = cc.BlendFunc.ALPHA_PREMULTIPLIED, h = cc.BlendFunc.ALPHA_NON_PREMULTIPLIED, m = 0, n = f.length; m < n; m++) {
            var p = f[m],
                u = p._renderCmd;
            if (p && p.getDisplayRenderNode) {
                var v = p.getDisplayRenderNode();
                if (null !== v) switch (c = v._renderCmd, p.getDisplayRenderNodeType()) {
                case ccs.DISPLAY_TYPE_SPRITE:
                    v instanceof ccs.Skin && (v.setShaderProgram(this._shaderProgram), this._updateColorAndOpacity(c, p), c.transform(d), u = p.getBlendFunc(), u.src !== g.src || u.dst !== g.dst ? v.setBlendFunc(p.getBlendFunc()) : (p = v.getTexture(), a._blendFunc.src ===
                        g.src && a._blendFunc.dst === g.dst && p && !p.hasPremultipliedAlpha() ? v.setBlendFunc(h) : v.setBlendFunc(a._blendFunc)), cc.renderer._uploadBufferData(c));
                    break;
                case ccs.DISPLAY_TYPE_ARMATURE:
                    v.setShaderProgram(this._shaderProgram), this._updateColorAndOpacity(c, p), c._parentCmd = this;
                default:
                    u._syncStatus(d), c._syncStatus(u), c.uploadData ? cc.renderer._uploadBufferData(c) : c.rendering && (cc.renderer._batchRendering(), c.rendering(cc._renderContext))
                }
            } else p instanceof cc.Node && (p.setShaderProgram(this._shaderProgram),
                u._syncStatus(d), u.uploadData ? cc.renderer._uploadBufferData(u) : u.rendering && (cc.renderer._batchRendering(), u.rendering(cc._renderContext)))
        }
        this._parentCmd = null;
        return 0
    };
    a.initShaderCache = function () {
        this._shaderProgram = cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR)
    };
    a.setShaderProgram = function (a) {
        this._shaderProgram = a
    };
    a._updateColorAndOpacity = function (a, c) {
        var d = c._renderCmd._displayedColor,
            f = c._renderCmd._displayedOpacity,
            g = cc.Node._dirtyFlags,
            h = a._dirtyFlag,
            m = h & g.colorDirty,
            g = h & g.opacityDirty;
        m && a._updateDisplayColor(d);
        g && a._updateDisplayOpacity(f);
        (m || g) && a._updateColor()
    };
    a.visit = function (a) {
        var c = this._node;
        if (c._visible) {
            if (a = a || this.getParentRenderCmd()) this._curLevel = a._curLevel + 1;
            this._syncStatus(a);
            c.sortAllChildren();
            a = cc.renderer;
            var d = c._children,
                f, g = d.length;
            isNaN(c._customZ) && (c._vertexZ = a.assignedZ, a.assignedZ += a.assignedZStep);
            for (f = 0; f < g; f++)
                if (c = d[f], 0 > c._localZOrder) isNaN(c._customZ) && (c._vertexZ = a.assignedZ, a.assignedZ += a.assignedZStep);
                else break;
            for (a.pushRenderCommand(this); f < g; f++) c = d[f], isNaN(c._customZ) && (c._vertexZ = a.assignedZ, a.assignedZ += a.assignedZStep);
            this._dirtyFlag = 0
        }
    }
})();
ccs.Bone = ccs.Node.extend({
    _boneData: null,
    _armature: null,
    _childArmature: null,
    _displayManager: null,
    ignoreMovementBoneData: !1,
    _tween: null,
    _tweenData: null,
    _parentBone: null,
    _boneTransformDirty: !1,
    _worldTransform: null,
    _blendFunc: null,
    blendDirty: !1,
    _worldInfo: null,
    _armatureParentBone: null,
    _dataVersion: 0,
    _className: "Bone",
    ctor: function (a) {
        cc.Node.prototype.ctor.call(this);
        this._displayManager = this._tween = this._boneData = this._childArmature = this._armature = this._parentBone = this._tweenData = null;
        this.ignoreMovementBoneData = !1;
        this._worldTransform = cc.affineTransformMake(1, 0, 0, 1, 0, 0);
        this._boneTransformDirty = !0;
        this._blendFunc = new cc.BlendFunc(cc.BLEND_SRC, cc.BLEND_DST);
        this.blendDirty = !1;
        this._armatureParentBone = this._worldInfo = null;
        this._dataVersion = 0;
        ccs.Bone.prototype.init.call(this, a)
    },
    init: function (a) {
        a && (this._name = a);
        this._tweenData = new ccs.FrameData;
        this._tween = new ccs.Tween(this);
        this._displayManager = new ccs.DisplayManager(this);
        this._worldInfo = new ccs.BaseData;
        this._boneData = new ccs.BaseData;
        return !0
    },
    setBoneData: function (a) {
        cc.assert(a,
            "_boneData must not be null");
        this._boneData !== a && (this._boneData = a);
        this.setName(this._boneData.name);
        this._localZOrder = this._boneData.zOrder;
        this._displayManager.initDisplayList(a)
    },
    getBoneData: function () {
        return this._boneData
    },
    setArmature: function (a) {
        (this._armature = a) ? (this._tween.setAnimation(this._armature.getAnimation()), this._dataVersion = this._armature.getArmatureData().dataVersion, this._armatureParentBone = this._armature.getParentBone()) : this._armatureParentBone = null
    },
    getArmature: function () {
        return this._armature
    },
    update: function (a) {
        this._parentBone && (this._boneTransformDirty = this._boneTransformDirty || this._parentBone.isTransformDirty());
        this._armatureParentBone && !this._boneTransformDirty && (this._boneTransformDirty = this._armatureParentBone.isTransformDirty());
        if (this._boneTransformDirty) {
            var b = this._tweenData;
            this._dataVersion >= ccs.CONST_VERSION_COMBINED && (ccs.TransformHelp.nodeConcat(b, this._boneData), b.scaleX -= 1, b.scaleY -= 1);
            var c = this._worldInfo;
            c.copy(b);
            c.x = b.x + this._position.x;
            c.y = b.y + this._position.y;
            c.scaleX = b.scaleX * this._scaleX;
            c.scaleY = b.scaleY * this._scaleY;
            c.skewX = b.skewX + this._skewX + cc.degreesToRadians(this._rotationX);
            c.skewY = b.skewY + this._skewY - cc.degreesToRadians(this._rotationY);
            this._parentBone ? this._applyParentTransform(this._parentBone) : this._armatureParentBone && this._applyParentTransform(this._armatureParentBone);
            ccs.TransformHelp.nodeToMatrix(c, this._worldTransform);
            this._armatureParentBone && cc.affineTransformConcatIn(this._worldTransform, this._armature.getNodeToParentTransform())
        }
        ccs.displayFactory.updateDisplay(this,
            a, this._boneTransformDirty || this._armature.getArmatureTransformDirty());
        for (b = 0; b < this._children.length; b++) this._children[b].update(a);
        this._boneTransformDirty = !1
    },
    _applyParentTransform: function (a) {
        var b = this._worldInfo,
            c = a._worldTransform;
        a = a._worldInfo;
        var d = b.x,
            f = b.y;
        b.x = d * c.a + f * c.c + a.x;
        b.y = d * c.b + f * c.d + a.y;
        b.scaleX *= a.scaleX;
        b.scaleY *= a.scaleY;
        b.skewX += a.skewX;
        b.skewY += a.skewY
    },
    setBlendFunc: function (a, b) {
        var c = this._blendFunc,
            d, f;
        void 0 === b ? (d = a.src, f = a.dst) : (d = a, f = b);
        if (c.src !== d || c.dst !== f) c.src =
            d, c.dst = f, this.blendDirty = !0
    },
    updateColor: function () {
        var a = this._displayManager.getDisplayRenderNode();
        if (null !== a) {
            var b = this._renderCmd;
            a.setColor(cc.color(b._displayedColor.r * this._tweenData.r / 255, b._displayedColor.g * this._tweenData.g / 255, b._displayedColor.b * this._tweenData.b / 255));
            a.setOpacity(b._displayedOpacity * this._tweenData.a / 255)
        }
    },
    updateZOrder: function () {
        this._armature.getArmatureData().dataVersion >= ccs.CONST_VERSION_COMBINED ? this.setLocalZOrder(this._tweenData.zOrder + this._boneData.zOrder) :
            this.setLocalZOrder(this._tweenData.zOrder)
    },
    addChildBone: function (a) {
        cc.assert(a, "Argument must be non-nil");
        cc.assert(!a.parentBone, "child already added. It can't be added again");
        0 > this._children.indexOf(a) && (this._children.push(a), a.setParentBone(this))
    },
    removeChildBone: function (a, b) {
        if (0 < this._children.length && -1 !== this._children.getIndex(a)) {
            if (b)
                for (var c = a._children, d = 0; d < c.length; d++) a.removeChildBone(c[d], b);
            a.setParentBone(null);
            a.getDisplayManager().setCurrentDecorativeDisplay(null);
            cc.arrayRemoveObject(this._children,
                a)
        }
    },
    removeFromParent: function (a) {
        this._parentBone && this._parentBone.removeChildBone(this, a)
    },
    setParentBone: function (a) {
        this._parentBone = a
    },
    getParentBone: function () {
        return this._parentBone
    },
    setChildArmature: function (a) {
        this._childArmature !== a && (null == a && this._childArmature && this._childArmature.setParentBone(null), this._childArmature = a)
    },
    getChildArmature: function () {
        return this._childArmature
    },
    getTween: function () {
        return this._tween
    },
    setLocalZOrder: function (a) {
        this._localZOrder !== a && cc.Node.prototype.setLocalZOrder.call(this,
            a)
    },
    getNodeToArmatureTransform: function () {
        return this._worldTransform
    },
    getNodeToWorldTransform: function () {
        return cc.affineTransformConcat(this._worldTransform, this._armature.getNodeToWorldTransform())
    },
    getDisplayRenderNode: function () {
        return this._displayManager.getDisplayRenderNode()
    },
    getDisplayRenderNodeType: function () {
        return this._displayManager.getDisplayRenderNodeType()
    },
    addDisplay: function (a, b) {
        return this._displayManager.addDisplay(a, b || 0)
    },
    removeDisplay: function (a) {
        this._displayManager.removeDisplay(a)
    },
    changeDisplayByIndex: function (a, b) {
        cc.log("changeDisplayByIndex is deprecated. Use changeDisplayWithIndex instead.");
        this.changeDisplayWithIndex(a, b)
    },
    changeDisplayByName: function (a, b) {
        cc.log("changeDisplayByName is deprecated. Use changeDisplayWithName instead.");
        this.changeDisplayWithName(a, b)
    },
    changeDisplayWithIndex: function (a, b) {
        this._displayManager.changeDisplayWithIndex(a, b)
    },
    changeDisplayWithName: function (a, b) {
        this._displayManager.changeDisplayWithName(a, b)
    },
    getColliderDetector: function () {
        var a =
            this._displayManager.getCurrentDecorativeDisplay();
        return a && (a = a.getColliderDetector()) ? a : null
    },
    setColliderFilter: function (a) {
        for (var b = this._displayManager.getDecorativeDisplayList(), c = 0; c < b.length; c++) {
            var d = b[c].getColliderDetector();
            d && d.setColliderFilter(a)
        }
    },
    getColliderFilter: function () {
        var a = this.displayManager.getCurrentDecorativeDisplay();
        return a && (a = a.getColliderDetector()) ? a.getColliderFilter() : null
    },
    setTransformDirty: function (a) {
        this._boneTransformDirty = a
    },
    isTransformDirty: function () {
        return this._boneTransformDirty
    },
    getDisplayManager: function () {
        return this._displayManager
    },
    setIgnoreMovementBoneData: function (a) {
        this._ignoreMovementBoneData = a
    },
    isIgnoreMovementBoneData: function () {
        return this._ignoreMovementBoneData
    },
    getBlendFunc: function () {
        return new cc.BlendFunc(this._blendFunc.src, this._blendFunc.dst)
    },
    setBlendDirty: function (a) {
        this._blendDirty = a
    },
    isBlendDirty: function () {
        return this._blendDirty
    },
    getTweenData: function () {
        return this._tweenData
    },
    getWorldInfo: function () {
        return this._worldInfo
    },
    getChildrenBone: function () {
        return this._children
    },
    nodeToArmatureTransform: function () {
        return this.getNodeToArmatureTransform()
    },
    nodeToWorldTransform: function () {
        return this.getNodeToWorldTransform()
    },
    getColliderBodyList: function () {
        var a = this.getColliderDetector();
        return a ? a.getColliderBodyList() : null
    },
    getIgnoreMovementBoneData: function () {
        return this.isIgnoreMovementBoneData()
    },
    _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new ccs.Bone.CanvasRenderCmd(this) : new ccs.Bone.WebGLRenderCmd(this)
    }
});
_p = ccs.Bone.prototype;
cc.defineGetterSetter(_p, "boneData", _p.getBoneData, _p.setBoneData);
cc.defineGetterSetter(_p, "armature", _p.getArmature, _p.setArmature);
cc.defineGetterSetter(_p, "childArmature", _p.getChildArmature, _p.setChildArmature);
cc.defineGetterSetter(_p, "childrenBone", _p.getChildrenBone);
cc.defineGetterSetter(_p, "tween", _p.getTween);
cc.defineGetterSetter(_p, "tweenData", _p.getTweenData);
cc.defineGetterSetter(_p, "colliderFilter", _p.getColliderFilter, _p.setColliderFilter);
_p = null;
ccs.Bone.create = function (a) {
    return new ccs.Bone(a)
};
ccs.Bone.RenderCmd = {
    _updateColor: function () {
        var a = this._node,
            b = a._displayManager.getDisplayRenderNode();
        if (null !== b) {
            var c = b._renderCmd;
            b.setColor(this._displayedColor);
            b.setOpacity(this._displayedOpacity);
            c._syncDisplayColor(a._tweenData);
            c._syncDisplayOpacity(a._tweenData.a);
            c._updateColor()
        }
    },
    transform: function (a, b) {
        this._transform || (this._transform = {
            a: 1,
            b: 0,
            c: 0,
            d: 1,
            tx: 0,
            ty: 0
        }, this._worldTransform = {
            a: 1,
            b: 0,
            c: 0,
            d: 1,
            tx: 0,
            ty: 0
        });
        var c = this._node,
            d = this._transform,
            f = this._worldTransform,
            g = a ? a._worldTransform :
            null;
        g && (this.originTransform(), cc.affineTransformConcatIn(d, c._worldTransform));
        g ? (f.a = d.a * g.a + d.b * g.c, f.b = d.a * g.b + d.b * g.d, f.c = d.c * g.a + d.d * g.c, f.d = d.c * g.b + d.d * g.d, f.tx = d.tx * g.a + d.ty * g.c + g.tx, f.ty = d.tx * g.b + d.ty * g.d + g.ty) : (f.a = d.a, f.b = d.b, f.c = d.c, f.d = d.d, f.tx = d.tx, f.ty = d.ty)
    }
};
(function () {
    ccs.Bone.CanvasRenderCmd = function (a) {
        this._rootCtor(a);
        this._needDraw = !1
    };
    var a = ccs.Bone.CanvasRenderCmd.prototype = Object.create(cc.Node.CanvasRenderCmd.prototype);
    cc.inject(ccs.Bone.RenderCmd, a);
    a.constructor = ccs.Bone.CanvasRenderCmd
})();
(function () {
    if (cc.Node.WebGLRenderCmd) {
        ccs.Bone.WebGLRenderCmd = function (a) {
            this._rootCtor(a);
            this._needDraw = !1
        };
        var a = ccs.Bone.WebGLRenderCmd.prototype = Object.create(cc.Node.WebGLRenderCmd.prototype);
        cc.inject(ccs.Bone.RenderCmd, a);
        a.constructor = ccs.Bone.WebGLRenderCmd
    }
})();
ccs.FRAME_TYPE_MOVE = 0;
ccs.FRAME_TYPE_SCALE = 1;
ccs.FRAME_TYPE_ROTATE = 2;
ccs.FRAME_TYPE_TINT = 3;
ccs.FRAME_TYPE_FADE = 4;
ccs.FRAME_TYPE_MAX = 5;
ccs.FrameEaseType = {
    CUSTOM: -1,
    LINEAR: 0,
    SINE_EASEIN: 1,
    SINE_EASEOUT: 2,
    SINE_EASEINOUT: 3,
    QUAD_EASEIN: 4,
    QUAD_EASEOUT: 5,
    QUAD_EASEINOUT: 6,
    CUBIC_EASEIN: 7,
    CUBIC_EASEOUT: 8,
    CUBIC_EASEINOUT: 9,
    QUART_EASEIN: 10,
    QUART_EASEOUT: 11,
    QUART_EASEINOUT: 12,
    QUINT_EASEIN: 13,
    QUINT_EASEOUT: 14,
    QUINT_EASEINOUT: 15,
    EXPO_EASEIN: 16,
    EXPO_EASEOUT: 17,
    EXPO_EASEINOUT: 18,
    CIRC_EASEIN: 19,
    CIRC_EASEOUT: 20,
    CIRC_EASEINOUT: 21,
    ELASTIC_EASEIN: 22,
    ELASTIC_EASEOUT: 23,
    ELASTIC_EASEINOUT: 24,
    BACK_EASEIN: 25,
    BACK_EASEOUT: 26,
    BACK_EASEINOUT: 27,
    BOUNCE_EASEIN: 28,
    BOUNCE_EASEOUT: 29,
    BOUNCE_EASEINOUT: 30,
    TWEEN_EASING_MAX: 1E3
};
ccs.ActionFrame = ccs.Class.extend({
    frameType: 0,
    easingType: 0,
    frameIndex: 0,
    _Parameter: null,
    time: 0,
    ctor: function () {
        this.frameType = 0;
        this.easingType = ccs.FrameEaseType.LINEAR;
        this.time = this.frameIndex = 0
    },
    getAction: function (a, b) {
        cc.log("Need a definition of <getAction> for ActionFrame");
        return null
    },
    _getEasingAction: function (a) {
        if (null === a) return console.error("Action cannot be null!"), null;
        var b;
        switch (this.easingType) {
        case ccs.FrameEaseType.LINEAR:
            b = a;
            break;
        case ccs.FrameEaseType.SINE_EASEIN:
            b = a.easing(cc.easeSineIn());
            break;
        case ccs.FrameEaseType.SINE_EASEOUT:
            b = a.easing(cc.easeSineOut());
            break;
        case ccs.FrameEaseType.SINE_EASEINOUT:
            b = a.easing(cc.easeSineInOut());
            break;
        case ccs.FrameEaseType.QUAD_EASEIN:
            b = a.easing(cc.easeQuadraticActionIn());
            break;
        case ccs.FrameEaseType.QUAD_EASEOUT:
            b = a.easing(cc.easeQuadraticActionOut());
            break;
        case ccs.FrameEaseType.QUAD_EASEINOUT:
            b = a.easing(cc.easeQuadraticActionInOut());
            break;
        case ccs.FrameEaseType.CUBIC_EASEIN:
            b = a.easing(cc.easeCubicActionIn());
            break;
        case ccs.FrameEaseType.CUBIC_EASEOUT:
            b =
                a.easing(cc.easeCubicActionOut());
            break;
        case ccs.FrameEaseType.CUBIC_EASEINOUT:
            b = a.easing(cc.easeCubicActionInOut());
            break;
        case ccs.FrameEaseType.QUART_EASEIN:
            b = a.easing(cc.easeQuarticActionIn());
            break;
        case ccs.FrameEaseType.QUART_EASEOUT:
            b = a.easing(cc.easeQuarticActionOut());
            break;
        case ccs.FrameEaseType.QUART_EASEINOUT:
            b = a.easing(cc.easeQuarticActionInOut());
            break;
        case ccs.FrameEaseType.QUINT_EASEIN:
            b = a.easing(cc.easeQuinticActionIn());
            break;
        case ccs.FrameEaseType.QUINT_EASEOUT:
            b = a.easing(cc.easeQuinticActionOut());
            break;
        case ccs.FrameEaseType.QUINT_EASEINOUT:
            b = a.easing(cc.easeQuinticActionInOut());
            break;
        case ccs.FrameEaseType.EXPO_EASEIN:
            b = a.easing(cc.easeExponentialIn());
            break;
        case ccs.FrameEaseType.EXPO_EASEOUT:
            b = a.easing(cc.easeExponentialOut());
            break;
        case ccs.FrameEaseType.EXPO_EASEINOUT:
            b = a.easing(cc.easeExponentialInOut());
            break;
        case ccs.FrameEaseType.CIRC_EASEIN:
            b = a.easing(cc.easeCircleActionIn());
            break;
        case ccs.FrameEaseType.CIRC_EASEOUT:
            b = a.easing(cc.easeCircleActionOut());
            break;
        case ccs.FrameEaseType.CIRC_EASEINOUT:
            b =
                a.easing(cc.easeCircleActionInOut());
            break;
        case ccs.FrameEaseType.ELASTIC_EASEIN:
            b = a.easing(cc.easeElasticIn());
            break;
        case ccs.FrameEaseType.ELASTIC_EASEOUT:
            b = a.easing(cc.easeElasticOut());
            break;
        case ccs.FrameEaseType.ELASTIC_EASEINOUT:
            b = a.easing(cc.easeElasticInOut());
            break;
        case ccs.FrameEaseType.BACK_EASEIN:
            b = a.easing(cc.easeBackIn());
            break;
        case ccs.FrameEaseType.BACK_EASEOUT:
            b = a.easing(cc.easeBackOut());
            break;
        case ccs.FrameEaseType.BACK_EASEINOUT:
            b = a.easing(cc.easeBackInOut());
            break;
        case ccs.FrameEaseType.BOUNCE_EASEIN:
            b =
                a.easing(cc.easeBounceIn());
            break;
        case ccs.FrameEaseType.BOUNCE_EASEOUT:
            b = a.easing(cc.easeBounceOut());
            break;
        case ccs.FrameEaseType.BOUNCE_EASEINOUT:
            b = a.easing(cc.easeBounceInOut())
        }
        return b
    },
    setEasingParameter: function (a) {
        this._Parameter = [];
        for (var b = 0; b < a.length; b++) this._Parameter.push(a[b])
    },
    setEasingType: function (a) {
        this.easingType = a
    }
});
ccs.ActionMoveFrame = ccs.ActionFrame.extend({
    _position: null,
    ctor: function () {
        ccs.ActionFrame.prototype.ctor.call(this);
        this._position = cc.p(0, 0);
        this.frameType = ccs.FRAME_TYPE_MOVE
    },
    setPosition: function (a, b) {
        void 0 === b ? (this._position.x = a.x, this._position.y = a.y) : (this._position.x = a, this._position.y = b)
    },
    getPosition: function () {
        return this._position
    },
    getAction: function (a) {
        return this._getEasingAction(cc.moveTo(a, this._position))
    }
});
ccs.ActionScaleFrame = ccs.ActionFrame.extend({
    _scaleX: 1,
    _scaleY: 1,
    ctor: function () {
        ccs.ActionFrame.prototype.ctor.call(this);
        this._scaleY = this._scaleX = 1;
        this.frameType = ccs.FRAME_TYPE_SCALE
    },
    setScaleX: function (a) {
        this._scaleX = a
    },
    getScaleX: function () {
        return this._scaleX
    },
    setScaleY: function (a) {
        this._scaleY = a
    },
    getScaleY: function () {
        return this._scaleY
    },
    getAction: function (a) {
        return this._getEasingAction(cc.scaleTo(a, this._scaleX, this._scaleY))
    }
});
ccs.ActionRotationFrame = ccs.ActionFrame.extend({
    _rotation: 0,
    ctor: function () {
        ccs.ActionFrame.prototype.ctor.call(this);
        this._rotation = 0;
        this.frameType = ccs.FRAME_TYPE_ROTATE
    },
    setRotation: function (a) {
        this._rotation = a
    },
    getRotation: function () {
        return this._rotation
    },
    getAction: function (a, b) {
        return void 0 === b ? this._getEasingAction(cc.rotateTo(a, this._rotation)) : b instanceof cc.ActionRotationFrame ? this._getEasingAction(cc.rotateBy(a, this._rotation - b._rotation)) : this.getAction(a)
    }
});
ccs.ActionFadeFrame = ccs.ActionFrame.extend({
    _opacity: 255,
    ctor: function () {
        ccs.ActionFrame.prototype.ctor.call(this);
        this._opacity = 255;
        this.frameType = ccs.FRAME_TYPE_FADE
    },
    setOpacity: function (a) {
        this._opacity = a
    },
    getOpacity: function () {
        return this._opacity
    },
    getAction: function (a) {
        return this._getEasingAction(cc.fadeTo(a, this._opacity))
    }
});
ccs.ActionTintFrame = ccs.ActionFrame.extend({
    _color: null,
    ctor: function () {
        ccs.ActionFrame.prototype.ctor.call(this);
        this._color = cc.color(255, 255, 255, 255);
        this.frameType = ccs.FRAME_TYPE_TINT
    },
    setColor: function (a) {
        var b = this._color;
        b.r = a.r;
        b.g = a.g;
        b.b = a.b
    },
    getColor: function () {
        var a = this._color;
        return cc.color(a.r, a.g, a.b, a.a)
    },
    getAction: function (a) {
        return this._getEasingAction(cc.tintTo(a, this._color.r, this._color.g, this._color.b))
    }
});
ccs.actionManager = {
    _actionDic: {},
    initWithDictionary: function (a, b, c) {
        var d = a.lastIndexOf("/");
        a = a.substr(d + 1, a.length);
        b = b.actionlist;
        for (var d = [], f = 0; f < b.length; f++) {
            var g = new ccs.ActionObject;
            g.initWithDictionary(b[f], c);
            d.push(g)
        }
        this._actionDic[a] = d
    },
    getActionByName: function (a, b) {
        var c = a.lastIndexOf("/"),
            c = a.substr(c + 1, a.length),
            c = this._actionDic[c];
        if (!c) return null;
        for (var d = 0; d < c.length; d++) {
            var f = c[d];
            if (b === f.getName()) return f
        }
        return null
    },
    playActionByName: function (a, b, c) {
        (a = this.getActionByName(a,
            b)) && a.play(c)
    },
    stopActionByName: function (a, b) {
        var c = this.getActionByName(a, b);
        c && c.stop()
    },
    releaseActions: function () {
        this._actionDic = {}
    },
    clear: function () {
        this._actionDic = {}
    }
};
ccs.ActionNode = ccs.Class.extend({
    _currentFrameIndex: 0,
    _destFrameIndex: 0,
    _unitTime: 0,
    _actionTag: 0,
    _object: null,
    _actionSpawn: null,
    _action: null,
    _frameArray: null,
    _frameArrayNum: 0,
    ctor: function () {
        this._destFrameIndex = this._currentFrameIndex = 0;
        this._unitTime = 0.1;
        this._actionTag = 0;
        this._action = this._actionSpawn = this._object = null;
        this._frameArray = [];
        this._frameArrayNum = ccs.FRAME_TYPE_MAX;
        for (var a = 0; a < this._frameArrayNum; a++) this._frameArray.push([])
    },
    initWithDictionary: function (a, b) {
        this.setActionTag(a.ActionTag);
        for (var c = a.actionframelist, d = ccui.helper.seekActionWidgetByActionTag(b, a.ActionTag), f = d instanceof ccui.Widget && !(d instanceof ccui.Layout), g = 0; g < c.length; g++) {
            var h = c[g],
                m = h.frameid,
                n = h.tweenType;
            null == n && (n = 0);
            for (var p = h.tweenParameter, u = [], v = 0; v < p; v++) u.push(h.tweenParameter[v]);
            if (void 0 !== h.positionx) {
                var v = h.positionx,
                    x = h.positiony;
                f && d.parent && (p = d.parent.getAnchorPointInPoints(), v += p.x, x += p.y);
                p = new ccs.ActionMoveFrame;
                p.frameIndex = m;
                p.setEasingType(n);
                p.setEasingParameter(u);
                p.setPosition(v,
                    x);
                v = this._frameArray[ccs.FRAME_TYPE_MOVE];
                v.push(p)
            }
            void 0 !== h.scalex && (v = h.scalex, x = h.scaley, p = new ccs.ActionScaleFrame, p.frameIndex = m, p.setEasingType(n), p.setEasingParameter(u), p.setScaleX(v), p.setScaleY(x), v = this._frameArray[ccs.FRAME_TYPE_SCALE], v.push(p));
            void 0 !== h.rotation && (v = h.rotation, p = new ccs.ActionRotationFrame, p.frameIndex = m, p.setEasingType(n), p.setEasingParameter(u), p.setRotation(v), v = this._frameArray[ccs.FRAME_TYPE_ROTATE], v.push(p));
            void 0 !== h.opacity && (v = h.opacity, p = new ccs.ActionFadeFrame,
                p.frameIndex = m, p.setEasingType(n), p.setEasingParameter(u), p.setOpacity(v), v = this._frameArray[ccs.FRAME_TYPE_FADE], v.push(p));
            void 0 !== h.colorr && (v = h.colorr, x = h.colorg, h = h.colorb, p = new ccs.ActionTintFrame, p.frameIndex = m, p.setEasingType(n), p.setEasingParameter(u), p.setColor(cc.color(v, x, h)), v = this._frameArray[ccs.FRAME_TYPE_TINT], v.push(p))
        }
        this._initActionNodeFromRoot(b)
    },
    _initActionNodeFromRoot: function (a) {
        a instanceof ccui.Widget && (a = ccui.helper.seekActionWidgetByActionTag(a, this.getActionTag())) &&
            this.setObject(a)
    },
    setUnitTime: function (a) {
        this._unitTime = a;
        this._refreshActionProperty()
    },
    getUnitTime: function () {
        return this._unitTime
    },
    setActionTag: function (a) {
        this._actionTag = a
    },
    getActionTag: function () {
        return this._actionTag
    },
    setObject: function (a) {
        this._object = a
    },
    getObject: function () {
        return this._object
    },
    getActionNode: function () {
        return this._object instanceof cc.Node ? this._object : null
    },
    insertFrame: function (a, b) {
        null != b && this._frameArray[b.frameType].splice(a, 0, b)
    },
    addFrame: function (a) {
        a && this._frameArray[a.frameType].push(a)
    },
    deleteFrame: function (a) {
        void 0 !== a && cc.arrayRemoveObject(this._frameArray[a.frameType], a)
    },
    clearAllFrame: function () {
        for (var a = 0; a < this._frameArrayNum; a++) this._frameArray[a].length = 0
    },
    _refreshActionProperty: function () {
        if (!this._object) return null;
        for (var a = [], b = 0; b < this._frameArrayNum; b++) {
            var c = this._frameArray[b];
            if (!(0 >= c.length)) {
                for (var d = [], f = 0; f < c.length; f++) {
                    var g = c[f],
                        h = null;
                    0 !== f ? (h = (g.frameIndex - c[f - 1].frameIndex) * this.getUnitTime(), h = g.getAction(h)) : h = g.getAction(0);
                    h && d.push(h)
                }
                d && (c =
                    cc.sequence(d), null !== c && a.push(c))
            }
        }
        this._action = null;
        return this._actionSpawn = cc.spawn(a)
    },
    playAction: function (a) {
        this._object && this._actionSpawn && (this._action = a ? cc.sequence(this._actionSpawn, a) : cc.sequence(this._actionSpawn), this._runAction())
    },
    _runAction: function () {
        var a = this.getActionNode();
        null !== a && null !== this._action && a.runAction(this._action)
    },
    stopAction: function () {
        var a = this.getActionNode();
        null !== a && null !== this._action && (this._action.isDone() || a.stopAction(this._action))
    },
    getFirstFrameIndex: function () {
        for (var a =
                99999, b = !1, c = this._frameArray, d = 0, f = this._frameArrayNum; d < f; d++) {
            var g = c[d];
            0 >= g.length || (b = !0, g = g[0].frameIndex, a = a > g ? g : a)
        }
        b || (a = 0);
        return a
    },
    getLastFrameIndex: function () {
        for (var a = -1, b = !1, c = this._frameArray, d = 0, f = this._frameArrayNum; d < f; d++) {
            var g = c[d];
            0 >= g.length || (b = !0, g = g[g.length - 1].frameIndex, a = a < g ? g : a)
        }
        b || (a = 0);
        return a
    },
    updateActionToTimeLine: function (a) {
        for (var b = !1, c = this.getUnitTime(), d = 0; d < this._frameArrayNum; d++) {
            var f = this._frameArray[d];
            if (f)
                for (var g = 0; g < f.length; g++) {
                    var h = f[g];
                    if (h.frameIndex * c === a) {
                        this._easingToFrame(1, 1, h);
                        b = !0;
                        break
                    } else if (h.frameIndex * c > a) {
                        0 === g ? (this._easingToFrame(1, 1, h), b = !1) : (b = f[g - 1], f = (h.frameIndex - b.frameIndex) * c, g = a - b.frameIndex * c, this._easingToFrame(f, 1, b), this._easingToFrame(f, g / f, h), b = !0);
                        break
                    }
                }
        }
        return b
    },
    _easingToFrame: function (a, b, c) {
        a = c.getAction(a);
        c = this.getActionNode();
        null == a || null == c || (a.startWithTarget(c), a.update(b))
    },
    isActionDoneOnce: function () {
        return !this._action ? !0 : this._action.isDone()
    }
});
ccs.ActionObject = ccs.Class.extend({
    _actionNodeList: null,
    _name: "",
    _loop: !1,
    _pause: !1,
    _playing: !1,
    _unitTime: 0,
    _currentTime: 0,
    _scheduler: null,
    _callback: null,
    _fTotalTime: 0,
    ctor: function () {
        this._actionNodeList = [];
        this._name = "";
        this._playing = this._pause = this._loop = !1;
        this._unitTime = 0.1;
        this._fTotalTime = this._currentTime = 0;
        this._scheduler = cc.director.getScheduler()
    },
    setName: function (a) {
        this._name = a
    },
    getName: function () {
        return this._name
    },
    setLoop: function (a) {
        this._loop = a
    },
    getLoop: function () {
        return this._loop
    },
    setUnitTime: function (a) {
        this._unitTime = a;
        a = this._actionNodeList.length;
        for (var b = 0; b < a; b++) this._actionNodeList[b].setUnitTime(this._unitTime)
    },
    getUnitTime: function () {
        return this._unitTime
    },
    getCurrentTime: function () {
        return this._currentTime
    },
    setCurrentTime: function (a) {
        this._currentTime = a
    },
    getTotalTime: function () {
        return this._fTotalTime
    },
    isPlaying: function () {
        return this._playing
    },
    initWithDictionary: function (a, b) {
        this.setName(a.name);
        this.setLoop(a.loop);
        this.setUnitTime(a.unittime);
        for (var c = a.actionnodelist,
                d = 0, f = 0; f < c.length; f++) {
            var g = new ccs.ActionNode;
            g.initWithDictionary(c[f], b);
            g.setUnitTime(this.getUnitTime());
            this._actionNodeList.push(g);
            g = g.getLastFrameIndex() - g.getFirstFrameIndex();
            g > d && (d = g)
        }
        this._fTotalTime = d * this._unitTime
    },
    addActionNode: function (a) {
        a && (this._actionNodeList.push(a), a.setUnitTime(this._unitTime))
    },
    removeActionNode: function (a) {
        null != a && cc.arrayRemoveObject(this._actionNodeList, a)
    },
    play: function (a) {
        this.stop();
        this.updateToFrameByTime(0);
        for (var b = this._actionNodeList, c = b.length,
                d = 0; d < c; d++) b[d].playAction(a);
        this._loop && this._scheduler.schedule(this.simulationActionUpdate, this, 0, cc.REPEAT_FOREVER, 0, !1, this.__instanceId + "");
        void 0 !== a && (this._callback = a)
    },
    pause: function () {
        this._pause = !0;
        this._playing = !1
    },
    stop: function () {
        for (var a = this._actionNodeList, b = 0; b < a.length; b++) a[b].stopAction();
        this._scheduler.unschedule(this.simulationActionUpdate, this);
        this._playing = this._pause = !1
    },
    updateToFrameByTime: function (a) {
        this._currentTime = a;
        for (var b = 0; b < this._actionNodeList.length; b++) this._actionNodeList[b].updateActionToTimeLine(a)
    },
    simulationActionUpdate: function (a) {
        a = !0;
        for (var b = this._actionNodeList, c = 0, d = b.length; c < d; c++)
            if (!b[c].isActionDoneOnce()) {
                a = !1;
                break
            } a && (null !== this._callback && this._callback.execute(), this._loop ? this.play() : (this._playing = !1, this._scheduler.unschedule(this.simulationActionUpdate, this)))
    }
});
ccs.ComAttribute = ccs.Component.extend({
    _jsonDict: null,
    _filePath: "",
    ctor: function () {
        cc.Component.prototype.ctor.call(this);
        this._jsonDict = {};
        this._filePath = "";
        this._name = "CCComAttribute";
        ccs.ComAttribute.prototype.init.call(this)
    },
    init: function () {
        this._jsonDict = {};
        return !0
    },
    setInt: function (a, b) {
        a ? this._jsonDict[a] = b : cc.log("Argument must be non-nil")
    },
    setDouble: function (a, b) {
        a ? this._jsonDict[a] = b : cc.log("Argument must be non-nil")
    },
    setFloat: function (a, b) {
        a ? this._jsonDict[a] = b : cc.log("Argument must be non-nil")
    },
    setBool: function (a, b) {
        a ? this._jsonDict[a] = b : cc.log("Argument must be non-nil")
    },
    setString: function (a, b) {
        a ? this._jsonDict[a] = b : cc.log("Argument must be non-nil")
    },
    setObject: function (a, b) {
        a ? this._jsonDict[a] = b : cc.log("Argument must be non-nil")
    },
    getInt: function (a) {
        return parseInt(this._jsonDict[a] || 0)
    },
    getDouble: function (a) {
        return parseFloat(this._jsonDict[a] || 0)
    },
    getFloat: function (a) {
        return parseFloat(this._jsonDict[a] || 0)
    },
    getBool: function (a) {
        return Boolean(this._jsonDict[a] || !1)
    },
    getString: function (a) {
        return this._jsonDict[a] ||
            ""
    },
    getObject: function (a) {
        return this._jsonDict[a]
    },
    parse: function (a) {
        this._jsonDict = cc.loader.getRes(a)
    }
});
ccs.ComAttribute.create = function () {
    return new ccs.ComAttribute
};
ccs.ComAudio = ccs.Component.extend({
    _filePath: "",
    _loop: !1,
    ctor: function () {
        cc.Component.prototype.ctor.call(this);
        this._name = "Audio";
        ccs.ComAudio.prototype.init.call(this)
    },
    init: function () {
        return !0
    },
    onExit: function () {
        this.stopBackgroundMusic(!0);
        this.stopAllEffects()
    },
    end: function () {
        cc.audioEngine.end()
    },
    preloadBackgroundMusic: function (a) {
        cc.loader.load(a)
    },
    playBackgroundMusic: function (a, b) {
        a ? cc.audioEngine.playMusic(a, b) : cc.audioEngine.playMusic(this._filePath, this._loop)
    },
    stopBackgroundMusic: function (a) {
        cc.audioEngine.stopMusic(a)
    },
    pauseBackgroundMusic: function () {
        cc.audioEngine.pauseMusic()
    },
    resumeBackgroundMusic: function () {
        cc.audioEngine.resumeMusic()
    },
    rewindBackgroundMusic: function () {
        cc.audioEngine.rewindMusic()
    },
    willPlayBackgroundMusic: function () {
        return cc.audioEngine.willPlayMusic()
    },
    isBackgroundMusicPlaying: function () {
        return cc.audioEngine.isMusicPlaying()
    },
    getBackgroundMusicVolume: function () {
        return cc.audioEngine.getMusicVolume()
    },
    setBackgroundMusicVolume: function (a) {
        cc.audioEngine.setMusicVolume(a)
    },
    getEffectsVolume: function () {
        return cc.audioEngine.getEffectsVolume()
    },
    setEffectsVolume: function (a) {
        cc.audioEngine.setEffectsVolume(a)
    },
    playEffect: function (a, b) {
        return a ? cc.audioEngine.playEffect(a, b) : cc.audioEngine.playEffect(this._filePath, this._loop)
    },
    pauseEffect: function (a) {
        cc.audioEngine.pauseEffect(a)
    },
    pauseAllEffects: function () {
        cc.audioEngine.pauseAllEffects()
    },
    resumeEffect: function (a) {
        cc.audioEngine.resumeEffect(a)
    },
    resumeAllEffects: function () {
        cc.audioEngine.resumeAllEffects()
    },
    stopEffect: function (a) {
        cc.audioEngine.stopEffect(a)
    },
    stopAllEffects: function () {
        cc.audioEngine.stopAllEffects()
    },
    preloadEffect: function (a) {
        cc.loader.getRes(a);
        this.setFile(a);
        this.setLoop(!1)
    },
    unloadEffect: function (a) {
        cc.audioEngine.unloadEffect(a)
    },
    setFile: function (a) {
        this._filePath = a
    },
    setLoop: function (a) {
        this._loop = a
    },
    getFile: function () {
        return this._filePath
    },
    isLoop: function () {
        return this._loop
    }
});
ccs.ComAudio.create = function () {
    return new ccs.ComAudio
};
ccs.ComController = ccs.Component.extend({
    ctor: function () {
        cc.Component.prototype.ctor.call(this);
        this._name = "ComController";
        ccs.ComController.prototype.init.call(this)
    },
    onEnter: function () {
        null !== this._owner && this._owner.scheduleUpdate()
    },
    isEnabled: function () {
        return this._enabled
    },
    setEnabled: function (a) {
        this._enabled = a
    }
});
ccs.ComController.create = function () {
    return new ccs.ComController
};
ccs.ComRender = ccs.Component.extend({
    _render: null,
    ctor: function (a, b) {
        cc.Component.prototype.ctor.call(this);
        this._render = a;
        this._name = b;
        this.isRenderer = !0;
        ccs.ComRender.prototype.init.call(this)
    },
    onEnter: function () {
        this._owner && this._owner.addChild(this._render)
    },
    onExit: function () {
        this._owner && (this._owner.removeChild(this._render, !0), this._render = null)
    },
    getNode: function () {
        return this._render
    },
    setNode: function (a) {
        this._render = a
    }
});
ccs.ComRender.create = function (a, b) {
    return new ccs.ComRender(a, b)
};
ccs.objectFactory = {
    _typeMap: {},
    createObject: function (a) {
        var b = null;
        (a = this._typeMap[a]) && (b = cc.isFunction(a._fun) ? new a._fun : a._fun);
        return b
    },
    registerType: function (a) {
        this._typeMap[a._className] = a
    },
    createGUI: function (a) {
        var b = null;
        "Panel" === a ? a = "Layout" : "TextArea" === a ? a = "Label" : "TextButton" === a && (a = "Button");
        if ((a = this._typeMap[a]) && a._fun) b = a._fun;
        return b
    },
    removeAll: function () {
        this._typeMap = {}
    }
};
ccs.TInfo = ccs.Class.extend({
    _className: "",
    _fun: null,
    ctor: function (a, b) {
        b ? (this._className = a, this._fun = b) : (this._className = a._className, this._fun = a._fun);
        ccs.objectFactory.registerType(this)
    }
});
ccs.sendEvent = function (a) {
    a = ccs.triggerManager.get(a);
    if (null != a)
        for (var b = 0; b < a.length; b++) {
            var c = a[b];
            null != c && c.detect() && c.done()
        }
};
ccs.registerTriggerClass = function (a, b) {
    new ccs.TInfo(a, b)
};
ccs.triggerManager = {
    _eventTriggers: {},
    _triggerObjs: {},
    _movementDispatches: [],
    parse: function (a) {
        for (var b = 0; b < a.length; ++b) {
            var c = a[b],
                d = new ccs.TriggerObj;
            d.serialize(c);
            for (var c = d.getEvents(), f = 0; f < c.length; f++) this.add(c[f], d);
            this._triggerObjs[d.getId()] = d
        }
    },
    get: function (a) {
        return this._eventTriggers[a]
    },
    getTriggerObj: function (a) {
        return this._triggerObjs[a]
    },
    add: function (a, b) {
        var c = this._eventTriggers[a];
        c || (c = []); - 1 === c.indexOf(b) && (c.push(b), this._eventTriggers[a] = c)
    },
    removeAll: function () {
        for (var a in this._eventTriggers)
            for (var b =
                    this._eventTriggers[a], c = 0; c < b.length; c++) b[c].removeAll();
        this._eventTriggers = {}
    },
    remove: function (a, b) {
        if (b) return this._removeObj(a, b);
        var c = !1,
            d = this._eventTriggers[a];
        if (d) {
            for (c = 0; c < d.length; c++) {
                var f = d[c];
                f && f.removeAll()
            }
            delete this._eventTriggers[a];
            c = !0
        }
        return c
    },
    _removeObj: function (a, b) {
        var c = !1;
        do {
            var d = this._eventTriggers[a];
            if (d) {
                for (c = 0; c < d.length; c++) {
                    var f = d[c];
                    if (f && f == b) {
                        f.removeAll();
                        d.splice(c, 1);
                        break
                    }
                }
                c = !0
            }
        } while (0);
        return c
    },
    removeTriggerObj: function (a) {
        a = this.getTriggerObj(a);
        if (!a) return !1;
        for (var b = a.getEvents(), c = 0; c < b.length; c++) this.remove(b[c], a);
        return !0
    },
    isEmpty: function () {
        return !this._eventTriggers || 0 >= this._eventTriggers.length
    },
    addArmatureMovementCallBack: function (a, b, c) {
        if (!(null == a || null == c || null == b)) {
            for (var d, f = !1, g = 0; g < this._movementDispatches.length; g++)
                if ((d = this._movementDispatches[g]) && d[0] === a) d.addAnimationEventCallBack(b, c), f = !0;
            f || (d = new ccs.ArmatureMovementDispatcher, a.getAnimation().setMovementEventCallFunc(d.animationEvent, d), d.addAnimationEventCallBack(b,
                c), this._movementDispatches.push([a, d]))
        }
    },
    removeArmatureMovementCallBack: function (a, b, c) {
        if (!(null == a || null == b || null == c))
            for (var d, f = 0; f < this._movementDispatches.length; f++)(d = this._movementDispatches[f]) && d[0] === a && d.removeAnimationEventCallBack(c, b)
    },
    removeArmatureAllMovementCallBack: function (a) {
        if (null != a)
            for (var b, c = 0; c < this._movementDispatches.length; c++)
                if ((b = this._movementDispatches[c]) && b[0] === a) {
                    this._movementDispatches.splice(c, 1);
                    break
                }
    },
    removeAllArmatureMovementCallBack: function () {
        this._movementDispatches.length =
            0
    },
    version: function () {
        return "1.2.0.0"
    }
};
ccs.ArmatureMovementDispatcher = ccs.Class.extend({
    _mapEventAnimation: null,
    ctor: function () {
        this._mapEventAnimation = []
    },
    animationEvent: function (a, b, c) {
        for (var d, f, g = 0; g < this._mapEventAnimation.length; g++) d = this._mapEventAnimation[g], f = d[0], (d = d[1]) && d.call(f, a, b, c)
    },
    addAnimationEventCallBack: function (a, b) {
        this._mapEventAnimation.push([b, a])
    },
    removeAnimationEventCallBack: function (a, b) {
        for (var c, d = 0; d < this._mapEventAnimation.length; d++) c = this._mapEventAnimation[d], c[0] === b && this._mapEventAnimation.splice(d,
            1)
    }
});
ccs.BaseTriggerCondition = ccs.Class.extend({
    ctor: function () {},
    init: function () {
        return !0
    },
    detect: function () {
        return !0
    },
    serialize: function (a) {},
    removeAll: function () {}
});
ccs.BaseTriggerAction = ccs.Class.extend({
    ctor: function () {},
    init: function () {
        return !0
    },
    done: function () {},
    serialize: function (a) {},
    removeAll: function () {}
});
ccs.TriggerObj = ccs.Class.extend({
    _cons: null,
    _acts: null,
    _id: 0,
    _enable: !0,
    _vInt: null,
    ctor: function () {
        this._id = 0;
        this._enable = !0;
        ccs.TriggerObj.prototype.init.call(this)
    },
    init: function () {
        this._cons = [];
        this._acts = [];
        this._vInt = [];
        return !0
    },
    detect: function () {
        if (!this._enable || 0 === this._cons.length) return !0;
        for (var a = !0, b = null, c = 0; c < this._cons.length; c++)(b = this._cons[c]) && b.detect && (a = a && b.detect());
        return a
    },
    done: function () {
        if (this._enable && 0 !== this._acts.length)
            for (var a, b = 0; b < this._acts.length; b++)(a =
                this._acts[b]) && a.done && a.done()
    },
    removeAll: function () {
        for (var a = null, b = 0; b < this._cons.length; b++)(a = this._cons[b]) && a.removeAll();
        this._cons = [];
        for (b = 0; b < this._acts.length; b++)(a = this._acts[b]) && a.removeAll();
        this._acts = []
    },
    serialize: function (a) {
        this._id = a.id || 0;
        for (var b = a.conditions || [], c = 0; c < b.length; c++) {
            var d = b[c],
                f = d.classname,
                g = ccs.objectFactory.createObject(f);
            g ? (g.serialize(d), g.init(), this._cons.push(g)) : cc.log("class named classname(" + f + ") can not implement!")
        }
        b = a.actions || [];
        for (c = 0; c <
            b.length; c++) d = b[c], f = d.classname, (g = ccs.objectFactory.createObject(f)) ? (g.serialize(d), g.init(), this._acts.push(g)) : cc.log("class named classname(" + f + ") can not implement!");
        a = a.events || [];
        for (c = 0; c < a.length; c++) d = a[c], d = d.id, 0 > d || this._vInt.push(d)
    },
    getId: function () {
        return this._id
    },
    setEnable: function (a) {
        this._enable = a
    },
    getEvents: function () {
        return this._vInt
    }
});
ccs.TriggerObj.create = function () {
    return new ccs.TriggerObj
};
ccs.ActionTimelineData = ccs.Class.extend({
    _actionTag: 0,
    ctor: function (a) {
        this._init(a)
    },
    _init: function (a) {
        this._actionTag = a;
        return !0
    },
    setActionTag: function (a) {
        this._actionTag = a
    },
    getActionTag: function () {
        return this._actionTag
    }
});
ccs.AnimationInfo = function (a, b, c) {
    this.name = a;
    this.startIndex = b;
    this.endIndex = c
};
ccs.ComExtensionData = ccs.Component.extend({
    _customProperty: null,
    _timelineData: null,
    _name: "ComExtensionData",
    ctor: function () {
        this._customProperty = "";
        this._timelineData = new ccs.ActionTimelineData(0);
        return !0
    },
    setActionTag: function (a) {
        this._timelineData.setActionTag(a)
    },
    getActionTag: function () {
        return this._timelineData.getActionTag()
    },
    setCustomProperty: function (a) {
        this._customProperty = a
    },
    getCustomProperty: function () {
        return this._customProperty
    }
});
ccs.ComExtensionData.create = function () {
    return new ccs.ComExtensionData
};
ccs.ActionTimelineData.create = function (a) {
    return new ccs.ActionTimelineData(a)
};
ccs.ActionTimeline = cc.Action.extend({
    _timelineMap: null,
    _timelineList: null,
    _duration: 0,
    _time: null,
    _timeSpeed: 1,
    _frameInternal: 1 / 60,
    _playing: !1,
    _currentFrame: 0,
    _startFrame: 0,
    _endFrame: 0,
    _loop: null,
    _frameEventListener: null,
    _animationInfos: null,
    _lastFrameListener: null,
    ctor: function () {
        cc.Action.prototype.ctor.call(this);
        this._timelineMap = {};
        this._timelineList = [];
        this._animationInfos = {};
        this.init()
    },
    _gotoFrame: function (a) {
        for (var b = this._timelineList.length, c = 0; c < b; c++) this._timelineList[c]._gotoFrame(a)
    },
    _stepToFrame: function (a) {
        for (var b = this._timelineList.length, c = 0; c < b; c++) this._timelineList[c]._stepToFrame(a)
    },
    _emitFrameEvent: function (a) {
        this._frameEventListener && this._frameEventListener(a)
    },
    init: function () {
        return !0
    },
    gotoFrameAndPlay: function (a, b, c, d) {
        var f = 0,
            g = arguments.length,
            h = [],
            m;
        for (f; f < g; f++) "boolean" === typeof arguments[f] ? m = arguments[f] : h.push(arguments[f]);
        a = h[0];
        b = void 0 !== h[1] ? h[1] : this._duration;
        c = h[2] || a;
        this._startFrame = a;
        this._endFrame = b;
        this._currentFrame = c;
        this._loop = null != m ?
            m : !0;
        this._time = this._currentFrame * this._frameInternal;
        this.resume();
        this._gotoFrame(this._currentFrame)
    },
    gotoFrameAndPause: function (a) {
        this._startFrame = this._currentFrame = a;
        this._time = this._currentFrame * this._frameInternal;
        this.pause();
        this._gotoFrame(this._currentFrame)
    },
    pause: function () {
        this._playing = !1
    },
    resume: function () {
        this._playing = !0
    },
    isPlaying: function () {
        return this._playing
    },
    setTimeSpeed: function (a) {
        this._timeSpeed = a
    },
    getTimeSpeed: function () {
        return this._timeSpeed
    },
    setDuration: function (a) {
        this._duration =
            a
    },
    getDuration: function () {
        return this._duration
    },
    getStartFrame: function () {
        return this._startFrame
    },
    getEndFrame: function () {
        return this._endFrame
    },
    setCurrentFrame: function (a) {
        a >= this._startFrame && a <= this._endFrame ? (this._currentFrame = a, this._time = this._currentFrame * this._frameInternal) : cc.log("frame index is not between start frame and end frame")
    },
    getCurrentFrame: function () {
        return this._currentFrame
    },
    addTimeline: function (a) {
        var b = a.getActionTag();
        this._timelineMap[b] || (this._timelineMap[b] = []); - 1 ===
            this._timelineMap[b].indexOf(a) && (this._timelineList.push(a), this._timelineMap[b].push(a), a.setActionTimeline(this))
    },
    removeTimeline: function (a) {
        var b = a.getActionTag();
        this._timelineMap[b] && this._timelineMap[b].some(function (b) {
            if (b === a) return !0
        }) && (cc.arrayRemoveObject(this._timelineMap[b], a), cc.arrayRemoveObject(this._timelineList, a), a.setActionTimeline(null))
    },
    getTimelines: function () {
        return this._timelineList
    },
    setFrameEventCallFunc: function (a) {
        this._frameEventListener = a
    },
    clearFrameEventCallFunc: function () {
        this._frameEventListener =
            null
    },
    clone: function () {
        var a = new ccs.ActionTimeline;
        a.setDuration(this._duration);
        a.setTimeSpeed(this._timeSpeed);
        for (var b in this._timelineMap) {
            var c = this._timelineMap[b],
                d;
            for (d in c) {
                var f = c[d].clone();
                a.addTimeline(f)
            }
        }
        return a
    },
    reverse: function () {
        return null
    },
    step: function (a) {
        if (this._playing && !(0 === this._timelineMap.length || 0 === this._duration)) this._time += a * this._timeSpeed, a = this._time - this._endFrame * this._frameInternal, a < this._frameInternal ? (this._currentFrame = Math.floor(this._time / this._frameInternal),
            this._stepToFrame(this._currentFrame), 0 <= a && this._lastFrameListener && this._lastFrameListener()) : (this._playing = this._loop) ? this.gotoFrameAndPlay(this._startFrame, this._endFrame, this._loop) : (this._time = this._endFrame * this._frameInternal, this._currentFrame != this._endFrame && (this._currentFrame = this._endFrame, this._stepToFrame(this._currentFrame), this._lastFrameListener && this._lastFrameListener()))
    },
    _foreachNodeDescendant: function (a, b) {
        b(a);
        for (var c = a.getChildren(), d = 0; d < c.length; d++) this._foreachNodeDescendant(c[d],
            b)
    },
    startWithTarget: function (a) {
        cc.Action.prototype.startWithTarget.call(this, a);
        var b = this;
        this._foreachNodeDescendant(a, function (a) {
            var d = a.getComponent("ComExtensionData");
            if (d && (d = d.getActionTag(), b._timelineMap[d]))
                for (var d = b._timelineMap[d], f = 0; f < d.length; f++) d[f].setNode(a)
        })
    },
    isDone: function () {
        return !1
    },
    play: function (a, b) {
        var c = this._animationInfos[a];
        if (!c) return cc.log("Can't find animation info for %s", a);
        this.gotoFrameAndPlay(c.startIndex, c.endIndex, b)
    },
    addAnimationInfo: function (a) {
        this._animationInfos[a.name] =
            a
    },
    removeAnimationInfo: function (a) {
        delete this._animationInfos[a]
    },
    isAnimationInfoExists: function (a) {
        return this._animationInfos[a]
    },
    getAnimationInfo: function (a) {
        return this._animationInfos[a]
    },
    setLastFrameCallFunc: function (a) {
        this._lastFrameListener = a
    },
    clearLastFrameCallFunc: function () {
        this._lastFrameListener = null
    }
});
ccs.ActionTimeline.create = function () {
    return new ccs.ActionTimeline
};
ccs.Frame = ccs.Class.extend({
    _frameIndex: null,
    _tween: null,
    _timeline: null,
    _node: null,
    _tweenType: null,
    _easingParam: null,
    _enterWhenPassed: null,
    ctor: function () {
        this._frameIndex = 0;
        this._tween = !0;
        this._node = this._timeline = null;
        this._enterWhenPassed = !1;
        this._easingParam = []
    },
    _emitEvent: function () {
        this._timeline && this._timeline.getActionTimeline()._emitFrameEvent(this)
    },
    _cloneProperty: function (a) {
        this._frameIndex = a.getFrameIndex();
        this._tween = a.isTween();
        this._tweenType = a.getTweenType();
        this.setEasingParams(a.getEasingParams())
    },
    setFrameIndex: function (a) {
        this._frameIndex = a
    },
    getFrameIndex: function () {
        return this._frameIndex
    },
    setTimeline: function (a) {
        this._timeline = a
    },
    getTimeline: function (a) {
        return this._timeline
    },
    setNode: function (a) {
        this._node = a
    },
    getNode: function () {
        return this._node
    },
    setTween: function (a) {
        this._tween = a
    },
    isTween: function () {
        return this._tween
    },
    onEnter: function (a) {},
    apply: function (a) {
        this._tween && (this._tweenType !== ccs.FrameEaseType.TWEEN_EASING_MAX && this._tweenType !== ccs.FrameEaseType.LINEAR && (a = this.tweenPercent(a)),
            this._onApply(a))
    },
    _onApply: function (a) {},
    clone: function () {},
    tweenPercent: function (a) {
        var b = ccs.Frame.tweenToMap[this._tweenType];
        return b ? b(a, this._easingParam) : a
    },
    setEasingParams: function (a) {
        if (a)
            for (var b = this._easingParam.length = 0; b < a.length; b++) this._easingParam[b] = a[b]
    },
    getEasingParams: function () {
        return this._easingParam
    },
    setTweenType: function (a) {
        this._tweenType = a
    },
    getTweenType: function () {
        return this._tweenType
    },
    isEnterWhenPassed: function () {
        return this._enterWhenPassed
    }
});
ccs.Frame.tweenToMap = {
    "-1": function (a, b) {
        if (b) {
            var c = 1 - a;
            return b[1] * c * c * c + 3 * b[3] * a * c * c + 3 * b[5] * a * a * c + b[7] * a * a * a
        }
        return a
    },
    1: cc._easeSineInObj.easing,
    2: cc._easeSineOutObj.easing,
    3: cc._easeSineInOutObj.easing,
    4: cc._easeQuadraticActionIn.easing,
    5: cc._easeQuadraticActionOut.easing,
    6: cc._easeQuadraticActionInOut.easing,
    7: cc._easeCubicActionIn.easing,
    8: cc._easeCubicActionOut.easing,
    9: cc._easeCubicActionInOut.easing,
    10: cc._easeCubicActionIn.easing,
    11: cc._easeCubicActionOut.easing,
    12: cc._easeCubicActionInOut.easing,
    13: cc._easeQuinticActionIn.easing,
    14: cc._easeQuinticActionOut.easing,
    15: cc._easeQuinticActionInOut.easing,
    16: cc._easeExponentialInObj.easing,
    17: cc._easeExponentialOutObj.easing,
    18: cc._easeExponentialInOutObj.easing,
    19: cc._easeCircleActionIn.easing,
    20: cc._easeCircleActionOut.easing,
    21: cc._easeCircleActionInOut.easing,
    22: function (a, b) {
        var c = 0.3;
        null != b && (c = b[0]);
        return cc.easeElasticIn(c).easing(a)
    },
    23: function (a, b) {
        var c = 0.3;
        null != b && (c = b[0]);
        return cc.easeElasticOut(c).easing(a)
    },
    24: function (a, b) {
        var c =
            0.3;
        null != b && (c = b[0]);
        return cc.easeElasticInOut(c).easing(a)
    },
    25: cc._easeBackInObj.easing,
    26: cc._easeBackOutObj.easing,
    27: cc._easeBackInOutObj.easing,
    28: cc._easeBounceInObj.easing,
    29: cc._easeBounceOutObj.easing,
    30: cc._easeBounceInOutObj.easing
};
ccs.VisibleFrame = ccs.Frame.extend({
    _visible: !0,
    ctor: function () {
        ccs.Frame.prototype.ctor.call(this);
        this._visible = !0
    },
    onEnter: function (a) {
        this._node && this._node.setVisible(this._visible)
    },
    clone: function () {
        var a = new ccs.VisibleFrame;
        a.setVisible(this._visible);
        a._cloneProperty(this);
        return a
    },
    setVisible: function (a) {
        this._visible = a
    },
    isVisible: function () {
        return this._visible
    }
});
ccs.VisibleFrame.create = function () {
    return new ccs.VisibleFrame
};
ccs.TextureFrame = ccs.Frame.extend({
    _sprite: null,
    _textureName: null,
    ctor: function () {
        ccs.Frame.prototype.ctor.call(this);
        this._textureName = ""
    },
    setNode: function (a) {
        ccs.Frame.prototype.setNode.call(this, a);
        this._sprite = a
    },
    onEnter: function (a) {
        if (this._sprite) {
            a = this._sprite.getBlendFunc();
            var b = cc.spriteFrameCache._spriteFrames[this._textureName];
            null != b ? this._sprite.setSpriteFrame(b) : this._sprite.setTexture(this._textureName);
            this._sprite.getBlendFunc() !== a && this._sprite.setBlendFunc(a)
        }
    },
    clone: function () {
        var a =
            new ccs.TextureFrame;
        a.setTextureName(this._textureName);
        a._cloneProperty(this);
        return a
    },
    setTextureName: function (a) {
        this._textureName = a
    },
    getTextureName: function () {
        return this._textureName
    }
});
ccs.TextureFrame.create = function () {
    return new ccs.TextureFrame
};
ccs.RotationFrame = ccs.Frame.extend({
    _rotation: null,
    _betwennRotation: null,
    ctor: function () {
        ccs.Frame.prototype.ctor.call(this);
        this._rotation = 0
    },
    onEnter: function (a) {
        this._node && (this._node.setRotation(this._rotation), this._tween && (this._betwennRotation = a._rotation - this._rotation))
    },
    _onApply: function (a) {
        0 !== this._betwennRotation && this._node.setRotation(this._rotation + a * this._betwennRotation)
    },
    clone: function () {
        var a = new ccs.RotationFrame;
        a.setRotation(this._rotation);
        a._cloneProperty(this);
        return a
    },
    setRotation: function (a) {
        this._rotation = a
    },
    getRotation: function () {
        return this._rotation
    }
});
ccs.RotationFrame.create = function () {
    return new ccs.RotationFrame
};
ccs.SkewFrame = ccs.Frame.extend({
    _skewX: null,
    _skewY: null,
    _betweenSkewX: null,
    _betweenSkewY: null,
    ctor: function () {
        ccs.Frame.prototype.ctor.call(this);
        this._skewY = this._skewX = 0
    },
    onEnter: function (a) {
        this._node && (this._node.setSkewX(this._skewX), this._node.setSkewY(this._skewY), this._tween && (this._betweenSkewX = a._skewX - this._skewX, this._betweenSkewY = a._skewY - this._skewY))
    },
    _onApply: function (a) {
        if (0 !== this._betweenSkewX || 0 !== this._betweenSkewY) {
            var b = this._skewY + a * this._betweenSkewY;
            this._node.setSkewX(this._skewX +
                a * this._betweenSkewX);
            this._node.setSkewY(b)
        }
    },
    clone: function () {
        var a = new ccs.SkewFrame;
        a.setSkewX(this._skewX);
        a.setSkewY(this._skewY);
        a._cloneProperty(this);
        return a
    },
    setSkewX: function (a) {
        this._skewX = a
    },
    getSkewX: function () {
        return this._skewX
    },
    setSkewY: function (a) {
        this._skewY = a
    },
    getSkewY: function () {
        return this._skewY
    }
});
ccs.SkewFrame.create = function () {
    return new ccs.SkewFrame
};
ccs.RotationSkewFrame = ccs.SkewFrame.extend({
    onEnter: function (a) {
        this._node && (this._node.setRotationX(this._skewX), this._node.setRotationY(this._skewY), this._tween && (this._betweenSkewX = a._skewX - this._skewX, this._betweenSkewY = a._skewY - this._skewY))
    },
    _onApply: function (a) {
        if (this._node && (0 !== this._betweenSkewX || 0 !== this._betweenSkewY)) {
            var b = this._skewY + a * this._betweenSkewY;
            this._node.setRotationX(this._skewX + a * this._betweenSkewX);
            this._node.setRotationY(b)
        }
    },
    clone: function () {
        var a = new ccs.RotationSkewFrame;
        a.setSkewX(this._skewX);
        a.setSkewY(this._skewY);
        a._cloneProperty(this);
        return a
    }
});
ccs.RotationSkewFrame.create = function () {
    return new ccs.RotationSkewFrame
};
ccs.PositionFrame = ccs.Frame.extend({
    _position: null,
    _betweenX: null,
    _betweenY: null,
    ctor: function () {
        ccs.Frame.prototype.ctor.call(this);
        this._position = cc.p(0, 0)
    },
    onEnter: function (a) {
        this._node && (this._node.setPosition(this._position), this._tween && (this._betweenX = a._position.x - this._position.x, this._betweenY = a._position.y - this._position.y))
    },
    _onApply: function (a) {
        if (this._node && (0 !== this._betweenX || 0 !== this._betweenY)) {
            var b = cc.p(0, 0);
            b.x = this._position.x + this._betweenX * a;
            b.y = this._position.y + this._betweenY *
                a;
            this._node.setPosition(b)
        }
    },
    clone: function () {
        var a = new ccs.PositionFrame;
        a.setPosition(this._position);
        a._cloneProperty(this);
        return a
    },
    setPosition: function (a) {
        this._position = a
    },
    getPosition: function () {
        return this._position
    },
    setX: function (a) {
        this._position.x = a
    },
    getX: function () {
        return this._position.x
    },
    setY: function (a) {
        this._position.y = a
    },
    getY: function () {
        return this._position.y
    }
});
ccs.PositionFrame.create = function () {
    return new ccs.PositionFrame
};
ccs.ScaleFrame = ccs.Frame.extend({
    _scaleX: null,
    _scaleY: null,
    _betweenScaleX: null,
    _betweenScaleY: null,
    ctor: function () {
        ccs.Frame.prototype.ctor.call(this);
        this._scaleY = this._scaleX = 1
    },
    onEnter: function (a) {
        this._node && (this._node.setScaleX(this._scaleX), this._node.setScaleY(this._scaleY), this._tween && (this._betweenScaleX = a._scaleX - this._scaleX, this._betweenScaleY = a._scaleY - this._scaleY))
    },
    _onApply: function (a) {
        if (this._node && (0 !== this._betweenScaleX || 0 !== this._betweenScaleY)) {
            var b = this._scaleY + this._betweenScaleY *
                a;
            this._node.setScaleX(this._scaleX + this._betweenScaleX * a);
            this._node.setScaleY(b)
        }
    },
    clone: function () {
        var a = new ccs.ScaleFrame;
        a.setScaleX(this._scaleX);
        a.setScaleY(this._scaleY);
        a._cloneProperty(this);
        return a
    },
    setScale: function (a) {
        this._scaleY = this._scaleX = a
    },
    setScaleX: function (a) {
        this._scaleX = a
    },
    getScaleX: function () {
        return this._scaleX
    },
    setScaleY: function (a) {
        this._scaleY = a
    },
    getScaleY: function () {
        return this._scaleY
    }
});
ccs.ScaleFrame.create = function () {
    return new ccs.ScaleFrame
};
ccs.AnchorPointFrame = ccs.Frame.extend({
    _anchorPoint: null,
    ctor: function () {
        ccs.Frame.prototype.ctor.call(this);
        this._anchorPoint = cc.p(0, 0)
    },
    onEnter: function (a) {
        this._node && this._node.setAnchorPoint(this._anchorPoint)
    },
    clone: function () {
        var a = new ccs.AnchorPointFrame;
        a.setAnchorPoint(this._anchorPoint);
        a._cloneProperty(this);
        return a
    },
    setAnchorPoint: function (a) {
        this._anchorPoint = a
    },
    getAnchorPoint: function () {
        return this._anchorPoint
    }
});
ccs.AnchorPointFrame.create = function () {
    return new ccs.AnchorPointFrame
};
ccs.InnerActionType = {
    LoopAction: 0,
    NoLoopAction: 1,
    SingleFrame: 2
};
ccs.InnerActionFrame = ccs.Frame.extend({
    _innerActionType: null,
    _startFrameIndex: null,
    _endFrameIndex: 0,
    _singleFrameIndex: 0,
    _enterWithName: null,
    _animationName: "",
    ctor: function () {
        ccs.Frame.prototype.ctor.call(this);
        this._enterWithName = !1;
        this._innerActionType = ccs.InnerActionType.LoopAction;
        this._startFrameIndex = 0
    },
    onEnter: function (a) {
        if (this._node && (a = this._node.getActionByTag(this._node.getTag())))
            if (ccs.InnerActionType.SingleFrame === this._innerActionType) a.gotoFrameAndPause(this._singleFrameIndex);
            else {
                var b =
                    this._startFrameIndex,
                    c = this._endFrameIndex;
                this._enterWithName && ("-- ALL --" === this._animationName ? (b = 0, c = a.getDuration()) : a.isAnimationInfoExists(this._animationName) ? (c = a.getAnimationInfo(this._animationName), b = c.startIndex, c = c.endIndex) : cc.log("Animation %s not exists!", this._animationName));
                var d = this._timeline.getActionTimeline().getDuration() - this._frameIndex - c + b;
                0 > d && (c += d);
                ccs.InnerActionType.NoLoopAction === this._innerActionType ? a.gotoFrameAndPlay(b, c, !1) : ccs.InnerActionType.LoopAction ===
                    this._innerActionType && a.gotoFrameAndPlay(b, c, !0)
            }
    },
    setAnimationName: function (a) {
        this._animationName = a
    },
    setSingleFrameIndex: function (a) {
        this._singleFrameIndex = a
    },
    getSingleFrameIndex: function () {
        return this._startFrameIndex
    },
    setEnterWithName: function (a) {
        this._enterWithName = a
    },
    getEnterWithName: function () {
        return this._enterWithName
    },
    clone: function () {
        var a = new ccs.InnerActionFrame;
        a.setInnerActionType(this._innerActionType);
        a.setStartFrameIndex(this._startFrameIndex);
        a.setEnterWithName(this._enterWithName);
        a.setAnimationName(this._animationName);
        a.setSingleFrameIndex(this._singleFrameIndex);
        a._cloneProperty(this);
        return a
    },
    setInnerActionType: function (a) {
        this._innerActionType = a
    },
    getInnerActionType: function () {
        return this._innerActionType
    },
    setStartFrameIndex: function (a) {
        this._startFrameIndex = a
    },
    getStartFrameIndex: function () {
        return this._startFrameIndex
    }
});
ccs.InnerActionFrame.create = function () {
    return new ccs.InnerActionFrame
};
ccs.ColorFrame = ccs.Frame.extend({
    _alpha: null,
    _color: null,
    _betweenAlpha: null,
    _betweenRed: null,
    _betweenGreen: null,
    _betweenBlue: null,
    ctor: function () {
        ccs.Frame.prototype.ctor.call(this);
        this._color = cc.color(255, 255, 255)
    },
    onEnter: function (a) {
        this._node && (this._node.setColor(this._color), this._tween && (a = a._color, this._betweenRed = a.r - this._color.r, this._betweenGreen = a.g - this._color.g, this._betweenBlue = a.b - this._color.b))
    },
    _onApply: function (a) {
        if (this._node && this._tween && (0 !== this._betweenAlpha || 0 !== this._betweenRed ||
                0 !== this._betweenGreen || 0 !== this._betweenBlue)) {
            var b = cc.color(255, 255, 255);
            b.r = this._color.r + this._betweenRed * a;
            b.g = this._color.g + this._betweenGreen * a;
            b.b = this._color.b + this._betweenBlue * a;
            this._node.setColor(b);
            null !== this._alpha && this._node.setOpacity(this._alpha + this._betweenAlpha * a)
        }
    },
    clone: function () {
        var a = new ccs.ColorFrame;
        a.setColor(this._color);
        a._cloneProperty(this);
        return a
    },
    setColor: function (a) {
        this._color = a
    },
    getColor: function () {
        return this._color
    }
});
ccs.ColorFrame.create = function () {
    return new ccs.ColorFrame
};
ccs.AlphaFrame = ccs.Frame.extend({
    _alpha: null,
    _betweenAlpha: null,
    ctor: function () {
        ccs.Frame.prototype.ctor.call(this);
        this._alpha = 255
    },
    onEnter: function (a) {
        this._node && (this._node.setOpacity(this._alpha), this._tween && (this._betweenAlpha = a._alpha - this._alpha))
    },
    _onApply: function (a) {
        this._node && this._node.setOpacity(this._alpha + this._betweenAlpha * a)
    },
    setAlpha: function (a) {
        this._alpha = a
    },
    getAlpha: function () {
        return this._alpha
    },
    clone: function () {
        var a = new ccs.AlphaFrame;
        a.setAlpha(this._alpha);
        a._cloneProperty(this);
        return a
    }
});
ccs.EventFrame = ccs.Frame.extend({
    _event: null,
    ctor: function () {
        ccs.Frame.prototype.ctor.call(this);
        this._event = "";
        this._enterWhenPassed = !0
    },
    onEnter: function (a) {
        this._emitEvent()
    },
    clone: function () {
        var a = new ccs.EventFrame;
        a.setEvent(this._event);
        a._cloneProperty(this);
        return a
    },
    setEvent: function (a) {
        this._event = a
    },
    getEvent: function () {
        return this._event
    }
});
ccs.EventFrame.create = function () {
    return new ccs.EventFrame
};
ccs.ZOrderFrame = ccs.Frame.extend({
    _zorder: 0,
    onEnter: function (a) {
        this._node && this._node.setLocalZOrder(this._zorder)
    },
    clone: function () {
        var a = new ccs.ZOrderFrame;
        a.setZOrder(this._zorder);
        a._cloneProperty(this);
        return a
    },
    setZOrder: function (a) {
        this._zorder = a
    },
    getZOrder: function () {
        return this._zorder
    }
});
ccs.ZOrderFrame.create = function () {
    return new ccs.ZOrderFrame
};
ccs.BlendFuncFrame = ccs.Frame.extend({
    ctor: function () {
        this._super();
        this._blendFunc = null
    },
    onEnter: function (a, b) {
        this._node && this._blendFunc && this._node.setBlendFunc(this._blendFunc)
    },
    clone: function () {
        var a = new ccs.BlendFuncFrame;
        a.setBlendFunc(this._blendFunc);
        a._cloneProperty(this);
        return a
    },
    setBlendFunc: function (a) {
        a && (a.src && a.dst) && (this._blendFunc = a)
    },
    getBlendFunc: function () {
        return this._blendFunc
    }
});
ccs.BlendFuncFrame.create = function () {
    return new ccs.BlendFuncFrame
};
ccs.Timeline = ccs.Class.extend({
    _frames: null,
    _currentKeyFrame: null,
    _currentKeyFrameIndex: null,
    _fromIndex: null,
    _toIndex: null,
    _betweenDuration: null,
    _actionTag: null,
    _ActionTimeline: null,
    _node: null,
    ctor: function () {
        this._frames = [];
        this._currentKeyFrame = null;
        this._actionTag = this._betweenDuration = this._toIndex = this._fromIndex = this._currentKeyFrameIndex = 0;
        this._node = this._ActionTimeline = null
    },
    _gotoFrame: function (a) {
        0 !== this._frames.length && (this._binarySearchKeyFrame(a), this._apply(a))
    },
    _stepToFrame: function (a) {
        0 !==
            this._frames.length && (this._updateCurrentKeyFrame(a), this._apply(a))
    },
    getFrames: function () {
        return this._frames
    },
    addFrame: function (a) {
        this._frames.push(a);
        a.setTimeline(this)
    },
    insertFrame: function (a, b) {
        this._frames.splice(b, 0, a);
        a.setTimeline(this)
    },
    removeFrame: function (a) {
        cc.arrayRemoveObject(this._frames, a);
        a.setTimeline(null)
    },
    setActionTag: function (a) {
        this._actionTag = a
    },
    getActionTag: function () {
        return this._actionTag
    },
    setNode: function (a) {
        for (var b = 0; b < this._frames.length; b++) this._frames[b].setNode(a)
    },
    getNode: function () {
        return this._node
    },
    setActionTimeline: function (a) {
        this._ActionTimeline = a
    },
    getActionTimeline: function () {
        return this._ActionTimeline
    },
    clone: function () {
        var a = new ccs.Timeline;
        a._actionTag = this._actionTag;
        for (var b = 0; b < this._frames.length; b++) {
            var c = this._frames[b].clone();
            a.addFrame(c)
        }
        return a
    },
    _apply: function (a) {
        this._currentKeyFrame && this._currentKeyFrame.apply(0 >= this._betweenDuration ? 0 : (a - this._currentKeyFrameIndex) / this._betweenDuration)
    },
    _binarySearchKeyFrame: function (a) {
        var b =
            null,
            c = null,
            d = this._frames.length,
            f = !1;
        do
            if (a < this._frames[0].getFrameIndex()) this._currentKeyFrameIndex >= this._frames[0].getFrameIndex() && (f = !0), this._toIndex = this._fromIndex = 0, b = c = this._frames[0], this._currentKeyFrameIndex = 0, this._betweenDuration = this._frames[0].getFrameIndex();
            else if (a >= this._frames[d - 1].getFrameIndex()) this._fromIndex = d - 1, this._toIndex = 0, b = c = this._frames[d - 1], this._currentKeyFrameIndex = this._frames[d - 1].getFrameIndex(), this._betweenDuration = 0;
        else {
            for (var g = -1, b = 0, c = d - 1, h = 0; b <=
                c;) {
                h = Math.ceil((b + c) / 2);
                if (a >= this._frames[h].getFrameIndex() && a < this._frames[h + 1].getFrameIndex()) {
                    g = h;
                    break
                }
                this._frames[h].getFrameIndex() > a ? c = h - 1 : b = h + 1
            }
            this._fromIndex = g;
            this._toIndex = 1 < d ? g + 1 | 0 : g | 0;
            b = this._frames[g];
            c = this._frames[g + 1];
            0 === g && this._currentKeyFrameIndex < b.getFrameIndex() && (f = !0);
            this._currentKeyFrameIndex = b.getFrameIndex();
            this._betweenDuration = c.getFrameIndex() - b.getFrameIndex()
        }
        while (0);
        if (f || this._currentKeyFrame != b) this._currentKeyFrame = b, this._currentKeyFrame.onEnter(c)
    },
    _updateCurrentKeyFrame: function (a) {
        if (a < this._currentKeyFrameIndex || a >= this._currentKeyFrameIndex + this._betweenDuration) {
            var b = null,
                c = null;
            do {
                var d = this._frames.length;
                if (a < this._frames[0].getFrameIndex()) b = c = this._frames[0], this._currentKeyFrameIndex = 0, this._betweenDuration = this._frames[0].getFrameIndex();
                else {
                    if (a >= this._frames[d - 1].getFrameIndex() && (a = this._frames[d - 1].getFrameIndex(), this._currentKeyFrameIndex >= a)) return;
                    do {
                        this._fromIndex = this._toIndex;
                        b = this._frames[this._fromIndex];
                        this._currentKeyFrameIndex =
                            b.getFrameIndex();
                        this._toIndex = this._fromIndex + 1;
                        this._toIndex >= d && (this._toIndex = 0);
                        c = this._frames[this._toIndex];
                        if (a === b.getFrameIndex()) break;
                        if (a > b.getFrameIndex() && a < c.getFrameIndex()) break;
                        if (b.isEnterWhenPassed()) b.onEnter(c)
                    } while (1);
                    this._betweenDuration = c.getFrameIndex() - b.getFrameIndex()
                }
            } while (0);
            this._currentKeyFrame = b;
            this._currentKeyFrame.onEnter(c)
        }
    }
});
ccs.Timeline.create = function () {
    return new ccs.Timeline
};
ccs.SkinNode = function () {
    var a = cc.Node.extend({});
    a.create = function () {};
    return a
}();
ccs.BoneNode = function () {
    var a = cc.Node,
        b = ccs.SkinNode,
        c = cc.BlendFunc,
        d = {
            p: cc.p,
            size: cc.size,
            rect: cc.rect
        },
        f = {
            log: cc.log,
            assert: cc.assert
        },
        g = a.extend({
            _customCommand: null,
            _blendFunc: null,
            _rackColor: null,
            _rackLength: null,
            _rackWidth: null,
            _childBones: null,
            _boneSkins: null,
            _rootSkeleton: null,
            _squareVertices: null,
            _squareColors: null,
            _noMVPVertices: null,
            ctor: function (b) {
                a.prototype.ctor.call(this);
                null === this._squareVertices && (this._squareVertices = [{
                    x: 0,
                    y: 0
                }, {
                    x: 0,
                    y: 0
                }, {
                    x: 0,
                    y: 0
                }, {
                    x: 0,
                    y: 0
                }]);
                this._rackColor =
                    cc.color.WHITE;
                this._blendFunc = c.ALPHA_NON_PREMULTIPLIED;
                this._childBones = [];
                this._boneSkins = [];
                this._rackLength = void 0 === b ? 50 : b;
                this._rackWidth = 20;
                this._updateVertices()
            },
            visit: function (a) {
                this._visit && this._visit(a && a._renderCmd)
            },
            addSkin: function (b, c, d) {
                var g = this._boneSkins;
                f.assert(null != b, "Argument must be non-nil");
                if (d)
                    for (d = 0; d < g.length; d++) g[d].setVisible(!1);
                a.prototype.addChild.call(this, b);
                this._boneSkins.push(b);
                b.setVisible(c)
            },
            getChildBones: function () {
                return this._childBones
            },
            getSkins: function () {
                return this._boneSkins
            },
            displaySkin: function (a, b) {
                var c = this._boneSkins,
                    d, f;
                if ("string" === typeof a)
                    for (f = 0; f < c.length; f++) d = c[f], a == d.getName() ? d.setVisible(!0) : b && d.setVisible(!1);
                else
                    for (f = 0; f < c.length; f++) d = c[f], d == a ? d.setVisible(!0) : b && d.setVisible(!1)
            },
            getVisibleSkins: function () {
                for (var a = [], b = this._boneSkins, c, d = 0; d < b.length; d++) c = b[d], c.isVisible() && a.push(c);
                return a
            },
            getRootSkeletonNode: function () {
                return this._rootSkeleton
            },
            getAllSubBones: function () {
                for (var a = [], b = [], c = this._childBones, d = 0; d < c.length; d++) b.push(c[d]);
                for (; 0 < b.length;) {
                    c = b.pop();
                    a.push(c);
                    c = c.getChildBones();
                    for (d = 0; d < c; d++) b.push(c[d])
                }
                return a
            },
            getAllSubSkins: function () {
                for (var a = this.getAllSubBones(), b = [], c = 0; c < a.length; c++)
                    for (var d = a[c].getSkins(), f = 0; f < d.length; f++) b.push(d[c]);
                return b
            },
            addChild: function (b, c, d) {
                a.prototype.addChild.call(this, b, c, d);
                this._addToChildrenListHelper(b)
            },
            removeChild: function (b, c) {
                -1 !== this._children.indexOf(b) && (a.prototype.removeChild.call(this, b, c), this._removeFromChildrenListHelper(b))
            },
            setBlendFunc: function (a) {
                var b =
                    this._blendFunc;
                if (a && b.src !== a.src && b.dst !== a.dst) {
                    this._blendFunc = a;
                    for (var b = this._boneSkins, c, d = 0; d < b.length; d++) c = b[d], c.setBlendFunc(a)
                }
            },
            getBlendFunc: function () {
                return this._blendFunc
            },
            setDebugDrawLength: function (a) {
                this._rackLength = a;
                this._updateVertices()
            },
            getDebugDrawLength: function () {
                return this._rackLength
            },
            setDebugDrawWidth: function (a) {
                this._rackWidth = a;
                this._updateVertices()
            },
            getDebugDrawWidth: function () {
                return this._rackWidth
            },
            setDebugDrawEnabled: function (a) {
                var b = this._renderCmd;
                b._debug !==
                    a && (b._debug = a, cc.renderer.childrenOrderDirty = !0, this._visible && null != this._rootSkeleton && (this._rootSkeleton._subBonesDirty = !0, this._rootSkeleton._subBonesOrderDirty = !0))
            },
            isDebugDrawEnabled: function () {
                return this._renderCmd._debug
            },
            setDebugDrawColor: function (a) {
                this._rackColor = a
            },
            getDebugDrawColor: function () {
                return this._rackColor
            },
            getVisibleSkinsRect: function () {
                var a, b, c, f = 0;
                a = b = c = f;
                var g = !0,
                    h = d.rect(0, 0, 0, 0);
                this._renderCmd._debug && (null != this._rootSkeleton && this._rootSkeleton._renderCmd._debug) &&
                    (c = this._rackWidth, f = this._rackLength, g = !1);
                for (var m = this._boneSkins, t, A = 0; A < m.length; A++) {
                    t = m[A];
                    var w = t.getBoundingBox();
                    t.isVisible() && !(0 === w.x && 0 === w.y && 0 === w.width && 0 === w.height) && (g ? (a = cc.rectGetMinX(w), b = cc.rectGetMinY(w), c = cc.rectGetMaxX(w), f = cc.rectGetMaxY(w), g = !1) : (a = Math.min(cc.rectGetMinX(w), a), b = Math.min(cc.rectGetMinY(w), b), c = Math.max(cc.rectGetMaxX(w), c), f = Math.max(cc.rectGetMaxY(w), f)), h.setRect(a, b, c - a, f - b))
                }
                return h
            },
            getBoundingBox: function () {
                var a = this.getVisibleSkinsRect();
                return cc.rectApplyAffineTransform(a,
                    this.getNodeToParentAffineTransform())
            },
            batchBoneDrawToSkeleton: function (a) {},
            setLocalZOrder: function (b) {
                a.prototype.setLocalZOrder.call(this, b);
                null != this._rootSkeleton && (this._rootSkeleton._subBonesOrderDirty = !0)
            },
            setName: function (b) {
                var c = this._rootSkeleton,
                    d = this.getName();
                a.prototype.setName.call(this, b);
                if (null != c) {
                    var d = c._subBonesMap[d],
                        f = c._subBonesMap[b];
                    d && !f && (delete c._subBonesMap[d], c._subBonesMap[b] = d)
                }
            },
            setContentSize: function (b) {
                a.prototype.setContentSize.call(this, b);
                this._updateVertices()
            },
            setAnchorPoint: function (b) {
                a.prototype.setAnchorPoint.call(this, b);
                this._updateVertices()
            },
            setVisible: function (b) {
                this._visible != b && (a.prototype.setVisible.call(this, b), null != this._rootSkeleton && (this._rootSkeleton._subBonesDirty = !0, this._rootSkeleton._subBonesOrderDirty = !0))
            },
            _addToChildrenListHelper: function (a) {
                a instanceof g ? this._addToBoneList(a) : this._addToSkinList(a)
            },
            _removeFromChildrenListHelper: function (a) {
                a instanceof g ? this._removeFromBoneList(a) : a instanceof b && this._removeFromSkinList(skin)
            },
            _removeFromBoneList: function (a) {
                if (null != this._rootSkeleton && a instanceof ccs.SkeletonNode && a._rootSkeleton === this._rootSkeleton) {
                    a._rootSkeleton = null;
                    var b = a.getAllSubBones();
                    b.push(a);
                    for (var c, d = 0; d < b.length; d++) c = b[d], c._rootSkeleton = null, delete this._rootSkeleton._subBonesMap[c.getName()], this._rootSkeleton._subBonesDirty = !0, this._rootSkeleton._subBonesOrderDirty = !0
                } else this._rootSkeleton._subBonesDirty = !0, this._rootSkeleton._subBonesOrderDirty = !0;
                cc.arrayRemoveObject(this._childBones, a)
            },
            _setRootSkeleton: function (a) {
                this._rootSkeleton =
                    a;
                a = this.getAllSubBones();
                for (var b = 0; b < a.length; b++) this._addToBoneList(a[b])
            },
            _addToBoneList: function (a) {
                -1 === this._childBones.indexOf(a) && this._childBones.push(a);
                if (null != this._rootSkeleton && !(a instanceof b) && !a._rootSkeleton) {
                    var c = a.getAllSubBones();
                    c.push(a);
                    for (var d = 0; d < c.length; d++) {
                        a = c[d];
                        a._setRootSkeleton(this._rootSkeleton);
                        var f = a.getName();
                        this._rootSkeleton._subBonesMap[f] ? cc.log("already has a bone named %s in skeleton %s", f, this._rootSkeleton.getName()) : this._rootSkeleton._subBonesMap[a.getName()] =
                            a;
                        this._rootSkeleton._subBonesDirty = !0;
                        this._rootSkeleton._subBonesOrderDirty = !0
                    }
                }
            },
            _visitSkins: function () {
                var a = this._renderCmd;
                if (this._visible) {
                    var b = a.getParentRenderCmd();
                    b && (a._curLevel = b._curLevel + 1);
                    var c = this._boneSkins,
                        d;
                    a._syncStatus(b);
                    var f = c.length;
                    if (0 < f) {
                        this.sortAllChildren();
                        for (b = 0; b < f; b++)
                            if (d = c[b], 0 > d._localZOrder) d.visit(this);
                            else break;
                        for (; b < f; b++) c[b].visit(this)
                    }
                    a._dirtyFlag = 0
                }
            },
            _addToSkinList: function (a) {
                this._boneSkins.push(a);
                if (a.getBlendFunc) {
                    var b = a.getBlendFunc();
                    this._blendFunc.src !== b.src && this._blendFunc.dst !== b.dst && a.setBlendFunc(this._blendFunc)
                }
            },
            _removeFromSkinList: function (a) {
                cc.arrayRemoveObject(this._boneSkins, a)
            },
            sortAllChildren: function () {
                this._sortArray(this._childBones);
                this._sortArray(this._boneSkins);
                a.prototype.sortAllChildren.call(this)
            },
            _sortArray: function (a) {
                if (a) {
                    var b = a.length,
                        c, d, f;
                    for (c = 1; c < b; c++) {
                        f = a[c];
                        for (d = c - 1; 0 <= d;) {
                            if (f._localZOrder < a[d]._localZOrder) a[d + 1] = a[d];
                            else if (f._localZOrder === a[d]._localZOrder && f.arrivalOrder < a[d].arrivalOrder) a[d +
                                1] = a[d];
                            else break;
                            d--
                        }
                        a[d + 1] = f
                    }
                }
            },
            _updateVertices: function () {
                var a = this._squareVertices,
                    b = this._renderCmd._anchorPointInPoints;
                if (this._rackLength != a[2].x - b.x || a[3].y != this._rackWidth / 2 - b.y) {
                    a[1].x = a[1].y = a[3].y = 0;
                    a[0].x = a[2].x = 0.1 * this._rackLength;
                    a[2].y = 0.5 * this._rackWidth;
                    a[0].y = -a[2].y;
                    a[3].x = this._rackLength;
                    for (var c = 0; c < a.length; c++) a[c].x += b.x, a[c].y += b.y;
                    this._renderCmd.updateDebugPoint(a)
                }
            },
            _createRenderCmd: function () {
                return cc._renderType === cc.game.RENDER_TYPE_CANVAS ? new h(this) : new m(this)
            }
        });
    g.create = function (a, b) {
        return new ccui.BoneNode(a, b)
    };
    var h = function () {
            var b = function (a) {
                    this._rootCtor(a);
                    this._debug = !1;
                    this._color = cc.color.WHITE;
                    this._drawNode = new cc.DrawNode
                },
                c = b.prototype = Object.create(a.CanvasRenderCmd.prototype);
            c.constructor = b;
            c.updateDebugPoint = function (a) {
                this._drawNode.clear();
                this._drawNode.drawPoly(a, this._color, 0, this._color)
            };
            c.transform = function (a, b) {
                var c = this._node._rootSkeleton;
                this.originTransform(a, b);
                c && c._renderCmd._debug && this._drawNode._renderCmd.transform(this)
            };
            return b
        }(),
        m = function () {
            var b = function (a) {
                    this._rootCtor(a);
                    this._debug = !1;
                    this._color = cc.color.WHITE;
                    this._drawNode = new cc.DrawNode
                },
                c = b.prototype = Object.create(a.WebGLRenderCmd.prototype);
            c.constructor = b;
            c.updateDebugPoint = function (a) {
                this._drawNode.clear();
                this._drawNode.drawPoly(a, this._color, 0, this._color)
            };
            c.transform = function (a, b) {
                var c = this._node._rootSkeleton;
                this.originTransform(a, b);
                c && c._renderCmd._debug && this._drawNode._renderCmd.transform(this)
            };
            return b
        }();
    return g
}();
ccs.SkeletonNode = function () {
    var a = ccs.BoneNode,
        b = a.extend({
            _subBonesMap: null,
            _squareVertices: null,
            _squareColors: null,
            _noMVPVertices: null,
            _skinGroupMap: null,
            _sortedAllBonesDirty: !1,
            _sortedAllBones: null,
            _batchedBoneVetices: null,
            _batchedBoneColors: null,
            _batchedVeticesCount: null,
            _batchBoneCommand: null,
            _subOrderedAllBones: null,
            ctor: function () {
                this._squareVertices = [{
                    x: 0,
                    y: 0
                }, {
                    x: 0,
                    y: 0
                }, {
                    x: 0,
                    y: 0
                }, {
                    x: 0,
                    y: 0
                }, {
                    x: 0,
                    y: 0
                }, {
                    x: 0,
                    y: 0
                }, {
                    x: 0,
                    y: 0
                }, {
                    x: 0,
                    y: 0
                }];
                this._rootSkeleton = this;
                a.prototype.ctor.call(this);
                this._subBonesMap = {};
                this._subOrderedAllBones = [];
                this._skinGroupMap = {};
                this._rackLength = this._rackWidth = 20;
                this._updateVertices()
            },
            getBoneNode: function (a) {
                return (a = this._subBonesMap[a]) ? a : null
            },
            getAllSubBonesMap: function () {
                return this._subBonesMap
            },
            changeSkins: function (a) {
                if ("object" === typeof a) {
                    var b, f;
                    for (f in a) {
                        b = a[f];
                        var g = this.getBoneNode(f);
                        null !== g && g.displaySkin(b, !0)
                    }
                } else(a = this._suitMap[a]) && this.changeSkins(a, !0)
            },
            addSkinGroup: function (a, b) {
                this._skinGroupMap[a] = b
            },
            getBoundingBox: function () {
                var a, b, f,
                    g = 0;
                a = b = f = g;
                var h = this.getVisibleSkinsRect(),
                    m = !0;
                if (0 !== h.x || 0 !== h.y || 0 !== h.width || 0 !== h.height) a = cc.rectGetMinX(h), b = cc.rectGetMinY(h), f = cc.rectGetMaxX(h), g = cc.rectGetMaxY(h), m = !1;
                for (var n = this.getAllSubBones(), p, u = 0; u < n.length; u++) p = n[u], p = cc.rectApplyAffineTransform(p.getVisibleSkinsRect(), p.getNodeToParentTransform(p.getRootSkeletonNode())), 0 === p.x && 0 === p.y && 0 === p.width && 0 === p.height || (m ? (a = cc.rectGetMinX(p), b = cc.rectGetMinY(p), f = cc.rectGetMaxX(p), g = cc.rectGetMaxY(p), m = !1) : (a = Math.min(cc.rectGetMinX(p),
                    a), b = Math.min(cc.rectGetMinY(p), b), f = Math.max(cc.rectGetMaxX(p), f), g = Math.max(cc.rectGetMaxY(p), g)));
                h.x = a;
                h.y = b;
                h.width = f - a;
                h.height = g - b;
                return cc.rectApplyAffineTransform(h, this.getNodeToParentTransform())
            },
            _visit: function (a) {
                var b = this._renderCmd;
                a = a || b.getParentRenderCmd();
                if (this._visible) {
                    b._syncStatus(a);
                    var f;
                    if (0 !== this._children.length)
                        for (a = 0; a < this._children.length; a++) f = this._children[a], f.visit(this);
                    this._checkSubBonesDirty();
                    f = this._subOrderedAllBones;
                    var g;
                    for (a = 0; a < f.length; a++) g =
                        f[a], g._visitSkins();
                    if (b._debug)
                        for (a = 0; a < f.length; a++) g = f[a]._renderCmd, cc.renderer.pushRenderCommand(g._drawNode._renderCmd);
                    b._dirtyFlag = 0
                } else b._propagateFlagsDown(a)
            },
            _checkSubBonesDirty: function () {
                this._subBonesDirty && (this._updateOrderedAllbones(), this._subBonesDirty = !1);
                this._subBonesOrderDirty && (this._sortOrderedAllBones(), this._subBonesOrderDirty = !1)
            },
            _updateOrderedAllbones: function () {
                this._subOrderedAllBones.length = 0;
                for (var a = [], b = this._childBones, f, g = 0; g < b.length; g++) f = b[g], f.isVisible() &&
                    a.push(f);
                for (; 0 < a.length;) {
                    g = a.pop();
                    b = g._renderCmd;
                    b._syncStatus(b.getParentRenderCmd());
                    this._subOrderedAllBones.push(g);
                    b = g.getChildBones();
                    for (g = 0; g < b.length; g++) f = b[g], f.isVisible() && a.push(f)
                }
            },
            _sortOrderedAllBones: function () {
                this._sortArray(this._subOrderedAllBones)
            },
            _updateVertices: function () {
                var a = this._squareVertices,
                    b = this._renderCmd._anchorPointInPoints;
                if (this._rackLength != a[6].x - b.x || this._rackWidth != a[3].y - b.y) {
                    var f = 0.5 * this._rackLength,
                        g = 0.5 * this._rackWidth,
                        h = 0.25 * f,
                        m = 0.25 * g;
                    a[5].y =
                        a[2].y = a[1].y = a[6].y = a[0].x = a[4].x = a[7].x = a[3].x = 0;
                    a[5].x = -f;
                    a[0].y = -g;
                    a[6].x = f;
                    a[3].y = g;
                    a[1].x = h;
                    a[7].y = m;
                    a[2].x = -h;
                    a[4].y = -m;
                    for (f = 0; f < a.length; f++) a[f].x += b.x, a[f].y += b.y
                }
            },
            _updateAllDrawBones: function () {
                this._subDrawBones = {};
                for (var a in this._subBonesMap) {
                    var b = this._subBonesMap[a];
                    b.isVisible() && b.isDebugDrawEnabled() && this._subDrawBones.push(b)
                }
                this._sortArray(this._sortedAllBones);
                this._subDrawBones = !1
            }
        });
    b.create = function () {
        return new b
    };
    return b
}();
ccs._load = function () {
    var a = function (a, d, m) {
            var n = cc.loader.getRes(a);
            if (!n) return cc.log("%s does not exist", a);
            var p = a.match(c),
                p = (p && p[1] ? p[1] : null).toLocaleLowerCase();
            if ("json" !== p && "exportjson" !== p) return cc.log("%s load error, must be json file", a);
            var u;
            d ? u = b[d] : n.widgetTree ? u = b.ccui : n.nodeTree ? u = b.timeline : n.Content && n.Content.Content ? u = b.timeline : n.gameobjects && (u = b.scene);
            if (!u) return cc.log("Can't find the parser : %s", a), new cc.Node;
            d = n.version || n.Version;
            if (!d && n.armature_data) return cc.warn("%s is armature. please use:",
                a), cc.warn("    ccs.armatureDataManager.addArmatureFileInfoAsync(%s);", a), cc.warn("    var armature = new ccs.Armature('name');"), new cc.Node;
            u = f(u, d);
            return !u ? (cc.log("Can't find the parser : %s", a), new cc.Node) : u.parse(a, n, m) || null
        },
        b = {
            ccui: {},
            timeline: {},
            action: {},
            scene: {}
        };
    a.registerParser = function (a, c, d) {
        if (!a || !c || !d) return cc.log("register parser error");
        b[a] || (b[a] = {});
        b[a][c] = d
    };
    a.getParser = function (a, c) {
        return a && c ? b[a] ? b[a][c] : void 0 : a ? b[a] : b
    };
    var c = /\.([^\.]+)$/,
        d = /([^\.](\.\*)?)*$/,
        f = function (a, b) {
            return a[b] ? a[b] : "*" === b ? null : f(a, b.replace(d, "*"))
        };
    return a
}();
ccs._parser = cc.Class.extend({
    ctor: function () {
        this.parsers = {}
    },
    _dirnameReg: /\S*\//,
    _dirname: function (a) {
        return (a = a.match(this._dirnameReg)) && a[0] ? a[0] : ""
    },
    getClass: function (a) {
        return a.classname
    },
    getNodeJson: function (a) {
        return a.widgetTree
    },
    parse: function (a, b, c) {
        c = c || this._dirname(a);
        this.pretreatment(b, c);
        var d = this.parseNode(this.getNodeJson(b), c, a);
        d && this.deferred(b, c, d, a);
        return d
    },
    pretreatment: function (a, b, c) {},
    deferred: function (a, b, c, d) {},
    parseNode: function (a, b) {
        var c = this.parsers[this.getClass(a)],
            d = null;
        c ? d = c.call(this, a, b) : cc.log("Can't find the parser : %s", this.getClass(a));
        return d
    },
    registerParser: function (a, b) {
        this.parsers[a] = b
    }
});
ccs.load = function (a, b) {
    var c = {
        node: null,
        action: null
    };
    c.node = ccs._load(a, null, b);
    c.action = ccs._load(a, "action", b);
    c.action && (-1 === c.action.tag && c.node) && (c.action.tag = c.node.tag);
    return c
};
ccs.load.validate = {};
ccs.load.preload = !0;
ccs.loadWithVisibleSize = function (a, b) {
    var c = ccs.load(a, b),
        d = cc.director.getVisibleSize();
    c.node && d && (c.node.setContentSize(d.width, d.height), ccui.helper.doLayout(c.node));
    return c
};
ccs.actionTimelineCache = {
    createAction: function (a) {
        return ccs._load(a, "action")
    }
};
ccs.csLoader = {
    createNode: function (a) {
        return ccs._load(a)
    }
};
cc.loader.register(["json"], {
    load: function (a, b, c, d) {
        cc.loader.loadJson(a, function (a, c) {
            var h = cc.path;
            if (c && c.Content && c.Content.Content.UsedResources) {
                for (var m = c.Content.Content.UsedResources, n = h.dirname(b), p = [], u, v = 0; v < m.length; v++)
                    if (ccs.load.preload || !/\.(png|jpg$)/.test(m[v])) u = h.join(n, m[v]), u = h._normalize(u), ccs.load.validate[u] || (ccs.load.validate[u] = !0, p.push(u));
                cc.loader.load(p, function () {
                    d(a, c)
                })
            } else d(a, c)
        })
    }
});
(function (a, b) {
    var c = new(b.extend({
        getNodeJson: function (a) {
            return a
        },
        parseNode: function (a, b) {
            var c = this.parsers[this.getClass(a)],
                d = null;
            c ? d = c.call(this, a, b) : cc.log("Can't find the parser : %s", this.getClass(a));
            return d
        },
        deferred: function (a, b, c, d) {
            ccs.triggerManager.parse(a.Triggers || []);
            ccs.sceneReader && (ccs.sceneReader._node = c)
        },
        setPropertyFromJsonDict: function (a, b) {
            var c = cc.isUndefined(b.x) ? 0 : b.x,
                d = cc.isUndefined(b.y) ? 0 : b.y;
            a.setPosition(c, d);
            c = Boolean(cc.isUndefined(b.visible) ? 1 : b.visible);
            a.setVisible(c);
            c = cc.isUndefined(b.objecttag) ? -1 : b.objecttag;
            a.setTag(c);
            c = cc.isUndefined(b.zorder) ? 0 : b.zorder;
            a.setLocalZOrder(c);
            c = cc.isUndefined(b.scalex) ? 1 : b.scalex;
            d = cc.isUndefined(b.scaley) ? 1 : b.scaley;
            a.setScaleX(c);
            a.setScaleY(d);
            c = cc.isUndefined(b.rotation) ? 0 : b.rotation;
            a.setRotation(c);
            a.setName(b.name || "")
        }
    }));
    c.parseChild = function (a, b, c) {
        for (var d = 0; d < b.length; d++) {
            var f, g = b[d];
            g && (f = this.parseNode(g, c));
            f && a.addChild(f)
        }
    };
    var d = {
            CCSprite: function (a, b, c) {
                var d = new cc.Sprite;
                g(b.fileData,
                    c,
                    function (a, b) {
                        if (0 === b) d.setTexture(a);
                        else if (1 === b) {
                            var c = cc.spriteFrameCache.getSpriteFrame(a);
                            d.setSpriteFrame(c)
                        }
                    });
                b = new ccs.ComRender(d, "CCSprite");
                a.addComponent(b);
                return b
            },
            CCTMXTiledMap: function (a, b, c) {
                var d = null;
                g(b.fileData, c, function (a, b) {
                    0 === b && (d = new cc.TMXTiledMap(a))
                });
                b = new ccs.ComRender(d, "CCTMXTiledMap");
                a.addComponent(b);
                return b
            },
            CCParticleSystemQuad: function (a, b, c) {
                var d = null;
                g(b.fileData, c, function (a, b) {
                    0 === b ? d = new cc.ParticleSystem(a) : cc.log("unknown resourcetype on CCParticleSystemQuad!");
                    d.setPosition(0, 0)
                });
                b = new ccs.ComRender(d, "CCParticleSystemQuad");
                a.addComponent(b);
                return b
            },
            CCArmature: function (a, b, c) {
                var d = null;
                g(b.fileData, c, function (a, b) {
                    if (0 === b) {
                        var c = cc.loader.getRes(a);
                        c || cc.log("Please load the resource [%s] first!", a);
                        c = c.armature_data[0].name;
                        ccs.armatureDataManager.addArmatureFileInfo(a);
                        d = new ccs.Armature(c)
                    }
                });
                if (d) return c = new ccs.ComRender(d, "CCArmature"), a.addComponent(c), (a = b.selectedactionname) && d.getAnimation() && d.getAnimation().play(a), c
            },
            CCComAudio: function (a,
                b, c) {
                var d = null;
                g(b.fileData, c, function (c, f) {
                    if (0 === f) {
                        d = new ccs.ComAudio;
                        d.preloadEffect(c);
                        var g = b.name;
                        g && d.setName(g);
                        a.addComponent(d)
                    }
                })
            },
            CCComAttribute: function (a, b, c) {
                var d = null;
                g(b.fileData, c, function (b, c) {
                    0 === c ? (d = new ccs.ComAttribute, "" !== b && d.parse(b), a.addComponent(d)) : cc.log("unknown resourcetype on CCComAttribute!")
                });
                return d
            },
            CCBackgroundAudio: function (a, b, c) {
                var d = null;
                g(b.fileData, c, function (c, f) {
                    if (0 === f) {
                        d = new ccs.ComAudio;
                        d.preloadBackgroundMusic(c);
                        d.setFile(c);
                        var g = Boolean(b.loop ||
                            0);
                        d.setLoop(g);
                        var n = b.name;
                        n && d.setName(n);
                        a.addComponent(d);
                        d.playBackgroundMusic(c, g)
                    }
                })
            },
            GUIComponent: function (a, b, c) {
                var d = null;
                g(b.fileData, c, function (a, b) {
                    d = ccs._load(a, "ccui")
                });
                b = new ccs.ComRender(d, "GUIComponent");
                a.addComponent(b);
                return b
            },
            CCScene: function () {}
        },
        f = {},
        g = function (a, b, c) {
            if (null != a) {
                var d = a.path,
                    g = a.resourceType;
                a = a.plist;
                d && (a && (cc.loader.getRes(b + a) ? (f[b + a] = !0, cc.spriteFrameCache.addSpriteFrames(b + a)) : f[b + a] || cc.log("%s need to be preloaded", b + a)), 0 !== g ? c(d, g) : c(b + d, g))
            }
        };
    c.parseComponents = function (a, b, c) {
        a && b && b.forEach(function (b) {
            var f = d[b.classname],
                g = null;
            f ? g = f(a, b, c) : cc.log("Can't find the component parser : %s", b.classname);
            b = b.name;
            g && b && g.setName(b)
        })
    };
    c.registerParser("CCNode", function (a, b) {
        var c = new cc.Node;
        this.setPropertyFromJsonDict(c, a);
        this.parseChild.call(this, c, a.gameobjects, b);
        this.parseComponents(c, a.components, b);
        var d = a.CanvasSize;
        d && c.setContentSize(cc.size(d._width, d._height));
        return c
    });
    a.registerParser("scene", "*", c)
})(ccs._load, ccs._parser);
(function (a, b) {
    var c = Array(50),
        d = new(b.extend({
            addSpriteFrame: function (a, b) {
                if (a)
                    for (var c = 0; c < a.length; c++) cc.spriteFrameCache.addSpriteFrames(b + a[c])
            },
            pretreatment: function (a, b) {
                this.addSpriteFrame(a.textures, b)
            },
            parseRecursive: function (a, b) {
                var d = 1,
                    f = null,
                    g, v, x, y, z;
                for (c[0] = a; 0 < d;)
                    if (d--, v = c[d], c[d] = null, v)
                        if (x = v.classname, g = this.parsers[x]) {
                            if (x = new g.object)
                                if (f || (f = x), y = v.options, this.generalAttributes(x, y), g.handle(x, y, b), this.colorAttributes(x, y), g = v.parent, v.parent = null, g instanceof ccui.PageView ?
                                    g.addPage(x) : g instanceof ccui.ListView ? g.pushBackCustomItem(x) : g && (g instanceof ccui.Layout || (x.getPositionType() === ccui.Widget.POSITION_PERCENT && (y = x._positionPercent, z = g._anchorPoint, x._positionPercent.x = y.x + z.x, x._positionPercent.y = y.y + z.y), y = g._renderCmd._anchorPointInPoints, x._position.x += y.x, x._position.y += y.y, x.setNodeDirty()), g.addChild(x)), (v = v.children) && 0 < v.length)
                                    for (g = v.length - 1; 0 <= g; g--) c[d] = v[g], c[d].parent = x, d++
                        } else cc.log("Can't find the parser : %s", x);
                return f
            },
            parse: function (a,
                b, c) {
                c = c || this._dirname(a);
                this.pretreatment(b, c);
                var d = this.parseRecursive(b.widgetTree, c);
                d && this.deferred(b, c, d, a);
                return d
            },
            deferred: function (a, b, c, d) {
                c && (ccs.actionManager.initWithDictionary(d, a.animation, c), c.setContentSize(a.designWidth, a.designHeight))
            }
        }));
    d.generalAttributes = function (a, b) {
        a._ignoreSize = b.ignoreSize || !0;
        a._sizeType = b.sizeType || 0;
        a._positionType = b.positionType || 0;
        a._sizePercent.x = b.sizePercentX || 0;
        a._sizePercent.y = b.sizePercentY || 0;
        a._positionPercent.x = b.positionPercentX ||
            0;
        a._positionPercent.y = b.positionPercentY || 0;
        var c = 0,
            d = 0;
        b.adaptScreen ? (d = cc.director.getWinSize(), c = d.width, d = d.height) : (c = b.width || 0, d = b.height || 0);
        var f = b.anchorPointX,
            g = b.anchorPointY;
        a._anchorPoint.x = isNaN(f) ? 0.5 : f;
        a._anchorPoint.y = isNaN(g) ? 0.5 : g;
        a.setContentSize(c, d);
        a.setTag(b.tag);
        a.setActionTag(b.actiontag);
        a.setTouchEnabled(b.touchAble);
        a._name = b.name || "default";
        a._position.x = b.x || 0;
        a._position.y = b.y || 0;
        a._scaleX = b.scaleX || 1;
        a._scaleY = b.scaleY || 1;
        a._rotationX = a._rotationY = b.rotation || 0;
        a._visible = b.visible || !1;
        a._localZOrder = b.ZOrder || 0;
        if (null != b.layoutParameter) {
            c = b.layoutParameter;
            d = null;
            switch (isNaN(c.type) ? 2 : c.type) {
            case 1:
                d = new ccui.LinearLayoutParameter;
                d._linearGravity = c.gravity || 0;
                break;
            case 2:
                d = new ccui.RelativeLayoutParameter, d._relativeLayoutName = c.relativeName, d._relativeWidgetName = c.relativeToName, d._relativeAlign = c.align || 0
            }
            null != d && (f = d._margin, f.left = c.marginLeft || 0, f.top = c.marginTop || 0, f.right = c.marginRight || 0, f.bottom = c.marginDown || 0, a.setLayoutParameter(d))
        }
    };
    d.colorAttributes = function (a, b) {
        var c = null !== b.opacity ? b.opacity : 255;
        null != c && a.setOpacity(c);
        var c = b.colorR,
            d = b.colorG,
            f = b.colorB;
        a.setColor(cc.color(null == c ? 255 : c, null == d ? 255 : d, null == f ? 255 : f));
        a.setFlippedX(b.flipX);
        a.setFlippedY(b.flipY)
    };
    var f = function (a, b, c, d) {
        c && (0 === b ? d(a + c, b) : d(c, b))
    };
    d.LayoutAttributes = function (a, b, c) {
        var d = 0,
            g = 0;
        b.adaptScreen ? (g = cc.director.getWinSize(), d = g.width, g = g.height) : (d = b.width || 0, g = b.height || 0);
        a.setSize(cc.size(d, g));
        a.setClippingEnabled(b.clipAble);
        d = b.backGroundScale9Enable;
        a.setBackGroundImageScale9Enabled(d);
        var g = b.bgColorR || 0,
            v = b.bgColorG || 0,
            x = b.bgColorB || 0,
            y = isNaN(b.bgStartColorR) ? 255 : b.bgStartColorR,
            z = isNaN(b.bgStartColorG) ? 255 : b.bgStartColorG,
            t = isNaN(b.bgStartColorB) ? 255 : b.bgStartColorB,
            A = isNaN(b.bgEndColorR) ? 255 : b.bgEndColorR,
            w = isNaN(b.bgEndColorG) ? 255 : b.bgEndColorG,
            B = isNaN(b.bgEndColorB) ? 255 : b.bgEndColorB;
        a.setBackGroundColorVector(cc.p(b.vectorX || 0, b.vectorY || 0));
        var F = b.bgColorOpacity || 0;
        a.setBackGroundColorType(b.colorType || 0);
        a.setBackGroundColor(cc.color(y,
            z, t), cc.color(A, w, B));
        a.setBackGroundColor(cc.color(g, v, x));
        a.setBackGroundColorOpacity(F);
        (g = b.backGroundImageData) && f(c, g.resourceType || 0, g.path, function (b, c) {
            a.setBackGroundImage(b, c)
        });
        d && (c = b.capInsetsX || 0, d = b.capInsetsY || 0, g = isNaN(b.capInsetsWidth) ? 1 : b.capInsetsWidth, v = isNaN(b.capInsetsHeight) ? 1 : b.capInsetsHeight, a.setBackGroundImageCapInsets(cc.rect(c, d, g, v)));
        b.layoutType && a.setLayoutType(b.layoutType)
    };
    d.ButtonAttributes = function (a, b, c) {
        var d = b.scale9Enable;
        a.setScale9Enabled(d);
        var g = b.normalData;
        f(c, g.resourceType || 0, g.path, function (b, c) {
            a.loadTextureNormal(b, c)
        });
        g = b.pressedData;
        f(c, g.resourceType || 0, g.path, function (b, c) {
            a.loadTexturePressed(b, c)
        });
        g = b.disabledData;
        f(c, g.resourceType || 0, g.path, function (b, c) {
            a.loadTextureDisabled(b, c)
        });
        if (d) {
            c = b.capInsetsX || 0;
            var d = b.capInsetsY || 0,
                g = isNaN(b.capInsetsWidth) ? 1 : b.capInsetsWidth,
                v = isNaN(b.capInsetsHeight) ? 1 : b.capInsetsHeight;
            a.setCapInsets(cc.rect(c, d, g, v));
            c = b.scale9Width || 0;
            d = b.scale9Height || 0;
            null != c && null != d && a.setSize(cc.size(c, d))
        }
        if (c =
            b.text || "") a.setTitleText(c), a.setTitleColor(cc.color(null !== b.textColorR ? b.textColorR : 255, null !== b.textColorG ? b.textColorG : 255, null !== b.textColorB ? b.textColorB : 255)), null != b.fontSize && a.setTitleFontSize(b.fontSize), b.fontName && a.setTitleFontName(b.fontName)
    };
    d.CheckBoxAttributes = function (a, b, c) {
        var d = b.backGroundBoxData;
        f(c, d.resourceType || 0, d.path, function (b, c) {
            a.loadTextureBackGround(b, c)
        });
        var g = b.backGroundBoxSelectedData;
        f(c, g.resourceType || d.resourceType, g.path || d.path, function (b, c) {
            a.loadTextureBackGroundSelected(b,
                c)
        });
        d = b.frontCrossData;
        f(c, d.resourceType || 0, d.path, function (b, c) {
            a.loadTextureFrontCross(b, c)
        });
        g = b.backGroundBoxDisabledData;
        f(c, g.resourceType || d.resourceType, g.path || d.path, function (b, c) {
            a.loadTextureBackGroundDisabled(b, c)
        });
        d = b.frontCrossDisabledData;
        f(c, d.resourceType || 0, d.path, function (b, c) {
            a.loadTextureFrontCrossDisabled(b, c)
        });
        b.selectedState && a.setSelected(b.selectedState)
    };
    d.ImageViewAttributes = function (a, b, c) {
        var d = b.fileNameData;
        f(c, d.resourceType || 0, d.path, function (b, c) {
            a.loadTexture(b,
                c)
        });
        c = !1;
        b.scale9Enable && (c = b.scale9Enable);
        a.setScale9Enabled(c);
        if (c) {
            c = b.scale9Height || 0;
            b.scale9Width && c && a.setSize(cc.size(b.scale9Width || 0, b.scale9Height || 0));
            c = b.capInsetsX || 0;
            var d = b.capInsetsY || 0,
                g = isNaN(b.capInsetsWidth) ? 1 : b.capInsetsWidth;
            b = isNaN(b.capInsetsHeight) ? 1 : b.capInsetsHeight;
            a.setCapInsets(cc.rect(c, d, g, b))
        }
    };
    d.TextAtlasAttributes = function (a, b, c) {
        var d = b.stringValue,
            f = b.charMapFileData,
            g = b.itemWidth,
            x = b.itemHeight,
            y = b.startCharMap;
        if (null != d && f && null != g && null != x && null != y) switch (b =
            b.charMapFileData, b.resourceType || 0) {
        case 0:
            a.setProperty(d, c + b.path, g, x, y);
            break;
        case 1:
            cc.log("Wrong res type of LabelAtlas!")
        }
    };
    d.TextBMFontAttributes = function (a, b, c) {
        var d = b.fileNameData;
        switch (d.resourceType || 0) {
        case 0:
            a.setFntFile(c + d.path);
            break;
        case 1:
            cc.log("Wrong res type of LabelAtlas!")
        }
        a.setString(b.text || "")
    };
    var g = /\.ttf$/;
    d.TextAttributes = function (a, b, c) {
        a.setTouchScaleChangeEnabled(b.touchScaleEnable);
        var d = b.text || "";
        d && a._setString(d);
        null != b.fontSize && a._setFontSize(b.fontSize);
        d = b.fontName;
        null != d && (cc.sys.isNative ? g.test(d) ? a.setFontName(cc.path.join(cc.loader.resPath, c, d)) : a.setFontName(d) : a._setFontName(d.replace(g, "")));
        c = b.areaHeight || 0;
        b.areaWidth && c && (c = cc.size(b.areaWidth, b.areaHeight), a._setTextAreaSize(c));
        c = b.hAlignment || 0;
        null != c && a._setTextHorizontalAlignment(c);
        b = b.vAlignment || 0;
        null != b && a._setTextVerticalAlignment(b);
        a._updateUITextContentSize()
    };
    d.ListViewAttributes = function (a, b, c) {
        d.ScrollViewAttributes(a, b, c);
        a.setDirection(b.direction || 1);
        a.setGravity(b.gravity ||
            0);
        a.setItemsMargin(b.itemMargin || 0)
    };
    d.LoadingBarAttributes = function (a, b, c) {
        var d = b.textureData;
        f(c, d.resourceType || 0, d.path, function (b, c) {
            a.loadTexture(b, c)
        });
        c = b.scale9Enable;
        a.setScale9Enabled(c);
        if (c) {
            c = b.capInsetsX || 0;
            var d = b.capInsetsY || 0,
                g = isNaN(b.capInsetsWidth) ? 1 : b.capInsetsWidth,
                v = isNaN(b.capInsetsHeight) ? 1 : b.capInsetsHeight;
            a.setCapInsets(cc.rect(c, d, g, v));
            a.setSize(cc.size(b.width || 0, b.height || 0))
        }
        a.setDirection(b.direction || 0);
        a.setPercent(b.percent || 0)
    };
    d.PageViewAttributes = d.LayoutAttributes;
    d.ScrollViewAttributes = function (a, b, c) {
        d.LayoutAttributes(a, b, c);
        a.setInnerContainerSize(cc.size(null != b.innerWidth ? b.innerWidth : 200, null != b.innerHeight ? b.innerHeight : 200));
        a.setDirection(null != b.direction ? b.direction : 1);
        a.setBounceEnabled(b.bounceEnable)
    };
    d.SliderAttributes = function (a, b, c) {
        var d = b.scale9Enable;
        a.setScale9Enabled(d);
        var g = b.length,
            v = b.barFileNameData,
            x = v.resourceType || 0,
            v = v.path;
        null != b.barFileName ? d && (f(c, x, v, function (b, c) {
                a.loadBarTexture(b, c)
            }), a.setSize(cc.size(g, a.getContentSize().height))) :
            f(c, x, v, function (b, c) {
                a.loadBarTexture(b, c)
            });
        d = b.ballNormalData;
        f(c, d.resourceType || 0, d.path, function (b, c) {
            a.loadSlidBallTextureNormal(b, c)
        });
        g = b.ballPressedData;
        f(c, g.resourceType || d.resourceType, g.path || d.path, function (b, c) {
            a.loadSlidBallTexturePressed(b, c)
        });
        d = b.ballDisabledData;
        f(c, d.resourceType || 0, d.path, function (b, c) {
            a.loadSlidBallTextureDisabled(b, c)
        });
        b = b.progressBarData;
        f(c, b.resourceType || 0, b.path, function (b, c) {
            a.loadProgressBarTexture(b, c)
        })
    };
    d.TextFieldAttributes = function (a, b, c) {
        var d =
            b.placeHolder || "";
        d && a.setPlaceHolder(d);
        a.setString(b.text || "");
        (d = b.fontSize) && a.setFontSize(d);
        d = b.fontName;
        null != d && (cc.sys.isNative ? g.test(d) ? a.setFontName(cc.path.join(cc.loader.resPath, c, d)) : a.setFontName(d) : a.setFontName(d.replace(g, "")));
        c = b.touchSizeWidth || 0;
        d = b.touchSizeHeight || 0;
        null != c && null != d && a.setTouchSize(c, d);
        c = b.maxLengthEnable;
        a.setMaxLengthEnabled(c);
        c && a.setMaxLength(b.maxLength);
        c = b.passwordEnable;
        a.setPasswordEnabled(c);
        c && a.setPasswordStyleText(b.passwordStyleText);
        c = b.areaWidth ||
            0;
        d = b.areaHeight || 0;
        c && d && (c = cc.size(c, d), a.setTextAreaSize(c));
        (c = b.hAlignment || 0) && a.setTextHorizontalAlignment(c);
        (c = b.vAlignment || 0) && a.setTextVerticalAlignment(c);
        c = isNaN(b.colorR) ? 255 : b.colorR;
        d = isNaN(b.colorG) ? 255 : b.colorG;
        b = isNaN(b.colorB) ? 255 : b.colorB;
        a.setTextColor(cc.color(c, d, b))
    };
    d.parsers = {
        Panel: {
            object: ccui.Layout,
            handle: d.LayoutAttributes
        },
        Button: {
            object: ccui.Button,
            handle: d.ButtonAttributes
        },
        CheckBox: {
            object: ccui.CheckBox,
            handle: d.CheckBoxAttributes
        },
        ImageView: {
            object: ccui.ImageView,
            handle: d.ImageViewAttributes
        },
        LabelAtlas: {
            object: ccui.TextAtlas,
            handle: d.TextAtlasAttributes
        },
        LabelBMFont: {
            object: ccui.TextBMFont,
            handle: d.TextBMFontAttributes
        },
        Label: {
            object: ccui.Text,
            handle: d.TextAttributes
        },
        ListView: {
            object: ccui.ListView,
            handle: d.ListViewAttributes
        },
        LoadingBar: {
            object: ccui.LoadingBar,
            handle: d.LoadingBarAttributes
        },
        PageView: {
            object: ccui.PageView,
            handle: d.PageViewAttributes
        },
        ScrollView: {
            object: ccui.ScrollView,
            handle: d.ScrollViewAttributes
        },
        Slider: {
            object: ccui.Slider,
            handle: d.SliderAttributes
        },
        TextField: {
            object: ccui.TextField,
            handle: d.TextFieldAttributes
        }
    };
    a.registerParser("ccui", "*", d)
})(ccs._load, ccs._parser);
(function (a, b) {
    var c = new(b.extend({
        getNodeJson: function (a) {
            return a.action
        },
        parseNode: function (a, b, c) {
            if (!a) return null;
            var h = this,
                m = new ccs.ActionTimeline;
            m.setDuration(a.duration);
            m.setTimeSpeed(a.speed || 1);
            a.timelines.forEach(function (a) {
                var c = h.parsers[a.frameType],
                    d;
                c ? d = c.call(h, a, b) : cc.log("parser does not exist : %s", a.frameType);
                d && m.addTimeline(d);
                "ColorFrame" === a.frameType && m.addTimeline(h.parsers.AlphaFrame.call(h, a, b))
            });
            return m
        }
    }));
    [{
            name: "PositionFrame",
            handle: function (a) {
                var b = new ccs.PositionFrame;
                b.setPosition(cc.p(a.x, a.y));
                return b
            }
        }, {
            name: "VisibleFrame",
            handle: function (a) {
                var b = new ccs.VisibleFrame;
                b.setVisible(a.value);
                return b
            }
        }, {
            name: "ScaleFrame",
            handle: function (a) {
                var b = new ccs.ScaleFrame,
                    c = a.y;
                b.setScaleX(a.x);
                b.setScaleY(c);
                return b
            }
        }, {
            name: "RotationFrame",
            handle: function (a) {
                var b = new ccs.RotationFrame;
                b.setRotation(a.rotation);
                return b
            }
        }, {
            name: "SkewFrame",
            handle: function (a) {
                var b = new ccs.SkewFrame,
                    c = a.y;
                b.setSkewX(a.x);
                b.setSkewY(c);
                return b
            }
        }, {
            name: "RotationSkewFrame",
            handle: function (a) {
                var b =
                    new ccs.RotationSkewFrame,
                    c = a.y;
                b.setSkewX(a.x);
                b.setSkewY(c);
                return b
            }
        }, {
            name: "AnchorFrame",
            handle: function (a) {
                var b = new ccs.AnchorPointFrame;
                b.setAnchorPoint(cc.p(a.x, a.y));
                return b
            }
        }, {
            name: "InnerActionFrame",
            handle: function (a) {
                var b = new ccs.InnerActionFrame,
                    c = a.startFrame;
                b.setInnerActionType(a.innerActionType);
                b.setStartFrameIndex(c);
                return b
            }
        }, {
            name: "ColorFrame",
            handle: function (a) {
                var b = new ccs.ColorFrame;
                b.setColor(cc.color(a.red, a.green, a.blue));
                (new ccs.AlphaFrame).setAlpha(a.alpha);
                return b
            }
        },
        {
            name: "AlphaFrame",
            handle: function (a) {
                var b = new ccs.AlphaFrame;
                b.setAlpha(a.alpha);
                return b
            }
        }, {
            name: "TextureFrame",
            handle: function (a) {
                var b = new ccs.TextureFrame;
                a = a.value;
                if (null != a) {
                    var c = a;
                    null == cc.spriteFrameCache.getSpriteFrame(c) && (c = ccs.csLoader.getJsonPath() + a);
                    b.setTextureName(c)
                }
                return b
            }
        }, {
            name: "EventFrame",
            handle: function (a) {
                var b = new ccs.EventFrame;
                a = a.value;
                null != a && b.setEvent(a);
                return b
            }
        }, {
            name: "ZOrderFrame",
            handle: function (a) {
                var b = new ccs.ZOrderFrame;
                b.setZOrder(a.value);
                return b
            }
        }
    ].forEach(function (a) {
        c.registerParser(a.name,
            function (b, c) {
                var h = new ccs.Timeline;
                h.setActionTag(b.actionTag);
                var m = b.frames;
                m && m.length && m.forEach(function (b) {
                    var c = a.handle(b);
                    c.setFrameIndex(b.frameIndex);
                    c.setTween(b.tween);
                    h.addFrame(c)
                });
                return h
            })
    });
    a.registerParser("action", "0.*", c);
    a.registerParser("action", "1.*", c)
})(ccs._load, ccs._parser);
(function (a, b) {
    var c = new(b.extend({
            getNodeJson: function (a) {
                return a.Content.Content.Animation
            },
            parseNode: function (a, b, c) {
                if (!a) return null;
                var d = this,
                    n = new ccs.ActionTimeline;
                n.setDuration(a.Duration);
                n.setTimeSpeed(a.Speed || 1);
                a.Timelines.forEach(function (a) {
                    var c = d.parsers[a.Property],
                        f;
                    c ? f = c.call(d, a, b) : cc.log("parser does not exist : %s", a.Property);
                    f && n.addTimeline(f)
                });
                return n
            },
            deferred: function (a, b, c, d) {
                b = (a = a.Content.Content.AnimationList) ? a.length : 0;
                for (d = 0; d < b; d++) {
                    var n = a[d],
                        p = {
                            name: null,
                            startIndex: null,
                            endIndex: null
                        };
                    p.name = n.Name;
                    p.startIndex = n.StartIndex;
                    p.endIndex = n.EndIndex;
                    c.addAnimationInfo(p)
                }
            }
        })),
        d = function (a, b) {
            a.setTweenType(b.Type);
            var c = b.Points,
                d = [];
            c && (c.forEach(function (a) {
                d.push(a.X);
                d.push(a.Y)
            }), a.setEasingParams(d))
        };
    [{
            name: "Position",
            handle: function (a) {
                var b = new ccs.PositionFrame;
                b.setPosition(cc.p(a.X, a.Y));
                return b
            }
        }, {
            name: "VisibleForFrame",
            handle: function (a) {
                var b = new ccs.VisibleFrame;
                b.setVisible(a.Value);
                return b
            }
        }, {
            name: "Scale",
            handle: function (a) {
                var b =
                    new ccs.ScaleFrame,
                    c = a.Y;
                b.setScaleX(a.X);
                b.setScaleY(c);
                return b
            }
        }, {
            name: "Rotation",
            handle: function (a) {
                var b = new ccs.RotationFrame;
                b.setRotation(a.Rotation || a.Value || 0);
                return b
            }
        }, {
            name: "Skew",
            handle: function (a) {
                var b = new ccs.SkewFrame,
                    c = a.Y;
                b.setSkewX(a.X);
                b.setSkewY(c);
                return b
            }
        }, {
            name: "RotationSkew",
            handle: function (a) {
                var b = new ccs.RotationSkewFrame,
                    c = a.Y;
                b.setSkewX(a.X);
                b.setSkewY(c);
                return b
            }
        }, {
            name: "Anchor",
            handle: function (a) {
                var b = new ccs.AnchorPointFrame;
                b.setAnchorPoint(cc.p(a.X, a.Y));
                return b
            }
        },
        {
            name: "AnchorPoint",
            handle: function (a) {
                var b = new ccs.AnchorPointFrame;
                b.setAnchorPoint(cc.p(a.X, a.Y));
                return b
            }
        }, {
            name: "InnerAction",
            handle: function (a) {
                var b = new ccs.InnerActionFrame,
                    c = a.StartFrame;
                b.setInnerActionType(a.InnerActionType);
                b.setStartFrameIndex(c);
                return b
            }
        }, {
            name: "CColor",
            handle: function (a) {
                var b = new ccs.ColorFrame;
                (a = a.Color) || (a = {});
                a.R = void 0 === a.R ? 255 : a.R;
                a.G = void 0 === a.G ? 255 : a.G;
                a.B = void 0 === a.B ? 255 : a.B;
                b.setColor(cc.color(a.R, a.G, a.B));
                return b
            }
        }, {
            name: "Alpha",
            handle: function (a) {
                var b =
                    new ccs.AlphaFrame;
                b.setAlpha(a.Value);
                return b
            }
        }, {
            name: "FileData",
            handle: function (a, b) {
                var c, d, n, p;
                c = new ccs.TextureFrame;
                d = a.TextureFile;
                null != d && (n = d.Plist, d = d.Path, p = cc.spriteFrameCache.getSpriteFrame(d), !p && n && (cc.loader.getRes(b + n) ? (cc.spriteFrameCache.addSpriteFrames(b + n), p = cc.spriteFrameCache.getSpriteFrame(d)) : cc.log("%s need to be preloaded", b + n)), null == p && (d = b + d), c.setTextureName(d));
                return c
            }
        }, {
            name: "FrameEvent",
            handle: function (a) {
                var b = new ccs.EventFrame;
                a = a.Value;
                null != a && b.setEvent(a);
                return b
            }
        }, {
            name: "ZOrder",
            handle: function (a) {
                var b = new ccs.ZOrderFrame;
                b.setZOrder(a.Value);
                return b
            }
        }, {
            name: "ActionValue",
            handle: function (a) {
                var b = new ccs.InnerActionFrame,
                    c = a.InnerActionType,
                    d = a.CurrentAniamtionName,
                    n = a.SingleFrameIndex;
                a = a.FrameIndex;
                void 0 !== a && b.setFrameIndex(a);
                b.setInnerActionType(ccs.InnerActionType[c]);
                b.setSingleFrameIndex(n);
                b.setEnterWithName(!0);
                d && b.setAnimationName(d);
                return b
            }
        }, {
            name: "BlendFunc",
            handle: function (a) {
                var b = new ccs.BlendFuncFrame;
                (a = a.BlendFunc) && (void 0 !==
                    a.Src && void 0 !== a.Dst) && b.setBlendFunc(new cc.BlendFunc(a.Src, a.Dst));
                return b
            }
        }
    ].forEach(function (a) {
        c.registerParser(a.name, function (b, c) {
            var m = new ccs.Timeline;
            m.setActionTag(b.ActionTag);
            var n = b.Frames;
            n && n.length && n.forEach(function (b) {
                var g = a.handle(b, c);
                g.setFrameIndex(b.FrameIndex);
                g.setTween(null != b.Tween ? b.Tween : !0);
                (b = b.EasingData) && d(g, b);
                m.addFrame(g)
            });
            return m
        })
    });
    a.registerParser("action", "2.*", c);
    a.registerParser("action", "*", c)
})(ccs._load, ccs._parser);
(function (a, b) {
    var c = {},
        d = new(b.extend({
            getNodeJson: function (a) {
                return a.nodeTree
            },
            addSpriteFrame: function (a, b, d) {
                if (a && b && a.length === b.length)
                    for (var f = 0; f < a.length; f++) {
                        var p = d + a[f];
                        !cc.loader.getRes(p) && !c[p] ? cc.log("%s need to be preloaded", p) : c[p] = !0;
                        cc.spriteFrameCache.addSpriteFrames(p, d + b[f])
                    }
            },
            pretreatment: function (a, b, c) {
                this.addSpriteFrame(a.textures, a.texturesPng, b)
            }
        }));
    d.generalAttributes = function (a, b) {
        var c = null != b.width ? b.width : 0,
            d = null != b.height ? b.height : 0,
            f = null != b.x ? b.x : 0,
            u = null !=
            b.y ? b.y : 0,
            v = null != b.scaleX ? b.scaleX : 1,
            x = null != b.scaleY ? b.scaleY : 1,
            y = null != b.rotation ? b.rotation : 0,
            z = null != b.rotationSkewX ? b.rotationSkewX : 0,
            t = null != b.rotationSkewY ? b.rotationSkewY : 0,
            A = null != b.skewX ? b.skewX : 0,
            w = null != b.skewY ? b.skewY : 0,
            B = null != b.anchorPointX ? b.anchorPointX : 0.5,
            F = null != b.anchorPointY ? b.anchorPointY : 0.5,
            C = null != b.opacity ? b.opacity : 255,
            D = null != b.colorR ? b.colorR : 255,
            E = null != b.colorG ? b.colorG : 255,
            G = null != b.colorB ? b.colorB : 255,
            H = null != b.colorR ? b.colorR : 0,
            M = null != b.tag ? b.tag : 0,
            K = null != b.actionTag ?
            b.actionTag : 0,
            N = null != b.visible ? b.visible : !0;
        (0 != f || 0 != u) && a.setPosition(cc.p(f, u));
        1 != v && a.setScaleX(v);
        1 != x && a.setScaleY(x);
        0 != y && a.setRotation(y);
        0 != z && a.setRotationX(z);
        0 != t && a.setRotationY(t);
        0 != A && a.setSkewX(A);
        0 != w && a.setSkewY(w);
        (0.5 != B || 0.5 != F) && a.setAnchorPoint(cc.p(B, F));
        (0 != c || 0 != d) && a.setContentSize(cc.size(c, d));
        0 != H && a.setLocalZOrder(H);
        !0 != N && a.setVisible(N);
        255 != C && a.setOpacity(C);
        (255 != D || 255 != E || 255 != G) && a.setColor(cc.color(D, E, G));
        a.setTag(M);
        a.setUserObject(new ccs.ActionTimelineData(K))
    };
    d.parseComponent = function (a, b) {
        if (b)
            for (var c = 0; c < b.length; ++c) {
                var d = this.loadComponent(b[c]);
                d && a.addComponent(d)
            }
    };
    d.parseChild = function (a, b, c, d) {
        a = c.children;
        for (c = 0; c < a.length; c++) {
            var f = this.parseNode(a[c], d);
            if (f)
                if (b instanceof ccui.PageView) f instanceof ccui.Layout && b.addPage(f);
                else if (b instanceof ccui.ListView) f instanceof ccui.Widget && b.pushBackCustomItem(f);
            else {
                if (!(b instanceof ccui.Layout) && f instanceof ccui.Widget) {
                    if (f.getPositionType() === ccui.Widget.POSITION_PERCENT) {
                        var u = f.getPositionPercent(),
                            v = b.getAnchorPoint();
                        f.setPositionPercent(cc.p(u.x + v.x, u.y + v.y))
                    }
                    u = b.getAnchorPointInPoints();
                    f.setPosition(cc.p(f.getPositionX() + u.x, f.getPositionY() + u.y))
                }
                b.addChild(f)
            }
        }
    };
    d.initNode = function (a) {
        var b = new cc.Node;
        this.generalAttributes(b, a);
        return b
    };
    d.initSubGraph = function (a) {
        var b = a.fileName,
            b = b && "" !== b ? this.createNode(b) : new ccs.Node;
        this.generalAttributes(b, a);
        return b
    };
    d.initSprite = function (a, b) {
        var c = a.fileName;
        if (null != c) {
            var d = cc.spriteFrameCache.getSpriteFrame(c),
                c = d ? ccs.Sprite.createWithSpriteFrame(d) :
                new ccs.Sprite(b + c);
            c || (c = new cc.Sprite, cc.log("filePath is empty. Create a sprite with no texture"))
        } else c = new ccs.Sprite;
        this.generalAttributes(c, a);
        var d = a.flipX,
            f = a.flipY;
        !1 != d && c.setFlippedX(d);
        !1 != f && c.setFlippedY(f);
        return c
    };
    d.initParticle = function (a, b) {
        var c = a.tmxFile,
            d = new cc.ParticleSystemQuad(a.plistFile);
        d.setTotalParticles(c);
        this.generalAttributes(d, a);
        return d
    };
    d.initTMXTiledMap = function (a, b) {
        var c = a.tmxFile,
            d = a.tmxString,
            f = a.resourcePath,
            u = null;
        c && "" !== c ? u = new cc.TMXTiledMap(c) :
            d && ("" !== d && f && "" !== f) && (u = new cc.TMXTiledMap(d, f));
        return u
    };
    var f = a.getParser("ccui")["*"];
    d.initWidget = function (a, b) {
        var c = a.classname,
            d = f.parsers[c];
        if (!d) return cc.log("%s parser is not found", c);
        if (c = d.call(f, a, b)) {
            var d = a.rotationSkewX,
                p = a.rotationSkewY,
                u = a.skewX,
                v = a.skewY;
            0 != d && c.setRotationX(d);
            0 != p && c.setRotationY(p);
            0 != u && c.setSkewX(u);
            0 != v && c.setSkewY(v);
            c.setUserObject(new ccs.ActionTimelineData(a.actionTag))
        }
        return c
    };
    [{
            name: "Node",
            handle: d.initNode
        }, {
            name: "SubGraph",
            handle: d.initSubGraph
        },
        {
            name: "Sprite",
            handle: d.initSprite
        }, {
            name: "Particle",
            handle: d.initParticle
        }, {
            name: "TMXTiledMap",
            handle: d.initTMXTiledMap
        }, {
            name: "Widget",
            handle: d.initWidget
        }, {
            name: "Panel",
            handle: d.initWidget
        }, {
            name: "Button",
            handle: d.initWidget
        }, {
            name: "CheckBox",
            handle: d.initWidget
        }, {
            name: "ImageView",
            handle: d.initWidget
        }, {
            name: "LabelAtlas",
            handle: d.initWidget
        }, {
            name: "LabelBMFont",
            handle: d.initWidget
        }, {
            name: "Label",
            handle: d.initWidget
        }, {
            name: "ListView",
            handle: d.initWidget
        }, {
            name: "LoadingBar",
            handle: d.initWidget
        }, {
            name: "PageView",
            handle: d.initWidget
        }, {
            name: "ScrollView",
            handle: d.initWidget
        }, {
            name: "Slider",
            handle: d.initWidget
        }, {
            name: "TextField",
            handle: d.initWidget
        }
    ].forEach(function (a) {
        d.registerParser(a.name, function (b, c, d) {
            var f = a.handle.call(this, b.options);
            this.parseComponent(f, b.components);
            this.parseChild(c, f, b, d);
            return f
        })
    });
    a.registerParser("timeline", "0.*", d);
    a.registerParser("timeline", "1.*", d)
})(ccs._load, ccs._parser);
(function (a, b) {
    var c = new(b.extend({
            parse: function (a, b, c) {
                c = void 0 !== c ? c : this._dirname(a);
                this.pretreatment(b, c, a);
                var d = this.parseNode(this.getNodeJson(b), c);
                this.deferred(b, c, d, a);
                return d
            },
            getNodeJson: function (a) {
                a = a.Content;
                return a.ObjectData ? a.ObjectData : a.Content.ObjectData
            },
            getClass: function (a) {
                return a.ctype
            }
        })),
        d = function (a, b) {
            return void 0 === a ? b : a
        };
    c.generalAttributes = function (a, b) {
        null != b.Name && a.setName(b.Name);
        var c = b.Position;
        if (null != c && (null != c.X || null != c.Y)) a.setPosition(cc.p(c.X ||
            0, c.Y || 0));
        c = b.Scale;
        null != c && (null != c.ScaleX && a.setScaleX(c.ScaleX), null != c.ScaleY && a.setScaleY(c.ScaleY));
        c = b.RotationSkewX;
        null != c && a.setRotationX(c);
        c = b.RotationSkewY;
        null != b.RotationSkewY && a.setRotationY(c);
        c = b.AnchorPoint;
        null != c && (null == c.ScaleX && (c.ScaleX = 0), null == c.ScaleY && (c.ScaleY = 0), (0.5 != c.ScaleX || 0.5 != c.ScaleY) && a.setAnchorPoint(cc.p(c.ScaleX, c.ScaleY)));
        null != b.ZOrder && a.setLocalZOrder(b.ZOrder);
        c = d(b.VisibleForFrame, !0);
        a.setVisible(c);
        (c = b.Size) && x(a, c);
        null != b.Alpha && a.setOpacity(b.Alpha);
        a.setTag(b.Tag || 0);
        var c = b.ActionTag || 0,
            f = new ccs.ComExtensionData,
            h = b.UserData;
        void 0 !== h && f.setCustomProperty(h);
        f.setActionTag(c);
        a.getComponent("ComExtensionData") && a.removeComponent("ComExtensionData");
        a.addComponent(f);
        a.setCascadeColorEnabled(!0);
        a.setCascadeOpacityEnabled(!0);
        g(a, b)
    };
    c.parseChild = function (a, b, c) {
        if (a && b)
            for (var d = 0; d < b.length; d++) {
                var f = this.parseNode(b[d], c);
                if (f)
                    if (a instanceof ccui.PageView) f instanceof ccui.Layout && a.addPage(f);
                    else if (a instanceof ccui.ListView) f instanceof
                ccui.Widget && a.pushBackCustomItem(f);
                else {
                    if (!(a instanceof ccui.Layout) && f instanceof ccui.Widget && f.getPositionType() === ccui.Widget.POSITION_PERCENT) {
                        var g = f.getPositionPercent(),
                            h = a.getAnchorPoint();
                        f.setPositionPercent(cc.p(g.x + h.x, g.y + h.y))
                    }
                    a.addChild(f)
                }
            }
    };
    c.initSingleNode = function (a) {
        var b = new cc.Node;
        this.generalAttributes(b, a);
        a = a.CColor;
        null != a && b.setColor(v(a));
        return b
    };
    c.initSprite = function (a, b) {
        var c = new cc.Sprite;
        u(a.FileData, b, function (a, b) {
            if (0 === b) c.setTexture(a);
            else if (1 === b) {
                var d =
                    cc.spriteFrameCache.getSpriteFrame(a);
                d && c.setSpriteFrame(d)
            }
        });
        var d = a.BlendFunc;
        if (a.BlendFunc) {
            var f = cc.BlendFunc.ALPHA_PREMULTIPLIED;
            void 0 !== d.Src && (f.src = d.Src);
            void 0 !== d.Dst && (f.dst = d.Dst);
            c.setBlendFunc(f)
        }
        a.FlipX && c.setFlippedX(!0);
        a.FlipY && c.setFlippedY(!0);
        this.generalAttributes(c, a);
        d = a.CColor;
        null != d && c.setColor(v(d));
        return c
    };
    c.initParticle = function (a, b) {
        var c, d = this;
        u(a.FileData, b, function (b, f) {
            cc.loader.getRes(b) || cc.log("%s need to be preloaded", b);
            c = new cc.ParticleSystem(b);
            d.generalAttributes(c,
                a);
            c.setPositionType(cc.ParticleSystem.TYPE_GROUPED);
            !cc.sys.isNative && c.setDrawMode(cc.ParticleSystem.TEXTURE_MODE);
            var g = a.BlendFunc;
            if (a.BlendFunc) {
                var h = cc.BlendFunc.ALPHA_PREMULTIPLIED;
                void 0 !== g.Src && (h.src = g.Src);
                void 0 !== g.Dst && (h.dst = g.Dst);
                c.setBlendFunc(h)
            }
        });
        return c
    };
    c.widgetAttributes = function (a, b, c) {
        a.setCascadeColorEnabled(!0);
        a.setCascadeOpacityEnabled(!0);
        a.setUnifySizeEnabled(!1);
        a.ignoreContentAdaptWithSize(!1);
        !c && x(a, b.Size);
        (c = b.Name) && a.setName(c);
        c = b.ActionTag || 0;
        a.setActionTag(c);
        var h = new ccs.ComExtensionData,
            m = b.UserData;
        void 0 !== m && h.setCustomProperty(m);
        h.setActionTag(c);
        a.getComponent("ComExtensionData") && a.removeComponent("ComExtensionData");
        a.addComponent(h);
        (c = b.RotationSkewX) && a.setRotationX(c);
        (c = b.RotationSkewY) && a.setRotationY(c);
        b.FlipX && a.setFlippedX(!0);
        b.FlipY && a.setFlippedY(!0);
        c = b.zOrder;
        null != c && a.setLocalZOrder(c);
        c = d(b.VisibleForFrame, !0);
        a.setVisible(c);
        c = b.Alpha;
        null != c && a.setOpacity(c);
        a.setTag(b.Tag || 0);
        a.setTouchEnabled(b.TouchEnable || !1);
        c = b.CallBackType;
        null != c && a.setCallbackType(c);
        (c = b.CallBackName) && a.setCallbackName(c);
        c = b.Position;
        null != c && a.setPosition(c.X || 0, c.Y || 0);
        h = b.Scale;
        null != h && (c = d(h.ScaleX, 1), h = d(h.ScaleY, 1), a.setScaleX(c), a.setScaleY(h));
        c = b.AnchorPoint;
        null != c && a.setAnchorPoint(c.ScaleX || 0, c.ScaleY || 0);
        c = b.CColor;
        null != c && a.setColor(v(c));
        g(a, b);
        f(a, b)
    };
    var f = function (a, b) {
            var c = b.CallBackType,
                d = b.CallBackName,
                f = function (b) {
                    if ("function" === typeof a[d]) a[d](b)
                };
            "Click" === c ? a.addClickEventListener(f) : "Touch" === c ? a.addTouchEventListener(f) :
                "Event" === c && a.addCCSEventListener(f)
        },
        g = function (a, b) {
            var c = ccui.LayoutComponent.bindLayoutComponent(a);
            if (c) {
                var d = b.PositionPercentXEnable || b.PositionPercentXEnabled || !1,
                    f = b.PositionPercentYEnable || b.PositionPercentYEnabled || !1,
                    g = 0,
                    h = 0,
                    m = b.PrePosition;
                null != m && (g = m.X || 0, h = m.Y || 0);
                var n = b.PercentWidthEnable || b.PercentWidthEnabled || !1,
                    p = b.PercentHeightEnable || b.PercentHeightEnabled || !1,
                    u = 0,
                    v = 0,
                    x = b.PreSize;
                null != m && (u = x.X || 0, v = x.Y || 0);
                var K = b.StretchWidthEnable || !1,
                    N = b.StretchHeightEnable || !1,
                    U = b.HorizontalEdge,
                    m = b.VerticalEdge,
                    x = b.LeftMargin || 0,
                    T = b.RightMargin || 0,
                    P = b.TopMargin || 0,
                    S = b.BottomMargin || 0;
                c.setPositionPercentXEnabled(d);
                c.setPositionPercentYEnabled(f);
                c.setPositionPercentX(g);
                c.setPositionPercentY(h);
                c.setPercentWidthEnabled(n);
                c.setPercentHeightEnabled(p);
                c.setPercentWidth(u);
                c.setPercentHeight(v);
                c.setPercentWidthEnabled(n || p);
                c.setStretchWidthEnabled(K);
                c.setStretchHeightEnabled(N);
                d = ccui.LayoutComponent.horizontalEdge.NONE;
                "LeftEdge" === U ? d = ccui.LayoutComponent.horizontalEdge.LEFT : "RightEdge" ===
                    U ? d = ccui.LayoutComponent.horizontalEdge.RIGHT : "BothEdge" === U && (d = ccui.LayoutComponent.horizontalEdge.CENTER);
                c.setHorizontalEdge(d);
                d = ccui.LayoutComponent.verticalEdge.NONE;
                "TopEdge" === m ? d = ccui.LayoutComponent.verticalEdge.TOP : "BottomEdge" === m ? d = ccui.LayoutComponent.verticalEdge.BOTTOM : "BothEdge" === m && (d = ccui.LayoutComponent.verticalEdge.CENTER);
                c.setVerticalEdge(d);
                c.setTopMargin(P);
                c.setBottomMargin(S);
                c.setLeftMargin(x);
                c.setRightMargin(T);
                c.setVerticalEdge(d);
                c.setTopMargin(P);
                c.setBottomMargin(S);
                c.setLeftMargin(x);
                c.setRightMargin(T)
            }
        },
        h = function (a, b, c, d) {
            2 === a.getBackGroundColorType() ? (c = c || {}, d = d || {}, a.setBackGroundColor(v(c), v(d))) : (b = b || {}, a.setBackGroundColor(v(b)))
        },
        m = function (a, b) {
            a.setBackGroundColorVector(cc.p(b.ScaleX || 0, b.ScaleY || 0))
        };
    c.initPanel = function (a, b) {
        var c = new ccui.Layout;
        this.widgetAttributes(c, a);
        var f = a.ClipAble || !1;
        null != f && c.setClippingEnabled(f);
        f = d(a.ComboBoxIndex, 0);
        c.setBackGroundColorType(f);
        f = d(a.BackColorAlpha, 255);
        null != f && c.setBackGroundColorOpacity(f);
        f = a.Scale9Enable;
        null != f && c.setBackGroundImageScale9Enabled(f);
        var g = d(a.Alpha, 255);
        c.setOpacity(g);
        u(a.FileData, b, function (a, b) {
            c.setBackGroundImage(a, b)
        });
        f ? (c.setBackGroundImageCapInsets(cc.rect(a.Scale9OriginX || 0, a.Scale9OriginY || 0, a.Scale9Width || 0, a.Scale9Height || 0)), x(c, a.Size)) : c.isIgnoreContentAdaptWithSize() || x(c, a.Size);
        h(c, a.SingleColor, a.FirstColor, a.EndColor);
        m(c, a.ColorVector);
        return c
    };
    c.initText = function (a, b) {
        var c = new ccui.Text,
            f = a.TouchScaleChangeAble;
        null != f && c.setTouchScaleChangeEnabled(f);
        f = a.LabelText;
        null != f && c.setString(f);
        f = a.FontSize;
        null != f && c.setFontSize(f);
        f = a.FontName;
        null != f && c.setFontName(f);
        var f = a.AreaWidth,
            g = a.areaHeight;
        f && g && c.setTextAreaSize(cc.size(f, g));
        f = a.HorizontalAlignmentType || "HT_Left";
        switch (f) {
        case "HT_Right":
            f = 2;
            break;
        case "HT_Center":
            f = 1;
            break;
        default:
            f = 0
        }
        c.setTextHorizontalAlignment(f);
        f = a.VerticalAlignmentType || "VT_Top";
        switch (f) {
        case "VT_Bottom":
            f = 2;
            break;
        case "VT_Center":
            f = 1;
            break;
        default:
            f = 0
        }
        c.setTextVerticalAlignment(f);
        f = a.FontResource;
        null != f &&
            (f = f.Path, null != f && (f = cc.sys.isNative ? cc.path.join(cc.loader.resPath, b, f) : (f = f.match(/([^\/]+)\.(\S+)/)) ? f[1] : "", c.setFontName(f)));
        a.OutlineEnabled && (a.OutlineColor && c.enableOutline) && c.enableOutline(v(a.OutlineColor), d(a.OutlineSize, 1));
        a.ShadowEnabled && (a.ShadowColor && c.enableShadow) && c.enableShadow(v(a.ShadowColor), cc.size(d(a.ShadowOffsetX, 2), d(a.ShadowOffsetY, -2)), a.ShadowBlurRadius || 0);
        f = a.IsCustomSize;
        null != f && c.ignoreContentAdaptWithSize(!f);
        c.setUnifySizeEnabled(!1);
        f = a.CColor;
        a.CColor =
            null;
        c.setTextColor(v(f));
        this.widgetAttributes(c, a, c.isIgnoreContentAdaptWithSize());
        a.CColor = f;
        return c
    };
    c.initButton = function (a, b) {
        var c = new ccui.Button;
        u(a.NormalFileData, b, function (a, b) {
            c.loadTextureNormal(a, b)
        });
        u(a.PressedFileData, b, function (a, b) {
            c.loadTexturePressed(a, b)
        });
        u(a.DisabledFileData, b, function (a, b) {
            c.loadTextureDisabled(a, b)
        });
        var f = d(a.Scale9Enable, !1);
        f && c.setScale9Enabled(f);
        var g = a.ButtonText;
        null != g && c.setTitleText(g);
        g = a.FontSize;
        null != g && c.setTitleFontSize(g);
        g = a.FontName;
        null != g && c.setTitleFontName(g);
        g = a.TextColor;
        null != g && c.setTitleColor(v(g));
        g = d(a.DisplayState, !0);
        c.setBright(g);
        c.setEnabled(g);
        g = a.FontResource;
        null != g && (g = g.Path, null != g && (g = cc.sys.isNative ? cc.path.join(cc.loader.resPath, b, g) : (g = g.match(/([^\/]+)\.(\S+)/)) ? g[1] : "", c.setTitleFontName(g)));
        (g = c.getTitleRenderer()) && (a.ShadowEnabled && a.ShadowColor && g.enableShadow) && g.enableShadow(v(a.ShadowColor), cc.size(d(a.ShadowOffsetX, 2), d(a.ShadowOffsetY, -2)), a.ShadowBlurRadius || 0);
        g && (a.OutlineEnabled && a.OutlineColor &&
            g.enableStroke) && g.enableStroke(v(a.OutlineColor), d(a.OutlineSize, 1));
        this.widgetAttributes(c, a);
        f && (c.setUnifySizeEnabled(!1), c.ignoreContentAdaptWithSize(!1), f = cc.rect(a.Scale9OriginX || 0, a.Scale9OriginY || 0, a.Scale9Width || 0, a.Scale9Height || 0), c.setCapInsets(f));
        x(c, a.Size);
        return c
    };
    c.initCheckBox = function (a, b) {
        var c = new ccui.CheckBox;
        this.widgetAttributes(c, a);
        [{
            name: "NormalBackFileData",
            handle: c.loadTextureBackGround
        }, {
            name: "PressedBackFileData",
            handle: c.loadTextureBackGroundSelected
        }, {
            name: "NodeNormalFileData",
            handle: c.loadTextureFrontCross
        }, {
            name: "DisableBackFileData",
            handle: c.loadTextureBackGroundDisabled
        }, {
            name: "NodeDisableFileData",
            handle: c.loadTextureFrontCrossDisabled
        }].forEach(function (d) {
            u(a[d.name], b, function (a, b) {
                d.handle.call(c, a, b)
            })
        });
        var f = d(a.CheckedState, !1);
        c.setSelected(f);
        f = d(a.DisplayState, !0);
        c.setBright(f);
        c.setEnabled(f);
        return c
    };
    c.initScrollView = function (a, b) {
        var c = new ccui.ScrollView;
        this.widgetAttributes(c, a);
        u(a.FileData, b, function (a, b) {
            c.setBackGroundImage(a, b)
        });
        c.setClippingEnabled(a.ClipAble ||
            !1);
        var f = d(a.ComboBoxIndex, 0);
        c.setBackGroundColorType(f);
        f = a.BackColorAlpha;
        null != f && c.setBackGroundColorOpacity(f);
        a.Scale9Enable ? (c.setBackGroundImageScale9Enabled(!0), c.setBackGroundImageCapInsets(cc.rect(a.Scale9OriginX || 0, a.Scale9OriginY || 0, a.Scale9Width || 0, a.Scale9Height || 0)), x(c, a.Size)) : c.isIgnoreContentAdaptWithSize() || x(c, a.Size);
        h(c, a.SingleColor, a.FirstColor, a.EndColor);
        m(c, a.ColorVector);
        f = a.InnerNodeSize;
        f = cc.size(f.Width || 0, f.Height || 0);
        c.setInnerContainerSize(f);
        f = 0;
        "Vertical" ===
        a.ScrollDirectionType && (f = 1);
        "Horizontal" === a.ScrollDirectionType && (f = 2);
        "Vertical_Horizontal" === a.ScrollDirectionType && (f = 3);
        c.setDirection(f);
        f = d(a.IsBounceEnabled, !1);
        c.setBounceEnabled(f);
        return c
    };
    c.initImageView = function (a, b) {
        var c = new ccui.ImageView;
        u(a.FileData, b, function (a, b) {
            c.loadTexture(a, b)
        });
        u(a.ImageFileData, b, function (a, b) {
            c.loadTexture(a, b)
        });
        a.Scale9Enable ? (c.setScale9Enabled(!0), c.setUnifySizeEnabled(!1), c.ignoreContentAdaptWithSize(!1), c.setCapInsets(cc.rect(a.Scale9OriginX || 0,
            a.Scale9OriginY || 0, a.Scale9Width || 0, a.Scale9Height || 0))) : x(c, a.Size);
        this.widgetAttributes(c, a);
        return c
    };
    c.initLoadingBar = function (a, b) {
        var c = new ccui.LoadingBar;
        this.widgetAttributes(c, a);
        u(a.ImageFileData, b, function (a, b) {
            c.loadTexture(a, b)
        });
        c.setDirection("Right_To_Left" === a.ProgressType ? 1 : 0);
        var f = d(a.ProgressInfo, 80);
        null != f && c.setPercent(f);
        return c
    };
    c.initSlider = function (a, b) {
        var c = new ccui.Slider,
            f = cc.loader;
        this.widgetAttributes(c, a);
        [{
            name: "BackGroundData",
            handle: c.loadBarTexture
        }, {
            name: "BallNormalData",
            handle: c.loadSlidBallTextureNormal
        }, {
            name: "BallPressedData",
            handle: c.loadSlidBallTexturePressed
        }, {
            name: "BallDisabledData",
            handle: c.loadSlidBallTextureDisabled
        }, {
            name: "ProgressBarData",
            handle: c.loadProgressBarTexture
        }].forEach(function (d) {
            u(a[d.name], b, function (a, b) {
                0 === b && !f.getRes(a) && cc.log("%s need to be preloaded", a);
                d.handle.call(c, a, b)
            })
        });
        c.setPercent(a.PercentInfo || 0);
        var g = d(a.DisplayState, !0);
        c.setBright(g);
        c.setEnabled(g);
        return c
    };
    c.initPageView = function (a, b) {
        var c = new ccui.PageView;
        this.widgetAttributes(c,
            a);
        u(a.FileData, b, function (a, b) {
            c.setBackGroundImage(a, b)
        });
        c.setClippingEnabled(a.ClipAble || !1);
        a.Scale9Enable && (c.setBackGroundImageScale9Enabled(!0), c.setBackGroundImageCapInsets(cc.rect(a.Scale9OriginX || 0, a.Scale9OriginY || 0, a.Scale9Width || 0, a.Scale9Height || 0)));
        var f = d(a.ComboBoxIndex, 0);
        c.setBackGroundColorType(f);
        h(c, a.SingleColor, a.FirstColor, a.EndColor);
        m(c, a.ColorVector);
        f = a.BackColorAlpha;
        null != f && c.setBackGroundColorOpacity(f);
        x(c, a.Size);
        return c
    };
    c.initListView = function (a, b) {
        var c = new ccui.ListView;
        this.widgetAttributes(c, a);
        u(a.FileData, b, function (a, b) {
            c.setBackGroundImage(a, b)
        });
        c.setClippingEnabled(a.ClipAble || !1);
        var f = d(a.ComboBoxIndex, 0);
        c.setBackGroundColorType(f);
        f = d(a.BackColorAlpha, 255);
        a.Scale9Enable && (c.setBackGroundImageScale9Enabled(!0), c.setBackGroundImageCapInsets(cc.rect(a.Scale9OriginX || 0, a.Scale9OriginY || 0, a.Scale9Width || 0, a.Scale9Height || 0)));
        var g = d(a.DirectionType, ccui.ListView.DIR_HORIZONTAL),
            n = d(a.VerticalType, "Align_Left"),
            p = d(a.HorizontalType, "Align_Top");
        g ? "Vertical" ===
            g && (c.setDirection(ccui.ScrollView.DIR_VERTICAL), "" === p ? c.setGravity(ccui.ListView.GRAVITY_LEFT) : "Align_Right" === p ? c.setGravity(ccui.ListView.GRAVITY_RIGHT) : "Align_HorizontalCenter" === p && c.setGravity(ccui.ListView.GRAVITY_CENTER_HORIZONTAL)) : (c.setDirection(ccui.ScrollView.DIR_HORIZONTAL), "Align_Bottom" === n ? c.setGravity(ccui.ListView.GRAVITY_BOTTOM) : "Align_VerticalCenter" === n ? c.setGravity(ccui.ListView.GRAVITY_CENTER_VERTICAL) : c.setGravity(ccui.ListView.GRAVITY_TOP));
        g = d(a.IsBounceEnabled, !1);
        c.setBounceEnabled(g);
        c.setItemsMargin(a.ItemMargin || 0);
        g = a.InnerNodeSize;
        null != g && c.setInnerContainerSize(cc.size(g.Widget || 0, g.Height || 0));
        h(c, a.SingleColor, a.FirstColor, a.EndColor);
        m(c, a.ColorVector);
        null != f && c.setBackGroundColorOpacity(f);
        x(c, a.Size);
        return c
    };
    c.initTextAtlas = function (a, b) {
        var c = new ccui.TextAtlas,
            d = a.LabelText,
            f = a.CharWidth,
            g = a.CharHeight,
            h = a.StartChar;
        u(a.LabelAtlasFileImage_CNB, b, function (a, b) {
            cc.loader.getRes(a) || cc.log("%s need to be preloaded", a);
            0 === b && c.setProperty(d, a, f, g, h)
        });
        this.widgetAttributes(c,
            a);
        c.ignoreContentAdaptWithSize(!0);
        return c
    };
    c.initTextBMFont = function (a, b) {
        var c = new ccui.TextBMFont;
        this.widgetAttributes(c, a);
        u(a.LabelBMFontFile_CNB, b, function (a, b) {
            cc.loader.getRes(a) || cc.log("%s need to be pre loaded", a);
            c.setFntFile(a)
        });
        c.setString(a.LabelText);
        c.ignoreContentAdaptWithSize(!0);
        return c
    };
    c.initTextField = function (a, b) {
        var c = new ccui.TextField;
        a.PasswordEnable && (c.setPasswordEnabled(!0), c.setPasswordStyleText(a.PasswordStyleText || "*"));
        var d = a.PlaceHolderText;
        null != d && c.setPlaceHolder(d);
        d = a.FontSize;
        null != d && c.setFontSize(d);
        d = a.FontName;
        null != d && c.setFontName(d);
        a.MaxLengthEnable && (c.setMaxLengthEnabled(!0), c.setMaxLength(a.MaxLengthText || 0));
        this.widgetAttributes(c, a);
        d = a.LabelText;
        null != d && c.setString(d);
        d = a.FontResource;
        null != d && (d = d.Path, null != d && (d = cc.sys.isNative ? cc.path.join(cc.loader.resPath, b, d) : (d = d.match(/([^\/]+)\.(\S+)/)) ? d[1] : "", c.setFontName(d)));
        c.setUnifySizeEnabled(!1);
        c.ignoreContentAdaptWithSize(!1);
        d = a.CColor;
        null != d && c.setTextColor(v(d));
        c.isIgnoreContentAdaptWithSize() ||
            (x(c, a.Size), cc.sys.isNative && c.getVirtualRenderer().setLineBreakWithoutSpace(!0));
        return c
    };
    c.initSimpleAudio = function (a, b) {
        var c = new ccs.ComAudio;
        c.setLoop(a.Loop || !1);
        u(a.FileData, b, function (a, b) {
            c.setFile(a)
        })
    };
    c.initGameMap = function (a, b) {
        var d = null;
        u(a.FileData, b, function (b, f) {
            0 === f && (d = new cc.TMXTiledMap(b));
            c.generalAttributes(d, a)
        });
        return d
    };
    c.initProjectNode = function (a, b) {
        var d = a.FileData;
        if (null != d && d.Path) {
            d = b + d.Path;
            if (cc.loader.getRes(d)) {
                d = ccs.load(d, b);
                c.generalAttributes(d.node, a);
                if (d.action && d.node) {
                    d.action.tag = d.node.tag;
                    var f = a.InnerActionSpeed;
                    void 0 !== f && d.action.setTimeSpeed(f);
                    d.node.runAction(d.action);
                    d.action.gotoFrameAndPause(0)
                }
                return d.node
            }
            cc.log("%s need to be preloaded", d)
        }
    };
    var n = function (a) {
        return !a ? "" : (a = a.match(/([^\/]+)\.[^\/]+$/)) && a[1] ? a[1] : ""
    };
    c.initArmature = function (a, b) {
        var d = new ccs.Armature,
            f = a.IsLoop,
            g = a.IsAutoPlay,
            h = a.CurrentAnimationName;
        u(a.FileData, b, function (a, b) {
            var c, m, p = cc.loader.getRes(a);
            p ? (c = p.config_file_path, m = p.config_png_path, c.forEach(function (a,
                b) {
                m[b] && cc.spriteFrameCache.addSpriteFrames(a, m[b])
            })) : cc.log("%s need to be preloaded", a);
            ccs.armatureDataManager.addArmatureFileInfo(a);
            d.init(n(a));
            g ? d.getAnimation().play(h, -1, f) : (d.getAnimation().play(h), d.getAnimation().gotoAndPause(0))
        });
        delete a.AnchorPoint;
        delete a.Size;
        c.generalAttributes(d, a);
        d.setColor(v(a.CColor));
        return d
    };
    c.initBoneNode = function (a, b) {
        var d = new ccs.BoneNode,
            f = a.Length;
        void 0 !== f && d.setDebugDrawLength(f);
        (f = a.BlendFunc) && (void 0 !== f.Src && void 0 !== f.Dst) && d.setBlendFunc(new cc.BlendFunc(f.Src,
            f.Dst));
        c.generalAttributes(d, a);
        (f = a.CColor) && (void 0 !== f.R || void 0 !== f.G || void 0 !== f.B) && d.setColor(v(f));
        return d
    };
    c.initSkeletonNode = function (a) {
        var b = new ccs.SkeletonNode;
        c.generalAttributes(b, a);
        (a = a.CColor) && (void 0 !== a.R || void 0 !== a.G || void 0 !== a.B) && b.setColor(v(a));
        return b
    };
    var p = {},
        u = function (a, b, c) {
            if (null != a) {
                var d = a.Path,
                    f;
                f = "Default" === a.Type || "Normal" === a.Type ? 0 : 1;
                if (a = a.Plist) cc.loader.getRes(b + a) ? (p[b + a] = !0, cc.spriteFrameCache.addSpriteFrames(b + a)) : !p[b + a] && !cc.spriteFrameCache.getSpriteFrame(d) &&
                    cc.log("%s need to be preloaded", b + a);
                0 !== f ? cc.spriteFrameCache.getSpriteFrame(d) ? c(d, f) : cc.log("failed to get spriteFrame: %s", d) : c(b + d, f)
            }
        },
        v = function (a) {
            if (a) return cc.color(null != a.R ? a.R : 255, null != a.G ? a.G : 255, null != a.B ? a.B : 255, null != a.A ? a.A : 255)
        },
        x = function (a, b) {
            var c = b.X || 0,
                d = b.Y || 0;
            b && a.setContentSize(cc.size(c, d))
        };
    [{
            name: "SingleNodeObjectData",
            handle: c.initSingleNode
        }, {
            name: "NodeObjectData",
            handle: c.initSingleNode
        }, {
            name: "LayerObjectData",
            handle: c.initSingleNode
        }, {
            name: "GameNodeObjectData",
            handle: c.initSingleNode
        }, {
            name: "GameLayerObjectData",
            handle: c.initSingleNode
        }, {
            name: "SpriteObjectData",
            handle: c.initSprite
        }, {
            name: "ParticleObjectData",
            handle: c.initParticle
        }, {
            name: "PanelObjectData",
            handle: c.initPanel
        }, {
            name: "TextObjectData",
            handle: c.initText
        }, {
            name: "ButtonObjectData",
            handle: c.initButton
        }, {
            name: "CheckBoxObjectData",
            handle: c.initCheckBox
        }, {
            name: "ScrollViewObjectData",
            handle: c.initScrollView
        }, {
            name: "ImageViewObjectData",
            handle: c.initImageView
        }, {
            name: "LoadingBarObjectData",
            handle: c.initLoadingBar
        },
        {
            name: "SliderObjectData",
            handle: c.initSlider
        }, {
            name: "PageViewObjectData",
            handle: c.initPageView
        }, {
            name: "ListViewObjectData",
            handle: c.initListView
        }, {
            name: "TextAtlasObjectData",
            handle: c.initTextAtlas
        }, {
            name: "TextBMFontObjectData",
            handle: c.initTextBMFont
        }, {
            name: "TextFieldObjectData",
            handle: c.initTextField
        }, {
            name: "SimpleAudioObjectData",
            handle: c.initSimpleAudio
        }, {
            name: "GameMapObjectData",
            handle: c.initGameMap
        }, {
            name: "ProjectNodeObjectData",
            handle: c.initProjectNode
        }, {
            name: "ArmatureNodeObjectData",
            handle: c.initArmature
        },
        {
            name: "BoneNodeObjectData",
            handle: c.initBoneNode
        }, {
            name: "SkeletonNodeObjectData",
            handle: c.initSkeletonNode
        }
    ].forEach(function (a) {
        c.registerParser(a.name, function (b, c) {
            var d = a.handle.call(this, b, c);
            this.parseChild(d, b.Children, c);
            return d
        })
    });
    a.registerParser("timeline", "2.*", c);
    a.registerParser("timeline", "*", c)
})(ccs._load, ccs._parser);
(function () {
    ccs.uiReader = {
        _fileDesignSizes: {},
        widgetFromJsonFile: function (a) {
            var c = cc.loader.getRes(a);
            c && (this._fileDesignSizes[a] = cc.size(c.designWidth || 0, c.designHeight || 0));
            var c = c.Version || c.version,
                d = ccs.uiReader.getVersionInteger(c);
            return !c || 1700 <= d ? (cc.warn("Not supported file types, Please try use the ccs.load"), null) : ccs._load(a, "ccui")
        },
        registerTypeAndCallBack: function (a, c, d, f) {
            var g = ccs._load.getParser("ccui")["*"],
                h = f.bind(d);
            g.registerParser(a, function (f, g) {
                var p = new c,
                    u = f.options;
                d.setPropsFromJsonDictionary && d.setPropsFromJsonDictionary(p, u);
                this.generalAttributes(p, u);
                var v = u.customProperty,
                    v = v ? JSON.parse(v) : {};
                h(a, p, v);
                this.colorAttributes(p, u);
                this.anchorPointAttributes(p, u);
                this.parseChild.call(this, p, f, g);
                return p
            })
        },
        getVersionInteger: function (a) {
            if (!a || "string" !== typeof a) return 0;
            a = a.split(".");
            if (4 !== a.length) return 0;
            var c = 0;
            a.forEach(function (a, b) {
                c += a * Math.pow(10, 3 - b)
            });
            return c
        },
        storeFileDesignSize: function (a, c) {
            this._fileDesignSizes[a] = c
        },
        getFileDesignSize: function (a) {
            return this._fileDesignSizes[a]
        },
        getFilePath: function () {
            return this._filePath
        },
        setFilePath: function (a) {
            this._filePath = a
        },
        getParseObjectMap: function () {
            return ccs._load.getParser("ccui")["*"].parsers
        },
        getParseCallBackMap: function () {
            return ccs._load.getParser("ccui")["*"].parsers
        },
        clear: function () {}
    };
    var a = ccs._load.getParser("ccui")["*"];
    ccs.imageViewReader = {
        setPropsFromJsonDictionary: a.ImageViewAttributes
    };
    ccs.buttonReader = {
        setPropsFromJsonDictionary: a.ButtonAttributes
    };
    ccs.checkBoxReader = {
        setPropsFromJsonDictionary: a.CheckBoxAttributes
    };
    ccs.labelAtlasReader = {
        setPropsFromJsonDictionary: a.TextAtlasAttributes
    };
    ccs.labelBMFontReader = {
        setPropsFromJsonDictionary: a.TextBMFontAttributes
    };
    ccs.labelReader = {
        setPropsFromJsonDictionary: a.TextAttributes
    };
    ccs.layoutReader = {
        setPropsFromJsonDictionary: a.LayoutAttributes
    };
    ccs.listViewReader = {
        setPropsFromJsonDictionary: a.ListViewAttributes
    };
    ccs.loadingBarReader = {
        setPropsFromJsonDictionary: a.LoadingBarAttributes
    };
    ccs.pageViewReader = {
        setPropsFromJsonDictionary: a.PageViewAttributes
    };
    ccs.scrollViewReader = {
        setPropsFromJsonDictionary: a.ScrollViewAttributes
    };
    ccs.sliderReader = {
        setPropsFromJsonDictionary: a.SliderAttributes
    };
    ccs.textFieldReader = {
        setPropsFromJsonDictionary: a.TextFieldAttributes
    }
})();
(function () {
    ccs.sceneReader = {
        _node: null,
        createNodeWithSceneFile: function (a) {
            return this._node = a = ccs._load(a, "scene")
        },
        getNodeByTag: function (a) {
            return null == this._node ? null : this._node.getTag() === a ? this._node : this._nodeByTag(this._node, a)
        },
        _nodeByTag: function (a, b) {
            if (null == a) return null;
            for (var c = null, d = a.getChildren(), f = 0; f < d.length && !((c = d[f]) && c.getTag() === b) && !(c = this._nodeByTag(c, b)); f++);
            return c
        },
        version: function () {
            return "*"
        },
        setTarget: function () {},
        clear: function () {
            ccs.triggerManager.removeAll();
            cc.audioEngine.end()
        }
    }
})();
(function () {
    function a(a) {
        return function (b, c, d, f) {
            c = B(c, f, 4);
            var g = !M(b) && w.keys(b),
                h = (g || b).length,
                m = 0 < a ? 0 : h - 1;
            3 > arguments.length && (d = b[g ? g[m] : m], m += a);
            for (var n = c, p = d; 0 <= m && m < h; m += a) var t = g ? g[m] : m,
                p = n(p, b[t], t, b);
            return p
        }
    }

    function b(a) {
        return function (b, c, d) {
            c = F(c, d);
            d = H(b);
            for (var f = 0 < a ? 0 : d - 1; 0 <= f && f < d; f += a)
                if (c(b[f], f, b)) return f;
            return -1
        }
    }

    function c(a, b, c) {
        return function (d, f, g) {
            var h = 0,
                m = H(d);
            if ("number" == typeof g) 0 < a ? h = 0 <= g ? g : Math.max(g + m, h) : m = 0 <= g ? Math.min(g + 1, m) : g + m + 1;
            else if (c && g && m) return g =
                c(d, f), d[g] === f ? g : -1;
            if (f !== f) return g = b(p.call(d, h, m), w.isNaN), 0 <= g ? g + h : -1;
            for (g = 0 < a ? h : m - 1; 0 <= g && g < m; g += a)
                if (d[g] === f) return g;
            return -1
        }
    }

    function d(a, b) {
        var c = P.length,
            d = a.constructor,
            d = w.isFunction(d) && d.prototype || m,
            f = "constructor";
        for (w.has(a, f) && !w.contains(b, f) && b.push(f); c--;) f = P[c], f in a && (a[f] !== d[f] && !w.contains(b, f)) && b.push(f)
    }
    var f = this,
        g = f._,
        h = Array.prototype,
        m = Object.prototype,
        n = h.push,
        p = h.slice,
        u = m.toString,
        v = m.hasOwnProperty,
        x = Array.isArray,
        y = Object.keys,
        z = Function.prototype.bind,
        t = Object.create,
        A = function () {},
        w = function (a) {
            if (a instanceof w) return a;
            if (!(this instanceof w)) return new w(a);
            this._wrapped = a
        };
    "undefined" !== typeof exports ? ("undefined" !== typeof module && module.exports && (exports = module.exports = w), exports._ = w) : f._ = w;
    w.VERSION = "1.8.3";
    var B = function (a, b, c) {
            if (void 0 === b) return a;
            switch (null == c ? 3 : c) {
            case 1:
                return function (c) {
                    return a.call(b, c)
                };
            case 2:
                return function (c, d) {
                    return a.call(b, c, d)
                };
            case 3:
                return function (c, d, f) {
                    return a.call(b, c, d, f)
                };
            case 4:
                return function (c,
                    d, f, g) {
                    return a.call(b, c, d, f, g)
                }
            }
            return function () {
                return a.apply(b, arguments)
            }
        },
        F = function (a, b, c) {
            return null == a ? w.identity : w.isFunction(a) ? B(a, b, c) : w.isObject(a) ? w.matcher(a) : w.property(a)
        };
    w.iteratee = function (a, b) {
        return F(a, b, Infinity)
    };
    var C = function (a, b) {
            return function (c) {
                var d = arguments.length;
                if (2 > d || null == c) return c;
                for (var f = 1; f < d; f++)
                    for (var g = arguments[f], h = a(g), m = h.length, n = 0; n < m; n++) {
                        var p = h[n];
                        if (!b || void 0 === c[p]) c[p] = g[p]
                    }
                return c
            }
        },
        D = function (a) {
            if (!w.isObject(a)) return {};
            if (t) return t(a);
            A.prototype = a;
            a = new A;
            A.prototype = null;
            return a
        },
        E = function (a) {
            return function (b) {
                return null == b ? void 0 : b[a]
            }
        },
        G = Math.pow(2, 53) - 1,
        H = E("length"),
        M = function (a) {
            a = H(a);
            return "number" == typeof a && 0 <= a && a <= G
        };
    w.each = w.forEach = function (a, b, c) {
        b = B(b, c);
        var d;
        if (M(a)) {
            c = 0;
            for (d = a.length; c < d; c++) b(a[c], c, a)
        } else {
            var f = w.keys(a);
            c = 0;
            for (d = f.length; c < d; c++) b(a[f[c]], f[c], a)
        }
        return a
    };
    w.map = w.collect = function (a, b, c) {
        b = F(b, c);
        c = !M(a) && w.keys(a);
        for (var d = (c || a).length, f = Array(d), g = 0; g < d; g++) {
            var h = c ? c[g] : g;
            f[g] =
                b(a[h], h, a)
        }
        return f
    };
    w.reduce = w.foldl = w.inject = a(1);
    w.reduceRight = w.foldr = a(-1);
    w.find = w.detect = function (a, b, c) {
        b = M(a) ? w.findIndex(a, b, c) : w.findKey(a, b, c);
        if (void 0 !== b && -1 !== b) return a[b]
    };
    w.filter = w.select = function (a, b, c) {
        var d = [];
        b = F(b, c);
        w.each(a, function (a, c, f) {
            b(a, c, f) && d.push(a)
        });
        return d
    };
    w.reject = function (a, b, c) {
        return w.filter(a, w.negate(F(b)), c)
    };
    w.every = w.all = function (a, b, c) {
        b = F(b, c);
        c = !M(a) && w.keys(a);
        for (var d = (c || a).length, f = 0; f < d; f++) {
            var g = c ? c[f] : f;
            if (!b(a[g], g, a)) return !1
        }
        return !0
    };
    w.some = w.any = function (a, b, c) {
        b = F(b, c);
        c = !M(a) && w.keys(a);
        for (var d = (c || a).length, f = 0; f < d; f++) {
            var g = c ? c[f] : f;
            if (b(a[g], g, a)) return !0
        }
        return !1
    };
    w.contains = w.includes = w.include = function (a, b, c, d) {
        M(a) || (a = w.values(a));
        if ("number" != typeof c || d) c = 0;
        return 0 <= w.indexOf(a, b, c)
    };
    w.invoke = function (a, b) {
        var c = p.call(arguments, 2),
            d = w.isFunction(b);
        return w.map(a, function (a) {
            var f = d ? b : a[b];
            return null == f ? f : f.apply(a, c)
        })
    };
    w.pluck = function (a, b) {
        return w.map(a, w.property(b))
    };
    w.where = function (a, b) {
        return w.filter(a,
            w.matcher(b))
    };
    w.findWhere = function (a, b) {
        return w.find(a, w.matcher(b))
    };
    w.max = function (a, b, c) {
        var d = -Infinity,
            f = -Infinity,
            g;
        if (null == b && null != a) {
            a = M(a) ? a : w.values(a);
            for (var h = 0, m = a.length; h < m; h++) c = a[h], c > d && (d = c)
        } else b = F(b, c), w.each(a, function (a, c, h) {
            g = b(a, c, h);
            if (g > f || -Infinity === g && -Infinity === d) d = a, f = g
        });
        return d
    };
    w.min = function (a, b, c) {
        var d = Infinity,
            f = Infinity,
            g;
        if (null == b && null != a) {
            a = M(a) ? a : w.values(a);
            for (var h = 0, m = a.length; h < m; h++) c = a[h], c < d && (d = c)
        } else b = F(b, c), w.each(a, function (a, c, h) {
            g =
                b(a, c, h);
            if (g < f || Infinity === g && Infinity === d) d = a, f = g
        });
        return d
    };
    w.shuffle = function (a) {
        a = M(a) ? a : w.values(a);
        for (var b = a.length, c = Array(b), d = 0, f; d < b; d++) f = w.random(0, d), f !== d && (c[d] = c[f]), c[f] = a[d];
        return c
    };
    w.sample = function (a, b, c) {
        return null == b || c ? (M(a) || (a = w.values(a)), a[w.random(a.length - 1)]) : w.shuffle(a).slice(0, Math.max(0, b))
    };
    w.sortBy = function (a, b, c) {
        b = F(b, c);
        return w.pluck(w.map(a, function (a, c, d) {
            return {
                value: a,
                index: c,
                criteria: b(a, c, d)
            }
        }).sort(function (a, b) {
            var c = a.criteria,
                d = b.criteria;
            if (c !==
                d) {
                if (c > d || void 0 === c) return 1;
                if (c < d || void 0 === d) return -1
            }
            return a.index - b.index
        }), "value")
    };
    var K = function (a) {
        return function (b, c, d) {
            var f = {};
            c = F(c, d);
            w.each(b, function (d, g) {
                var h = c(d, g, b);
                a(f, d, h)
            });
            return f
        }
    };
    w.groupBy = K(function (a, b, c) {
        w.has(a, c) ? a[c].push(b) : a[c] = [b]
    });
    w.indexBy = K(function (a, b, c) {
        a[c] = b
    });
    w.countBy = K(function (a, b, c) {
        w.has(a, c) ? a[c]++ : a[c] = 1
    });
    w.toArray = function (a) {
        return !a ? [] : w.isArray(a) ? p.call(a) : M(a) ? w.map(a, w.identity) : w.values(a)
    };
    w.size = function (a) {
        return null == a ? 0 : M(a) ?
            a.length : w.keys(a).length
    };
    w.partition = function (a, b, c) {
        b = F(b, c);
        var d = [],
            f = [];
        w.each(a, function (a, c, g) {
            (b(a, c, g) ? d : f).push(a)
        });
        return [d, f]
    };
    w.first = w.head = w.take = function (a, b, c) {
        return null == a ? void 0 : null == b || c ? a[0] : w.initial(a, a.length - b)
    };
    w.initial = function (a, b, c) {
        return p.call(a, 0, Math.max(0, a.length - (null == b || c ? 1 : b)))
    };
    w.last = function (a, b, c) {
        return null == a ? void 0 : null == b || c ? a[a.length - 1] : w.rest(a, Math.max(0, a.length - b))
    };
    w.rest = w.tail = w.drop = function (a, b, c) {
        return p.call(a, null == b || c ? 1 : b)
    };
    w.compact =
        function (a) {
            return w.filter(a, w.identity)
        };
    var N = function (a, b, c, d) {
        var f = [],
            g = 0;
        d = d || 0;
        for (var h = H(a); d < h; d++) {
            var m = a[d];
            if (M(m) && (w.isArray(m) || w.isArguments(m))) {
                b || (m = N(m, b, c));
                var n = 0,
                    p = m.length;
                for (f.length += p; n < p;) f[g++] = m[n++]
            } else c || (f[g++] = m)
        }
        return f
    };
    w.flatten = function (a, b) {
        return N(a, b, !1)
    };
    w.without = function (a) {
        return w.difference(a, p.call(arguments, 1))
    };
    w.uniq = w.unique = function (a, b, c, d) {
        w.isBoolean(b) || (d = c, c = b, b = !1);
        null != c && (c = F(c, d));
        d = [];
        for (var f = [], g = 0, h = H(a); g < h; g++) {
            var m =
                a[g],
                n = c ? c(m, g, a) : m;
            b ? ((!g || f !== n) && d.push(m), f = n) : c ? w.contains(f, n) || (f.push(n), d.push(m)) : w.contains(d, m) || d.push(m)
        }
        return d
    };
    w.union = function () {
        return w.uniq(N(arguments, !0, !0))
    };
    w.intersection = function (a) {
        for (var b = [], c = arguments.length, d = 0, f = H(a); d < f; d++) {
            var g = a[d];
            if (!w.contains(b, g)) {
                for (var h = 1; h < c && w.contains(arguments[h], g); h++);
                h === c && b.push(g)
            }
        }
        return b
    };
    w.difference = function (a) {
        var b = N(arguments, !0, !0, 1);
        return w.filter(a, function (a) {
            return !w.contains(b, a)
        })
    };
    w.zip = function () {
        return w.unzip(arguments)
    };
    w.unzip = function (a) {
        for (var b = a && w.max(a, H).length || 0, c = Array(b), d = 0; d < b; d++) c[d] = w.pluck(a, d);
        return c
    };
    w.object = function (a, b) {
        for (var c = {}, d = 0, f = H(a); d < f; d++) b ? c[a[d]] = b[d] : c[a[d][0]] = a[d][1];
        return c
    };
    w.findIndex = b(1);
    w.findLastIndex = b(-1);
    w.sortedIndex = function (a, b, c, d) {
        c = F(c, d, 1);
        b = c(b);
        d = 0;
        for (var f = H(a); d < f;) {
            var g = Math.floor((d + f) / 2);
            c(a[g]) < b ? d = g + 1 : f = g
        }
        return d
    };
    w.indexOf = c(1, w.findIndex, w.sortedIndex);
    w.lastIndexOf = c(-1, w.findLastIndex);
    w.range = function (a, b, c) {
        null == b && (b = a || 0, a = 0);
        c = c ||
            1;
        b = Math.max(Math.ceil((b - a) / c), 0);
        for (var d = Array(b), f = 0; f < b; f++, a += c) d[f] = a;
        return d
    };
    var U = function (a, b, c, d, f) {
        if (!(d instanceof b)) return a.apply(c, f);
        b = D(a.prototype);
        a = a.apply(b, f);
        return w.isObject(a) ? a : b
    };
    w.bind = function (a, b) {
        if (z && a.bind === z) return z.apply(a, p.call(arguments, 1));
        if (!w.isFunction(a)) throw new TypeError("Bind must be called on a function");
        var c = p.call(arguments, 2),
            d = function () {
                return U(a, d, b, this, c.concat(p.call(arguments)))
            };
        return d
    };
    w.partial = function (a) {
        var b = p.call(arguments,
                1),
            c = function () {
                for (var d = 0, f = b.length, g = Array(f), h = 0; h < f; h++) g[h] = b[h] === w ? arguments[d++] : b[h];
                for (; d < arguments.length;) g.push(arguments[d++]);
                return U(a, c, this, this, g)
            };
        return c
    };
    w.bindAll = function (a) {
        var b, c = arguments.length,
            d;
        if (1 >= c) throw Error("bindAll must be passed function names");
        for (b = 1; b < c; b++) d = arguments[b], a[d] = w.bind(a[d], a);
        return a
    };
    w.memoize = function (a, b) {
        var c = function (d) {
            var f = c.cache,
                g = "" + (b ? b.apply(this, arguments) : d);
            w.has(f, g) || (f[g] = a.apply(this, arguments));
            return f[g]
        };
        c.cache = {};
        return c
    };
    w.delay = function (a, b) {
        var c = p.call(arguments, 2);
        return setTimeout(function () {
            return a.apply(null, c)
        }, b)
    };
    w.defer = w.partial(w.delay, w, 1);
    w.throttle = function (a, b, c) {
        var d, f, g, h = null,
            m = 0;
        c || (c = {});
        var n = function () {
            m = !1 === c.leading ? 0 : w.now();
            h = null;
            g = a.apply(d, f);
            h || (d = f = null)
        };
        return function () {
            var p = w.now();
            !m && !1 === c.leading && (m = p);
            var t = b - (p - m);
            d = this;
            f = arguments;
            0 >= t || t > b ? (h && (clearTimeout(h), h = null), m = p, g = a.apply(d, f), h || (d = f = null)) : !h && !1 !== c.trailing && (h = setTimeout(n, t));
            return g
        }
    };
    w.debounce = function (a, b, c) {
        var d, f, g, h, m, n = function () {
            var p = w.now() - h;
            p < b && 0 <= p ? d = setTimeout(n, b - p) : (d = null, c || (m = a.apply(g, f), d || (g = f = null)))
        };
        return function () {
            g = this;
            f = arguments;
            h = w.now();
            var p = c && !d;
            d || (d = setTimeout(n, b));
            p && (m = a.apply(g, f), g = f = null);
            return m
        }
    };
    w.wrap = function (a, b) {
        return w.partial(b, a)
    };
    w.negate = function (a) {
        return function () {
            return !a.apply(this, arguments)
        }
    };
    w.compose = function () {
        var a = arguments,
            b = a.length - 1;
        return function () {
            for (var c = b, d = a[b].apply(this, arguments); c--;) d = a[c].call(this,
                d);
            return d
        }
    };
    w.after = function (a, b) {
        return function () {
            if (1 > --a) return b.apply(this, arguments)
        }
    };
    w.before = function (a, b) {
        var c;
        return function () {
            0 < --a && (c = b.apply(this, arguments));
            1 >= a && (b = null);
            return c
        }
    };
    w.once = w.partial(w.before, 2);
    var T = !{
            toString: null
        }.propertyIsEnumerable("toString"),
        P = "valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");
    w.keys = function (a) {
        if (!w.isObject(a)) return [];
        if (y) return y(a);
        var b = [],
            c;
        for (c in a) w.has(a, c) && b.push(c);
        T && d(a, b);
        return b
    };
    w.allKeys = function (a) {
        if (!w.isObject(a)) return [];
        var b = [],
            c;
        for (c in a) b.push(c);
        T && d(a, b);
        return b
    };
    w.values = function (a) {
        for (var b = w.keys(a), c = b.length, d = Array(c), f = 0; f < c; f++) d[f] = a[b[f]];
        return d
    };
    w.mapObject = function (a, b, c) {
        b = F(b, c);
        c = w.keys(a);
        for (var d = c.length, f = {}, g, h = 0; h < d; h++) g = c[h], f[g] = b(a[g], g, a);
        return f
    };
    w.pairs = function (a) {
        for (var b = w.keys(a), c = b.length, d = Array(c), f = 0; f < c; f++) d[f] = [b[f], a[b[f]]];
        return d
    };
    w.invert = function (a) {
        for (var b = {}, c = w.keys(a), d = 0, f = c.length; d < f; d++) b[a[c[d]]] =
            c[d];
        return b
    };
    w.functions = w.methods = function (a) {
        var b = [],
            c;
        for (c in a) w.isFunction(a[c]) && b.push(c);
        return b.sort()
    };
    w.extend = C(w.allKeys);
    w.extendOwn = w.assign = C(w.keys);
    w.findKey = function (a, b, c) {
        b = F(b, c);
        c = w.keys(a);
        for (var d, f = 0, g = c.length; f < g; f++)
            if (d = c[f], b(a[d], d, a)) return d
    };
    w.pick = function (a, b, c) {
        var d = {},
            f = a,
            g, h;
        if (null == f) return d;
        w.isFunction(b) ? (h = w.allKeys(f), g = B(b, c)) : (h = N(arguments, !1, !1, 1), g = function (a, b, c) {
            return b in c
        }, f = Object(f));
        for (var m = 0, n = h.length; m < n; m++) {
            var p = h[m],
                t = f[p];
            g(t, p, f) && (d[p] = t)
        }
        return d
    };
    w.omit = function (a, b, c) {
        if (w.isFunction(b)) b = w.negate(b);
        else {
            var d = w.map(N(arguments, !1, !1, 1), String);
            b = function (a, b) {
                return !w.contains(d, b)
            }
        }
        return w.pick(a, b, c)
    };
    w.defaults = C(w.allKeys, !0);
    w.create = function (a, b) {
        var c = D(a);
        b && w.extendOwn(c, b);
        return c
    };
    w.clone = function (a) {
        return !w.isObject(a) ? a : w.isArray(a) ? a.slice() : w.extend({}, a)
    };
    w.tap = function (a, b) {
        b(a);
        return a
    };
    w.isMatch = function (a, b) {
        var c = w.keys(b),
            d = c.length;
        if (null == a) return !d;
        for (var f = Object(a), g = 0; g < d; g++) {
            var h =
                c[g];
            if (b[h] !== f[h] || !(h in f)) return !1
        }
        return !0
    };
    var S = function (a, b, c, d) {
        if (a === b) return 0 !== a || 1 / a === 1 / b;
        if (null == a || null == b) return a === b;
        a instanceof w && (a = a._wrapped);
        b instanceof w && (b = b._wrapped);
        var f = u.call(a);
        if (f !== u.call(b)) return !1;
        switch (f) {
        case "[object RegExp]":
        case "[object String]":
            return "" + a === "" + b;
        case "[object Number]":
            return +a !== +a ? +b !== +b : 0 === +a ? 1 / +a === 1 / b : +a === +b;
        case "[object Date]":
        case "[object Boolean]":
            return +a === +b
        }
        f = "[object Array]" === f;
        if (!f) {
            if ("object" != typeof a ||
                "object" != typeof b) return !1;
            var g = a.constructor,
                h = b.constructor;
            if (g !== h && (!w.isFunction(g) || !(g instanceof g && w.isFunction(h) && h instanceof h)) && "constructor" in a && "constructor" in b) return !1
        }
        c = c || [];
        d = d || [];
        for (g = c.length; g--;)
            if (c[g] === a) return d[g] === b;
        c.push(a);
        d.push(b);
        if (f) {
            g = a.length;
            if (g !== b.length) return !1;
            for (; g--;)
                if (!S(a[g], b[g], c, d)) return !1
        } else {
            f = w.keys(a);
            g = f.length;
            if (w.keys(b).length !== g) return !1;
            for (; g--;)
                if (h = f[g], !w.has(b, h) || !S(a[h], b[h], c, d)) return !1
        }
        c.pop();
        d.pop();
        return !0
    };
    w.isEqual = function (a, b) {
        return S(a, b)
    };
    w.isEmpty = function (a) {
        return null == a ? !0 : M(a) && (w.isArray(a) || w.isString(a) || w.isArguments(a)) ? 0 === a.length : 0 === w.keys(a).length
    };
    w.isElement = function (a) {
        return !!(a && 1 === a.nodeType)
    };
    w.isArray = x || function (a) {
        return "[object Array]" === u.call(a)
    };
    w.isObject = function (a) {
        var b = typeof a;
        return "function" === b || "object" === b && !!a
    };
    w.each("Arguments Function String Number Date RegExp Error".split(" "), function (a) {
        w["is" + a] = function (b) {
            return u.call(b) === "[object " + a + "]"
        }
    });
    w.isArguments(arguments) || (w.isArguments = function (a) {
        return w.has(a, "callee")
    });
    "function" != typeof /./ && "object" != typeof Int8Array && (w.isFunction = function (a) {
        return "function" == typeof a || !1
    });
    w.isFinite = function (a) {
        return isFinite(a) && !isNaN(parseFloat(a))
    };
    w.isNaN = function (a) {
        return w.isNumber(a) && a !== +a
    };
    w.isBoolean = function (a) {
        return !0 === a || !1 === a || "[object Boolean]" === u.call(a)
    };
    w.isNull = function (a) {
        return null === a
    };
    w.isUndefined = function (a) {
        return void 0 === a
    };
    w.has = function (a, b) {
        return null != a &&
            v.call(a, b)
    };
    w.noConflict = function () {
        f._ = g;
        return this
    };
    w.identity = function (a) {
        return a
    };
    w.constant = function (a) {
        return function () {
            return a
        }
    };
    w.noop = function () {};
    w.property = E;
    w.propertyOf = function (a) {
        return null == a ? function () {} : function (b) {
            return a[b]
        }
    };
    w.matcher = w.matches = function (a) {
        a = w.extendOwn({}, a);
        return function (b) {
            return w.isMatch(b, a)
        }
    };
    w.times = function (a, b, c) {
        var d = Array(Math.max(0, a));
        b = B(b, c, 1);
        for (c = 0; c < a; c++) d[c] = b(c);
        return d
    };
    w.random = function (a, b) {
        null == b && (b = a, a = 0);
        return a + Math.floor(Math.random() *
            (b - a + 1))
    };
    w.now = Date.now || function () {
        return (new Date).getTime()
    };
    x = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#x27;",
        "`": "&#x60;"
    };
    C = w.invert(x);
    E = function (a) {
        var b = function (b) {
                return a[b]
            },
            c = "(?:" + w.keys(a).join("|") + ")",
            d = RegExp(c),
            f = RegExp(c, "g");
        return function (a) {
            a = null == a ? "" : "" + a;
            return d.test(a) ? a.replace(f, b) : a
        }
    };
    w.escape = E(x);
    w.unescape = E(C);
    w.result = function (a, b, c) {
        b = null == a ? void 0 : a[b];
        void 0 === b && (b = c);
        return w.isFunction(b) ? b.call(a) : b
    };
    var I = 0;
    w.uniqueId =
        function (a) {
            var b = ++I + "";
            return a ? a + b : b
        };
    w.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
    };
    var J = /(.)^/,
        W = {
            "'": "'",
            "\\": "\\",
            "\r": "r",
            "\n": "n",
            "
": "u2028",
            "
": "u2029"
        },
        $ = /\\|'|\r|\n|\u2028|\u2029/g,
        O = function (a) {
            return "\\" + W[a]
        };
    w.template = function (a, b, c) {
        !b && c && (b = c);
        b = w.defaults({}, b, w.templateSettings);
        c = RegExp([(b.escape || J).source, (b.interpolate || J).source, (b.evaluate || J).source].join("|") + "|$", "g");
        var d = 0,
            f = "__p+='";
        a.replace(c,
            function (b, c, g, h, m) {
                f += a.slice(d, m).replace($, O);
                d = m + b.length;
                c ? f += "'+\n((__t=(" + c + "))==null?'':_.escape(__t))+\n'" : g ? f += "'+\n((__t=(" + g + "))==null?'':__t)+\n'" : h && (f += "';\n" + h + "\n__p+='");
                return b
            });
        f += "';\n";
        b.variable || (f = "with(obj||{}){\n" + f + "}\n");
        f = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + f + "return __p;\n";
        try {
            var g = new Function(b.variable || "obj", "_", f)
        } catch (h) {
            throw h.source = f, h;
        }
        c = function (a) {
            return g.call(this,
                a, w)
        };
        c.source = "function(" + (b.variable || "obj") + "){\n" + f + "}";
        return c
    };
    w.chain = function (a) {
        a = w(a);
        a._chain = !0;
        return a
    };
    var Z = function (a, b) {
        return a._chain ? w(b).chain() : b
    };
    w.mixin = function (a) {
        w.each(w.functions(a), function (b) {
            var c = w[b] = a[b];
            w.prototype[b] = function () {
                var a = [this._wrapped];
                n.apply(a, arguments);
                return Z(this, c.apply(w, a))
            }
        })
    };
    w.mixin(w);
    w.each("pop push reverse shift sort splice unshift".split(" "), function (a) {
        var b = h[a];
        w.prototype[a] = function () {
            var c = this._wrapped;
            b.apply(c, arguments);
            ("shift" === a || "splice" === a) && 0 === c.length && delete c[0];
            return Z(this, c)
        }
    });
    w.each(["concat", "join", "slice"], function (a) {
        var b = h[a];
        w.prototype[a] = function () {
            return Z(this, b.apply(this._wrapped, arguments))
        }
    });
    w.prototype.value = function () {
        return this._wrapped
    };
    w.prototype.valueOf = w.prototype.toJSON = w.prototype.value;
    w.prototype.toString = function () {
        return "" + this._wrapped
    };
    "function" === typeof define && define.amd && define("underscore", [], function () {
        return w
    })
}).call(this);
(function (a) {
    "object" === typeof exports && "undefined" !== typeof module ? module.exports = a() : "function" === typeof define && define.amd ? define([], a) : ("undefined" !== typeof window ? window : "undefined" !== typeof global ? global : "undefined" !== typeof self ? self : this).s = a()
})(function () {
    return function b(c, d, f) {
        function g(m, p) {
            if (!d[m]) {
                if (!c[m]) {
                    var u = "function" == typeof require && require;
                    if (!p && u) return u(m, !0);
                    if (h) return h(m, !0);
                    u = Error("Cannot find module '" + m + "'");
                    throw u.code = "MODULE_NOT_FOUND", u;
                }
                u = d[m] = {
                    exports: {}
                };
                c[m][0].call(u.exports, function (b) {
                    var d = c[m][1][b];
                    return g(d ? d : b)
                }, u, u.exports, b, c, d, f)
            }
            return d[m].exports
        }
        for (var h = "function" == typeof require && require, m = 0; m < f.length; m++) g(f[m]);
        return g
    }({
        1: [function (b, c, d) {
            var f = b("./trim"),
                g = b("./decapitalize");
            c.exports = function (b, c) {
                b = f(b).replace(/[-_\s]+(.)?/g, function (b, c) {
                    return c ? c.toUpperCase() : ""
                });
                return !0 === c ? g(b) : b
            }
        }, {
            "./decapitalize": 10,
            "./trim": 65
        }],
        2: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b, c) {
                b = f(b);
                var d = !c ? b.slice(1) :
                    b.slice(1).toLowerCase();
                return b.charAt(0).toUpperCase() + d
            }
        }, {
            "./helper/makeString": 20
        }],
        3: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b) {
                return f(b).split("")
            }
        }, {
            "./helper/makeString": 20
        }],
        4: [function (b, c, d) {
            c.exports = function (b, c) {
                if (null == b) return [];
                b = String(b);
                c = ~~c;
                return 0 < c ? b.match(RegExp(".{1," + c + "}", "g")) : [b]
            }
        }, {}],
        5: [function (b, c, d) {
            var f = b("./capitalize"),
                g = b("./camelize"),
                h = b("./helper/makeString");
            c.exports = function (b) {
                b = h(b);
                return f(g(b.replace(/[\W_]/g, " ")).replace(/\s/g,
                    ""))
            }
        }, {
            "./camelize": 1,
            "./capitalize": 2,
            "./helper/makeString": 20
        }],
        6: [function (b, c, d) {
            var f = b("./trim");
            c.exports = function (b) {
                return f(b).replace(/\s\s+/g, " ")
            }
        }, {
            "./trim": 65
        }],
        7: [function (b, c, d) {
            var f = b("./helper/makeString"),
                g = "ąàáäâãåæăćčĉęèéëêĝĥìíïîĵłľńňòóöőôõðøśșşšŝťțţŭùúüűûñÿýçżźž",
                h = "aaaaaaaaaccceeeeeghiiiijllnnoooooooossssstttuuuuuunyyczzz",
                g = g + g.toUpperCase(),
                h = h + h.toUpperCase(),
                h = h.split(""),
                g = g + "ß";
            h.push("ss");
            c.exports = function (b) {
                return f(b).replace(/.{1}/g, function (b) {
                    var c = g.indexOf(b);
                    return -1 === c ? b : h[c]
                })
            }
        }, {
            "./helper/makeString": 20
        }],
        8: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b, c) {
                b = f(b);
                c = f(c);
                return 0 === b.length || 0 === c.length ? 0 : b.split(c).length - 1
            }
        }, {
            "./helper/makeString": 20
        }],
        9: [function (b, c, d) {
            var f = b("./trim");
            c.exports = function (b) {
                return f(b).replace(/([A-Z])/g,
                    "-$1").replace(/[-_\s]+/g, "-").toLowerCase()
            }
        }, {
            "./trim": 65
        }],
        10: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b) {
                b = f(b);
                return b.charAt(0).toLowerCase() + b.slice(1)
            }
        }, {
            "./helper/makeString": 20
        }],
        11: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b, c) {
                b = f(b);
                var d;
                d = b.match(/^[\s\\t]*/gm);
                for (var n = d[0].length, p = 1; p < d.length; p++) n = Math.min(d[p].length, n);
                d = n;
                return 0 === d ? b : b.replace("string" === typeof c ? RegExp("^" + c, "gm") : RegExp("^[ \\t]{" + d + "}", "gm"), "")
            }
        }, {
            "./helper/makeString": 20
        }],
        12: [function (b, c, d) {
            var f = b("./helper/makeString"),
                g = b("./helper/toPositive");
            c.exports = function (b, c, d) {
                b = f(b);
                c = "" + c;
                d = "undefined" == typeof d ? b.length - c.length : Math.min(g(d), b.length) - c.length;
                return 0 <= d && b.indexOf(c, d) === d
            }
        }, {
            "./helper/makeString": 20,
            "./helper/toPositive": 22
        }],
        13: [function (b, c, d) {
            var f = b("./helper/makeString"),
                g = b("./helper/escapeChars");
            b = "[";
            for (var h in g) b += h;
            var m = RegExp(b + "]", "g");
            c.exports = function (b) {
                return f(b).replace(m, function (b) {
                    return "&" + g[b] + ";"
                })
            }
        }, {
            "./helper/escapeChars": 17,
            "./helper/makeString": 20
        }],
        14: [function (b, c, d) {
            c.exports = function () {
                var b = {},
                    c;
                for (c in this) this.hasOwnProperty(c) && !c.match(/^(?:include|contains|reverse|join|map|wrap)$/) && (b[c] = this[c]);
                return b
            }
        }, {}],
        15: [function (b, c, d) {
            var f = b("./makeString");
            c.exports = function (b, c) {
                b = f(b);
                return 0 === b.length ? "" : b.slice(0, -1) + String.fromCharCode(b.charCodeAt(b.length - 1) + c)
            }
        }, {
            "./makeString": 20
        }],
        16: [function (b, c, d) {
            var f = b("./escapeRegExp");
            c.exports = function (b) {
                return null == b ? "\\s" : b.source ? b.source : "[" + f(b) +
                    "]"
            }
        }, {
            "./escapeRegExp": 18
        }],
        17: [function (b, c, d) {
            c.exports = {
                "¢": "cent",
                "£": "pound",
                "¥": "yen",
                "€": "euro",
                "©": "copy",
                "®": "reg",
                "<": "lt",
                ">": "gt",
                '"': "quot",
                "&": "amp",
                "'": "#39"
            }
        }, {}],
        18: [function (b, c, d) {
            var f = b("./makeString");
            c.exports = function (b) {
                return f(b).replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1")
            }
        }, {
            "./makeString": 20
        }],
        19: [function (b, c, d) {
            c.exports = {
                nbsp: " ",
                cent: "¢",
                pound: "£",
                yen: "¥",
                euro: "€",
                copy: "©",
                reg: "®",
                lt: "<",
                gt: ">",
                quot: '"',
                amp: "&",
                apos: "'"
            }
        }, {}],
        20: [function (b, c, d) {
            c.exports = function (b) {
                return null == b ? "" : "" + b
            }
        }, {}],
        21: [function (b, c, d) {
            c.exports = function (b, c) {
                if (1 > c) return "";
                for (var d = ""; 0 < c;) c & 1 && (d += b), c >>= 1, b += b;
                return d
            }
        }, {}],
        22: [function (b, c, d) {
            c.exports = function (b) {
                return 0 > b ? 0 : +b || 0
            }
        }, {}],
        23: [function (b, c, d) {
            var f = b("./capitalize"),
                g = b("./underscored"),
                h = b("./trim");
            c.exports = function (b) {
                return f(h(g(b).replace(/_id$/, "").replace(/_/g, " ")))
            }
        }, {
            "./capitalize": 2,
            "./trim": 65,
            "./underscored": 67
        }],
        24: [function (b,
            c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b, c) {
                return "" === c ? !0 : -1 !== f(b).indexOf(c)
            }
        }, {
            "./helper/makeString": 20
        }],
        25: [function (b, c, d) {
            function f(b) {
                if (!(this instanceof f)) return new f(b);
                this._wrapped = b
            }

            function g(b, c) {
                "function" === typeof c && (f.prototype[b] = function () {
                    var b = [this._wrapped].concat(Array.prototype.slice.call(arguments)),
                        b = c.apply(null, b);
                    return "string" === typeof b ? new f(b) : b
                })
            }

            function h(b) {
                g(b, function (c) {
                    var d = Array.prototype.slice.call(arguments, 1);
                    return String.prototype[b].apply(c,
                        d)
                })
            }
            f.VERSION = "3.3.4";
            f.isBlank = b("./isBlank");
            f.stripTags = b("./stripTags");
            f.capitalize = b("./capitalize");
            f.decapitalize = b("./decapitalize");
            f.chop = b("./chop");
            f.trim = b("./trim");
            f.clean = b("./clean");
            f.cleanDiacritics = b("./cleanDiacritics");
            f.count = b("./count");
            f.chars = b("./chars");
            f.swapCase = b("./swapCase");
            f.escapeHTML = b("./escapeHTML");
            f.unescapeHTML = b("./unescapeHTML");
            f.splice = b("./splice");
            f.insert = b("./insert");
            f.replaceAll = b("./replaceAll");
            f.include = b("./include");
            f.join = b("./join");
            f.lines =
                b("./lines");
            f.dedent = b("./dedent");
            f.reverse = b("./reverse");
            f.startsWith = b("./startsWith");
            f.endsWith = b("./endsWith");
            f.pred = b("./pred");
            f.succ = b("./succ");
            f.titleize = b("./titleize");
            f.camelize = b("./camelize");
            f.underscored = b("./underscored");
            f.dasherize = b("./dasherize");
            f.classify = b("./classify");
            f.humanize = b("./humanize");
            f.ltrim = b("./ltrim");
            f.rtrim = b("./rtrim");
            f.truncate = b("./truncate");
            f.prune = b("./prune");
            f.words = b("./words");
            f.pad = b("./pad");
            f.lpad = b("./lpad");
            f.rpad = b("./rpad");
            f.lrpad =
                b("./lrpad");
            f.sprintf = b("./sprintf");
            f.vsprintf = b("./vsprintf");
            f.toNumber = b("./toNumber");
            f.numberFormat = b("./numberFormat");
            f.strRight = b("./strRight");
            f.strRightBack = b("./strRightBack");
            f.strLeft = b("./strLeft");
            f.strLeftBack = b("./strLeftBack");
            f.toSentence = b("./toSentence");
            f.toSentenceSerial = b("./toSentenceSerial");
            f.slugify = b("./slugify");
            f.surround = b("./surround");
            f.quote = b("./quote");
            f.unquote = b("./unquote");
            f.repeat = b("./repeat");
            f.naturalCmp = b("./naturalCmp");
            f.levenshtein = b("./levenshtein");
            f.toBoolean = b("./toBoolean");
            f.exports = b("./exports");
            f.escapeRegExp = b("./helper/escapeRegExp");
            f.wrap = b("./wrap");
            f.map = b("./map");
            f.strip = f.trim;
            f.lstrip = f.ltrim;
            f.rstrip = f.rtrim;
            f.center = f.lrpad;
            f.rjust = f.lpad;
            f.ljust = f.rpad;
            f.contains = f.include;
            f.q = f.quote;
            f.toBool = f.toBoolean;
            f.camelcase = f.camelize;
            f.mapChars = f.map;
            f.prototype = {
                value: function () {
                    return this._wrapped
                }
            };
            for (var m in f) g(m, f[m]);
            g("tap", function (b, c) {
                return c(b)
            });
            b = "toUpperCase toLowerCase split replace slice substring substr concat".split(" ");
            for (var n in b) h(b[n]);
            c.exports = f
        }, {
            "./camelize": 1,
            "./capitalize": 2,
            "./chars": 3,
            "./chop": 4,
            "./classify": 5,
            "./clean": 6,
            "./cleanDiacritics": 7,
            "./count": 8,
            "./dasherize": 9,
            "./decapitalize": 10,
            "./dedent": 11,
            "./endsWith": 12,
            "./escapeHTML": 13,
            "./exports": 14,
            "./helper/escapeRegExp": 18,
            "./humanize": 23,
            "./include": 24,
            "./insert": 26,
            "./isBlank": 27,
            "./join": 28,
            "./levenshtein": 29,
            "./lines": 30,
            "./lpad": 31,
            "./lrpad": 32,
            "./ltrim": 33,
            "./map": 34,
            "./naturalCmp": 35,
            "./numberFormat": 38,
            "./pad": 39,
            "./pred": 40,
            "./prune": 41,
            "./quote": 42,
            "./repeat": 43,
            "./replaceAll": 44,
            "./reverse": 45,
            "./rpad": 46,
            "./rtrim": 47,
            "./slugify": 48,
            "./splice": 49,
            "./sprintf": 50,
            "./startsWith": 51,
            "./strLeft": 52,
            "./strLeftBack": 53,
            "./strRight": 54,
            "./strRightBack": 55,
            "./stripTags": 56,
            "./succ": 57,
            "./surround": 58,
            "./swapCase": 59,
            "./titleize": 60,
            "./toBoolean": 61,
            "./toNumber": 62,
            "./toSentence": 63,
            "./toSentenceSerial": 64,
            "./trim": 65,
            "./truncate": 66,
            "./underscored": 67,
            "./unescapeHTML": 68,
            "./unquote": 69,
            "./vsprintf": 70,
            "./words": 71,
            "./wrap": 72
        }],
        26: [function (b,
            c, d) {
            var f = b("./splice");
            c.exports = function (b, c, d) {
                return f(b, c, 0, d)
            }
        }, {
            "./splice": 49
        }],
        27: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b) {
                return /^\s*$/.test(f(b))
            }
        }, {
            "./helper/makeString": 20
        }],
        28: [function (b, c, d) {
            var f = b("./helper/makeString"),
                g = [].slice;
            c.exports = function () {
                var b = g.call(arguments),
                    c = b.shift();
                return b.join(f(c))
            }
        }, {
            "./helper/makeString": 20
        }],
        29: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b, c) {
                b = f(b);
                c = f(c);
                if (b === c) return 0;
                if (!b || !c) return Math.max(b.length,
                    c.length);
                for (var d = Array(c.length + 1), n = 0; n < d.length; ++n) d[n] = n;
                for (n = 0; n < b.length; ++n) {
                    for (var p = n + 1, u = 0; u < c.length; ++u) {
                        var v = p,
                            p = d[u] + (b.charAt(n) === c.charAt(u) ? 0 : 1),
                            x = v + 1;
                        p > x && (p = x);
                        x = d[u + 1] + 1;
                        p > x && (p = x);
                        d[u] = v
                    }
                    d[u] = p
                }
                return p
            }
        }, {
            "./helper/makeString": 20
        }],
        30: [function (b, c, d) {
            c.exports = function (b) {
                return null == b ? [] : String(b).split(/\r\n?|\n/)
            }
        }, {}],
        31: [function (b, c, d) {
            var f = b("./pad");
            c.exports = function (b, c, d) {
                return f(b, c, d)
            }
        }, {
            "./pad": 39
        }],
        32: [function (b, c, d) {
            var f = b("./pad");
            c.exports = function (b,
                c, d) {
                return f(b, c, d, "both")
            }
        }, {
            "./pad": 39
        }],
        33: [function (b, c, d) {
            var f = b("./helper/makeString"),
                g = b("./helper/defaultToWhiteSpace"),
                h = String.prototype.trimLeft;
            c.exports = function (b, c) {
                b = f(b);
                if (!c && h) return h.call(b);
                c = g(c);
                return b.replace(RegExp("^" + c + "+"), "")
            }
        }, {
            "./helper/defaultToWhiteSpace": 16,
            "./helper/makeString": 20
        }],
        34: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b, c) {
                b = f(b);
                return 0 === b.length || "function" !== typeof c ? b : b.replace(/./g, c)
            }
        }, {
            "./helper/makeString": 20
        }],
        35: [function (b, c, d) {
            c.exports = function (b, c) {
                if (b == c) return 0;
                if (!b) return -1;
                if (!c) return 1;
                for (var d = /(\.\d+|\d+|\D+)/g, m = String(b).match(d), n = String(c).match(d), p = Math.min(m.length, n.length), u = 0; u < p; u++) {
                    var d = m[u],
                        v = n[u];
                    if (d !== v) return m = +d, n = +v, m === m && n === n ? m > n ? 1 : -1 : d < v ? -1 : 1
                }
                return m.length != n.length ? m.length - n.length : b < c ? -1 : 1
            }
        }, {}],
        36: [function (b, c, d) {
            (function (b) {
                function c() {
                    var b = arguments[0],
                        d = c.cache;
                    if (!d[b] || !d.hasOwnProperty(b)) d[b] = c.parse(b);
                    return c.format.call(null, d[b], arguments)
                }

                function h(b) {
                    return Object.prototype.toString.call(b).slice(8, -1).toLowerCase()
                }
                var m = /[^s]/,
                    n = /[diefg]/,
                    p = /[j]/,
                    u = /[^j]/,
                    v = /^[^\x25]+/,
                    x = /^\x25{2}/,
                    y = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,
                    z = /^([a-z_][a-z_\d]*)/i,
                    t = /^\.([a-z_][a-z_\d]*)/i,
                    A = /^\[(\d+)\]/,
                    w = /^[\+\-]/;
                c.format = function (b, d) {
                    var f = 1,
                        t = b.length,
                        v = "",
                        x = [],
                        y, z, B, A, T = !0,
                        P = "";
                    for (y = 0; y < t; y++)
                        if (v = h(b[y]), "string" === v) x[x.length] = b[y];
                        else if ("array" === v) {
                        B = b[y];
                        if (B[2]) {
                            v = d[f];
                            for (z = 0; z <
                                B[2].length; z++) {
                                if (!v.hasOwnProperty(B[2][z])) throw Error(c("[sprintf] property '%s' does not exist", B[2][z]));
                                v = v[B[2][z]]
                            }
                        } else v = B[1] ? d[B[1]] : d[f++];
                        "function" == h(v) && (v = v());
                        if (m.test(B[8]) && u.test(B[8]) && "number" != h(v) && isNaN(v)) throw new TypeError(c("[sprintf] expecting number but found %s", h(v)));
                        n.test(B[8]) && (T = 0 <= v);
                        switch (B[8]) {
                        case "b":
                            v = v.toString(2);
                            break;
                        case "c":
                            v = String.fromCharCode(v);
                            break;
                        case "d":
                        case "i":
                            v = parseInt(v, 10);
                            break;
                        case "j":
                            v = JSON.stringify(v, null, B[6] ? parseInt(B[6]) :
                                0);
                            break;
                        case "e":
                            v = B[7] ? v.toExponential(B[7]) : v.toExponential();
                            break;
                        case "f":
                            v = B[7] ? parseFloat(v).toFixed(B[7]) : parseFloat(v);
                            break;
                        case "g":
                            v = B[7] ? parseFloat(v).toPrecision(B[7]) : parseFloat(v);
                            break;
                        case "o":
                            v = v.toString(8);
                            break;
                        case "s":
                            v = (v = String(v)) && B[7] ? v.substring(0, B[7]) : v;
                            break;
                        case "u":
                            v >>>= 0;
                            break;
                        case "x":
                            v = v.toString(16);
                            break;
                        case "X":
                            v = v.toString(16).toUpperCase()
                        }
                        p.test(B[8]) ? x[x.length] = v : (n.test(B[8]) && (!T || B[3]) ? (P = T ? "+" : "-", v = v.toString().replace(w, "")) : P = "", z = B[4] ? "0" ===
                            B[4] ? "0" : B[4].charAt(1) : " ", A = B[6] - (P + v).length, A = B[6] ? 0 < A ? Array(A + 1).join(z) : "" : "", x[x.length] = B[5] ? P + v + A : "0" === z ? P + A + v : A + P + v)
                    }
                    return x.join("")
                };
                c.cache = {};
                c.parse = function (b) {
                    for (var c = [], d = [], f = 0; b;) {
                        if (null !== (c = v.exec(b))) d[d.length] = c[0];
                        else if (null !== (c = x.exec(b))) d[d.length] = "%";
                        else if (null !== (c = y.exec(b))) {
                            if (c[2]) {
                                var f = f | 1,
                                    g = [],
                                    h = c[2],
                                    m = [];
                                if (null !== (m = z.exec(h)))
                                    for (g[g.length] = m[1];
                                        "" !== (h = h.substring(m[0].length));)
                                        if (null !== (m = t.exec(h))) g[g.length] = m[1];
                                        else if (null !== (m = A.exec(h))) g[g.length] =
                                    m[1];
                                else throw new SyntaxError("[sprintf] failed to parse named argument key");
                                else throw new SyntaxError("[sprintf] failed to parse named argument key");
                                c[2] = g
                            } else f |= 2;
                            if (3 === f) throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");
                            d[d.length] = c
                        } else throw new SyntaxError("[sprintf] unexpected placeholder");
                        b = b.substring(c[0].length)
                    }
                    return d
                };
                var B = function (b, d, f) {
                    f = (d || []).slice(0);
                    f.splice(0, 0, b);
                    return c.apply(null, f)
                };
                "undefined" !== typeof d ? (d.sprintf = c,
                    d.vsprintf = B) : (b.sprintf = c, b.vsprintf = B)
            })("undefined" === typeof window ? this : window)
        }, {}],
        37: [function (b, c, d) {
            (function (b) {
                function d(c) {
                    try {
                        if (!b.localStorage) return !1
                    } catch (g) {
                        return !1
                    }
                    c = b.localStorage[c];
                    return null == c ? !1 : "true" === String(c).toLowerCase()
                }
                c.exports = function (b, c) {
                    if (d("noDeprecation")) return b;
                    var f = !1;
                    return function () {
                        if (!f) {
                            if (d("throwDeprecation")) throw Error(c);
                            d("traceDeprecation") ? console.trace(c) : console.warn(c);
                            f = !0
                        }
                        return b.apply(this, arguments)
                    }
                }
            }).call(this, "undefined" !==
                typeof global ? global : "undefined" !== typeof self ? self : "undefined" !== typeof window ? window : {})
        }, {}],
        38: [function (b, c, d) {
            c.exports = function (b, c, d, m) {
                if (isNaN(b) || null == b) return "";
                b = b.toFixed(~~c);
                m = "string" == typeof m ? m : ",";
                b = b.split(".");
                d = b[1] ? (d || ".") + b[1] : "";
                return b[0].replace(/(\d)(?=(?:\d{3})+$)/g, "$1" + m) + d
            }
        }, {}],
        39: [function (b, c, d) {
            var f = b("./helper/makeString"),
                g = b("./helper/strRepeat");
            c.exports = function (b, c, d, p) {
                b = f(b);
                c = ~~c;
                var u = 0;
                d ? 1 < d.length && (d = d.charAt(0)) : d = " ";
                switch (p) {
                case "right":
                    return u =
                        c - b.length, b + g(d, u);
                case "both":
                    return u = c - b.length, g(d, Math.ceil(u / 2)) + b + g(d, Math.floor(u / 2));
                default:
                    return u = c - b.length, g(d, u) + b
                }
            }
        }, {
            "./helper/makeString": 20,
            "./helper/strRepeat": 21
        }],
        40: [function (b, c, d) {
            var f = b("./helper/adjacent");
            c.exports = function (b) {
                return f(b, -1)
            }
        }, {
            "./helper/adjacent": 15
        }],
        41: [function (b, c, d) {
            var f = b("./helper/makeString"),
                g = b("./rtrim");
            c.exports = function (b, c, d) {
                b = f(b);
                c = ~~c;
                d = null != d ? String(d) : "...";
                if (b.length <= c) return b;
                c = b.slice(0, c + 1).replace(/.(?=\W*\w*$)/g, function (b) {
                    return b.toUpperCase() !==
                        b.toLowerCase() ? "A" : " "
                });
                c = c.slice(c.length - 2).match(/\w\w/) ? c.replace(/\s*\S+$/, "") : g(c.slice(0, c.length - 1));
                return (c + d).length > b.length ? b : b.slice(0, c.length) + d
            }
        }, {
            "./helper/makeString": 20,
            "./rtrim": 47
        }],
        42: [function (b, c, d) {
            var f = b("./surround");
            c.exports = function (b, c) {
                return f(b, c || '"')
            }
        }, {
            "./surround": 58
        }],
        43: [function (b, c, d) {
            var f = b("./helper/makeString"),
                g = b("./helper/strRepeat");
            c.exports = function (b, c, d) {
                b = f(b);
                c = ~~c;
                if (null == d) return g(b, c);
                for (var p = []; 0 < c; p[--c] = b);
                return p.join(d)
            }
        }, {
            "./helper/makeString": 20,
            "./helper/strRepeat": 21
        }],
        44: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b, c, d, n) {
                c = RegExp(c, !0 === n ? "gi" : "g");
                return f(b).replace(c, d)
            }
        }, {
            "./helper/makeString": 20
        }],
        45: [function (b, c, d) {
            var f = b("./chars");
            c.exports = function (b) {
                return f(b).reverse().join("")
            }
        }, {
            "./chars": 3
        }],
        46: [function (b, c, d) {
            var f = b("./pad");
            c.exports = function (b, c, d) {
                return f(b, c, d, "right")
            }
        }, {
            "./pad": 39
        }],
        47: [function (b, c, d) {
            var f = b("./helper/makeString"),
                g = b("./helper/defaultToWhiteSpace"),
                h = String.prototype.trimRight;
            c.exports = function (b, c) {
                b = f(b);
                if (!c && h) return h.call(b);
                c = g(c);
                return b.replace(RegExp(c + "+$"), "")
            }
        }, {
            "./helper/defaultToWhiteSpace": 16,
            "./helper/makeString": 20
        }],
        48: [function (b, c, d) {
            var f = b("./trim"),
                g = b("./dasherize"),
                h = b("./cleanDiacritics");
            c.exports = function (b) {
                return f(g(h(b).replace(/[^\w\s-]/g, "-").toLowerCase()), "-")
            }
        }, {
            "./cleanDiacritics": 7,
            "./dasherize": 9,
            "./trim": 65
        }],
        49: [function (b, c, d) {
            var f = b("./chars");
            c.exports = function (b, c, d, n) {
                b = f(b);
                b.splice(~~c, ~~d, n);
                return b.join("")
            }
        }, {
            "./chars": 3
        }],
        50: [function (b, c, d) {
            d = b("util-deprecate");
            c.exports = d(b("sprintf-js").sprintf, "sprintf() will be removed in the next major release, use the sprintf-js package instead.")
        }, {
            "sprintf-js": 36,
            "util-deprecate": 37
        }],
        51: [function (b, c, d) {
            var f = b("./helper/makeString"),
                g = b("./helper/toPositive");
            c.exports = function (b, c, d) {
                b = f(b);
                c = "" + c;
                d = null == d ? 0 : Math.min(g(d), b.length);
                return b.lastIndexOf(c, d) === d
            }
        }, {
            "./helper/makeString": 20,
            "./helper/toPositive": 22
        }],
        52: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports =
                function (b, c) {
                    b = f(b);
                    c = f(c);
                    var d = !c ? -1 : b.indexOf(c);
                    return ~d ? b.slice(0, d) : b
                }
        }, {
            "./helper/makeString": 20
        }],
        53: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b, c) {
                b = f(b);
                c = f(c);
                var d = b.lastIndexOf(c);
                return ~d ? b.slice(0, d) : b
            }
        }, {
            "./helper/makeString": 20
        }],
        54: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b, c) {
                b = f(b);
                c = f(c);
                var d = !c ? -1 : b.indexOf(c);
                return ~d ? b.slice(d + c.length, b.length) : b
            }
        }, {
            "./helper/makeString": 20
        }],
        55: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b, c) {
                b = f(b);
                c = f(c);
                var d = !c ? -1 : b.lastIndexOf(c);
                return ~d ? b.slice(d + c.length, b.length) : b
            }
        }, {
            "./helper/makeString": 20
        }],
        56: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b) {
                return f(b).replace(/<\/?[^>]+>/g, "")
            }
        }, {
            "./helper/makeString": 20
        }],
        57: [function (b, c, d) {
            var f = b("./helper/adjacent");
            c.exports = function (b) {
                return f(b, 1)
            }
        }, {
            "./helper/adjacent": 15
        }],
        58: [function (b, c, d) {
            c.exports = function (b, c) {
                return [c, b, c].join("")
            }
        }, {}],
        59: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b) {
                return f(b).replace(/\S/g, function (b) {
                    return b === b.toUpperCase() ? b.toLowerCase() : b.toUpperCase()
                })
            }
        }, {
            "./helper/makeString": 20
        }],
        60: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b) {
                return f(b).toLowerCase().replace(/(?:^|\s|-)\S/g, function (b) {
                    return b.toUpperCase()
                })
            }
        }, {
            "./helper/makeString": 20
        }],
        61: [function (b, c, d) {
            function f(b, c) {
                var d, f, g = b.toLowerCase();
                c = [].concat(c);
                for (d = 0; d < c.length; d += 1)
                    if ((f = c[d]) && (f.test && f.test(b) || f.toLowerCase() === g)) return !0
            }
            var g = b("./trim");
            c.exports = function (b, c, d) {
                "number" === typeof b && (b = "" + b);
                if ("string" !== typeof b) return !!b;
                b = g(b);
                if (f(b, c || ["true", "1"])) return !0;
                if (f(b, d || ["false", "0"])) return !1
            }
        }, {
            "./trim": 65
        }],
        62: [function (b, c, d) {
            c.exports = function (b, c) {
                if (null == b) return 0;
                var d = Math.pow(10, isFinite(c) ? c : 0);
                return Math.round(b * d) / d
            }
        }, {}],
        63: [function (b, c, d) {
                var f = b("./rtrim");
                c.exports = function (b, c, d, n) {
                    c = c || ", ";
                    d = d || " and ";
                    var p = b.slice(),
                        u = p.pop();
                    2 < b.length && n && (d = f(c) + d);
                    return p.length ? p.join(c) + d + u : u
                }
            },
            {
                "./rtrim": 47
            }
        ],
        64: [function (b, c, d) {
            var f = b("./toSentence");
            c.exports = function (b, c, d) {
                return f(b, c, d, !0)
            }
        }, {
            "./toSentence": 63
        }],
        65: [function (b, c, d) {
            var f = b("./helper/makeString"),
                g = b("./helper/defaultToWhiteSpace"),
                h = String.prototype.trim;
            c.exports = function (b, c) {
                b = f(b);
                if (!c && h) return h.call(b);
                c = g(c);
                return b.replace(RegExp("^" + c + "+|" + c + "+$", "g"), "")
            }
        }, {
            "./helper/defaultToWhiteSpace": 16,
            "./helper/makeString": 20
        }],
        66: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b, c, d) {
                b = f(b);
                c = ~~c;
                return b.length > c ? b.slice(0, c) + (d || "...") : b
            }
        }, {
            "./helper/makeString": 20
        }],
        67: [function (b, c, d) {
            var f = b("./trim");
            c.exports = function (b) {
                return f(b).replace(/([a-z\d])([A-Z]+)/g, "$1_$2").replace(/[-\s]+/g, "_").toLowerCase()
            }
        }, {
            "./trim": 65
        }],
        68: [function (b, c, d) {
            var f = b("./helper/makeString"),
                g = b("./helper/htmlEntities");
            c.exports = function (b) {
                return f(b).replace(/\&([^;]+);/g, function (b, c) {
                    var d;
                    return c in g ? g[c] : (d = c.match(/^#x([\da-fA-F]+)$/)) ? String.fromCharCode(parseInt(d[1], 16)) : (d = c.match(/^#(\d+)$/)) ?
                        String.fromCharCode(~~d[1]) : b
                })
            }
        }, {
            "./helper/htmlEntities": 19,
            "./helper/makeString": 20
        }],
        69: [function (b, c, d) {
            c.exports = function (b, c) {
                c = c || '"';
                return b[0] === c && b[b.length - 1] === c ? b.slice(1, b.length - 1) : b
            }
        }, {}],
        70: [function (b, c, d) {
            d = b("util-deprecate");
            c.exports = d(b("sprintf-js").vsprintf, "vsprintf() will be removed in the next major release, use the sprintf-js package instead.")
        }, {
            "sprintf-js": 36,
            "util-deprecate": 37
        }],
        71: [function (b, c, d) {
            var f = b("./isBlank"),
                g = b("./trim");
            c.exports = function (b, c) {
                return f(b) ? [] : g(b, c).split(c || /\s+/)
            }
        }, {
            "./isBlank": 27,
            "./trim": 65
        }],
        72: [function (b, c, d) {
            var f = b("./helper/makeString");
            c.exports = function (b, c) {
                b = f(b);
                c = c || {};
                var d = c.width || 75,
                    n = c.seperator || "\n",
                    p = c.preserveSpaces || !1,
                    u = c.trailingSpaces || !1,
                    v;
                if (0 >= d) return b;
                if (c.cut) {
                    p = 0;
                    for (v = ""; p < b.length;) 0 == p % d && 0 < p && (v += n), v += b.charAt(p), p++;
                    if (u)
                        for (; 0 < p % d;) v += " ", p++
                } else {
                    var x = b.split(" "),
                        y = 0;
                    for (v = ""; 0 < x.length;) {
                        if (1 + x[0].length + y > d && 0 < y) {
                            if (p) v += " ";
                            else if (u)
                                for (; y < d;) v += " ", y++;
                            v += n;
                            y = 0
                        }
                        0 < y && (v += " ", y++);
                        v +=
                            x[0];
                        y += x[0].length;
                        x.shift()
                    }
                    if (u)
                        for (; y < d;) v += " ", y++
                }
                return v
            }
        }, {
            "./helper/makeString": 20
        }]
    }, {}, [25])(25)
});
! function (a) {
    if ("object" == typeof exports && "undefined" != typeof module) module.exports = a();
    else if ("function" == typeof define && define.amd) define([], a);
    else {
        var b;
        "undefined" != typeof window ? b = window : "undefined" != typeof global ? b = global : "undefined" != typeof self && (b = self);
        b.Promise = a()
    }
}(function () {
    return function b(c, d, f) {
        function g(m, p) {
            if (!d[m]) {
                if (!c[m]) {
                    var u = "function" == typeof _dereq_ && _dereq_;
                    if (!p && u) return u(m, !0);
                    if (h) return h(m, !0);
                    u = Error("Cannot find module '" + m + "'");
                    throw u.code = "MODULE_NOT_FOUND",
                        u;
                }
                u = d[m] = {
                    exports: {}
                };
                c[m][0].call(u.exports, function (b) {
                    var d = c[m][1][b];
                    return g(d ? d : b)
                }, u, u.exports, b, c, d, f)
            }
            return d[m].exports
        }
        for (var h = "function" == typeof _dereq_ && _dereq_, m = 0; m < f.length; m++) g(f[m]);
        return g
    }({
        1: [function (b, c, d) {
            c.exports = function (b) {
                function c(b) {
                    b = new d(b);
                    var f = b.promise();
                    return b.setHowMany(1), b.setUnwrap(), b.init(), f
                }
                var d = b._SomePromiseArray;
                b.any = function (b) {
                    return c(b)
                };
                b.prototype.any = function () {
                    return c(this)
                }
            }
        }, {}],
        2: [function (b, c, d) {
            function f() {
                this._isTickUsed =
                    this._customScheduler = !1;
                this._lateQueue = new u(16);
                this._normalQueue = new u(16);
                this._haveDrainedQueues = !1;
                this._trampolineEnabled = !0;
                var b = this;
                this.drainQueues = function () {
                    b._drainQueues()
                };
                this._schedule = p
            }

            function g(b, c, d) {
                this._lateQueue.push(b, c, d);
                this._queueTick()
            }

            function h(b, c, d) {
                this._normalQueue.push(b, c, d);
                this._queueTick()
            }

            function m(b) {
                this._normalQueue._pushOne(b);
                this._queueTick()
            }
            try {
                throw Error();
            } catch (n) {
                d = n
            }
            var p = b("./schedule"),
                u = b("./queue"),
                v = b("./util");
            f.prototype.setScheduler =
                function (b) {
                    var c = this._schedule;
                    return this._schedule = b, this._customScheduler = !0, c
                };
            f.prototype.hasCustomScheduler = function () {
                return this._customScheduler
            };
            f.prototype.enableTrampoline = function () {
                this._trampolineEnabled = !0
            };
            f.prototype.disableTrampolineIfNecessary = function () {
                v.hasDevTools && (this._trampolineEnabled = !1)
            };
            f.prototype.haveItemsQueued = function () {
                return this._isTickUsed || this._haveDrainedQueues
            };
            f.prototype.fatalError = function (b, c) {
                c ? (process.stderr.write("Fatal " + (b instanceof Error ?
                    b.stack : b) + "\n"), process.exit(2)) : this.throwLater(b)
            };
            f.prototype.throwLater = function (b, c) {
                if (1 === arguments.length && (c = b, b = function () {
                        throw c;
                    }), "undefined" != typeof setTimeout) setTimeout(function () {
                    b(c)
                }, 0);
                else try {
                    this._schedule(function () {
                        b(c)
                    })
                } catch (d) {
                    throw Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n");
                }
            };
            v.hasDevTools ? (f.prototype.invokeLater = function (b, c, d) {
                    this._trampolineEnabled ? g.call(this, b, c, d) : this._schedule(function () {
                        setTimeout(function () {
                            b.call(c, d)
                        }, 100)
                    })
                },
                f.prototype.invoke = function (b, c, d) {
                    this._trampolineEnabled ? h.call(this, b, c, d) : this._schedule(function () {
                        b.call(c, d)
                    })
                }, f.prototype.settlePromises = function (b) {
                    this._trampolineEnabled ? m.call(this, b) : this._schedule(function () {
                        b._settlePromises()
                    })
                }) : (f.prototype.invokeLater = g, f.prototype.invoke = h, f.prototype.settlePromises = m);
            f.prototype._drainQueue = function (b) {
                for (; 0 < b.length();) {
                    var c = b.shift();
                    if ("function" == typeof c) {
                        var d = b.shift(),
                            f = b.shift();
                        c.call(d, f)
                    } else c._settlePromises()
                }
            };
            f.prototype._drainQueues =
                function () {
                    this._drainQueue(this._normalQueue);
                    this._reset();
                    this._haveDrainedQueues = !0;
                    this._drainQueue(this._lateQueue)
                };
            f.prototype._queueTick = function () {
                this._isTickUsed || (this._isTickUsed = !0, this._schedule(this.drainQueues))
            };
            f.prototype._reset = function () {
                this._isTickUsed = !1
            };
            c.exports = f;
            c.exports.firstLineError = d
        }, {
            "./queue": 26,
            "./schedule": 29,
            "./util": 36
        }],
        3: [function (b, c, d) {
            c.exports = function (b, c, d, m) {
                var n = !1,
                    p = function (b, c) {
                        this._reject(c)
                    },
                    u = function (b, c) {
                        c.promiseRejectionQueued = !0;
                        c.bindingPromise._then(p,
                            p, null, this, b)
                    },
                    v = function (b, c) {
                        0 === (50397184 & this._bitField) && this._resolveCallback(c.target)
                    },
                    x = function (b, c) {
                        c.promiseRejectionQueued || this._reject(b)
                    };
                b.prototype.bind = function (p) {
                    n || (n = !0, b.prototype._propagateFrom = m.propagateFromFunction(), b.prototype._boundValue = m.boundValueFunction());
                    p = d(p);
                    var z = new b(c);
                    z._propagateFrom(this, 1);
                    var t = this._target();
                    if (z._setBoundTo(p), p instanceof b) {
                        var A = {
                            promiseRejectionQueued: !1,
                            promise: z,
                            target: t,
                            bindingPromise: p
                        };
                        t._then(c, u, void 0, z, A);
                        p._then(v,
                            x, void 0, z, A);
                        z._setOnCancel(p)
                    } else z._resolveCallback(t);
                    return z
                };
                b.prototype._setBoundTo = function (b) {
                    void 0 !== b ? (this._bitField |= 2097152, this._boundTo = b) : this._bitField &= -2097153
                };
                b.prototype._isBound = function () {
                    return 2097152 === (2097152 & this._bitField)
                };
                b.bind = function (c, d) {
                    return b.resolve(d).bind(c)
                }
            }
        }, {}],
        4: [function (b, c, d) {
            var f;
            "undefined" != typeof Promise && (f = Promise);
            var g = b("./promise")();
            g.noConflict = function () {
                try {
                    Promise === g && (Promise = f)
                } catch (b) {}
                return g
            };
            c.exports = g
        }, {
            "./promise": 22
        }],
        5: [function (b, c, d) {
            var f = Object.create;
            f && (d = f(null), f = f(null), d[" size"] = f[" size"] = 0);
            c.exports = function (c) {
                function d(b) {
                    var f = this.pop(),
                        h;
                    if (null != b && (h = b[f]), "function" != typeof h) throw b = "Object " + p.classString(b) + " has no method '" + p.toString(f) + "'", new c.TypeError(b);
                    return h.apply(b, this)
                }

                function f(b) {
                    return b[this]
                }

                function n(b) {
                    var c = +this;
                    return 0 > c && (c = Math.max(0, c + b.length)), b[c]
                }
                var p = b("./util"),
                    u = p.canEvaluate;
                p.isIdentifier;
                c.prototype.call = function (b) {
                    var c = [].slice.call(arguments,
                        1);
                    return c.push(b), this._then(d, void 0, void 0, c, void 0)
                };
                c.prototype.get = function (b) {
                    var c;
                    "number" == typeof b ? c = n : u ? (c = (void 0)(b), c = null !== c ? c : f) : c = f;
                    return this._then(c, void 0, void 0, b, void 0)
                }
            }
        }, {
            "./util": 36
        }],
        6: [function (b, c, d) {
            c.exports = function (c, d, h, m) {
                var n = b("./util"),
                    p = n.tryCatch,
                    u = n.errorObj,
                    v = c._async;
                c.prototype["break"] = c.prototype.cancel = function () {
                    if (!m.cancellation()) return this._warn("cancellation is disabled");
                    for (var b = this, c = b; b._isCancellable();) {
                        if (!b._cancelBy(c)) {
                            c._isFollowing() ?
                                c._followee().cancel() : c._cancelBranched();
                            break
                        }
                        var d = b._cancellationParent;
                        if (null == d || !d._isCancellable()) {
                            b._isFollowing() ? b._followee().cancel() : b._cancelBranched();
                            break
                        }
                        b._isFollowing() && b._followee().cancel();
                        b._setWillBeCancelled();
                        c = b;
                        b = d
                    }
                };
                c.prototype._branchHasCancelled = function () {
                    this._branchesRemainingToCancel--
                };
                c.prototype._enoughBranchesHaveCancelled = function () {
                    return void 0 === this._branchesRemainingToCancel || 0 >= this._branchesRemainingToCancel
                };
                c.prototype._cancelBy = function (b) {
                    return b ===
                        this ? (this._branchesRemainingToCancel = 0, this._invokeOnCancel(), !0) : (this._branchHasCancelled(), this._enoughBranchesHaveCancelled() ? (this._invokeOnCancel(), !0) : !1)
                };
                c.prototype._cancelBranched = function () {
                    this._enoughBranchesHaveCancelled() && this._cancel()
                };
                c.prototype._cancel = function () {
                    this._isCancellable() && (this._setCancelled(), v.invoke(this._cancelPromises, this, void 0))
                };
                c.prototype._cancelPromises = function () {
                    0 < this._length() && this._settlePromises()
                };
                c.prototype._unsetOnCancel = function () {
                    this._onCancelField =
                        void 0
                };
                c.prototype._isCancellable = function () {
                    return this.isPending() && !this._isCancelled()
                };
                c.prototype.isCancellable = function () {
                    return this.isPending() && !this.isCancelled()
                };
                c.prototype._doInvokeOnCancel = function (b, c) {
                    if (n.isArray(b))
                        for (var d = 0; d < b.length; ++d) this._doInvokeOnCancel(b[d], c);
                    else void 0 !== b && ("function" == typeof b ? c || (d = p(b).call(this._boundValue()), d === u && (this._attachExtraTrace(d.e), v.throwLater(d.e))) : b._resultCancelled(this))
                };
                c.prototype._invokeOnCancel = function () {
                    var b = this._onCancel();
                    this._unsetOnCancel();
                    v.invoke(this._doInvokeOnCancel, this, b)
                };
                c.prototype._invokeInternalOnCancel = function () {
                    this._isCancellable() && (this._doInvokeOnCancel(this._onCancel(), !0), this._unsetOnCancel())
                };
                c.prototype._resultCancelled = function () {
                    this.cancel()
                }
            }
        }, {
            "./util": 36
        }],
        7: [function (b, c, d) {
            c.exports = function (c) {
                var d = b("./util"),
                    h = b("./es5").keys,
                    m = d.tryCatch,
                    n = d.errorObj;
                return function (b, u, v) {
                    return function (x) {
                        var y = v._boundValue(),
                            z = 0;
                        a: for (; z < b.length; ++z) {
                            var t = b[z];
                            if (t === Error || null != t &&
                                t.prototype instanceof Error) {
                                if (x instanceof t) return m(u).call(y, x)
                            } else if ("function" == typeof t) {
                                t = m(t).call(y, x);
                                if (t === n) return t;
                                if (t) return m(u).call(y, x)
                            } else if (d.isObject(x)) {
                                for (var A = h(t), w = 0; w < A.length; ++w) {
                                    var B = A[w];
                                    if (t[B] != x[B]) continue a
                                }
                                return m(u).call(y, x)
                            }
                        }
                        return c
                    }
                }
            }
        }, {
            "./es5": 13,
            "./util": 36
        }],
        8: [function (b, c, d) {
            c.exports = function (b) {
                function c() {
                    this._trace = new c.CapturedTrace(d())
                }

                function d() {
                    var b = n.length - 1;
                    return 0 <= b ? n[b] : void 0
                }
                var m = !1,
                    n = [];
                return b.prototype._promiseCreated =
                    function () {}, b.prototype._pushContext = function () {}, b.prototype._popContext = function () {
                        return null
                    }, b._peekContext = b.prototype._peekContext = function () {}, c.prototype._pushContext = function () {
                        void 0 !== this._trace && (this._trace._promiseCreated = null, n.push(this._trace))
                    }, c.prototype._popContext = function () {
                        if (void 0 !== this._trace) {
                            var b = n.pop(),
                                c = b._promiseCreated;
                            return b._promiseCreated = null, c
                        }
                        return null
                    }, c.CapturedTrace = null, c.create = function () {
                        return m ? new c : void 0
                    }, c.deactivateLongStackTraces = function () {},
                    c.activateLongStackTraces = function () {
                        var n = b.prototype._pushContext,
                            u = b.prototype._popContext,
                            v = b._peekContext,
                            x = b.prototype._peekContext,
                            y = b.prototype._promiseCreated;
                        c.deactivateLongStackTraces = function () {
                            b.prototype._pushContext = n;
                            b.prototype._popContext = u;
                            b._peekContext = v;
                            b.prototype._peekContext = x;
                            b.prototype._promiseCreated = y;
                            m = !1
                        };
                        m = !0;
                        b.prototype._pushContext = c.prototype._pushContext;
                        b.prototype._popContext = c.prototype._popContext;
                        b._peekContext = b.prototype._peekContext = d;
                        b.prototype._promiseCreated =
                            function () {
                                var b = this._peekContext();
                                b && null == b._promiseCreated && (b._promiseCreated = this)
                            }
                    }, c
            }
        }, {}],
        9: [function (b, c, d) {
            c.exports = function (c, d) {
                function h(b, c) {
                    return {
                        promise: c
                    }
                }

                function m() {
                    return !1
                }

                function n(b, c, d) {
                    var f = this;
                    try {
                        b(c, d, function (b) {
                            if ("function" != typeof b) throw new TypeError("onCancel must be a function, got: " + J.toString(b));
                            f._attachCancellationCallback(b)
                        })
                    } catch (g) {
                        return g
                    }
                }

                function p(b) {
                    if (!this._isCancellable()) return this;
                    var c = this._onCancel();
                    void 0 !== c ? J.isArray(c) ? c.push(b) :
                        this._setOnCancel([c, b]) : this._setOnCancel(b)
                }

                function u() {
                    return this._onCancelField
                }

                function v(b) {
                    this._onCancelField = b
                }

                function x() {
                    this._onCancelField = this._cancellationParent = void 0
                }

                function y(b, c) {
                    if (0 !== (1 & c)) {
                        this._cancellationParent = b;
                        var d = b._branchesRemainingToCancel;
                        void 0 === d && (d = 0);
                        b._branchesRemainingToCancel = d + 1
                    }
                    0 !== (2 & c) && b._isBound() && this._setBoundTo(b._boundTo)
                }

                function z() {
                    var b = this._boundTo;
                    return void 0 !== b && b instanceof c ? b.isFulfilled() ? b.value() : void 0 : b
                }

                function t() {
                    this._trace =
                        new K(this._peekContext())
                }

                function A(b, c) {
                    if (W(b)) {
                        var d = this._trace;
                        (void 0 !== d && c && (d = d._parent), void 0 !== d) ? d.attachExtraTrace(b): b.__stackCleaned__ || (d = C(b), J.notEnumerableProp(b, "stack", d.message + "\n" + d.stack.join("\n")), J.notEnumerableProp(b, "__stackCleaned__", !0))
                    }
                }

                function w(b, d, g) {
                    if (ca.warnings) {
                        var h;
                        b = new I(b);
                        d ? g._attachExtraTrace(b) : ca.longStackTraces && (h = c._peekContext()) ? h.attachExtraTrace(b) : (d = C(b), b.stack = d.message + "\n" + d.stack.join("\n"));
                        la("warning", b) || D(b, "", !0)
                    }
                }

                function B(b,
                    c) {
                    for (var d = 0; d < c.length - 1; ++d) c[d].push("From previous event:"), c[d] = c[d].join("\n");
                    return d < c.length && (c[d] = c[d].join("\n")), b + "\n" + c.join("\n")
                }

                function F(b) {
                    for (var c = [], d = 0; d < b.length; ++d) {
                        var f = b[d],
                            g = "    (No stack trace)" === f || V.test(f),
                            h = g && na(f);
                        g && !h && (Y && " " !== f.charAt(0) && (f = "    " + f), c.push(f))
                    }
                    return c
                }

                function C(b) {
                    var c = b.stack,
                        d = b.toString(),
                        f;
                    if ("string" == typeof c && 0 < c.length) {
                        var g = b.stack.replace(/\s+$/g, "").split("\n");
                        for (f = 0; f < g.length; ++f) {
                            var h = g[f];
                            if ("    (No stack trace)" ===
                                h || V.test(h)) break
                        }
                        f = (0 < f && "SyntaxError" != b.name && (g = g.slice(f)), g)
                    } else f = ["    (No stack trace)"];
                    return c = f, {
                        message: d,
                        stack: "SyntaxError" == b.name ? c : F(c)
                    }
                }

                function D(b, c, d) {
                    "undefined" != typeof console && (b = J.isObject(b) ? c + L(b.stack, b) : c + String(b), "function" == typeof T ? T(b, d) : ("function" == typeof console.log || "object" == typeof console.log) && console.log(b))
                }

                function E(b, c, d, f) {
                    var g = !1;
                    try {
                        "function" == typeof c && (g = !0, "rejectionHandled" === b ? c(f) : c(d, f))
                    } catch (h) {
                        S.throwLater(h)
                    }
                    "unhandledRejection" ===
                    b ? la(b, d, f) || g || D(d, "Unhandled rejection ") : la(b, f)
                }

                function G(b) {
                    var c;
                    if ("function" == typeof b) c = "[function " + (b.name || "anonymous") + "]";
                    else {
                        c = b && "function" == typeof b.toString ? b.toString() : J.toString(b);
                        if (/\[object [a-zA-Z0-9$_]+\]/.test(c)) try {
                            c = JSON.stringify(b)
                        } catch (d) {}
                        0 === c.length && (c = "(empty array)")
                    }
                    return "(<" + (41 > c.length ? c : c.substr(0, 38) + "...") + ">, no stack trace)"
                }

                function H() {
                    return "function" == typeof qa
                }

                function M(b) {
                    return (b = b.match(pa)) ? {
                            fileName: b[1],
                            line: parseInt(b[2], 10)
                        } :
                        void 0
                }

                function K(b) {
                    this._parent = b;
                    this._promisesCreated = 0;
                    b = this._length = 1 + (void 0 === b ? 0 : b._length);
                    qa(this, K);
                    32 < b && this.uncycle()
                }
                var N, U, T, P = c._getDomain,
                    S = c._async,
                    I = b("./errors").Warning,
                    J = b("./util"),
                    W = J.canAttachTrace,
                    $ = /[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,
                    O = /\((?:timers\.js):\d+:\d+\)/,
                    Z = /[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,
                    V = null,
                    L = null,
                    Y = !1,
                    X = !(0 == J.env("BLUEBIRD_DEBUG") || !J.env("BLUEBIRD_DEBUG") && "development" !== J.env("NODE_ENV")),
                    aa = !(0 == J.env("BLUEBIRD_WARNINGS") ||
                        !X && !J.env("BLUEBIRD_WARNINGS")),
                    X = !(0 == J.env("BLUEBIRD_LONG_STACK_TRACES") || !X && !J.env("BLUEBIRD_LONG_STACK_TRACES")),
                    da = 0 != J.env("BLUEBIRD_W_FORGOTTEN_RETURN") && (aa || !!J.env("BLUEBIRD_W_FORGOTTEN_RETURN"));
                c.prototype.suppressUnhandledRejections = function () {
                    var b = this._target();
                    b._bitField = -1048577 & b._bitField | 524288
                };
                c.prototype._ensurePossibleRejectionHandled = function () {
                    0 === (524288 & this._bitField) && (this._setRejectionIsUnhandled(), S.invokeLater(this._notifyUnhandledRejection, this, void 0))
                };
                c.prototype._notifyUnhandledRejectionIsHandled =
                    function () {
                        E("rejectionHandled", N, void 0, this)
                    };
                c.prototype._setReturnedNonUndefined = function () {
                    this._bitField |= 268435456
                };
                c.prototype._returnedNonUndefined = function () {
                    return 0 !== (268435456 & this._bitField)
                };
                c.prototype._notifyUnhandledRejection = function () {
                    if (this._isRejectionUnhandled()) {
                        var b = this._settledValue();
                        this._setUnhandledRejectionIsNotified();
                        E("unhandledRejection", U, b, this)
                    }
                };
                c.prototype._setUnhandledRejectionIsNotified = function () {
                    this._bitField |= 262144
                };
                c.prototype._unsetUnhandledRejectionIsNotified =
                    function () {
                        this._bitField &= -262145
                    };
                c.prototype._isUnhandledRejectionNotified = function () {
                    return 0 < (262144 & this._bitField)
                };
                c.prototype._setRejectionIsUnhandled = function () {
                    this._bitField |= 1048576
                };
                c.prototype._unsetRejectionIsUnhandled = function () {
                    this._bitField &= -1048577;
                    this._isUnhandledRejectionNotified() && (this._unsetUnhandledRejectionIsNotified(), this._notifyUnhandledRejectionIsHandled())
                };
                c.prototype._isRejectionUnhandled = function () {
                    return 0 < (1048576 & this._bitField)
                };
                c.prototype._warn = function (b,
                    c, d) {
                    return w(b, c, d || this)
                };
                c.onPossiblyUnhandledRejection = function (b) {
                    var c = P();
                    U = "function" == typeof b ? null === c ? b : J.domainBind(c, b) : void 0
                };
                c.onUnhandledRejectionHandled = function (b) {
                    var c = P();
                    N = "function" == typeof b ? null === c ? b : J.domainBind(c, b) : void 0
                };
                var ta = function () {};
                c.longStackTraces = function () {
                    if (S.haveItemsQueued() && !ca.longStackTraces) throw Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");
                    if (!ca.longStackTraces && H()) {
                        var b = c.prototype._captureStackTrace,
                            h = c.prototype._attachExtraTrace;
                        ca.longStackTraces = !0;
                        ta = function () {
                            if (S.haveItemsQueued() && !ca.longStackTraces) throw Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");
                            c.prototype._captureStackTrace = b;
                            c.prototype._attachExtraTrace = h;
                            d.deactivateLongStackTraces();
                            S.enableTrampoline();
                            ca.longStackTraces = !1
                        };
                        c.prototype._captureStackTrace = t;
                        c.prototype._attachExtraTrace = A;
                        d.activateLongStackTraces();
                        S.disableTrampolineIfNecessary()
                    }
                };
                c.hasLongStackTraces =
                    function () {
                        return ca.longStackTraces && H()
                    };
                var ja = function () {
                        try {
                            if ("function" == typeof CustomEvent) {
                                var b = new CustomEvent("CustomEvent");
                                return J.global.dispatchEvent(b),
                                    function (b, c) {
                                        var d = new CustomEvent(b.toLowerCase(), {
                                            detail: c,
                                            cancelable: !0
                                        });
                                        return !J.global.dispatchEvent(d)
                                    }
                            }
                            if ("function" == typeof Event) return b = new Event("CustomEvent"), J.global.dispatchEvent(b),
                                function (b, c) {
                                    var d = new Event(b.toLowerCase(), {
                                        cancelable: !0
                                    });
                                    return d.detail = c, !J.global.dispatchEvent(d)
                                };
                            b = document.createEvent("CustomEvent");
                            return b.initCustomEvent("testingtheevent", !1, !0, {}), J.global.dispatchEvent(b),
                                function (b, c) {
                                    var d = document.createEvent("CustomEvent");
                                    return d.initCustomEvent(b.toLowerCase(), !1, !0, c), !J.global.dispatchEvent(d)
                                }
                        } catch (c) {}
                        return function () {
                            return !1
                        }
                    }(),
                    ha = function () {
                        return J.isNode ? function () {
                            return process.emit.apply(process, arguments)
                        } : J.global ? function (b) {
                            var c = "on" + b.toLowerCase();
                            return (c = J.global[c]) ? (c.apply(J.global, [].slice.call(arguments, 1)), !0) : !1
                        } : function () {
                            return !1
                        }
                    }(),
                    sa = {
                        promiseCreated: h,
                        promiseFulfilled: h,
                        promiseRejected: h,
                        promiseResolved: h,
                        promiseCancelled: h,
                        promiseChained: function (b, c, d) {
                            return {
                                promise: c,
                                child: d
                            }
                        },
                        warning: function (b, c) {
                            return {
                                warning: c
                            }
                        },
                        unhandledRejection: function (b, c, d) {
                            return {
                                reason: c,
                                promise: d
                            }
                        },
                        rejectionHandled: h
                    },
                    la = function (b) {
                        var c = !1;
                        try {
                            c = ha.apply(null, arguments)
                        } catch (d) {
                            S.throwLater(d), c = !0
                        }
                        var f = !1;
                        try {
                            f = ja(b, sa[b].apply(null, arguments))
                        } catch (g) {
                            S.throwLater(g), f = !0
                        }
                        return f || c
                    };
                c.config = function (b) {
                    if (b = Object(b), "longStackTraces" in b && (b.longStackTraces ?
                            c.longStackTraces() : !b.longStackTraces && c.hasLongStackTraces() && ta()), "warnings" in b) {
                        var d = b.warnings;
                        ca.warnings = !!d;
                        da = ca.warnings;
                        J.isObject(d) && "wForgottenReturn" in d && (da = !!d.wForgottenReturn)
                    }
                    if ("cancellation" in b && b.cancellation && !ca.cancellation) {
                        if (S.haveItemsQueued()) throw Error("cannot enable cancellation after promises are in use");
                        c.prototype._clearCancellationData = x;
                        c.prototype._propagateFrom = y;
                        c.prototype._onCancel = u;
                        c.prototype._setOnCancel = v;
                        c.prototype._attachCancellationCallback =
                            p;
                        c.prototype._execute = n;
                        ua = y;
                        ca.cancellation = !0
                    }
                    return "monitoring" in b && (b.monitoring && !ca.monitoring ? (ca.monitoring = !0, c.prototype._fireEvent = la) : !b.monitoring && ca.monitoring && (ca.monitoring = !1, c.prototype._fireEvent = m)), c
                };
                c.prototype._fireEvent = m;
                c.prototype._execute = function (b, c, d) {
                    try {
                        b(c, d)
                    } catch (f) {
                        return f
                    }
                };
                c.prototype._onCancel = function () {};
                c.prototype._setOnCancel = function (b) {};
                c.prototype._attachCancellationCallback = function (b) {};
                c.prototype._captureStackTrace = function () {};
                c.prototype._attachExtraTrace =
                    function () {};
                c.prototype._clearCancellationData = function () {};
                c.prototype._propagateFrom = function (b, c) {};
                var ua = function (b, c) {
                        0 !== (2 & c) && b._isBound() && this._setBoundTo(b._boundTo)
                    },
                    na = function () {
                        return !1
                    },
                    pa = /[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;
                J.inherits(K, Error);
                d.CapturedTrace = K;
                K.prototype.uncycle = function () {
                    var b = this._length;
                    if (!(2 > b)) {
                        for (var c = [], d = {}, f = 0, b = this; void 0 !== b; ++f) c.push(b), b = b._parent;
                        b = this._length = f;
                        for (f = b - 1; 0 <= f; --f) {
                            var g = c[f].stack;
                            void 0 === d[g] && (d[g] = f)
                        }
                        for (f = 0; b > f; ++f)
                            if (g =
                                d[c[f].stack], void 0 !== g && g !== f) {
                                0 < g && (c[g - 1]._parent = void 0, c[g - 1]._length = 1);
                                c[f]._parent = void 0;
                                c[f]._length = 1;
                                d = 0 < f ? c[f - 1] : this;
                                b - 1 > g ? (d._parent = c[g + 1], d._parent.uncycle(), d._length = d._parent._length + 1) : (d._parent = void 0, d._length = 1);
                                b = d._length + 1;
                                for (f -= 2; 0 <= f; --f) c[f]._length = b, b++;
                                break
                            }
                    }
                };
                K.prototype.attachExtraTrace = function (b) {
                    if (!b.__stackCleaned__) {
                        this.uncycle();
                        for (var c = C(b), d = c.message, c = [c.stack], f = this; void 0 !== f;) c.push(F(f.stack.split("\n"))), f = f._parent;
                        for (var f = c[0], g = 1; g < c.length; ++g) {
                            for (var h =
                                    c[g], m = f.length - 1, n = f[m], p = -1, t = h.length - 1; 0 <= t; --t)
                                if (h[t] === n) {
                                    p = t;
                                    break
                                } for (t = p; 0 <= t && f[m] === h[t]; --t) f.pop(), m--;
                            f = h
                        }
                        for (f = 0; f < c.length; ++f)(0 === c[f].length || f + 1 < c.length && c[f][0] === c[f + 1][0]) && (c.splice(f, 1), f--);
                        J.notEnumerableProp(b, "stack", B(d, c));
                        J.notEnumerableProp(b, "__stackCleaned__", !0)
                    }
                };
                var qa = function () {
                    var b = /^\s*at\s*/,
                        c = function (b, c) {
                            return "string" == typeof b ? b : void 0 !== c.name && void 0 !== c.message ? c.toString() : G(c)
                        };
                    if ("number" == typeof Error.stackTraceLimit && "function" == typeof Error.captureStackTrace) {
                        Error.stackTraceLimit +=
                            6;
                        V = b;
                        L = c;
                        var d = Error.captureStackTrace;
                        return na = function (b) {
                                return $.test(b)
                            },
                            function (b, c) {
                                Error.stackTraceLimit += 6;
                                d(b, c);
                                Error.stackTraceLimit -= 6
                            }
                    }
                    var f = Error();
                    if ("string" == typeof f.stack && 0 <= f.stack.split("\n")[0].indexOf("stackDetection@")) return V = /@/, L = c, Y = !0,
                        function (b) {
                            b.stack = Error().stack
                        };
                    var g;
                    try {
                        throw Error();
                    } catch (h) {
                        g = "stack" in h
                    }
                    return "stack" in f || !g || "number" != typeof Error.stackTraceLimit ? (L = function (b, c) {
                        return "string" == typeof b ? b : "object" != typeof c && "function" != typeof c ||
                            void 0 === c.name || void 0 === c.message ? G(c) : c.toString()
                    }, null) : (V = b, L = c, function (b) {
                        Error.stackTraceLimit += 6;
                        try {
                            throw Error();
                        } catch (c) {
                            b.stack = c.stack
                        }
                        Error.stackTraceLimit -= 6
                    })
                }([]);
                "undefined" != typeof console && "undefined" != typeof console.warn && (T = function (b) {
                    console.warn(b)
                }, J.isNode && process.stderr.isTTY ? T = function (b, c) {
                    console.warn((c ? "\u001b[33m" : "\u001b[31m") + b + "\u001b[0m\n")
                } : J.isNode || "string" != typeof Error().stack || (T = function (b, c) {
                    console.warn("%c" + b, c ? "color: darkorange" : "color: red")
                }));
                var ca = {
                    warnings: aa,
                    longStackTraces: !1,
                    cancellation: !1,
                    monitoring: !1
                };
                return X && c.longStackTraces(), {
                    longStackTraces: function () {
                        return ca.longStackTraces
                    },
                    warnings: function () {
                        return ca.warnings
                    },
                    cancellation: function () {
                        return ca.cancellation
                    },
                    monitoring: function () {
                        return ca.monitoring
                    },
                    propagateFromFunction: function () {
                        return ua
                    },
                    boundValueFunction: function () {
                        return z
                    },
                    checkForgottenReturns: function (b, c, d, f, g) {
                        if (void 0 === b && (null !== c && da) && !(void 0 !== g && g._returnedNonUndefined()) && 0 !== (65535 & f._bitField)) {
                            d &&
                                (d += " ");
                            g = b = "";
                            if (c._trace) {
                                for (var h = c._trace.stack.split("\n"), m = F(h), n = m.length - 1; 0 <= n; --n) {
                                    var p = m[n];
                                    if (!O.test(p)) {
                                        (n = p.match(Z)) && (b = "at " + n[1] + ":" + n[2] + ":" + n[3] + " ");
                                        break
                                    }
                                }
                                if (0 < m.length) {
                                    m = m[0];
                                    for (n = 0; n < h.length; ++n)
                                        if (h[n] === m) {
                                            0 < n && (g = "\n" + h[n - 1]);
                                            break
                                        }
                                }
                            }
                            f._warn("a promise was created in a " + d + "handler " + b + "but was not returned from it, see http://goo.gl/rRqMUw" + g, !0, c)
                        }
                    },
                    setBounds: function (b, c) {
                        if (H()) {
                            for (var d, f, g = b.stack.split("\n"), h = c.stack.split("\n"), m = -1, n = -1, p = 0; p < g.length; ++p) {
                                var t =
                                    M(g[p]);
                                if (t) {
                                    d = t.fileName;
                                    m = t.line;
                                    break
                                }
                            }
                            for (p = 0; p < h.length; ++p)
                                if (t = M(h[p])) {
                                    f = t.fileName;
                                    n = t.line;
                                    break
                                } 0 > m || 0 > n || !d || !f || d !== f || m >= n || (na = function (b) {
                                return $.test(b) ? !0 : (b = M(b)) && b.fileName === d && m <= b.line && b.line <= n ? !0 : !1
                            })
                        }
                    },
                    warn: w,
                    deprecated: function (b, c) {
                        var d = b + " is deprecated and will be removed in a future version.";
                        return c && (d += " Use " + c + " instead."), w(d)
                    },
                    CapturedTrace: K,
                    fireDomEvent: ja,
                    fireGlobalEvent: ha
                }
            }
        }, {
            "./errors": 12,
            "./util": 36
        }],
        10: [function (b, c, d) {
            c.exports = function (b) {
                function c() {
                    return this.value
                }

                function d() {
                    throw this.reason;
                }
                b.prototype["return"] = b.prototype.thenReturn = function (d) {
                    return d instanceof b && d.suppressUnhandledRejections(), this._then(c, void 0, void 0, {
                        value: d
                    }, void 0)
                };
                b.prototype["throw"] = b.prototype.thenThrow = function (b) {
                    return this._then(d, void 0, void 0, {
                        reason: b
                    }, void 0)
                };
                b.prototype.catchThrow = function (b) {
                    if (1 >= arguments.length) return this._then(void 0, d, void 0, {
                        reason: b
                    }, void 0);
                    var c = arguments[1];
                    return this.caught(b, function () {
                        throw c;
                    })
                };
                b.prototype.catchReturn = function (d) {
                    if (1 >=
                        arguments.length) return d instanceof b && d.suppressUnhandledRejections(), this._then(void 0, c, void 0, {
                        value: d
                    }, void 0);
                    var h = arguments[1];
                    h instanceof b && h.suppressUnhandledRejections();
                    return this.caught(d, function () {
                        return h
                    })
                }
            }
        }, {}],
        11: [function (b, c, d) {
            c.exports = function (b, c) {
                function d() {
                    return n(this)
                }
                var m = b.reduce,
                    n = b.all;
                b.prototype.each = function (b) {
                    return m(this, b, c, 0)._then(d, void 0, void 0, this, void 0)
                };
                b.prototype.mapSeries = function (b) {
                    return m(this, b, c, c)
                };
                b.each = function (b, f) {
                    return m(b,
                        f, c, 0)._then(d, void 0, void 0, b, void 0)
                };
                b.mapSeries = function (b, d) {
                    return m(b, d, c, c)
                }
            }
        }, {}],
        12: [function (b, c, d) {
            function f(b, c) {
                function d(f) {
                    return this instanceof d ? (u(this, "message", "string" == typeof f ? f : c), u(this, "name", b), void(Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : Error.call(this))) : new d(f)
                }
                return p(d, Error), d
            }

            function g(b) {
                return this instanceof g ? (u(this, "name", "OperationalError"), u(this, "message", b), this.cause = b, this.isOperational = !0, void(b instanceof Error ?
                    (u(this, "message", b.message), u(this, "stack", b.stack)) : Error.captureStackTrace && Error.captureStackTrace(this, this.constructor))) : new g(b)
            }
            var h, m;
            d = b("./es5");
            var n = d.freeze;
            b = b("./util");
            var p = b.inherits,
                u = b.notEnumerableProp;
            b = f("Warning", "warning");
            var v = f("CancellationError", "cancellation error"),
                x = f("TimeoutError", "timeout error"),
                y = f("AggregateError", "aggregate error");
            try {
                h = TypeError, m = RangeError
            } catch (z) {
                h = f("TypeError", "type error"), m = f("RangeError", "range error")
            }
            for (var t = "join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),
                    A = 0; A < t.length; ++A) "function" == typeof Array.prototype[t[A]] && (y.prototype[t[A]] = Array.prototype[t[A]]);
            d.defineProperty(y.prototype, "length", {
                value: 0,
                configurable: !1,
                writable: !0,
                enumerable: !0
            });
            y.prototype.isOperational = !0;
            var w = 0;
            y.prototype.toString = function () {
                var b = Array(4 * w + 1).join(" "),
                    c = "\n" + b + "AggregateError of:\n";
                w++;
                for (var b = Array(4 * w + 1).join(" "), d = 0; d < this.length; ++d) {
                    for (var f = this[d] === this ? "[Circular AggregateError]" : this[d] + "", f = f.split("\n"), g = 0; g < f.length; ++g) f[g] = b + f[g];
                    f = f.join("\n");
                    c += f + "\n"
                }
                return w--, c
            };
            p(g, Error);
            (t = Error.__BluebirdErrorTypes__) || (t = n({
                CancellationError: v,
                TimeoutError: x,
                OperationalError: g,
                RejectionError: g,
                AggregateError: y
            }), d.defineProperty(Error, "__BluebirdErrorTypes__", {
                value: t,
                writable: !1,
                enumerable: !1,
                configurable: !1
            }));
            c.exports = {
                Error: Error,
                TypeError: h,
                RangeError: m,
                CancellationError: t.CancellationError,
                OperationalError: t.OperationalError,
                TimeoutError: t.TimeoutError,
                AggregateError: t.AggregateError,
                Warning: b
            }
        }, {
            "./es5": 13,
            "./util": 36
        }],
        13: [function (b,
            c, d) {
            if (b = function () {
                    return void 0 === this
                }()) c.exports = {
                freeze: Object.freeze,
                defineProperty: Object.defineProperty,
                getDescriptor: Object.getOwnPropertyDescriptor,
                keys: Object.keys,
                names: Object.getOwnPropertyNames,
                getPrototypeOf: Object.getPrototypeOf,
                isArray: Array.isArray,
                isES5: b,
                propertyIsWritable: function (b, c) {
                    var d = Object.getOwnPropertyDescriptor(b, c);
                    return !(d && !d.writable && !d.set)
                }
            };
            else {
                var f = {}.hasOwnProperty,
                    g = {}.toString,
                    h = {}.constructor.prototype;
                d = function (b) {
                    var c = [],
                        d;
                    for (d in b) f.call(b,
                        d) && c.push(d);
                    return c
                };
                c.exports = {
                    isArray: function (b) {
                        try {
                            return "[object Array]" === g.call(b)
                        } catch (c) {
                            return !1
                        }
                    },
                    keys: d,
                    names: d,
                    defineProperty: function (b, c, d) {
                        return b[c] = d.value, b
                    },
                    getDescriptor: function (b, c) {
                        return {
                            value: b[c]
                        }
                    },
                    freeze: function (b) {
                        return b
                    },
                    getPrototypeOf: function (b) {
                        try {
                            return Object(b).constructor.prototype
                        } catch (c) {
                            return h
                        }
                    },
                    isES5: b,
                    propertyIsWritable: function () {
                        return !0
                    }
                }
            }
        }, {}],
        14: [function (b, c, d) {
            c.exports = function (b, c) {
                var d = b.map;
                b.prototype.filter = function (b, f) {
                    return d(this,
                        b, f, c)
                };
                b.filter = function (b, f, p) {
                    return d(b, f, p, c)
                }
            }
        }, {}],
        15: [function (b, c, d) {
            c.exports = function (c, d) {
                function h(b, c, d) {
                    this.promise = b;
                    this.type = c;
                    this.handler = d;
                    this.called = !1;
                    this.cancelPromise = null
                }

                function m(b) {
                    this.finallyHandler = b
                }

                function n(b, c) {
                    return null != b.cancelPromise ? (1 < arguments.length ? b.cancelPromise._reject(c) : b.cancelPromise._cancel(), b.cancelPromise = null, !0) : !1
                }

                function p() {
                    return v.call(this, this.promise._target()._settledValue())
                }

                function u(b) {
                    return n(this, b) ? void 0 : (z.e = b, z)
                }

                function v(b) {
                    var h = this.promise,
                        v = this.handler;
                    if (!this.called && (this.called = !0, v = this.isFinallyHandler() ? v.call(h._boundValue()) : v.call(h._boundValue(), b), void 0 !== v && (h._setReturnedNonUndefined(), v = d(v, h), v instanceof c))) {
                        if (null != this.cancelPromise) {
                            if (v._isCancelled()) return b = new y("late cancellation observer"), h._attachExtraTrace(b), z.e = b, z;
                            v.isPending() && v._attachCancellationCallback(new m(this))
                        }
                        return v._then(p, u, void 0, this, void 0)
                    }
                    return h.isRejected() ? (n(this), z.e = b, z) : (n(this), b)
                }
                var x =
                    b("./util"),
                    y = c.CancellationError,
                    z = x.errorObj;
                return h.prototype.isFinallyHandler = function () {
                    return 0 === this.type
                }, m.prototype._resultCancelled = function () {
                    n(this.finallyHandler)
                }, c.prototype._passThrough = function (b, c, d, f) {
                    return "function" != typeof b ? this.then() : this._then(d, f, void 0, new h(this, c, b), void 0)
                }, c.prototype.lastly = c.prototype["finally"] = function (b) {
                    return this._passThrough(b, 0, v, v)
                }, c.prototype.tap = function (b) {
                    return this._passThrough(b, 1, v)
                }, h
            }
        }, {
            "./util": 36
        }],
        16: [function (b, c, d) {
            c.exports =
                function (c, d, h, m, n, p) {
                    function u(b, d, g, m) {
                        if (p.cancellation()) {
                            var n = new c(h),
                                u = this._finallyPromise = new c(h);
                            this._promise = n.lastly(function () {
                                return u
                            });
                            n._captureStackTrace();
                            n._setOnCancel(this)
                        } else(this._promise = new c(h))._captureStackTrace();
                        this._stack = m;
                        this._generatorFunction = b;
                        this._receiver = d;
                        this._generator = void 0;
                        this._yieldHandlers = "function" == typeof g ? [g].concat(t) : t;
                        this._yieldedPromise = null;
                        this._cancellationPhase = !1
                    }
                    var v = b("./errors").TypeError,
                        x = b("./util"),
                        y = x.errorObj,
                        z = x.tryCatch,
                        t = [];
                    x.inherits(u, n);
                    u.prototype._isResolved = function () {
                        return null === this._promise
                    };
                    u.prototype._cleanup = function () {
                        this._promise = this._generator = null;
                        p.cancellation() && null !== this._finallyPromise && (this._finallyPromise._fulfill(), this._finallyPromise = null)
                    };
                    u.prototype._promiseCancelled = function () {
                        if (!this._isResolved()) {
                            var b;
                            "undefined" != typeof this._generator["return"] ? (this._promise._pushContext(), b = z(this._generator["return"]).call(this._generator, void 0)) : (b = new c.CancellationError("generator .return() sentinel"),
                                c.coroutine.returnSentinel = b, this._promise._attachExtraTrace(b), this._promise._pushContext(), b = z(this._generator["throw"]).call(this._generator, b));
                            this._promise._popContext();
                            this._cancellationPhase = !0;
                            this._yieldedPromise = null;
                            this._continue(b)
                        }
                    };
                    u.prototype._promiseFulfilled = function (b) {
                        this._yieldedPromise = null;
                        this._promise._pushContext();
                        b = z(this._generator.next).call(this._generator, b);
                        this._promise._popContext();
                        this._continue(b)
                    };
                    u.prototype._promiseRejected = function (b) {
                        this._yieldedPromise =
                            null;
                        this._promise._attachExtraTrace(b);
                        this._promise._pushContext();
                        b = z(this._generator["throw"]).call(this._generator, b);
                        this._promise._popContext();
                        this._continue(b)
                    };
                    u.prototype._resultCancelled = function () {
                        if (this._yieldedPromise instanceof c) {
                            var b = this._yieldedPromise;
                            this._yieldedPromise = null;
                            b.cancel()
                        }
                    };
                    u.prototype.promise = function () {
                        return this._promise
                    };
                    u.prototype._run = function () {
                        this._generator = this._generatorFunction.call(this._receiver);
                        this._receiver = this._generatorFunction = void 0;
                        this._promiseFulfilled(void 0)
                    };
                    u.prototype._continue = function (b) {
                        var d = this._promise;
                        if (b === y) return this._cleanup(), this._cancellationPhase ? d.cancel() : d._rejectCallback(b.e, !1);
                        var g = b.value;
                        if (!0 === b.done) return this._cleanup(), this._cancellationPhase ? d.cancel() : d._resolveCallback(g);
                        b = m(g, this._promise);
                        if (d = !(b instanceof c)) {
                            a: {
                                for (var h = b, n = this._yieldHandlers, d = this._promise, p = 0; p < n.length; ++p) {
                                    d._pushContext();
                                    var t = z(n[p])(h);
                                    if (d._popContext(), t === y) {
                                        d._pushContext();
                                        h = c.reject(y.e);
                                        d =
                                            (d._popContext(), h);
                                        break a
                                    }
                                    t = m(t, d);
                                    if (t instanceof c) {
                                        d = t;
                                        break a
                                    }
                                }
                                d = null
                            }
                            d = (b = d, null === b)
                        }
                        if (d) return void this._promiseRejected(new v("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s", g) + "From coroutine:\n" + this._stack.split("\n").slice(1, -7).join("\n")));
                        b = b._target();
                        g = b._bitField;
                        0 === (50397184 & g) ? (this._yieldedPromise = b, b._proxy(this, null)) : 0 !== (33554432 & g) ? c._async.invoke(this._promiseFulfilled, this, b._value()) : 0 !== (16777216 & g) ?
                            c._async.invoke(this._promiseRejected, this, b._reason()) : this._promiseCancelled()
                    };
                    c.coroutine = function (b, c) {
                        if ("function" != typeof b) throw new v("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");
                        var d = Object(c).yieldHandler,
                            f = Error().stack;
                        return function () {
                            var c = b.apply(this, arguments),
                                g = new u(void 0, void 0, d, f),
                                h = g.promise();
                            return g._generator = c, g._promiseFulfilled(void 0), h
                        }
                    };
                    c.coroutine.addYieldHandler = function (b) {
                        if ("function" != typeof b) throw new v("expecting a function but got " +
                            x.classString(b));
                        t.push(b)
                    };
                    c.spawn = function (b) {
                        if (p.deprecated("Promise.spawn()", "Promise.coroutine()"), "function" != typeof b) return d("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");
                        b = new u(b, this);
                        var h = b.promise();
                        return b._run(c.spawn), h
                    }
                }
        }, {
            "./errors": 12,
            "./util": 36
        }],
        17: [function (b, c, d) {
            c.exports = function (c, d, h, m, n, p) {
                h = b("./util");
                h.canEvaluate;
                h.tryCatch;
                h.errorObj;
                c.join = function () {
                    var b, c = arguments.length - 1;
                    0 < c && "function" == typeof arguments[c] && (b = arguments[c]);
                    c = [].slice.call(arguments);
                    b && c.pop();
                    c = (new d(c)).promise();
                    return void 0 !== b ? c.spread(b) : c
                }
            }
        }, {
            "./util": 36
        }],
        18: [function (b, c, d) {
            c.exports = function (c, d, h, m, n, p) {
                function u(b, c, d, f) {
                    this.constructor$(b);
                    this._promise._captureStackTrace();
                    b = x();
                    this._callback = null === b ? c : y.domainBind(b, c);
                    this._preservedValues = f === n ? Array(this.length()) : null;
                    this._limit = d;
                    this._inFlight = 0;
                    this._queue = [];
                    A.invoke(this._asyncInit, this, void 0)
                }

                function v(b, d, g, m) {
                    if ("function" != typeof d) return h("expecting a function but got " +
                        y.classString(d));
                    var n = 0;
                    if (void 0 !== g) {
                        if ("object" != typeof g || null === g) return c.reject(new TypeError("options argument must be an object but it is " + y.classString(g)));
                        if ("number" != typeof g.concurrency) return c.reject(new TypeError("'concurrency' must be a number but it is " + y.classString(g.concurrency)));
                        n = g.concurrency
                    }
                    return n = "number" == typeof n && isFinite(n) && 1 <= n ? n : 0, (new u(b, d, n, m)).promise()
                }
                var x = c._getDomain,
                    y = b("./util"),
                    z = y.tryCatch,
                    t = y.errorObj,
                    A = c._async;
                y.inherits(u, d);
                u.prototype._asyncInit =
                    function () {
                        this._init$(void 0, -2)
                    };
                u.prototype._init = function () {};
                u.prototype._promiseFulfilled = function (b, d) {
                    var g = this._values,
                        h = this.length(),
                        n = this._preservedValues,
                        u = this._limit;
                    if (0 > d) {
                        if (d = -1 * d - 1, g[d] = b, 1 <= u && (this._inFlight--, this._drainQueue(), this._isResolved())) return !0
                    } else {
                        if (1 <= u && this._inFlight >= u) return g[d] = b, this._queue.push(d), !1;
                        null !== n && (n[d] = b);
                        var v = this._promise,
                            y = this._callback,
                            x = v._boundValue();
                        v._pushContext();
                        y = z(y).call(x, b, d, h);
                        x = v._popContext();
                        if (p.checkForgottenReturns(y,
                                x, null !== n ? "Promise.filter" : "Promise.map", v), y === t) return this._reject(y.e), !0;
                        v = m(y, this._promise);
                        if (v instanceof c) {
                            v = v._target();
                            y = v._bitField;
                            if (0 === (50397184 & y)) return 1 <= u && this._inFlight++, g[d] = v, v._proxy(this, -1 * (d + 1)), !1;
                            if (0 === (33554432 & y)) return 0 !== (16777216 & y) ? (this._reject(v._reason()), !0) : (this._cancel(), !0);
                            y = v._value()
                        }
                        g[d] = y
                    }
                    return ++this._totalResolved >= h ? (null !== n ? this._filter(g, n) : this._resolve(g), !0) : !1
                };
                u.prototype._drainQueue = function () {
                    for (var b = this._queue, c = this._limit,
                            d = this._values; 0 < b.length && this._inFlight < c && !this._isResolved();) {
                        var f = b.pop();
                        this._promiseFulfilled(d[f], f)
                    }
                };
                u.prototype._filter = function (b, c) {
                    for (var d = c.length, f = Array(d), g = 0, h = 0; d > h; ++h) b[h] && (f[g++] = c[h]);
                    f.length = g;
                    this._resolve(f)
                };
                u.prototype.preservedValues = function () {
                    return this._preservedValues
                };
                c.prototype.map = function (b, c) {
                    return v(this, b, c, null)
                };
                c.map = function (b, c, d, f) {
                    return v(b, c, d, f)
                }
            }
        }, {
            "./util": 36
        }],
        19: [function (b, c, d) {
            c.exports = function (c, d, h, m, n) {
                var p = b("./util"),
                    u = p.tryCatch;
                c.method = function (b) {
                    if ("function" != typeof b) throw new c.TypeError("expecting a function but got " + p.classString(b));
                    return function () {
                        var h = new c(d);
                        h._captureStackTrace();
                        h._pushContext();
                        var m = u(b).apply(this, arguments),
                            p = h._popContext();
                        return n.checkForgottenReturns(m, p, "Promise.method", h), h._resolveFromSyncValue(m), h
                    }
                };
                c.attempt = c["try"] = function (b) {
                    if ("function" != typeof b) return m("expecting a function but got " + p.classString(b));
                    var h = new c(d);
                    h._captureStackTrace();
                    h._pushContext();
                    var y;
                    if (1 < arguments.length) {
                        n.deprecated("calling Promise.try with more than 1 argument");
                        y = arguments[1];
                        var z = arguments[2];
                        y = p.isArray(y) ? u(b).apply(z, y) : u(b).call(z, y)
                    } else y = u(b)();
                    z = h._popContext();
                    return n.checkForgottenReturns(y, z, "Promise.try", h), h._resolveFromSyncValue(y), h
                };
                c.prototype._resolveFromSyncValue = function (b) {
                    b === p.errorObj ? this._rejectCallback(b.e, !1) : this._resolveCallback(b, !0)
                }
            }
        }, {
            "./util": 36
        }],
        20: [function (b, c, d) {
            var f = b("./util"),
                g = f.maybeWrapAsError,
                h = b("./errors").OperationalError,
                m = b("./es5"),
                n = /^(?:name|message|stack|cause)$/;
            c.exports = function (b, c) {
                return function (d, x) {
                    if (null !== b) {
                        if (d) {
                            var y;
                            y = g(d);
                            var z;
                            if (y instanceof Error && m.getPrototypeOf(y) === Error.prototype) {
                                z = new h(y);
                                z.name = y.name;
                                z.message = y.message;
                                z.stack = y.stack;
                                for (var t = m.keys(y), A = 0; A < t.length; ++A) {
                                    var w = t[A];
                                    n.test(w) || (z[w] = y[w])
                                }
                                y = z
                            } else y = (f.markAsOriginatingFromRejection(y), y);
                            b._attachExtraTrace(y);
                            b._reject(y)
                        } else c ? (y = [].slice.call(arguments, 1), b._fulfill(y)) : b._fulfill(x);
                        b = null
                    }
                }
            }
        }, {
            "./errors": 12,
            "./es5": 13,
            "./util": 36
        }],
        21: [function (b, c, d) {
            c.exports = function (c) {
                function d(b, c) {
                    if (!n.isArray(b)) return h.call(this, b, c);
                    var f = u(c).apply(this._boundValue(), [null].concat(b));
                    f === v && p.throwLater(f.e)
                }

                function h(b, c) {
                    var d = this._boundValue(),
                        d = void 0 === b ? u(c).call(d, null) : u(c).call(d, null, b);
                    d === v && p.throwLater(d.e)
                }

                function m(b, c) {
                    if (!b) {
                        var d = Error(b + "");
                        d.cause = b;
                        b = d
                    }
                    d = u(c).call(this._boundValue(), b);
                    d === v && p.throwLater(d.e)
                }
                var n = b("./util"),
                    p = c._async,
                    u = n.tryCatch,
                    v = n.errorObj;
                c.prototype.asCallback =
                    c.prototype.nodeify = function (b, c) {
                        if ("function" == typeof b) {
                            var f = h;
                            void 0 !== c && Object(c).spread && (f = d);
                            this._then(f, m, void 0, this, b)
                        }
                        return this
                    }
            }
        }, {
            "./util": 36
        }],
        22: [function (b, c, d) {
            c.exports = function () {
                function d() {}

                function g(b) {
                    this._bitField = 0;
                    this._receiver0 = this._promise0 = this._rejectionHandler0 = this._fulfillmentHandler0 = void 0;
                    if (b !== C) {
                        if ("function" != typeof b) throw new B("expecting a function but got " + z.classString(b));
                        if (this.constructor !== g) throw new B("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");
                        this._resolveFromExecutor(b)
                    }
                    this._promiseCreated();
                    this._fireEvent("promiseCreated", this)
                }

                function h(b) {
                    this.promise._resolveCallback(b)
                }

                function m(b) {
                    this.promise._rejectCallback(b, !1)
                }

                function n(b) {
                    var c = new g(C);
                    c._fulfillmentHandler0 = b;
                    c._rejectionHandler0 = b;
                    c._promise0 = b;
                    c._receiver0 = b
                }
                var p, u = function () {
                        return new B("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")
                    },
                    v = function () {
                        return new g.PromiseInspection(this._target())
                    },
                    x = function (b) {
                        return g.reject(new B(b))
                    },
                    y = {},
                    z = b("./util");
                p = z.isNode ? function () {
                    var b = process.domain;
                    return void 0 === b && (b = null), b
                } : function () {
                    return null
                };
                z.notEnumerableProp(g, "_getDomain", p);
                var t = b("./es5"),
                    A = b("./async"),
                    w = new A;
                t.defineProperty(g, "_async", {
                    value: w
                });
                var t = b("./errors"),
                    B = g.TypeError = t.TypeError;
                g.RangeError = t.RangeError;
                var F = g.CancellationError = t.CancellationError;
                g.TimeoutError = t.TimeoutError;
                g.OperationalError = t.OperationalError;
                g.RejectionError = t.OperationalError;
                g.AggregateError = t.AggregateError;
                var C = function () {},
                    D = {},
                    E = {},
                    G = b("./thenables")(g, C),
                    H = b("./promise_array")(g, C, G, x, d),
                    t = b("./context")(g),
                    M = t.create,
                    K = b("./debuggability")(g, t),
                    N = (K.CapturedTrace, b("./finally")(g, G)),
                    U = b("./catch_filter")(E),
                    T = b("./nodeback"),
                    P = z.errorObj,
                    S = z.tryCatch;
                return g.prototype.toString = function () {
                        return "[object Promise]"
                    }, g.prototype.caught = g.prototype["catch"] = function (b) {
                        var c = arguments.length;
                        if (1 < c) {
                            var d, f = Array(c - 1),
                                g = 0;
                            for (d = 0; c - 1 > d; ++d) {
                                var h = arguments[d];
                                if (!z.isObject(h)) return x("expecting an object but got A catch statement predicate " +
                                    z.classString(h));
                                f[g++] = h
                            }
                            return f.length = g, b = arguments[d], this.then(void 0, U(f, b, this))
                        }
                        return this.then(void 0, b)
                    }, g.prototype.reflect = function () {
                        return this._then(v, v, void 0, this, void 0)
                    }, g.prototype.then = function (b, c) {
                        if (K.warnings() && 0 < arguments.length && "function" != typeof b && "function" != typeof c) {
                            var d = ".then() only accepts functions but was passed: " + z.classString(b);
                            1 < arguments.length && (d += ", " + z.classString(c));
                            this._warn(d)
                        }
                        return this._then(b, c, void 0, void 0, void 0)
                    }, g.prototype.done = function (b,
                        c) {
                        this._then(b, c, void 0, void 0, void 0)._setIsFinal()
                    }, g.prototype.spread = function (b) {
                        return "function" != typeof b ? x("expecting a function but got " + z.classString(b)) : this.all()._then(b, void 0, void 0, D, void 0)
                    }, g.prototype.toJSON = function () {
                        var b = {
                            isFulfilled: !1,
                            isRejected: !1,
                            fulfillmentValue: void 0,
                            rejectionReason: void 0
                        };
                        return this.isFulfilled() ? (b.fulfillmentValue = this.value(), b.isFulfilled = !0) : this.isRejected() && (b.rejectionReason = this.reason(), b.isRejected = !0), b
                    }, g.prototype.all = function () {
                        return 0 <
                            arguments.length && this._warn(".all() was passed arguments but it does not take any"), (new H(this)).promise()
                    }, g.prototype.error = function (b) {
                        return this.caught(z.originatesFromRejection, b)
                    }, g.getNewLibraryCopy = c.exports, g.is = function (b) {
                        return b instanceof g
                    }, g.fromNode = g.fromCallback = function (b) {
                        var c = new g(C);
                        c._captureStackTrace();
                        var d = 1 < arguments.length ? !!Object(arguments[1]).multiArgs : !1,
                            d = S(b)(T(c, d));
                        return d === P && c._rejectCallback(d.e, !0), c._isFateSealed() || c._setAsyncGuaranteed(), c
                    }, g.all =
                    function (b) {
                        return (new H(b)).promise()
                    }, g.cast = function (b) {
                        var c = G(b);
                        return c instanceof g || (c = new g(C), c._captureStackTrace(), c._setFulfilled(), c._rejectionHandler0 = b), c
                    }, g.resolve = g.fulfilled = g.cast, g.reject = g.rejected = function (b) {
                        var c = new g(C);
                        return c._captureStackTrace(), c._rejectCallback(b, !0), c
                    }, g.setScheduler = function (b) {
                        if ("function" != typeof b) throw new B("expecting a function but got " + z.classString(b));
                        return w.setScheduler(b)
                    }, g.prototype._then = function (b, c, d, f, h) {
                        var m = void 0 !== h;
                        h =
                            m ? h : new g(C);
                        d = this._target();
                        var n = d._bitField;
                        m || (h._propagateFrom(this, 3), h._captureStackTrace(), void 0 === f && 0 !== (2097152 & this._bitField) && (f = 0 !== (50397184 & n) ? this._boundValue() : d === this ? void 0 : this._boundTo), this._fireEvent("promiseChained", this, h));
                        m = p();
                        if (0 !== (50397184 & n)) {
                            var t, u, v = d._settlePromiseCtx;
                            0 !== (33554432 & n) ? (u = d._rejectionHandler0, t = b) : 0 !== (16777216 & n) ? (u = d._fulfillmentHandler0, t = c, d._unsetRejectionIsUnhandled()) : (v = d._settlePromiseLateCancellationObserver, u = new F("late cancellation observer"),
                                d._attachExtraTrace(u), t = c);
                            w.invoke(v, d, {
                                handler: null === m ? t : "function" == typeof t && z.domainBind(m, t),
                                promise: h,
                                receiver: f,
                                value: u
                            })
                        } else d._addCallbacks(b, c, h, f, m);
                        return h
                    }, g.prototype._length = function () {
                        return 65535 & this._bitField
                    }, g.prototype._isFateSealed = function () {
                        return 0 !== (117506048 & this._bitField)
                    }, g.prototype._isFollowing = function () {
                        return 67108864 === (67108864 & this._bitField)
                    }, g.prototype._setLength = function (b) {
                        this._bitField = -65536 & this._bitField | 65535 & b
                    }, g.prototype._setFulfilled = function () {
                        this._bitField |=
                            33554432;
                        this._fireEvent("promiseFulfilled", this)
                    }, g.prototype._setRejected = function () {
                        this._bitField |= 16777216;
                        this._fireEvent("promiseRejected", this)
                    }, g.prototype._setFollowing = function () {
                        this._bitField |= 67108864;
                        this._fireEvent("promiseResolved", this)
                    }, g.prototype._setIsFinal = function () {
                        this._bitField |= 4194304
                    }, g.prototype._isFinal = function () {
                        return 0 < (4194304 & this._bitField)
                    }, g.prototype._unsetCancelled = function () {
                        this._bitField &= -65537
                    }, g.prototype._setCancelled = function () {
                        this._bitField |= 65536;
                        this._fireEvent("promiseCancelled", this)
                    }, g.prototype._setWillBeCancelled = function () {
                        this._bitField |= 8388608
                    }, g.prototype._setAsyncGuaranteed = function () {
                        w.hasCustomScheduler() || (this._bitField |= 134217728)
                    }, g.prototype._receiverAt = function (b) {
                        b = 0 === b ? this._receiver0 : this[4 * b - 4 + 3];
                        return b === y ? void 0 : void 0 === b && this._isBound() ? this._boundValue() : b
                    }, g.prototype._promiseAt = function (b) {
                        return this[4 * b - 4 + 2]
                    }, g.prototype._fulfillmentHandlerAt = function (b) {
                        return this[4 * b - 4 + 0]
                    }, g.prototype._rejectionHandlerAt =
                    function (b) {
                        return this[4 * b - 4 + 1]
                    }, g.prototype._boundValue = function () {}, g.prototype._migrateCallback0 = function (b) {
                        var c = (b._bitField, b._fulfillmentHandler0),
                            d = b._rejectionHandler0,
                            f = b._promise0;
                        b = b._receiverAt(0);
                        void 0 === b && (b = y);
                        this._addCallbacks(c, d, f, b, null)
                    }, g.prototype._migrateCallbackAt = function (b, c) {
                        var d = b._fulfillmentHandlerAt(c),
                            f = b._rejectionHandlerAt(c),
                            g = b._promiseAt(c),
                            h = b._receiverAt(c);
                        void 0 === h && (h = y);
                        this._addCallbacks(d, f, g, h, null)
                    }, g.prototype._addCallbacks = function (b, c, d, f,
                        g) {
                        var h = this._length();
                        if (65531 <= h && (h = 0, this._setLength(0)), 0 === h) this._promise0 = d, this._receiver0 = f, "function" == typeof b && (this._fulfillmentHandler0 = null === g ? b : z.domainBind(g, b)), "function" == typeof c && (this._rejectionHandler0 = null === g ? c : z.domainBind(g, c));
                        else {
                            var m = 4 * h - 4;
                            this[m + 2] = d;
                            this[m + 3] = f;
                            "function" == typeof b && (this[m + 0] = null === g ? b : z.domainBind(g, b));
                            "function" == typeof c && (this[m + 1] = null === g ? c : z.domainBind(g, c))
                        }
                        return this._setLength(h + 1), h
                    }, g.prototype._proxy = function (b, c) {
                        this._addCallbacks(void 0,
                            void 0, c, b, null)
                    }, g.prototype._resolveCallback = function (b, c) {
                        if (0 === (117506048 & this._bitField)) {
                            if (b === this) return this._rejectCallback(u(), !1);
                            var d = G(b, this);
                            if (!(d instanceof g)) return this._fulfill(b);
                            c && this._propagateFrom(d, 2);
                            d = d._target();
                            if (d === this) return void this._reject(u());
                            var f = d._bitField;
                            if (0 === (50397184 & f)) {
                                f = this._length();
                                0 < f && d._migrateCallback0(this);
                                for (var h = 1; f > h; ++h) d._migrateCallbackAt(this, h);
                                this._setFollowing();
                                this._setLength(0);
                                this._setFollowee(d)
                            } else 0 !== (33554432 &
                                f) ? this._fulfill(d._value()) : 0 !== (16777216 & f) ? this._reject(d._reason()) : (f = new F("late cancellation observer"), d._attachExtraTrace(f), this._reject(f))
                        }
                    }, g.prototype._rejectCallback = function (b, c, d) {
                        var f = z.ensureErrorObject(b),
                            g = f === b;
                        !g && (!d && K.warnings()) && (d = "a promise was rejected with a non-error: " + z.classString(b), this._warn(d, !0));
                        this._attachExtraTrace(f, c ? g : !1);
                        this._reject(b)
                    }, g.prototype._resolveFromExecutor = function (b) {
                        var c = this;
                        this._captureStackTrace();
                        this._pushContext();
                        var d = !0;
                        b = this._execute(b, function (b) {
                            c._resolveCallback(b)
                        }, function (b) {
                            c._rejectCallback(b, d)
                        });
                        d = !1;
                        this._popContext();
                        void 0 !== b && c._rejectCallback(b, !0)
                    }, g.prototype._settlePromiseFromHandler = function (b, c, d, f) {
                        var g = f._bitField;
                        if (0 === (65536 & g)) {
                            f._pushContext();
                            var h;
                            c === D ? d && "number" == typeof d.length ? h = S(b).apply(this._boundValue(), d) : (h = P, h.e = new B("cannot .spread() a non-array: " + z.classString(d))) : h = S(b).call(c, d);
                            b = f._popContext();
                            g = f._bitField;
                            0 === (65536 & g) && (h === E ? f._reject(d) : h === P ? f._rejectCallback(h.e,
                                !1) : (K.checkForgottenReturns(h, b, "", f, this), f._resolveCallback(h)))
                        }
                    }, g.prototype._target = function () {
                        for (var b = this; b._isFollowing();) b = b._followee();
                        return b
                    }, g.prototype._followee = function () {
                        return this._rejectionHandler0
                    }, g.prototype._setFollowee = function (b) {
                        this._rejectionHandler0 = b
                    }, g.prototype._settlePromise = function (b, c, h, m) {
                        var n = b instanceof g,
                            p = this._bitField,
                            t = 0 !== (134217728 & p);
                        0 !== (65536 & p) ? (n && b._invokeInternalOnCancel(), h instanceof N && h.isFinallyHandler() ? (h.cancelPromise = b, S(c).call(h,
                            m) === P && b._reject(P.e)) : c === v ? b._fulfill(v.call(h)) : h instanceof d ? h._promiseCancelled(b) : n || b instanceof H ? b._cancel() : h.cancel()) : "function" == typeof c ? n ? (t && b._setAsyncGuaranteed(), this._settlePromiseFromHandler(c, h, m, b)) : c.call(h, m, b) : h instanceof d ? h._isResolved() || (0 !== (33554432 & p) ? h._promiseFulfilled(m, b) : h._promiseRejected(m, b)) : n && (t && b._setAsyncGuaranteed(), 0 !== (33554432 & p) ? b._fulfill(m) : b._reject(m))
                    }, g.prototype._settlePromiseLateCancellationObserver = function (b) {
                        var c = b.handler,
                            d = b.promise,
                            f = b.receiver;
                        b = b.value;
                        "function" == typeof c ? d instanceof g ? this._settlePromiseFromHandler(c, f, b, d) : c.call(f, b, d) : d instanceof g && d._reject(b)
                    }, g.prototype._settlePromiseCtx = function (b) {
                        this._settlePromise(b.promise, b.handler, b.receiver, b.value)
                    }, g.prototype._settlePromise0 = function (b, c, d) {
                        d = this._promise0;
                        var f = this._receiverAt(0);
                        this._receiver0 = this._promise0 = void 0;
                        this._settlePromise(d, b, f, c)
                    }, g.prototype._clearCallbackDataAtIndex = function (b) {
                        b = 4 * b - 4;
                        this[b + 2] = this[b + 3] = this[b + 0] = this[b + 1] = void 0
                    },
                    g.prototype._fulfill = function (b) {
                        var c = this._bitField;
                        if (!((117506048 & c) >>> 16)) {
                            if (b === this) return b = u(), this._attachExtraTrace(b), this._reject(b);
                            this._setFulfilled();
                            this._rejectionHandler0 = b;
                            0 < (65535 & c) && (0 !== (134217728 & c) ? this._settlePromises() : w.settlePromises(this))
                        }
                    }, g.prototype._reject = function (b) {
                        var c = this._bitField;
                        if (!((117506048 & c) >>> 16)) return this._setRejected(), this._fulfillmentHandler0 = b, this._isFinal() ? w.fatalError(b, z.isNode) : void(0 < (65535 & c) ? w.settlePromises(this) : this._ensurePossibleRejectionHandled())
                    },
                    g.prototype._fulfillPromises = function (b, c) {
                        for (var d = 1; b > d; d++) {
                            var f = this._fulfillmentHandlerAt(d),
                                g = this._promiseAt(d),
                                h = this._receiverAt(d);
                            this._clearCallbackDataAtIndex(d);
                            this._settlePromise(g, f, h, c)
                        }
                    }, g.prototype._rejectPromises = function (b, c) {
                        for (var d = 1; b > d; d++) {
                            var f = this._rejectionHandlerAt(d),
                                g = this._promiseAt(d),
                                h = this._receiverAt(d);
                            this._clearCallbackDataAtIndex(d);
                            this._settlePromise(g, f, h, c)
                        }
                    }, g.prototype._settlePromises = function () {
                        var b = this._bitField,
                            c = 65535 & b;
                        if (0 < c) {
                            if (0 !== (16842752 &
                                    b)) {
                                var d = this._fulfillmentHandler0;
                                this._settlePromise0(this._rejectionHandler0, d, b);
                                this._rejectPromises(c, d)
                            } else d = this._rejectionHandler0, this._settlePromise0(this._fulfillmentHandler0, d, b), this._fulfillPromises(c, d);
                            this._setLength(0)
                        }
                        this._clearCancellationData()
                    }, g.prototype._settledValue = function () {
                        var b = this._bitField;
                        return 0 !== (33554432 & b) ? this._rejectionHandler0 : 0 !== (16777216 & b) ? this._fulfillmentHandler0 : void 0
                    }, g.defer = g.pending = function () {
                        K.deprecated("Promise.defer", "new Promise");
                        return {
                            promise: new g(C),
                            resolve: h,
                            reject: m
                        }
                    }, z.notEnumerableProp(g, "_makeSelfResolutionError", u), b("./method")(g, C, G, x, K), b("./bind")(g, C, G, K), b("./cancel")(g, H, x, K), b("./direct_resolve")(g), b("./synchronous_inspection")(g), b("./join")(g, H, G, C, w, p), g.Promise = g, g.version = "3.4.7", b("./map.js")(g, H, x, G, C, K), b("./call_get.js")(g), b("./using.js")(g, x, G, M, C, K), b("./timers.js")(g, C, K), b("./generators.js")(g, x, C, G, d, K), b("./nodeify.js")(g), b("./promisify.js")(g, C), b("./props.js")(g, H, G, x), b("./race.js")(g,
                        C, G, x), b("./reduce.js")(g, H, x, G, C, K), b("./settle.js")(g, H, K), b("./some.js")(g, H, x), b("./filter.js")(g, C), b("./each.js")(g, C), b("./any.js")(g), z.toFastProperties(g), z.toFastProperties(g.prototype), n({
                        a: 1
                    }), n({
                        b: 2
                    }), n({
                        c: 3
                    }), n(1), n(function () {}), n(void 0), n(!1), n(new g(C)), K.setBounds(A.firstLineError, z.lastLineError), g
            }
        }, {
            "./any.js": 1,
            "./async": 2,
            "./bind": 3,
            "./call_get.js": 5,
            "./cancel": 6,
            "./catch_filter": 7,
            "./context": 8,
            "./debuggability": 9,
            "./direct_resolve": 10,
            "./each.js": 11,
            "./errors": 12,
            "./es5": 13,
            "./filter.js": 14,
            "./finally": 15,
            "./generators.js": 16,
            "./join": 17,
            "./map.js": 18,
            "./method": 19,
            "./nodeback": 20,
            "./nodeify.js": 21,
            "./promise_array": 23,
            "./promisify.js": 24,
            "./props.js": 25,
            "./race.js": 27,
            "./reduce.js": 28,
            "./settle.js": 30,
            "./some.js": 31,
            "./synchronous_inspection": 32,
            "./thenables": 33,
            "./timers.js": 34,
            "./using.js": 35,
            "./util": 36
        }],
        23: [function (b, c, d) {
            c.exports = function (c, d, h, m, n) {
                function p(b) {
                    switch (b) {
                    case -2:
                        return [];
                    case -3:
                        return {}
                    }
                }

                function u(b) {
                    var h = this._promise = new c(d);
                    b instanceof
                    c && h._propagateFrom(b, 3);
                    h._setOnCancel(this);
                    this._values = b;
                    this._totalResolved = this._length = 0;
                    this._init(void 0, -2)
                }
                var v = b("./util");
                v.isArray;
                return v.inherits(u, n), u.prototype.length = function () {
                        return this._length
                    }, u.prototype.promise = function () {
                        return this._promise
                    }, u.prototype._init = function y(b, d) {
                        var g = h(this._values, this._promise);
                        if (g instanceof c) {
                            var g = g._target(),
                                n = g._bitField;
                            if (this._values = g, 0 === (50397184 & n)) return this._promise._setAsyncGuaranteed(), g._then(y, this._reject, void 0,
                                this, d);
                            if (0 === (33554432 & n)) return 0 !== (16777216 & n) ? this._reject(g._reason()) : this._cancel();
                            g = g._value()
                        }
                        return (g = v.asArray(g), null === g) ? (g = m("expecting an array or an iterable object but got " + v.classString(g)).reason(), void this._promise._rejectCallback(g, !1)) : 0 === g.length ? void(-5 === d ? this._resolveEmptyArray() : this._resolve(p(d))) : void this._iterate(g)
                    }, u.prototype._iterate = function (b) {
                        var d = this.getActualLength(b.length);
                        this._length = d;
                        this._values = this.shouldCopyValues() ? Array(d) : this._values;
                        for (var g = this._promise, m = !1, n = null, p = 0; d > p; ++p) {
                            var u = h(b[p], g);
                            u instanceof c ? (u = u._target(), n = u._bitField) : n = null;
                            m ? null !== n && u.suppressUnhandledRejections() : null !== n ? 0 === (50397184 & n) ? (u._proxy(this, p), this._values[p] = u) : m = 0 !== (33554432 & n) ? this._promiseFulfilled(u._value(), p) : 0 !== (16777216 & n) ? this._promiseRejected(u._reason(), p) : this._promiseCancelled(p) : m = this._promiseFulfilled(u, p)
                        }
                        m || g._setAsyncGuaranteed()
                    }, u.prototype._isResolved = function () {
                        return null === this._values
                    }, u.prototype._resolve =
                    function (b) {
                        this._values = null;
                        this._promise._fulfill(b)
                    }, u.prototype._cancel = function () {
                        !this._isResolved() && this._promise._isCancellable() && (this._values = null, this._promise._cancel())
                    }, u.prototype._reject = function (b) {
                        this._values = null;
                        this._promise._rejectCallback(b, !1)
                    }, u.prototype._promiseFulfilled = function (b, c) {
                        this._values[c] = b;
                        return ++this._totalResolved >= this._length ? (this._resolve(this._values), !0) : !1
                    }, u.prototype._promiseCancelled = function () {
                        return this._cancel(), !0
                    }, u.prototype._promiseRejected =
                    function (b) {
                        return this._totalResolved++, this._reject(b), !0
                    }, u.prototype._resultCancelled = function () {
                        if (!this._isResolved()) {
                            var b = this._values;
                            if (this._cancel(), b instanceof c) b.cancel();
                            else
                                for (var d = 0; d < b.length; ++d) b[d] instanceof c && b[d].cancel()
                        }
                    }, u.prototype.shouldCopyValues = function () {
                        return !0
                    }, u.prototype.getActualLength = function (b) {
                        return b
                    }, u
            }
        }, {
            "./util": 36
        }],
        24: [function (b, c, d) {
            c.exports = function (c, d) {
                function h(b) {
                    return !F.test(b)
                }

                function m(b) {
                    try {
                        return !0 === b.__isPromisified__
                    } catch (c) {
                        return !1
                    }
                }

                function n(b, c, d, f) {
                    for (var g = x.inheritedDataKeys(b), h = [], n = 0; n < g.length; ++n) {
                        var p = g[n],
                            t = b[p],
                            u = f === C ? !0 : C(p, t, b);
                        if ("function" == typeof t && !m(t)) {
                            var v = x.getDataPropertyOrDefault(b, p + c, B);
                            v && m(v) || !f(p, t, b, u) || h.push(p, t)
                        }
                    }
                    for (b = 0; b < h.length; b += 2)
                        if (f = h[b], d.test(f)) {
                            f = f.replace(d, "");
                            for (g = 0; g < h.length; g += 2)
                                if (h[g] === f) throw new w("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s", c));
                        } return h
                }

                function p(b, h, m, n, p, u) {
                    function w() {
                        var m =
                            h;
                        h === v && (m = this);
                        var n = new c(d);
                        n._captureStackTrace();
                        var p = "string" == typeof P && this !== T ? this[P] : b,
                            x = y(n, u);
                        try {
                            p.apply(m, z(arguments, x))
                        } catch (B) {
                            n._rejectCallback(t(B), !0, !0)
                        }
                        return n._isFateSealed() || n._setAsyncGuaranteed(), n
                    }
                    var T = function () {
                            return this
                        }(),
                        P = b;
                    return "string" == typeof P && (b = n), x.notEnumerableProp(w, "__isPromisified__", !0), w
                }

                function u(b, c, d, f, g) {
                    var h = RegExp(c.replace(/([$])/, "\\$") + "$");
                    d = n(b, c, h, d);
                    for (var h = 0, m = d.length; m > h; h += 2) {
                        var p = d[h],
                            t = d[h + 1],
                            u = p + c;
                        if (f === D) b[u] = D(p,
                            v, p, t, c, g);
                        else {
                            var w = f(t, function () {
                                return D(p, v, p, t, c, g)
                            });
                            x.notEnumerableProp(w, "__isPromisified__", !0);
                            b[u] = w
                        }
                    }
                    return x.toFastProperties(b), b
                }
                var v = {},
                    x = b("./util"),
                    y = b("./nodeback"),
                    z = x.withAppended,
                    t = x.maybeWrapAsError,
                    A = x.canEvaluate,
                    w = b("./errors").TypeError,
                    B = {
                        __isPromisified__: !0
                    },
                    F = /^(?:arity|length|name|arguments|caller|callee|prototype|__isPromisified__)$/,
                    C = function (b) {
                        return x.isIdentifier(b) && "_" !== b.charAt(0) && "constructor" !== b
                    },
                    D = A ? void 0 : p;
                c.promisify = function (b, c) {
                    if ("function" !=
                        typeof b) throw new w("expecting a function but got " + x.classString(b));
                    if (m(b)) return b;
                    c = Object(c);
                    var d = D(b, void 0 === c.context ? v : c.context, void 0, b, null, !!c.multiArgs);
                    return x.copyDescriptors(b, d, h), d
                };
                c.promisifyAll = function (b, c) {
                    if ("function" != typeof b && "object" != typeof b) throw new w("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");
                    c = Object(c);
                    var d = !!c.multiArgs,
                        f = c.suffix;
                    "string" != typeof f && (f = "Async");
                    var g = c.filter;
                    "function" != typeof g && (g =
                        C);
                    var h = c.promisifier;
                    if ("function" != typeof h && (h = D), !x.isIdentifier(f)) throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");
                    for (var m = x.inheritedDataKeys(b), n = 0; n < m.length; ++n) {
                        var p = b[m[n]];
                        "constructor" !== m[n] && x.isClass(p) && (u(p.prototype, f, g, h, d), u(p, f, g, h, d))
                    }
                    return u(b, f, g, h, d)
                }
            }
        }, {
            "./errors": 12,
            "./nodeback": 20,
            "./util": 36
        }],
        25: [function (b, c, d) {
            c.exports = function (c, d, h, m) {
                function n(b) {
                    var c, d = !1;
                    if (void 0 !== u && b instanceof u) c = z(b), d = !0;
                    else {
                        var f = y.keys(b),
                            g = f.length;
                        c = Array(2 * g);
                        for (var h = 0; g > h; ++h) {
                            var m = f[h];
                            c[h] = b[m];
                            c[h + g] = m
                        }
                    }
                    this.constructor$(c);
                    this._isMap = d;
                    this._init$(void 0, -3)
                }

                function p(b) {
                    var d;
                    b = h(b);
                    return x(b) ? (d = b instanceof c ? b._then(c.props, void 0, void 0, void 0, void 0) : (new n(b)).promise(), b instanceof c && d._propagateFrom(b, 2), d) : m("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")
                }
                var u, v = b("./util"),
                    x = v.isObject,
                    y = b("./es5");
                "function" == typeof Map && (u = Map);
                var z = function () {
                    function b(f, g) {
                        this[c] = f;
                        this[c +
                            d] = g;
                        c++
                    }
                    var c = 0,
                        d = 0;
                    return function (f) {
                        d = f.size;
                        c = 0;
                        var g = Array(2 * f.size);
                        return f.forEach(b, g), g
                    }
                }();
                v.inherits(n, d);
                n.prototype._init = function () {};
                n.prototype._promiseFulfilled = function (b, c) {
                    this._values[c] = b;
                    if (++this._totalResolved >= this._length) {
                        var d;
                        if (this._isMap) {
                            d = this._values;
                            for (var f = new u, g = d.length / 2 | 0, h = 0; g > h; ++h) f.set(d[g + h], d[h]);
                            d = f
                        } else {
                            d = {};
                            f = this.length();
                            g = 0;
                            for (h = this.length(); h > g; ++g) d[this._values[g + f]] = this._values[g]
                        }
                        return this._resolve(d), !0
                    }
                    return !1
                };
                n.prototype.shouldCopyValues =
                    function () {
                        return !1
                    };
                n.prototype.getActualLength = function (b) {
                    return b >> 1
                };
                c.prototype.props = function () {
                    return p(this)
                };
                c.props = function (b) {
                    return p(b)
                }
            }
        }, {
            "./es5": 13,
            "./util": 36
        }],
        26: [function (b, c, d) {
            function f(b) {
                this._capacity = b;
                this._front = this._length = 0
            }
            f.prototype._willBeOverCapacity = function (b) {
                return this._capacity < b
            };
            f.prototype._pushOne = function (b) {
                var c = this.length();
                this._checkCapacity(c + 1);
                this[this._front + c & this._capacity - 1] = b;
                this._length = c + 1
            };
            f.prototype.push = function (b, c, d) {
                var f =
                    this.length() + 3;
                if (this._willBeOverCapacity(f)) return this._pushOne(b), this._pushOne(c), void this._pushOne(d);
                var p = this._front + f - 3;
                this._checkCapacity(f);
                var u = this._capacity - 1;
                this[p + 0 & u] = b;
                this[p + 1 & u] = c;
                this[p + 2 & u] = d;
                this._length = f
            };
            f.prototype.shift = function () {
                var b = this._front,
                    c = this[b];
                return this[b] = void 0, this._front = b + 1 & this._capacity - 1, this._length--, c
            };
            f.prototype.length = function () {
                return this._length
            };
            f.prototype._checkCapacity = function (b) {
                this._capacity < b && this._resizeTo(this._capacity <<
                    1)
            };
            f.prototype._resizeTo = function (b) {
                var c = this._capacity;
                this._capacity = b;
                b = this._front + this._length & c - 1;
                for (var d = 0; b > d; ++d) this[d + c] = this[d + 0], this[d + 0] = void 0
            };
            c.exports = f
        }, {}],
        27: [function (b, c, d) {
            c.exports = function (c, d, h, m) {
                function n(b, n) {
                    var y = h(b);
                    if (y instanceof c) return u(y);
                    if (b = p.asArray(b), null === b) return m("expecting an array or an iterable object but got " + p.classString(b));
                    y = new c(d);
                    void 0 !== n && y._propagateFrom(n, 3);
                    for (var z = y._fulfill, t = y._reject, A = 0, w = b.length; w > A; ++A) {
                        var B =
                            b[A];
                        (void 0 !== B || A in b) && c.cast(B)._then(z, t, void 0, y, null)
                    }
                    return y
                }
                var p = b("./util"),
                    u = function (b) {
                        return b.then(function (c) {
                            return n(c, b)
                        })
                    };
                c.race = function (b) {
                    return n(b, void 0)
                };
                c.prototype.race = function () {
                    return n(this, void 0)
                }
            }
        }, {
            "./util": 36
        }],
        28: [function (b, c, d) {
            c.exports = function (c, d, h, m, n, p) {
                function u(b, d, g, h) {
                    this.constructor$(b);
                    b = t();
                    this._fn = null === b ? d : A.domainBind(b, d);
                    void 0 !== g && (g = c.resolve(g), g._attachCancellationCallback(this));
                    this._initialValue = g;
                    this._currentCancellable =
                        null;
                    h === n ? this._eachValues = Array(this._length) : 0 === h ? this._eachValues = null : this._eachValues = void 0;
                    this._promise._captureStackTrace();
                    this._init$(void 0, -5)
                }

                function v(b, c) {
                    this.isFulfilled() ? c._resolve(b) : c._reject(b)
                }

                function x(b, c, d, f) {
                    return "function" != typeof c ? h("expecting a function but got " + A.classString(c)) : (new u(b, c, d, f)).promise()
                }

                function y(b) {
                    this.accum = b;
                    this.array._gotAccum(b);
                    b = m(this.value, this.array._promise);
                    return b instanceof c ? (this.array._currentCancellable = b, b._then(z, void 0,
                        void 0, this, void 0)) : z.call(this, b)
                }

                function z(b) {
                    var d = this.array,
                        g = d._promise,
                        h = w(d._fn);
                    g._pushContext();
                    b = void 0 !== d._eachValues ? h.call(g._boundValue(), b, this.index, this.length) : h.call(g._boundValue(), this.accum, b, this.index, this.length);
                    b instanceof c && (d._currentCancellable = b);
                    h = g._popContext();
                    return p.checkForgottenReturns(b, h, void 0 !== d._eachValues ? "Promise.each" : "Promise.reduce", g), b
                }
                var t = c._getDomain,
                    A = b("./util"),
                    w = A.tryCatch;
                A.inherits(u, d);
                u.prototype._gotAccum = function (b) {
                    void 0 !==
                        this._eachValues && null !== this._eachValues && b !== n && this._eachValues.push(b)
                };
                u.prototype._eachComplete = function (b) {
                    return null !== this._eachValues && this._eachValues.push(b), this._eachValues
                };
                u.prototype._init = function () {};
                u.prototype._resolveEmptyArray = function () {
                    this._resolve(void 0 !== this._eachValues ? this._eachValues : this._initialValue)
                };
                u.prototype.shouldCopyValues = function () {
                    return !1
                };
                u.prototype._resolve = function (b) {
                    this._promise._resolveCallback(b);
                    this._values = null
                };
                u.prototype._resultCancelled =
                    function (b) {
                        return b === this._initialValue ? this._cancel() : void(this._isResolved() || (this._resultCancelled$(), this._currentCancellable instanceof c && this._currentCancellable.cancel(), this._initialValue instanceof c && this._initialValue.cancel()))
                    };
                u.prototype._iterate = function (b) {
                    this._values = b;
                    var d, g, h = b.length;
                    if (void 0 !== this._initialValue ? (d = this._initialValue, g = 0) : (d = c.resolve(b[0]), g = 1), this._currentCancellable = d, !d.isRejected())
                        for (; h > g; ++g) d = d._then(y, void 0, void 0, {
                            accum: null,
                            value: b[g],
                            index: g,
                            length: h,
                            array: this
                        }, void 0);
                    void 0 !== this._eachValues && (d = d._then(this._eachComplete, void 0, void 0, this, void 0));
                    d._then(v, v, void 0, d, this)
                };
                c.prototype.reduce = function (b, c) {
                    return x(this, b, c, null)
                };
                c.reduce = function (b, c, d, f) {
                    return x(b, c, d, f)
                }
            }
        }, {
            "./util": 36
        }],
        29: [function (b, c, d) {
            b = b("./util");
            d = function () {
                throw Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n");
            };
            var f = b.getNativePromise();
            if (b.isNode && "undefined" == typeof MutationObserver) {
                var g = global.setImmediate,
                    h = process.nextTick;
                b = b.isRecentNode ? function (b) {
                    g.call(global, b)
                } : function (b) {
                    h.call(process, b)
                }
            } else if ("function" == typeof f && "function" == typeof f.resolve) {
                var m = f.resolve();
                b = function (b) {
                    m.then(b)
                }
            } else b = "undefined" == typeof MutationObserver || "undefined" != typeof window && window.navigator && (window.navigator.standalone || window.cordova) ? "undefined" != typeof setImmediate ? function (b) {
                setImmediate(b)
            } : "undefined" != typeof setTimeout ? function (b) {
                setTimeout(b, 0)
            } : d : function () {
                var b = document.createElement("div"),
                    c = {
                        attributes: !0
                    },
                    d = !1,
                    f = document.createElement("div");
                (new MutationObserver(function () {
                    b.classList.toggle("foo");
                    d = !1
                })).observe(f, c);
                return function (g) {
                    var h = new MutationObserver(function () {
                        h.disconnect();
                        g()
                    });
                    h.observe(b, c);
                    d || (d = !0, f.classList.toggle("foo"))
                }
            }();
            c.exports = b
        }, {
            "./util": 36
        }],
        30: [function (b, c, d) {
            c.exports = function (c, d, h) {
                function m(b) {
                    this.constructor$(b)
                }
                var n = c.PromiseInspection;
                b("./util").inherits(m, d);
                m.prototype._promiseResolved = function (b, c) {
                    this._values[b] = c;
                    return ++this._totalResolved >=
                        this._length ? (this._resolve(this._values), !0) : !1
                };
                m.prototype._promiseFulfilled = function (b, c) {
                    var d = new n;
                    return d._bitField = 33554432, d._settledValueField = b, this._promiseResolved(c, d)
                };
                m.prototype._promiseRejected = function (b, c) {
                    var d = new n;
                    return d._bitField = 16777216, d._settledValueField = b, this._promiseResolved(c, d)
                };
                c.settle = function (b) {
                    return h.deprecated(".settle()", ".reflect()"), (new m(b)).promise()
                };
                c.prototype.settle = function () {
                    return c.settle(this)
                }
            }
        }, {
            "./util": 36
        }],
        31: [function (b, c, d) {
            c.exports =
                function (c, d, h) {
                    function m(b) {
                        this.constructor$(b);
                        this._howMany = 0;
                        this._initialized = this._unwrap = !1
                    }

                    function n(b, c) {
                        if ((0 | c) !== c || 0 > c) return h("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");
                        var d = new m(b),
                            f = d.promise();
                        return d.setHowMany(c), d.init(), f
                    }
                    var p = b("./util"),
                        u = b("./errors").RangeError,
                        v = b("./errors").AggregateError,
                        x = p.isArray,
                        y = {};
                    p.inherits(m, d);
                    m.prototype._init = function () {
                        if (this._initialized) {
                            if (0 === this._howMany) return void this._resolve([]);
                            this._init$(void 0,
                                -5);
                            var b = x(this._values);
                            !this._isResolved() && b && this._howMany > this._canPossiblyFulfill() && this._reject(this._getRangeError(this.length()))
                        }
                    };
                    m.prototype.init = function () {
                        this._initialized = !0;
                        this._init()
                    };
                    m.prototype.setUnwrap = function () {
                        this._unwrap = !0
                    };
                    m.prototype.howMany = function () {
                        return this._howMany
                    };
                    m.prototype.setHowMany = function (b) {
                        this._howMany = b
                    };
                    m.prototype._promiseFulfilled = function (b) {
                        return this._addFulfilled(b), this._fulfilled() === this.howMany() ? (this._values.length = this.howMany(),
                            1 === this.howMany() && this._unwrap ? this._resolve(this._values[0]) : this._resolve(this._values), !0) : !1
                    };
                    m.prototype._promiseRejected = function (b) {
                        return this._addRejected(b), this._checkOutcome()
                    };
                    m.prototype._promiseCancelled = function () {
                        return this._values instanceof c || null == this._values ? this._cancel() : (this._addRejected(y), this._checkOutcome())
                    };
                    m.prototype._checkOutcome = function () {
                        if (this.howMany() > this._canPossiblyFulfill()) {
                            for (var b = new v, c = this.length(); c < this._values.length; ++c) this._values[c] !==
                                y && b.push(this._values[c]);
                            return 0 < b.length ? this._reject(b) : this._cancel(), !0
                        }
                        return !1
                    };
                    m.prototype._fulfilled = function () {
                        return this._totalResolved
                    };
                    m.prototype._rejected = function () {
                        return this._values.length - this.length()
                    };
                    m.prototype._addRejected = function (b) {
                        this._values.push(b)
                    };
                    m.prototype._addFulfilled = function (b) {
                        this._values[this._totalResolved++] = b
                    };
                    m.prototype._canPossiblyFulfill = function () {
                        return this.length() - this._rejected()
                    };
                    m.prototype._getRangeError = function (b) {
                        return new u("Input array must contain at least " +
                            this._howMany + " items but contains only " + b + " items")
                    };
                    m.prototype._resolveEmptyArray = function () {
                        this._reject(this._getRangeError(0))
                    };
                    c.some = function (b, c) {
                        return n(b, c)
                    };
                    c.prototype.some = function (b) {
                        return n(this, b)
                    };
                    c._SomePromiseArray = m
                }
        }, {
            "./errors": 12,
            "./util": 36
        }],
        32: [function (b, c, d) {
            c.exports = function (b) {
                function c(b) {
                    void 0 !== b ? (b = b._target(), this._bitField = b._bitField, this._settledValueField = b._isFateSealed() ? b._settledValue() : void 0) : (this._bitField = 0, this._settledValueField = void 0)
                }
                c.prototype._settledValue =
                    function () {
                        return this._settledValueField
                    };
                var d = c.prototype.value = function () {
                        if (!this.isFulfilled()) throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");
                        return this._settledValue()
                    },
                    m = c.prototype.error = c.prototype.reason = function () {
                        if (!this.isRejected()) throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");
                        return this._settledValue()
                    },
                    n = c.prototype.isFulfilled = function () {
                        return 0 !==
                            (33554432 & this._bitField)
                    },
                    p = c.prototype.isRejected = function () {
                        return 0 !== (16777216 & this._bitField)
                    },
                    u = c.prototype.isPending = function () {
                        return 0 === (50397184 & this._bitField)
                    },
                    v = c.prototype.isResolved = function () {
                        return 0 !== (50331648 & this._bitField)
                    };
                c.prototype.isCancelled = function () {
                    return 0 !== (8454144 & this._bitField)
                };
                b.prototype.__isCancelled = function () {
                    return 65536 === (65536 & this._bitField)
                };
                b.prototype._isCancelled = function () {
                    return this._target().__isCancelled()
                };
                b.prototype.isCancelled = function () {
                    return 0 !==
                        (8454144 & this._target()._bitField)
                };
                b.prototype.isPending = function () {
                    return u.call(this._target())
                };
                b.prototype.isRejected = function () {
                    return p.call(this._target())
                };
                b.prototype.isFulfilled = function () {
                    return n.call(this._target())
                };
                b.prototype.isResolved = function () {
                    return v.call(this._target())
                };
                b.prototype.value = function () {
                    return d.call(this._target())
                };
                b.prototype.reason = function () {
                    var b = this._target();
                    return b._unsetRejectionIsUnhandled(), m.call(b)
                };
                b.prototype._value = function () {
                    return this._settledValue()
                };
                b.prototype._reason = function () {
                    return this._unsetRejectionIsUnhandled(), this._settledValue()
                };
                b.PromiseInspection = c
            }
        }, {}],
        33: [function (b, c, d) {
            c.exports = function (c, d) {
                function h(b, h, p) {
                    var u = new c(d),
                        t = u;
                    p && p._pushContext();
                    u._captureStackTrace();
                    p && p._popContext();
                    var A = !0;
                    b = m.tryCatch(h).call(b, function (b) {
                        u && (u._resolveCallback(b), u = null)
                    }, function (b) {
                        u && (u._rejectCallback(b, A, !0), u = null)
                    });
                    return A = !1, u && b === n && (u._rejectCallback(b.e, !0, !0), u = null), t
                }
                var m = b("./util"),
                    n = m.errorObj,
                    p = m.isObject,
                    u = {}.hasOwnProperty;
                return function (b, m) {
                    if (p(b)) {
                        if (b instanceof c) return b;
                        var y;
                        try {
                            y = b.then
                        } catch (z) {
                            y = (n.e = z, n)
                        }
                        if (y === n) return m && m._pushContext(), y = c.reject(y.e), m && m._popContext(), y;
                        if ("function" == typeof y) {
                            var t;
                            try {
                                t = u.call(b, "_promise0")
                            } catch (A) {
                                t = !1
                            }
                            return t ? (y = new c(d), b._then(y._fulfill, y._reject, void 0, y, null), y) : h(b, y, m)
                        }
                    }
                    return b
                }
            }
        }, {
            "./util": 36
        }],
        34: [function (b, c, d) {
            c.exports = function (c, d, h) {
                function m(b) {
                    this.handle = b
                }

                function n(b) {
                    return clearTimeout(this.handle), b
                }

                function p(b) {
                    throw clearTimeout(this.handle),
                        b;
                }
                var u = b("./util"),
                    v = c.TimeoutError;
                m.prototype._resultCancelled = function () {
                    clearTimeout(this.handle)
                };
                var x = function (b) {
                        return y(+this).thenReturn(b)
                    },
                    y = c.delay = function (b, n) {
                        var p, u;
                        return void 0 !== n ? (p = c.resolve(n)._then(x, null, null, b, void 0), h.cancellation() && n instanceof c && p._setOnCancel(n)) : (p = new c(d), u = setTimeout(function () {
                            p._fulfill()
                        }, +b), h.cancellation() && p._setOnCancel(new m(u)), p._captureStackTrace()), p._setAsyncGuaranteed(), p
                    };
                c.prototype.delay = function (b) {
                    return y(b, this)
                };
                c.prototype.timeout =
                    function (b, c) {
                        var d, f, g = new m(setTimeout(function () {
                            if (d.isPending()) {
                                var b = d,
                                    g = f,
                                    h;
                                h = "string" != typeof c ? c instanceof Error ? c : new v("operation timed out") : new v(c);
                                u.markAsOriginatingFromRejection(h);
                                b._attachExtraTrace(h);
                                b._reject(h);
                                null != g && g.cancel()
                            }
                        }, +b));
                        return h.cancellation() ? (f = this.then(), d = f._then(n, p, void 0, g, void 0), d._setOnCancel(g)) : d = this._then(n, p, void 0, g, void 0), d
                    }
            }
        }, {
            "./util": 36
        }],
        35: [function (b, c, d) {
            c.exports = function (c, d, h, m, n, p) {
                function u(b) {
                    setTimeout(function () {
                        throw b;
                    }, 0)
                }

                function v(b, d) {
                    function g() {
                        if (m >= p) return t._fulfill();
                        var n;
                        n = b[m++];
                        var v = h(n);
                        n = (v !== n && "function" == typeof n._isDisposable && "function" == typeof n._getDisposer && n._isDisposable() && v._setDisposable(n._getDisposer()), v);
                        if (n instanceof c && n._isDisposable()) {
                            try {
                                n = h(n._getDisposer().tryDispose(d), b.promise)
                            } catch (w) {
                                return u(w)
                            }
                            if (n instanceof c) return n._then(g, u, null, null, null)
                        }
                        g()
                    }
                    var m = 0,
                        p = b.length,
                        t = new c(n);
                    return g(), t
                }

                function x(b, c, d) {
                    this._data = b;
                    this._promise = c;
                    this._context = d
                }

                function y(b,
                    c, d) {
                    this.constructor$(b, c, d)
                }

                function z(b) {
                    return x.isDisposer(b) ? (this.resources[this.index]._setDisposable(b), b.promise()) : b
                }

                function t(b) {
                    this.length = b;
                    this.promise = null;
                    this[b - 1] = null
                }
                var A = b("./util"),
                    w = b("./errors").TypeError,
                    B = b("./util").inherits,
                    F = A.errorObj,
                    C = A.tryCatch,
                    D = {};
                x.prototype.data = function () {
                    return this._data
                };
                x.prototype.promise = function () {
                    return this._promise
                };
                x.prototype.resource = function () {
                    return this.promise().isFulfilled() ? this.promise().value() : D
                };
                x.prototype.tryDispose =
                    function (b) {
                        var c = this.resource(),
                            d = this._context;
                        void 0 !== d && d._pushContext();
                        b = c !== D ? this.doDispose(c, b) : null;
                        return void 0 !== d && d._popContext(), this._promise._unsetDisposable(), this._data = null, b
                    };
                x.isDisposer = function (b) {
                    return null != b && "function" == typeof b.resource && "function" == typeof b.tryDispose
                };
                B(y, x);
                y.prototype.doDispose = function (b, c) {
                    return this.data().call(b, b, c)
                };
                t.prototype._resultCancelled = function () {
                    for (var b = this.length, d = 0; b > d; ++d) {
                        var g = this[d];
                        g instanceof c && g.cancel()
                    }
                };
                c.using =
                    function () {
                        var b = arguments.length;
                        if (2 > b) return d("you must pass at least 2 arguments to Promise.using");
                        var m = arguments[b - 1];
                        if ("function" != typeof m) return d("expecting a function but got " + A.classString(m));
                        var n, u = !0;
                        2 === b && Array.isArray(arguments[0]) ? (n = arguments[0], b = n.length, u = !1) : (n = arguments, b--);
                        for (var w = new t(b), y = 0; b > y; ++y) {
                            var B = n[y];
                            if (x.isDisposer(B)) {
                                var T = B,
                                    B = B.promise();
                                B._setDisposable(T)
                            } else T = h(B), T instanceof c && (B = T._then(z, null, null, {
                                resources: w,
                                index: y
                            }, void 0));
                            w[y] = B
                        }
                        b =
                            Array(w.length);
                        for (y = 0; y < b.length; ++y) b[y] = c.resolve(w[y]).reflect();
                        var P = c.all(b).then(function (b) {
                                for (var c = 0; c < b.length; ++c) {
                                    var d = b[c];
                                    if (d.isRejected()) return F.e = d.error(), F;
                                    if (!d.isFulfilled()) return void P.cancel();
                                    b[c] = d.value()
                                }
                                S._pushContext();
                                m = C(m);
                                b = u ? m.apply(void 0, b) : m(b);
                                c = S._popContext();
                                return p.checkForgottenReturns(b, c, "Promise.using", S), b
                            }),
                            S = P.lastly(function () {
                                var b = new c.PromiseInspection(P);
                                return v(w, b)
                            });
                        return w.promise = S, S._setOnCancel(w), S
                    };
                c.prototype._setDisposable =
                    function (b) {
                        this._bitField |= 131072;
                        this._disposer = b
                    };
                c.prototype._isDisposable = function () {
                    return 0 < (131072 & this._bitField)
                };
                c.prototype._getDisposer = function () {
                    return this._disposer
                };
                c.prototype._unsetDisposable = function () {
                    this._bitField &= -131073;
                    this._disposer = void 0
                };
                c.prototype.disposer = function (b) {
                    if ("function" == typeof b) return new y(b, this, m());
                    throw new w;
                }
            }
        }, {
            "./errors": 12,
            "./util": 36
        }],
        36: [function (b, c, d) {
            function f() {
                try {
                    var b = x;
                    return x = null, b.apply(this, arguments)
                } catch (c) {
                    return v.e = c,
                        v
                }
            }

            function g(b) {
                return null == b || !0 === b || !1 === b || "string" == typeof b || "number" == typeof b
            }

            function h(b, c, d) {
                return g(b) ? b : (u.defineProperty(b, c, {
                    value: d,
                    configurable: !0,
                    enumerable: !1,
                    writable: !0
                }), b)
            }

            function m(b) {
                return null !== b && "object" == typeof b && "string" == typeof b.message && "string" == typeof b.name
            }

            function n(b) {
                return m(b) && u.propertyIsWritable(b, "stack")
            }

            function p(b) {
                return {}.toString.call(b)
            }
            var u = b("./es5");
            b = "undefined" == typeof navigator;
            var v = {
                    e: {}
                },
                x;
            d = "undefined" != typeof self ? self : "undefined" !=
                typeof window ? window : "undefined" != typeof global ? global : void 0 !== this ? this : null;
            var y = function () {
                    var b = [Array.prototype, Object.prototype, Function.prototype],
                        c = function (c) {
                            for (var d = 0; d < b.length; ++d)
                                if (b[d] === c) return !0;
                            return !1
                        };
                    if (u.isES5) {
                        var d = Object.getOwnPropertyNames;
                        return function (b) {
                            for (var f = [], g = Object.create(null); null != b && !c(b);) {
                                var h;
                                try {
                                    h = d(b)
                                } catch (m) {
                                    break
                                }
                                for (var n = 0; n < h.length; ++n) {
                                    var p = h[n];
                                    if (!g[p]) {
                                        g[p] = !0;
                                        var t = Object.getOwnPropertyDescriptor(b, p);
                                        null != t && null == t.get && null ==
                                            t.set && f.push(p)
                                    }
                                }
                                b = u.getPrototypeOf(b)
                            }
                            return f
                        }
                    }
                    var f = {}.hasOwnProperty;
                    return function (d) {
                        if (c(d)) return [];
                        var g = [],
                            h;
                        a: for (h in d) {
                            if (!f.call(d, h))
                                for (var m = 0; m < b.length; ++m)
                                    if (f.call(b[m], h)) continue a;
                            g.push(h)
                        }
                        return g
                    }
                }(),
                z = /this\s*\.\s*\S+\s*=/,
                t = /^[a-z$_][a-z$_0-9]*$/i,
                A = function () {
                    return "stack" in Error() ? function (b) {
                        return n(b) ? b : Error(b + "")
                    } : function (b) {
                        if (n(b)) return b;
                        try {
                            throw Error(b + "");
                        } catch (c) {
                            return c
                        }
                    }
                }(),
                w = function (b) {
                    return u.isArray(b) ? b : null
                };
            if ("undefined" != typeof Symbol &&
                Symbol.iterator) var B = "function" == typeof Array.from ? function (b) {
                    return Array.from(b)
                } : function (b) {
                    for (var c = [], d = b[Symbol.iterator](); !(b = d.next()).done;) c.push(b.value);
                    return c
                },
                w = function (b) {
                    return u.isArray(b) ? b : null != b && "function" == typeof b[Symbol.iterator] ? B(b) : null
                };
            var F = "undefined" != typeof process && "[object process]" === p(process).toLowerCase(),
                C = "undefined" != typeof process && "undefined" != typeof process.env;
            b = {
                isClass: function (b) {
                    try {
                        if ("function" == typeof b) {
                            var c = u.names(b.prototype),
                                d = u.isES5 &&
                                1 < c.length,
                                f = 0 < c.length && !(1 === c.length && "constructor" === c[0]),
                                g = z.test(b + "") && 0 < u.names(b).length;
                            if (d || f || g) return !0
                        }
                        return !1
                    } catch (h) {
                        return !1
                    }
                },
                isIdentifier: function (b) {
                    return t.test(b)
                },
                inheritedDataKeys: y,
                getDataPropertyOrDefault: function (b, c, d) {
                    if (!u.isES5) return {}.hasOwnProperty.call(b, c) ? b[c] : void 0;
                    b = Object.getOwnPropertyDescriptor(b, c);
                    return null != b ? null == b.get && null == b.set ? b.value : d : void 0
                },
                thrower: function (b) {
                    throw b;
                },
                isArray: u.isArray,
                asArray: w,
                notEnumerableProp: h,
                isPrimitive: g,
                isObject: function (b) {
                    return "function" ==
                        typeof b || "object" == typeof b && null !== b
                },
                isError: m,
                canEvaluate: b,
                errorObj: v,
                tryCatch: function (b) {
                    return x = b, f
                },
                inherits: function (b, c) {
                    function d() {
                        this.constructor = b;
                        this.constructor$ = c;
                        for (var g in c.prototype) f.call(c.prototype, g) && "$" !== g.charAt(g.length - 1) && (this[g + "$"] = c.prototype[g])
                    }
                    var f = {}.hasOwnProperty;
                    return d.prototype = c.prototype, b.prototype = new d, b.prototype
                },
                withAppended: function (b, c) {
                    var d, f = b.length,
                        g = Array(f + 1);
                    for (d = 0; f > d; ++d) g[d] = b[d];
                    return g[d] = c, g
                },
                maybeWrapAsError: function (b) {
                    return g(b) ?
                        Error(b + "") : b
                },
                toFastProperties: function (b) {
                    function c() {}
                    c.prototype = b;
                    for (var d = 8; d--;) new c;
                    return b
                },
                filledRange: function (b, c, d) {
                    for (var f = Array(b), g = 0; b > g; ++g) f[g] = c + g + d;
                    return f
                },
                toString: function (b) {
                    return b + ""
                },
                canAttachTrace: n,
                ensureErrorObject: A,
                originatesFromRejection: function (b) {
                    return null == b ? !1 : b instanceof Error.__BluebirdErrorTypes__.OperationalError || !0 === b.isOperational
                },
                markAsOriginatingFromRejection: function (b) {
                    try {
                        h(b, "isOperational", !0)
                    } catch (c) {}
                },
                classString: p,
                copyDescriptors: function (b,
                    c, d) {
                    for (var f = u.names(b), g = 0; g < f.length; ++g) {
                        var h = f[g];
                        if (d(h)) try {
                            u.defineProperty(c, h, u.getDescriptor(b, h))
                        } catch (m) {}
                    }
                },
                hasDevTools: "undefined" != typeof chrome && chrome && "function" == typeof chrome.loadTimes,
                isNode: F,
                hasEnvVariables: C,
                env: function (b) {
                    return C ? process.env[b] : void 0
                },
                global: d,
                getNativePromise: function () {
                    if ("function" == typeof Promise) try {
                        var b = new Promise(function () {});
                        if ("[object Promise]" === {}.toString.call(b)) return Promise
                    } catch (c) {}
                },
                domainBind: function (b, c) {
                    return b.bind(c)
                }
            };
            b.isRecentNode = b.isNode && function () {
                var b = process.versions.node.split(".").map(Number);
                return 0 === b[0] && 10 < b[1] || 0 < b[0]
            }();
            b.isNode && b.toFastProperties(process);
            try {
                throw Error();
            } catch (D) {
                b.lastLineError = D
            }
            c.exports = b
        }, {
            "./es5": 13
        }]
    }, {}, [4])(4)
});
"undefined" != typeof window && null !== window ? window.P = window.Promise : "undefined" != typeof self && null !== self && (self.P = self.Promise);
(function () {
    (function (a) {
        var b = this || (0, eval)("this"),
            c = b.document,
            d = b.navigator,
            f = b.jQuery,
            g = b.JSON;
        (function (a) {
            "function" === typeof define && define.amd ? define(["exports", "require"], a) : "object" === typeof exports && "object" === typeof module ? a(module.exports || exports) : a(b.ko = {})
        })(function (h, m) {
            function n(a, b) {
                return null === a || typeof a in A ? a === b : !1
            }

            function p(b, c) {
                var d;
                return function () {
                    d || (d = t.a.setTimeout(function () {
                        d = a;
                        b()
                    }, c))
                }
            }

            function u(a, b) {
                var c;
                return function () {
                    clearTimeout(c);
                    c = t.a.setTimeout(a,
                        b)
                }
            }

            function v(a, b) {
                b && b !== w ? "beforeChange" === b ? this.Ob(a) : this.Ja(a, b) : this.Pb(a)
            }

            function x(a, b) {
                null !== b && b.k && b.k()
            }

            function y(a, b) {
                var c = this.Mc,
                    d = c[E];
                d.T || (this.ob && this.Oa[b] ? (c.Sb(b, a, this.Oa[b]), this.Oa[b] = null, --this.ob) : d.s[b] || c.Sb(b, a, d.t ? {
                    $: a
                } : c.yc(a)), a.Ha && a.Hc())
            }

            function z(a, b, c, d) {
                t.d[a] = {
                    init: function (a, f, g, h, m) {
                        var n, p;
                        t.m(function () {
                            var g = f(),
                                h = t.a.c(g),
                                h = !c !== !h,
                                u = !p;
                            if (u || b || h !== n) u && t.xa.Ca() && (p = t.a.wa(t.f.childNodes(a), !0)), h ? (u || t.f.fa(a, t.a.wa(p)), t.hb(d ? d(m, g) : m, a)) :
                                t.f.za(a), n = h
                        }, null, {
                            i: a
                        });
                        return {
                            controlsDescendantBindings: !0
                        }
                    }
                };
                t.h.va[a] = !1;
                t.f.aa[a] = !0
            }
            var t = "undefined" !== typeof h ? h : {};
            t.b = function (a, b) {
                for (var c = a.split("."), d = t, f = 0; f < c.length - 1; f++) d = d[c[f]];
                d[c[c.length - 1]] = b
            };
            t.H = function (a, b, c) {
                a[b] = c
            };
            t.version = "3.4.2";
            t.b("version", t.version);
            t.options = {
                deferUpdates: !1,
                useOnlyNativeEvents: !1
            };
            t.a = function () {
                function h(a, b) {
                    for (var c in a) a.hasOwnProperty(c) && b(c, a[c])
                }

                function m(a, b) {
                    if (b)
                        for (var c in b) b.hasOwnProperty(c) && (a[c] = b[c]);
                    return a
                }

                function n(a,
                    b) {
                    a.__proto__ = b;
                    return a
                }

                function p(a, b, c, d) {
                    var f = a[b].match(B) || [];
                    t.a.r(c.match(B), function (a) {
                        t.a.ra(f, a, d)
                    });
                    a[b] = f.join(" ")
                }
                var u = {
                    __proto__: []
                }
                instanceof Array, v = "function" === typeof Symbol, w = {}, y = {};
                w[d && /Firefox\/2/i.test(d.userAgent) ? "KeyboardEvent" : "UIEvents"] = ["keyup", "keydown", "keypress"];
                w.MouseEvents = "click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");
                h(w, function (a, b) {
                    if (b.length)
                        for (var c = 0, d = b.length; c < d; c++) y[b[c]] = a
                });
                var x = {
                        propertychange: !0
                    },
                    z = c && function () {
                        for (var b = 3, d = c.createElement("div"), f = d.getElementsByTagName("i"); d.innerHTML = "<!--[if gt IE " + ++b + "]><i></i><![endif]-->", f[0];);
                        return 4 < b ? b : a
                    }(),
                    B = /\S+/g;
                return {
                    gc: ["authenticity_token", /^__RequestVerificationToken(_.*)?$/],
                    r: function (a, b) {
                        for (var c = 0, d = a.length; c < d; c++) b(a[c], c)
                    },
                    o: function (a, b) {
                        if ("function" == typeof Array.prototype.indexOf) return Array.prototype.indexOf.call(a, b);
                        for (var c = 0, d = a.length; c < d; c++)
                            if (a[c] === b) return c;
                        return -1
                    },
                    Vb: function (a,
                        b, c) {
                        for (var d = 0, f = a.length; d < f; d++)
                            if (b.call(c, a[d], d)) return a[d];
                        return null
                    },
                    Na: function (a, b) {
                        var c = t.a.o(a, b);
                        0 < c ? a.splice(c, 1) : 0 === c && a.shift()
                    },
                    Wb: function (a) {
                        a = a || [];
                        for (var b = [], c = 0, d = a.length; c < d; c++) 0 > t.a.o(b, a[c]) && b.push(a[c]);
                        return b
                    },
                    ib: function (a, b) {
                        a = a || [];
                        for (var c = [], d = 0, f = a.length; d < f; d++) c.push(b(a[d], d));
                        return c
                    },
                    Ma: function (a, b) {
                        a = a || [];
                        for (var c = [], d = 0, f = a.length; d < f; d++) b(a[d], d) && c.push(a[d]);
                        return c
                    },
                    ta: function (a, b) {
                        if (b instanceof Array) a.push.apply(a, b);
                        else
                            for (var c =
                                    0, d = b.length; c < d; c++) a.push(b[c]);
                        return a
                    },
                    ra: function (a, b, c) {
                        var d = t.a.o(t.a.Bb(a), b);
                        0 > d ? c && a.push(b) : c || a.splice(d, 1)
                    },
                    la: u,
                    extend: m,
                    $a: n,
                    ab: u ? n : m,
                    D: h,
                    Ea: function (a, b) {
                        if (!a) return a;
                        var c = {},
                            d;
                        for (d in a) a.hasOwnProperty(d) && (c[d] = b(a[d], d, a));
                        return c
                    },
                    rb: function (a) {
                        for (; a.firstChild;) t.removeNode(a.firstChild)
                    },
                    nc: function (a) {
                        a = t.a.W(a);
                        for (var b = (a[0] && a[0].ownerDocument || c).createElement("div"), d = 0, f = a.length; d < f; d++) b.appendChild(t.ba(a[d]));
                        return b
                    },
                    wa: function (a, b) {
                        for (var c = 0, d = a.length,
                                f = []; c < d; c++) {
                            var g = a[c].cloneNode(!0);
                            f.push(b ? t.ba(g) : g)
                        }
                        return f
                    },
                    fa: function (a, b) {
                        t.a.rb(a);
                        if (b)
                            for (var c = 0, d = b.length; c < d; c++) a.appendChild(b[c])
                    },
                    uc: function (a, b) {
                        var c = a.nodeType ? [a] : a;
                        if (0 < c.length) {
                            for (var d = c[0], f = d.parentNode, g = 0, h = b.length; g < h; g++) f.insertBefore(b[g], d);
                            g = 0;
                            for (h = c.length; g < h; g++) t.removeNode(c[g])
                        }
                    },
                    Ba: function (a, b) {
                        if (a.length) {
                            for (b = 8 === b.nodeType && b.parentNode || b; a.length && a[0].parentNode !== b;) a.splice(0, 1);
                            for (; 1 < a.length && a[a.length - 1].parentNode !== b;) a.length--;
                            if (1 < a.length) {
                                var c = a[0],
                                    d = a[a.length - 1];
                                for (a.length = 0; c !== d;) a.push(c), c = c.nextSibling;
                                a.push(d)
                            }
                        }
                        return a
                    },
                    wc: function (a, b) {
                        7 > z ? a.setAttribute("selected", b) : a.selected = b
                    },
                    cb: function (b) {
                        return null === b || b === a ? "" : b.trim ? b.trim() : b.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g, "")
                    },
                    sd: function (a, b) {
                        a = a || "";
                        return b.length > a.length ? !1 : a.substring(0, b.length) === b
                    },
                    Rc: function (a, b) {
                        if (a === b) return !0;
                        if (11 === a.nodeType) return !1;
                        if (b.contains) return b.contains(3 === a.nodeType ? a.parentNode : a);
                        if (b.compareDocumentPosition) return 16 ==
                            (b.compareDocumentPosition(a) & 16);
                        for (; a && a != b;) a = a.parentNode;
                        return !!a
                    },
                    qb: function (a) {
                        return t.a.Rc(a, a.ownerDocument.documentElement)
                    },
                    Tb: function (a) {
                        return !!t.a.Vb(a, t.a.qb)
                    },
                    A: function (a) {
                        return a && a.tagName && a.tagName.toLowerCase()
                    },
                    Zb: function (a) {
                        return t.onError ? function () {
                            try {
                                return a.apply(this, arguments)
                            } catch (b) {
                                throw t.onError && t.onError(b), b;
                            }
                        } : a
                    },
                    setTimeout: function (a, b) {
                        return setTimeout(t.a.Zb(a), b)
                    },
                    dc: function (a) {
                        setTimeout(function () {
                            t.onError && t.onError(a);
                            throw a;
                        }, 0)
                    },
                    q: function (a,
                        b, c) {
                        var d = t.a.Zb(c);
                        c = z && x[b];
                        if (t.options.useOnlyNativeEvents || c || !f)
                            if (c || "function" != typeof a.addEventListener)
                                if ("undefined" != typeof a.attachEvent) {
                                    var g = function (b) {
                                            d.call(a, b)
                                        },
                                        h = "on" + b;
                                    a.attachEvent(h, g);
                                    t.a.G.qa(a, function () {
                                        a.detachEvent(h, g)
                                    })
                                } else throw Error("Browser doesn't support addEventListener or attachEvent");
                        else a.addEventListener(b, d, !1);
                        else f(a).bind(b, d)
                    },
                    Fa: function (a, d) {
                        if (!a || !a.nodeType) throw Error("element must be a DOM node when calling triggerEvent");
                        var g;
                        "input" ===
                        t.a.A(a) && a.type && "click" == d.toLowerCase() ? (g = a.type, g = "checkbox" == g || "radio" == g) : g = !1;
                        if (t.options.useOnlyNativeEvents || !f || g)
                            if ("function" == typeof c.createEvent)
                                if ("function" == typeof a.dispatchEvent) g = c.createEvent(y[d] || "HTMLEvents"), g.initEvent(d, !0, !0, b, 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, a), a.dispatchEvent(g);
                                else throw Error("The supplied element doesn't support dispatchEvent");
                        else if (g && a.click) a.click();
                        else if ("undefined" != typeof a.fireEvent) a.fireEvent("on" + d);
                        else throw Error("Browser doesn't support triggering events");
                        else f(a).trigger(d)
                    },
                    c: function (a) {
                        return t.I(a) ? a() : a
                    },
                    Bb: function (a) {
                        return t.I(a) ? a.p() : a
                    },
                    fb: function (a, b, c) {
                        var d;
                        b && ("object" === typeof a.classList ? (d = a.classList[c ? "add" : "remove"], t.a.r(b.match(B), function (b) {
                            d.call(a.classList, b)
                        })) : "string" === typeof a.className.baseVal ? p(a.className, "baseVal", b, c) : p(a, "className", b, c))
                    },
                    bb: function (b, c) {
                        var d = t.a.c(c);
                        if (null === d || d === a) d = "";
                        var f = t.f.firstChild(b);
                        !f || 3 != f.nodeType || t.f.nextSibling(f) ? t.f.fa(b, [b.ownerDocument.createTextNode(d)]) : f.data =
                            d;
                        t.a.Wc(b)
                    },
                    vc: function (a, b) {
                        a.name = b;
                        if (7 >= z) try {
                            a.mergeAttributes(c.createElement("<input name='" + a.name + "'/>"), !1)
                        } catch (d) {}
                    },
                    Wc: function (a) {
                        9 <= z && (a = 1 == a.nodeType ? a : a.parentNode, a.style && (a.style.zoom = a.style.zoom))
                    },
                    Sc: function (a) {
                        if (z) {
                            var b = a.style.width;
                            a.style.width = 0;
                            a.style.width = b
                        }
                    },
                    nd: function (a, b) {
                        a = t.a.c(a);
                        b = t.a.c(b);
                        for (var c = [], d = a; d <= b; d++) c.push(d);
                        return c
                    },
                    W: function (a) {
                        for (var b = [], c = 0, d = a.length; c < d; c++) b.push(a[c]);
                        return b
                    },
                    bc: function (a) {
                        return v ? Symbol(a) : a
                    },
                    xd: 6 === z,
                    yd: 7 === z,
                    C: z,
                    ic: function (a, b) {
                        for (var c = t.a.W(a.getElementsByTagName("input")).concat(t.a.W(a.getElementsByTagName("textarea"))), d = "string" == typeof b ? function (a) {
                                return a.name === b
                            } : function (a) {
                                return b.test(a.name)
                            }, f = [], g = c.length - 1; 0 <= g; g--) d(c[g]) && f.push(c[g]);
                        return f
                    },
                    kd: function (a) {
                        return "string" == typeof a && (a = t.a.cb(a)) ? g && g.parse ? g.parse(a) : (new Function("return " + a))() : null
                    },
                    Gb: function (a, b, c) {
                        if (!g || !g.stringify) throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");
                        return g.stringify(t.a.c(a), b, c)
                    },
                    ld: function (a, b, d) {
                        d = d || {};
                        var f = d.params || {},
                            g = d.includeFields || this.gc,
                            m = a;
                        if ("object" == typeof a && "form" === t.a.A(a))
                            for (var m = a.action, n = g.length - 1; 0 <= n; n--)
                                for (var p = t.a.ic(a, g[n]), u = p.length - 1; 0 <= u; u--) f[p[u].name] = p[u].value;
                        b = t.a.c(b);
                        var v = c.createElement("form");
                        v.style.display = "none";
                        v.action = m;
                        v.method = "post";
                        for (var w in b) a = c.createElement("input"), a.type = "hidden", a.name = w, a.value = t.a.Gb(t.a.c(b[w])), v.appendChild(a);
                        h(f, function (a, b) {
                            var d = c.createElement("input");
                            d.type = "hidden";
                            d.name = a;
                            d.value = b;
                            v.appendChild(d)
                        });
                        c.body.appendChild(v);
                        d.submitter ? d.submitter(v) : v.submit();
                        setTimeout(function () {
                            v.parentNode.removeChild(v)
                        }, 0)
                    }
                }
            }();
            t.b("utils", t.a);
            t.b("utils.arrayForEach", t.a.r);
            t.b("utils.arrayFirst", t.a.Vb);
            t.b("utils.arrayFilter", t.a.Ma);
            t.b("utils.arrayGetDistinctValues", t.a.Wb);
            t.b("utils.arrayIndexOf", t.a.o);
            t.b("utils.arrayMap", t.a.ib);
            t.b("utils.arrayPushAll", t.a.ta);
            t.b("utils.arrayRemoveItem", t.a.Na);
            t.b("utils.extend", t.a.extend);
            t.b("utils.fieldsIncludedWithJsonPost",
                t.a.gc);
            t.b("utils.getFormFields", t.a.ic);
            t.b("utils.peekObservable", t.a.Bb);
            t.b("utils.postJson", t.a.ld);
            t.b("utils.parseJson", t.a.kd);
            t.b("utils.registerEventHandler", t.a.q);
            t.b("utils.stringifyJson", t.a.Gb);
            t.b("utils.range", t.a.nd);
            t.b("utils.toggleDomNodeCssClass", t.a.fb);
            t.b("utils.triggerEvent", t.a.Fa);
            t.b("utils.unwrapObservable", t.a.c);
            t.b("utils.objectForEach", t.a.D);
            t.b("utils.addOrRemoveItem", t.a.ra);
            t.b("utils.setTextContent", t.a.bb);
            t.b("unwrap", t.a.c);
            Function.prototype.bind || (Function.prototype.bind =
                function (a) {
                    var b = this;
                    if (1 === arguments.length) return function () {
                        return b.apply(a, arguments)
                    };
                    var c = Array.prototype.slice.call(arguments, 1);
                    return function () {
                        var d = c.slice(0);
                        d.push.apply(d, arguments);
                        return b.apply(a, d)
                    }
                });
            t.a.e = new function () {
                function b(g, h) {
                    var m = g[d];
                    if (!m || "null" === m || !f[m]) {
                        if (!h) return a;
                        m = g[d] = "ko" + c++;
                        f[m] = {}
                    }
                    return f[m]
                }
                var c = 0,
                    d = "__ko__" + (new Date).getTime(),
                    f = {};
                return {
                    get: function (c, d) {
                        var f = b(c, !1);
                        return f === a ? a : f[d]
                    },
                    set: function (c, d, f) {
                        if (f !== a || b(c, !1) !== a) b(c, !0)[d] =
                            f
                    },
                    clear: function (a) {
                        var b = a[d];
                        return b ? (delete f[b], a[d] = null, !0) : !1
                    },
                    J: function () {
                        return c++ + d
                    }
                }
            };
            t.b("utils.domData", t.a.e);
            t.b("utils.domData.clear", t.a.e.clear);
            t.a.G = new function () {
                function b(c, f) {
                    var g = t.a.e.get(c, d);
                    g === a && f && (g = [], t.a.e.set(c, d, g));
                    return g
                }

                function c(a) {
                    var d = b(a, !1);
                    if (d)
                        for (var d = d.slice(0), f = 0; f < d.length; f++) d[f](a);
                    t.a.e.clear(a);
                    t.a.G.cleanExternalData(a);
                    if (h[a.nodeType])
                        for (d = a.firstChild; a = d;) d = a.nextSibling, 8 === a.nodeType && c(a)
                }
                var d = t.a.e.J(),
                    g = {
                        1: !0,
                        8: !0,
                        9: !0
                    },
                    h = {
                        1: !0,
                        9: !0
                    };
                return {
                    qa: function (a, c) {
                        if ("function" != typeof c) throw Error("Callback must be a function");
                        b(a, !0).push(c)
                    },
                    tc: function (c, f) {
                        var g = b(c, !1);
                        g && (t.a.Na(g, f), 0 == g.length && t.a.e.set(c, d, a))
                    },
                    ba: function (a) {
                        if (g[a.nodeType] && (c(a), h[a.nodeType])) {
                            var b = [];
                            t.a.ta(b, a.getElementsByTagName("*"));
                            for (var d = 0, f = b.length; d < f; d++) c(b[d])
                        }
                        return a
                    },
                    removeNode: function (a) {
                        t.ba(a);
                        a.parentNode && a.parentNode.removeChild(a)
                    },
                    cleanExternalData: function (a) {
                        f && "function" == typeof f.cleanData && f.cleanData([a])
                    }
                }
            };
            t.ba = t.a.G.ba;
            t.removeNode = t.a.G.removeNode;
            t.b("cleanNode", t.ba);
            t.b("removeNode", t.removeNode);
            t.b("utils.domNodeDisposal", t.a.G);
            t.b("utils.domNodeDisposal.addDisposeCallback", t.a.G.qa);
            t.b("utils.domNodeDisposal.removeDisposeCallback", t.a.G.tc);
            (function () {
                var d = [0, "", ""],
                    g = [1, "<table>", "</table>"],
                    h = [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                    m = [1, "<select multiple='multiple'>", "</select>"],
                    n = {
                        thead: g,
                        tbody: g,
                        tfoot: g,
                        tr: [2, "<table><tbody>",
                            "</tbody></table>"
                        ],
                        td: h,
                        th: h,
                        option: m,
                        optgroup: m
                    },
                    p = 8 >= t.a.C;
                t.a.na = function (a, g) {
                    var h;
                    if (f)
                        if (f.parseHTML) h = f.parseHTML(a, g) || [];
                        else {
                            if ((h = f.clean([a], g)) && h[0]) {
                                for (var m = h[0]; m.parentNode && 11 !== m.parentNode.nodeType;) m = m.parentNode;
                                m.parentNode && m.parentNode.removeChild(m)
                            }
                        }
                    else {
                        (h = g) || (h = c);
                        var m = h.parentWindow || h.defaultView || b,
                            u = t.a.cb(a).toLowerCase(),
                            v = h.createElement("div"),
                            w;
                        w = (u = u.match(/^<([a-z]+)[ >]/)) && n[u[1]] || d;
                        u = w[0];
                        w = "ignored<div>" + w[1] + a + w[2] + "</div>";
                        for ("function" == typeof m.innerShiv ? v.appendChild(m.innerShiv(w)) : (p && h.appendChild(v), v.innerHTML = w, p && v.parentNode.removeChild(v)); u--;) v = v.lastChild;
                        h = t.a.W(v.lastChild.childNodes)
                    }
                    return h
                };
                t.a.Eb = function (b, c) {
                    t.a.rb(b);
                    c = t.a.c(c);
                    if (null !== c && c !== a)
                        if ("string" != typeof c && (c = c.toString()), f) f(b).html(c);
                        else
                            for (var d = t.a.na(c, b.ownerDocument), g = 0; g < d.length; g++) b.appendChild(d[g])
                }
            })();
            t.b("utils.parseHtmlFragment", t.a.na);
            t.b("utils.setHtml", t.a.Eb);
            t.N = function () {
                function b(a, c) {
                    if (a)
                        if (8 ==
                            a.nodeType) {
                            var d = t.N.pc(a.nodeValue);
                            null != d && c.push({
                                Qc: a,
                                hd: d
                            })
                        } else if (1 == a.nodeType)
                        for (var d = 0, f = a.childNodes, g = f.length; d < g; d++) b(f[d], c)
                }
                var c = {};
                return {
                    yb: function (a) {
                        if ("function" != typeof a) throw Error("You can only pass a function to ko.memoization.memoize()");
                        var b = (4294967296 * (1 + Math.random()) | 0).toString(16).substring(1) + (4294967296 * (1 + Math.random()) | 0).toString(16).substring(1);
                        c[b] = a;
                        return "<!--[ko_memo:" + b + "]-->"
                    },
                    Bc: function (b, d) {
                        var f = c[b];
                        if (f === a) throw Error("Couldn't find any memo with ID " +
                            b + ". Perhaps it's already been unmemoized.");
                        try {
                            return f.apply(null, d || []), !0
                        } finally {
                            delete c[b]
                        }
                    },
                    Cc: function (a, c) {
                        var d = [];
                        b(a, d);
                        for (var f = 0, g = d.length; f < g; f++) {
                            var h = d[f].Qc,
                                m = [h];
                            c && t.a.ta(m, c);
                            t.N.Bc(d[f].hd, m);
                            h.nodeValue = "";
                            h.parentNode && h.parentNode.removeChild(h)
                        }
                    },
                    pc: function (a) {
                        return (a = a.match(/^\[ko_memo\:(.*?)\]$/)) ? a[1] : null
                    }
                }
            }();
            t.b("memoization", t.N);
            t.b("memoization.memoize", t.N.yb);
            t.b("memoization.unmemoize", t.N.Bc);
            t.b("memoization.parseMemoText", t.N.pc);
            t.b("memoization.unmemoizeDomNodeAndDescendants",
                t.N.Cc);
            t.Z = function () {
                function a() {
                    if (g)
                        for (var b = g, c = 0, d; m < g;)
                            if (d = f[m++]) {
                                if (m > b) {
                                    if (5E3 <= ++c) {
                                        m = g;
                                        t.a.dc(Error("'Too much recursion' after processing " + c + " task groups."));
                                        break
                                    }
                                    b = g
                                }
                                try {
                                    d()
                                } catch (h) {
                                    t.a.dc(h)
                                }
                            }
                }

                function d() {
                    a();
                    m = g = f.length = 0
                }
                var f = [],
                    g = 0,
                    h = 1,
                    m = 0;
                return {
                    scheduler: b.MutationObserver ? function (a) {
                        var b = c.createElement("div");
                        (new MutationObserver(a)).observe(b, {
                            attributes: !0
                        });
                        return function () {
                            b.classList.toggle("foo")
                        }
                    }(d) : c && "onreadystatechange" in c.createElement("script") ? function (a) {
                        var b =
                            c.createElement("script");
                        b.onreadystatechange = function () {
                            b.onreadystatechange = null;
                            c.documentElement.removeChild(b);
                            b = null;
                            a()
                        };
                        c.documentElement.appendChild(b)
                    } : function (a) {
                        setTimeout(a, 0)
                    },
                    Za: function (a) {
                        g || t.Z.scheduler(d);
                        f[g++] = a;
                        return h++
                    },
                    cancel: function (a) {
                        a -= h - g;
                        a >= m && a < g && (f[a] = null)
                    },
                    resetForTesting: function () {
                        var a = g - m;
                        m = g = f.length = 0;
                        return a
                    },
                    rd: a
                }
            }();
            t.b("tasks", t.Z);
            t.b("tasks.schedule", t.Z.Za);
            t.b("tasks.runEarly", t.Z.rd);
            t.Aa = {
                throttle: function (a, b) {
                    a.throttleEvaluation = b;
                    var c =
                        null;
                    return t.B({
                        read: a,
                        write: function (d) {
                            clearTimeout(c);
                            c = t.a.setTimeout(function () {
                                a(d)
                            }, b)
                        }
                    })
                },
                rateLimit: function (a, b) {
                    var c, d, f;
                    "number" == typeof b ? c = b : (c = b.timeout, d = b.method);
                    a.gb = !1;
                    f = "notifyWhenChangesStop" == d ? u : p;
                    a.Wa(function (a) {
                        return f(a, c)
                    })
                },
                deferred: function (b, c) {
                    if (!0 !== c) throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");
                    b.gb || (b.gb = !0, b.Wa(function (c) {
                        var d, f = !1;
                        return function () {
                            if (!f) {
                                t.Z.cancel(d);
                                d = t.Z.Za(c);
                                try {
                                    f = !0, b.notifySubscribers(a, "dirty")
                                } finally {
                                    f = !1
                                }
                            }
                        }
                    }))
                },
                notify: function (a, b) {
                    a.equalityComparer = "always" == b ? null : n
                }
            };
            var A = {
                undefined: 1,
                "boolean": 1,
                number: 1,
                string: 1
            };
            t.b("extenders", t.Aa);
            t.zc = function (a, b, c) {
                this.$ = a;
                this.jb = b;
                this.Pc = c;
                this.T = !1;
                t.H(this, "dispose", this.k)
            };
            t.zc.prototype.k = function () {
                this.T = !0;
                this.Pc()
            };
            t.K = function () {
                t.a.ab(this, B);
                B.ub(this)
            };
            var w = "change",
                B = {
                    ub: function (a) {
                        a.F = {
                            change: []
                        };
                        a.Qb = 1
                    },
                    Y: function (a, b, c) {
                        var d = this;
                        c = c || w;
                        var f = new t.zc(d, b ? a.bind(b) :
                            a,
                            function () {
                                t.a.Na(d.F[c], f);
                                d.Ka && d.Ka(c)
                            });
                        d.ua && d.ua(c);
                        d.F[c] || (d.F[c] = []);
                        d.F[c].push(f);
                        return f
                    },
                    notifySubscribers: function (a, b) {
                        b = b || w;
                        b === w && this.Kb();
                        if (this.Ra(b)) {
                            var c = b === w && this.Fc || this.F[b].slice(0);
                            try {
                                t.l.Xb();
                                for (var d = 0, f; f = c[d]; ++d) f.T || f.jb(a)
                            } finally {
                                t.l.end()
                            }
                        }
                    },
                    Pa: function () {
                        return this.Qb
                    },
                    Zc: function (a) {
                        return this.Pa() !== a
                    },
                    Kb: function () {
                        ++this.Qb
                    },
                    Wa: function (a) {
                        var b = this,
                            c = t.I(b),
                            d, f, g, h;
                        b.Ja || (b.Ja = b.notifySubscribers, b.notifySubscribers = v);
                        var m = a(function () {
                            b.Ha = !1;
                            c && h === b && (h = b.Mb ? b.Mb() : b());
                            var a = f || b.Ua(g, h);
                            f = d = !1;
                            a && b.Ja(g = h)
                        });
                        b.Pb = function (a) {
                            b.Fc = b.F[w].slice(0);
                            b.Ha = d = !0;
                            h = a;
                            m()
                        };
                        b.Ob = function (a) {
                            d || (g = a, b.Ja(a, "beforeChange"))
                        };
                        b.Hc = function () {
                            b.Ua(g, b.p(!0)) && (f = !0)
                        }
                    },
                    Ra: function (a) {
                        return this.F[a] && this.F[a].length
                    },
                    Xc: function (a) {
                        if (a) return this.F[a] && this.F[a].length || 0;
                        var b = 0;
                        t.a.D(this.F, function (a, c) {
                            "dirty" !== a && (b += c.length)
                        });
                        return b
                    },
                    Ua: function (a, b) {
                        return !this.equalityComparer || !this.equalityComparer(a, b)
                    },
                    extend: function (a) {
                        var b =
                            this;
                        a && t.a.D(a, function (a, c) {
                            var d = t.Aa[a];
                            "function" == typeof d && (b = d(b, c) || b)
                        });
                        return b
                    }
                };
            t.H(B, "subscribe", B.Y);
            t.H(B, "extend", B.extend);
            t.H(B, "getSubscriptionsCount", B.Xc);
            t.a.la && t.a.$a(B, Function.prototype);
            t.K.fn = B;
            t.lc = function (a) {
                return null != a && "function" == typeof a.Y && "function" == typeof a.notifySubscribers
            };
            t.b("subscribable", t.K);
            t.b("isSubscribable", t.lc);
            t.xa = t.l = function () {
                function a(b) {
                    c.push(d);
                    d = b
                }

                function b() {
                    d = c.pop()
                }
                var c = [],
                    d, f = 0;
                return {
                    Xb: a,
                    end: b,
                    sc: function (a) {
                        if (d) {
                            if (!t.lc(a)) throw Error("Only subscribable things can act as dependencies");
                            d.jb.call(d.Lc, a, a.Gc || (a.Gc = ++f))
                        }
                    },
                    w: function (c, d, f) {
                        try {
                            return a(), c.apply(d, f || [])
                        } finally {
                            b()
                        }
                    },
                    Ca: function () {
                        if (d) return d.m.Ca()
                    },
                    Va: function () {
                        if (d) return d.Va
                    }
                }
            }();
            t.b("computedContext", t.xa);
            t.b("computedContext.getDependenciesCount", t.xa.Ca);
            t.b("computedContext.isInitial", t.xa.Va);
            t.b("ignoreDependencies", t.wd = t.l.w);
            var F = t.a.bc("_latestValue");
            t.O = function (a) {
                function b() {
                    if (0 < arguments.length) return b.Ua(b[F], arguments[0]) && (b.ia(), b[F] = arguments[0], b.ha()), this;
                    t.l.sc(b);
                    return b[F]
                }
                b[F] = a;
                t.a.la || t.a.extend(b, t.K.fn);
                t.K.fn.ub(b);
                t.a.ab(b, C);
                t.options.deferUpdates && t.Aa.deferred(b, !0);
                return b
            };
            var C = {
                equalityComparer: n,
                p: function () {
                    return this[F]
                },
                ha: function () {
                    this.notifySubscribers(this[F])
                },
                ia: function () {
                    this.notifySubscribers(this[F], "beforeChange")
                }
            };
            t.a.la && t.a.$a(C, t.K.fn);
            var D = t.O.md = "__ko_proto__";
            C[D] = t.O;
            t.Qa = function (b, c) {
                return null === b || b === a || b[D] === a ? !1 : b[D] === c ? !0 : t.Qa(b[D], c)
            };
            t.I = function (a) {
                return t.Qa(a, t.O)
            };
            t.Da = function (a) {
                return "function" == typeof a &&
                    a[D] === t.O || "function" == typeof a && a[D] === t.B && a.$c ? !0 : !1
            };
            t.b("observable", t.O);
            t.b("isObservable", t.I);
            t.b("isWriteableObservable", t.Da);
            t.b("isWritableObservable", t.Da);
            t.b("observable.fn", C);
            t.H(C, "peek", C.p);
            t.H(C, "valueHasMutated", C.ha);
            t.H(C, "valueWillMutate", C.ia);
            t.ma = function (a) {
                a = a || [];
                if ("object" != typeof a || !("length" in a)) throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");
                a = t.O(a);
                t.a.ab(a, t.ma.fn);
                return a.extend({
                    trackArrayChanges: !0
                })
            };
            t.ma.fn = {
                remove: function (a) {
                    for (var b = this.p(), c = [], d = "function" != typeof a || t.I(a) ? function (b) {
                            return b === a
                        } : a, f = 0; f < b.length; f++) {
                        var g = b[f];
                        d(g) && (0 === c.length && this.ia(), c.push(g), b.splice(f, 1), f--)
                    }
                    c.length && this.ha();
                    return c
                },
                removeAll: function (b) {
                    if (b === a) {
                        var c = this.p(),
                            d = c.slice(0);
                        this.ia();
                        c.splice(0, c.length);
                        this.ha();
                        return d
                    }
                    return b ? this.remove(function (a) {
                        return 0 <= t.a.o(b, a)
                    }) : []
                },
                destroy: function (a) {
                    var b = this.p(),
                        c = "function" != typeof a || t.I(a) ? function (b) {
                            return b === a
                        } : a;
                    this.ia();
                    for (var d = b.length - 1; 0 <= d; d--) c(b[d]) && (b[d]._destroy = !0);
                    this.ha()
                },
                destroyAll: function (b) {
                    return b === a ? this.destroy(function () {
                        return !0
                    }) : b ? this.destroy(function (a) {
                        return 0 <= t.a.o(b, a)
                    }) : []
                },
                indexOf: function (a) {
                    var b = this();
                    return t.a.o(b, a)
                },
                replace: function (a, b) {
                    var c = this.indexOf(a);
                    0 <= c && (this.ia(), this.p()[c] = b, this.ha())
                }
            };
            t.a.la && t.a.$a(t.ma.fn, t.O.fn);
            t.a.r("pop push reverse shift sort splice unshift".split(" "), function (a) {
                t.ma.fn[a] = function () {
                    var b = this.p();
                    this.ia();
                    this.Yb(b, a, arguments);
                    var c = b[a].apply(b, arguments);
                    this.ha();
                    return c === b ? this : c
                }
            });
            t.a.r(["slice"], function (a) {
                t.ma.fn[a] = function () {
                    var b = this();
                    return b[a].apply(b, arguments)
                }
            });
            t.b("observableArray", t.ma);
            t.Aa.trackArrayChanges = function (b, c) {
                function d() {
                    if (!f) {
                        f = !0;
                        n = b.notifySubscribers;
                        b.notifySubscribers = function (a, b) {
                            b && b !== w || ++m;
                            return n.apply(this, arguments)
                        };
                        var a = [].concat(b.p() || []);
                        g = null;
                        h = b.Y(function (c) {
                            c = [].concat(c || []);
                            if (b.Ra("arrayChange")) {
                                var d;
                                if (!g || 1 < m) g = t.a.lb(a, c, b.kb);
                                d = g
                            }
                            a = c;
                            g = null;
                            m = 0;
                            d && d.length && b.notifySubscribers(d, "arrayChange")
                        })
                    }
                }
                b.kb = {};
                c && "object" == typeof c && t.a.extend(b.kb, c);
                b.kb.sparse = !0;
                if (!b.Yb) {
                    var f = !1,
                        g = null,
                        h, m = 0,
                        n, p = b.ua,
                        u = b.Ka;
                    b.ua = function (a) {
                        p && p.call(b, a);
                        "arrayChange" === a && d()
                    };
                    b.Ka = function (c) {
                        u && u.call(b, c);
                        "arrayChange" !== c || b.Ra("arrayChange") || (n && (b.notifySubscribers = n, n = a), h.k(), f = !1)
                    };
                    b.Yb = function (a, b, c) {
                        function d(a, b, c) {
                            return h[h.length] = {
                                status: a,
                                value: b,
                                index: c
                            }
                        }
                        if (f && !m) {
                            var h = [],
                                n = a.length,
                                p = c.length,
                                u = 0;
                            switch (b) {
                            case "push":
                                u = n;
                            case "unshift":
                                for (b =
                                    0; b < p; b++) d("added", c[b], u + b);
                                break;
                            case "pop":
                                u = n - 1;
                            case "shift":
                                n && d("deleted", a[u], u);
                                break;
                            case "splice":
                                b = Math.min(Math.max(0, 0 > c[0] ? n + c[0] : c[0]), n);
                                for (var n = 1 === p ? n : Math.min(b + (c[1] || 0), n), p = b + p - 2, u = Math.max(n, p), v = [], w = [], y = 2; b < u; ++b, ++y) b < n && w.push(d("deleted", a[b], b)), b < p && v.push(d("added", c[y], b));
                                t.a.hc(w, v);
                                break;
                            default:
                                return
                            }
                            g = h
                        }
                    }
                }
            };
            var E = t.a.bc("_state");
            t.m = t.B = function (b, c, d) {
                function f() {
                    if (0 < arguments.length) {
                        if ("function" === typeof g) g.apply(h.sb, arguments);
                        else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");
                        return this
                    }
                    t.l.sc(f);
                    (h.V || h.t && f.Sa()) && f.U();
                    return h.M
                }
                "object" === typeof b ? d = b : (d = d || {}, b && (d.read = b));
                if ("function" != typeof d.read) throw Error("Pass a function that returns the value of the ko.computed");
                var g = d.write,
                    h = {
                        M: a,
                        da: !0,
                        V: !0,
                        Ta: !1,
                        Hb: !1,
                        T: !1,
                        Ya: !1,
                        t: !1,
                        od: d.read,
                        sb: c || d.owner,
                        i: d.disposeWhenNodeIsRemoved || d.i || null,
                        ya: d.disposeWhen || d.ya,
                        pb: null,
                        s: {},
                        L: 0,
                        fc: null
                    };
                f[E] = h;
                f.$c = "function" === typeof g;
                t.a.la || t.a.extend(f, t.K.fn);
                t.K.fn.ub(f);
                t.a.ab(f, G);
                d.pure ? (h.Ya = !0, h.t = !0, t.a.extend(f,
                    H)) : d.deferEvaluation && t.a.extend(f, M);
                t.options.deferUpdates && t.Aa.deferred(f, !0);
                h.i && (h.Hb = !0, h.i.nodeType || (h.i = null));
                h.t || d.deferEvaluation || f.U();
                h.i && f.ca() && t.a.G.qa(h.i, h.pb = function () {
                    f.k()
                });
                return f
            };
            var G = {
                    equalityComparer: n,
                    Ca: function () {
                        return this[E].L
                    },
                    Sb: function (a, b, c) {
                        if (this[E].Ya && b === this) throw Error("A 'pure' computed must not be called recursively");
                        this[E].s[a] = c;
                        c.Ia = this[E].L++;
                        c.pa = b.Pa()
                    },
                    Sa: function () {
                        var a, b, c = this[E].s;
                        for (a in c)
                            if (c.hasOwnProperty(a) && (b = c[a], this.oa &&
                                    b.$.Ha || b.$.Zc(b.pa))) return !0
                    },
                    gd: function () {
                        this.oa && !this[E].Ta && this.oa(!1)
                    },
                    ca: function () {
                        var a = this[E];
                        return a.V || 0 < a.L
                    },
                    qd: function () {
                        this.Ha ? this[E].V && (this[E].da = !0) : this.ec()
                    },
                    yc: function (a) {
                        if (a.gb && !this[E].i) {
                            var b = a.Y(this.gd, this, "dirty"),
                                c = a.Y(this.qd, this);
                            return {
                                $: a,
                                k: function () {
                                    b.k();
                                    c.k()
                                }
                            }
                        }
                        return a.Y(this.ec, this)
                    },
                    ec: function () {
                        var a = this,
                            b = a.throttleEvaluation;
                        b && 0 <= b ? (clearTimeout(this[E].fc), this[E].fc = t.a.setTimeout(function () {
                            a.U(!0)
                        }, b)) : a.oa ? a.oa(!0) : a.U(!0)
                    },
                    U: function (a) {
                        var b =
                            this[E],
                            c = b.ya,
                            d = !1;
                        if (!b.Ta && !b.T) {
                            if (b.i && !t.a.qb(b.i) || c && c()) {
                                if (!b.Hb) {
                                    this.k();
                                    return
                                }
                            } else b.Hb = !1;
                            b.Ta = !0;
                            try {
                                d = this.Vc(a)
                            } finally {
                                b.Ta = !1
                            }
                            b.L || this.k();
                            return d
                        }
                    },
                    Vc: function (b) {
                        var c = this[E],
                            d = !1,
                            f = c.Ya ? a : !c.L,
                            g = {
                                Mc: this,
                                Oa: c.s,
                                ob: c.L
                            };
                        t.l.Xb({
                            Lc: g,
                            jb: y,
                            m: this,
                            Va: f
                        });
                        c.s = {};
                        c.L = 0;
                        g = this.Uc(c, g);
                        this.Ua(c.M, g) && (c.t || this.notifySubscribers(c.M, "beforeChange"), c.M = g, c.t ? this.Kb() : b && this.notifySubscribers(c.M), d = !0);
                        f && this.notifySubscribers(c.M, "awake");
                        return d
                    },
                    Uc: function (a, b) {
                        try {
                            var c =
                                a.od;
                            return a.sb ? c.call(a.sb) : c()
                        } finally {
                            t.l.end(), b.ob && !a.t && t.a.D(b.Oa, x), a.da = a.V = !1
                        }
                    },
                    p: function (a) {
                        var b = this[E];
                        (b.V && (a || !b.L) || b.t && this.Sa()) && this.U();
                        return b.M
                    },
                    Wa: function (a) {
                        t.K.fn.Wa.call(this, a);
                        this.Mb = function () {
                            this[E].da ? this.U() : this[E].V = !1;
                            return this[E].M
                        };
                        this.oa = function (a) {
                            this.Ob(this[E].M);
                            this[E].V = !0;
                            a && (this[E].da = !0);
                            this.Pb(this)
                        }
                    },
                    k: function () {
                        var a = this[E];
                        !a.t && a.s && t.a.D(a.s, function (a, b) {
                            b.k && b.k()
                        });
                        a.i && a.pb && t.a.G.tc(a.i, a.pb);
                        a.s = null;
                        a.L = 0;
                        a.T = !0;
                        a.da = !1;
                        a.V = !1;
                        a.t = !1;
                        a.i = null
                    }
                },
                H = {
                    ua: function (a) {
                        var b = this,
                            c = b[E];
                        if (!c.T && c.t && "change" == a) {
                            c.t = !1;
                            if (c.da || b.Sa()) c.s = null, c.L = 0, b.U() && b.Kb();
                            else {
                                var d = [];
                                t.a.D(c.s, function (a, b) {
                                    d[b.Ia] = a
                                });
                                t.a.r(d, function (a, d) {
                                    var f = c.s[a],
                                        g = b.yc(f.$);
                                    g.Ia = d;
                                    g.pa = f.pa;
                                    c.s[a] = g
                                })
                            }
                            c.T || b.notifySubscribers(c.M, "awake")
                        }
                    },
                    Ka: function (b) {
                        var c = this[E];
                        c.T || "change" != b || this.Ra("change") || (t.a.D(c.s, function (a, b) {
                            b.k && (c.s[a] = {
                                $: b.$,
                                Ia: b.Ia,
                                pa: b.pa
                            }, b.k())
                        }), c.t = !0, this.notifySubscribers(a, "asleep"))
                    },
                    Pa: function () {
                        var a =
                            this[E];
                        a.t && (a.da || this.Sa()) && this.U();
                        return t.K.fn.Pa.call(this)
                    }
                },
                M = {
                    ua: function (a) {
                        "change" != a && "beforeChange" != a || this.p()
                    }
                };
            t.a.la && t.a.$a(G, t.K.fn);
            var K = t.O.md;
            t.m[K] = t.O;
            G[K] = t.m;
            t.bd = function (a) {
                return t.Qa(a, t.m)
            };
            t.cd = function (a) {
                return t.Qa(a, t.m) && a[E] && a[E].Ya
            };
            t.b("computed", t.m);
            t.b("dependentObservable", t.m);
            t.b("isComputed", t.bd);
            t.b("isPureComputed", t.cd);
            t.b("computed.fn", G);
            t.H(G, "peek", G.p);
            t.H(G, "dispose", G.k);
            t.H(G, "isActive", G.ca);
            t.H(G, "getDependenciesCount", G.Ca);
            t.rc =
                function (a, b) {
                    if ("function" === typeof a) return t.m(a, b, {
                        pure: !0
                    });
                    a = t.a.extend({}, a);
                    a.pure = !0;
                    return t.m(a, b)
                };
            t.b("pureComputed", t.rc);
            (function () {
                function b(f, g, h) {
                    h = h || new d;
                    f = g(f);
                    if ("object" != typeof f || null === f || f === a || f instanceof RegExp || f instanceof Date || f instanceof String || f instanceof Number || f instanceof Boolean) return f;
                    var m = f instanceof Array ? [] : {};
                    h.save(f, m);
                    c(f, function (c) {
                        var d = g(f[c]);
                        switch (typeof d) {
                        case "boolean":
                        case "number":
                        case "string":
                        case "function":
                            m[c] = d;
                            break;
                        case "object":
                        case "undefined":
                            var n =
                                h.get(d);
                            m[c] = n !== a ? n : b(d, g, h)
                        }
                    });
                    return m
                }

                function c(a, b) {
                    if (a instanceof Array) {
                        for (var d = 0; d < a.length; d++) b(d);
                        "function" == typeof a.toJSON && b("toJSON")
                    } else
                        for (d in a) b(d)
                }

                function d() {
                    this.keys = [];
                    this.Lb = []
                }
                t.Ac = function (a) {
                    if (0 == arguments.length) throw Error("When calling ko.toJS, pass the object you want to convert.");
                    return b(a, function (a) {
                        for (var b = 0; t.I(a) && 10 > b; b++) a = a();
                        return a
                    })
                };
                t.toJSON = function (a, b, c) {
                    a = t.Ac(a);
                    return t.a.Gb(a, b, c)
                };
                d.prototype = {
                    save: function (a, b) {
                        var c = t.a.o(this.keys,
                            a);
                        0 <= c ? this.Lb[c] = b : (this.keys.push(a), this.Lb.push(b))
                    },
                    get: function (b) {
                        b = t.a.o(this.keys, b);
                        return 0 <= b ? this.Lb[b] : a
                    }
                }
            })();
            t.b("toJS", t.Ac);
            t.b("toJSON", t.toJSON);
            (function () {
                t.j = {
                    u: function (b) {
                        switch (t.a.A(b)) {
                        case "option":
                            return !0 === b.__ko__hasDomDataOptionValue__ ? t.a.e.get(b, t.d.options.zb) : 7 >= t.a.C ? b.getAttributeNode("value") && b.getAttributeNode("value").specified ? b.value : b.text : b.value;
                        case "select":
                            return 0 <= b.selectedIndex ? t.j.u(b.options[b.selectedIndex]) : a;
                        default:
                            return b.value
                        }
                    },
                    ja: function (b,
                        c, d) {
                        switch (t.a.A(b)) {
                        case "option":
                            switch (typeof c) {
                            case "string":
                                t.a.e.set(b, t.d.options.zb, a);
                                "__ko__hasDomDataOptionValue__" in b && delete b.__ko__hasDomDataOptionValue__;
                                b.value = c;
                                break;
                            default:
                                t.a.e.set(b, t.d.options.zb, c), b.__ko__hasDomDataOptionValue__ = !0, b.value = "number" === typeof c ? c : ""
                            }
                            break;
                        case "select":
                            if ("" === c || null === c) c = a;
                            for (var f = -1, g = 0, h = b.options.length, m; g < h; ++g)
                                if (m = t.j.u(b.options[g]), m == c || "" == m && c === a) {
                                    f = g;
                                    break
                                } if (d || 0 <= f || c === a && 1 < b.size) b.selectedIndex = f;
                            break;
                        default:
                            if (null ===
                                c || c === a) c = "";
                            b.value = c
                        }
                    }
                }
            })();
            t.b("selectExtensions", t.j);
            t.b("selectExtensions.readValue", t.j.u);
            t.b("selectExtensions.writeValue", t.j.ja);
            t.h = function () {
                function a(b) {
                    b = t.a.cb(b);
                    123 === b.charCodeAt(0) && (b = b.slice(1, -1));
                    var c = [],
                        h = b.match(d),
                        m, n = [],
                        p = 0;
                    if (h) {
                        h.push(",");
                        for (var u = 0, v; v = h[u]; ++u) {
                            var w = v.charCodeAt(0);
                            if (44 === w) {
                                if (0 >= p) {
                                    c.push(m && n.length ? {
                                        key: m,
                                        value: n.join("")
                                    } : {
                                        unknown: m || n.join("")
                                    });
                                    m = p = 0;
                                    n = [];
                                    continue
                                }
                            } else if (58 === w) {
                                if (!p && !m && 1 === n.length) {
                                    m = n.pop();
                                    continue
                                }
                            } else 47 ===
                                w && u && 1 < v.length ? (w = h[u - 1].match(f)) && !g[w[0]] && (b = b.substr(b.indexOf(v) + 1), h = b.match(d), h.push(","), u = -1, v = "/") : 40 === w || 123 === w || 91 === w ? ++p : 41 === w || 125 === w || 93 === w ? --p : m || n.length || 34 !== w && 39 !== w || (v = v.slice(1, -1));
                            n.push(v)
                        }
                    }
                    return c
                }
                var b = ["true", "false", "null", "undefined"],
                    c = /^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,
                    d = RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]", "g"),
                    f = /[\])"'A-Za-z0-9_$]+$/,
                    g = {
                        "in": 1,
                        "return": 1,
                        "typeof": 1
                    },
                    h = {};
                return {
                    va: [],
                    ga: h,
                    Ab: a,
                    Xa: function (d, f) {
                        function g(a, d) {
                            var f;
                            if (!u) {
                                var v = t.getBindingHandler(a);
                                if (v && v.preprocess && !(d = v.preprocess(d, a, g))) return;
                                if (v = h[a]) f = d, 0 <= t.a.o(b, f) ? f = !1 : (v = f.match(c), f = null === v ? !1 : v[1] ? "Object(" + v[1] + ")" + v[2] : f), v = f;
                                v && n.push("'" + a + "':function(_z){" + f + "=_z}")
                            }
                            p && (d = "function(){return " + d + " }");
                            m.push("'" + a + "':" + d)
                        }
                        f = f || {};
                        var m = [],
                            n = [],
                            p = f.valueAccessors,
                            u = f.bindingParams,
                            v = "string" === typeof d ? a(d) : d;
                        t.a.r(v, function (a) {
                            g(a.key ||
                                a.unknown, a.value)
                        });
                        n.length && g("_ko_property_writers", "{" + n.join(",") + " }");
                        return m.join(",")
                    },
                    fd: function (a, b) {
                        for (var c = 0; c < a.length; c++)
                            if (a[c].key == b) return !0;
                        return !1
                    },
                    Ga: function (a, b, c, d, f) {
                        if (a && t.I(a)) !t.Da(a) || f && a.p() === d || a(d);
                        else if ((a = b.get("_ko_property_writers")) && a[c]) a[c](d)
                    }
                }
            }();
            t.b("expressionRewriting", t.h);
            t.b("expressionRewriting.bindingRewriteValidators", t.h.va);
            t.b("expressionRewriting.parseObjectLiteral", t.h.Ab);
            t.b("expressionRewriting.preProcessBindings", t.h.Xa);
            t.b("expressionRewriting._twoWayBindings",
                t.h.ga);
            t.b("jsonExpressionRewriting", t.h);
            t.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson", t.h.Xa);
            (function () {
                function a(b) {
                    return 8 == b.nodeType && h.test(g ? b.text : b.nodeValue)
                }

                function b(a) {
                    return 8 == a.nodeType && m.test(g ? a.text : a.nodeValue)
                }

                function d(c, f) {
                    for (var g = c, h = 1, m = []; g = g.nextSibling;) {
                        if (b(g) && (h--, 0 === h)) return m;
                        m.push(g);
                        a(g) && h++
                    }
                    if (!f) throw Error("Cannot find closing comment tag to match: " + c.nodeValue);
                    return null
                }

                function f(a, b) {
                    var c = d(a, b);
                    return c ? 0 < c.length ? c[c.length -
                        1].nextSibling : a.nextSibling : null
                }
                var g = c && "<!--test-->" === c.createComment("test").text,
                    h = g ? /^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/ : /^\s*ko(?:\s+([\s\S]+))?\s*$/,
                    m = g ? /^\x3c!--\s*\/ko\s*--\x3e$/ : /^\s*\/ko\s*$/,
                    n = {
                        ul: !0,
                        ol: !0
                    };
                t.f = {
                    aa: {},
                    childNodes: function (b) {
                        return a(b) ? d(b) : b.childNodes
                    },
                    za: function (b) {
                        if (a(b)) {
                            b = t.f.childNodes(b);
                            for (var c = 0, d = b.length; c < d; c++) t.removeNode(b[c])
                        } else t.a.rb(b)
                    },
                    fa: function (b, c) {
                        if (a(b)) {
                            t.f.za(b);
                            for (var d = b.nextSibling, f = 0, g = c.length; f < g; f++) d.parentNode.insertBefore(c[f],
                                d)
                        } else t.a.fa(b, c)
                    },
                    qc: function (b, c) {
                        a(b) ? b.parentNode.insertBefore(c, b.nextSibling) : b.firstChild ? b.insertBefore(c, b.firstChild) : b.appendChild(c)
                    },
                    kc: function (b, c, d) {
                        d ? a(b) ? b.parentNode.insertBefore(c, d.nextSibling) : d.nextSibling ? b.insertBefore(c, d.nextSibling) : b.appendChild(c) : t.f.qc(b, c)
                    },
                    firstChild: function (c) {
                        return a(c) ? !c.nextSibling || b(c.nextSibling) ? null : c.nextSibling : c.firstChild
                    },
                    nextSibling: function (c) {
                        a(c) && (c = f(c));
                        return c.nextSibling && b(c.nextSibling) ? null : c.nextSibling
                    },
                    Yc: a,
                    vd: function (a) {
                        return (a =
                            (g ? a.text : a.nodeValue).match(h)) ? a[1] : null
                    },
                    oc: function (c) {
                        if (n[t.a.A(c)]) {
                            var d = c.firstChild;
                            if (d) {
                                do
                                    if (1 === d.nodeType) {
                                        var g;
                                        g = d.firstChild;
                                        var h = null;
                                        if (g) {
                                            do
                                                if (h) h.push(g);
                                                else if (a(g)) {
                                                var m = f(g, !0);
                                                m ? g = m : h = [g]
                                            } else b(g) && (h = [g]);
                                            while (g = g.nextSibling)
                                        }
                                        if (g = h) {
                                            h = d.nextSibling;
                                            for (m = 0; m < g.length; m++) h ? c.insertBefore(g[m], h) : c.appendChild(g[m])
                                        }
                                    } while (d = d.nextSibling)
                            }
                        }
                    }
                }
            })();
            t.b("virtualElements", t.f);
            t.b("virtualElements.allowedBindings", t.f.aa);
            t.b("virtualElements.emptyNode", t.f.za);
            t.b("virtualElements.insertAfter",
                t.f.kc);
            t.b("virtualElements.prepend", t.f.qc);
            t.b("virtualElements.setDomNodeChildren", t.f.fa);
            (function () {
                t.S = function () {
                    this.Kc = {}
                };
                t.a.extend(t.S.prototype, {
                    nodeHasBindings: function (a) {
                        switch (a.nodeType) {
                        case 1:
                            return null != a.getAttribute("data-bind") || t.g.getComponentNameForNode(a);
                        case 8:
                            return t.f.Yc(a);
                        default:
                            return !1
                        }
                    },
                    getBindings: function (a, b) {
                        var c = this.getBindingsString(a, b),
                            c = c ? this.parseBindingsString(c, b, a) : null;
                        return t.g.Rb(c, a, b, !1)
                    },
                    getBindingAccessors: function (a, b) {
                        var c = this.getBindingsString(a,
                                b),
                            c = c ? this.parseBindingsString(c, b, a, {
                                valueAccessors: !0
                            }) : null;
                        return t.g.Rb(c, a, b, !0)
                    },
                    getBindingsString: function (a) {
                        switch (a.nodeType) {
                        case 1:
                            return a.getAttribute("data-bind");
                        case 8:
                            return t.f.vd(a);
                        default:
                            return null
                        }
                    },
                    parseBindingsString: function (a, b, c, d) {
                        try {
                            var f = this.Kc,
                                g = a + (d && d.valueAccessors || ""),
                                h;
                            if (!(h = f[g])) {
                                var m, n = "with($context){with($data||{}){return{" + t.h.Xa(a, d) + "}}}";
                                m = new Function("$context", "$element", n);
                                h = f[g] = m
                            }
                            return h(b, c)
                        } catch (p) {
                            throw p.message = "Unable to parse bindings.\nBindings value: " +
                                a + "\nMessage: " + p.message, p;
                        }
                    }
                });
                t.S.instance = new t.S
            })();
            t.b("bindingProvider", t.S);
            (function () {
                function c(a) {
                    return function () {
                        return a
                    }
                }

                function d(a) {
                    return a()
                }

                function g(a) {
                    return t.a.Ea(t.l.w(a), function (b, c) {
                        return function () {
                            return a()[c]
                        }
                    })
                }

                function h(a, b) {
                    return g(this.getBindings.bind(this, a, b))
                }

                function m(a, b, c) {
                    var d, f = t.f.firstChild(b),
                        g = t.S.instance,
                        h = g.preprocessNode;
                    if (h) {
                        for (; d = f;) f = t.f.nextSibling(d), h.call(g, d);
                        f = t.f.firstChild(b)
                    }
                    for (; d = f;) f = t.f.nextSibling(d), n(a, d, c)
                }

                function n(a,
                    b, c) {
                    var d = !0,
                        f = 1 === b.nodeType;
                    f && t.f.oc(b);
                    if (f && c || t.S.instance.nodeHasBindings(b)) d = u(b, null, a, c).shouldBindDescendants;
                    d && !w[t.a.A(b)] && m(a, b, !f)
                }

                function p(a) {
                    var b = [],
                        c = {},
                        d = [];
                    t.a.D(a, function ha(f) {
                        if (!c[f]) {
                            var g = t.getBindingHandler(f);
                            g && (g.after && (d.push(f), t.a.r(g.after, function (b) {
                                if (a[b]) {
                                    if (-1 !== t.a.o(d, b)) throw Error("Cannot combine the following bindings, because they have a cyclic dependency: " + d.join(", "));
                                    ha(b)
                                }
                            }), d.length--), b.push({
                                key: f,
                                jc: g
                            }));
                            c[f] = !0
                        }
                    });
                    return b
                }

                function u(b,
                    c, f, g) {
                    var m = t.a.e.get(b, y);
                    if (!c) {
                        if (m) throw Error("You cannot apply bindings multiple times to the same element.");
                        t.a.e.set(b, y, !0)
                    }!m && g && t.xc(b, f);
                    var n;
                    if (c && "function" !== typeof c) n = c;
                    else {
                        var v = t.S.instance,
                            w = v.getBindingAccessors || h,
                            x = t.B(function () {
                                (n = c ? c(f, b) : w.call(v, b, f)) && f.Q && f.Q();
                                return n
                            }, null, {
                                i: b
                            });
                        n && x.ca() || (x = null)
                    }
                    var z;
                    if (n) {
                        var B = x ? function (a) {
                                return function () {
                                    return d(x()[a])
                                }
                            } : function (a) {
                                return n[a]
                            },
                            A = function () {
                                return t.a.Ea(x ? x() : n, d)
                            };
                        A.get = function (a) {
                            return n[a] &&
                                d(B(a))
                        };
                        A.has = function (a) {
                            return a in n
                        };
                        g = p(n);
                        t.a.r(g, function (c) {
                            var d = c.jc.init,
                                g = c.jc.update,
                                h = c.key;
                            if (8 === b.nodeType && !t.f.aa[h]) throw Error("The binding '" + h + "' cannot be used with virtual elements");
                            try {
                                "function" == typeof d && t.l.w(function () {
                                    var c = d(b, B(h), A, f.$data, f);
                                    if (c && c.controlsDescendantBindings) {
                                        if (z !== a) throw Error("Multiple bindings (" + z + " and " + h + ") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");
                                        z =
                                            h
                                    }
                                }), "function" == typeof g && t.B(function () {
                                    g(b, B(h), A, f.$data, f)
                                }, null, {
                                    i: b
                                })
                            } catch (m) {
                                throw m.message = 'Unable to process binding "' + h + ": " + n[h] + '"\nMessage: ' + m.message, m;
                            }
                        })
                    }
                    return {
                        shouldBindDescendants: z === a
                    }
                }

                function v(a) {
                    return a && a instanceof t.R ? a : new t.R(a)
                }
                t.d = {};
                var w = {
                    script: !0,
                    textarea: !0,
                    template: !0
                };
                t.getBindingHandler = function (a) {
                    return t.d[a]
                };
                t.R = function (b, c, d, f, g) {
                    function h() {
                        var a = p ? b() : b,
                            g = t.a.c(a);
                        c ? (c.Q && c.Q(), t.a.extend(n, c), n.Q = v) : (n.$parents = [], n.$root = g, n.ko = t);
                        n.$rawData =
                            a;
                        n.$data = g;
                        d && (n[d] = g);
                        f && f(n, c, g);
                        return n.$data
                    }

                    function m() {
                        return u && !t.a.Tb(u)
                    }
                    var n = this,
                        p = "function" == typeof b && !t.I(b),
                        u, v;
                    g && g.exportDependencies ? h() : (v = t.B(h, null, {
                        ya: m,
                        i: !0
                    }), v.ca() && (n.Q = v, v.equalityComparer = null, u = [], v.Dc = function (b) {
                        u.push(b);
                        t.a.G.qa(b, function (b) {
                            t.a.Na(u, b);
                            u.length || (v.k(), n.Q = v = a)
                        })
                    }))
                };
                t.R.prototype.createChildContext = function (a, b, c, d) {
                    return new t.R(a, this, b, function (a, b) {
                        a.$parentContext = b;
                        a.$parent = b.$data;
                        a.$parents = (b.$parents || []).slice(0);
                        a.$parents.unshift(a.$parent);
                        c && c(a)
                    }, d)
                };
                t.R.prototype.extend = function (a) {
                    return new t.R(this.Q || this.$data, this, null, function (b, c) {
                        b.$rawData = c.$rawData;
                        t.a.extend(b, "function" == typeof a ? a() : a)
                    })
                };
                t.R.prototype.ac = function (a, b) {
                    return this.createChildContext(a, b, null, {
                        exportDependencies: !0
                    })
                };
                var y = t.a.e.J(),
                    x = t.a.e.J();
                t.xc = function (a, b) {
                    if (2 == arguments.length) t.a.e.set(a, x, b), b.Q && b.Q.Dc(a);
                    else return t.a.e.get(a, x)
                };
                t.La = function (a, b, c) {
                    1 === a.nodeType && t.f.oc(a);
                    return u(a, b, v(c), !0)
                };
                t.Ic = function (a, b, d) {
                    d = v(d);
                    return t.La(a,
                        "function" === typeof b ? g(b.bind(null, d, a)) : t.a.Ea(b, c), d)
                };
                t.hb = function (a, b) {
                    1 !== b.nodeType && 8 !== b.nodeType || m(v(a), b, !0)
                };
                t.Ub = function (a, c) {
                    !f && b.jQuery && (f = b.jQuery);
                    if (c && 1 !== c.nodeType && 8 !== c.nodeType) throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");
                    c = c || b.document.body;
                    n(v(a), c, !0)
                };
                t.nb = function (b) {
                    switch (b.nodeType) {
                    case 1:
                    case 8:
                        var c = t.xc(b);
                        if (c) return c;
                        if (b.parentNode) return t.nb(b.parentNode)
                    }
                    return a
                };
                t.Oc = function (b) {
                    return (b =
                        t.nb(b)) ? b.$data : a
                };
                t.b("bindingHandlers", t.d);
                t.b("applyBindings", t.Ub);
                t.b("applyBindingsToDescendants", t.hb);
                t.b("applyBindingAccessorsToNode", t.La);
                t.b("applyBindingsToNode", t.Ic);
                t.b("contextFor", t.nb);
                t.b("dataFor", t.Oc)
            })();
            (function (a) {
                function b(d, h) {
                    var m = f.hasOwnProperty(d) ? f[d] : a,
                        n;
                    m ? m.Y(h) : (m = f[d] = new t.K, m.Y(h), c(d, function (a, b) {
                        var c = !(!b || !b.synchronous);
                        g[d] = {
                            definition: a,
                            dd: c
                        };
                        delete f[d];
                        n || c ? m.notifySubscribers(a) : t.Z.Za(function () {
                            m.notifySubscribers(a)
                        })
                    }), n = !0)
                }

                function c(a,
                    b) {
                    d("getConfig", [a], function (c) {
                        c ? d("loadComponent", [a, c], function (a) {
                            b(a, c)
                        }) : b(null, null)
                    })
                }

                function d(b, c, f, g) {
                    g || (g = t.g.loaders.slice(0));
                    var h = g.shift();
                    if (h) {
                        var m = h[b];
                        if (m) {
                            var n = !1;
                            if (m.apply(h, c.concat(function (a) {
                                    n ? f(null) : null !== a ? f(a) : d(b, c, f, g)
                                })) !== a && (n = !0, !h.suppressLoaderExceptions)) throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.");
                        } else d(b, c, f, g)
                    } else f(null)
                }
                var f = {},
                    g = {};
                t.g = {
                    get: function (c, d) {
                        var f = g.hasOwnProperty(c) ?
                            g[c] : a;
                        f ? f.dd ? t.l.w(function () {
                            d(f.definition)
                        }) : t.Z.Za(function () {
                            d(f.definition)
                        }) : b(c, d)
                    },
                    $b: function (a) {
                        delete g[a]
                    },
                    Nb: d
                };
                t.g.loaders = [];
                t.b("components", t.g);
                t.b("components.get", t.g.get);
                t.b("components.clearCachedDefinition", t.g.$b)
            })();
            (function () {
                function a(b, c, d, f) {
                    function h() {
                        0 === --n && f(m)
                    }
                    var m = {},
                        n = 2,
                        u = d.template;
                    d = d.viewModel;
                    u ? g(c, u, function (a) {
                        t.g.Nb("loadTemplate", [b, a], function (a) {
                            m.template = a;
                            h()
                        })
                    }) : h();
                    d ? g(c, d, function (a) {
                            t.g.Nb("loadViewModel", [b, a], function (a) {
                                m[p] = a;
                                h()
                            })
                        }) :
                        h()
                }

                function d(a, b, c) {
                    if ("function" === typeof b) c(function (a) {
                        return new b(a)
                    });
                    else if ("function" === typeof b[p]) c(b[p]);
                    else if ("instance" in b) {
                        var f = b.instance;
                        c(function () {
                            return f
                        })
                    } else "viewModel" in b ? d(a, b.viewModel, c) : a("Unknown viewModel value: " + b)
                }

                function f(a) {
                    switch (t.a.A(a)) {
                    case "script":
                        return t.a.na(a.text);
                    case "textarea":
                        return t.a.na(a.value);
                    case "template":
                        if (b.DocumentFragment ? a.content instanceof DocumentFragment : a.content && 11 === a.content.nodeType) return t.a.wa(a.content.childNodes)
                    }
                    return t.a.wa(a.childNodes)
                }

                function g(a, c, d) {
                    "string" === typeof c.require ? m || b.require ? (m || b.require)([c.require], d) : a("Uses require, but no AMD loader is present") : d(c)
                }

                function h(a) {
                    return function (b) {
                        throw Error("Component '" + a + "': " + b);
                    }
                }
                var n = {};
                t.g.register = function (a, b) {
                    if (!b) throw Error("Invalid configuration for " + a);
                    if (t.g.wb(a)) throw Error("Component " + a + " is already registered");
                    n[a] = b
                };
                t.g.wb = function (a) {
                    return n.hasOwnProperty(a)
                };
                t.g.ud = function (a) {
                    delete n[a];
                    t.g.$b(a)
                };
                t.g.cc = {
                    getConfig: function (a, b) {
                        b(n.hasOwnProperty(a) ?
                            n[a] : null)
                    },
                    loadComponent: function (b, c, d) {
                        var f = h(b);
                        g(f, c, function (c) {
                            a(b, f, c, d)
                        })
                    },
                    loadTemplate: function (a, d, g) {
                        a = h(a);
                        if ("string" === typeof d) g(t.a.na(d));
                        else if (d instanceof Array) g(d);
                        else if (b.DocumentFragment ? d instanceof DocumentFragment : d && 11 === d.nodeType) g(t.a.W(d.childNodes));
                        else if (d.element)
                            if (d = d.element, b.HTMLElement ? d instanceof HTMLElement : d && d.tagName && 1 === d.nodeType) g(f(d));
                            else if ("string" === typeof d) {
                            var m = c.getElementById(d);
                            m ? g(f(m)) : a("Cannot find element with ID " + d)
                        } else a("Unknown element type: " +
                            d);
                        else a("Unknown template value: " + d)
                    },
                    loadViewModel: function (a, b, c) {
                        d(h(a), b, c)
                    }
                };
                var p = "createViewModel";
                t.b("components.register", t.g.register);
                t.b("components.isRegistered", t.g.wb);
                t.b("components.unregister", t.g.ud);
                t.b("components.defaultLoader", t.g.cc);
                t.g.loaders.push(t.g.cc);
                t.g.Ec = n
            })();
            (function () {
                function a(c, d) {
                    var f = c.getAttribute("params");
                    if (f) {
                        var f = b.parseBindingsString(f, d, c, {
                                valueAccessors: !0,
                                bindingParams: !0
                            }),
                            f = t.a.Ea(f, function (a) {
                                return t.m(a, null, {
                                    i: c
                                })
                            }),
                            g = t.a.Ea(f, function (a) {
                                var b =
                                    a.p();
                                return a.ca() ? t.m({
                                    read: function () {
                                        return t.a.c(a())
                                    },
                                    write: t.Da(b) && function (b) {
                                        a()(b)
                                    },
                                    i: c
                                }) : b
                            });
                        g.hasOwnProperty("$raw") || (g.$raw = f);
                        return g
                    }
                    return {
                        $raw: {}
                    }
                }
                t.g.getComponentNameForNode = function (a) {
                    var b = t.a.A(a);
                    if (t.g.wb(b) && (-1 != b.indexOf("-") || "[object HTMLUnknownElement]" == "" + a || 8 >= t.a.C && a.tagName === b)) return b
                };
                t.g.Rb = function (b, c, d, f) {
                    if (1 === c.nodeType) {
                        var g = t.g.getComponentNameForNode(c);
                        if (g) {
                            b = b || {};
                            if (b.component) throw Error('Cannot use the "component" binding on a custom element matching a component');
                            var h = {
                                name: g,
                                params: a(c, d)
                            };
                            b.component = f ? function () {
                                return h
                            } : h
                        }
                    }
                    return b
                };
                var b = new t.S;
                9 > t.a.C && (t.g.register = function (a) {
                    return function (b) {
                        c.createElement(b);
                        return a.apply(this, arguments)
                    }
                }(t.g.register), c.createDocumentFragment = function (a) {
                    return function () {
                        var b = a(),
                            c = t.g.Ec,
                            d;
                        for (d in c) c.hasOwnProperty(d) && b.createElement(d);
                        return b
                    }
                }(c.createDocumentFragment))
            })();
            (function (a) {
                function b(a, c, d) {
                    c = c.template;
                    if (!c) throw Error("Component '" + a + "' has no template");
                    a = t.a.wa(c);
                    t.f.fa(d, a)
                }

                function c(a, b, d, f) {
                    var g = a.createViewModel;
                    return g ? g.call(a, f, {
                        element: b,
                        templateNodes: d
                    }) : f
                }
                var d = 0;
                t.d.component = {
                    init: function (f, g, h, m, n) {
                        function p() {
                            var a = u && u.dispose;
                            "function" === typeof a && a.call(u);
                            v = u = null
                        }
                        var u, v, w = t.a.W(t.f.childNodes(f));
                        t.a.G.qa(f, p);
                        t.m(function () {
                            var h = t.a.c(g()),
                                m, y;
                            "string" === typeof h ? m = h : (m = t.a.c(h.name), y = t.a.c(h.params));
                            if (!m) throw Error("No component name specified");
                            var x = v = ++d;
                            t.g.get(m, function (d) {
                                if (v === x) {
                                    p();
                                    if (!d) throw Error("Unknown component '" + m +
                                        "'");
                                    b(m, d, f);
                                    var g = c(d, f, w, y);
                                    d = n.createChildContext(g, a, function (a) {
                                        a.$component = g;
                                        a.$componentTemplateNodes = w
                                    });
                                    u = g;
                                    t.hb(d, f)
                                }
                            })
                        }, null, {
                            i: f
                        });
                        return {
                            controlsDescendantBindings: !0
                        }
                    }
                };
                t.f.aa.component = !0
            })();
            var N = {
                "class": "className",
                "for": "htmlFor"
            };
            t.d.attr = {
                update: function (b, c) {
                    var d = t.a.c(c()) || {};
                    t.a.D(d, function (c, d) {
                        d = t.a.c(d);
                        var f = !1 === d || null === d || d === a;
                        f && b.removeAttribute(c);
                        8 >= t.a.C && c in N ? (c = N[c], f ? b.removeAttribute(c) : b[c] = d) : f || b.setAttribute(c, d.toString());
                        "name" === c && t.a.vc(b,
                            f ? "" : d.toString())
                    })
                }
            };
            (function () {
                t.d.checked = {
                    after: ["value", "attr"],
                    init: function (b, c, d) {
                        function f() {
                            var a = b.checked,
                                g = y ? h() : a;
                            if (!t.xa.Va() && (!n || a)) {
                                var m = t.l.w(c);
                                if (u) {
                                    var p = v ? m.p() : m;
                                    w !== g ? (a && (t.a.ra(p, g, !0), t.a.ra(p, w, !1)), w = g) : t.a.ra(p, g, a);
                                    v && t.Da(m) && m(p)
                                } else t.h.Ga(m, d, "checked", g, !0)
                            }
                        }

                        function g() {
                            var a = t.a.c(c());
                            b.checked = u ? 0 <= t.a.o(a, h()) : m ? a : h() === a
                        }
                        var h = t.rc(function () {
                                return d.has("checkedValue") ? t.a.c(d.get("checkedValue")) : d.has("value") ? t.a.c(d.get("value")) : b.value
                            }),
                            m =
                            "checkbox" == b.type,
                            n = "radio" == b.type;
                        if (m || n) {
                            var p = c(),
                                u = m && t.a.c(p) instanceof Array,
                                v = !(u && p.push && p.splice),
                                w = u ? h() : a,
                                y = n || u;
                            n && !b.name && t.d.uniqueName.init(b, function () {
                                return !0
                            });
                            t.m(f, null, {
                                i: b
                            });
                            t.a.q(b, "click", f);
                            t.m(g, null, {
                                i: b
                            });
                            p = a
                        }
                    }
                };
                t.h.ga.checked = !0;
                t.d.checkedValue = {
                    update: function (a, b) {
                        a.value = t.a.c(b())
                    }
                }
            })();
            t.d.css = {
                update: function (a, b) {
                    var c = t.a.c(b());
                    null !== c && "object" == typeof c ? t.a.D(c, function (b, c) {
                        c = t.a.c(c);
                        t.a.fb(a, b, c)
                    }) : (c = t.a.cb(String(c || "")), t.a.fb(a, a.__ko__cssValue,
                        !1), a.__ko__cssValue = c, t.a.fb(a, c, !0))
                }
            };
            t.d.enable = {
                update: function (a, b) {
                    var c = t.a.c(b());
                    c && a.disabled ? a.removeAttribute("disabled") : c || a.disabled || (a.disabled = !0)
                }
            };
            t.d.disable = {
                update: function (a, b) {
                    t.d.enable.update(a, function () {
                        return !t.a.c(b())
                    })
                }
            };
            t.d.event = {
                init: function (a, b, c, d, f) {
                    var g = b() || {};
                    t.a.D(g, function (g) {
                        "string" == typeof g && t.a.q(a, g, function (a) {
                            var h, m = b()[g];
                            if (m) {
                                try {
                                    var n = t.a.W(arguments);
                                    d = f.$data;
                                    n.unshift(d);
                                    h = m.apply(d, n)
                                } finally {
                                    !0 !== h && (a.preventDefault ? a.preventDefault() :
                                        a.returnValue = !1)
                                }!1 === c.get(g + "Bubble") && (a.cancelBubble = !0, a.stopPropagation && a.stopPropagation())
                            }
                        })
                    })
                }
            };
            t.d.foreach = {
                mc: function (a) {
                    return function () {
                        var b = a(),
                            c = t.a.Bb(b);
                        if (!c || "number" == typeof c.length) return {
                            foreach: b,
                            templateEngine: t.X.vb
                        };
                        t.a.c(b);
                        return {
                            foreach: c.data,
                            as: c.as,
                            includeDestroyed: c.includeDestroyed,
                            afterAdd: c.afterAdd,
                            beforeRemove: c.beforeRemove,
                            afterRender: c.afterRender,
                            beforeMove: c.beforeMove,
                            afterMove: c.afterMove,
                            templateEngine: t.X.vb
                        }
                    }
                },
                init: function (a, b) {
                    return t.d.template.init(a,
                        t.d.foreach.mc(b))
                },
                update: function (a, b, c, d, f) {
                    return t.d.template.update(a, t.d.foreach.mc(b), c, d, f)
                }
            };
            t.h.va.foreach = !1;
            t.f.aa.foreach = !0;
            t.d.hasfocus = {
                init: function (a, b, c) {
                    function d(f) {
                        a.__ko_hasfocusUpdating = !0;
                        var g = a.ownerDocument;
                        if ("activeElement" in g) {
                            var h;
                            try {
                                h = g.activeElement
                            } catch (m) {
                                h = g.body
                            }
                            f = h === a
                        }
                        g = b();
                        t.h.Ga(g, c, "hasfocus", f, !0);
                        a.__ko_hasfocusLastValue = f;
                        a.__ko_hasfocusUpdating = !1
                    }
                    var f = d.bind(null, !0),
                        g = d.bind(null, !1);
                    t.a.q(a, "focus", f);
                    t.a.q(a, "focusin", f);
                    t.a.q(a, "blur", g);
                    t.a.q(a, "focusout", g)
                },
                update: function (a, b) {
                    var c = !!t.a.c(b());
                    a.__ko_hasfocusUpdating || a.__ko_hasfocusLastValue === c || (c ? a.focus() : a.blur(), !c && a.__ko_hasfocusLastValue && a.ownerDocument.body.focus(), t.l.w(t.a.Fa, null, [a, c ? "focusin" : "focusout"]))
                }
            };
            t.h.ga.hasfocus = !0;
            t.d.hasFocus = t.d.hasfocus;
            t.h.ga.hasFocus = !0;
            t.d.html = {
                init: function () {
                    return {
                        controlsDescendantBindings: !0
                    }
                },
                update: function (a, b) {
                    t.a.Eb(a, b())
                }
            };
            z("if");
            z("ifnot", !1, !0);
            z("with", !0, !1, function (a, b) {
                return a.ac(b)
            });
            var U = {};
            t.d.options = {
                init: function (a) {
                    if ("select" !== t.a.A(a)) throw Error("options binding applies only to SELECT elements");
                    for (; 0 < a.length;) a.remove(0);
                    return {
                        controlsDescendantBindings: !0
                    }
                },
                update: function (b, c, d) {
                    function f() {
                        return t.a.Ma(b.options, function (a) {
                            return a.selected
                        })
                    }

                    function g(a, b, c) {
                        var d = typeof b;
                        return "function" == d ? b(a) : "string" == d ? a[b] : c
                    }

                    function h(a, c) {
                        if (x && u) t.j.ja(b, t.a.c(d.get("value")), !0);
                        else if (y.length) {
                            var f = 0 <= t.a.o(y, t.j.u(c[0]));
                            t.a.wc(c[0], f);
                            x && !f && t.l.w(t.a.Fa, null, [b, "change"])
                        }
                    }
                    var m = b.multiple,
                        n = 0 != b.length && m ? b.scrollTop : null,
                        p = t.a.c(c()),
                        u = d.get("valueAllowUnset") && d.has("value"),
                        v = d.get("optionsIncludeDestroyed");
                    c = {};
                    var w, y = [];
                    u || (m ? y = t.a.ib(f(), t.j.u) : 0 <= b.selectedIndex && y.push(t.j.u(b.options[b.selectedIndex])));
                    p && ("undefined" == typeof p.length && (p = [p]), w = t.a.Ma(p, function (b) {
                        return v || b === a || null === b || !t.a.c(b._destroy)
                    }), d.has("optionsCaption") && (p = t.a.c(d.get("optionsCaption")), null !== p && p !== a && w.unshift(U)));
                    var x = !1;
                    c.beforeRemove = function (a) {
                        b.removeChild(a)
                    };
                    p = h;
                    d.has("optionsAfterRender") && "function" == typeof d.get("optionsAfterRender") && (p = function (b, c) {
                        h(0, c);
                        t.l.w(d.get("optionsAfterRender"), null, [c[0], b !== U ? b : a])
                    });
                    t.a.Db(b, w, function (c, f, h) {
                        h.length && (y = !u && h[0].selected ? [t.j.u(h[0])] : [], x = !0);
                        f = b.ownerDocument.createElement("option");
                        c === U ? (t.a.bb(f, d.get("optionsCaption")), t.j.ja(f, a)) : (h = g(c, d.get("optionsValue"), c), t.j.ja(f, t.a.c(h)), c = g(c, d.get("optionsText"), h), t.a.bb(f, c));
                        return [f]
                    }, c, p);
                    t.l.w(function () {
                        u ? t.j.ja(b, t.a.c(d.get("value")),
                            !0) : (m ? y.length && f().length < y.length : y.length && 0 <= b.selectedIndex ? t.j.u(b.options[b.selectedIndex]) !== y[0] : y.length || 0 <= b.selectedIndex) && t.a.Fa(b, "change")
                    });
                    t.a.Sc(b);
                    n && 20 < Math.abs(n - b.scrollTop) && (b.scrollTop = n)
                }
            };
            t.d.options.zb = t.a.e.J();
            t.d.selectedOptions = {
                after: ["options", "foreach"],
                init: function (a, b, c) {
                    t.a.q(a, "change", function () {
                        var d = b(),
                            f = [];
                        t.a.r(a.getElementsByTagName("option"), function (a) {
                            a.selected && f.push(t.j.u(a))
                        });
                        t.h.Ga(d, c, "selectedOptions", f)
                    })
                },
                update: function (a, b) {
                    if ("select" !=
                        t.a.A(a)) throw Error("values binding applies only to SELECT elements");
                    var c = t.a.c(b()),
                        d = a.scrollTop;
                    c && "number" == typeof c.length && t.a.r(a.getElementsByTagName("option"), function (a) {
                        var b = 0 <= t.a.o(c, t.j.u(a));
                        a.selected != b && t.a.wc(a, b)
                    });
                    a.scrollTop = d
                }
            };
            t.h.ga.selectedOptions = !0;
            t.d.style = {
                update: function (b, c) {
                    var d = t.a.c(c() || {});
                    t.a.D(d, function (c, d) {
                        d = t.a.c(d);
                        if (null === d || d === a || !1 === d) d = "";
                        b.style[c] = d
                    })
                }
            };
            t.d.submit = {
                init: function (a, b, c, d, f) {
                    if ("function" != typeof b()) throw Error("The value for a submit binding must be a function");
                    t.a.q(a, "submit", function (c) {
                        var d, g = b();
                        try {
                            d = g.call(f.$data, a)
                        } finally {
                            !0 !== d && (c.preventDefault ? c.preventDefault() : c.returnValue = !1)
                        }
                    })
                }
            };
            t.d.text = {
                init: function () {
                    return {
                        controlsDescendantBindings: !0
                    }
                },
                update: function (a, b) {
                    t.a.bb(a, b())
                }
            };
            t.f.aa.text = !0;
            (function () {
                if (b && b.navigator) var c = function (a) {
                        if (a) return parseFloat(a[1])
                    },
                    d = b.opera && b.opera.version && parseInt(b.opera.version()),
                    f = b.navigator.userAgent,
                    g = c(f.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),
                    h = c(f.match(/Firefox\/([^ ]*)/));
                if (10 > t.a.C) var m = t.a.e.J(),
                    n = t.a.e.J(),
                    p = function (a) {
                        var b = this.activeElement;
                        (b = b && t.a.e.get(b, n)) && b(a)
                    },
                    u = function (a, b) {
                        var c = a.ownerDocument;
                        t.a.e.get(c, m) || (t.a.e.set(c, m, !0), t.a.q(c, "selectionchange", p));
                        t.a.e.set(a, n, b)
                    };
                t.d.textInput = {
                    init: function (b, c, f) {
                        function m(a, c) {
                            t.a.q(b, a, c)
                        }

                        function n() {
                            var d = t.a.c(c());
                            if (null === d || d === a) d = "";
                            x !== a && d === x ? t.a.setTimeout(n, 4) : b.value !== d && (w = d, b.value = d)
                        }

                        function p() {
                            y || (x = b.value, y = t.a.setTimeout(v, 4))
                        }

                        function v() {
                            clearTimeout(y);
                            x = y = a;
                            var d =
                                b.value;
                            w !== d && (w = d, t.h.Ga(c(), f, "textInput", d))
                        }
                        var w = b.value,
                            y, x, z = 9 == t.a.C ? p : v;
                        10 > t.a.C ? (m("propertychange", function (a) {
                            "value" === a.propertyName && z(a)
                        }), 8 == t.a.C && (m("keyup", v), m("keydown", v)), 8 <= t.a.C && (u(b, z), m("dragend", p))) : (m("input", v), 5 > g && "textarea" === t.a.A(b) ? (m("keydown", p), m("paste", p), m("cut", p)) : 11 > d ? m("keydown", p) : 4 > h && (m("DOMAutoComplete", v), m("dragdrop", v), m("drop", v)));
                        m("change", v);
                        t.m(n, null, {
                            i: b
                        })
                    }
                };
                t.h.ga.textInput = !0;
                t.d.textinput = {
                    preprocess: function (a, b, c) {
                        c("textInput",
                            a)
                    }
                }
            })();
            t.d.uniqueName = {
                init: function (a, b) {
                    if (b()) {
                        var c = "ko_unique_" + ++t.d.uniqueName.Nc;
                        t.a.vc(a, c)
                    }
                }
            };
            t.d.uniqueName.Nc = 0;
            t.d.value = {
                after: ["options", "foreach"],
                init: function (a, b, c) {
                    if ("input" != a.tagName.toLowerCase() || "checkbox" != a.type && "radio" != a.type) {
                        var d = ["change"],
                            f = c.get("valueUpdate"),
                            g = !1,
                            h = null;
                        f && ("string" == typeof f && (f = [f]), t.a.ta(d, f), d = t.a.Wb(d));
                        var m = function () {
                            h = null;
                            g = !1;
                            var d = b(),
                                f = t.j.u(a);
                            t.h.Ga(d, c, "value", f)
                        };
                        !t.a.C || "input" != a.tagName.toLowerCase() || "text" != a.type ||
                            "off" == a.autocomplete || a.form && "off" == a.form.autocomplete || -1 != t.a.o(d, "propertychange") || (t.a.q(a, "propertychange", function () {
                                g = !0
                            }), t.a.q(a, "focus", function () {
                                g = !1
                            }), t.a.q(a, "blur", function () {
                                g && m()
                            }));
                        t.a.r(d, function (b) {
                            var c = m;
                            t.a.sd(b, "after") && (c = function () {
                                h = t.j.u(a);
                                t.a.setTimeout(m, 0)
                            }, b = b.substring(5));
                            t.a.q(a, b, c)
                        });
                        var n = function () {
                            var d = t.a.c(b()),
                                f = t.j.u(a);
                            if (null !== h && d === h) t.a.setTimeout(n, 0);
                            else if (d !== f)
                                if ("select" === t.a.A(a)) {
                                    var g = c.get("valueAllowUnset"),
                                        f = function () {
                                            t.j.ja(a,
                                                d, g)
                                        };
                                    f();
                                    g || d === t.j.u(a) ? t.a.setTimeout(f, 0) : t.l.w(t.a.Fa, null, [a, "change"])
                                } else t.j.ja(a, d)
                        };
                        t.m(n, null, {
                            i: a
                        })
                    } else t.La(a, {
                        checkedValue: b
                    })
                },
                update: function () {}
            };
            t.h.ga.value = !0;
            t.d.visible = {
                update: function (a, b) {
                    var c = t.a.c(b()),
                        d = "none" != a.style.display;
                    c && !d ? a.style.display = "" : !c && d && (a.style.display = "none")
                }
            };
            (function (a) {
                t.d[a] = {
                    init: function (b, c, d, f, g) {
                        return t.d.event.init.call(this, b, function () {
                            var b = {};
                            b[a] = c();
                            return b
                        }, d, f, g)
                    }
                }
            })("click");
            t.P = function () {};
            t.P.prototype.renderTemplateSource =
                function () {
                    throw Error("Override renderTemplateSource");
                };
            t.P.prototype.createJavaScriptEvaluatorBlock = function () {
                throw Error("Override createJavaScriptEvaluatorBlock");
            };
            t.P.prototype.makeTemplateSource = function (a, b) {
                if ("string" == typeof a) {
                    b = b || c;
                    var d = b.getElementById(a);
                    if (!d) throw Error("Cannot find template with ID " + a);
                    return new t.v.n(d)
                }
                if (1 == a.nodeType || 8 == a.nodeType) return new t.v.sa(a);
                throw Error("Unknown template type: " + a);
            };
            t.P.prototype.renderTemplate = function (a, b, c, d) {
                a = this.makeTemplateSource(a,
                    d);
                return this.renderTemplateSource(a, b, c, d)
            };
            t.P.prototype.isTemplateRewritten = function (a, b) {
                return !1 === this.allowTemplateRewriting ? !0 : this.makeTemplateSource(a, b).data("isRewritten")
            };
            t.P.prototype.rewriteTemplate = function (a, b, c) {
                a = this.makeTemplateSource(a, c);
                b = b(a.text());
                a.text(b);
                a.data("isRewritten", !0)
            };
            t.b("templateEngine", t.P);
            t.Ib = function () {
                function a(b, c, d, f) {
                    b = t.h.Ab(b);
                    for (var g = t.h.va, h = 0; h < b.length; h++) {
                        var m = b[h].key;
                        if (g.hasOwnProperty(m)) {
                            var n = g[m];
                            if ("function" === typeof n) {
                                if (m =
                                    n(b[h].value)) throw Error(m);
                            } else if (!n) throw Error("This template engine does not support the '" + m + "' binding within its templates");
                        }
                    }
                    d = "ko.__tr_ambtns(function($context,$element){return(function(){return{ " + t.h.Xa(b, {
                        valueAccessors: !0
                    }) + " } })()},'" + d.toLowerCase() + "')";
                    return f.createJavaScriptEvaluatorBlock(d) + c
                }
                var b = /(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,
                    c = /\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;
                return {
                    Tc: function (a,
                        b, c) {
                        b.isTemplateRewritten(a, c) || b.rewriteTemplate(a, function (a) {
                            return t.Ib.jd(a, b)
                        }, c)
                    },
                    jd: function (d, f) {
                        return d.replace(b, function (b, c, d, g, h) {
                            return a(h, c, d, f)
                        }).replace(c, function (b, c) {
                            return a(c, "<!-- ko -->", "#comment", f)
                        })
                    },
                    Jc: function (a, b) {
                        return t.N.yb(function (c, d) {
                            var f = c.nextSibling;
                            f && f.nodeName.toLowerCase() === b && t.La(f, a, d)
                        })
                    }
                }
            }();
            t.b("__tr_ambtns", t.Ib.Jc);
            (function () {
                t.v = {};
                t.v.n = function (a) {
                    if (this.n = a) {
                        var b = t.a.A(a);
                        this.eb = "script" === b ? 1 : "textarea" === b ? 2 : "template" == b &&
                            a.content && 11 === a.content.nodeType ? 3 : 4
                    }
                };
                t.v.n.prototype.text = function () {
                    var a = 1 === this.eb ? "text" : 2 === this.eb ? "value" : "innerHTML";
                    if (0 == arguments.length) return this.n[a];
                    var b = arguments[0];
                    "innerHTML" === a ? t.a.Eb(this.n, b) : this.n[a] = b
                };
                var b = t.a.e.J() + "_";
                t.v.n.prototype.data = function (a) {
                    if (1 === arguments.length) return t.a.e.get(this.n, b + a);
                    t.a.e.set(this.n, b + a, arguments[1])
                };
                var c = t.a.e.J();
                t.v.n.prototype.nodes = function () {
                    var b = this.n;
                    if (0 == arguments.length) return (t.a.e.get(b, c) || {}).mb || (3 === this.eb ?
                        b.content : 4 === this.eb ? b : a);
                    t.a.e.set(b, c, {
                        mb: arguments[0]
                    })
                };
                t.v.sa = function (a) {
                    this.n = a
                };
                t.v.sa.prototype = new t.v.n;
                t.v.sa.prototype.text = function () {
                    if (0 == arguments.length) {
                        var b = t.a.e.get(this.n, c) || {};
                        b.Jb === a && b.mb && (b.Jb = b.mb.innerHTML);
                        return b.Jb
                    }
                    t.a.e.set(this.n, c, {
                        Jb: arguments[0]
                    })
                };
                t.b("templateSources", t.v);
                t.b("templateSources.domElement", t.v.n);
                t.b("templateSources.anonymousTemplate", t.v.sa)
            })();
            (function () {
                function b(a, c, d) {
                    var f;
                    for (c = t.f.nextSibling(c); a && (f = a) !== c;) a = t.f.nextSibling(f),
                        d(f, a)
                }

                function c(a, d) {
                    if (a.length) {
                        var f = a[0],
                            g = a[a.length - 1],
                            h = f.parentNode,
                            m = t.S.instance,
                            n = m.preprocessNode;
                        if (n) {
                            b(f, g, function (a, b) {
                                var c = a.previousSibling,
                                    d = n.call(m, a);
                                d && (a === f && (f = d[0] || b), a === g && (g = d[d.length - 1] || c))
                            });
                            a.length = 0;
                            if (!f) return;
                            f === g ? a.push(f) : (a.push(f, g), t.a.Ba(a, h))
                        }
                        b(f, g, function (a) {
                            1 !== a.nodeType && 8 !== a.nodeType || t.Ub(d, a)
                        });
                        b(f, g, function (a) {
                            1 !== a.nodeType && 8 !== a.nodeType || t.N.Cc(a, [d])
                        });
                        t.a.Ba(a, h)
                    }
                }

                function d(a) {
                    return a.nodeType ? a : 0 < a.length ? a[0] : null
                }

                function f(a,
                    b, h, m, n) {
                    n = n || {};
                    var p = (a && d(a) || h || {}).ownerDocument,
                        u = n.templateEngine || g;
                    t.Ib.Tc(h, u, p);
                    h = u.renderTemplate(h, m, n, p);
                    if ("number" != typeof h.length || 0 < h.length && "number" != typeof h[0].nodeType) throw Error("Template engine must return an array of DOM nodes");
                    p = !1;
                    switch (b) {
                    case "replaceChildren":
                        t.f.fa(a, h);
                        p = !0;
                        break;
                    case "replaceNode":
                        t.a.uc(a, h);
                        p = !0;
                        break;
                    case "ignoreTargetNode":
                        break;
                    default:
                        throw Error("Unknown renderMode: " + b);
                    }
                    p && (c(h, m), n.afterRender && t.l.w(n.afterRender, null, [h, m.$data]));
                    return h
                }
                var g;
                t.Fb = function (b) {
                    if (b != a && !(b instanceof t.P)) throw Error("templateEngine must inherit from ko.templateEngine");
                    g = b
                };
                t.Cb = function (b, c, h, m, n) {
                    h = h || {};
                    if ((h.templateEngine || g) == a) throw Error("Set a template engine before calling renderTemplate");
                    n = n || "replaceChildren";
                    if (m) {
                        var p = d(m);
                        return t.B(function () {
                            var a = c && c instanceof t.R ? c : new t.R(c, null, null, null, {
                                    exportDependencies: !0
                                }),
                                g = t.I(b) ? b() : "function" === typeof b ? b(a.$data, a) : b,
                                a = f(m, n, g, a, h);
                            "replaceNode" == n && (m = a, p = d(m))
                        }, null, {
                            ya: function () {
                                return !p || !t.a.qb(p)
                            },
                            i: p && "replaceNode" == n ? p.parentNode : p
                        })
                    }
                    return t.N.yb(function (a) {
                        t.Cb(b, c, h, a, "replaceNode")
                    })
                };
                t.pd = function (b, d, g, h, m) {
                    function n(a, b) {
                        c(b, u);
                        g.afterRender && g.afterRender(b, a);
                        u = null
                    }

                    function p(a, c) {
                        u = m.createChildContext(a, g.as, function (a) {
                            a.$index = c
                        });
                        var d = t.I(b) ? b() : "function" === typeof b ? b(a, u) : b;
                        return f(null, "ignoreTargetNode", d, u, g)
                    }
                    var u;
                    return t.B(function () {
                        var b = t.a.c(d) || [];
                        "undefined" == typeof b.length && (b = [b]);
                        b = t.a.Ma(b, function (b) {
                            return g.includeDestroyed ||
                                b === a || null === b || !t.a.c(b._destroy)
                        });
                        t.l.w(t.a.Db, null, [h, b, p, g, n])
                    }, null, {
                        i: h
                    })
                };
                var h = t.a.e.J();
                t.d.template = {
                    init: function (a, b) {
                        var c = t.a.c(b());
                        if ("string" == typeof c || c.name) t.f.za(a);
                        else {
                            if ("nodes" in c) {
                                if (c = c.nodes || [], t.I(c)) throw Error('The "nodes" option must be a plain, non-observable array.');
                            } else c = t.f.childNodes(a);
                            c = t.a.nc(c);
                            (new t.v.sa(a)).nodes(c)
                        }
                        return {
                            controlsDescendantBindings: !0
                        }
                    },
                    update: function (b, c, d, f, g) {
                        var m = c();
                        c = t.a.c(m);
                        d = !0;
                        f = null;
                        "string" == typeof c ? c = {} : (m = c.name,
                            "if" in c && (d = t.a.c(c["if"])), d && "ifnot" in c && (d = !t.a.c(c.ifnot)));
                        "foreach" in c ? f = t.pd(m || b, d && c.foreach || [], c, b, g) : d ? (g = "data" in c ? g.ac(c.data, c.as) : g, f = t.Cb(m || b, g, c, b)) : t.f.za(b);
                        g = f;
                        (c = t.a.e.get(b, h)) && "function" == typeof c.k && c.k();
                        t.a.e.set(b, h, g && g.ca() ? g : a)
                    }
                };
                t.h.va.template = function (a) {
                    a = t.h.Ab(a);
                    return 1 == a.length && a[0].unknown || t.h.fd(a, "name") ? null : "This template engine does not support anonymous templates nested within its templates"
                };
                t.f.aa.template = !0
            })();
            t.b("setTemplateEngine", t.Fb);
            t.b("renderTemplate", t.Cb);
            t.a.hc = function (a, b, c) {
                if (a.length && b.length) {
                    var d, f, g, h, m;
                    for (d = f = 0;
                        (!c || d < c) && (h = a[f]); ++f) {
                        for (g = 0; m = b[g]; ++g)
                            if (h.value === m.value) {
                                h.moved = m.index;
                                m.moved = h.index;
                                b.splice(g, 1);
                                d = g = 0;
                                break
                            } d += g
                    }
                }
            };
            t.a.lb = function () {
                function a(b, c, d, f, g) {
                    var h = Math.min,
                        m = Math.max,
                        n = [],
                        p, u = b.length,
                        v, w = c.length,
                        y = w - u || 1,
                        x = u + w + 1,
                        z, B, A;
                    for (p = 0; p <= u; p++) {
                        B = z;
                        n.push(z = []);
                        A = h(w, p + y);
                        for (v = m(0, p - 1); v <= A; v++) z[v] = v ? p ? b[p - 1] === c[v - 1] ? B[v - 1] : h(B[v] || x, z[v - 1] || x) + 1 : v + 1 : p + 1
                    }
                    h = [];
                    m = [];
                    y = [];
                    p = u;
                    for (v = w; p || v;) w = n[p][v] - 1, v && w === n[p][v - 1] ? m.push(h[h.length] = {
                        status: d,
                        value: c[--v],
                        index: v
                    }) : p && w === n[p - 1][v] ? y.push(h[h.length] = {
                        status: f,
                        value: b[--p],
                        index: p
                    }) : (--v, --p, g.sparse || h.push({
                        status: "retained",
                        value: c[v]
                    }));
                    t.a.hc(y, m, !g.dontLimitMoves && 10 * u);
                    return h.reverse()
                }
                return function (b, c, d) {
                    d = "boolean" === typeof d ? {
                        dontLimitMoves: d
                    } : d || {};
                    b = b || [];
                    c = c || [];
                    return b.length < c.length ? a(b, c, "added", "deleted", d) : a(c, b, "deleted", "added", d)
                }
            }();
            t.b("utils.compareArrays", t.a.lb);
            (function () {
                function b(c,
                    d, f, g, h) {
                    var m = [],
                        n = t.B(function () {
                            var a = d(f, h, t.a.Ba(m, c)) || [];
                            0 < m.length && (t.a.uc(m, a), g && t.l.w(g, null, [f, a, h]));
                            m.length = 0;
                            t.a.ta(m, a)
                        }, null, {
                            i: c,
                            ya: function () {
                                return !t.a.Tb(m)
                            }
                        });
                    return {
                        ea: m,
                        B: n.ca() ? n : a
                    }
                }
                var c = t.a.e.J(),
                    d = t.a.e.J();
                t.a.Db = function (f, g, h, m, n) {
                    function p(a, b) {
                        E = w[b];
                        A !== b && (C[a] = E);
                        E.tb(A++);
                        t.a.Ba(E.ea, f);
                        z.push(E);
                        D.push(E)
                    }

                    function u(a, b) {
                        if (a)
                            for (var c = 0, d = b.length; c < d; c++) b[c] && t.a.r(b[c].ea, function (d) {
                                a(d, c, b[c].ka)
                            })
                    }
                    g = g || [];
                    m = m || {};
                    var v = t.a.e.get(f, c) === a,
                        w = t.a.e.get(f,
                            c) || [],
                        y = t.a.ib(w, function (a) {
                            return a.ka
                        }),
                        x = t.a.lb(y, g, m.dontLimitMoves),
                        z = [],
                        B = 0,
                        A = 0,
                        F = [],
                        D = [];
                    g = [];
                    for (var C = [], y = [], E, G = 0, H, K; H = x[G]; G++) switch (K = H.moved, H.status) {
                    case "deleted":
                        K === a && (E = w[B], E.B && (E.B.k(), E.B = a), t.a.Ba(E.ea, f).length && (m.beforeRemove && (z.push(E), D.push(E), E.ka === d ? E = null : g[G] = E), E && F.push.apply(F, E.ea)));
                        B++;
                        break;
                    case "retained":
                        p(G, B++);
                        break;
                    case "added":
                        K !== a ? p(G, K) : (E = {
                            ka: H.value,
                            tb: t.O(A++)
                        }, z.push(E), D.push(E), v || (y[G] = E))
                    }
                    t.a.e.set(f, c, z);
                    u(m.beforeMove, C);
                    t.a.r(F,
                        m.beforeRemove ? t.ba : t.removeNode);
                    for (var G = 0, v = t.f.firstChild(f), N; E = D[G]; G++) {
                        E.ea || t.a.extend(E, b(f, h, E.ka, n, E.tb));
                        for (B = 0; x = E.ea[B]; v = x.nextSibling, N = x, B++) x !== v && t.f.kc(f, x, N);
                        !E.ad && n && (n(E.ka, E.ea, E.tb), E.ad = !0)
                    }
                    u(m.beforeRemove, g);
                    for (G = 0; G < g.length; ++G) g[G] && (g[G].ka = d);
                    u(m.afterMove, C);
                    u(m.afterAdd, y)
                }
            })();
            t.b("utils.setDomNodeChildrenFromArrayMapping", t.a.Db);
            t.X = function () {
                this.allowTemplateRewriting = !1
            };
            t.X.prototype = new t.P;
            t.X.prototype.renderTemplateSource = function (a, b, c, d) {
                if (b =
                    (9 > t.a.C ? 0 : a.nodes) ? a.nodes() : null) return t.a.W(b.cloneNode(!0).childNodes);
                a = a.text();
                return t.a.na(a, d)
            };
            t.X.vb = new t.X;
            t.Fb(t.X.vb);
            t.b("nativeTemplateEngine", t.X);
            (function () {
                t.xb = function () {
                    var a = this.ed = function () {
                        if (!f || !f.tmpl) return 0;
                        try {
                            if (0 <= f.tmpl.tag.tmpl.open.toString().indexOf("__")) return 2
                        } catch (a) {}
                        return 1
                    }();
                    this.renderTemplateSource = function (b, d, g, h) {
                        h = h || c;
                        g = g || {};
                        if (2 > a) throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");
                        var m = b.data("precompiled");
                        m || (m = b.text() || "", m = f.template(null, "{{ko_with $item.koBindingContext}}" + m + "{{/ko_with}}"), b.data("precompiled", m));
                        b = [d.$data];
                        d = f.extend({
                            koBindingContext: d
                        }, g.templateOptions);
                        d = f.tmpl(m, b, d);
                        d.appendTo(h.createElement("div"));
                        f.fragments = {};
                        return d
                    };
                    this.createJavaScriptEvaluatorBlock = function (a) {
                        return "{{ko_code ((function() { return " + a + " })()) }}"
                    };
                    this.addTemplate = function (a, b) {
                        c.write("<script type='text/html' id='" + a + "'>" + b + "</script>")
                    };
                    0 <
                        a && (f.tmpl.tag.ko_code = {
                            open: "__.push($1 || '');"
                        }, f.tmpl.tag.ko_with = {
                            open: "with($1) {",
                            close: "} "
                        })
                };
                t.xb.prototype = new t.P;
                var a = new t.xb;
                0 < a.ed && t.Fb(a);
                t.b("jqueryTmplTemplateEngine", t.xb)
            })()
        })
    })()
})();
! function (a, b) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = b() : "function" == typeof define && define.amd ? define(b) : a.moment = b()
}(this, function () {
    function a() {
        return Dc.apply(null, arguments)
    }

    function b(a) {
        return a instanceof Array || "[object Array]" === Object.prototype.toString.call(a)
    }

    function c(a) {
        return null != a && "[object Object]" === Object.prototype.toString.call(a)
    }

    function d(a) {
        return void 0 === a
    }

    function f(a) {
        return "number" == typeof a || "[object Number]" === Object.prototype.toString.call(a)
    }

    function g(a) {
        return a instanceof Date || "[object Date]" === Object.prototype.toString.call(a)
    }

    function h(a, b) {
        var c, d = [];
        for (c = 0; c < a.length; ++c) d.push(b(a[c], c));
        return d
    }

    function m(a, b) {
        return Object.prototype.hasOwnProperty.call(a, b)
    }

    function n(a, b) {
        for (var c in b) m(b, c) && (a[c] = b[c]);
        return m(b, "toString") && (a.toString = b.toString), m(b, "valueOf") && (a.valueOf = b.valueOf), a
    }

    function p(a, b, c, d) {
        return zc(a, b, c, d, !0).utc()
    }

    function u(a) {
        return null == a._pf && (a._pf = {
            empty: !1,
            unusedTokens: [],
            unusedInput: [],
            overflow: -2,
            charsLeftOver: 0,
            nullInput: !1,
            invalidMonth: null,
            invalidFormat: !1,
            userInvalidated: !1,
            iso: !1,
            parsedDateParts: [],
            meridiem: null,
            rfc2822: !1,
            weekdayMismatch: !1
        }), a._pf
    }

    function v(a) {
        if (null == a._isValid) {
            var b = u(a),
                c = xd.call(b.parsedDateParts, function (a) {
                    return null != a
                }),
                c = !isNaN(a._d.getTime()) && 0 > b.overflow && !b.empty && !b.invalidMonth && !b.invalidWeekday && !b.nullInput && !b.invalidFormat && !b.userInvalidated && (!b.meridiem || b.meridiem && c);
            if (a._strict && (c = c && 0 === b.charsLeftOver && 0 === b.unusedTokens.length &&
                    void 0 === b.bigHour), null != Object.isFrozen && Object.isFrozen(a)) return c;
            a._isValid = c
        }
        return a._isValid
    }

    function x(a) {
        var b = p(NaN);
        return null != a ? n(u(b), a) : u(b).userInvalidated = !0, b
    }

    function y(a, b) {
        var c, f, g;
        if (d(b._isAMomentObject) || (a._isAMomentObject = b._isAMomentObject), d(b._i) || (a._i = b._i), d(b._f) || (a._f = b._f), d(b._l) || (a._l = b._l), d(b._strict) || (a._strict = b._strict), d(b._tzm) || (a._tzm = b._tzm), d(b._isUTC) || (a._isUTC = b._isUTC), d(b._offset) || (a._offset = b._offset), d(b._pf) || (a._pf = u(b)), d(b._locale) ||
            (a._locale = b._locale), 0 < Ub.length)
            for (c = 0; c < Ub.length; c++) f = Ub[c], g = b[f], d(g) || (a[f] = g);
        return a
    }

    function z(b) {
        y(this, b);
        this._d = new Date(null != b._d ? b._d.getTime() : NaN);
        this.isValid() || (this._d = new Date(NaN));
        !1 === Vb && (Vb = !0, a.updateOffset(this), Vb = !1)
    }

    function t(a) {
        return a instanceof z || null != a && null != a._isAMomentObject
    }

    function A(a) {
        return 0 > a ? Math.ceil(a) || 0 : Math.floor(a)
    }

    function w(a) {
        a = +a;
        return 0 !== a && isFinite(a) && A(a), 0
    }

    function B(a, b, c) {
        var d, f = Math.min(a.length, b.length),
            g = Math.abs(a.length -
                b.length),
            h = 0;
        for (d = 0; d < f; d++)(c && a[d] !== b[d] || !c && w(a[d]) !== w(b[d])) && h++;
        return h + g
    }

    function F(b) {
        !1 === a.suppressDeprecationWarnings && "undefined" != typeof console && console.warn && console.warn("Deprecation warning: " + b)
    }

    function C(b, c) {
        var d = !0;
        return n(function () {
            if (null != a.deprecationHandler && a.deprecationHandler(null, b), d) {
                for (var f, g = [], h = 0; h < arguments.length; h++) {
                    if (f = "", "object" == typeof arguments[h]) {
                        f += "\n[" + h + "] ";
                        for (var m in arguments[0]) f += m + ": " + arguments[0][m] + ", ";
                        f = f.slice(0, -2)
                    } else f =
                        arguments[h];
                    g.push(f)
                }
                F(b + "\nArguments: " + Array.prototype.slice.call(g).join("") + "\n" + Error().stack);
                d = !1
            }
            return c.apply(this, arguments)
        }, c)
    }

    function D(b, c) {
        null != a.deprecationHandler && a.deprecationHandler(b, c);
        Ec[b] || (F(c), Ec[b] = !0)
    }

    function E(a) {
        return a instanceof Function || "[object Function]" === Object.prototype.toString.call(a)
    }

    function G(a, b) {
        var d, f = n({}, a);
        for (d in b) m(b, d) && (c(a[d]) && c(b[d]) ? (f[d] = {}, n(f[d], a[d]), n(f[d], b[d])) : null != b[d] ? f[d] = b[d] : delete f[d]);
        for (d in a) m(a, d) && !m(b, d) &&
            c(a[d]) && (f[d] = n({}, f[d]));
        return f
    }

    function H(a) {
        null != a && this.set(a)
    }

    function M(a, b) {
        var c = a.toLowerCase();
        pb[c] = pb[c + "s"] = pb[b] = a
    }

    function K(a) {
        return "string" == typeof a ? pb[a] || pb[a.toLowerCase()] : void 0
    }

    function N(a) {
        var b, c, d = {};
        for (c in a) m(a, c) && (b = K(c), b && (d[b] = a[c]));
        return d
    }

    function U(a) {
        var b = [],
            c;
        for (c in a) b.push({
            unit: c,
            priority: ra[c]
        });
        return b.sort(function (a, b) {
            return a.priority - b.priority
        }), b
    }

    function T(b, c) {
        return function (d) {
            null != d ? (this.isValid() && this._d["set" + (this._isUTC ?
                "UTC" : "") + b](d), d = (a.updateOffset(this, c), this)) : d = P(this, b);
            return d
        }
    }

    function P(a, b) {
        return a.isValid() ? a._d["get" + (a._isUTC ? "UTC" : "") + b]() : NaN
    }

    function S(a, b, c) {
        var d = "" + Math.abs(a);
        return (0 <= a ? c ? "+" : "" : "-") + Math.pow(10, Math.max(0, b - d.length)).toString().substr(1) + d
    }

    function I(a, b, c, d) {
        var f = d;
        "string" == typeof d && (f = function () {
            return this[d]()
        });
        a && (jb[a] = f);
        b && (jb[b[0]] = function () {
            return S(f.apply(this, arguments), b[1], b[2])
        });
        c && (jb[c] = function () {
            return this.localeData().ordinal(f.apply(this,
                arguments), a)
        })
    }

    function J(a) {
        var b, c, d = a.match(Fc);
        b = 0;
        for (c = d.length; b < c; b++) jb[d[b]] ? d[b] = jb[d[b]] : d[b] = d[b].match(/\[[\s\S]/) ? d[b].replace(/^\[|\]$/g, "") : d[b].replace(/\\/g, "");
        return function (b) {
            var f, g = "";
            for (f = 0; f < c; f++) g += E(d[f]) ? d[f].call(b, a) : d[f];
            return g
        }
    }

    function W(a, b) {
        return a.isValid() ? (b = $(b, a.localeData()), Wb[b] = Wb[b] || J(b), Wb[b](a)) : a.localeData().invalidDate()
    }

    function $(a, b) {
        function c(a) {
            return b.longDateFormat(a) || a
        }
        var d = 5;
        for (Db.lastIndex = 0; 0 <= d && Db.test(a);) a = a.replace(Db,
            c), Db.lastIndex = 0, d -= 1;
        return a
    }

    function O(a, b, c) {
        Xb[a] = E(b) ? b : function (a, d) {
            return a && c ? c : b
        }
    }

    function Z(a) {
        return V(a.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (a, b, c, d, f) {
            return b || c || d || f
        }))
    }

    function V(a) {
        return a.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")
    }

    function L(a, b) {
        var c, d = b;
        "string" == typeof a && (a = [a]);
        f(b) && (d = function (a, c) {
            c[b] = w(a)
        });
        for (c = 0; c < a.length; c++) Yb[a[c]] = d
    }

    function Y(a, b) {
        L(a, function (a, c, d, f) {
            d._w = d._w || {};
            b(a, d._w, d, f)
        })
    }

    function X(a, b) {
        return (new Date(Date.UTC(a,
            b + 1, 0))).getUTCDate()
    }

    function aa(a, b) {
        var c;
        if (!a.isValid()) return a;
        if ("string" == typeof b)
            if (/^\d+$/.test(b)) b = w(b);
            else if (b = a.localeData().monthsParse(b), !f(b)) return a;
        return c = Math.min(a.date(), X(a.year(), b)), a._d["set" + (a._isUTC ? "UTC" : "") + "Month"](b, c), a
    }

    function da(b) {
        return null != b ? (aa(this, b), a.updateOffset(this, !0), this) : P(this, "Month")
    }

    function ta() {
        function a(b, c) {
            return c.length - b.length
        }
        var b, c, d = [],
            f = [],
            g = [];
        for (b = 0; 12 > b; b++) c = p([2E3, b]), d.push(this.monthsShort(c, "")), f.push(this.months(c,
            "")), g.push(this.months(c, "")), g.push(this.monthsShort(c, ""));
        d.sort(a);
        f.sort(a);
        g.sort(a);
        for (b = 0; 12 > b; b++) d[b] = V(d[b]), f[b] = V(f[b]);
        for (b = 0; 24 > b; b++) g[b] = V(g[b]);
        this._monthsShortRegex = this._monthsRegex = RegExp("^(" + g.join("|") + ")", "i");
        this._monthsStrictRegex = RegExp("^(" + f.join("|") + ")", "i");
        this._monthsShortStrictRegex = RegExp("^(" + d.join("|") + ")", "i")
    }

    function ja(a) {
        return 0 === a % 4 && 0 !== a % 100 || 0 === a % 400
    }

    function ha(a, b, c, d, f, g, h) {
        b = new Date(a, b, c, d, f, g, h);
        return 100 > a && 0 <= a && isFinite(b.getFullYear()) &&
            b.setFullYear(a), b
    }

    function sa(a) {
        var b = new Date(Date.UTC.apply(null, arguments));
        return 100 > a && 0 <= a && isFinite(b.getUTCFullYear()) && b.setUTCFullYear(a), b
    }

    function la(a, b, c) {
        c = 7 + b - c;
        return -((7 + sa(a, 0, c).getUTCDay() - b) % 7) + c - 1
    }

    function ua(a, b, c, d, f) {
        var g, h;
        c = (7 + c - d) % 7;
        d = la(a, d, f);
        b = 1 + 7 * (b - 1) + c + d;
        return 0 >= b ? (g = a - 1, h = (ja(g) ? 366 : 365) + b) : b > (ja(a) ? 366 : 365) ? (g = a + 1, h = b - (ja(a) ? 366 : 365)) : (g = a, h = b), {
            year: g,
            dayOfYear: h
        }
    }

    function na(a, b, c) {
        var d, f, g = la(a.year(), b, c),
            g = Math.floor((a.dayOfYear() - g - 1) / 7) + 1;
        return 1 >
            g ? (f = a.year() - 1, d = g + pa(f, b, c)) : g > pa(a.year(), b, c) ? (d = g - pa(a.year(), b, c), f = a.year() + 1) : (f = a.year(), d = g), {
                week: d,
                year: f
            }
    }

    function pa(a, b, c) {
        var d = la(a, b, c);
        b = la(a + 1, b, c);
        return ((ja(a) ? 366 : 365) - d + b) / 7
    }

    function qa() {
        function a(b, c) {
            return c.length - b.length
        }
        var b, c, d, f, g = [],
            h = [],
            m = [],
            n = [];
        for (b = 0; 7 > b; b++) c = p([2E3, 1]).day(b), d = this.weekdaysMin(c, ""), f = this.weekdaysShort(c, ""), c = this.weekdays(c, ""), g.push(d), h.push(f), m.push(c), n.push(d), n.push(f), n.push(c);
        g.sort(a);
        h.sort(a);
        m.sort(a);
        n.sort(a);
        for (b =
            0; 7 > b; b++) h[b] = V(h[b]), m[b] = V(m[b]), n[b] = V(n[b]);
        this._weekdaysMinRegex = this._weekdaysShortRegex = this._weekdaysRegex = RegExp("^(" + n.join("|") + ")", "i");
        this._weekdaysStrictRegex = RegExp("^(" + m.join("|") + ")", "i");
        this._weekdaysShortStrictRegex = RegExp("^(" + h.join("|") + ")", "i");
        this._weekdaysMinStrictRegex = RegExp("^(" + g.join("|") + ")", "i")
    }

    function ca() {
        return this.hours() % 12 || 12
    }

    function va(a, b) {
        I(a, 0, 0, function () {
            return this.localeData().meridiem(this.hours(), this.minutes(), b)
        })
    }

    function xc(a, b) {
        return b._meridiemParse
    }

    function Ac(a) {
        var b = null;
        if (!ka[a] && "undefined" != typeof module && module && module.exports) try {
            b = Eb._abbr, require("./locale/" + a), hb(b)
        } catch (c) {}
        return ka[a]
    }

    function hb(a, b) {
        var c;
        return a && (c = d(b) ? Va(a) : Sb(a, b), c && (Eb = c)), Eb._abbr
    }

    function Sb(a, b) {
        if (null !== b) {
            var c = Gc;
            if (b.abbr = a, null != ka[a]) D("defineLocaleOverride", "use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
                c = ka[a]._config;
            else if (null != b.parentLocale) {
                if (null == ka[b.parentLocale]) return qb[b.parentLocale] || (qb[b.parentLocale] = []), qb[b.parentLocale].push({
                    name: a,
                    config: b
                }), null;
                c = ka[b.parentLocale]._config
            }
            return ka[a] = new H(G(c, b)), qb[a] && qb[a].forEach(function (a) {
                Sb(a.name, a.config)
            }), hb(a), ka[a]
        }
        return delete ka[a], null
    }

    function Va(a) {
        var c;
        if (a && a._locale && a._locale._abbr && (a = a._locale._abbr), !a) return Eb;
        if (!b(a)) {
            if (c = Ac(a)) return c;
            a = [a]
        }
        a: {
            for (var d, f, g, h = 0; h < a.length;) {
                g = (a[h] ? a[h].toLowerCase().replace("_",
                    "-") : a[h]).split("-");
                c = g.length;
                for (d = (d = a[h + 1] ? a[h + 1].toLowerCase().replace("_", "-") : a[h + 1]) ? d.split("-") : null; 0 < c;) {
                    if (f = Ac(g.slice(0, c).join("-"))) {
                        a = f;
                        break a
                    }
                    if (d && d.length >= c && B(g, d, !0) >= c - 1) break;
                    c--
                }
                h++
            }
            a = null
        }
        return a
    }

    function Tb(a) {
        var b, c = a._a;
        return c && -2 === u(a).overflow && (b = 0 > c[Pa] || 11 < c[Pa] ? Pa : 1 > c[Ja] || c[Ja] > X(c[xa], c[Pa]) ? Ja : 0 > c[ma] || 24 < c[ma] || 24 === c[ma] && (0 !== c[ya] || 0 !== c[Qa] || 0 !== c[bb]) ? ma : 0 > c[ya] || 59 < c[ya] ? ya : 0 > c[Qa] || 59 < c[Qa] ? Qa : 0 > c[bb] || 999 < c[bb] ? bb : -1, u(a)._overflowDayOfYear &&
            (b < xa || b > Ja) && (b = Ja), u(a)._overflowWeeks && -1 === b && (b = yd), u(a)._overflowWeekday && -1 === b && (b = zd), u(a).overflow = b), a
    }

    function Bc(a) {
        var b, c, d, f, g, h;
        b = a._i;
        var m = Ad.exec(b) || Bd.exec(b);
        if (m) {
            u(a).iso = !0;
            b = 0;
            for (c = Fb.length; b < c; b++)
                if (Fb[b][1].exec(m[1])) {
                    f = Fb[b][0];
                    d = !1 !== Fb[b][2];
                    break
                } if (null == f) return void(a._isValid = !1);
            if (m[3]) {
                b = 0;
                for (c = Zb.length; b < c; b++)
                    if (Zb[b][1].exec(m[3])) {
                        g = (m[2] || " ") + Zb[b][0];
                        break
                    } if (null == g) return void(a._isValid = !1)
            }
            if (!d && null != g) return void(a._isValid = !1);
            if (m[4]) {
                if (!Cd.exec(m[4])) return void(a._isValid = !1);
                h = "Z"
            }
            a._f = f + (g || "") + (h || "");
            Cb(a)
        } else a._isValid = !1
    }

    function Cc(a) {
        var b, c, d, f, g, h, m = {
            " GMT": " +0000",
            " EDT": " -0400",
            " EST": " -0500",
            " CDT": " -0500",
            " CST": " -0600",
            " MDT": " -0600",
            " MST": " -0700",
            " PDT": " -0700",
            " PST": " -0800"
        };
        if (b = a._i.replace(/\([^\)]*\)|[\n\t]/g, " ").replace(/(\s\s+)/g, " ").replace(/^\s|\s$/g, ""), c = Dd.exec(b)) {
            if (b = c[1] ? "ddd" + (5 === c[1].length ? ", " : " ") : "", d = "D MMM " + (10 < c[2].length ? "YYYY " : "YY "), f = "HH:mm" + (c[4] ? ":ss" : ""), c[1]) {
                var n = "Sun Mon Tue Wed Thu Fri Sat".split(" ")[(new Date(c[2])).getDay()];
                if (c[1].substr(0, 3) !== n) return u(a).weekdayMismatch = !0, void(a._isValid = !1)
            }
            switch (c[5].length) {
            case 2:
                0 === h ? g = " +0000" : (h = "YXWVUTSRQPONZABCDEFGHIKLM".indexOf(c[5][1].toUpperCase()) - 12, g = (0 > h ? " -" : " +") + ("" + h).replace(/^-?/, "0").match(/..$/)[0] + "00");
                break;
            case 4:
                g = m[c[5]];
                break;
            default:
                g = m[" GMT"]
            }
            c[5] = g;
            a._i = c.splice(1).join("");
            a._f = b + d + f + " ZZ";
            Cb(a);
            u(a).rfc2822 = !0
        } else a._isValid = !1
    }

    function wd(b) {
        var c = Ed.exec(b._i);
        return null !== c ? void(b._d = new Date(+c[1])) : (Bc(b), void(!1 === b._isValid && (delete b._isValid,
            Cc(b), !1 === b._isValid && (delete b._isValid, a.createFromInputFallback(b)))))
    }

    function ib(a, b, c) {
        return null != a ? a : null != b ? b : c
    }

    function Rb(b) {
        var c, d, f, g = [];
        if (!b._d) {
            d = new Date(a.now());
            d = b._useUTC ? [d.getUTCFullYear(), d.getUTCMonth(), d.getUTCDate()] : [d.getFullYear(), d.getMonth(), d.getDate()];
            if (b._w && null == b._a[Ja] && null == b._a[Pa]) {
                var h, m, n, p, t, v, w, y;
                (h = b._w, null != h.GG || null != h.W || null != h.E) ? (t = 1, v = 4, m = ib(h.GG, b._a[xa], na(ia(), 1, 4).year), n = ib(h.W, 1), p = ib(h.E, 1), (1 > p || 7 < p) && (y = !0)) : (t = b._locale._week.dow,
                    v = b._locale._week.doy, n = na(ia(), t, v), m = ib(h.gg, b._a[xa], n.year), n = ib(h.w, n.week), null != h.d ? (p = h.d, (0 > p || 6 < p) && (y = !0)) : null != h.e ? (p = h.e + t, (0 > h.e || 6 < h.e) && (y = !0)) : p = t);
                1 > n || n > pa(m, t, v) ? u(b)._overflowWeeks = !0 : null != y ? u(b)._overflowWeekday = !0 : (w = ua(m, n, p, t, v), b._a[xa] = w.year, b._dayOfYear = w.dayOfYear)
            }
            null != b._dayOfYear && (f = ib(b._a[xa], d[xa]), (b._dayOfYear > (ja(f) ? 366 : 365) || 0 === b._dayOfYear) && (u(b)._overflowDayOfYear = !0), c = sa(f, 0, b._dayOfYear), b._a[Pa] = c.getUTCMonth(), b._a[Ja] = c.getUTCDate());
            for (c = 0; 3 >
                c && null == b._a[c]; ++c) b._a[c] = g[c] = d[c];
            for (; 7 > c; c++) b._a[c] = g[c] = null == b._a[c] ? 2 === c ? 1 : 0 : b._a[c];
            24 === b._a[ma] && 0 === b._a[ya] && 0 === b._a[Qa] && 0 === b._a[bb] && (b._nextDay = !0, b._a[ma] = 0);
            b._d = (b._useUTC ? sa : ha).apply(null, g);
            null != b._tzm && b._d.setUTCMinutes(b._d.getUTCMinutes() - b._tzm);
            b._nextDay && (b._a[ma] = 24)
        }
    }

    function Cb(b) {
        if (b._f === a.ISO_8601) return void Bc(b);
        if (b._f === a.RFC_2822) return void Cc(b);
        b._a = [];
        u(b).empty = !0;
        var c, d, f, g, h, n = "" + b._i,
            p = n.length,
            t = 0;
        f = $(b._f, b._locale).match(Fc) || [];
        for (c =
            0; c < f.length; c++)
            if (g = f[c], (d = (n.match(m(Xb, g) ? Xb[g](b._strict, b._locale) : RegExp(Z(g))) || [])[0]) && (h = n.substr(0, n.indexOf(d)), 0 < h.length && u(b).unusedInput.push(h), n = n.slice(n.indexOf(d) + d.length), t += d.length), jb[g]) {
                d ? u(b).empty = !1 : u(b).unusedTokens.push(g);
                var v = b;
                null != d && m(Yb, g) && Yb[g](d, v._a, v, g)
            } else b._strict && !d && u(b).unusedTokens.push(g);
        u(b).charsLeftOver = p - t;
        0 < n.length && u(b).unusedInput.push(n);
        12 >= b._a[ma] && !0 === u(b).bigHour && 0 < b._a[ma] && (u(b).bigHour = void 0);
        u(b).parsedDateParts = b._a.slice(0);
        u(b).meridiem = b._meridiem;
        c = b._a;
        f = ma;
        n = b._locale;
        h = b._a[ma];
        var p = b._meridiem,
            w, n = null == p ? h : null != n.meridiemHour ? n.meridiemHour(h, p) : null != n.isPM ? (w = n.isPM(p), w && 12 > h && (h += 12), w || 12 !== h || (h = 0), h) : h;
        c[f] = n;
        Rb(b);
        Tb(b)
    }

    function ud(a) {
        if (!a._d) {
            var b = N(a._i);
            a._a = h([b.year, b.month, b.day || b.date, b.hour, b.minute, b.second, b.millisecond], function (a) {
                return a && parseInt(a, 10)
            });
            Rb(a)
        }
    }

    function yc(a) {
        var c = a._i,
            d = a._f;
        a._locale = a._locale || Va(a._l);
        if (null === c || void 0 === d && "" === c) a = x({
            nullInput: !0
        });
        else if ("string" ==
            typeof c && (a._i = c = a._locale.preparse(c)), t(c)) a = new z(Tb(c));
        else {
            if (g(c)) a._d = c;
            else if (b(d)) {
                var f, h, m;
                if (0 === a._f.length) u(a).invalidFormat = !0, a._d = new Date(NaN);
                else {
                    for (c = 0; c < a._f.length; c++) d = 0, f = y({}, a), null != a._useUTC && (f._useUTC = a._useUTC), f._f = a._f[c], Cb(f), v(f) && (d += u(f).charsLeftOver, d += 10 * u(f).unusedTokens.length, u(f).score = d, (null == m || d < m) && (m = d, h = f));
                    n(a, h || f)
                }
            } else d ? Cb(a) : vd(a);
            a = (v(a) || (a._d = null), a)
        }
        return a
    }

    function vd(m) {
        var n = m._i;
        d(n) ? m._d = new Date(a.now()) : g(n) ? m._d = new Date(n.valueOf()) :
            "string" == typeof n ? wd(m) : b(n) ? (m._a = h(n.slice(0), function (a) {
                return parseInt(a, 10)
            }), Rb(m)) : c(n) ? ud(m) : f(n) ? m._d = new Date(n) : a.createFromInputFallback(m)
    }

    function zc(a, d, f, g, h) {
        var m = {};
        !0 !== f && !1 !== f || (g = f, f = void 0);
        var n;
        if (n = c(a)) a: {
            for (var p in a) {
                n = !1;
                break a
            }
            n = !0
        }(n || b(a) && 0 === a.length) && (a = void 0);
        m._isAMomentObject = !0;
        m._useUTC = m._isUTC = h;
        m._l = f;
        m._i = a;
        m._f = d;
        m._strict = g;
        a = new z(Tb(yc(m)));
        return a._nextDay && (a.add(1, "d"), a._nextDay = void 0), a
    }

    function ia(a, b, c, d) {
        return zc(a, b, c, d, !1)
    }

    function Hc(a,
        c) {
        var d, f;
        if (1 === c.length && b(c[0]) && (c = c[0]), !c.length) return ia();
        d = c[0];
        for (f = 1; f < c.length; ++f) c[f].isValid() && !c[f][a](d) || (d = c[f]);
        return d
    }

    function Gb(a) {
        var b = N(a);
        a = b.year || 0;
        var c = b.quarter || 0,
            d = b.month || 0,
            f = b.week || 0,
            g = b.day || 0,
            h = b.hour || 0,
            m = b.minute || 0,
            n = b.second || 0,
            p = b.millisecond || 0;
        a: {
            for (var t in b)
                if (-1 === rb.indexOf(t) || null != b[t] && isNaN(b[t])) {
                    b = !1;
                    break a
                } t = !1;
            for (var u = 0; u < rb.length; ++u)
                if (b[rb[u]]) {
                    if (t) {
                        b = !1;
                        break a
                    }
                    parseFloat(b[rb[u]]) !== w(b[rb[u]]) && (t = !0)
                } b = !0
        }
        this._isValid =
            b;
        this._milliseconds = +p + 1E3 * n + 6E4 * m + 36E5 * h;
        this._days = +g + 7 * f;
        this._months = +d + 3 * c + 12 * a;
        this._data = {};
        this._locale = Va();
        this._bubble()
    }

    function $b(a) {
        return a instanceof Gb
    }

    function ac(a) {
        return 0 > a ? -1 * Math.round(-1 * a) : Math.round(a)
    }

    function Ic(a, b) {
        I(a, 0, 0, function () {
            var a = this.utcOffset();
            return 0 > a && (a = -a), "+" + S(~~(a / 60), 2) + b + S(~~a % 60, 2)
        })
    }

    function bc(a, b) {
        var c = (b || "").match(a);
        if (null === c) return null;
        var c = ((c[c.length - 1] || []) + "").match(Fd) || ["-", 0, 0],
            d = +(60 * c[1]) + w(c[2]);
        return 0 === d ? 0 : "+" ===
            c[0] ? d : -d
    }

    function dc(b, c) {
        var d, f;
        return c._isUTC ? (d = c.clone(), f = (t(b) || g(b) ? b.valueOf() : ia(b).valueOf()) - d.valueOf(), d._d.setTime(d._d.valueOf() + f), a.updateOffset(d, !1), d) : ia(b).local()
    }

    function ec(a) {
        return 15 * -Math.round(a._d.getTimezoneOffset() / 15)
    }

    function Jc() {
        return !!this.isValid() && this._isUTC && 0 === this._offset
    }

    function Ka(a, b) {
        var c, d, g, h = a;
        g = null;
        if ($b(a)) h = {
            ms: a._milliseconds,
            d: a._days,
            M: a._months
        };
        else if (f(a)) h = {}, b ? h[b] = a : h.milliseconds = a;
        else if (g = Gd.exec(a)) c = "-" === g[1] ? -1 : 1, h = {
            y: 0,
            d: w(g[Ja]) * c,
            h: w(g[ma]) * c,
            m: w(g[ya]) * c,
            s: w(g[Qa]) * c,
            ms: w(ac(1E3 * g[bb])) * c
        };
        else if (g = Hd.exec(a)) c = "-" === g[1] ? -1 : 1, h = {
            y: cb(g[2], c),
            M: cb(g[3], c),
            w: cb(g[4], c),
            d: cb(g[5], c),
            h: cb(g[6], c),
            m: cb(g[7], c),
            s: cb(g[8], c)
        };
        else if (null == h) h = {};
        else if ("object" == typeof h && ("from" in h || "to" in h)) g = ia(h.from), h = ia(h.to), g = g.isValid() && h.isValid() ? (h = dc(h, g), g.isBefore(h) ? c = Kc(g, h) : (c = Kc(h, g), c.milliseconds = -c.milliseconds, c.months = -c.months), c) : {
            milliseconds: 0,
            months: 0
        }, h = {}, h.ms = g.milliseconds, h.M = g.months;
        return d =
            new Gb(h), $b(a) && m(a, "_locale") && (d._locale = a._locale), d
    }

    function cb(a, b) {
        var c = a && parseFloat(a.replace(",", "."));
        return (isNaN(c) ? 0 : c) * b
    }

    function Kc(a, b) {
        var c = {
            milliseconds: 0,
            months: 0
        };
        return c.months = b.month() - a.month() + 12 * (b.year() - a.year()), a.clone().add(c.months, "M").isAfter(b) && --c.months, c.milliseconds = +b - +a.clone().add(c.months, "M"), c
    }

    function Lc(a, b) {
        return function (c, d) {
            var f, g;
            return null === d || isNaN(+d) || (D(b, "moment()." + b + "(period, number) is deprecated. Please use moment()." + b + "(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),
                g = c, c = d, d = g), c = "string" == typeof c ? +c : c, f = Ka(c, d), Mc(this, f, a), this
        }
    }

    function Mc(b, c, d, f) {
        var g = c._milliseconds,
            h = ac(c._days);
        c = ac(c._months);
        b.isValid() && (f = null == f || f, g && b._d.setTime(b._d.valueOf() + g * d), h && (g = P(b, "Date") + h * d, b.isValid() && b._d["set" + (b._isUTC ? "UTC" : "") + "Date"](g)), c && aa(b, P(b, "Month") + c * d), f && a.updateOffset(b, h || c))
    }

    function Nc(a) {
        var b;
        return void 0 === a ? this._locale._abbr : (b = Va(a), null != b && (this._locale = b), this)
    }

    function Oc() {
        return this._locale
    }

    function Hb(a, b) {
        I(0, [a, a.length],
            0, b)
    }

    function Pc(a, b, c, d, f) {
        var g;
        null == a ? a = na(this, d, f).year : (g = pa(a, d, f), b > g && (b = g), a = ua(a, b, c, d, f), a = sa(a.year, 0, a.dayOfYear), a = (this.year(a.getUTCFullYear()), this.month(a.getUTCMonth()), this.date(a.getUTCDate()), this));
        return a
    }

    function Id(a, b) {
        b[bb] = w(1E3 * ("0." + a))
    }

    function Qc(a) {
        return a
    }

    function Ib(a, b, c, d) {
        var f = Va();
        b = p().set(d, b);
        return f[c](b, a)
    }

    function Rc(a, b, c) {
        if (f(a) && (b = a, a = void 0), a = a || "", null != b) return Ib(a, b, c, "month");
        var d = [];
        for (b = 0; 12 > b; b++) d[b] = Ib(a, b, c, "month");
        return d
    }

    function fc(a, b, c, d) {
        "boolean" == typeof a ? (f(b) && (c = b, b = void 0), b = b || "") : (b = a, c = b, a = !1, f(b) && (c = b, b = void 0), b = b || "");
        var g = Va();
        a = a ? g._week.dow : 0;
        if (null != c) return Ib(b, (c + a) % 7, d, "day");
        g = [];
        for (c = 0; 7 > c; c++) g[c] = Ib(b, (c + a) % 7, d, "day");
        return g
    }

    function Sc(a, b, c, d) {
        b = Ka(b, c);
        return a._milliseconds += d * b._milliseconds, a._days += d * b._days, a._months += d * b._months, a._bubble()
    }

    function Wa(a) {
        return function () {
            return this.as(a)
        }
    }

    function db(a) {
        return function () {
            return this.isValid() ? this._data[a] : NaN
        }
    }

    function Jd(a,
        b, c, d, f) {
        return f.relativeTime(b || 1, !!c, a, d)
    }

    function Jb() {
        if (!this.isValid()) return this.localeData().invalidDate();
        var a, b, c, d = gc(this._milliseconds) / 1E3,
            f = gc(this._days),
            g = gc(this._months);
        a = A(d / 60);
        b = A(a / 60);
        d %= 60;
        a %= 60;
        c = A(g / 12);
        var g = g % 12,
            h = this.asSeconds();
        return h ? (0 > h ? "-" : "") + "P" + (c ? c + "Y" : "") + (g ? g + "M" : "") + (f ? f + "D" : "") + (b || a || d ? "T" : "") + (b ? b + "H" : "") + (a ? a + "M" : "") + (d ? d + "S" : "") : "P0D"
    }

    function eb(a, b, c) {
        var d = {
            mm: b ? "хвіліна_хвіліны_хвілін" : "хвіліну_хвіліны_хвілін",
            hh: b ? "гадзіна_гадзіны_гадзін" : "гадзіну_гадзіны_гадзін",
            dd: "дзень_дні_дзён",
            MM: "месяц_месяцы_месяцаў",
            yy: "год_гады_гадоў"
        };
        "m" === c ? c = b ? "хвіліна" : "хвіліну" : "h" === c ? c = b ? "гадзіна" : "гадзіну" : (b = a + " ", a = +a, c = d[c].split("_"), c = b + (1 === a % 10 && 11 !== a % 100 ? c[0] : 2 <= a % 10 && 4 >= a % 10 && (10 > a % 100 || 20 <= a % 100) ? c[1] : c[2]));
        return c
    }

    function hc(a, b, c) {
        var d = {
            mm: "munutenn",
            MM: "miz",
            dd: "devezh"
        };
        b = a + " ";
        2 === a ? (a = d[c], c = {
            m: "v",
            b: "v",
            d: "z"
        }, a = void 0 === c[a.charAt(0)] ? a : c[a.charAt(0)] + a.substring(1)) : a = d[c];
        return b + a
    }

    function Tc(a) {
        return 9 < a ? Tc(a % 10) : a
    }

    function fb(a, b, c) {
        var d = a + " ";
        switch (c) {
        case "m":
            return b ? "jedna minuta" : "jedne minute";
        case "mm":
            return d + (1 === a ? "minuta" : 2 === a || 3 === a || 4 === a ? "minute" : "minuta");
        case "h":
            return b ? "jedan sat" : "jednog sata";
        case "hh":
            return d + (1 === a ? "sat" : 2 === a || 3 === a || 4 === a ? "sata" : "sati");
        case "dd":
            return d + (1 === a ? "dan" : "dana");
        case "MM":
            return d + (1 === a ? "mjesec" : 2 === a || 3 === a || 4 === a ? "mjeseca" :
                "mjeseci");
        case "yy":
            return d + (1 === a ? "godina" : 2 === a || 3 === a || 4 === a ? "godine" : "godina")
        }
    }

    function sb(a) {
        return 1 < a && 5 > a && 1 !== ~~(a / 10)
    }

    function za(a, b, c, d) {
        var f = a + " ";
        switch (c) {
        case "s":
            return b || d ? "pár sekund" : "pár sekundami";
        case "m":
            return b ? "minuta" : d ? "minutu" : "minutou";
        case "mm":
            return b || d ? f + (sb(a) ? "minuty" : "minut") : f + "minutami";
        case "h":
            return b ? "hodina" : d ? "hodinu" : "hodinou";
        case "hh":
            return b || d ? f + (sb(a) ? "hodiny" : "hodin") : f + "hodinami";
        case "d":
            return b || d ? "den" : "dnem";
        case "dd":
            return b ||
                d ? f + (sb(a) ? "dny" : "dní") : f + "dny";
        case "M":
            return b || d ? "měsíc" : "měsícem";
        case "MM":
            return b || d ? f + (sb(a) ? "měsíce" : "měsíců") : f + "měsíci";
        case "y":
            return b || d ? "rok" : "rokem";
        case "yy":
            return b || d ? f + (sb(a) ? "roky" : "let") : f + "lety"
        }
    }

    function Xa(a, b, c, d) {
        a = {
            m: ["eine Minute", "einer Minute"],
            h: ["eine Stunde", "einer Stunde"],
            d: ["ein Tag", "einem Tag"],
            dd: [a + " Tage", a + " Tagen"],
            M: ["ein Monat", "einem Monat"],
            MM: [a + " Monate", a + " Monaten"],
            y: ["ein Jahr", "einem Jahr"],
            yy: [a + " Jahre", a + " Jahren"]
        };
        return b ? a[c][0] : a[c][1]
    }

    function Ya(a, b, c, d) {
        a = {
            m: ["eine Minute", "einer Minute"],
            h: ["eine Stunde", "einer Stunde"],
            d: ["ein Tag", "einem Tag"],
            dd: [a + " Tage", a + " Tagen"],
            M: ["ein Monat", "einem Monat"],
            MM: [a + " Monate", a + " Monaten"],
            y: ["ein Jahr", "einem Jahr"],
            yy: [a + " Jahre", a + " Jahren"]
        };
        return b ? a[c][0] : a[c][1]
    }

    function Za(a, b, c, d) {
        a = {
            m: ["eine Minute", "einer Minute"],
            h: ["eine Stunde", "einer Stunde"],
            d: ["ein Tag", "einem Tag"],
            dd: [a + " Tage", a + " Tagen"],
            M: ["ein Monat", "einem Monat"],
            MM: [a + " Monate", a + " Monaten"],
            y: ["ein Jahr", "einem Jahr"],
            yy: [a + " Jahre", a + " Jahren"]
        };
        return b ? a[c][0] : a[c][1]
    }

    function La(a, b, c, d) {
        a = {
            s: ["mõne sekundi", "mõni sekund", "paar sekundit"],
            m: ["ühe minuti", "üks minut"],
            mm: [a + " minuti", a + " minutit"],
            h: ["ühe tunni", "tund aega", "üks tund"],
            hh: [a + " tunni", a + " tundi"],
            d: ["ühe päeva", "üks päev"],
            M: ["kuu aja", "kuu aega", "üks kuu"],
            MM: [a + " kuu", a + " kuud"],
            y: ["ühe aasta", "aasta", "üks aasta"],
            yy: [a +
                " aasta", a + " aastat"
            ]
        };
        return b ? a[c][2] ? a[c][2] : a[c][1] : d ? a[c][0] : a[c][1]
    }

    function Aa(a, b, c, d) {
        b = "";
        switch (c) {
        case "s":
            return d ? "muutaman sekunnin" : "muutama sekunti";
        case "m":
            return d ? "minuutin" : "minuutti";
        case "mm":
            b = d ? "minuutin" : "minuuttia";
            break;
        case "h":
            return d ? "tunnin" : "tunti";
        case "hh":
            b = d ? "tunnin" : "tuntia";
            break;
        case "d":
            return d ? "päivän" : "päivä";
        case "dd":
            b = d ? "päivän" : "päivää";
            break;
        case "M":
            return d ? "kuukauden" : "kuukausi";
        case "MM":
            b = d ? "kuukauden" :
                "kuukautta";
            break;
        case "y":
            return d ? "vuoden" : "vuosi";
        case "yy":
            b = d ? "vuoden" : "vuotta"
        }
        return (10 > a ? d ? Kd[a] : Kb[a] : a) + " " + b
    }

    function Ba(a, b, c, d) {
        a = {
            s: ["thodde secondanim", "thodde second"],
            m: ["eka mintan", "ek minute"],
            mm: [a + " mintanim", a + " mintam"],
            h: ["eka horan", "ek hor"],
            hh: [a + " horanim", a + " hor"],
            d: ["eka disan", "ek dis"],
            dd: [a + " disanim", a + " dis"],
            M: ["eka mhoinean", "ek mhoino"],
            MM: [a + " mhoineanim", a + " mhoine"],
            y: ["eka vorsan", "ek voros"],
            yy: [a + " vorsanim", a + " vorsam"]
        };
        return b ? a[c][0] : a[c][1]
    }

    function gb(a,
        b, c) {
        var d = a + " ";
        switch (c) {
        case "m":
            return b ? "jedna minuta" : "jedne minute";
        case "mm":
            return d + (1 === a ? "minuta" : 2 === a || 3 === a || 4 === a ? "minute" : "minuta");
        case "h":
            return b ? "jedan sat" : "jednog sata";
        case "hh":
            return d + (1 === a ? "sat" : 2 === a || 3 === a || 4 === a ? "sata" : "sati");
        case "dd":
            return d + (1 === a ? "dan" : "dana");
        case "MM":
            return d + (1 === a ? "mjesec" : 2 === a || 3 === a || 4 === a ? "mjeseca" : "mjeseci");
        case "yy":
            return d + (1 === a ? "godina" : 2 === a || 3 === a || 4 === a ? "godine" : "godina")
        }
    }

    function Ca(a, b, c, d) {
        switch (c) {
        case "s":
            return d ||
                b ? "néhány másodperc" : "néhány másodperce";
        case "m":
            return "egy" + (d || b ? " perc" : " perce");
        case "mm":
            return a + (d || b ? " perc" : " perce");
        case "h":
            return "egy" + (d || b ? " óra" : " órája");
        case "hh":
            return a + (d || b ? " óra" : " órája");
        case "d":
            return "egy" + (d || b ? " nap" : " napja");
        case "dd":
            return a + (d || b ? " nap" : " napja");
        case "M":
            return "egy" + (d || b ? " hónap" : " hónapja");
        case "MM":
            return a + (d || b ? " hónap" : " hónapja");
        case "y":
            return "egy" + (d || b ?
                " év" : " éve");
        case "yy":
            return a + (d || b ? " év" : " éve")
        }
        return ""
    }

    function tb(a) {
        return 11 === a % 100 || 1 !== a % 10
    }

    function Ma(a, b, c, d) {
        var f = a + " ";
        switch (c) {
        case "s":
            return b || d ? "nokkrar sekúndur" : "nokkrum sekúndum";
        case "m":
            return b ? "mínúta" : "mínútu";
        case "mm":
            return tb(a) ? f + (b || d ? "mínútur" : "mínútum") : b ? f + "mínúta" : f + "mínútu";
        case "hh":
            return tb(a) ? f + (b || d ? "klukkustundir" : "klukkustundum") : f + "klukkustund";
        case "d":
            return b ?
                "dagur" : d ? "dag" : "degi";
        case "dd":
            return tb(a) ? b ? f + "dagar" : f + (d ? "daga" : "dögum") : b ? f + "dagur" : f + (d ? "dag" : "degi");
        case "M":
            return b ? "mánuður" : d ? "mánuð" : "mánuði";
        case "MM":
            return tb(a) ? b ? f + "mánuðir" : f + (d ? "mánuði" : "mánuðum") : b ? f + "mánuður" : f + (d ? "mánuð" : "mánuði");
        case "y":
            return b || d ? "ár" : "ári";
        case "yy":
            return tb(a) ? f + (b || d ? "ár" : "árum") : f + (b || d ? "ár" : "ári")
        }
    }

    function ub(a, b, c, d) {
        a = {
            m: ["eng Minutt", "enger Minutt"],
            h: ["eng Stonn", "enger Stonn"],
            d: ["een Dag", "engem Dag"],
            M: ["ee Mount", "engem Mount"],
            y: ["ee Joer", "engem Joer"]
        };
        return b ? a[c][0] : a[c][1]
    }

    function vb(a) {
        if (a = parseInt(a, 10), isNaN(a)) return !1;
        if (0 > a) return !0;
        if (10 > a) return 4 <= a && 7 >= a;
        if (100 > a) {
            var b = a % 10;
            return vb(0 === b ? a / 10 : b)
        }
        if (1E4 > a) {
            for (; 10 <= a;) a /= 10;
            return vb(a)
        }
        return a /= 1E3, vb(a)
    }

    function kb(a, b, c, d) {
        return b ? $a(c)[0] : d ? $a(c)[1] : $a(c)[2]
    }

    function $a(a) {
        return Ld[a].split("_")
    }

    function wb(a, b, c, d) {
        var f = a + " ";
        return 1 === a ? f + kb(a, b, c[0], d) : b ? f + (0 === a % 10 || 10 < a && 20 > a ? $a(c)[1] : $a(c)[0]) : d ? f + $a(c)[1] : f + (0 === a % 10 || 10 < a && 20 > a ? $a(c)[1] : $a(c)[2])
    }

    function Uc(a, b, c) {
        return c ? 1 === b % 10 && 11 !== b % 100 ? a[2] : a[3] : 1 === b % 10 && 11 !== b % 100 ? a[0] : a[1]
    }

    function xb(a, b, c) {
        return a + " " + Uc(Vc[c], a, b)
    }

    function yb(a, b, c) {
        return Uc(Vc[c], a, b)
    }

    function Da(a, b, c, d) {
        d = "";
        if (b) switch (c) {
        case "s":
            d = "काही सेकंद";
            break;
        case "m":
            d = "एक मिनिट";
            break;
        case "mm":
            d = "%d मिनिटे";
            break;
        case "h":
            d = "एक तास";
            break;
        case "hh":
            d = "%d तास";
            break;
        case "d":
            d = "एक दिवस";
            break;
        case "dd":
            d = "%d दिवस";
            break;
        case "M":
            d = "एक महिना";
            break;
        case "MM":
            d = "%d महिने";
            break;
        case "y":
            d = "एक वर्ष";
            break;
        case "yy":
            d = "%d वर्षे"
        } else switch (c) {
        case "s":
            d = "काही सेकंदां";
            break;
        case "m":
            d = "एका मिनिटा";
            break;
        case "mm":
            d = "%d मिनिटां";
            break;
        case "h":
            d = "एका तासा";
            break;
        case "hh":
            d = "%d तासां";
            break;
        case "d":
            d = "एका दिवसा";
            break;
        case "dd":
            d = "%d दिवसां";
            break;
        case "M":
            d = "एका महिन्या";
            break;
        case "MM":
            d = "%d महिन्यां";
            break;
        case "y":
            d = "एका वर्षा";
            break;
        case "yy":
            d = "%d वर्षां"
        }
        return d.replace(/%d/i, a)
    }

    function Lb(a) {
        return 5 > a % 10 && 1 < a % 10 && 1 !== ~~(a / 10) % 10
    }

    function lb(a, b, c) {
        var d = a + " ";
        switch (c) {
        case "m":
            return b ? "minuta" : "minutę";
        case "mm":
            return d + (Lb(a) ? "minuty" : "minut");
        case "h":
            return b ? "godzina" : "godzinę";
        case "hh":
            return d + (Lb(a) ? "godziny" : "godzin");
        case "MM":
            return d + (Lb(a) ? "miesiące" : "miesięcy");
        case "yy":
            return d +
                (Lb(a) ? "lata" : "lat")
        }
    }

    function zb(a, b, c) {
        return a + " " + {
            mm: "minute",
            hh: "ore",
            dd: "zile",
            MM: "luni",
            yy: "ani"
        } [c]
    }

    function mb(a, b, c) {
        var d = {
            mm: b ? "минута_минуты_минут" : "минуту_минуты_минут",
            hh: "час_часа_часов",
            dd: "день_дня_дней",
            MM: "месяц_месяца_месяцев",
            yy: "год_года_лет"
        };
        "m" === c ? c = b ? "минута" : "минуту" : (b = a + " ", a = +a, c = d[c].split("_"), c = b + (1 === a % 10 && 11 !== a % 100 ? c[0] : 2 <= a % 10 && 4 >= a % 10 && (10 > a % 100 || 20 <= a % 100) ? c[1] : c[2]));
        return c
    }

    function Ea(a, b, c, d) {
        var f = a + " ";
        switch (c) {
        case "s":
            return b || d ? "pár sekúnd" : "pár sekundami";
        case "m":
            return b ? "minúta" : d ? "minútu" : "minútou";
        case "mm":
            return b || d ? f + (1 < a && 5 > a ? "minúty" : "minút") : f + "minútami";
        case "h":
            return b ? "hodina" : d ? "hodinu" : "hodinou";
        case "hh":
            return b || d ? f + (1 < a && 5 > a ? "hodiny" : "hodín") : f + "hodinami";
        case "d":
            return b || d ? "deň" : "dňom";
        case "dd":
            return b || d ? f + (1 < a && 5 > a ? "dni" : "dní") : f + "dňami";
        case "M":
            return b || d ? "mesiac" : "mesiacom";
        case "MM":
            return b || d ? f + (1 < a && 5 > a ? "mesiace" : "mesiacov") : f + "mesiacmi";
        case "y":
            return b ||
                d ? "rok" : "rokom";
        case "yy":
            return b || d ? f + (1 < a && 5 > a ? "roky" : "rokov") : f + "rokmi"
        }
    }

    function Fa(a, b, c, d) {
        var f = a + " ";
        switch (c) {
        case "s":
            return b || d ? "nekaj sekund" : "nekaj sekundami";
        case "m":
            return b ? "ena minuta" : "eno minuto";
        case "mm":
            return f + (1 === a ? b ? "minuta" : "minuto" : 2 === a ? b || d ? "minuti" : "minutama" : 5 > a ? b || d ? "minute" : "minutami" : b || d ? "minut" : "minutami");
        case "h":
            return b ? "ena ura" : "eno uro";
        case "hh":
            return f + (1 === a ? b ? "ura" : "uro" : 2 === a ? b || d ? "uri" : "urama" : 5 > a ? b || d ? "ure" : "urami" : b || d ? "ur" : "urami");
        case "d":
            return b ||
                d ? "en dan" : "enim dnem";
        case "dd":
            return f + (1 === a ? b || d ? "dan" : "dnem" : 2 === a ? b || d ? "dni" : "dnevoma" : b || d ? "dni" : "dnevi");
        case "M":
            return b || d ? "en mesec" : "enim mesecem";
        case "MM":
            return f + (1 === a ? b || d ? "mesec" : "mesecem" : 2 === a ? b || d ? "meseca" : "mesecema" : 5 > a ? b || d ? "mesece" : "meseci" : b || d ? "mesecev" : "meseci");
        case "y":
            return b || d ? "eno leto" : "enim letom";
        case "yy":
            return f + (1 === a ? b || d ? "leto" : "letom" : 2 === a ? b || d ? "leti" : "letoma" : 5 > a ? b || d ? "leta" : "leti" : b || d ? "let" : "leti")
        }
    }

    function Ab(a, b, c, d) {
        b = Math.floor(a % 1E3 / 100);
        d =
            Math.floor(a % 100 / 10);
        var f = a % 10;
        a = "";
        b = (0 < b && (a += ic[b] + "vatlh"), 0 < d && (a += ("" !== a ? " " : "") + ic[d] + "maH"), 0 < f && (a += ("" !== a ? " " : "") + ic[f]), "" === a ? "pagh" : a);
        switch (c) {
        case "mm":
            return b + " tup";
        case "hh":
            return b + " rep";
        case "dd":
            return b + " jaj";
        case "MM":
            return b + " jar";
        case "yy":
            return b + " DIS"
        }
    }

    function Ga(a, b, c, d) {
        a = {
            s: ["viensas secunds", "'iensas secunds"],
            m: ["'n míut", "'iens míut"],
            mm: [a + " míuts", "" + a + " míuts"],
            h: ["'n þora", "'iensa þora"],
            hh: [a + " þoras", "" + a + " þoras"],
            d: ["'n ziua", "'iensa ziua"],
            dd: [a + " ziuas", "" + a + " ziuas"],
            M: ["'n mes", "'iens mes"],
            MM: [a + " mesen", "" + a + " mesen"],
            y: ["'n ar", "'iens ar"],
            yy: [a + " ars", "" + a + " ars"]
        };
        return d ? a[c][0] : b ? a[c][0] : a[c][1]
    }

    function nb(a, b, c) {
        var d = {
            mm: b ? "хвилина_хвилини_хвилин" : "хвилину_хвилини_хвилин",
            hh: b ? "година_години_годин" : "годину_години_годин",
            dd: "день_дні_днів",
            MM: "місяць_місяці_місяців",
            yy: "рік_роки_років"
        };
        "m" === c ? c = b ? "хвилина" : "хвилину" : "h" === c ? c = b ? "година" :
            "годину" : (b = a + " ", a = +a, c = d[c].split("_"), c = b + (1 === a % 10 && 11 !== a % 100 ? c[0] : 2 <= a % 10 && 4 >= a % 10 && (10 > a % 100 || 20 <= a % 100) ? c[1] : c[2]));
        return c
    }

    function ob(a) {
        return function () {
            return a + "о" + (11 === this.hours() ? "б" : "") + "] LT"
        }
    }
    var Dc, xd = Array.prototype.some ? Array.prototype.some : function (a) {
            for (var b = Object(this), c = b.length >>> 0, d = 0; d < c; d++)
                if (d in b && a.call(this, b[d], d, b)) return !0;
            return !1
        },
        Ub = a.momentProperties = [],
        Vb = !1,
        Ec = {};
    a.suppressDeprecationWarnings = !1;
    a.deprecationHandler =
        null;
    var Md = Object.keys ? Object.keys : function (a) {
            var b, c = [];
            for (b in a) m(a, b) && c.push(b);
            return c
        },
        pb = {},
        ra = {},
        Fc = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
        Db = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,
        Wb = {},
        jb = {},
        Wc = /\d/,
        wa = /\d\d/,
        Xc = /\d{3}/,
        jc = /\d{4}/,
        Mb = /[+-]?\d{6}/,
        fa = /\d\d?/,
        Yc = /\d\d\d\d?/,
        Zc = /\d\d\d\d\d\d?/,
        Nb = /\d{1,3}/,
        kc = /\d{1,4}/,
        Ob = /[+-]?\d{1,6}/,
        Nd = /\d+/,
        Pb = /[+-]?\d+/,
        Od = /Z|[+-]\d\d:?\d\d/gi,
        Qb = /Z|[+-]\d\d(?::?\d\d)?/gi,
        Bb = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,
        Xb = {},
        Yb = {},
        xa = 0,
        Pa = 1,
        Ja = 2,
        ma = 3,
        ya = 4,
        Qa = 5,
        bb = 6,
        yd = 7,
        zd = 8,
        oa = Array.prototype.indexOf ? Array.prototype.indexOf : function (a) {
            var b;
            for (b = 0; b < this.length; ++b)
                if (this[b] === a) return b;
            return -1
        };
    I("M", ["MM", 2], "Mo", function () {
        return this.month() + 1
    });
    I("MMM", 0, 0, function (a) {
        return this.localeData().monthsShort(this,
            a)
    });
    I("MMMM", 0, 0, function (a) {
        return this.localeData().months(this, a)
    });
    M("month", "M");
    ra.month = 8;
    O("M", fa);
    O("MM", fa, wa);
    O("MMM", function (a, b) {
        return b.monthsShortRegex(a)
    });
    O("MMMM", function (a, b) {
        return b.monthsRegex(a)
    });
    L(["M", "MM"], function (a, b) {
        b[Pa] = w(a) - 1
    });
    L(["MMM", "MMMM"], function (a, b, c, d) {
        d = c._locale.monthsParse(a, d, c._strict);
        null != d ? b[Pa] = d : u(c).invalidMonth = a
    });
    var $c = /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;
    I("Y", 0, 0, function () {
        var a = this.year();
        return 9999 >= a ? "" + a : "+" + a
    });
    I(0, ["YY", 2], 0, function () {
        return this.year() %
            100
    });
    I(0, ["YYYY", 4], 0, "year");
    I(0, ["YYYYY", 5], 0, "year");
    I(0, ["YYYYYY", 6, !0], 0, "year");
    M("year", "y");
    ra.year = 1;
    O("Y", Pb);
    O("YY", fa, wa);
    O("YYYY", kc, jc);
    O("YYYYY", Ob, Mb);
    O("YYYYYY", Ob, Mb);
    L(["YYYYY", "YYYYYY"], xa);
    L("YYYY", function (b, c) {
        c[xa] = 2 === b.length ? a.parseTwoDigitYear(b) : w(b)
    });
    L("YY", function (b, c) {
        c[xa] = a.parseTwoDigitYear(b)
    });
    L("Y", function (a, b) {
        b[xa] = parseInt(a, 10)
    });
    a.parseTwoDigitYear = function (a) {
        return w(a) + (68 < w(a) ? 1900 : 2E3)
    };
    var ad = T("FullYear", !0);
    I("w", ["ww", 2], "wo", "week");
    I("W", ["WW",
        2
    ], "Wo", "isoWeek");
    M("week", "w");
    M("isoWeek", "W");
    ra.week = 5;
    ra.isoWeek = 5;
    O("w", fa);
    O("ww", fa, wa);
    O("W", fa);
    O("WW", fa, wa);
    Y(["w", "ww", "W", "WW"], function (a, b, c, d) {
        b[d.substr(0, 1)] = w(a)
    });
    I("d", 0, "do", "day");
    I("dd", 0, 0, function (a) {
        return this.localeData().weekdaysMin(this, a)
    });
    I("ddd", 0, 0, function (a) {
        return this.localeData().weekdaysShort(this, a)
    });
    I("dddd", 0, 0, function (a) {
        return this.localeData().weekdays(this, a)
    });
    I("e", 0, 0, "weekday");
    I("E", 0, 0, "isoWeekday");
    M("day", "d");
    M("weekday", "e");
    M("isoWeekday",
        "E");
    ra.day = 11;
    ra.weekday = 11;
    ra.isoWeekday = 11;
    O("d", fa);
    O("e", fa);
    O("E", fa);
    O("dd", function (a, b) {
        return b.weekdaysMinRegex(a)
    });
    O("ddd", function (a, b) {
        return b.weekdaysShortRegex(a)
    });
    O("dddd", function (a, b) {
        return b.weekdaysRegex(a)
    });
    Y(["dd", "ddd", "dddd"], function (a, b, c, d) {
        d = c._locale.weekdaysParse(a, d, c._strict);
        null != d ? b.d = d : u(c).invalidWeekday = a
    });
    Y(["d", "e", "E"], function (a, b, c, d) {
        b[d] = w(a)
    });
    I("H", ["HH", 2], 0, "hour");
    I("h", ["hh", 2], 0, ca);
    I("k", ["kk", 2], 0, function () {
        return this.hours() || 24
    });
    I("hmm",
        0, 0,
        function () {
            return "" + ca.apply(this) + S(this.minutes(), 2)
        });
    I("hmmss", 0, 0, function () {
        return "" + ca.apply(this) + S(this.minutes(), 2) + S(this.seconds(), 2)
    });
    I("Hmm", 0, 0, function () {
        return "" + this.hours() + S(this.minutes(), 2)
    });
    I("Hmmss", 0, 0, function () {
        return "" + this.hours() + S(this.minutes(), 2) + S(this.seconds(), 2)
    });
    va("a", !0);
    va("A", !1);
    M("hour", "h");
    ra.hour = 13;
    O("a", xc);
    O("A", xc);
    O("H", fa);
    O("h", fa);
    O("k", fa);
    O("HH", fa, wa);
    O("hh", fa, wa);
    O("kk", fa, wa);
    O("hmm", Yc);
    O("hmmss", Zc);
    O("Hmm", Yc);
    O("Hmmss", Zc);
    L(["H",
        "HH"
    ], ma);
    L(["k", "kk"], function (a, b, c) {
        a = w(a);
        b[ma] = 24 === a ? 0 : a
    });
    L(["a", "A"], function (a, b, c) {
        c._isPm = c._locale.isPM(a);
        c._meridiem = a
    });
    L(["h", "hh"], function (a, b, c) {
        b[ma] = w(a);
        u(c).bigHour = !0
    });
    L("hmm", function (a, b, c) {
        var d = a.length - 2;
        b[ma] = w(a.substr(0, d));
        b[ya] = w(a.substr(d));
        u(c).bigHour = !0
    });
    L("hmmss", function (a, b, c) {
        var d = a.length - 4,
            f = a.length - 2;
        b[ma] = w(a.substr(0, d));
        b[ya] = w(a.substr(d, 2));
        b[Qa] = w(a.substr(f));
        u(c).bigHour = !0
    });
    L("Hmm", function (a, b, c) {
        c = a.length - 2;
        b[ma] = w(a.substr(0, c));
        b[ya] =
            w(a.substr(c))
    });
    L("Hmmss", function (a, b, c) {
        c = a.length - 4;
        var d = a.length - 2;
        b[ma] = w(a.substr(0, c));
        b[ya] = w(a.substr(c, 2));
        b[Qa] = w(a.substr(d))
    });
    var Eb, Pd = T("Hours", !0),
        Gc = {
            calendar: {
                sameDay: "[Today at] LT",
                nextDay: "[Tomorrow at] LT",
                nextWeek: "dddd [at] LT",
                lastDay: "[Yesterday at] LT",
                lastWeek: "[Last] dddd [at] LT",
                sameElse: "L"
            },
            longDateFormat: {
                LTS: "h:mm:ss A",
                LT: "h:mm A",
                L: "MM/DD/YYYY",
                LL: "MMMM D, YYYY",
                LLL: "MMMM D, YYYY h:mm A",
                LLLL: "dddd, MMMM D, YYYY h:mm A"
            },
            invalidDate: "Invalid date",
            ordinal: "%d",
            dayOfMonthOrdinalParse: /\d{1,2}/,
            relativeTime: {
                future: "in %s",
                past: "%s ago",
                s: "a few seconds",
                ss: "%d seconds",
                m: "a minute",
                mm: "%d minutes",
                h: "an hour",
                hh: "%d hours",
                d: "a day",
                dd: "%d days",
                M: "a month",
                MM: "%d months",
                y: "a year",
                yy: "%d years"
            },
            months: "January February March April May June July August September October November December".split(" "),
            monthsShort: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
            week: {
                dow: 0,
                doy: 6
            },
            weekdays: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
            weekdaysMin: "Su Mo Tu We Th Fr Sa".split(" "),
            weekdaysShort: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
            meridiemParse: /[ap]\.?m?\.?/i
        },
        ka = {},
        qb = {},
        Ad = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
        Bd = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
        Cd = /Z|[+-]\d\d(?::?\d\d)?/,
        Fb = [
            ["YYYYYY-MM-DD", /[+-]\d{6}-\d\d-\d\d/],
            ["YYYY-MM-DD", /\d{4}-\d\d-\d\d/],
            ["GGGG-[W]WW-E", /\d{4}-W\d\d-\d/],
            ["GGGG-[W]WW", /\d{4}-W\d\d/, !1],
            ["YYYY-DDD", /\d{4}-\d{3}/],
            ["YYYY-MM", /\d{4}-\d\d/, !1],
            ["YYYYYYMMDD", /[+-]\d{10}/],
            ["YYYYMMDD", /\d{8}/],
            ["GGGG[W]WWE", /\d{4}W\d{3}/],
            ["GGGG[W]WW", /\d{4}W\d{2}/, !1],
            ["YYYYDDD", /\d{7}/]
        ],
        Zb = [
            ["HH:mm:ss.SSSS", /\d\d:\d\d:\d\d\.\d+/],
            ["HH:mm:ss,SSSS", /\d\d:\d\d:\d\d,\d+/],
            ["HH:mm:ss", /\d\d:\d\d:\d\d/],
            ["HH:mm", /\d\d:\d\d/],
            ["HHmmss.SSSS", /\d\d\d\d\d\d\.\d+/],
            ["HHmmss,SSSS", /\d\d\d\d\d\d,\d+/],
            ["HHmmss", /\d\d\d\d\d\d/],
            ["HHmm", /\d\d\d\d/],
            ["HH", /\d\d/]
        ],
        Ed = /^\/?Date\((\-?\d+)/i,
        Dd = /^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;
    a.createFromInputFallback = C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
        function (a) {
            a._d = new Date(a._i + (a._useUTC ? " UTC" : ""))
        });
    a.ISO_8601 = function () {};
    a.RFC_2822 = function () {};
    var Qd = C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/", function () {
            var a = ia.apply(null, arguments);
            return this.isValid() && a.isValid() ? a < this ? this : a : x()
        }),
        Rd = C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/", function () {
            var a = ia.apply(null, arguments);
            return this.isValid() && a.isValid() ? a > this ?
                this : a : x()
        }),
        rb = "year quarter month week day hour minute second millisecond".split(" ");
    Ic("Z", ":");
    Ic("ZZ", "");
    O("Z", Qb);
    O("ZZ", Qb);
    L(["Z", "ZZ"], function (a, b, c) {
        c._useUTC = !0;
        c._tzm = bc(Qb, a)
    });
    var Fd = /([\+\-]|\d\d)/gi;
    a.updateOffset = function () {};
    var Gd = /^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,
        Hd = /^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;
    Ka.fn = Gb.prototype;
    Ka.invalid = function () {
        return Ka(NaN)
    };
    var Sd = Lc(1, "add"),
        Td = Lc(-1, "subtract");
    a.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ";
    a.defaultFormatUtc = "YYYY-MM-DDTHH:mm:ss[Z]";
    var bd = C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function (a) {
        return void 0 === a ? this.localeData() : this.locale(a)
    });
    I(0, ["gg", 2], 0, function () {
        return this.weekYear() % 100
    });
    I(0, ["GG", 2], 0, function () {
        return this.isoWeekYear() % 100
    });
    Hb("gggg", "weekYear");
    Hb("ggggg", "weekYear");
    Hb("GGGG", "isoWeekYear");
    Hb("GGGGG", "isoWeekYear");
    M("weekYear", "gg");
    M("isoWeekYear", "GG");
    ra.weekYear = 1;
    ra.isoWeekYear = 1;
    O("G", Pb);
    O("g", Pb);
    O("GG", fa, wa);
    O("gg", fa, wa);
    O("GGGG", kc, jc);
    O("gggg", kc, jc);
    O("GGGGG", Ob, Mb);
    O("ggggg", Ob, Mb);
    Y(["gggg", "ggggg", "GGGG", "GGGGG"], function (a, b, c, d) {
        b[d.substr(0, 2)] = w(a)
    });
    Y(["gg", "GG"], function (b, c, d, f) {
        c[f] = a.parseTwoDigitYear(b)
    });
    I("Q", 0, "Qo", "quarter");
    M("quarter", "Q");
    ra.quarter = 7;
    O("Q", Wc);
    L("Q", function (a, b) {
        b[Pa] = 3 * (w(a) - 1)
    });
    I("D", ["DD", 2], "Do", "date");
    M("date", "D");
    ra.date = 9;
    O("D", fa);
    O("DD", fa, wa);
    O("Do", function (a, b) {
        return a ? b._dayOfMonthOrdinalParse || b._ordinalParse : b._dayOfMonthOrdinalParseLenient
    });
    L(["D", "DD"], Ja);
    L("Do", function (a, b) {
        b[Ja] = w(a.match(fa)[0], 10)
    });
    var cd = T("Date", !0);
    I("DDD", ["DDDD", 3], "DDDo", "dayOfYear");
    M("dayOfYear", "DDD");
    ra.dayOfYear = 4;
    O("DDD", Nb);
    O("DDDD", Xc);
    L(["DDD", "DDDD"], function (a, b, c) {
        c._dayOfYear = w(a)
    });
    I("m", ["mm", 2], 0, "minute");
    M("minute", "m");
    ra.minute = 14;
    O("m", fa);
    O("mm", fa, wa);
    L(["m", "mm"], ya);
    var Ud = T("Minutes",
        !1);
    I("s", ["ss", 2], 0, "second");
    M("second", "s");
    ra.second = 15;
    O("s", fa);
    O("ss", fa, wa);
    L(["s", "ss"], Qa);
    var Vd = T("Seconds", !1);
    I("S", 0, 0, function () {
        return ~~(this.millisecond() / 100)
    });
    I(0, ["SS", 2], 0, function () {
        return ~~(this.millisecond() / 10)
    });
    I(0, ["SSS", 3], 0, "millisecond");
    I(0, ["SSSS", 4], 0, function () {
        return 10 * this.millisecond()
    });
    I(0, ["SSSSS", 5], 0, function () {
        return 100 * this.millisecond()
    });
    I(0, ["SSSSSS", 6], 0, function () {
        return 1E3 * this.millisecond()
    });
    I(0, ["SSSSSSS", 7], 0, function () {
        return 1E4 * this.millisecond()
    });
    I(0, ["SSSSSSSS", 8], 0, function () {
        return 1E5 * this.millisecond()
    });
    I(0, ["SSSSSSSSS", 9], 0, function () {
        return 1E6 * this.millisecond()
    });
    M("millisecond", "ms");
    ra.millisecond = 16;
    O("S", Nb, Wc);
    O("SS", Nb, wa);
    O("SSS", Nb, Xc);
    var Na;
    for (Na = "SSSS"; 9 >= Na.length; Na += "S") O(Na, Nd);
    for (Na = "S"; 9 >= Na.length; Na += "S") L(Na, Id);
    var Wd = T("Milliseconds", !1);
    I("z", 0, 0, "zoneAbbr");
    I("zz", 0, 0, "zoneName");
    var Q = z.prototype;
    Q.add = Sd;
    Q.calendar = function (b, c) {
        var d = b || ia(),
            f = dc(d, this).startOf("day"),
            f = a.calendarFormat(this, f) || "sameElse",
            g = c && (E(c[f]) ? c[f].call(this, d) : c[f]);
        return this.format(g || this.localeData().calendar(f, this, ia(d)))
    };
    Q.clone = function () {
        return new z(this)
    };
    Q.diff = function (a, b, c) {
        var d, f;
        if (this.isValid())
            if (a = dc(a, this), a.isValid()) {
                d = 6E4 * (a.utcOffset() - this.utcOffset());
                b = K(b);
                if ("year" === b || "month" === b || "quarter" === b) {
                    var g;
                    d = 12 * (a.year() - this.year()) + (a.month() - this.month());
                    var h = this.clone().add(d, "months");
                    a = (0 > a - h ? (f = this.clone().add(d - 1, "months"), g = (a - h) / (h - f)) : (f = this.clone().add(d + 1, "months"), g = (a - h) /
                        (f - h)), -(d + g) || 0);
                    "quarter" === b ? a /= 3 : "year" === b && (a /= 12)
                } else f = this - a, a = "second" === b ? f / 1E3 : "minute" === b ? f / 6E4 : "hour" === b ? f / 36E5 : "day" === b ? (f - d) / 864E5 : "week" === b ? (f - d) / 6048E5 : f;
                b = c ? a : A(a)
            } else b = NaN;
        else b = NaN;
        return b
    };
    Q.endOf = function (a) {
        return a = K(a), void 0 === a || "millisecond" === a ? this : ("date" === a && (a = "day"), this.startOf(a).add(1, "isoWeek" === a ? "week" : a).subtract(1, "ms"))
    };
    Q.format = function (b) {
        b || (b = this.isUtc() ? a.defaultFormatUtc : a.defaultFormat);
        b = W(this, b);
        return this.localeData().postformat(b)
    };
    Q.from = function (a, b) {
        return this.isValid() && (t(a) && a.isValid() || ia(a).isValid()) ? Ka({
            to: this,
            from: a
        }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate()
    };
    Q.fromNow = function (a) {
        return this.from(ia(), a)
    };
    Q.to = function (a, b) {
        return this.isValid() && (t(a) && a.isValid() || ia(a).isValid()) ? Ka({
            from: this,
            to: a
        }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate()
    };
    Q.toNow = function (a) {
        return this.to(ia(), a)
    };
    Q.get = function (a) {
        return a = K(a), E(this[a]) ? this[a]() : this
    };
    Q.invalidAt =
        function () {
            return u(this).overflow
        };
    Q.isAfter = function (a, b) {
        var c = t(a) ? a : ia(a);
        return !(!this.isValid() || !c.isValid()) && (b = K(d(b) ? "millisecond" : b), "millisecond" === b ? this.valueOf() > c.valueOf() : c.valueOf() < this.clone().startOf(b).valueOf())
    };
    Q.isBefore = function (a, b) {
        var c = t(a) ? a : ia(a);
        return !(!this.isValid() || !c.isValid()) && (b = K(d(b) ? "millisecond" : b), "millisecond" === b ? this.valueOf() < c.valueOf() : this.clone().endOf(b).valueOf() < c.valueOf())
    };
    Q.isBetween = function (a, b, c, d) {
        return d = d || "()", ("(" === d[0] ? this.isAfter(a,
            c) : !this.isBefore(a, c)) && (")" === d[1] ? this.isBefore(b, c) : !this.isAfter(b, c))
    };
    Q.isSame = function (a, b) {
        var c, d = t(a) ? a : ia(a);
        return !(!this.isValid() || !d.isValid()) && (b = K(b || "millisecond"), "millisecond" === b ? this.valueOf() === d.valueOf() : (c = d.valueOf(), this.clone().startOf(b).valueOf() <= c && c <= this.clone().endOf(b).valueOf()))
    };
    Q.isSameOrAfter = function (a, b) {
        return this.isSame(a, b) || this.isAfter(a, b)
    };
    Q.isSameOrBefore = function (a, b) {
        return this.isSame(a, b) || this.isBefore(a, b)
    };
    Q.isValid = function () {
        return v(this)
    };
    Q.lang = bd;
    Q.locale = Nc;
    Q.localeData = Oc;
    Q.max = Rd;
    Q.min = Qd;
    Q.parsingFlags = function () {
        return n({}, u(this))
    };
    Q.set = function (a, b) {
        if ("object" == typeof a) {
            a = N(a);
            for (var c = U(a), d = 0; d < c.length; d++) this[c[d].unit](a[c[d].unit])
        } else if (a = K(a), E(this[a])) return this[a](b);
        return this
    };
    Q.startOf = function (a) {
        switch (a = K(a)) {
        case "year":
            this.month(0);
        case "quarter":
        case "month":
            this.date(1);
        case "week":
        case "isoWeek":
        case "day":
        case "date":
            this.hours(0);
        case "hour":
            this.minutes(0);
        case "minute":
            this.seconds(0);
        case "second":
            this.milliseconds(0)
        }
        return "week" === a && this.weekday(0), "isoWeek" === a && this.isoWeekday(1), "quarter" === a && this.month(3 * Math.floor(this.month() / 3)), this
    };
    Q.subtract = Td;
    Q.toArray = function () {
        return [this.year(), this.month(), this.date(), this.hour(), this.minute(), this.second(), this.millisecond()]
    };
    Q.toObject = function () {
        return {
            years: this.year(),
            months: this.month(),
            date: this.date(),
            hours: this.hours(),
            minutes: this.minutes(),
            seconds: this.seconds(),
            milliseconds: this.milliseconds()
        }
    };
    Q.toDate = function () {
        return new Date(this.valueOf())
    };
    Q.toISOString = function () {
        if (!this.isValid()) return null;
        var a = this.clone().utc();
        return 0 > a.year() || 9999 < a.year() ? W(a, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]") : E(Date.prototype.toISOString) ? this.toDate().toISOString() : W(a, "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")
    };
    Q.inspect = function () {
        if (!this.isValid()) return "moment.invalid()";
        var a = "moment",
            b = "";
        this.isLocal() || (a = 0 === this.utcOffset() ? "moment.utc" : "moment.parseZone", b = "Z");
        var a = "[" + a + '("]',
            c = 0 <= this.year() && 9999 >= this.year() ? "YYYY" : "YYYYYY";
        return this.format(a +
            c + "-MM-DD[T]HH:mm:ss.SSS" + (b + '[")]'))
    };
    Q.toJSON = function () {
        return this.isValid() ? this.toISOString() : null
    };
    Q.toString = function () {
        return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
    };
    Q.unix = function () {
        return Math.floor(this.valueOf() / 1E3)
    };
    Q.valueOf = function () {
        return this._d.valueOf() - 6E4 * (this._offset || 0)
    };
    Q.creationData = function () {
        return {
            input: this._i,
            format: this._f,
            locale: this._locale,
            isUTC: this._isUTC,
            strict: this._strict
        }
    };
    Q.year = ad;
    Q.isLeapYear = function () {
        return ja(this.year())
    };
    Q.weekYear = function (a) {
        return Pc.call(this, a, this.week(), this.weekday(), this.localeData()._week.dow, this.localeData()._week.doy)
    };
    Q.isoWeekYear = function (a) {
        return Pc.call(this, a, this.isoWeek(), this.isoWeekday(), 1, 4)
    };
    Q.quarter = Q.quarters = function (a) {
        return null == a ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (a - 1) + this.month() % 3)
    };
    Q.month = da;
    Q.daysInMonth = function () {
        return X(this.year(), this.month())
    };
    Q.week = Q.weeks = function (a) {
        var b = this.localeData().week(this);
        return null == a ? b : this.add(7 * (a - b), "d")
    };
    Q.isoWeek = Q.isoWeeks = function (a) {
        var b = na(this, 1, 4).week;
        return null == a ? b : this.add(7 * (a - b), "d")
    };
    Q.weeksInYear = function () {
        var a = this.localeData()._week;
        return pa(this.year(), a.dow, a.doy)
    };
    Q.isoWeeksInYear = function () {
        return pa(this.year(), 1, 4)
    };
    Q.date = cd;
    Q.day = Q.days = function (a) {
        if (!this.isValid()) return null != a ? this : NaN;
        var b = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
        if (null != a) var c = a,
            d = this.localeData(),
            b = (a = "string" != typeof c ? c : isNaN(c) ? (c = d.weekdaysParse(c), "number" == typeof c ? c : null) : parseInt(c,
                10), this.add(a - b, "d"));
        return b
    };
    Q.weekday = function (a) {
        if (!this.isValid()) return null != a ? this : NaN;
        var b = (this.day() + 7 - this.localeData()._week.dow) % 7;
        return null == a ? b : this.add(a - b, "d")
    };
    Q.isoWeekday = function (a) {
        if (!this.isValid()) return null != a ? this : NaN;
        if (null != a) {
            var b = this.localeData();
            a = "string" == typeof a ? b.weekdaysParse(a) % 7 || 7 : isNaN(a) ? null : a;
            return this.day(this.day() % 7 ? a : a - 7)
        }
        return this.day() || 7
    };
    Q.dayOfYear = function (a) {
        var b = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) /
            864E5) + 1;
        return null == a ? b : this.add(a - b, "d")
    };
    Q.hour = Q.hours = Pd;
    Q.minute = Q.minutes = Ud;
    Q.second = Q.seconds = Vd;
    Q.millisecond = Q.milliseconds = Wd;
    Q.utcOffset = function (b, c, d) {
        var f, g = this._offset || 0;
        if (!this.isValid()) return null != b ? this : NaN;
        if (null != b) {
            if ("string" == typeof b) {
                if (b = bc(Qb, b), null === b) return this
            } else 16 > Math.abs(b) && !d && (b *= 60);
            return !this._isUTC && c && (f = ec(this)), this._offset = b, this._isUTC = !0, null != f && this.add(f, "m"), g !== b && (!c || this._changeInProgress ? Mc(this, Ka(b - g, "m"), 1, !1) : this._changeInProgress ||
                (this._changeInProgress = !0, a.updateOffset(this, !0), this._changeInProgress = null)), this
        }
        return this._isUTC ? g : ec(this)
    };
    Q.utc = function (a) {
        return this.utcOffset(0, a)
    };
    Q.local = function (a) {
        return this._isUTC && (this.utcOffset(0, a), this._isUTC = !1, a && this.subtract(ec(this), "m")), this
    };
    Q.parseZone = function () {
        if (null != this._tzm) this.utcOffset(this._tzm, !1, !0);
        else if ("string" == typeof this._i) {
            var a = bc(Od, this._i);
            null != a ? this.utcOffset(a) : this.utcOffset(0, !0)
        }
        return this
    };
    Q.hasAlignedHourOffset = function (a) {
        return !!this.isValid() &&
            (a = a ? ia(a).utcOffset() : 0, 0 === (this.utcOffset() - a) % 60)
    };
    Q.isDST = function () {
        return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset()
    };
    Q.isLocal = function () {
        return !!this.isValid() && !this._isUTC
    };
    Q.isUtcOffset = function () {
        return !!this.isValid() && this._isUTC
    };
    Q.isUtc = Jc;
    Q.isUTC = Jc;
    Q.zoneAbbr = function () {
        return this._isUTC ? "UTC" : ""
    };
    Q.zoneName = function () {
        return this._isUTC ? "Coordinated Universal Time" : ""
    };
    Q.dates = C("dates accessor is deprecated. Use date instead.",
        cd);
    Q.months = C("months accessor is deprecated. Use month instead", da);
    Q.years = C("years accessor is deprecated. Use year instead", ad);
    Q.zone = C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/", function (a, b) {
        return null != a ? ("string" != typeof a && (a = -a), this.utcOffset(a, b), this) : -this.utcOffset()
    });
    Q.isDSTShifted = C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information", function () {
        if (!d(this._isDSTShifted)) return this._isDSTShifted;
        var a = {};
        if (y(a, this), a = yc(a), a._a) {
            var b = a._isUTC ? p(a._a) : ia(a._a);
            this._isDSTShifted = this.isValid() && 0 < B(a._a, b.toArray())
        } else this._isDSTShifted = !1;
        return this._isDSTShifted
    });
    var ea = H.prototype;
    ea.calendar = function (a, b, c) {
        a = this._calendar[a] || this._calendar.sameElse;
        return E(a) ? a.call(b, c) : a
    };
    ea.longDateFormat = function (a) {
        var b = this._longDateFormat[a],
            c = this._longDateFormat[a.toUpperCase()];
        return b || !c ? b : (this._longDateFormat[a] = c.replace(/MMMM|MM|DD|dddd/g, function (a) {
            return a.slice(1)
        }), this._longDateFormat[a])
    };
    ea.invalidDate = function () {
        return this._invalidDate
    };
    ea.ordinal = function (a) {
        return this._ordinal.replace("%d", a)
    };
    ea.preparse = Qc;
    ea.postformat = Qc;
    ea.relativeTime = function (a, b, c, d) {
        var f = this._relativeTime[c];
        return E(f) ? f(a, b, c, d) : f.replace(/%d/i, a)
    };
    ea.pastFuture = function (a, b) {
        var c = this._relativeTime[0 < a ? "future" : "past"];
        return E(c) ? c(b) : c.replace(/%s/i, b)
    };
    ea.set = function (a) {
        var b, c;
        for (c in a) b = a[c], E(b) ? this[c] = b : this["_" + c] = b;
        this._config = a;
        this._dayOfMonthOrdinalParseLenient = RegExp((this._dayOfMonthOrdinalParse.source ||
            this._ordinalParse.source) + "|" + /\d{1,2}/.source)
    };
    ea.months = function (a, c) {
        return a ? b(this._months) ? this._months[a.month()] : this._months[(this._months.isFormat || $c).test(c) ? "format" : "standalone"][a.month()] : b(this._months) ? this._months : this._months.standalone
    };
    ea.monthsShort = function (a, c) {
        return a ? b(this._monthsShort) ? this._monthsShort[a.month()] : this._monthsShort[$c.test(c) ? "format" : "standalone"][a.month()] : b(this._monthsShort) ? this._monthsShort : this._monthsShort.standalone
    };
    ea.monthsParse = function (a,
        b, c) {
        var d, f, g;
        if (this._monthsParseExact) {
            g = a.toLocaleLowerCase();
            if (!this._monthsParse) {
                this._monthsParse = [];
                this._longMonthsParse = [];
                this._shortMonthsParse = [];
                for (a = 0; 12 > a; ++a) f = p([2E3, a]), this._shortMonthsParse[a] = this.monthsShort(f, "").toLocaleLowerCase(), this._longMonthsParse[a] = this.months(f, "").toLocaleLowerCase()
            }
            return c ? "MMM" === b ? (d = oa.call(this._shortMonthsParse, g), -1 !== d ? d : null) : (d = oa.call(this._longMonthsParse, g), -1 !== d ? d : null) : "MMM" === b ? (d = oa.call(this._shortMonthsParse, g), -1 !== d ? d :
                (d = oa.call(this._longMonthsParse, g), -1 !== d ? d : null)) : (d = oa.call(this._longMonthsParse, g), -1 !== d ? d : (d = oa.call(this._shortMonthsParse, g), -1 !== d ? d : null))
        }
        this._monthsParse || (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = []);
        for (d = 0; 12 > d; d++)
            if ((f = p([2E3, d]), c && !this._longMonthsParse[d] && (this._longMonthsParse[d] = RegExp("^" + this.months(f, "").replace(".", "") + "$", "i"), this._shortMonthsParse[d] = RegExp("^" + this.monthsShort(f, "").replace(".", "") + "$", "i")), c || this._monthsParse[d] || (g =
                    "^" + this.months(f, "") + "|^" + this.monthsShort(f, ""), this._monthsParse[d] = RegExp(g.replace(".", ""), "i")), c && "MMMM" === b && this._longMonthsParse[d].test(a)) || c && "MMM" === b && this._shortMonthsParse[d].test(a) || !c && this._monthsParse[d].test(a)) return d
    };
    ea.monthsRegex = function (a) {
        return this._monthsParseExact ? (m(this, "_monthsRegex") || ta.call(this), a ? this._monthsStrictRegex : this._monthsRegex) : (m(this, "_monthsRegex") || (this._monthsRegex = Bb), this._monthsStrictRegex && a ? this._monthsStrictRegex : this._monthsRegex)
    };
    ea.monthsShortRegex = function (a) {
        return this._monthsParseExact ? (m(this, "_monthsRegex") || ta.call(this), a ? this._monthsShortStrictRegex : this._monthsShortRegex) : (m(this, "_monthsShortRegex") || (this._monthsShortRegex = Bb), this._monthsShortStrictRegex && a ? this._monthsShortStrictRegex : this._monthsShortRegex)
    };
    ea.week = function (a) {
        return na(a, this._week.dow, this._week.doy).week
    };
    ea.firstDayOfYear = function () {
        return this._week.doy
    };
    ea.firstDayOfWeek = function () {
        return this._week.dow
    };
    ea.weekdays = function (a, c) {
        return a ?
            b(this._weekdays) ? this._weekdays[a.day()] : this._weekdays[this._weekdays.isFormat.test(c) ? "format" : "standalone"][a.day()] : b(this._weekdays) ? this._weekdays : this._weekdays.standalone
    };
    ea.weekdaysMin = function (a) {
        return a ? this._weekdaysMin[a.day()] : this._weekdaysMin
    };
    ea.weekdaysShort = function (a) {
        return a ? this._weekdaysShort[a.day()] : this._weekdaysShort
    };
    ea.weekdaysParse = function (a, b, c) {
        var d, f, g;
        if (this._weekdaysParseExact) {
            g = a.toLocaleLowerCase();
            if (!this._weekdaysParse) {
                this._weekdaysParse = [];
                this._shortWeekdaysParse = [];
                this._minWeekdaysParse = [];
                for (a = 0; 7 > a; ++a) f = p([2E3, 1]).day(a), this._minWeekdaysParse[a] = this.weekdaysMin(f, "").toLocaleLowerCase(), this._shortWeekdaysParse[a] = this.weekdaysShort(f, "").toLocaleLowerCase(), this._weekdaysParse[a] = this.weekdays(f, "").toLocaleLowerCase()
            }
            return c ? "dddd" === b ? (d = oa.call(this._weekdaysParse, g), -1 !== d ? d : null) : "ddd" === b ? (d = oa.call(this._shortWeekdaysParse, g), -1 !== d ? d : null) : (d = oa.call(this._minWeekdaysParse, g), -1 !== d ? d : null) : "dddd" === b ? (d = oa.call(this._weekdaysParse, g), -1 !==
                d ? d : (d = oa.call(this._shortWeekdaysParse, g), -1 !== d ? d : (d = oa.call(this._minWeekdaysParse, g), -1 !== d ? d : null))) : "ddd" === b ? (d = oa.call(this._shortWeekdaysParse, g), -1 !== d ? d : (d = oa.call(this._weekdaysParse, g), -1 !== d ? d : (d = oa.call(this._minWeekdaysParse, g), -1 !== d ? d : null))) : (d = oa.call(this._minWeekdaysParse, g), -1 !== d ? d : (d = oa.call(this._weekdaysParse, g), -1 !== d ? d : (d = oa.call(this._shortWeekdaysParse, g), -1 !== d ? d : null)))
        }
        this._weekdaysParse || (this._weekdaysParse = [], this._minWeekdaysParse = [], this._shortWeekdaysParse = [], this._fullWeekdaysParse = []);
        for (d = 0; 7 > d; d++)
            if ((f = p([2E3, 1]).day(d), c && !this._fullWeekdaysParse[d] && (this._fullWeekdaysParse[d] = RegExp("^" + this.weekdays(f, "").replace(".", ".?") + "$", "i"), this._shortWeekdaysParse[d] = RegExp("^" + this.weekdaysShort(f, "").replace(".", ".?") + "$", "i"), this._minWeekdaysParse[d] = RegExp("^" + this.weekdaysMin(f, "").replace(".", ".?") + "$", "i")), this._weekdaysParse[d] || (g = "^" + this.weekdays(f, "") + "|^" + this.weekdaysShort(f, "") + "|^" + this.weekdaysMin(f, ""), this._weekdaysParse[d] = RegExp(g.replace(".",
                    ""), "i")), c && "dddd" === b && this._fullWeekdaysParse[d].test(a)) || c && "ddd" === b && this._shortWeekdaysParse[d].test(a) || c && "dd" === b && this._minWeekdaysParse[d].test(a) || !c && this._weekdaysParse[d].test(a)) return d
    };
    ea.weekdaysRegex = function (a) {
        return this._weekdaysParseExact ? (m(this, "_weekdaysRegex") || qa.call(this), a ? this._weekdaysStrictRegex : this._weekdaysRegex) : (m(this, "_weekdaysRegex") || (this._weekdaysRegex = Bb), this._weekdaysStrictRegex && a ? this._weekdaysStrictRegex : this._weekdaysRegex)
    };
    ea.weekdaysShortRegex =
        function (a) {
            return this._weekdaysParseExact ? (m(this, "_weekdaysRegex") || qa.call(this), a ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex) : (m(this, "_weekdaysShortRegex") || (this._weekdaysShortRegex = Bb), this._weekdaysShortStrictRegex && a ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex)
        };
    ea.weekdaysMinRegex = function (a) {
        return this._weekdaysParseExact ? (m(this, "_weekdaysRegex") || qa.call(this), a ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex) : (m(this, "_weekdaysMinRegex") || (this._weekdaysMinRegex =
            Bb), this._weekdaysMinStrictRegex && a ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex)
    };
    ea.isPM = function (a) {
        return "p" === (a + "").toLowerCase().charAt(0)
    };
    ea.meridiem = function (a, b, c) {
        return 11 < a ? c ? "pm" : "PM" : c ? "am" : "AM"
    };
    hb("en", {
        dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/,
        ordinal: function (a) {
            var b = a % 10,
                b = 1 === w(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th";
            return a + b
        }
    });
    a.lang = C("moment.lang is deprecated. Use moment.locale instead.", hb);
    a.langData = C("moment.langData is deprecated. Use moment.localeData instead.",
        Va);
    var Ra = Math.abs,
        Xd = Wa("ms"),
        Yd = Wa("s"),
        Zd = Wa("m"),
        $d = Wa("h"),
        ae = Wa("d"),
        be = Wa("w"),
        ce = Wa("M"),
        de = Wa("y"),
        ee = db("milliseconds"),
        fe = db("seconds"),
        ge = db("minutes"),
        he = db("hours"),
        ie = db("days"),
        je = db("months"),
        ke = db("years"),
        ab = Math.round,
        Oa = {
            ss: 44,
            s: 45,
            m: 45,
            h: 22,
            d: 26,
            M: 11
        },
        gc = Math.abs,
        ba = Gb.prototype;
    ba.isValid = function () {
        return this._isValid
    };
    ba.abs = function () {
        var a = this._data;
        return this._milliseconds = Ra(this._milliseconds), this._days = Ra(this._days), this._months = Ra(this._months), a.milliseconds =
            Ra(a.milliseconds), a.seconds = Ra(a.seconds), a.minutes = Ra(a.minutes), a.hours = Ra(a.hours), a.months = Ra(a.months), a.years = Ra(a.years), this
    };
    ba.add = function (a, b) {
        return Sc(this, a, b, 1)
    };
    ba.subtract = function (a, b) {
        return Sc(this, a, b, -1)
    };
    ba.as = function (a) {
        if (!this.isValid()) return NaN;
        var b, c, d = this._milliseconds;
        if (a = K(a), "month" === a || "year" === a) return b = this._days + d / 864E5, c = this._months + 4800 * b / 146097, "month" === a ? c : c / 12;
        switch (b = this._days + Math.round(146097 * this._months / 4800), a) {
        case "week":
            return b / 7 + d /
                6048E5;
        case "day":
            return b + d / 864E5;
        case "hour":
            return 24 * b + d / 36E5;
        case "minute":
            return 1440 * b + d / 6E4;
        case "second":
            return 86400 * b + d / 1E3;
        case "millisecond":
            return Math.floor(864E5 * b) + d;
        default:
            throw Error("Unknown unit " + a);
        }
    };
    ba.asMilliseconds = Xd;
    ba.asSeconds = Yd;
    ba.asMinutes = Zd;
    ba.asHours = $d;
    ba.asDays = ae;
    ba.asWeeks = be;
    ba.asMonths = ce;
    ba.asYears = de;
    ba.valueOf = function () {
        return this.isValid() ? this._milliseconds + 864E5 * this._days + 2592E6 * (this._months % 12) + 31536E6 * w(this._months / 12) : NaN
    };
    ba._bubble = function () {
        var a,
            b, c, d, f, g = this._milliseconds,
            h = this._days,
            m = this._months,
            n = this._data;
        return 0 <= g && 0 <= h && 0 <= m || 0 >= g && 0 >= h && 0 >= m || (g += 864E5 * (0 > 146097 * m / 4800 + h ? Math.floor(146097 * m / 4800 + h) : Math.ceil(146097 * m / 4800 + h)), h = 0, m = 0), n.milliseconds = g % 1E3, a = A(g / 1E3), n.seconds = a % 60, b = A(a / 60), n.minutes = b % 60, c = A(b / 60), n.hours = c % 24, h += A(c / 24), f = A(4800 * h / 146097), m += f, h -= 0 > 146097 * f / 4800 ? Math.floor(146097 * f / 4800) : Math.ceil(146097 * f / 4800), d = A(m / 12), m %= 12, n.days = h, n.months = m, n.years = d, this
    };
    ba.get = function (a) {
        return a = K(a), this.isValid() ?
            this[a + "s"]() : NaN
    };
    ba.milliseconds = ee;
    ba.seconds = fe;
    ba.minutes = ge;
    ba.hours = he;
    ba.days = ie;
    ba.weeks = function () {
        return A(this.days() / 7)
    };
    ba.months = je;
    ba.years = ke;
    ba.humanize = function (a) {
        if (!this.isValid()) return this.localeData().invalidDate();
        var b = this.localeData(),
            c;
        c = !a;
        var d = Ka(this).abs(),
            f = ab(d.as("s")),
            g = ab(d.as("m")),
            h = ab(d.as("h")),
            m = ab(d.as("d")),
            n = ab(d.as("M")),
            d = ab(d.as("y")),
            f = f <= Oa.ss && ["s", f] || f < Oa.s && ["ss", f] || 1 >= g && ["m"] || g < Oa.m && ["mm", g] || 1 >= h && ["h"] || h < Oa.h && ["hh", h] || 1 >= m && ["d"] ||
            m < Oa.d && ["dd", m] || 1 >= n && ["M"] || n < Oa.M && ["MM", n] || 1 >= d && ["y"] || ["yy", d];
        c = (f[2] = c, f[3] = 0 < +this, f[4] = b, Jd.apply(null, f));
        return a && (c = b.pastFuture(+this, c)), b.postformat(c)
    };
    ba.toISOString = Jb;
    ba.toString = Jb;
    ba.toJSON = Jb;
    ba.locale = Nc;
    ba.localeData = Oc;
    ba.toIsoString = C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", Jb);
    ba.lang = bd;
    I("X", 0, 0, "unix");
    I("x", 0, 0, "valueOf");
    O("x", Pb);
    O("X", /[+-]?\d+(\.\d{1,3})?/);
    L("X", function (a, b, c) {
        c._d = new Date(1E3 * parseFloat(a, 10))
    });
    L("x", function (a, b, c) {
        c._d = new Date(w(a))
    });
    a.version = "2.18.1";
    Dc = ia;
    a.fn = Q;
    a.min = function () {
        var a = [].slice.call(arguments, 0);
        return Hc("isBefore", a)
    };
    a.max = function () {
        var a = [].slice.call(arguments, 0);
        return Hc("isAfter", a)
    };
    a.now = function () {
        return Date.now ? Date.now() : +new Date
    };
    a.utc = p;
    a.unix = function (a) {
        return ia(1E3 * a)
    };
    a.months = function (a, b) {
        return Rc(a, b, "months")
    };
    a.isDate = g;
    a.locale = hb;
    a.invalid = x;
    a.duration = Ka;
    a.isMoment = t;
    a.weekdays = function (a, b, c) {
        return fc(a, b, c, "weekdays")
    };
    a.parseZone =
        function () {
            return ia.apply(null, arguments).parseZone()
        };
    a.localeData = Va;
    a.isDuration = $b;
    a.monthsShort = function (a, b) {
        return Rc(a, b, "monthsShort")
    };
    a.weekdaysMin = function (a, b, c) {
        return fc(a, b, c, "weekdaysMin")
    };
    a.defineLocale = Sb;
    a.updateLocale = function (a, b) {
        if (null != b) {
            var c;
            c = Gc;
            null != ka[a] && (c = ka[a]._config);
            b = G(c, b);
            c = new H(b);
            c.parentLocale = ka[a];
            ka[a] = c;
            hb(a)
        } else null != ka[a] && (null != ka[a].parentLocale ? ka[a] = ka[a].parentLocale : null != ka[a] && delete ka[a]);
        return ka[a]
    };
    a.locales = function () {
        return Md(ka)
    };
    a.weekdaysShort = function (a, b, c) {
        return fc(a, b, c, "weekdaysShort")
    };
    a.normalizeUnits = K;
    a.relativeTimeRounding = function (a) {
        return void 0 === a ? ab : "function" == typeof a && (ab = a, !0)
    };
    a.relativeTimeThreshold = function (a, b) {
        return void 0 !== Oa[a] && (void 0 === b ? Oa[a] : (Oa[a] = b, "s" === a && (Oa.ss = b - 1), !0))
    };
    a.calendarFormat = function (a, b) {
        var c = a.diff(b, "days", !0);
        return -6 > c ? "sameElse" : -1 > c ? "lastWeek" : 0 > c ? "lastDay" : 1 > c ? "sameDay" : 2 > c ? "nextDay" : 7 > c ? "nextWeek" : "sameElse"
    };
    a.prototype = Q;
    a.defineLocale("af", {
        months: "Januarie Februarie Maart April Mei Junie Julie Augustus September Oktober November Desember".split(" "),
        monthsShort: "Jan Feb Mrt Apr Mei Jun Jul Aug Sep Okt Nov Des".split(" "),
        weekdays: "Sondag Maandag Dinsdag Woensdag Donderdag Vrydag Saterdag".split(" "),
        weekdaysShort: "Son Maa Din Woe Don Vry Sat".split(" "),
        weekdaysMin: "So Ma Di Wo Do Vr Sa".split(" "),
        meridiemParse: /vm|nm/i,
        isPM: function (a) {
            return /^nm$/i.test(a)
        },
        meridiem: function (a, b, c) {
            return 12 > a ? c ? "vm" : "VM" : c ? "nm" : "NM"
        },
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Vandag om] LT",
            nextDay: "[Môre om] LT",
            nextWeek: "dddd [om] LT",
            lastDay: "[Gister om] LT",
            lastWeek: "[Laas] dddd [om] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "oor %s",
            past: "%s gelede",
            s: "'n paar sekondes",
            m: "'n minuut",
            mm: "%d minute",
            h: "'n uur",
            hh: "%d ure",
            d: "'n dag",
            dd: "%d dae",
            M: "'n maand",
            MM: "%d maande",
            y: "'n jaar",
            yy: "%d jaar"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
        ordinal: function (a) {
            return a + (1 === a || 8 === a || 20 <= a ? "ste" : "de")
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("ar-dz", {
        months: "جانفي فيفري مارس أفريل ماي جوان جويلية أوت سبتمبر أكتوبر نوفمبر ديسمبر".split(" "),
        monthsShort: "جانفي فيفري مارس أفريل ماي جوان جويلية أوت سبتمبر أكتوبر نوفمبر ديسمبر".split(" "),
        weekdays: "الأحد الإثنين الثلاثاء الأربعاء الخميس الجمعة السبت".split(" "),
        weekdaysShort: "احد اثنين ثلاثاء اربعاء خميس جمعة سبت".split(" "),
        weekdaysMin: "أح إث ثلا أر خم جم سب".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[اليوم على الساعة] LT",
            nextDay: "[غدا على الساعة] LT",
            nextWeek: "dddd [على الساعة] LT",
            lastDay: "[أمس على الساعة] LT",
            lastWeek: "dddd [على الساعة] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "في %s",
            past: "منذ %s",
            s: "ثوان",
            m: "دقيقة",
            mm: "%d دقائق",
            h: "ساعة",
            hh: "%d ساعات",
            d: "يوم",
            dd: "%d أيام",
            M: "شهر",
            MM: "%d أشهر",
            y: "سنة",
            yy: "%d سنوات"
        },
        week: {
            dow: 0,
            doy: 4
        }
    });
    a.defineLocale("ar-kw", {
        months: "يناير فبراير مارس أبريل ماي يونيو يوليوز غشت شتنبر أكتوبر نونبر دجنبر".split(" "),
        monthsShort: "يناير فبراير مارس أبريل ماي يونيو يوليوز غشت شتنبر أكتوبر نونبر دجنبر".split(" "),
        weekdays: "الأحد الإتنين الثلاثاء الأربعاء الخميس الجمعة السبت".split(" "),
        weekdaysShort: "احد اتنين ثلاثاء اربعاء خميس جمعة سبت".split(" "),
        weekdaysMin: "حنثرخجس".split(""),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[اليوم على الساعة] LT",
            nextDay: "[غدا على الساعة] LT",
            nextWeek: "dddd [على الساعة] LT",
            lastDay: "[أمس على الساعة] LT",
            lastWeek: "dddd [على الساعة] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "في %s",
            past: "منذ %s",
            s: "ثوان",
            m: "دقيقة",
            mm: "%d دقائق",
            h: "ساعة",
            hh: "%d ساعات",
            d: "يوم",
            dd: "%d أيام",
            M: "شهر",
            MM: "%d أشهر",
            y: "سنة",
            yy: "%d سنوات"
        },
        week: {
            dow: 0,
            doy: 12
        }
    });
    var le = {
            1: "1",
            2: "2",
            3: "3",
            4: "4",
            5: "5",
            6: "6",
            7: "7",
            8: "8",
            9: "9",
            "0": "0"
        },
        dd = function (a) {
            return 0 === a ? 0 : 1 === a ? 1 : 2 === a ? 2 : 3 <= a % 100 && 10 >= a % 100 ? 3 : 11 <= a % 100 ? 4 : 5
        },
        me = {
            s: ["أقل من ثانية", "ثانية واحدة", ["ثانيتان", "ثانيتين"], "%d ثوان", "%d ثانية", "%d ثانية"],
            m: ["أقل من دقيقة", "دقيقة واحدة", ["دقيقتان", "دقيقتين"], "%d دقائق", "%d دقيقة", "%d دقيقة"],
            h: ["أقل من ساعة", "ساعة واحدة", ["ساعتان", "ساعتين"],
                "%d ساعات", "%d ساعة", "%d ساعة"
            ],
            d: ["أقل من يوم", "يوم واحد", ["يومان", "يومين"], "%d أيام", "%d يومًا", "%d يوم"],
            M: ["أقل من شهر", "شهر واحد", ["شهران", "شهرين"],
                "%d أشهر", "%d شهرا", "%d شهر"
            ],
            y: ["أقل من عام", "عام واحد", ["عامان", "عامين"], "%d أعوام", "%d عامًا", "%d عام"]
        },
        Ha = function (a) {
            return function (b, c, d, f) {
                d = dd(b);
                f = me[a][dd(b)];
                return 2 === d && (f = f[c ? 0 : 1]), f.replace(/%d/i, b)
            }
        },
        ed = "يناير فبراير مارس أبريل مايو يونيو يوليو أغسطس سبتمبر أكتوبر نوفمبر ديسمبر".split(" ");
    a.defineLocale("ar-ly", {
        months: ed,
        monthsShort: ed,
        weekdays: "الأحد الإثنين الثلاثاء الأربعاء الخميس الجمعة السبت".split(" "),
        weekdaysShort: "أحد إثنين ثلاثاء أربعاء خميس جمعة سبت".split(" "),
        weekdaysMin: "حنثرخجس".split(""),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "D/‏M/‏YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        meridiemParse: /\u0635|\u0645/,
        isPM: function (a) {
            return "م" === a
        },
        meridiem: function (a, b, c) {
            return 12 > a ? "ص" : "م"
        },
        calendar: {
            sameDay: "[اليوم عند الساعة] LT",
            nextDay: "[غدًا عند الساعة] LT",
            nextWeek: "dddd [عند الساعة] LT",
            lastDay: "[أمس عند الساعة] LT",
            lastWeek: "dddd [عند الساعة] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "بعد %s",
            past: "منذ %s",
            s: Ha("s"),
            m: Ha("m"),
            mm: Ha("m"),
            h: Ha("h"),
            hh: Ha("h"),
            d: Ha("d"),
            dd: Ha("d"),
            M: Ha("M"),
            MM: Ha("M"),
            y: Ha("y"),
            yy: Ha("y")
        },
        preparse: function (a) {
            return a.replace(/\u200f/g, "").replace(/\u060c/g,
                ",")
        },
        postformat: function (a) {
            return a.replace(/\d/g, function (a) {
                return le[a]
            }).replace(/,/g, "،")
        },
        week: {
            dow: 6,
            doy: 12
        }
    });
    a.defineLocale("ar-ma", {
        months: "يناير فبراير مارس أبريل ماي يونيو يوليوز غشت شتنبر أكتوبر نونبر دجنبر".split(" "),
        monthsShort: "يناير فبراير مارس أبريل ماي يونيو يوليوز غشت شتنبر أكتوبر نونبر دجنبر".split(" "),
        weekdays: "الأحد الإتنين الثلاثاء الأربعاء الخميس الجمعة السبت".split(" "),
        weekdaysShort: "احد اتنين ثلاثاء اربعاء خميس جمعة سبت".split(" "),
        weekdaysMin: "حنثرخجس".split(""),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[اليوم على الساعة] LT",
            nextDay: "[غدا على الساعة] LT",
            nextWeek: "dddd [على الساعة] LT",
            lastDay: "[أمس على الساعة] LT",
            lastWeek: "dddd [على الساعة] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "في %s",
            past: "منذ %s",
            s: "ثوان",
            m: "دقيقة",
            mm: "%d دقائق",
            h: "ساعة",
            hh: "%d ساعات",
            d: "يوم",
            dd: "%d أيام",
            M: "شهر",
            MM: "%d أشهر",
            y: "سنة",
            yy: "%d سنوات"
        },
        week: {
            dow: 6,
            doy: 12
        }
    });
    var ne = {
            1: "١",
            2: "٢",
            3: "٣",
            4: "٤",
            5: "٥",
            6: "٦",
            7: "٧",
            8: "٨",
            9: "٩",
            "0": "٠"
        },
        oe = {
            "١": "1",
            "٢": "2",
            "٣": "3",
            "٤": "4",
            "٥": "5",
            "٦": "6",
            "٧": "7",
            "٨": "8",
            "٩": "9",
            "٠": "0"
        };
    a.defineLocale("ar-sa", {
        months: "يناير فبراير مارس أبريل مايو يونيو يوليو أغسطس سبتمبر أكتوبر نوفمبر ديسمبر".split(" "),
        monthsShort: "يناير فبراير مارس أبريل مايو يونيو يوليو أغسطس سبتمبر أكتوبر نوفمبر ديسمبر".split(" "),
        weekdays: "الأحد الإثنين الثلاثاء الأربعاء الخميس الجمعة السبت".split(" "),
        weekdaysShort: "أحد إثنين ثلاثاء أربعاء خميس جمعة سبت".split(" "),
        weekdaysMin: "حنثرخجس".split(""),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        meridiemParse: /\u0635|\u0645/,
        isPM: function (a) {
            return "م" === a
        },
        meridiem: function (a, b, c) {
            return 12 > a ? "ص" : "م"
        },
        calendar: {
            sameDay: "[اليوم على الساعة] LT",
            nextDay: "[غدا على الساعة] LT",
            nextWeek: "dddd [على الساعة] LT",
            lastDay: "[أمس على الساعة] LT",
            lastWeek: "dddd [على الساعة] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "في %s",
            past: "منذ %s",
            s: "ثوان",
            m: "دقيقة",
            mm: "%d دقائق",
            h: "ساعة",
            hh: "%d ساعات",
            d: "يوم",
            dd: "%d أيام",
            M: "شهر",
            MM: "%d أشهر",
            y: "سنة",
            yy: "%d سنوات"
        },
        preparse: function (a) {
            return a.replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g, function (a) {
                return oe[a]
            }).replace(/\u060c/g, ",")
        },
        postformat: function (a) {
            return a.replace(/\d/g, function (a) {
                return ne[a]
            }).replace(/,/g, "،")
        },
        week: {
            dow: 0,
            doy: 6
        }
    });
    a.defineLocale("ar-tn", {
        months: "جانفي فيفري مارس أفريل ماي جوان جويلية أوت سبتمبر أكتوبر نوفمبر ديسمبر".split(" "),
        monthsShort: "جانفي فيفري مارس أفريل ماي جوان جويلية أوت سبتمبر أكتوبر نوفمبر ديسمبر".split(" "),
        weekdays: "الأحد الإثنين الثلاثاء الأربعاء الخميس الجمعة السبت".split(" "),
        weekdaysShort: "أحد إثنين ثلاثاء أربعاء خميس جمعة سبت".split(" "),
        weekdaysMin: "حنثرخجس".split(""),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[اليوم على الساعة] LT",
            nextDay: "[غدا على الساعة] LT",
            nextWeek: "dddd [على الساعة] LT",
            lastDay: "[أمس على الساعة] LT",
            lastWeek: "dddd [على الساعة] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "في %s",
            past: "منذ %s",
            s: "ثوان",
            m: "دقيقة",
            mm: "%d دقائق",
            h: "ساعة",
            hh: "%d ساعات",
            d: "يوم",
            dd: "%d أيام",
            M: "شهر",
            MM: "%d أشهر",
            y: "سنة",
            yy: "%d سنوات"
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    var pe = {
            1: "١",
            2: "٢",
            3: "٣",
            4: "٤",
            5: "٥",
            6: "٦",
            7: "٧",
            8: "٨",
            9: "٩",
            "0": "٠"
        },
        qe = {
            "١": "1",
            "٢": "2",
            "٣": "3",
            "٤": "4",
            "٥": "5",
            "٦": "6",
            "٧": "7",
            "٨": "8",
            "٩": "9",
            "٠": "0"
        },
        fd = function (a) {
            return 0 === a ? 0 : 1 === a ? 1 : 2 === a ? 2 : 3 <= a % 100 && 10 >= a % 100 ? 3 : 11 <= a % 100 ? 4 : 5
        },
        re = {
            s: ["أقل من ثانية", "ثانية واحدة", ["ثانيتان", "ثانيتين"], "%d ثوان", "%d ثانية", "%d ثانية"],
            m: ["أقل من دقيقة", "دقيقة واحدة",
                ["دقيقتان", "دقيقتين"], "%d دقائق", "%d دقيقة", "%d دقيقة"
            ],
            h: ["أقل من ساعة", "ساعة واحدة", ["ساعتان", "ساعتين"], "%d ساعات", "%d ساعة", "%d ساعة"],
            d: ["أقل من يوم",
                "يوم واحد", ["يومان", "يومين"], "%d أيام", "%d يومًا", "%d يوم"
            ],
            M: ["أقل من شهر", "شهر واحد", ["شهران", "شهرين"], "%d أشهر", "%d شهرا", "%d شهر"],
            y: ["أقل من عام",
                "عام واحد", ["عامان", "عامين"], "%d أعوام", "%d عامًا", "%d عام"
            ]
        },
        Ia = function (a) {
            return function (b, c, d, f) {
                d = fd(b);
                f = re[a][fd(b)];
                return 2 === d && (f = f[c ? 0 : 1]), f.replace(/%d/i, b)
            }
        },
        gd = "كانون الثاني يناير;شباط فبراير;آذار مارس;نيسان أبريل;أيار مايو;حزيران يونيو;تموز يوليو;آب أغسطس;أيلول سبتمبر;تشرين الأول أكتوبر;تشرين الثاني نوفمبر;كانون الأول ديسمبر".split(";");
    a.defineLocale("ar", {
        months: gd,
        monthsShort: gd,
        weekdays: "الأحد الإثنين الثلاثاء الأربعاء الخميس الجمعة السبت".split(" "),
        weekdaysShort: "أحد إثنين ثلاثاء أربعاء خميس جمعة سبت".split(" "),
        weekdaysMin: "حنثرخجس".split(""),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "D/‏M/‏YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        meridiemParse: /\u0635|\u0645/,
        isPM: function (a) {
            return "م" === a
        },
        meridiem: function (a, b, c) {
            return 12 > a ? "ص" : "م"
        },
        calendar: {
            sameDay: "[اليوم عند الساعة] LT",
            nextDay: "[غدًا عند الساعة] LT",
            nextWeek: "dddd [عند الساعة] LT",
            lastDay: "[أمس عند الساعة] LT",
            lastWeek: "dddd [عند الساعة] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "بعد %s",
            past: "منذ %s",
            s: Ia("s"),
            m: Ia("m"),
            mm: Ia("m"),
            h: Ia("h"),
            hh: Ia("h"),
            d: Ia("d"),
            dd: Ia("d"),
            M: Ia("M"),
            MM: Ia("M"),
            y: Ia("y"),
            yy: Ia("y")
        },
        preparse: function (a) {
            return a.replace(/\u200f/g, "").replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g,
                function (a) {
                    return qe[a]
                }).replace(/\u060c/g, ",")
        },
        postformat: function (a) {
            return a.replace(/\d/g, function (a) {
                return pe[a]
            }).replace(/,/g, "،")
        },
        week: {
            dow: 6,
            doy: 12
        }
    });
    var lc = {
        1: "-inci",
        5: "-inci",
        8: "-inci",
        70: "-inci",
        80: "-inci",
        2: "-nci",
        7: "-nci",
        20: "-nci",
        50: "-nci",
        3: "-üncü",
        4: "-üncü",
        100: "-üncü",
        6: "-ncı",
        9: "-uncu",
        10: "-uncu",
        30: "-uncu",
        60: "-ıncı",
        90: "-ıncı"
    };
    a.defineLocale("az", {
        months: "yanvar fevral mart aprel may iyun iyul avqust sentyabr oktyabr noyabr dekabr".split(" "),
        monthsShort: "yan fev mar apr may iyn iyl avq sen okt noy dek".split(" "),
        weekdays: "Bazar;Bazar ertəsi;Çərşənbə axşamı;Çərşənbə;Cümə axşamı;Cümə;Şənbə".split(";"),
        weekdaysShort: "Baz BzE ÇAx Çər CAx Cüm Şən".split(" "),
        weekdaysMin: "Bz BE ÇA Çə CA Cü Şə".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[bugün saat] LT",
            nextDay: "[sabah saat] LT",
            nextWeek: "[gələn həftə] dddd [saat] LT",
            lastDay: "[dünən] LT",
            lastWeek: "[keçən həftə] dddd [saat] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s sonra",
            past: "%s əvvəl",
            s: "birneçə saniyyə",
            m: "bir dəqiqə",
            mm: "%d dəqiqə",
            h: "bir saat",
            hh: "%d saat",
            d: "bir gün",
            dd: "%d gün",
            M: "bir ay",
            MM: "%d ay",
            y: "bir il",
            yy: "%d il"
        },
        meridiemParse: /gec\u0259|s\u0259h\u0259r|g\u00fcnd\u00fcz|ax\u015fam/,
        isPM: function (a) {
            return /^(g\u00fcnd\u00fcz|ax\u015fam)$/.test(a)
        },
        meridiem: function (a, b, c) {
            return 4 > a ? "gecə" : 12 > a ? "səhər" : 17 > a ? "gündüz" : "axşam"
        },
        dayOfMonthOrdinalParse: /\d{1,2}-(\u0131nc\u0131|inci|nci|\u00fcnc\u00fc|nc\u0131|uncu)/,
        ordinal: function (a) {
            if (0 === a) return a + "-ıncı";
            var b = a % 10;
            return a + (lc[b] || lc[a % 100 - b] || lc[100 <= a ? 100 : null])
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("be", {
        months: {
            format: "студзеня лютага сакавіка красавіка траўня чэрвеня ліпеня жніўня верасня кастрычніка лістапада снежня".split(" "),
            standalone: "студзень люты сакавік красавік травень чэрвень ліпень жнівень верасень кастрычнік лістапад снежань".split(" ")
        },
        monthsShort: "студ лют сак крас трав чэрв ліп жнів вер каст ліст снеж".split(" "),
        weekdays: {
            format: "нядзелю панядзелак аўторак сераду чацвер пятніцу суботу".split(" "),
            standalone: "нядзеля панядзелак аўторак серада чацвер пятніца субота".split(" "),
            isFormat: /\[ ?[\u0412\u0432] ?(?:\u043c\u0456\u043d\u0443\u043b\u0443\u044e|\u043d\u0430\u0441\u0442\u0443\u043f\u043d\u0443\u044e)? ?\] ?dddd/
        },
        weekdaysShort: "нд пн ат ср чц пт сб".split(" "),
        weekdaysMin: "нд пн ат ср чц пт сб".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D MMMM YYYY г.",
            LLL: "D MMMM YYYY г., HH:mm",
            LLLL: "dddd, D MMMM YYYY г., HH:mm"
        },
        calendar: {
            sameDay: "[Сёння ў] LT",
            nextDay: "[Заўтра ў] LT",
            lastDay: "[Учора ў] LT",
            nextWeek: function () {
                return "[У] dddd [ў] LT"
            },
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                case 3:
                case 5:
                case 6:
                    return "[У мінулую] dddd [ў] LT";
                case 1:
                case 2:
                case 4:
                    return "[У мінулы] dddd [ў] LT"
                }
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "праз %s",
            past: "%s таму",
            s: "некалькі секунд",
            m: eb,
            mm: eb,
            h: eb,
            hh: eb,
            d: "дзень",
            dd: eb,
            M: "месяц",
            MM: eb,
            y: "год",
            yy: eb
        },
        meridiemParse: /\u043d\u043e\u0447\u044b|\u0440\u0430\u043d\u0456\u0446\u044b|\u0434\u043d\u044f|\u0432\u0435\u0447\u0430\u0440\u0430/,
        isPM: function (a) {
            return /^(\u0434\u043d\u044f|\u0432\u0435\u0447\u0430\u0440\u0430)$/.test(a)
        },
        meridiem: function (a, b, c) {
            return 4 > a ? "ночы" : 12 > a ? "раніцы" : 17 > a ? "дня" : "вечара"
        },
        dayOfMonthOrdinalParse: /\d{1,2}-(\u0456|\u044b|\u0433\u0430)/,
        ordinal: function (a,
            b) {
            switch (b) {
            case "M":
            case "d":
            case "DDD":
            case "w":
            case "W":
                return 2 !== a % 10 && 3 !== a % 10 || 12 === a % 100 || 13 === a % 100 ? a + "-ы" : a + "-і";
            case "D":
                return a + "-га";
            default:
                return a
            }
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("bg", {
        months: "януари февруари март април май юни юли август септември октомври ноември декември".split(" "),
        monthsShort: "янр фев мар апр май юни юли авг сеп окт ное дек".split(" "),
        weekdays: "неделя понеделник вторник сряда четвъртък петък събота".split(" "),
        weekdaysShort: "нед пон вто сря чет пет съб".split(" "),
        weekdaysMin: "нд пн вт ср чт пт сб".split(" "),
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "D.MM.YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY H:mm",
            LLLL: "dddd, D MMMM YYYY H:mm"
        },
        calendar: {
            sameDay: "[Днес в] LT",
            nextDay: "[Утре в] LT",
            nextWeek: "dddd [в] LT",
            lastDay: "[Вчера в] LT",
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                case 3:
                case 6:
                    return "[В изминалата] dddd [в] LT";
                case 1:
                case 2:
                case 4:
                case 5:
                    return "[В изминалия] dddd [в] LT"
                }
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "след %s",
            past: "преди %s",
            s: "няколко секунди",
            m: "минута",
            mm: "%d минути",
            h: "час",
            hh: "%d часа",
            d: "ден",
            dd: "%d дни",
            M: "месец",
            MM: "%d месеца",
            y: "година",
            yy: "%d години"
        },
        dayOfMonthOrdinalParse: /\d{1,2}-(\u0435\u0432|\u0435\u043d|\u0442\u0438|\u0432\u0438|\u0440\u0438|\u043c\u0438)/,
        ordinal: function (a) {
            var b = a % 10,
                c = a % 100;
            return 0 === a ? a + "-ев" : 0 === c ? a + "-ен" : 10 < c && 20 > c ? a + "-ти" : 1 === b ? a + "-ви" : 2 === b ? a + "-ри" : 7 === b || 8 === b ? a + "-ми" : a + "-ти"
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    var se = {
            1: "১",
            2: "২",
            3: "৩",
            4: "৪",
            5: "৫",
            6: "৬",
            7: "৭",
            8: "৮",
            9: "৯",
            "0": "০"
        },
        te = {
            "১": "1",
            "২": "2",
            "৩": "3",
            "৪": "4",
            "৫": "5",
            "৬": "6",
            "৭": "7",
            "৮": "8",
            "৯": "9",
            "০": "0"
        };
    a.defineLocale("bn", {
        months: "জানুয়ারী ফেব্রুয়ারি মার্চ এপ্রিল মে জুন জুলাই আগস্ট সেপ্টেম্বর অক্টোবর নভেম্বর ডিসেম্বর".split(" "),
        monthsShort: "জানু ফেব মার্চ এপ্র মে জুন জুল আগ সেপ্ট অক্টো নভে ডিসে".split(" "),
        weekdays: "রবিবার সোমবার মঙ্গলবার বুধবার বৃহস্পতিবার শুক্রবার শনিবার".split(" "),
        weekdaysShort: "রবি সোম মঙ্গল বুধ বৃহস্পতি শুক্র শনি".split(" "),
        weekdaysMin: "রবি সোম মঙ্গ বুধ বৃহঃ শুক্র শনি".split(" "),
        longDateFormat: {
            LT: "A h:mm সময়",
            LTS: "A h:mm:ss সময়",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY, A h:mm সময়",
            LLLL: "dddd, D MMMM YYYY, A h:mm সময়"
        },
        calendar: {
            sameDay: "[আজ] LT",
            nextDay: "[আগামীকাল] LT",
            nextWeek: "dddd, LT",
            lastDay: "[গতকাল] LT",
            lastWeek: "[গত] dddd, LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s পরে",
            past: "%s আগে",
            s: "কয়েক সেকেন্ড",
            m: "এক মিনিট",
            mm: "%d মিনিট",
            h: "এক ঘন্টা",
            hh: "%d ঘন্টা",
            d: "এক দিন",
            dd: "%d দিন",
            M: "এক মাস",
            MM: "%d মাস",
            y: "এক বছর",
            yy: "%d বছর"
        },
        preparse: function (a) {
            return a.replace(/[\u09e7\u09e8\u09e9\u09ea\u09eb\u09ec\u09ed\u09ee\u09ef\u09e6]/g, function (a) {
                return te[a]
            })
        },
        postformat: function (a) {
            return a.replace(/\d/g, function (a) {
                return se[a]
            })
        },
        meridiemParse: /\u09b0\u09be\u09a4|\u09b8\u0995\u09be\u09b2|\u09a6\u09c1\u09aa\u09c1\u09b0|\u09ac\u09bf\u0995\u09be\u09b2|\u09b0\u09be\u09a4/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "রাত" === b && 4 <= a || "দুপুর" === b && 5 > a || "বিকাল" === b ? a + 12 : a
        },
        meridiem: function (a, b, c) {
            return 4 > a ? "রাত" : 10 > a ? "সকাল" : 17 > a ? "দুপুর" : 20 > a ? "বিকাল" : "রাত"
        },
        week: {
            dow: 0,
            doy: 6
        }
    });
    var ue = {
            1: "༡",
            2: "༢",
            3: "༣",
            4: "༤",
            5: "༥",
            6: "༦",
            7: "༧",
            8: "༨",
            9: "༩",
            "0": "༠"
        },
        ve = {
            "༡": "1",
            "༢": "2",
            "༣": "3",
            "༤": "4",
            "༥": "5",
            "༦": "6",
            "༧": "7",
            "༨": "8",
            "༩": "9",
            "༠": "0"
        };
    a.defineLocale("bo", {
        months: "ཟླ་བ་དང་པོ ཟླ་བ་གཉིས་པ ཟླ་བ་གསུམ་པ ཟླ་བ་བཞི་པ ཟླ་བ་ལྔ་པ ཟླ་བ་དྲུག་པ ཟླ་བ་བདུན་པ ཟླ་བ་བརྒྱད་པ ཟླ་བ་དགུ་པ ཟླ་བ་བཅུ་པ ཟླ་བ་བཅུ་གཅིག་པ ཟླ་བ་བཅུ་གཉིས་པ".split(" "),
        monthsShort: "ཟླ་བ་དང་པོ ཟླ་བ་གཉིས་པ ཟླ་བ་གསུམ་པ ཟླ་བ་བཞི་པ ཟླ་བ་ལྔ་པ ཟླ་བ་དྲུག་པ ཟླ་བ་བདུན་པ ཟླ་བ་བརྒྱད་པ ཟླ་བ་དགུ་པ ཟླ་བ་བཅུ་པ ཟླ་བ་བཅུ་གཅིག་པ ཟླ་བ་བཅུ་གཉིས་པ".split(" "),
        weekdays: "གཟའ་ཉི་མ་ གཟའ་ཟླ་བ་ གཟའ་མིག་དམར་ གཟའ་ལྷག་པ་ གཟའ་ཕུར་བུ གཟའ་པ་སངས་ གཟའ་སྤེན་པ་".split(" "),
        weekdaysShort: "ཉི་མ་ ཟླ་བ་ མིག་དམར་ ལྷག་པ་ ཕུར་བུ པ་སངས་ སྤེན་པ་".split(" "),
        weekdaysMin: "ཉི་མ་ ཟླ་བ་ མིག་དམར་ ལྷག་པ་ ཕུར་བུ པ་སངས་ སྤེན་པ་".split(" "),
        longDateFormat: {
            LT: "A h:mm",
            LTS: "A h:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY, A h:mm",
            LLLL: "dddd, D MMMM YYYY, A h:mm"
        },
        calendar: {
            sameDay: "[དི་རིང] LT",
            nextDay: "[སང་ཉིན] LT",
            nextWeek: "[བདུན་ཕྲག་རྗེས་མ], LT",
            lastDay: "[ཁ་སང] LT",
            lastWeek: "[བདུན་ཕྲག་མཐའ་མ] dddd, LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s ལ་",
            past: "%s སྔན་ལ",
            s: "ལམ་སང",
            m: "སྐར་མ་གཅིག",
            mm: "%d སྐར་མ",
            h: "ཆུ་ཚོད་གཅིག",
            hh: "%d ཆུ་ཚོད",
            d: "ཉིན་གཅིག",
            dd: "%d ཉིན་",
            M: "ཟླ་བ་གཅིག",
            MM: "%d ཟླ་བ",
            y: "ལོ་གཅིག",
            yy: "%d ལོ"
        },
        preparse: function (a) {
            return a.replace(/[\u0f21\u0f22\u0f23\u0f24\u0f25\u0f26\u0f27\u0f28\u0f29\u0f20]/g, function (a) {
                return ve[a]
            })
        },
        postformat: function (a) {
            return a.replace(/\d/g, function (a) {
                return ue[a]
            })
        },
        meridiemParse: /\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c|\u0f5e\u0f7c\u0f42\u0f66\u0f0b\u0f40\u0f66|\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f74\u0f44|\u0f51\u0f42\u0f7c\u0f44\u0f0b\u0f51\u0f42|\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "མཚན་མོ" === b && 4 <= a || "ཉིན་གུང" === b && 5 > a || "དགོང་དག" === b ? a + 12 : a
        },
        meridiem: function (a, b, c) {
            return 4 > a ? "མཚན་མོ" : 10 > a ? "ཞོགས་ཀས" : 17 > a ? "ཉིན་གུང" : 20 > a ? "དགོང་དག" : "མཚན་མོ"
        },
        week: {
            dow: 0,
            doy: 6
        }
    });
    a.defineLocale("br", {
        months: "Genver C'hwevrer Meurzh Ebrel Mae Mezheven Gouere Eost Gwengolo Here Du Kerzu".split(" "),
        monthsShort: "Gen C'hwe Meu Ebr Mae Eve Gou Eos Gwe Her Du Ker".split(" "),
        weekdays: "Sul Lun Meurzh Merc'her Yaou Gwener Sadorn".split(" "),
        weekdaysShort: "Sul Lun Meu Mer Yao Gwe Sad".split(" "),
        weekdaysMin: "Su Lu Me Mer Ya Gw Sa".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "h[e]mm A",
            LTS: "h[e]mm:ss A",
            L: "DD/MM/YYYY",
            LL: "D [a viz] MMMM YYYY",
            LLL: "D [a viz] MMMM YYYY h[e]mm A",
            LLLL: "dddd, D [a viz] MMMM YYYY h[e]mm A"
        },
        calendar: {
            sameDay: "[Hiziv da] LT",
            nextDay: "[Warc'hoazh da] LT",
            nextWeek: "dddd [da] LT",
            lastDay: "[Dec'h da] LT",
            lastWeek: "dddd [paset da] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "a-benn %s",
            past: "%s 'zo",
            s: "un nebeud segondennoù",
            m: "ur vunutenn",
            mm: hc,
            h: "un eur",
            hh: "%d eur",
            d: "un devezh",
            dd: hc,
            M: "ur miz",
            MM: hc,
            y: "ur bloaz",
            yy: function (a) {
                switch (Tc(a)) {
                case 1:
                case 3:
                case 4:
                case 5:
                case 9:
                    return a + " bloaz";
                default:
                    return a + " vloaz"
                }
            }
        },
        dayOfMonthOrdinalParse: /\d{1,2}(a\u00f1|vet)/,
        ordinal: function (a) {
            return a +
                (1 === a ? "añ" : "vet")
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("bs", {
        months: "januar februar mart april maj juni juli august septembar oktobar novembar decembar".split(" "),
        monthsShort: "jan. feb. mar. apr. maj. jun. jul. aug. sep. okt. nov. dec.".split(" "),
        monthsParseExact: !0,
        weekdays: "nedjelja ponedjeljak utorak srijeda četvrtak petak subota".split(" "),
        weekdaysShort: "ned. pon. uto. sri. čet. pet. sub.".split(" "),
        weekdaysMin: "ne po ut sr če pe su".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY H:mm",
            LLLL: "dddd, D. MMMM YYYY H:mm"
        },
        calendar: {
            sameDay: "[danas u] LT",
            nextDay: "[sutra u] LT",
            nextWeek: function () {
                switch (this.day()) {
                case 0:
                    return "[u] [nedjelju] [u] LT";
                case 3:
                    return "[u] [srijedu] [u] LT";
                case 6:
                    return "[u] [subotu] [u] LT";
                case 1:
                case 2:
                case 4:
                case 5:
                    return "[u] dddd [u] LT"
                }
            },
            lastDay: "[jučer u] LT",
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                case 3:
                    return "[prošlu] dddd [u] LT";
                case 6:
                    return "[prošle] [subote] [u] LT";
                case 1:
                case 2:
                case 4:
                case 5:
                    return "[prošli] dddd [u] LT"
                }
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "za %s",
            past: "prije %s",
            s: "par sekundi",
            m: fb,
            mm: fb,
            h: fb,
            hh: fb,
            d: "dan",
            dd: fb,
            M: "mjesec",
            MM: fb,
            y: "godinu",
            yy: fb
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("ca", {
        months: {
            standalone: "gener febrer març abril maig juny juliol agost setembre octubre novembre desembre".split(" "),
            format: "de gener;de febrer;de març;d'abril;de maig;de juny;de juliol;d'agost;de setembre;d'octubre;de novembre;de desembre".split(";"),
            isFormat: /D[oD]?(\s)+MMMM/
        },
        monthsShort: "gen. febr. març abr. maig juny jul. ag. set. oct. nov. des.".split(" "),
        monthsParseExact: !0,
        weekdays: "diumenge dilluns dimarts dimecres dijous divendres dissabte".split(" "),
        weekdaysShort: "dg. dl. dt. dc. dj. dv. ds.".split(" "),
        weekdaysMin: "Dg Dl Dt Dc Dj Dv Ds".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD/MM/YYYY",
            LL: "[el] D MMMM [de] YYYY",
            ll: "D MMM YYYY",
            LLL: "[el] D MMMM [de] YYYY [a les] H:mm",
            lll: "D MMM YYYY, H:mm",
            LLLL: "[el] dddd D MMMM [de] YYYY [a les] H:mm",
            llll: "ddd D MMM YYYY, H:mm"
        },
        calendar: {
            sameDay: function () {
                return "[avui a " + (1 !== this.hours() ? "les" : "la") + "] LT"
            },
            nextDay: function () {
                return "[demà a " + (1 !== this.hours() ? "les" : "la") + "] LT"
            },
            nextWeek: function () {
                return "dddd [a " + (1 !== this.hours() ? "les" : "la") + "] LT"
            },
            lastDay: function () {
                return "[ahir a " + (1 !== this.hours() ? "les" : "la") + "] LT"
            },
            lastWeek: function () {
                return "[el] dddd [passat a " + (1 !== this.hours() ? "les" : "la") + "] LT"
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "d'aquí %s",
            past: "fa %s",
            s: "uns segons",
            m: "un minut",
            mm: "%d minuts",
            h: "una hora",
            hh: "%d hores",
            d: "un dia",
            dd: "%d dies",
            M: "un mes",
            MM: "%d mesos",
            y: "un any",
            yy: "%d anys"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(r|n|t|\u00e8|a)/,
        ordinal: function (a, b) {
            return a + (1 === a ? "r" : 2 === a ? "n" : 3 === a ? "r" : 4 === a ? "t" : "è")
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    var mc = "leden únor březen duben květen červen červenec srpen září říjen listopad prosinec".split(" "),
        nc = "led úno bře dub kvě čvn čvc srp zář říj lis pro".split(" ");
    a.defineLocale("cs", {
        months: mc,
        monthsShort: nc,
        monthsParse: function (a, b) {
            var c, d = [];
            for (c = 0; 12 > c; c++) d[c] = RegExp("^" + a[c] + "$|^" + b[c] + "$", "i");
            return d
        }(mc, nc),
        shortMonthsParse: function (a) {
            var b, c = [];
            for (b = 0; 12 > b; b++) c[b] = RegExp("^" + a[b] + "$", "i");
            return c
        }(nc),
        longMonthsParse: function (a) {
            var b, c = [];
            for (b = 0; 12 > b; b++) c[b] = RegExp("^" + a[b] + "$", "i");
            return c
        }(mc),
        weekdays: "neděle pondělí úterý středa čtvrtek pátek sobota".split(" "),
        weekdaysShort: "ne po út st čt pá so".split(" "),
        weekdaysMin: "ne po út st čt pá so".split(" "),
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY H:mm",
            LLLL: "dddd D. MMMM YYYY H:mm",
            l: "D. M. YYYY"
        },
        calendar: {
            sameDay: "[dnes v] LT",
            nextDay: "[zítra v] LT",
            nextWeek: function () {
                switch (this.day()) {
                case 0:
                    return "[v neděli v] LT";
                case 1:
                case 2:
                    return "[v] dddd [v] LT";
                case 3:
                    return "[ve středu v] LT";
                case 4:
                    return "[ve čtvrtek v] LT";
                case 5:
                    return "[v pátek v] LT";
                case 6:
                    return "[v sobotu v] LT"
                }
            },
            lastDay: "[včera v] LT",
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                    return "[minulou neděli v] LT";
                case 1:
                case 2:
                    return "[minulé] dddd [v] LT";
                case 3:
                    return "[minulou středu v] LT";
                case 4:
                case 5:
                    return "[minulý] dddd [v] LT";
                case 6:
                    return "[minulou sobotu v] LT"
                }
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "za %s",
            past: "před %s",
            s: za,
            m: za,
            mm: za,
            h: za,
            hh: za,
            d: za,
            dd: za,
            M: za,
            MM: za,
            y: za,
            yy: za
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("cv", {
        months: "кӑрлач нарӑс пуш ака май ҫӗртме утӑ ҫурла авӑн юпа чӳк раштав".split(" "),
        monthsShort: "кӑр нар пуш ака май ҫӗр утӑ ҫур авн юпа чӳк раш".split(" "),
        weekdays: "вырсарникун тунтикун ытларикун юнкун кӗҫнерникун эрнекун шӑматкун".split(" "),
        weekdaysShort: "выр тун ытл юн кӗҫ эрн шӑм".split(" "),
        weekdaysMin: "вр тн ыт юн кҫ эр шм".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD-MM-YYYY",
            LL: "YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",
            LLL: "YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",
            LLLL: "dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"
        },
        calendar: {
            sameDay: "[Паян] LT [сехетре]",
            nextDay: "[Ыран] LT [сехетре]",
            lastDay: "[Ӗнер] LT [сехетре]",
            nextWeek: "[Ҫитес] dddd LT [сехетре]",
            lastWeek: "[Иртнӗ] dddd LT [сехетре]",
            sameElse: "L"
        },
        relativeTime: {
            future: function (a) {
                var b = /\u0441\u0435\u0445\u0435\u0442$/i.exec(a) ? "рен" : /\u04ab\u0443\u043b$/i.exec(a) ? "тан" : "ран";
                return a + b
            },
            past: "%s каялла",
            s: "пӗр-ик ҫеккунт",
            m: "пӗр минут",
            mm: "%d минут",
            h: "пӗр сехет",
            hh: "%d сехет",
            d: "пӗр кун",
            dd: "%d кун",
            M: "пӗр уйӑх",
            MM: "%d уйӑх",
            y: "пӗр ҫул",
            yy: "%d ҫул"
        },
        dayOfMonthOrdinalParse: /\d{1,2}-\u043c\u04d7\u0448/,
        ordinal: "%d-мӗш",
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("cy", {
        months: "Ionawr Chwefror Mawrth Ebrill Mai Mehefin Gorffennaf Awst Medi Hydref Tachwedd Rhagfyr".split(" "),
        monthsShort: "Ion Chwe Maw Ebr Mai Meh Gor Aws Med Hyd Tach Rhag".split(" "),
        weekdays: "Dydd Sul;Dydd Llun;Dydd Mawrth;Dydd Mercher;Dydd Iau;Dydd Gwener;Dydd Sadwrn".split(";"),
        weekdaysShort: "Sul Llun Maw Mer Iau Gwe Sad".split(" "),
        weekdaysMin: "Su Ll Ma Me Ia Gw Sa".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Heddiw am] LT",
            nextDay: "[Yfory am] LT",
            nextWeek: "dddd [am] LT",
            lastDay: "[Ddoe am] LT",
            lastWeek: "dddd [diwethaf am] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "mewn %s",
            past: "%s yn ôl",
            s: "ychydig eiliadau",
            m: "munud",
            mm: "%d munud",
            h: "awr",
            hh: "%d awr",
            d: "diwrnod",
            dd: "%d diwrnod",
            M: "mis",
            MM: "%d mis",
            y: "blwyddyn",
            yy: "%d flynedd"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,
        ordinal: function (a) {
            return a + ""
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("da", {
        months: "januar februar marts april maj juni juli august september oktober november december".split(" "),
        monthsShort: "jan feb mar apr maj jun jul aug sep okt nov dec".split(" "),
        weekdays: "søndag mandag tirsdag onsdag torsdag fredag lørdag".split(" "),
        weekdaysShort: "søn man tir ons tor fre lør".split(" "),
        weekdaysMin: "sø ma ti on to fr lø".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY HH:mm",
            LLLL: "dddd [d.] D. MMMM YYYY [kl.] HH:mm"
        },
        calendar: {
            sameDay: "[i dag kl.] LT",
            nextDay: "[i morgen kl.] LT",
            nextWeek: "på dddd [kl.] LT",
            lastDay: "[i går kl.] LT",
            lastWeek: "[i] dddd[s kl.] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "om %s",
            past: "%s siden",
            s: "få sekunder",
            m: "et minut",
            mm: "%d minutter",
            h: "en time",
            hh: "%d timer",
            d: "en dag",
            dd: "%d dage",
            M: "en måned",
            MM: "%d måneder",
            y: "et år",
            yy: "%d år"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("de-at", {
        months: "Jänner Februar März April Mai Juni Juli August September Oktober November Dezember".split(" "),
        monthsShort: "Jän. Febr. Mrz. Apr. Mai Jun. Jul. Aug. Sept. Okt. Nov. Dez.".split(" "),
        monthsParseExact: !0,
        weekdays: "Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),
        weekdaysShort: "So. Mo. Di. Mi. Do. Fr. Sa.".split(" "),
        weekdaysMin: "So Mo Di Mi Do Fr Sa".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY HH:mm",
            LLLL: "dddd, D. MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[heute um] LT [Uhr]",
            sameElse: "L",
            nextDay: "[morgen um] LT [Uhr]",
            nextWeek: "dddd [um] LT [Uhr]",
            lastDay: "[gestern um] LT [Uhr]",
            lastWeek: "[letzten] dddd [um] LT [Uhr]"
        },
        relativeTime: {
            future: "in %s",
            past: "vor %s",
            s: "ein paar Sekunden",
            m: Xa,
            mm: "%d Minuten",
            h: Xa,
            hh: "%d Stunden",
            d: Xa,
            dd: Xa,
            M: Xa,
            MM: Xa,
            y: Xa,
            yy: Xa
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("de-ch", {
        months: "Januar Februar März April Mai Juni Juli August September Oktober November Dezember".split(" "),
        monthsShort: "Jan. Febr. März April Mai Juni Juli Aug. Sept. Okt. Nov. Dez.".split(" "),
        monthsParseExact: !0,
        weekdays: "Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),
        weekdaysShort: "So Mo Di Mi Do Fr Sa".split(" "),
        weekdaysMin: "So Mo Di Mi Do Fr Sa".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH.mm",
            LTS: "HH.mm.ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY HH.mm",
            LLLL: "dddd, D. MMMM YYYY HH.mm"
        },
        calendar: {
            sameDay: "[heute um] LT [Uhr]",
            sameElse: "L",
            nextDay: "[morgen um] LT [Uhr]",
            nextWeek: "dddd [um] LT [Uhr]",
            lastDay: "[gestern um] LT [Uhr]",
            lastWeek: "[letzten] dddd [um] LT [Uhr]"
        },
        relativeTime: {
            future: "in %s",
            past: "vor %s",
            s: "ein paar Sekunden",
            m: Ya,
            mm: "%d Minuten",
            h: Ya,
            hh: "%d Stunden",
            d: Ya,
            dd: Ya,
            M: Ya,
            MM: Ya,
            y: Ya,
            yy: Ya
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("de", {
        months: "Januar Februar März April Mai Juni Juli August September Oktober November Dezember".split(" "),
        monthsShort: "Jan. Febr. Mrz. Apr. Mai Jun. Jul. Aug. Sept. Okt. Nov. Dez.".split(" "),
        monthsParseExact: !0,
        weekdays: "Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),
        weekdaysShort: "So. Mo. Di. Mi. Do. Fr. Sa.".split(" "),
        weekdaysMin: "So Mo Di Mi Do Fr Sa".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY HH:mm",
            LLLL: "dddd, D. MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[heute um] LT [Uhr]",
            sameElse: "L",
            nextDay: "[morgen um] LT [Uhr]",
            nextWeek: "dddd [um] LT [Uhr]",
            lastDay: "[gestern um] LT [Uhr]",
            lastWeek: "[letzten] dddd [um] LT [Uhr]"
        },
        relativeTime: {
            future: "in %s",
            past: "vor %s",
            s: "ein paar Sekunden",
            m: Za,
            mm: "%d Minuten",
            h: Za,
            hh: "%d Stunden",
            d: Za,
            dd: Za,
            M: Za,
            MM: Za,
            y: Za,
            yy: Za
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    var hd = "ޖެނުއަރީ ފެބްރުއަރީ މާރިޗު އޭޕްރީލު މޭ ޖޫން ޖުލައި އޯގަސްޓު ސެޕްޓެމްބަރު އޮކްޓޯބަރު ނޮވެމްބަރު ޑިސެމްބަރު".split(" "),
        id = "އާދިއްތަ ހޯމަ އަންގާރަ ބުދަ ބުރާސްފަތި ހުކުރު ހޮނިހިރު".split(" ");
    a.defineLocale("dv", {
        months: hd,
        monthsShort: hd,
        weekdays: id,
        weekdaysShort: id,
        weekdaysMin: "އާދި ހޯމަ އަން ބުދަ ބުރާ ހުކު ހޮނި".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "D/M/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        meridiemParse: /\u0789\u0786|\u0789\u078a/,
        isPM: function (a) {
            return "މފ" === a
        },
        meridiem: function (a, b, c) {
            return 12 > a ? "މކ" : "މފ"
        },
        calendar: {
            sameDay: "[މިއަދު] LT",
            nextDay: "[މާދަމާ] LT",
            nextWeek: "dddd LT",
            lastDay: "[އިއްޔެ] LT",
            lastWeek: "[ފާއިތުވި] dddd LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "ތެރޭގައި %s",
            past: "ކުރިން %s",
            s: "ސިކުންތުކޮޅެއް",
            m: "މިނިޓެއް",
            mm: "މިނިޓު %d",
            h: "ގަޑިއިރެއް",
            hh: "ގަޑިއިރު %d",
            d: "ދުވަހެއް",
            dd: "ދުވަސް %d",
            M: "މަހެއް",
            MM: "މަސް %d",
            y: "އަހަރެއް",
            yy: "އަހަރު %d"
        },
        preparse: function (a) {
            return a.replace(/\u060c/g, ",")
        },
        postformat: function (a) {
            return a.replace(/,/g, "،")
        },
        week: {
            dow: 7,
            doy: 12
        }
    });
    a.defineLocale("el", {
        monthsNominativeEl: "Ιανουάριος Φεβρουάριος Μάρτιος Απρίλιος Μάιος Ιούνιος Ιούλιος Αύγουστος Σεπτέμβριος Οκτώβριος Νοέμβριος Δεκέμβριος".split(" "),
        monthsGenitiveEl: "Ιανουαρίου Φεβρουαρίου Μαρτίου Απριλίου Μαΐου Ιουνίου Ιουλίου Αυγούστου Σεπτεμβρίου Οκτωβρίου Νοεμβρίου Δεκεμβρίου".split(" "),
        months: function (a, b) {
            return a ? /D/.test(b.substring(0, b.indexOf("MMMM"))) ? this._monthsGenitiveEl[a.month()] : this._monthsNominativeEl[a.month()] : this._monthsNominativeEl
        },
        monthsShort: "Ιαν Φεβ Μαρ Απρ Μαϊ Ιουν Ιουλ Αυγ Σεπ Οκτ Νοε Δεκ".split(" "),
        weekdays: "Κυριακή Δευτέρα Τρίτη Τετάρτη Πέμπτη Παρασκευή Σάββατο".split(" "),
        weekdaysShort: "Κυρ Δευ Τρι Τετ Πεμ Παρ Σαβ".split(" "),
        weekdaysMin: "Κυ Δε Τρ Τε Πε Πα Σα".split(" "),
        meridiem: function (a, b, c) {
            return 11 < a ? c ? "μμ" : "ΜΜ" : c ? "πμ" : "ΠΜ"
        },
        isPM: function (a) {
            return "μ" === (a + "").toLowerCase()[0]
        },
        meridiemParse: /[\u03a0\u039c]\.?\u039c?\.?/i,
        longDateFormat: {
            LT: "h:mm A",
            LTS: "h:mm:ss A",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY h:mm A",
            LLLL: "dddd, D MMMM YYYY h:mm A"
        },
        calendarEl: {
            sameDay: "[Σήμερα {}] LT",
            nextDay: "[Αύριο {}] LT",
            nextWeek: "dddd [{}] LT",
            lastDay: "[Χθες {}] LT",
            lastWeek: function () {
                switch (this.day()) {
                case 6:
                    return "[το προηγούμενο] dddd [{}] LT";
                default:
                    return "[την προηγούμενη] dddd [{}] LT"
                }
            },
            sameElse: "L"
        },
        calendar: function (a, b) {
            var c = this._calendarEl[a],
                d = b && b.hours();
            return E(c) && (c = c.apply(b)), c.replace("{}", 1 === d % 12 ? "στη" : "στις")
        },
        relativeTime: {
            future: "σε %s",
            past: "%s πριν",
            s: "λίγα δευτερόλεπτα",
            m: "ένα λεπτό",
            mm: "%d λεπτά",
            h: "μία ώρα",
            hh: "%d ώρες",
            d: "μία μέρα",
            dd: "%d μέρες",
            M: "ένας μήνας",
            MM: "%d μήνες",
            y: "ένας χρόνος",
            yy: "%d χρόνια"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\u03b7/,
        ordinal: "%dη",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("en-au", {
        months: "January February March April May June July August September October November December".split(" "),
        monthsShort: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
        weekdays: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
        weekdaysShort: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
        weekdaysMin: "Su Mo Tu We Th Fr Sa".split(" "),
        longDateFormat: {
            LT: "h:mm A",
            LTS: "h:mm:ss A",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY h:mm A",
            LLLL: "dddd, D MMMM YYYY h:mm A"
        },
        calendar: {
            sameDay: "[Today at] LT",
            nextDay: "[Tomorrow at] LT",
            nextWeek: "dddd [at] LT",
            lastDay: "[Yesterday at] LT",
            lastWeek: "[Last] dddd [at] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "in %s",
            past: "%s ago",
            s: "a few seconds",
            m: "a minute",
            mm: "%d minutes",
            h: "an hour",
            hh: "%d hours",
            d: "a day",
            dd: "%d days",
            M: "a month",
            MM: "%d months",
            y: "a year",
            yy: "%d years"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
        ordinal: function (a) {
            var b = a % 10;
            return a + (1 === ~~(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th")
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("en-ca", {
        months: "January February March April May June July August September October November December".split(" "),
        monthsShort: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
        weekdays: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
        weekdaysShort: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
        weekdaysMin: "Su Mo Tu We Th Fr Sa".split(" "),
        longDateFormat: {
            LT: "h:mm A",
            LTS: "h:mm:ss A",
            L: "YYYY-MM-DD",
            LL: "MMMM D, YYYY",
            LLL: "MMMM D, YYYY h:mm A",
            LLLL: "dddd, MMMM D, YYYY h:mm A"
        },
        calendar: {
            sameDay: "[Today at] LT",
            nextDay: "[Tomorrow at] LT",
            nextWeek: "dddd [at] LT",
            lastDay: "[Yesterday at] LT",
            lastWeek: "[Last] dddd [at] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "in %s",
            past: "%s ago",
            s: "a few seconds",
            m: "a minute",
            mm: "%d minutes",
            h: "an hour",
            hh: "%d hours",
            d: "a day",
            dd: "%d days",
            M: "a month",
            MM: "%d months",
            y: "a year",
            yy: "%d years"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
        ordinal: function (a) {
            var b = a % 10;
            return a + (1 === ~~(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th")
        }
    });
    a.defineLocale("en-gb", {
        months: "January February March April May June July August September October November December".split(" "),
        monthsShort: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
        weekdays: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
        weekdaysShort: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
        weekdaysMin: "Su Mo Tu We Th Fr Sa".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Today at] LT",
            nextDay: "[Tomorrow at] LT",
            nextWeek: "dddd [at] LT",
            lastDay: "[Yesterday at] LT",
            lastWeek: "[Last] dddd [at] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "in %s",
            past: "%s ago",
            s: "a few seconds",
            m: "a minute",
            mm: "%d minutes",
            h: "an hour",
            hh: "%d hours",
            d: "a day",
            dd: "%d days",
            M: "a month",
            MM: "%d months",
            y: "a year",
            yy: "%d years"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
        ordinal: function (a) {
            var b = a % 10;
            return a + (1 === ~~(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th")
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("en-ie", {
        months: "January February March April May June July August September October November December".split(" "),
        monthsShort: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
        weekdays: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
        weekdaysShort: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
        weekdaysMin: "Su Mo Tu We Th Fr Sa".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD-MM-YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Today at] LT",
            nextDay: "[Tomorrow at] LT",
            nextWeek: "dddd [at] LT",
            lastDay: "[Yesterday at] LT",
            lastWeek: "[Last] dddd [at] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "in %s",
            past: "%s ago",
            s: "a few seconds",
            m: "a minute",
            mm: "%d minutes",
            h: "an hour",
            hh: "%d hours",
            d: "a day",
            dd: "%d days",
            M: "a month",
            MM: "%d months",
            y: "a year",
            yy: "%d years"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
        ordinal: function (a) {
            var b = a % 10;
            return a + (1 === ~~(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th")
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("en-nz", {
        months: "January February March April May June July August September October November December".split(" "),
        monthsShort: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
        weekdays: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
        weekdaysShort: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
        weekdaysMin: "Su Mo Tu We Th Fr Sa".split(" "),
        longDateFormat: {
            LT: "h:mm A",
            LTS: "h:mm:ss A",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY h:mm A",
            LLLL: "dddd, D MMMM YYYY h:mm A"
        },
        calendar: {
            sameDay: "[Today at] LT",
            nextDay: "[Tomorrow at] LT",
            nextWeek: "dddd [at] LT",
            lastDay: "[Yesterday at] LT",
            lastWeek: "[Last] dddd [at] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "in %s",
            past: "%s ago",
            s: "a few seconds",
            m: "a minute",
            mm: "%d minutes",
            h: "an hour",
            hh: "%d hours",
            d: "a day",
            dd: "%d days",
            M: "a month",
            MM: "%d months",
            y: "a year",
            yy: "%d years"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
        ordinal: function (a) {
            var b = a % 10;
            return a + (1 === ~~(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th")
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("eo", {
        months: "januaro februaro marto aprilo majo junio julio aŭgusto septembro oktobro novembro decembro".split(" "),
        monthsShort: "jan feb mar apr maj jun jul aŭg sep okt nov dec".split(" "),
        weekdays: "dimanĉo lundo mardo merkredo ĵaŭdo vendredo sabato".split(" "),
        weekdaysShort: "dim lun mard merk ĵaŭ ven sab".split(" "),
        weekdaysMin: "di lu ma me ĵa ve sa".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "YYYY-MM-DD",
            LL: "D[-a de] MMMM, YYYY",
            LLL: "D[-a de] MMMM, YYYY HH:mm",
            LLLL: "dddd, [la] D[-a de] MMMM, YYYY HH:mm"
        },
        meridiemParse: /[ap]\.t\.m/i,
        isPM: function (a) {
            return "p" === a.charAt(0).toLowerCase()
        },
        meridiem: function (a, b, c) {
            return 11 < a ? c ? "p.t.m." : "P.T.M." : c ? "a.t.m." : "A.T.M."
        },
        calendar: {
            sameDay: "[Hodiaŭ je] LT",
            nextDay: "[Morgaŭ je] LT",
            nextWeek: "dddd [je] LT",
            lastDay: "[Hieraŭ je] LT",
            lastWeek: "[pasinta] dddd [je] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "post %s",
            past: "antaŭ %s",
            s: "sekundoj",
            m: "minuto",
            mm: "%d minutoj",
            h: "horo",
            hh: "%d horoj",
            d: "tago",
            dd: "%d tagoj",
            M: "monato",
            MM: "%d monatoj",
            y: "jaro",
            yy: "%d jaroj"
        },
        dayOfMonthOrdinalParse: /\d{1,2}a/,
        ordinal: "%da",
        week: {
            dow: 1,
            doy: 7
        }
    });
    var jd = "ene. feb. mar. abr. may. jun. jul. ago. sep. oct. nov. dic.".split(" "),
        we = "ene feb mar abr may jun jul ago sep oct nov dic".split(" ");
    a.defineLocale("es-do", {
        months: "enero febrero marzo abril mayo junio julio agosto septiembre octubre noviembre diciembre".split(" "),
        monthsShort: function (a, b) {
            return a ? /-MMM-/.test(b) ? we[a.month()] : jd[a.month()] : jd
        },
        monthsParseExact: !0,
        weekdays: "domingo lunes martes miércoles jueves viernes sábado".split(" "),
        weekdaysShort: "dom. lun. mar. mié. jue. vie. sáb.".split(" "),
        weekdaysMin: "do lu ma mi ju vi sá".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "h:mm A",
            LTS: "h:mm:ss A",
            L: "DD/MM/YYYY",
            LL: "D [de] MMMM [de] YYYY",
            LLL: "D [de] MMMM [de] YYYY h:mm A",
            LLLL: "dddd, D [de] MMMM [de] YYYY h:mm A"
        },
        calendar: {
            sameDay: function () {
                return "[hoy a la" + (1 !== this.hours() ? "s" : "") + "] LT"
            },
            nextDay: function () {
                return "[mañana a la" + (1 !== this.hours() ? "s" : "") + "] LT"
            },
            nextWeek: function () {
                return "dddd [a la" + (1 !== this.hours() ? "s" : "") + "] LT"
            },
            lastDay: function () {
                return "[ayer a la" +
                    (1 !== this.hours() ? "s" : "") + "] LT"
            },
            lastWeek: function () {
                return "[el] dddd [pasado a la" + (1 !== this.hours() ? "s" : "") + "] LT"
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "en %s",
            past: "hace %s",
            s: "unos segundos",
            m: "un minuto",
            mm: "%d minutos",
            h: "una hora",
            hh: "%d horas",
            d: "un día",
            dd: "%d días",
            M: "un mes",
            MM: "%d meses",
            y: "un año",
            yy: "%d años"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\u00ba/,
        ordinal: "%dº",
        week: {
            dow: 1,
            doy: 4
        }
    });
    var kd = "ene. feb. mar. abr. may. jun. jul. ago. sep. oct. nov. dic.".split(" "),
        xe = "ene feb mar abr may jun jul ago sep oct nov dic".split(" ");
    a.defineLocale("es", {
        months: "enero febrero marzo abril mayo junio julio agosto septiembre octubre noviembre diciembre".split(" "),
        monthsShort: function (a, b) {
            return a ? /-MMM-/.test(b) ? xe[a.month()] : kd[a.month()] : kd
        },
        monthsParseExact: !0,
        weekdays: "domingo lunes martes miércoles jueves viernes sábado".split(" "),
        weekdaysShort: "dom. lun. mar. mié. jue. vie. sáb.".split(" "),
        weekdaysMin: "do lu ma mi ju vi sá".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D [de] MMMM [de] YYYY",
            LLL: "D [de] MMMM [de] YYYY H:mm",
            LLLL: "dddd, D [de] MMMM [de] YYYY H:mm"
        },
        calendar: {
            sameDay: function () {
                return "[hoy a la" + (1 !== this.hours() ? "s" : "") + "] LT"
            },
            nextDay: function () {
                return "[mañana a la" + (1 !== this.hours() ? "s" : "") + "] LT"
            },
            nextWeek: function () {
                return "dddd [a la" + (1 !== this.hours() ? "s" : "") + "] LT"
            },
            lastDay: function () {
                return "[ayer a la" + (1 !== this.hours() ? "s" : "") + "] LT"
            },
            lastWeek: function () {
                return "[el] dddd [pasado a la" +
                    (1 !== this.hours() ? "s" : "") + "] LT"
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "en %s",
            past: "hace %s",
            s: "unos segundos",
            m: "un minuto",
            mm: "%d minutos",
            h: "una hora",
            hh: "%d horas",
            d: "un día",
            dd: "%d días",
            M: "un mes",
            MM: "%d meses",
            y: "un año",
            yy: "%d años"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\u00ba/,
        ordinal: "%dº",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("et", {
        months: "jaanuar veebruar märts aprill mai juuni juuli august september oktoober november detsember".split(" "),
        monthsShort: "jaan veebr märts apr mai juuni juuli aug sept okt nov dets".split(" "),
        weekdays: "pühapäev esmaspäev teisipäev kolmapäev neljapäev reede laupäev".split(" "),
        weekdaysShort: "PETKNRL".split(""),
        weekdaysMin: "PETKNRL".split(""),
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY H:mm",
            LLLL: "dddd, D. MMMM YYYY H:mm"
        },
        calendar: {
            sameDay: "[Täna,] LT",
            nextDay: "[Homme,] LT",
            nextWeek: "[Järgmine] dddd LT",
            lastDay: "[Eile,] LT",
            lastWeek: "[Eelmine] dddd LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s pärast",
            past: "%s tagasi",
            s: La,
            m: La,
            mm: La,
            h: La,
            hh: La,
            d: La,
            dd: "%d päeva",
            M: La,
            MM: La,
            y: La,
            yy: La
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("eu", {
        months: "urtarrila otsaila martxoa apirila maiatza ekaina uztaila abuztua iraila urria azaroa abendua".split(" "),
        monthsShort: "urt. ots. mar. api. mai. eka. uzt. abu. ira. urr. aza. abe.".split(" "),
        monthsParseExact: !0,
        weekdays: "igandea astelehena asteartea asteazkena osteguna ostirala larunbata".split(" "),
        weekdaysShort: "ig. al. ar. az. og. ol. lr.".split(" "),
        weekdaysMin: "ig al ar az og ol lr".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "YYYY-MM-DD",
            LL: "YYYY[ko] MMMM[ren] D[a]",
            LLL: "YYYY[ko] MMMM[ren] D[a] HH:mm",
            LLLL: "dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",
            l: "YYYY-M-D",
            ll: "YYYY[ko] MMM D[a]",
            lll: "YYYY[ko] MMM D[a] HH:mm",
            llll: "ddd, YYYY[ko] MMM D[a] HH:mm"
        },
        calendar: {
            sameDay: "[gaur] LT[etan]",
            nextDay: "[bihar] LT[etan]",
            nextWeek: "dddd LT[etan]",
            lastDay: "[atzo] LT[etan]",
            lastWeek: "[aurreko] dddd LT[etan]",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s barru",
            past: "duela %s",
            s: "segundo batzuk",
            m: "minutu bat",
            mm: "%d minutu",
            h: "ordu bat",
            hh: "%d ordu",
            d: "egun bat",
            dd: "%d egun",
            M: "hilabete bat",
            MM: "%d hilabete",
            y: "urte bat",
            yy: "%d urte"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 7
        }
    });
    var ye = {
            1: "۱",
            2: "۲",
            3: "۳",
            4: "۴",
            5: "۵",
            6: "۶",
            7: "۷",
            8: "۸",
            9: "۹",
            "0": "۰"
        },
        ze = {
            "۱": "1",
            "۲": "2",
            "۳": "3",
            "۴": "4",
            "۵": "5",
            "۶": "6",
            "۷": "7",
            "۸": "8",
            "۹": "9",
            "۰": "0"
        };
    a.defineLocale("fa", {
        months: "ژانویه فوریه مارس آوریل مه ژوئن ژوئیه اوت سپتامبر اکتبر نوامبر دسامبر".split(" "),
        monthsShort: "ژانویه فوریه مارس آوریل مه ژوئن ژوئیه اوت سپتامبر اکتبر نوامبر دسامبر".split(" "),
        weekdays: "یک‌شنبه دوشنبه سه‌شنبه چهارشنبه پنج‌شنبه جمعه شنبه".split(" "),
        weekdaysShort: "یک‌شنبه دوشنبه سه‌شنبه چهارشنبه پنج‌شنبه جمعه شنبه".split(" "),
        weekdaysMin: "یدسچپجش".split(""),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        meridiemParse: /\u0642\u0628\u0644 \u0627\u0632 \u0638\u0647\u0631|\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631/,
        isPM: function (a) {
            return /\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631/.test(a)
        },
        meridiem: function (a, b, c) {
            return 12 > a ? "قبل از ظهر" :
                "بعد از ظهر"
        },
        calendar: {
            sameDay: "[امروز ساعت] LT",
            nextDay: "[فردا ساعت] LT",
            nextWeek: "dddd [ساعت] LT",
            lastDay: "[دیروز ساعت] LT",
            lastWeek: "dddd [پیش] [ساعت] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "در %s",
            past: "%s پیش",
            s: "چند ثانیه",
            m: "یک دقیقه",
            mm: "%d دقیقه",
            h: "یک ساعت",
            hh: "%d ساعت",
            d: "یک روز",
            dd: "%d روز",
            M: "یک ماه",
            MM: "%d ماه",
            y: "یک سال",
            yy: "%d سال"
        },
        preparse: function (a) {
            return a.replace(/[\u06f0-\u06f9]/g, function (a) {
                return ze[a]
            }).replace(/\u060c/g, ",")
        },
        postformat: function (a) {
            return a.replace(/\d/g,
                function (a) {
                    return ye[a]
                }).replace(/,/g, "،")
        },
        dayOfMonthOrdinalParse: /\d{1,2}\u0645/,
        ordinal: "%dم",
        week: {
            dow: 6,
            doy: 12
        }
    });
    var Kb = "nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),
        Kd = ["nolla", "yhden", "kahden", "kolmen", "neljän", "viiden", "kuuden", Kb[7], Kb[8], Kb[9]];
    a.defineLocale("fi", {
        months: "tammikuu helmikuu maaliskuu huhtikuu toukokuu kesäkuu heinäkuu elokuu syyskuu lokakuu marraskuu joulukuu".split(" "),
        monthsShort: "tammi helmi maalis huhti touko kesä heinä elo syys loka marras joulu".split(" "),
        weekdays: "sunnuntai maanantai tiistai keskiviikko torstai perjantai lauantai".split(" "),
        weekdaysShort: "su ma ti ke to pe la".split(" "),
        weekdaysMin: "su ma ti ke to pe la".split(" "),
        longDateFormat: {
            LT: "HH.mm",
            LTS: "HH.mm.ss",
            L: "DD.MM.YYYY",
            LL: "Do MMMM[ta] YYYY",
            LLL: "Do MMMM[ta] YYYY, [klo] HH.mm",
            LLLL: "dddd, Do MMMM[ta] YYYY, [klo] HH.mm",
            l: "D.M.YYYY",
            ll: "Do MMM YYYY",
            lll: "Do MMM YYYY, [klo] HH.mm",
            llll: "ddd, Do MMM YYYY, [klo] HH.mm"
        },
        calendar: {
            sameDay: "[tänään] [klo] LT",
            nextDay: "[huomenna] [klo] LT",
            nextWeek: "dddd [klo] LT",
            lastDay: "[eilen] [klo] LT",
            lastWeek: "[viime] dddd[na] [klo] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s päästä",
            past: "%s sitten",
            s: Aa,
            m: Aa,
            mm: Aa,
            h: Aa,
            hh: Aa,
            d: Aa,
            dd: Aa,
            M: Aa,
            MM: Aa,
            y: Aa,
            yy: Aa
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("fo", {
        months: "januar februar mars apríl mai juni juli august september oktober november desember".split(" "),
        monthsShort: "jan feb mar apr mai jun jul aug sep okt nov des".split(" "),
        weekdays: "sunnudagur mánadagur týsdagur mikudagur hósdagur fríggjadagur leygardagur".split(" "),
        weekdaysShort: "sun mán týs mik hós frí ley".split(" "),
        weekdaysMin: "su má tý mi hó fr le".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D. MMMM, YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Í dag kl.] LT",
            nextDay: "[Í morgin kl.] LT",
            nextWeek: "dddd [kl.] LT",
            lastDay: "[Í gjár kl.] LT",
            lastWeek: "[síðstu] dddd [kl] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "um %s",
            past: "%s síðani",
            s: "fá sekund",
            m: "ein minutt",
            mm: "%d minuttir",
            h: "ein tími",
            hh: "%d tímar",
            d: "ein dagur",
            dd: "%d dagar",
            M: "ein mánaði",
            MM: "%d mánaðir",
            y: "eitt ár",
            yy: "%d ár"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("fr-ca", {
        months: "janvier février mars avril mai juin juillet août septembre octobre novembre décembre".split(" "),
        monthsShort: "janv. févr. mars avr. mai juin juil. août sept. oct. nov. déc.".split(" "),
        monthsParseExact: !0,
        weekdays: "dimanche lundi mardi mercredi jeudi vendredi samedi".split(" "),
        weekdaysShort: "dim. lun. mar. mer. jeu. ven. sam.".split(" "),
        weekdaysMin: "Di Lu Ma Me Je Ve Sa".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "YYYY-MM-DD",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Aujourd’hui à] LT",
            nextDay: "[Demain à] LT",
            nextWeek: "dddd [à] LT",
            lastDay: "[Hier à] LT",
            lastWeek: "dddd [dernier à] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "dans %s",
            past: "il y a %s",
            s: "quelques secondes",
            m: "une minute",
            mm: "%d minutes",
            h: "une heure",
            hh: "%d heures",
            d: "un jour",
            dd: "%d jours",
            M: "un mois",
            MM: "%d mois",
            y: "un an",
            yy: "%d ans"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(er|e)/,
        ordinal: function (a, b) {
            switch (b) {
            default:
            case "M":
            case "Q":
            case "D":
            case "DDD":
            case "d":
                return a + (1 === a ? "er" : "e");
            case "w":
            case "W":
                return a +
                    (1 === a ? "re" : "e")
            }
        }
    });
    a.defineLocale("fr-ch", {
        months: "janvier février mars avril mai juin juillet août septembre octobre novembre décembre".split(" "),
        monthsShort: "janv. févr. mars avr. mai juin juil. août sept. oct. nov. déc.".split(" "),
        monthsParseExact: !0,
        weekdays: "dimanche lundi mardi mercredi jeudi vendredi samedi".split(" "),
        weekdaysShort: "dim. lun. mar. mer. jeu. ven. sam.".split(" "),
        weekdaysMin: "Di Lu Ma Me Je Ve Sa".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Aujourd’hui à] LT",
            nextDay: "[Demain à] LT",
            nextWeek: "dddd [à] LT",
            lastDay: "[Hier à] LT",
            lastWeek: "dddd [dernier à] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "dans %s",
            past: "il y a %s",
            s: "quelques secondes",
            m: "une minute",
            mm: "%d minutes",
            h: "une heure",
            hh: "%d heures",
            d: "un jour",
            dd: "%d jours",
            M: "un mois",
            MM: "%d mois",
            y: "un an",
            yy: "%d ans"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(er|e)/,
        ordinal: function (a, b) {
            switch (b) {
            default:
            case "M":
            case "Q":
            case "D":
            case "DDD":
            case "d":
                return a + (1 === a ? "er" : "e");
            case "w":
            case "W":
                return a + (1 === a ? "re" : "e")
            }
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("fr", {
        months: "janvier février mars avril mai juin juillet août septembre octobre novembre décembre".split(" "),
        monthsShort: "janv. févr. mars avr. mai juin juil. août sept. oct. nov. déc.".split(" "),
        monthsParseExact: !0,
        weekdays: "dimanche lundi mardi mercredi jeudi vendredi samedi".split(" "),
        weekdaysShort: "dim. lun. mar. mer. jeu. ven. sam.".split(" "),
        weekdaysMin: "Di Lu Ma Me Je Ve Sa".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Aujourd’hui à] LT",
            nextDay: "[Demain à] LT",
            nextWeek: "dddd [à] LT",
            lastDay: "[Hier à] LT",
            lastWeek: "dddd [dernier à] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "dans %s",
            past: "il y a %s",
            s: "quelques secondes",
            m: "une minute",
            mm: "%d minutes",
            h: "une heure",
            hh: "%d heures",
            d: "un jour",
            dd: "%d jours",
            M: "un mois",
            MM: "%d mois",
            y: "un an",
            yy: "%d ans"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(er|)/,
        ordinal: function (a, b) {
            switch (b) {
            case "D":
                return a + (1 === a ? "er" : "");
            default:
            case "M":
            case "Q":
            case "DDD":
            case "d":
                return a + (1 === a ? "er" : "e");
            case "w":
            case "W":
                return a + (1 === a ? "re" : "e")
            }
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    var ld = "jan. feb. mrt. apr. mai jun. jul. aug. sep. okt. nov. des.".split(" "),
        Ae = "jan feb mrt apr mai jun jul aug sep okt nov des".split(" ");
    a.defineLocale("fy", {
        months: "jannewaris febrewaris maart april maaie juny july augustus septimber oktober novimber desimber".split(" "),
        monthsShort: function (a, b) {
            return a ? /-MMM-/.test(b) ? Ae[a.month()] : ld[a.month()] : ld
        },
        monthsParseExact: !0,
        weekdays: "snein moandei tiisdei woansdei tongersdei freed sneon".split(" "),
        weekdaysShort: "si. mo. ti. wo. to. fr. so.".split(" "),
        weekdaysMin: "Si Mo Ti Wo To Fr So".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD-MM-YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[hjoed om] LT",
            nextDay: "[moarn om] LT",
            nextWeek: "dddd [om] LT",
            lastDay: "[juster om] LT",
            lastWeek: "[ôfrûne] dddd [om] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "oer %s",
            past: "%s lyn",
            s: "in pear sekonden",
            m: "ien minút",
            mm: "%d minuten",
            h: "ien oere",
            hh: "%d oeren",
            d: "ien dei",
            dd: "%d dagen",
            M: "ien moanne",
            MM: "%d moannen",
            y: "ien jier",
            yy: "%d jierren"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
        ordinal: function (a) {
            return a +
                (1 === a || 8 === a || 20 <= a ? "ste" : "de")
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("gd", {
        months: "Am Faoilleach;An Gearran;Am Màrt;An Giblean;An Cèitean;An t-Ògmhios;An t-Iuchar;An Lùnastal;An t-Sultain;An Dàmhair;An t-Samhain;An Dùbhlachd".split(";"),
        monthsShort: "Faoi Gear Màrt Gibl Cèit Ògmh Iuch Lùn Sult Dàmh Samh Dùbh".split(" "),
        monthsParseExact: !0,
        weekdays: "Didòmhnaich Diluain Dimàirt Diciadain Diardaoin Dihaoine Disathairne".split(" "),
        weekdaysShort: "Did Dil Dim Dic Dia Dih Dis".split(" "),
        weekdaysMin: "Dò Lu Mà Ci Ar Ha Sa".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[An-diugh aig] LT",
            nextDay: "[A-màireach aig] LT",
            nextWeek: "dddd [aig] LT",
            lastDay: "[An-dè aig] LT",
            lastWeek: "dddd [seo chaidh] [aig] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "ann an %s",
            past: "bho chionn %s",
            s: "beagan diogan",
            m: "mionaid",
            mm: "%d mionaidean",
            h: "uair",
            hh: "%d uairean",
            d: "latha",
            dd: "%d latha",
            M: "mìos",
            MM: "%d mìosan",
            y: "bliadhna",
            yy: "%d bliadhna"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(d|na|mh)/,
        ordinal: function (a) {
            return a + (1 === a ? "d" : 2 === a % 10 ? "na" : "mh")
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("gl", {
        months: "xaneiro febreiro marzo abril maio xuño xullo agosto setembro outubro novembro decembro".split(" "),
        monthsShort: "xan. feb. mar. abr. mai. xuñ. xul. ago. set. out. nov. dec.".split(" "),
        monthsParseExact: !0,
        weekdays: "domingo luns martes mércores xoves venres sábado".split(" "),
        weekdaysShort: "dom. lun. mar. mér. xov. ven. sáb.".split(" "),
        weekdaysMin: "do lu ma mé xo ve sá".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D [de] MMMM [de] YYYY",
            LLL: "D [de] MMMM [de] YYYY H:mm",
            LLLL: "dddd, D [de] MMMM [de] YYYY H:mm"
        },
        calendar: {
            sameDay: function () {
                return "[hoxe " + (1 !== this.hours() ? "ás" : "á") + "] LT"
            },
            nextDay: function () {
                return "[mañá " + (1 !== this.hours() ? "ás" : "á") + "] LT"
            },
            nextWeek: function () {
                return "dddd [" +
                    (1 !== this.hours() ? "ás" : "a") + "] LT"
            },
            lastDay: function () {
                return "[onte " + (1 !== this.hours() ? "á" : "a") + "] LT"
            },
            lastWeek: function () {
                return "[o] dddd [pasado " + (1 !== this.hours() ? "ás" : "a") + "] LT"
            },
            sameElse: "L"
        },
        relativeTime: {
            future: function (a) {
                return 0 === a.indexOf("un") ? "n" + a : "en " + a
            },
            past: "hai %s",
            s: "uns segundos",
            m: "un minuto",
            mm: "%d minutos",
            h: "unha hora",
            hh: "%d horas",
            d: "un día",
            dd: "%d días",
            M: "un mes",
            MM: "%d meses",
            y: "un ano",
            yy: "%d anos"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\u00ba/,
        ordinal: "%dº",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("gom-latn", {
        months: "Janer Febrer Mars Abril Mai Jun Julai Agost Setembr Otubr Novembr Dezembr".split(" "),
        monthsShort: "Jan. Feb. Mars Abr. Mai Jun Jul. Ago. Set. Otu. Nov. Dez.".split(" "),
        monthsParseExact: !0,
        weekdays: "Aitar Somar Mongllar Budvar Brestar Sukrar Son'var".split(" "),
        weekdaysShort: "Ait. Som. Mon. Bud. Bre. Suk. Son.".split(" "),
        weekdaysMin: "Ai Sm Mo Bu Br Su Sn".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "A h:mm [vazta]",
            LTS: "A h:mm:ss [vazta]",
            L: "DD-MM-YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY A h:mm [vazta]",
            LLLL: "dddd, MMMM[achea] Do, YYYY, A h:mm [vazta]",
            llll: "ddd, D MMM YYYY, A h:mm [vazta]"
        },
        calendar: {
            sameDay: "[Aiz] LT",
            nextDay: "[Faleam] LT",
            nextWeek: "[Ieta to] dddd[,] LT",
            lastDay: "[Kal] LT",
            lastWeek: "[Fatlo] dddd[,] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s",
            past: "%s adim",
            s: Ba,
            m: Ba,
            mm: Ba,
            h: Ba,
            hh: Ba,
            d: Ba,
            dd: Ba,
            M: Ba,
            MM: Ba,
            y: Ba,
            yy: Ba
        },
        dayOfMonthOrdinalParse: /\d{1,2}(er)/,
        ordinal: function (a, b) {
            switch (b) {
            case "D":
                return a +
                    "er";
            default:
            case "M":
            case "Q":
            case "DDD":
            case "d":
            case "w":
            case "W":
                return a
            }
        },
        week: {
            dow: 1,
            doy: 4
        },
        meridiemParse: /rati|sokalli|donparam|sanje/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "rati" === b ? 4 > a ? a : a + 12 : "sokalli" === b ? a : "donparam" === b ? 12 < a ? a : a + 12 : "sanje" === b ? a + 12 : void 0
        },
        meridiem: function (a, b, c) {
            return 4 > a ? "rati" : 12 > a ? "sokalli" : 16 > a ? "donparam" : 20 > a ? "sanje" : "rati"
        }
    });
    a.defineLocale("he", {
        months: "ינואר פברואר מרץ אפריל מאי יוני יולי אוגוסט ספטמבר אוקטובר נובמבר דצמבר".split(" "),
        monthsShort: "ינו׳ פבר׳ מרץ אפר׳ מאי יוני יולי אוג׳ ספט׳ אוק׳ נוב׳ דצמ׳".split(" "),
        weekdays: "ראשון שני שלישי רביעי חמישי שישי שבת".split(" "),
        weekdaysShort: "א׳ ב׳ ג׳ ד׳ ה׳ ו׳ ש׳".split(" "),
        weekdaysMin: "אבגדהוש".split(""),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D [ב]MMMM YYYY",
            LLL: "D [ב]MMMM YYYY HH:mm",
            LLLL: "dddd, D [ב]MMMM YYYY HH:mm",
            l: "D/M/YYYY",
            ll: "D MMM YYYY",
            lll: "D MMM YYYY HH:mm",
            llll: "ddd, D MMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[היום ב־]LT",
            nextDay: "[מחר ב־]LT",
            nextWeek: "dddd [בשעה] LT",
            lastDay: "[אתמול ב־]LT",
            lastWeek: "[ביום] dddd [האחרון בשעה] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "בעוד %s",
            past: "לפני %s",
            s: "מספר שניות",
            m: "דקה",
            mm: "%d דקות",
            h: "שעה",
            hh: function (a) {
                return 2 === a ? "שעתיים" :
                    a + " שעות"
            },
            d: "יום",
            dd: function (a) {
                return 2 === a ? "יומיים" : a + " ימים"
            },
            M: "חודש",
            MM: function (a) {
                return 2 === a ? "חודשיים" : a + " חודשים"
            },
            y: "שנה",
            yy: function (a) {
                return 2 === a ? "שנתיים" : 0 === a % 10 && 10 !== a ? a + " שנה" : a + " שנים"
            }
        },
        meridiemParse: /\u05d0\u05d7\u05d4"\u05e6|\u05dc\u05e4\u05e0\u05d4"\u05e6|\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05dc\u05e4\u05e0\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05dc\u05e4\u05e0\u05d5\u05ea \u05d1\u05d5\u05e7\u05e8|\u05d1\u05d1\u05d5\u05e7\u05e8|\u05d1\u05e2\u05e8\u05d1/i,
        isPM: function (a) {
            return /^(\u05d0\u05d7\u05d4"\u05e6|\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05d1\u05e2\u05e8\u05d1)$/.test(a)
        },
        meridiem: function (a, b, c) {
            return 5 > a ? "לפנות בוקר" : 10 > a ? "בבוקר" : 12 > a ? c ? 'לפנה"צ' : "לפני הצהריים" : 18 > a ? c ? 'אחה"צ' : "אחרי הצהריים" :
                "בערב"
        }
    });
    var Be = {
            1: "१",
            2: "२",
            3: "३",
            4: "४",
            5: "५",
            6: "६",
            7: "७",
            8: "८",
            9: "९",
            "0": "०"
        },
        Ce = {
            "१": "1",
            "२": "2",
            "३": "3",
            "४": "4",
            "५": "5",
            "६": "6",
            "७": "7",
            "८": "8",
            "९": "9",
            "०": "0"
        };
    a.defineLocale("hi", {
        months: "जनवरी फ़रवरी मार्च अप्रैल मई जून जुलाई अगस्त सितम्बर अक्टूबर नवम्बर दिसम्बर".split(" "),
        monthsShort: "जन. फ़र. मार्च अप्रै. मई जून जुल. अग. सित. अक्टू. नव. दिस.".split(" "),
        monthsParseExact: !0,
        weekdays: "रविवार सोमवार मंगलवार बुधवार गुरूवार शुक्रवार शनिवार".split(" "),
        weekdaysShort: "रवि सोम मंगल बुध गुरू शुक्र शनि".split(" "),
        weekdaysMin: "र सो मं बु गु शु श".split(" "),
        longDateFormat: {
            LT: "A h:mm बजे",
            LTS: "A h:mm:ss बजे",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY, A h:mm बजे",
            LLLL: "dddd, D MMMM YYYY, A h:mm बजे"
        },
        calendar: {
            sameDay: "[आज] LT",
            nextDay: "[कल] LT",
            nextWeek: "dddd, LT",
            lastDay: "[कल] LT",
            lastWeek: "[पिछले] dddd, LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s में",
            past: "%s पहले",
            s: "कुछ ही क्षण",
            m: "एक मिनट",
            mm: "%d मिनट",
            h: "एक घंटा",
            hh: "%d घंटे",
            d: "एक दिन",
            dd: "%d दिन",
            M: "एक महीने",
            MM: "%d महीने",
            y: "एक वर्ष",
            yy: "%d वर्ष"
        },
        preparse: function (a) {
            return a.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g, function (a) {
                return Ce[a]
            })
        },
        postformat: function (a) {
            return a.replace(/\d/g, function (a) {
                return Be[a]
            })
        },
        meridiemParse: /\u0930\u093e\u0924|\u0938\u0941\u092c\u0939|\u0926\u094b\u092a\u0939\u0930|\u0936\u093e\u092e/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "रात" ===
                b ? 4 > a ? a : a + 12 : "सुबह" === b ? a : "दोपहर" === b ? 10 <= a ? a : a + 12 : "शाम" === b ? a + 12 : void 0
        },
        meridiem: function (a, b, c) {
            return 4 > a ? "रात" : 10 > a ? "सुबह" : 17 > a ? "दोपहर" : 20 > a ? "शाम" : "रात"
        },
        week: {
            dow: 0,
            doy: 6
        }
    });
    a.defineLocale("hr", {
        months: {
            format: "siječnja veljače ožujka travnja svibnja lipnja srpnja kolovoza rujna listopada studenoga prosinca".split(" "),
            standalone: "siječanj veljača ožujak travanj svibanj lipanj srpanj kolovoz rujan listopad studeni prosinac".split(" ")
        },
        monthsShort: "sij. velj. ožu. tra. svi. lip. srp. kol. ruj. lis. stu. pro.".split(" "),
        monthsParseExact: !0,
        weekdays: "nedjelja ponedjeljak utorak srijeda četvrtak petak subota".split(" "),
        weekdaysShort: "ned. pon. uto. sri. čet. pet. sub.".split(" "),
        weekdaysMin: "ne po ut sr če pe su".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY H:mm",
            LLLL: "dddd, D. MMMM YYYY H:mm"
        },
        calendar: {
            sameDay: "[danas u] LT",
            nextDay: "[sutra u] LT",
            nextWeek: function () {
                switch (this.day()) {
                case 0:
                    return "[u] [nedjelju] [u] LT";
                case 3:
                    return "[u] [srijedu] [u] LT";
                case 6:
                    return "[u] [subotu] [u] LT";
                case 1:
                case 2:
                case 4:
                case 5:
                    return "[u] dddd [u] LT"
                }
            },
            lastDay: "[jučer u] LT",
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                case 3:
                    return "[prošlu] dddd [u] LT";
                case 6:
                    return "[prošle] [subote] [u] LT";
                case 1:
                case 2:
                case 4:
                case 5:
                    return "[prošli] dddd [u] LT"
                }
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "za %s",
            past: "prije %s",
            s: "par sekundi",
            m: gb,
            mm: gb,
            h: gb,
            hh: gb,
            d: "dan",
            dd: gb,
            M: "mjesec",
            MM: gb,
            y: "godinu",
            yy: gb
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 7
        }
    });
    var md = "vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");
    a.defineLocale("hu", {
        months: "január február március április május június július augusztus szeptember október november december".split(" "),
        monthsShort: "jan feb márc ápr máj jún júl aug szept okt nov dec".split(" "),
        weekdays: "vasárnap hétfő kedd szerda csütörtök péntek szombat".split(" "),
        weekdaysShort: "vas hét kedd sze csüt pén szo".split(" "),
        weekdaysMin: "v h k sze cs p szo".split(" "),
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "YYYY.MM.DD.",
            LL: "YYYY. MMMM D.",
            LLL: "YYYY. MMMM D. H:mm",
            LLLL: "YYYY. MMMM D., dddd H:mm"
        },
        meridiemParse: /de|du/i,
        isPM: function (a) {
            return "u" === a.charAt(1).toLowerCase()
        },
        meridiem: function (a, b, c) {
            return 12 > a ? !0 === c ? "de" : "DE" : !0 === c ? "du" :
                "DU"
        },
        calendar: {
            sameDay: "[ma] LT[-kor]",
            nextDay: "[holnap] LT[-kor]",
            nextWeek: function () {
                return "[" + md[this.day()] + "] LT[-kor]"
            },
            lastDay: "[tegnap] LT[-kor]",
            lastWeek: function () {
                return "[múlt] [" + md[this.day()] + "] LT[-kor]"
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "%s múlva",
            past: "%s",
            s: Ca,
            m: Ca,
            mm: Ca,
            h: Ca,
            hh: Ca,
            d: Ca,
            dd: Ca,
            M: Ca,
            MM: Ca,
            y: Ca,
            yy: Ca
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("hy-am", {
        months: {
            format: "հունվարի փետրվարի մարտի ապրիլի մայիսի հունիսի հուլիսի օգոստոսի սեպտեմբերի հոկտեմբերի նոյեմբերի դեկտեմբերի".split(" "),
            standalone: "հունվար փետրվար մարտ ապրիլ մայիս հունիս հուլիս օգոստոս սեպտեմբեր հոկտեմբեր նոյեմբեր դեկտեմբեր".split(" ")
        },
        monthsShort: "հնվ փտր մրտ ապր մյս հնս հլս օգս սպտ հկտ նմբ դկտ".split(" "),
        weekdays: "կիրակի երկուշաբթի երեքշաբթի չորեքշաբթի հինգշաբթի ուրբաթ շաբաթ".split(" "),
        weekdaysShort: "կրկ երկ երք չրք հնգ ուրբ շբթ".split(" "),
        weekdaysMin: "կրկ երկ երք չրք հնգ ուրբ շբթ".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D MMMM YYYY թ.",
            LLL: "D MMMM YYYY թ., HH:mm",
            LLLL: "dddd, D MMMM YYYY թ., HH:mm"
        },
        calendar: {
            sameDay: "[այսօր] LT",
            nextDay: "[վաղը] LT",
            lastDay: "[երեկ] LT",
            nextWeek: function () {
                return "dddd [օրը ժամը] LT"
            },
            lastWeek: function () {
                return "[անցած] dddd [օրը ժամը] LT"
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "%s հետո",
            past: "%s առաջ",
            s: "մի քանի վայրկյան",
            m: "րոպե",
            mm: "%d րոպե",
            h: "ժամ",
            hh: "%d ժամ",
            d: "օր",
            dd: "%d օր",
            M: "ամիս",
            MM: "%d ամիս",
            y: "տարի",
            yy: "%d տարի"
        },
        meridiemParse: /\u0563\u056b\u0577\u0565\u0580\u057e\u0561|\u0561\u057c\u0561\u057e\u0578\u057f\u057e\u0561|\u0581\u0565\u0580\u0565\u056f\u057e\u0561|\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576/,
        isPM: function (a) {
            return /^(\u0581\u0565\u0580\u0565\u056f\u057e\u0561|\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576)$/.test(a)
        },
        meridiem: function (a) {
            return 4 > a ? "գիշերվա" : 12 > a ? "առավոտվա" : 17 > a ? "ցերեկվա" : "երեկոյան"
        },
        dayOfMonthOrdinalParse: /\d{1,2}|\d{1,2}-(\u056b\u0576|\u0580\u0564)/,
        ordinal: function (a, b) {
            switch (b) {
            case "DDD":
            case "w":
            case "W":
            case "DDDo":
                return 1 === a ? a + "-ին" : a + "-րդ";
            default:
                return a
            }
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("id", {
        months: "Januari Februari Maret April Mei Juni Juli Agustus September Oktober November Desember".split(" "),
        monthsShort: "Jan Feb Mar Apr Mei Jun Jul Ags Sep Okt Nov Des".split(" "),
        weekdays: "Minggu Senin Selasa Rabu Kamis Jumat Sabtu".split(" "),
        weekdaysShort: "Min Sen Sel Rab Kam Jum Sab".split(" "),
        weekdaysMin: "Mg Sn Sl Rb Km Jm Sb".split(" "),
        longDateFormat: {
            LT: "HH.mm",
            LTS: "HH.mm.ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY [pukul] HH.mm",
            LLLL: "dddd, D MMMM YYYY [pukul] HH.mm"
        },
        meridiemParse: /pagi|siang|sore|malam/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "pagi" === b ? a : "siang" === b ? 11 <= a ?
                a : a + 12 : "sore" === b || "malam" === b ? a + 12 : void 0
        },
        meridiem: function (a, b, c) {
            return 11 > a ? "pagi" : 15 > a ? "siang" : 19 > a ? "sore" : "malam"
        },
        calendar: {
            sameDay: "[Hari ini pukul] LT",
            nextDay: "[Besok pukul] LT",
            nextWeek: "dddd [pukul] LT",
            lastDay: "[Kemarin pukul] LT",
            lastWeek: "dddd [lalu pukul] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "dalam %s",
            past: "%s yang lalu",
            s: "beberapa detik",
            m: "semenit",
            mm: "%d menit",
            h: "sejam",
            hh: "%d jam",
            d: "sehari",
            dd: "%d hari",
            M: "sebulan",
            MM: "%d bulan",
            y: "setahun",
            yy: "%d tahun"
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("is", {
        months: "janúar febrúar mars apríl maí júní júlí ágúst september október nóvember desember".split(" "),
        monthsShort: "jan feb mar apr maí jún júl ágú sep okt nóv des".split(" "),
        weekdays: "sunnudagur mánudagur þriðjudagur miðvikudagur fimmtudagur föstudagur laugardagur".split(" "),
        weekdaysShort: "sun mán þri mið fim fös lau".split(" "),
        weekdaysMin: "Su Má Þr Mi Fi Fö La".split(" "),
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY [kl.] H:mm",
            LLLL: "dddd, D. MMMM YYYY [kl.] H:mm"
        },
        calendar: {
            sameDay: "[í dag kl.] LT",
            nextDay: "[á morgun kl.] LT",
            nextWeek: "dddd [kl.] LT",
            lastDay: "[í gær kl.] LT",
            lastWeek: "[síðasta] dddd [kl.] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "eftir %s",
            past: "fyrir %s síðan",
            s: Ma,
            m: Ma,
            mm: Ma,
            h: "klukkustund",
            hh: Ma,
            d: Ma,
            dd: Ma,
            M: Ma,
            MM: Ma,
            y: Ma,
            yy: Ma
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("it", {
        months: "gennaio febbraio marzo aprile maggio giugno luglio agosto settembre ottobre novembre dicembre".split(" "),
        monthsShort: "gen feb mar apr mag giu lug ago set ott nov dic".split(" "),
        weekdays: "domenica lunedì martedì mercoledì giovedì venerdì sabato".split(" "),
        weekdaysShort: "dom lun mar mer gio ven sab".split(" "),
        weekdaysMin: "do lu ma me gi ve sa".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Oggi alle] LT",
            nextDay: "[Domani alle] LT",
            nextWeek: "dddd [alle] LT",
            lastDay: "[Ieri alle] LT",
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                    return "[la scorsa] dddd [alle] LT";
                default:
                    return "[lo scorso] dddd [alle] LT"
                }
            },
            sameElse: "L"
        },
        relativeTime: {
            future: function (a) {
                return (/^[0-9].+$/.test(a) ? "tra" : "in") + " " + a
            },
            past: "%s fa",
            s: "alcuni secondi",
            m: "un minuto",
            mm: "%d minuti",
            h: "un'ora",
            hh: "%d ore",
            d: "un giorno",
            dd: "%d giorni",
            M: "un mese",
            MM: "%d mesi",
            y: "un anno",
            yy: "%d anni"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\u00ba/,
        ordinal: "%dº",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("ja", {
        months: "1月 2月 3月 4月 5月 6月 7月 8月 9月 10月 11月 12月".split(" "),
        monthsShort: "1月 2月 3月 4月 5月 6月 7月 8月 9月 10月 11月 12月".split(" "),
        weekdays: "日曜日 月曜日 火曜日 水曜日 木曜日 金曜日 土曜日".split(" "),
        weekdaysShort: "日月火水木金土".split(""),
        weekdaysMin: "日月火水木金土".split(""),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "YYYY/MM/DD",
            LL: "YYYY年M月D日",
            LLL: "YYYY年M月D日 HH:mm",
            LLLL: "YYYY年M月D日 HH:mm dddd",
            l: "YYYY/MM/DD",
            ll: "YYYY年M月D日",
            lll: "YYYY年M月D日 HH:mm",
            llll: "YYYY年M月D日 HH:mm dddd"
        },
        meridiemParse: /\u5348\u524d|\u5348\u5f8c/i,
        isPM: function (a) {
            return "午後" ===
                a
        },
        meridiem: function (a, b, c) {
            return 12 > a ? "午前" : "午後"
        },
        calendar: {
            sameDay: "[今日] LT",
            nextDay: "[明日] LT",
            nextWeek: "[来週]dddd LT",
            lastDay: "[昨日] LT",
            lastWeek: "[前週]dddd LT",
            sameElse: "L"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\u65e5/,
        ordinal: function (a, b) {
            switch (b) {
            case "d":
            case "D":
            case "DDD":
                return a + "日";
            default:
                return a
            }
        },
        relativeTime: {
            future: "%s後",
            past: "%s前",
            s: "数秒",
            m: "1分",
            mm: "%d分",
            h: "1時間",
            hh: "%d時間",
            d: "1日",
            dd: "%d日",
            M: "1ヶ月",
            MM: "%dヶ月",
            y: "1年",
            yy: "%d年"
        }
    });
    a.defineLocale("jv", {
        months: "Januari Februari Maret April Mei Juni Juli Agustus September Oktober Nopember Desember".split(" "),
        monthsShort: "Jan Feb Mar Apr Mei Jun Jul Ags Sep Okt Nop Des".split(" "),
        weekdays: "Minggu Senen Seloso Rebu Kemis Jemuwah Septu".split(" "),
        weekdaysShort: "Min Sen Sel Reb Kem Jem Sep".split(" "),
        weekdaysMin: "Mg Sn Sl Rb Km Jm Sp".split(" "),
        longDateFormat: {
            LT: "HH.mm",
            LTS: "HH.mm.ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY [pukul] HH.mm",
            LLLL: "dddd, D MMMM YYYY [pukul] HH.mm"
        },
        meridiemParse: /enjing|siyang|sonten|ndalu/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "enjing" === b ? a : "siyang" === b ? 11 <= a ? a : a + 12 : "sonten" === b || "ndalu" === b ? a + 12 : void 0
        },
        meridiem: function (a, b, c) {
            return 11 > a ? "enjing" : 15 > a ? "siyang" : 19 > a ? "sonten" : "ndalu"
        },
        calendar: {
            sameDay: "[Dinten puniko pukul] LT",
            nextDay: "[Mbenjang pukul] LT",
            nextWeek: "dddd [pukul] LT",
            lastDay: "[Kala wingi pukul] LT",
            lastWeek: "dddd [kepengker pukul] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "wonten ing %s",
            past: "%s ingkang kepengker",
            s: "sawetawis detik",
            m: "setunggal menit",
            mm: "%d menit",
            h: "setunggal jam",
            hh: "%d jam",
            d: "sedinten",
            dd: "%d dinten",
            M: "sewulan",
            MM: "%d wulan",
            y: "setaun",
            yy: "%d taun"
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("ka", {
        months: {
            standalone: "იანვარი თებერვალი მარტი აპრილი მაისი ივნისი ივლისი აგვისტო სექტემბერი ოქტომბერი ნოემბერი დეკემბერი".split(" "),
            format: "იანვარს თებერვალს მარტს აპრილის მაისს ივნისს ივლისს აგვისტს სექტემბერს ოქტომბერს ნოემბერს დეკემბერს".split(" ")
        },
        monthsShort: "იან თებ მარ აპრ მაი ივნ ივლ აგვ სექ ოქტ ნოე დეკ".split(" "),
        weekdays: {
            standalone: "კვირა ორშაბათი სამშაბათი ოთხშაბათი ხუთშაბათი პარასკევი შაბათი".split(" "),
            format: "კვირას ორშაბათს სამშაბათს ოთხშაბათს ხუთშაბათს პარასკევს შაბათს".split(" "),
            isFormat: /(\u10ec\u10d8\u10dc\u10d0|\u10e8\u10d4\u10db\u10d3\u10d4\u10d2)/
        },
        weekdaysShort: "კვი ორშ სამ ოთხ ხუთ პარ შაბ".split(" "),
        weekdaysMin: "კვ ორ სა ოთ ხუ პა შა".split(" "),
        longDateFormat: {
            LT: "h:mm A",
            LTS: "h:mm:ss A",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY h:mm A",
            LLLL: "dddd, D MMMM YYYY h:mm A"
        },
        calendar: {
            sameDay: "[დღეს] LT[-ზე]",
            nextDay: "[ხვალ] LT[-ზე]",
            lastDay: "[გუშინ] LT[-ზე]",
            nextWeek: "[შემდეგ] dddd LT[-ზე]",
            lastWeek: "[წინა] dddd LT-ზე",
            sameElse: "L"
        },
        relativeTime: {
            future: function (a) {
                return /(\u10ec\u10d0\u10db\u10d8|\u10ec\u10e3\u10d7\u10d8|\u10e1\u10d0\u10d0\u10d7\u10d8|\u10ec\u10d4\u10da\u10d8)/.test(a) ? a.replace(/\u10d8$/, "ში") : a + "ში"
            },
            past: function (a) {
                return /(\u10ec\u10d0\u10db\u10d8|\u10ec\u10e3\u10d7\u10d8|\u10e1\u10d0\u10d0\u10d7\u10d8|\u10d3\u10e6\u10d4|\u10d7\u10d5\u10d4)/.test(a) ? a.replace(/(\u10d8|\u10d4)$/, "ის უკან") :
                    /\u10ec\u10d4\u10da\u10d8/.test(a) ? a.replace(/\u10ec\u10d4\u10da\u10d8$/, "წლის უკან") : void 0
            },
            s: "რამდენიმე წამი",
            m: "წუთი",
            mm: "%d წუთი",
            h: "საათი",
            hh: "%d საათი",
            d: "დღე",
            dd: "%d დღე",
            M: "თვე",
            MM: "%d თვე",
            y: "წელი",
            yy: "%d წელი"
        },
        dayOfMonthOrdinalParse: /0|1-\u10da\u10d8|\u10db\u10d4-\d{1,2}|\d{1,2}-\u10d4/,
        ordinal: function (a) {
            return 0 === a ? a : 1 === a ? a + "-ლი" : 20 > a || 100 >= a && 0 === a % 20 || 0 === a % 100 ? "მე-" + a : a + "-ე"
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    var oc = {
        "0": "-ші",
        1: "-ші",
        2: "-ші",
        3: "-ші",
        4: "-ші",
        5: "-ші",
        6: "-шы",
        7: "-ші",
        8: "-ші",
        9: "-шы",
        10: "-шы",
        20: "-шы",
        30: "-шы",
        40: "-шы",
        50: "-ші",
        60: "-шы",
        70: "-ші",
        80: "-ші",
        90: "-шы",
        100: "-ші"
    };
    a.defineLocale("kk", {
        months: "қаңтар ақпан наурыз сәуір мамыр маусым шілде тамыз қыркүйек қазан қараша желтоқсан".split(" "),
        monthsShort: "қаң ақп нау сәу мам мау шіл там қыр қаз қар жел".split(" "),
        weekdays: "жексенбі дүйсенбі сейсенбі сәрсенбі бейсенбі жұма сенбі".split(" "),
        weekdaysShort: "жек дүй сей сәр бей жұм сен".split(" "),
        weekdaysMin: "жк дй сй ср бй жм сн".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Бүгін сағат] LT",
            nextDay: "[Ертең сағат] LT",
            nextWeek: "dddd [сағат] LT",
            lastDay: "[Кеше сағат] LT",
            lastWeek: "[Өткен аптаның] dddd [сағат] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s ішінде",
            past: "%s бұрын",
            s: "бірнеше секунд",
            m: "бір минут",
            mm: "%d минут",
            h: "бір сағат",
            hh: "%d сағат",
            d: "бір күн",
            dd: "%d күн",
            M: "бір ай",
            MM: "%d ай",
            y: "бір жыл",
            yy: "%d жыл"
        },
        dayOfMonthOrdinalParse: /\d{1,2}-(\u0448\u0456|\u0448\u044b)/,
        ordinal: function (a) {
            return a + (oc[a] || oc[a % 10] || oc[100 <= a ? 100 : null])
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("km", {
        months: "មករា កុម្ភៈ មីនា មេសា ឧសភា មិថុនា កក្កដា សីហា កញ្ញា តុលា វិច្ឆិកា ធ្នូ".split(" "),
        monthsShort: "មករា កុម្ភៈ មីនា មេសា ឧសភា មិថុនា កក្កដា សីហា កញ្ញា តុលា វិច្ឆិកា ធ្នូ".split(" "),
        weekdays: "អាទិត្យ ច័ន្ទ អង្គារ ពុធ ព្រហស្បតិ៍ សុក្រ សៅរ៍".split(" "),
        weekdaysShort: "អាទិត្យ ច័ន្ទ អង្គារ ពុធ ព្រហស្បតិ៍ សុក្រ សៅរ៍".split(" "),
        weekdaysMin: "អាទិត្យ ច័ន្ទ អង្គារ ពុធ ព្រហស្បតិ៍ សុក្រ សៅរ៍".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[ថ្ងៃនេះ ម៉ោង] LT",
            nextDay: "[ស្អែក ម៉ោង] LT",
            nextWeek: "dddd [ម៉ោង] LT",
            lastDay: "[ម្សិលមិញ ម៉ោង] LT",
            lastWeek: "dddd [សប្តាហ៍មុន] [ម៉ោង] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%sទៀត",
            past: "%sមុន",
            s: "ប៉ុន្មានវិនាទី",
            m: "មួយនាទី",
            mm: "%d នាទី",
            h: "មួយម៉ោង",
            hh: "%d ម៉ោង",
            d: "មួយថ្ងៃ",
            dd: "%d ថ្ងៃ",
            M: "មួយខែ",
            MM: "%d ខែ",
            y: "មួយឆ្នាំ",
            yy: "%d ឆ្នាំ"
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    var De = {
            1: "೧",
            2: "೨",
            3: "೩",
            4: "೪",
            5: "೫",
            6: "೬",
            7: "೭",
            8: "೮",
            9: "೯",
            "0": "೦"
        },
        Ee = {
            "೧": "1",
            "೨": "2",
            "೩": "3",
            "೪": "4",
            "೫": "5",
            "೬": "6",
            "೭": "7",
            "೮": "8",
            "೯": "9",
            "೦": "0"
        };
    a.defineLocale("kn", {
        months: "ಜನವರಿ ಫೆಬ್ರವರಿ ಮಾರ್ಚ್ ಏಪ್ರಿಲ್ ಮೇ ಜೂನ್ ಜುಲೈ ಆಗಸ್ಟ್ ಸೆಪ್ಟೆಂಬರ್ ಅಕ್ಟೋಬರ್ ನವೆಂಬರ್ ಡಿಸೆಂಬರ್".split(" "),
        monthsShort: "ಜನ ಫೆಬ್ರ ಮಾರ್ಚ್ ಏಪ್ರಿಲ್ ಮೇ ಜೂನ್ ಜುಲೈ ಆಗಸ್ಟ್ ಸೆಪ್ಟೆಂಬ ಅಕ್ಟೋಬ ನವೆಂಬ ಡಿಸೆಂಬ".split(" "),
        monthsParseExact: !0,
        weekdays: "ಭಾನುವಾರ ಸೋಮವಾರ ಮಂಗಳವಾರ ಬುಧವಾರ ಗುರುವಾರ ಶುಕ್ರವಾರ ಶನಿವಾರ".split(" "),
        weekdaysShort: "ಭಾನು ಸೋಮ ಮಂಗಳ ಬುಧ ಗುರು ಶುಕ್ರ ಶನಿ".split(" "),
        weekdaysMin: "ಭಾ ಸೋ ಮಂ ಬು ಗು ಶು ಶ".split(" "),
        longDateFormat: {
            LT: "A h:mm",
            LTS: "A h:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY, A h:mm",
            LLLL: "dddd, D MMMM YYYY, A h:mm"
        },
        calendar: {
            sameDay: "[ಇಂದು] LT",
            nextDay: "[ನಾಳೆ] LT",
            nextWeek: "dddd, LT",
            lastDay: "[ನಿನ್ನೆ] LT",
            lastWeek: "[ಕೊನೆಯ] dddd, LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s ನಂತರ",
            past: "%s ಹಿಂದೆ",
            s: "ಕೆಲವು ಕ್ಷಣಗಳು",
            m: "ಒಂದು ನಿಮಿಷ",
            mm: "%d ನಿಮಿಷ",
            h: "ಒಂದು ಗಂಟೆ",
            hh: "%d ಗಂಟೆ",
            d: "ಒಂದು ದಿನ",
            dd: "%d ದಿನ",
            M: "ಒಂದು ತಿಂಗಳು",
            MM: "%d ತಿಂಗಳು",
            y: "ಒಂದು ವರ್ಷ",
            yy: "%d ವರ್ಷ"
        },
        preparse: function (a) {
            return a.replace(/[\u0ce7\u0ce8\u0ce9\u0cea\u0ceb\u0cec\u0ced\u0cee\u0cef\u0ce6]/g, function (a) {
                return Ee[a]
            })
        },
        postformat: function (a) {
            return a.replace(/\d/g, function (a) {
                return De[a]
            })
        },
        meridiemParse: /\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf|\u0cac\u0cc6\u0cb3\u0cbf\u0c97\u0ccd\u0c97\u0cc6|\u0cae\u0ca7\u0ccd\u0caf\u0cbe\u0cb9\u0ccd\u0ca8|\u0cb8\u0c82\u0c9c\u0cc6/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "ರಾತ್ರಿ" === b ? 4 > a ? a : a + 12 : "ಬೆಳಿಗ್ಗೆ" === b ? a : "ಮಧ್ಯಾಹ್ನ" === b ? 10 <= a ? a : a + 12 : "ಸಂಜೆ" === b ? a + 12 : void 0
        },
        meridiem: function (a, b, c) {
            return 4 > a ? "ರಾತ್ರಿ" :
                10 > a ? "ಬೆಳಿಗ್ಗೆ" : 17 > a ? "ಮಧ್ಯಾಹ್ನ" : 20 > a ? "ಸಂಜೆ" : "ರಾತ್ರಿ"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(\u0ca8\u0cc6\u0cd5)/,
        ordinal: function (a) {
            return a + "ನೇ"
        },
        week: {
            dow: 0,
            doy: 6
        }
    });
    a.defineLocale("ko", {
        months: "1월 2월 3월 4월 5월 6월 7월 8월 9월 10월 11월 12월".split(" "),
        monthsShort: "1월 2월 3월 4월 5월 6월 7월 8월 9월 10월 11월 12월".split(" "),
        weekdays: "일요일 월요일 화요일 수요일 목요일 금요일 토요일".split(" "),
        weekdaysShort: "일월화수목금토".split(""),
        weekdaysMin: "일월화수목금토".split(""),
        longDateFormat: {
            LT: "A h:mm",
            LTS: "A h:mm:ss",
            L: "YYYY.MM.DD",
            LL: "YYYY년 MMMM D일",
            LLL: "YYYY년 MMMM D일 A h:mm",
            LLLL: "YYYY년 MMMM D일 dddd A h:mm",
            l: "YYYY.MM.DD",
            ll: "YYYY년 MMMM D일",
            lll: "YYYY년 MMMM D일 A h:mm",
            llll: "YYYY년 MMMM D일 dddd A h:mm"
        },
        calendar: {
            sameDay: "오늘 LT",
            nextDay: "내일 LT",
            nextWeek: "dddd LT",
            lastDay: "어제 LT",
            lastWeek: "지난주 dddd LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s 후",
            past: "%s 전",
            s: "몇 초",
            ss: "%d초",
            m: "1분",
            mm: "%d분",
            h: "한 시간",
            hh: "%d시간",
            d: "하루",
            dd: "%d일",
            M: "한 달",
            MM: "%d달",
            y: "일 년",
            yy: "%d년"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\uc77c/,
        ordinal: "%d일",
        meridiemParse: /\uc624\uc804|\uc624\ud6c4/,
        isPM: function (a) {
            return "오후" === a
        },
        meridiem: function (a, b, c) {
            return 12 > a ? "오전" : "오후"
        }
    });
    var pc = {
        "0": "-чү",
        1: "-чи",
        2: "-чи",
        3: "-чү",
        4: "-чү",
        5: "-чи",
        6: "-чы",
        7: "-чи",
        8: "-чи",
        9: "-чу",
        10: "-чу",
        20: "-чы",
        30: "-чу",
        40: "-чы",
        50: "-чү",
        60: "-чы",
        70: "-чи",
        80: "-чи",
        90: "-чу",
        100: "-чү"
    };
    a.defineLocale("ky", {
        months: "январь февраль март апрель май июнь июль август сентябрь октябрь ноябрь декабрь".split(" "),
        monthsShort: "янв фев март апр май июнь июль авг сен окт ноя дек".split(" "),
        weekdays: "Жекшемби Дүйшөмбү Шейшемби Шаршемби Бейшемби Жума Ишемби".split(" "),
        weekdaysShort: "Жек Дүй Шей Шар Бей Жум Ише".split(" "),
        weekdaysMin: "Жк Дй Шй Шр Бй Жм Иш".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Бүгүн саат] LT",
            nextDay: "[Эртең саат] LT",
            nextWeek: "dddd [саат] LT",
            lastDay: "[Кече саат] LT",
            lastWeek: "[Өткен аптанын] dddd [күнү] [саат] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s ичинде",
            past: "%s мурун",
            s: "бирнече секунд",
            m: "бир мүнөт",
            mm: "%d мүнөт",
            h: "бир саат",
            hh: "%d саат",
            d: "бир күн",
            dd: "%d күн",
            M: "бир ай",
            MM: "%d ай",
            y: "бир жыл",
            yy: "%d жыл"
        },
        dayOfMonthOrdinalParse: /\d{1,2}-(\u0447\u0438|\u0447\u044b|\u0447\u04af|\u0447\u0443)/,
        ordinal: function (a) {
            return a + (pc[a] || pc[a % 10] || pc[100 <= a ? 100 : null])
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("lb", {
        months: "Januar Februar Mäerz Abrëll Mee Juni Juli August September Oktober November Dezember".split(" "),
        monthsShort: "Jan. Febr. Mrz. Abr. Mee Jun. Jul. Aug. Sept. Okt. Nov. Dez.".split(" "),
        monthsParseExact: !0,
        weekdays: "Sonndeg Méindeg Dënschdeg Mëttwoch Donneschdeg Freideg Samschdeg".split(" "),
        weekdaysShort: "So. Mé. Dë. Më. Do. Fr. Sa.".split(" "),
        weekdaysMin: "So Mé Dë Më Do Fr Sa".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "H:mm [Auer]",
            LTS: "H:mm:ss [Auer]",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY H:mm [Auer]",
            LLLL: "dddd, D. MMMM YYYY H:mm [Auer]"
        },
        calendar: {
            sameDay: "[Haut um] LT",
            sameElse: "L",
            nextDay: "[Muer um] LT",
            nextWeek: "dddd [um] LT",
            lastDay: "[Gëschter um] LT",
            lastWeek: function () {
                switch (this.day()) {
                case 2:
                case 4:
                    return "[Leschten] dddd [um] LT";
                default:
                    return "[Leschte] dddd [um] LT"
                }
            }
        },
        relativeTime: {
            future: function (a) {
                var b = a.substr(0, a.indexOf(" "));
                return vb(b) ? "a " + a : "an " + a
            },
            past: function (a) {
                var b = a.substr(0,
                    a.indexOf(" "));
                return vb(b) ? "viru " + a : "virun " + a
            },
            s: "e puer Sekonnen",
            m: ub,
            mm: "%d Minutten",
            h: ub,
            hh: "%d Stonnen",
            d: ub,
            dd: "%d Deeg",
            M: ub,
            MM: "%d Méint",
            y: ub,
            yy: "%d Joer"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("lo", {
        months: "ມັງກອນ ກຸມພາ ມີນາ ເມສາ ພຶດສະພາ ມິຖຸນາ ກໍລະກົດ ສິງຫາ ກັນຍາ ຕຸລາ ພະຈິກ ທັນວາ".split(" "),
        monthsShort: "ມັງກອນ ກຸມພາ ມີນາ ເມສາ ພຶດສະພາ ມິຖຸນາ ກໍລະກົດ ສິງຫາ ກັນຍາ ຕຸລາ ພະຈິກ ທັນວາ".split(" "),
        weekdays: "ອາທິດ ຈັນ ອັງຄານ ພຸດ ພະຫັດ ສຸກ ເສົາ".split(" "),
        weekdaysShort: "ທິດ ຈັນ ອັງຄານ ພຸດ ພະຫັດ ສຸກ ເສົາ".split(" "),
        weekdaysMin: "ທ ຈ ອຄ ພ ພຫ ສກ ສ".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "ວັນdddd D MMMM YYYY HH:mm"
        },
        meridiemParse: /\u0e95\u0ead\u0e99\u0ec0\u0e8a\u0ebb\u0ec9\u0eb2|\u0e95\u0ead\u0e99\u0ec1\u0ea5\u0e87/,
        isPM: function (a) {
            return "ຕອນແລງ" === a
        },
        meridiem: function (a, b, c) {
            return 12 > a ? "ຕອນເຊົ້າ" : "ຕອນແລງ"
        },
        calendar: {
            sameDay: "[ມື້ນີ້ເວລາ] LT",
            nextDay: "[ມື້ອື່ນເວລາ] LT",
            nextWeek: "[ວັນ]dddd[ໜ້າເວລາ] LT",
            lastDay: "[ມື້ວານນີ້ເວລາ] LT",
            lastWeek: "[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "ອີກ %s",
            past: "%sຜ່ານມາ",
            s: "ບໍ່ເທົ່າໃດວິນາທີ",
            m: "1 ນາທີ",
            mm: "%d ນາທີ",
            h: "1 ຊົ່ວໂມງ",
            hh: "%d ຊົ່ວໂມງ",
            d: "1 ມື້",
            dd: "%d ມື້",
            M: "1 ເດືອນ",
            MM: "%d ເດືອນ",
            y: "1 ປີ",
            yy: "%d ປີ"
        },
        dayOfMonthOrdinalParse: /(\u0e97\u0eb5\u0ec8)\d{1,2}/,
        ordinal: function (a) {
            return "ທີ່" + a
        }
    });
    var Ld = {
        m: "minutė_minutės_minutę",
        mm: "minutės_minučių_minutes",
        h: "valanda_valandos_valandą",
        hh: "valandos_valandų_valandas",
        d: "diena_dienos_dieną",
        dd: "dienos_dienų_dienas",
        M: "mėnuo_mėnesio_mėnesį",
        MM: "mėnesiai_mėnesių_mėnesius",
        y: "metai_metų_metus",
        yy: "metai_metų_metus"
    };
    a.defineLocale("lt", {
        months: {
            format: "sausio vasario kovo balandžio gegužės birželio liepos rugpjūčio rugsėjo spalio lapkričio gruodžio".split(" "),
            standalone: "sausis vasaris kovas balandis gegužė birželis liepa rugpjūtis rugsėjis spalis lapkritis gruodis".split(" "),
            isFormat: /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/
        },
        monthsShort: "sau vas kov bal geg bir lie rgp rgs spa lap grd".split(" "),
        weekdays: {
            format: "sekmadienį pirmadienį antradienį trečiadienį ketvirtadienį penktadienį šeštadienį".split(" "),
            standalone: "sekmadienis pirmadienis antradienis trečiadienis ketvirtadienis penktadienis šeštadienis".split(" "),
            isFormat: /dddd HH:mm/
        },
        weekdaysShort: "Sek Pir Ant Tre Ket Pen Šeš".split(" "),
        weekdaysMin: "S P A T K Pn Š".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "YYYY-MM-DD",
            LL: "YYYY [m.] MMMM D [d.]",
            LLL: "YYYY [m.] MMMM D [d.], HH:mm [val.]",
            LLLL: "YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",
            l: "YYYY-MM-DD",
            ll: "YYYY [m.] MMMM D [d.]",
            lll: "YYYY [m.] MMMM D [d.], HH:mm [val.]",
            llll: "YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"
        },
        calendar: {
            sameDay: "[Šiandien] LT",
            nextDay: "[Rytoj] LT",
            nextWeek: "dddd LT",
            lastDay: "[Vakar] LT",
            lastWeek: "[Praėjusį] dddd LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "po %s",
            past: "prieš %s",
            s: function (a, b, c, d) {
                return b ? "kelios sekundės" : d ? "kelių sekundžių" : "kelias sekundes"
            },
            m: kb,
            mm: wb,
            h: kb,
            hh: wb,
            d: kb,
            dd: wb,
            M: kb,
            MM: wb,
            y: kb,
            yy: wb
        },
        dayOfMonthOrdinalParse: /\d{1,2}-oji/,
        ordinal: function (a) {
            return a + "-oji"
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    var Vc = {
        m: ["minūtes", "minūtēm", "minūte", "minūtes"],
        mm: ["minūtes", "minūtēm", "minūte", "minūtes"],
        h: ["stundas", "stundām", "stunda", "stundas"],
        hh: ["stundas", "stundām", "stunda", "stundas"],
        d: ["dienas",
            "dienām", "diena", "dienas"
        ],
        dd: ["dienas", "dienām", "diena", "dienas"],
        M: ["mēneša", "mēnešiem", "mēnesis", "mēneši"],
        MM: ["mēneša", "mēnešiem", "mēnesis", "mēneši"],
        y: ["gada", "gadiem", "gads", "gadi"],
        yy: ["gada", "gadiem", "gads", "gadi"]
    };
    a.defineLocale("lv", {
        months: "janvāris februāris marts aprīlis maijs jūnijs jūlijs augusts septembris oktobris novembris decembris".split(" "),
        monthsShort: "jan feb mar apr mai jūn jūl aug sep okt nov dec".split(" "),
        weekdays: "svētdiena pirmdiena otrdiena trešdiena ceturtdiena piektdiena sestdiena".split(" "),
        weekdaysShort: "Sv P O T C Pk S".split(" "),
        weekdaysMin: "Sv P O T C Pk S".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY.",
            LL: "YYYY. [gada] D. MMMM",
            LLL: "YYYY. [gada] D. MMMM, HH:mm",
            LLLL: "YYYY. [gada] D. MMMM, dddd, HH:mm"
        },
        calendar: {
            sameDay: "[Šodien pulksten] LT",
            nextDay: "[Rīt pulksten] LT",
            nextWeek: "dddd [pulksten] LT",
            lastDay: "[Vakar pulksten] LT",
            lastWeek: "[Pagājušā] dddd [pulksten] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "pēc %s",
            past: "pirms %s",
            s: function (a, b) {
                return b ? "dažas sekundes" : "dažām sekundēm"
            },
            m: yb,
            mm: xb,
            h: yb,
            hh: xb,
            d: yb,
            dd: xb,
            M: yb,
            MM: xb,
            y: yb,
            yy: xb
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    var Sa = {
        words: {
            m: ["jedan minut", "jednog minuta"],
            mm: ["minut", "minuta", "minuta"],
            h: ["jedan sat", "jednog sata"],
            hh: ["sat", "sata", "sati"],
            dd: ["dan", "dana", "dana"],
            MM: ["mjesec", "mjeseca",
                "mjeseci"
            ],
            yy: ["godina", "godine", "godina"]
        },
        correctGrammaticalCase: function (a, b) {
            return 1 === a ? b[0] : 2 <= a && 4 >= a ? b[1] : b[2]
        },
        translate: function (a, b, c) {
            var d = Sa.words[c];
            return 1 === c.length ? b ? d[0] : d[1] : a + " " + Sa.correctGrammaticalCase(a, d)
        }
    };
    a.defineLocale("me", {
        months: "januar februar mart april maj jun jul avgust septembar oktobar novembar decembar".split(" "),
        monthsShort: "jan. feb. mar. apr. maj jun jul avg. sep. okt. nov. dec.".split(" "),
        monthsParseExact: !0,
        weekdays: "nedjelja ponedjeljak utorak srijeda četvrtak petak subota".split(" "),
        weekdaysShort: "ned. pon. uto. sri. čet. pet. sub.".split(" "),
        weekdaysMin: "ne po ut sr če pe su".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY H:mm",
            LLLL: "dddd, D. MMMM YYYY H:mm"
        },
        calendar: {
            sameDay: "[danas u] LT",
            nextDay: "[sjutra u] LT",
            nextWeek: function () {
                switch (this.day()) {
                case 0:
                    return "[u] [nedjelju] [u] LT";
                case 3:
                    return "[u] [srijedu] [u] LT";
                case 6:
                    return "[u] [subotu] [u] LT";
                case 1:
                case 2:
                case 4:
                case 5:
                    return "[u] dddd [u] LT"
                }
            },
            lastDay: "[juče u] LT",
            lastWeek: function () {
                return "[prošle] [nedjelje] [u] LT;[prošlog] [ponedjeljka] [u] LT;[prošlog] [utorka] [u] LT;[prošle] [srijede] [u] LT;[prošlog] [četvrtka] [u] LT;[prošlog] [petka] [u] LT;[prošle] [subote] [u] LT".split(";")[this.day()]
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "za %s",
            past: "prije %s",
            s: "nekoliko sekundi",
            m: Sa.translate,
            mm: Sa.translate,
            h: Sa.translate,
            hh: Sa.translate,
            d: "dan",
            dd: Sa.translate,
            M: "mjesec",
            MM: Sa.translate,
            y: "godinu",
            yy: Sa.translate
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("mi", {
        months: "Kohi-tāte Hui-tanguru Poutū-te-rangi Paenga-whāwhā Haratua Pipiri Hōngoingoi Here-turi-kōkā Mahuru Whiringa-ā-nuku Whiringa-ā-rangi Hakihea".split(" "),
        monthsShort: "Kohi Hui Pou Pae Hara Pipi Hōngoi Here Mahu Whi-nu Whi-ra Haki".split(" "),
        monthsRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,
        monthsStrictRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,
        monthsShortRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,
        monthsShortStrictRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,
        weekdays: "Rātapu Mane Tūrei Wenerei Tāite Paraire Hātarei".split(" "),
        weekdaysShort: "Ta Ma Tū We Tāi Pa Hā".split(" "),
        weekdaysMin: "Ta Ma Tū We Tāi Pa Hā".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY [i] HH:mm",
            LLLL: "dddd, D MMMM YYYY [i] HH:mm"
        },
        calendar: {
            sameDay: "[i teie mahana, i] LT",
            nextDay: "[apopo i] LT",
            nextWeek: "dddd [i] LT",
            lastDay: "[inanahi i] LT",
            lastWeek: "dddd [whakamutunga i] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "i roto i %s",
            past: "%s i mua",
            s: "te hēkona ruarua",
            m: "he meneti",
            mm: "%d meneti",
            h: "te haora",
            hh: "%d haora",
            d: "he ra",
            dd: "%d ra",
            M: "he marama",
            MM: "%d marama",
            y: "he tau",
            yy: "%d tau"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\u00ba/,
        ordinal: "%dº",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("mk", {
        months: "јануари февруари март април мај јуни јули август септември октомври ноември декември".split(" "),
        monthsShort: "јан фев мар апр мај јун јул авг сеп окт ное дек".split(" "),
        weekdays: "недела понеделник вторник среда четврток петок сабота".split(" "),
        weekdaysShort: "нед пон вто сре чет пет саб".split(" "),
        weekdaysMin: "нe пo вт ср че пе сa".split(" "),
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "D.MM.YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY H:mm",
            LLLL: "dddd, D MMMM YYYY H:mm"
        },
        calendar: {
            sameDay: "[Денес во] LT",
            nextDay: "[Утре во] LT",
            nextWeek: "[Во] dddd [во] LT",
            lastDay: "[Вчера во] LT",
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                case 3:
                case 6:
                    return "[Изминатата] dddd [во] LT";
                case 1:
                case 2:
                case 4:
                case 5:
                    return "[Изминатиот] dddd [во] LT"
                }
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "после %s",
            past: "пред %s",
            s: "неколку секунди",
            m: "минута",
            mm: "%d минути",
            h: "час",
            hh: "%d часа",
            d: "ден",
            dd: "%d дена",
            M: "месец",
            MM: "%d месеци",
            y: "година",
            yy: "%d години"
        },
        dayOfMonthOrdinalParse: /\d{1,2}-(\u0435\u0432|\u0435\u043d|\u0442\u0438|\u0432\u0438|\u0440\u0438|\u043c\u0438)/,
        ordinal: function (a) {
            var b =
                a % 10,
                c = a % 100;
            return 0 === a ? a + "-ев" : 0 === c ? a + "-ен" : 10 < c && 20 > c ? a + "-ти" : 1 === b ? a + "-ви" : 2 === b ? a + "-ри" : 7 === b || 8 === b ? a + "-ми" : a + "-ти"
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("ml", {
        months: "ജനുവരി ഫെബ്രുവരി മാർച്ച് ഏപ്രിൽ മേയ് ജൂൺ ജൂലൈ ഓഗസ്റ്റ് സെപ്റ്റംബർ ഒക്ടോബർ നവംബർ ഡിസംബർ".split(" "),
        monthsShort: "ജനു. ഫെബ്രു. മാർ. ഏപ്രി. മേയ് ജൂൺ ജൂലൈ. ഓഗ. സെപ്റ്റ. ഒക്ടോ. നവം. ഡിസം.".split(" "),
        monthsParseExact: !0,
        weekdays: "ഞായറാഴ്ച തിങ്കളാഴ്ച ചൊവ്വാഴ്ച ബുധനാഴ്ച വ്യാഴാഴ്ച വെള്ളിയാഴ്ച ശനിയാഴ്ച".split(" "),
        weekdaysShort: "ഞായർ തിങ്കൾ ചൊവ്വ ബുധൻ വ്യാഴം വെള്ളി ശനി".split(" "),
        weekdaysMin: "ഞാ തി ചൊ ബു വ്യാ വെ ശ".split(" "),
        longDateFormat: {
            LT: "A h:mm -നു",
            LTS: "A h:mm:ss -നു",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY, A h:mm -നു",
            LLLL: "dddd, D MMMM YYYY, A h:mm -നു"
        },
        calendar: {
            sameDay: "[ഇന്ന്] LT",
            nextDay: "[നാളെ] LT",
            nextWeek: "dddd, LT",
            lastDay: "[ഇന്നലെ] LT",
            lastWeek: "[കഴിഞ്ഞ] dddd, LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s കഴിഞ്ഞ്",
            past: "%s മുൻപ്",
            s: "അൽപ നിമിഷങ്ങൾ",
            m: "ഒരു മിനിറ്റ്",
            mm: "%d മിനിറ്റ്",
            h: "ഒരു മണിക്കൂർ",
            hh: "%d മണിക്കൂർ",
            d: "ഒരു ദിവസം",
            dd: "%d ദിവസം",
            M: "ഒരു മാസം",
            MM: "%d മാസം",
            y: "ഒരു വർഷം",
            yy: "%d വർഷം"
        },
        meridiemParse: /\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f|\u0d30\u0d3e\u0d35\u0d3f\u0d32\u0d46|\u0d09\u0d1a\u0d4d\u0d1a \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d|\u0d35\u0d48\u0d15\u0d41\u0d28\u0d4d\u0d28\u0d47\u0d30\u0d02|\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f/i,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "രാത്രി" === b && 4 <= a || "ഉച്ച കഴിഞ്ഞ്" === b || "വൈകുന്നേരം" === b ? a + 12 : a
        },
        meridiem: function (a, b, c) {
            return 4 > a ? "രാത്രി" : 12 > a ? "രാവിലെ" : 17 > a ? "ഉച്ച കഴിഞ്ഞ്" : 20 > a ? "വൈകുന്നേരം" :
                "രാത്രി"
        }
    });
    var Fe = {
            1: "१",
            2: "२",
            3: "३",
            4: "४",
            5: "५",
            6: "६",
            7: "७",
            8: "८",
            9: "९",
            "0": "०"
        },
        Ge = {
            "१": "1",
            "२": "2",
            "३": "3",
            "४": "4",
            "५": "5",
            "६": "6",
            "७": "7",
            "८": "8",
            "९": "9",
            "०": "0"
        };
    a.defineLocale("mr", {
        months: "जानेवारी फेब्रुवारी मार्च एप्रिल मे जून जुलै ऑगस्ट सप्टेंबर ऑक्टोबर नोव्हेंबर डिसेंबर".split(" "),
        monthsShort: "जाने. फेब्रु. मार्च. एप्रि. मे. जून. जुलै. ऑग. सप्टें. ऑक्टो. नोव्हें. डिसें.".split(" "),
        monthsParseExact: !0,
        weekdays: "रविवार सोमवार मंगळवार बुधवार गुरूवार शुक्रवार शनिवार".split(" "),
        weekdaysShort: "रवि सोम मंगळ बुध गुरू शुक्र शनि".split(" "),
        weekdaysMin: "र सो मं बु गु शु श".split(" "),
        longDateFormat: {
            LT: "A h:mm वाजता",
            LTS: "A h:mm:ss वाजता",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY, A h:mm वाजता",
            LLLL: "dddd, D MMMM YYYY, A h:mm वाजता"
        },
        calendar: {
            sameDay: "[आज] LT",
            nextDay: "[उद्या] LT",
            nextWeek: "dddd, LT",
            lastDay: "[काल] LT",
            lastWeek: "[मागील] dddd, LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%sमध्ये",
            past: "%sपूर्वी",
            s: Da,
            m: Da,
            mm: Da,
            h: Da,
            hh: Da,
            d: Da,
            dd: Da,
            M: Da,
            MM: Da,
            y: Da,
            yy: Da
        },
        preparse: function (a) {
            return a.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g, function (a) {
                return Ge[a]
            })
        },
        postformat: function (a) {
            return a.replace(/\d/g,
                function (a) {
                    return Fe[a]
                })
        },
        meridiemParse: /\u0930\u093e\u0924\u094d\u0930\u0940|\u0938\u0915\u093e\u0933\u0940|\u0926\u0941\u092a\u093e\u0930\u0940|\u0938\u093e\u092f\u0902\u0915\u093e\u0933\u0940/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "रात्री" === b ? 4 > a ? a : a + 12 : "सकाळी" === b ? a : "दुपारी" === b ? 10 <= a ? a : a + 12 : "सायंकाळी" === b ? a + 12 : void 0
        },
        meridiem: function (a, b, c) {
            return 4 > a ? "रात्री" :
                10 > a ? "सकाळी" : 17 > a ? "दुपारी" : 20 > a ? "सायंकाळी" : "रात्री"
        },
        week: {
            dow: 0,
            doy: 6
        }
    });
    a.defineLocale("ms-my", {
        months: "Januari Februari Mac April Mei Jun Julai Ogos September Oktober November Disember".split(" "),
        monthsShort: "Jan Feb Mac Apr Mei Jun Jul Ogs Sep Okt Nov Dis".split(" "),
        weekdays: "Ahad Isnin Selasa Rabu Khamis Jumaat Sabtu".split(" "),
        weekdaysShort: "Ahd Isn Sel Rab Kha Jum Sab".split(" "),
        weekdaysMin: "Ah Is Sl Rb Km Jm Sb".split(" "),
        longDateFormat: {
            LT: "HH.mm",
            LTS: "HH.mm.ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY [pukul] HH.mm",
            LLLL: "dddd, D MMMM YYYY [pukul] HH.mm"
        },
        meridiemParse: /pagi|tengahari|petang|malam/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "pagi" === b ? a : "tengahari" === b ? 11 <= a ? a : a + 12 : "petang" === b || "malam" === b ? a + 12 : void 0
        },
        meridiem: function (a, b, c) {
            return 11 > a ? "pagi" : 15 > a ? "tengahari" : 19 > a ? "petang" : "malam"
        },
        calendar: {
            sameDay: "[Hari ini pukul] LT",
            nextDay: "[Esok pukul] LT",
            nextWeek: "dddd [pukul] LT",
            lastDay: "[Kelmarin pukul] LT",
            lastWeek: "dddd [lepas pukul] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "dalam %s",
            past: "%s yang lepas",
            s: "beberapa saat",
            m: "seminit",
            mm: "%d minit",
            h: "sejam",
            hh: "%d jam",
            d: "sehari",
            dd: "%d hari",
            M: "sebulan",
            MM: "%d bulan",
            y: "setahun",
            yy: "%d tahun"
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("ms", {
        months: "Januari Februari Mac April Mei Jun Julai Ogos September Oktober November Disember".split(" "),
        monthsShort: "Jan Feb Mac Apr Mei Jun Jul Ogs Sep Okt Nov Dis".split(" "),
        weekdays: "Ahad Isnin Selasa Rabu Khamis Jumaat Sabtu".split(" "),
        weekdaysShort: "Ahd Isn Sel Rab Kha Jum Sab".split(" "),
        weekdaysMin: "Ah Is Sl Rb Km Jm Sb".split(" "),
        longDateFormat: {
            LT: "HH.mm",
            LTS: "HH.mm.ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY [pukul] HH.mm",
            LLLL: "dddd, D MMMM YYYY [pukul] HH.mm"
        },
        meridiemParse: /pagi|tengahari|petang|malam/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "pagi" === b ? a : "tengahari" === b ? 11 <= a ? a : a + 12 : "petang" === b || "malam" === b ? a + 12 : void 0
        },
        meridiem: function (a,
            b, c) {
            return 11 > a ? "pagi" : 15 > a ? "tengahari" : 19 > a ? "petang" : "malam"
        },
        calendar: {
            sameDay: "[Hari ini pukul] LT",
            nextDay: "[Esok pukul] LT",
            nextWeek: "dddd [pukul] LT",
            lastDay: "[Kelmarin pukul] LT",
            lastWeek: "dddd [lepas pukul] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "dalam %s",
            past: "%s yang lepas",
            s: "beberapa saat",
            m: "seminit",
            mm: "%d minit",
            h: "sejam",
            hh: "%d jam",
            d: "sehari",
            dd: "%d hari",
            M: "sebulan",
            MM: "%d bulan",
            y: "setahun",
            yy: "%d tahun"
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    var He = {
            1: "၁",
            2: "၂",
            3: "၃",
            4: "၄",
            5: "၅",
            6: "၆",
            7: "၇",
            8: "၈",
            9: "၉",
            "0": "၀"
        },
        Ie = {
            "၁": "1",
            "၂": "2",
            "၃": "3",
            "၄": "4",
            "၅": "5",
            "၆": "6",
            "၇": "7",
            "၈": "8",
            "၉": "9",
            "၀": "0"
        };
    a.defineLocale("my", {
        months: "ဇန်နဝါရီ ဖေဖော်ဝါရီ မတ် ဧပြီ မေ ဇွန် ဇူလိုင် သြဂုတ် စက်တင်ဘာ အောက်တိုဘာ နိုဝင်ဘာ ဒီဇင်ဘာ".split(" "),
        monthsShort: "ဇန် ဖေ မတ် ပြီ မေ ဇွန် လိုင် သြ စက် အောက် နို ဒီ".split(" "),
        weekdays: "တနင်္ဂနွေ တနင်္လာ အင်္ဂါ ဗုဒ္ဓဟူး ကြာသပတေး သောကြာ စနေ".split(" "),
        weekdaysShort: "နွေ လာ ဂါ ဟူး ကြာ သော နေ".split(" "),
        weekdaysMin: "နွေ လာ ဂါ ဟူး ကြာ သော နေ".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[ယနေ.] LT [မှာ]",
            nextDay: "[မနက်ဖြန်] LT [မှာ]",
            nextWeek: "dddd LT [မှာ]",
            lastDay: "[မနေ.က] LT [မှာ]",
            lastWeek: "[ပြီးခဲ့သော] dddd LT [မှာ]",
            sameElse: "L"
        },
        relativeTime: {
            future: "လာမည့် %s မှာ",
            past: "လွန်ခဲ့သော %s က",
            s: "စက္ကန်.အနည်းငယ်",
            m: "တစ်မိနစ်",
            mm: "%d မိနစ်",
            h: "တစ်နာရီ",
            hh: "%d နာရီ",
            d: "တစ်ရက်",
            dd: "%d ရက်",
            M: "တစ်လ",
            MM: "%d လ",
            y: "တစ်နှစ်",
            yy: "%d နှစ်"
        },
        preparse: function (a) {
            return a.replace(/[\u1041\u1042\u1043\u1044\u1045\u1046\u1047\u1048\u1049\u1040]/g, function (a) {
                return Ie[a]
            })
        },
        postformat: function (a) {
            return a.replace(/\d/g, function (a) {
                return He[a]
            })
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("nb", {
        months: "januar februar mars april mai juni juli august september oktober november desember".split(" "),
        monthsShort: "jan. feb. mars april mai juni juli aug. sep. okt. nov. des.".split(" "),
        monthsParseExact: !0,
        weekdays: "søndag mandag tirsdag onsdag torsdag fredag lørdag".split(" "),
        weekdaysShort: "sø. ma. ti. on. to. fr. lø.".split(" "),
        weekdaysMin: "sø ma ti on to fr lø".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY [kl.] HH:mm",
            LLLL: "dddd D. MMMM YYYY [kl.] HH:mm"
        },
        calendar: {
            sameDay: "[i dag kl.] LT",
            nextDay: "[i morgen kl.] LT",
            nextWeek: "dddd [kl.] LT",
            lastDay: "[i går kl.] LT",
            lastWeek: "[forrige] dddd [kl.] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "om %s",
            past: "%s siden",
            s: "noen sekunder",
            m: "ett minutt",
            mm: "%d minutter",
            h: "en time",
            hh: "%d timer",
            d: "en dag",
            dd: "%d dager",
            M: "en måned",
            MM: "%d måneder",
            y: "ett år",
            yy: "%d år"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    var Je = {
            1: "१",
            2: "२",
            3: "३",
            4: "४",
            5: "५",
            6: "६",
            7: "७",
            8: "८",
            9: "९",
            "0": "०"
        },
        Ke = {
            "१": "1",
            "२": "2",
            "३": "3",
            "४": "4",
            "५": "5",
            "६": "6",
            "७": "7",
            "८": "8",
            "९": "9",
            "०": "0"
        };
    a.defineLocale("ne", {
        months: "जनवरी फेब्रुवरी मार्च अप्रिल मई जुन जुलाई अगष्ट सेप्टेम्बर अक्टोबर नोभेम्बर डिसेम्बर".split(" "),
        monthsShort: "जन. फेब्रु. मार्च अप्रि. मई जुन जुलाई. अग. सेप्ट. अक्टो. नोभे. डिसे.".split(" "),
        monthsParseExact: !0,
        weekdays: "आइतबार सोमबार मङ्गलबार बुधबार बिहिबार शुक्रबार शनिबार".split(" "),
        weekdaysShort: "आइत. सोम. मङ्गल. बुध. बिहि. शुक्र. शनि.".split(" "),
        weekdaysMin: "आ. सो. मं. बु. बि. शु. श.".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "Aको h:mm बजे",
            LTS: "Aको h:mm:ss बजे",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY, Aको h:mm बजे",
            LLLL: "dddd, D MMMM YYYY, Aको h:mm बजे"
        },
        preparse: function (a) {
            return a.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g, function (a) {
                return Ke[a]
            })
        },
        postformat: function (a) {
            return a.replace(/\d/g, function (a) {
                return Je[a]
            })
        },
        meridiemParse: /\u0930\u093e\u0924\u093f|\u092c\u093f\u0939\u093e\u0928|\u0926\u093f\u0909\u0901\u0938\u094b|\u0938\u093e\u0901\u091d/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "राति" === b ? 4 > a ? a : a + 12 : "बिहान" ===
                b ? a : "दिउँसो" === b ? 10 <= a ? a : a + 12 : "साँझ" === b ? a + 12 : void 0
        },
        meridiem: function (a, b, c) {
            return 3 > a ? "राति" : 12 > a ? "बिहान" : 16 > a ? "दिउँसो" : 20 > a ? "साँझ" : "राति"
        },
        calendar: {
            sameDay: "[आज] LT",
            nextDay: "[भोलि] LT",
            nextWeek: "[आउँदो] dddd[,] LT",
            lastDay: "[हिजो] LT",
            lastWeek: "[गएको] dddd[,] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%sमा",
            past: "%s अगाडि",
            s: "केही क्षण",
            m: "एक मिनेट",
            mm: "%d मिनेट",
            h: "एक घण्टा",
            hh: "%d घण्टा",
            d: "एक दिन",
            dd: "%d दिन",
            M: "एक महिना",
            MM: "%d महिना",
            y: "एक बर्ष",
            yy: "%d बर्ष"
        },
        week: {
            dow: 0,
            doy: 6
        }
    });
    var nd = "jan. feb. mrt. apr. mei jun. jul. aug. sep. okt. nov. dec.".split(" "),
        Le = "jan feb mrt apr mei jun jul aug sep okt nov dec".split(" "),
        qc = [/^jan/i, /^feb/i, /^maart|mrt.?$/i, /^apr/i, /^mei$/i, /^jun[i.]?$/i, /^jul[i.]?$/i, /^aug/i, /^sep/i, /^okt/i, /^nov/i, /^dec/i],
        od = /^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;
    a.defineLocale("nl-be", {
        months: "januari februari maart april mei juni juli augustus september oktober november december".split(" "),
        monthsShort: function (a, b) {
            return a ? /-MMM-/.test(b) ? Le[a.month()] : nd[a.month()] : nd
        },
        monthsRegex: od,
        monthsShortRegex: od,
        monthsStrictRegex: /^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,
        monthsShortStrictRegex: /^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,
        monthsParse: qc,
        longMonthsParse: qc,
        shortMonthsParse: qc,
        weekdays: "zondag maandag dinsdag woensdag donderdag vrijdag zaterdag".split(" "),
        weekdaysShort: "zo. ma. di. wo. do. vr. za.".split(" "),
        weekdaysMin: "Zo Ma Di Wo Do Vr Za".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[vandaag om] LT",
            nextDay: "[morgen om] LT",
            nextWeek: "dddd [om] LT",
            lastDay: "[gisteren om] LT",
            lastWeek: "[afgelopen] dddd [om] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "over %s",
            past: "%s geleden",
            s: "een paar seconden",
            m: "één minuut",
            mm: "%d minuten",
            h: "één uur",
            hh: "%d uur",
            d: "één dag",
            dd: "%d dagen",
            M: "één maand",
            MM: "%d maanden",
            y: "één jaar",
            yy: "%d jaar"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
        ordinal: function (a) {
            return a + (1 === a || 8 === a || 20 <= a ? "ste" : "de")
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    var pd = "jan. feb. mrt. apr. mei jun. jul. aug. sep. okt. nov. dec.".split(" "),
        Me = "jan feb mrt apr mei jun jul aug sep okt nov dec".split(" "),
        rc = [/^jan/i, /^feb/i, /^maart|mrt.?$/i, /^apr/i, /^mei$/i, /^jun[i.]?$/i, /^jul[i.]?$/i,
            /^aug/i, /^sep/i, /^okt/i, /^nov/i, /^dec/i
        ],
        qd = /^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;
    a.defineLocale("nl", {
        months: "januari februari maart april mei juni juli augustus september oktober november december".split(" "),
        monthsShort: function (a, b) {
            return a ? /-MMM-/.test(b) ? Me[a.month()] : pd[a.month()] : pd
        },
        monthsRegex: qd,
        monthsShortRegex: qd,
        monthsStrictRegex: /^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,
        monthsShortStrictRegex: /^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,
        monthsParse: rc,
        longMonthsParse: rc,
        shortMonthsParse: rc,
        weekdays: "zondag maandag dinsdag woensdag donderdag vrijdag zaterdag".split(" "),
        weekdaysShort: "zo. ma. di. wo. do. vr. za.".split(" "),
        weekdaysMin: "Zo Ma Di Wo Do Vr Za".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD-MM-YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[vandaag om] LT",
            nextDay: "[morgen om] LT",
            nextWeek: "dddd [om] LT",
            lastDay: "[gisteren om] LT",
            lastWeek: "[afgelopen] dddd [om] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "over %s",
            past: "%s geleden",
            s: "een paar seconden",
            m: "één minuut",
            mm: "%d minuten",
            h: "één uur",
            hh: "%d uur",
            d: "één dag",
            dd: "%d dagen",
            M: "één maand",
            MM: "%d maanden",
            y: "één jaar",
            yy: "%d jaar"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
        ordinal: function (a) {
            return a + (1 === a || 8 === a || 20 <= a ? "ste" : "de")
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("nn", {
        months: "januar februar mars april mai juni juli august september oktober november desember".split(" "),
        monthsShort: "jan feb mar apr mai jun jul aug sep okt nov des".split(" "),
        weekdays: "sundag måndag tysdag onsdag torsdag fredag laurdag".split(" "),
        weekdaysShort: "sun mån tys ons tor fre lau".split(" "),
        weekdaysMin: "su må ty on to fr lø".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY [kl.] H:mm",
            LLLL: "dddd D. MMMM YYYY [kl.] HH:mm"
        },
        calendar: {
            sameDay: "[I dag klokka] LT",
            nextDay: "[I morgon klokka] LT",
            nextWeek: "dddd [klokka] LT",
            lastDay: "[I går klokka] LT",
            lastWeek: "[Føregåande] dddd [klokka] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "om %s",
            past: "%s sidan",
            s: "nokre sekund",
            m: "eit minutt",
            mm: "%d minutt",
            h: "ein time",
            hh: "%d timar",
            d: "ein dag",
            dd: "%d dagar",
            M: "ein månad",
            MM: "%d månader",
            y: "eit år",
            yy: "%d år"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    var Ne = {
            1: "੧",
            2: "੨",
            3: "੩",
            4: "੪",
            5: "੫",
            6: "੬",
            7: "੭",
            8: "੮",
            9: "੯",
            "0": "੦"
        },
        Oe = {
            "੧": "1",
            "੨": "2",
            "੩": "3",
            "੪": "4",
            "੫": "5",
            "੬": "6",
            "੭": "7",
            "੮": "8",
            "੯": "9",
            "੦": "0"
        };
    a.defineLocale("pa-in", {
        months: "ਜਨਵਰੀ ਫ਼ਰਵਰੀ ਮਾਰਚ ਅਪ੍ਰੈਲ ਮਈ ਜੂਨ ਜੁਲਾਈ ਅਗਸਤ ਸਤੰਬਰ ਅਕਤੂਬਰ ਨਵੰਬਰ ਦਸੰਬਰ".split(" "),
        monthsShort: "ਜਨਵਰੀ ਫ਼ਰਵਰੀ ਮਾਰਚ ਅਪ੍ਰੈਲ ਮਈ ਜੂਨ ਜੁਲਾਈ ਅਗਸਤ ਸਤੰਬਰ ਅਕਤੂਬਰ ਨਵੰਬਰ ਦਸੰਬਰ".split(" "),
        weekdays: "ਐਤਵਾਰ ਸੋਮਵਾਰ ਮੰਗਲਵਾਰ ਬੁਧਵਾਰ ਵੀਰਵਾਰ ਸ਼ੁੱਕਰਵਾਰ ਸ਼ਨੀਚਰਵਾਰ".split(" "),
        weekdaysShort: "ਐਤ ਸੋਮ ਮੰਗਲ ਬੁਧ ਵੀਰ ਸ਼ੁਕਰ ਸ਼ਨੀ".split(" "),
        weekdaysMin: "ਐਤ ਸੋਮ ਮੰਗਲ ਬੁਧ ਵੀਰ ਸ਼ੁਕਰ ਸ਼ਨੀ".split(" "),
        longDateFormat: {
            LT: "A h:mm ਵਜੇ",
            LTS: "A h:mm:ss ਵਜੇ",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY, A h:mm ਵਜੇ",
            LLLL: "dddd, D MMMM YYYY, A h:mm ਵਜੇ"
        },
        calendar: {
            sameDay: "[ਅਜ] LT",
            nextDay: "[ਕਲ] LT",
            nextWeek: "dddd, LT",
            lastDay: "[ਕਲ] LT",
            lastWeek: "[ਪਿਛਲੇ] dddd, LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s ਵਿੱਚ",
            past: "%s ਪਿਛਲੇ",
            s: "ਕੁਝ ਸਕਿੰਟ",
            m: "ਇਕ ਮਿੰਟ",
            mm: "%d ਮਿੰਟ",
            h: "ਇੱਕ ਘੰਟਾ",
            hh: "%d ਘੰਟੇ",
            d: "ਇੱਕ ਦਿਨ",
            dd: "%d ਦਿਨ",
            M: "ਇੱਕ ਮਹੀਨਾ",
            MM: "%d ਮਹੀਨੇ",
            y: "ਇੱਕ ਸਾਲ",
            yy: "%d ਸਾਲ"
        },
        preparse: function (a) {
            return a.replace(/[\u0a67\u0a68\u0a69\u0a6a\u0a6b\u0a6c\u0a6d\u0a6e\u0a6f\u0a66]/g, function (a) {
                return Oe[a]
            })
        },
        postformat: function (a) {
            return a.replace(/\d/g, function (a) {
                return Ne[a]
            })
        },
        meridiemParse: /\u0a30\u0a3e\u0a24|\u0a38\u0a35\u0a47\u0a30|\u0a26\u0a41\u0a2a\u0a39\u0a3f\u0a30|\u0a38\u0a3c\u0a3e\u0a2e/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "ਰਾਤ" === b ? 4 > a ? a : a + 12 : "ਸਵੇਰ" === b ? a : "ਦੁਪਹਿਰ" === b ? 10 <= a ? a : a + 12 : "ਸ਼ਾਮ" === b ? a + 12 : void 0
        },
        meridiem: function (a, b, c) {
            return 4 > a ? "ਰਾਤ" : 10 > a ? "ਸਵੇਰ" : 17 > a ? "ਦੁਪਹਿਰ" : 20 > a ? "ਸ਼ਾਮ" : "ਰਾਤ"
        },
        week: {
            dow: 0,
            doy: 6
        }
    });
    var sc = "styczeń luty marzec kwiecień maj czerwiec lipiec sierpień wrzesień październik listopad grudzień".split(" "),
        rd = "stycznia lutego marca kwietnia maja czerwca lipca sierpnia września października listopada grudnia".split(" ");
    a.defineLocale("pl", {
        months: function (a, b) {
            return a ? "" === b ? "(" + rd[a.month()] + "|" + sc[a.month()] + ")" : /D MMMM/.test(b) ? rd[a.month()] : sc[a.month()] : sc
        },
        monthsShort: "sty lut mar kwi maj cze lip sie wrz paź lis gru".split(" "),
        weekdays: "niedziela poniedziałek wtorek środa czwartek piątek sobota".split(" "),
        weekdaysShort: "ndz pon wt śr czw pt sob".split(" "),
        weekdaysMin: "Nd Pn Wt Śr Cz Pt So".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Dziś o] LT",
            nextDay: "[Jutro o] LT",
            nextWeek: "[W] dddd [o] LT",
            lastDay: "[Wczoraj o] LT",
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                    return "[W zeszłą niedzielę o] LT";
                case 3:
                    return "[W zeszłą środę o] LT";
                case 6:
                    return "[W zeszłą sobotę o] LT";
                default:
                    return "[W zeszły] dddd [o] LT"
                }
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "za %s",
            past: "%s temu",
            s: "kilka sekund",
            m: lb,
            mm: lb,
            h: lb,
            hh: lb,
            d: "1 dzień",
            dd: "%d dni",
            M: "miesiąc",
            MM: lb,
            y: "rok",
            yy: lb
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("pt-br", {
        months: "Janeiro Fevereiro Março Abril Maio Junho Julho Agosto Setembro Outubro Novembro Dezembro".split(" "),
        monthsShort: "Jan Fev Mar Abr Mai Jun Jul Ago Set Out Nov Dez".split(" "),
        weekdays: "Domingo Segunda-feira Terça-feira Quarta-feira Quinta-feira Sexta-feira Sábado".split(" "),
        weekdaysShort: "Dom Seg Ter Qua Qui Sex Sáb".split(" "),
        weekdaysMin: "Do 2ª 3ª 4ª 5ª 6ª Sá".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D [de] MMMM [de] YYYY",
            LLL: "D [de] MMMM [de] YYYY [às] HH:mm",
            LLLL: "dddd, D [de] MMMM [de] YYYY [às] HH:mm"
        },
        calendar: {
            sameDay: "[Hoje às] LT",
            nextDay: "[Amanhã às] LT",
            nextWeek: "dddd [às] LT",
            lastDay: "[Ontem às] LT",
            lastWeek: function () {
                return 0 === this.day() ||
                    6 === this.day() ? "[Último] dddd [às] LT" : "[Última] dddd [às] LT"
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "em %s",
            past: "%s atrás",
            s: "poucos segundos",
            m: "um minuto",
            mm: "%d minutos",
            h: "uma hora",
            hh: "%d horas",
            d: "um dia",
            dd: "%d dias",
            M: "um mês",
            MM: "%d meses",
            y: "um ano",
            yy: "%d anos"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\u00ba/,
        ordinal: "%dº"
    });
    a.defineLocale("pt", {
        months: "Janeiro Fevereiro Março Abril Maio Junho Julho Agosto Setembro Outubro Novembro Dezembro".split(" "),
        monthsShort: "Jan Fev Mar Abr Mai Jun Jul Ago Set Out Nov Dez".split(" "),
        weekdays: "Domingo Segunda-Feira Terça-Feira Quarta-Feira Quinta-Feira Sexta-Feira Sábado".split(" "),
        weekdaysShort: "Dom Seg Ter Qua Qui Sex Sáb".split(" "),
        weekdaysMin: "Do 2ª 3ª 4ª 5ª 6ª Sá".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D [de] MMMM [de] YYYY",
            LLL: "D [de] MMMM [de] YYYY HH:mm",
            LLLL: "dddd, D [de] MMMM [de] YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Hoje às] LT",
            nextDay: "[Amanhã às] LT",
            nextWeek: "dddd [às] LT",
            lastDay: "[Ontem às] LT",
            lastWeek: function () {
                return 0 === this.day() || 6 === this.day() ? "[Último] dddd [às] LT" : "[Última] dddd [às] LT"
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "em %s",
            past: "há %s",
            s: "segundos",
            m: "um minuto",
            mm: "%d minutos",
            h: "uma hora",
            hh: "%d horas",
            d: "um dia",
            dd: "%d dias",
            M: "um mês",
            MM: "%d meses",
            y: "um ano",
            yy: "%d anos"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\u00ba/,
        ordinal: "%dº",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("ro", {
        months: "ianuarie februarie martie aprilie mai iunie iulie august septembrie octombrie noiembrie decembrie".split(" "),
        monthsShort: "ian. febr. mart. apr. mai iun. iul. aug. sept. oct. nov. dec.".split(" "),
        monthsParseExact: !0,
        weekdays: "duminică luni marți miercuri joi vineri sâmbătă".split(" "),
        weekdaysShort: "Dum Lun Mar Mie Joi Vin Sâm".split(" "),
        weekdaysMin: "Du Lu Ma Mi Jo Vi Sâ".split(" "),
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY H:mm",
            LLLL: "dddd, D MMMM YYYY H:mm"
        },
        calendar: {
            sameDay: "[azi la] LT",
            nextDay: "[mâine la] LT",
            nextWeek: "dddd [la] LT",
            lastDay: "[ieri la] LT",
            lastWeek: "[fosta] dddd [la] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "peste %s",
            past: "%s în urmă",
            s: "câteva secunde",
            m: "un minut",
            mm: zb,
            h: "o oră",
            hh: zb,
            d: "o zi",
            dd: zb,
            M: "o lună",
            MM: zb,
            y: "un an",
            yy: zb
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    var tc = [/^\u044f\u043d\u0432/i, /^\u0444\u0435\u0432/i, /^\u043c\u0430\u0440/i, /^\u0430\u043f\u0440/i, /^\u043c\u0430[\u0439\u044f]/i, /^\u0438\u044e\u043d/i, /^\u0438\u044e\u043b/i, /^\u0430\u0432\u0433/i, /^\u0441\u0435\u043d/i, /^\u043e\u043a\u0442/i,
        /^\u043d\u043e\u044f/i, /^\u0434\u0435\u043a/i
    ];
    a.defineLocale("ru", {
        months: {
            format: "января февраля марта апреля мая июня июля августа сентября октября ноября декабря".split(" "),
            standalone: "январь февраль март апрель май июнь июль август сентябрь октябрь ноябрь декабрь".split(" ")
        },
        monthsShort: {
            format: "янв. февр. мар. апр. мая июня июля авг. сент. окт. нояб. дек.".split(" "),
            standalone: "янв. февр. март апр. май июнь июль авг. сент. окт. нояб. дек.".split(" ")
        },
        weekdays: {
            standalone: "воскресенье понедельник вторник среда четверг пятница суббота".split(" "),
            format: "воскресенье понедельник вторник среду четверг пятницу субботу".split(" "),
            isFormat: /\[ ?[\u0412\u0432] ?(?:\u043f\u0440\u043e\u0448\u043b\u0443\u044e|\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e|\u044d\u0442\u0443)? ?\] ?dddd/
        },
        weekdaysShort: "вс пн вт ср чт пт сб".split(" "),
        weekdaysMin: "вс пн вт ср чт пт сб".split(" "),
        monthsParse: tc,
        longMonthsParse: tc,
        shortMonthsParse: tc,
        monthsRegex: /^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u044f\u043d\u0432\.?|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u0444\u0435\u0432\u0440?\.?|\u043c\u0430\u0440\u0442\u0430?|\u043c\u0430\u0440\.?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u0430\u043f\u0440\.?|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043d\.?|\u0438\u044e\u043b[\u044c\u044f]|\u0438\u044e\u043b\.?|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0430\u0432\u0433\.?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u0441\u0435\u043d\u0442?\.?|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\.?|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431?\.?|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\.?)/i,
        monthsShortRegex: /^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u044f\u043d\u0432\.?|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u0444\u0435\u0432\u0440?\.?|\u043c\u0430\u0440\u0442\u0430?|\u043c\u0430\u0440\.?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u0430\u043f\u0440\.?|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043d\.?|\u0438\u044e\u043b[\u044c\u044f]|\u0438\u044e\u043b\.?|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0430\u0432\u0433\.?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u0441\u0435\u043d\u0442?\.?|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\.?|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431?\.?|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\.?)/i,
        monthsStrictRegex: /^(\u044f\u043d\u0432\u0430\u0440[\u044f\u044c]|\u0444\u0435\u0432\u0440\u0430\u043b[\u044f\u044c]|\u043c\u0430\u0440\u0442\u0430?|\u0430\u043f\u0440\u0435\u043b[\u044f\u044c]|\u043c\u0430[\u044f\u0439]|\u0438\u044e\u043d[\u044f\u044c]|\u0438\u044e\u043b[\u044f\u044c]|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044f\u044c]|\u043e\u043a\u0442\u044f\u0431\u0440[\u044f\u044c]|\u043d\u043e\u044f\u0431\u0440[\u044f\u044c]|\u0434\u0435\u043a\u0430\u0431\u0440[\u044f\u044c])/i,
        monthsShortStrictRegex: /^(\u044f\u043d\u0432\.|\u0444\u0435\u0432\u0440?\.|\u043c\u0430\u0440[\u0442.]|\u0430\u043f\u0440\.|\u043c\u0430[\u044f\u0439]|\u0438\u044e\u043d[\u044c\u044f.]|\u0438\u044e\u043b[\u044c\u044f.]|\u0430\u0432\u0433\.|\u0441\u0435\u043d\u0442?\.|\u043e\u043a\u0442\.|\u043d\u043e\u044f\u0431?\.|\u0434\u0435\u043a\.)/i,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D MMMM YYYY г.",
            LLL: "D MMMM YYYY г., HH:mm",
            LLLL: "dddd, D MMMM YYYY г., HH:mm"
        },
        calendar: {
            sameDay: "[Сегодня в] LT",
            nextDay: "[Завтра в] LT",
            lastDay: "[Вчера в] LT",
            nextWeek: function (a) {
                if (a.week() === this.week()) return 2 === this.day() ? "[Во] dddd [в] LT" : "[В] dddd [в] LT";
                switch (this.day()) {
                case 0:
                    return "[В следующее] dddd [в] LT";
                case 1:
                case 2:
                case 4:
                    return "[В следующий] dddd [в] LT";
                case 3:
                case 5:
                case 6:
                    return "[В следующую] dddd [в] LT"
                }
            },
            lastWeek: function (a) {
                if (a.week() === this.week()) return 2 === this.day() ? "[Во] dddd [в] LT" : "[В] dddd [в] LT";
                switch (this.day()) {
                case 0:
                    return "[В прошлое] dddd [в] LT";
                case 1:
                case 2:
                case 4:
                    return "[В прошлый] dddd [в] LT";
                case 3:
                case 5:
                case 6:
                    return "[В прошлую] dddd [в] LT"
                }
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "через %s",
            past: "%s назад",
            s: "несколько секунд",
            m: mb,
            mm: mb,
            h: "час",
            hh: mb,
            d: "день",
            dd: mb,
            M: "месяц",
            MM: mb,
            y: "год",
            yy: mb
        },
        meridiemParse: /\u043d\u043e\u0447\u0438|\u0443\u0442\u0440\u0430|\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430/i,
        isPM: function (a) {
            return /^(\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430)$/.test(a)
        },
        meridiem: function (a,
            b, c) {
            return 4 > a ? "ночи" : 12 > a ? "утра" : 17 > a ? "дня" : "вечера"
        },
        dayOfMonthOrdinalParse: /\d{1,2}-(\u0439|\u0433\u043e|\u044f)/,
        ordinal: function (a, b) {
            switch (b) {
            case "M":
            case "d":
            case "DDD":
                return a + "-й";
            case "D":
                return a + "-го";
            case "w":
            case "W":
                return a + "-я";
            default:
                return a
            }
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    var sd = "جنوري فيبروري مارچ اپريل مئي جون جولاءِ آگسٽ سيپٽمبر آڪٽوبر نومبر ڊسمبر".split(" "),
        uc = "آچر سومر اڱارو اربع خميس جمع ڇنڇر".split(" ");
    a.defineLocale("sd", {
        months: sd,
        monthsShort: sd,
        weekdays: uc,
        weekdaysShort: uc,
        weekdaysMin: uc,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd، D MMMM YYYY HH:mm"
        },
        meridiemParse: /\u0635\u0628\u062d|\u0634\u0627\u0645/,
        isPM: function (a) {
            return "شام" ===
                a
        },
        meridiem: function (a, b, c) {
            return 12 > a ? "صبح" : "شام"
        },
        calendar: {
            sameDay: "[اڄ] LT",
            nextDay: "[سڀاڻي] LT",
            nextWeek: "dddd [اڳين هفتي تي] LT",
            lastDay: "[ڪالهه] LT",
            lastWeek: "[گزريل هفتي] dddd [تي] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s پوء",
            past: "%s اڳ",
            s: "چند سيڪنڊ",
            m: "هڪ منٽ",
            mm: "%d منٽ",
            h: "هڪ ڪلاڪ",
            hh: "%d ڪلاڪ",
            d: "هڪ ڏينهن",
            dd: "%d ڏينهن",
            M: "هڪ مهينو",
            MM: "%d مهينا",
            y: "هڪ سال",
            yy: "%d سال"
        },
        preparse: function (a) {
            return a.replace(/\u060c/g, ",")
        },
        postformat: function (a) {
            return a.replace(/,/g, "،")
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("se", {
        months: "ođđajagemánnu guovvamánnu njukčamánnu cuoŋománnu miessemánnu geassemánnu suoidnemánnu borgemánnu čakčamánnu golggotmánnu skábmamánnu juovlamánnu".split(" "),
        monthsShort: "ođđj guov njuk cuo mies geas suoi borg čakč golg skáb juov".split(" "),
        weekdays: "sotnabeaivi vuossárga maŋŋebárga gaskavahkku duorastat bearjadat lávvardat".split(" "),
        weekdaysShort: "sotn vuos maŋ gask duor bear láv".split(" "),
        weekdaysMin: "svmgdbL".split(""),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "MMMM D. [b.] YYYY",
            LLL: "MMMM D. [b.] YYYY [ti.] HH:mm",
            LLLL: "dddd, MMMM D. [b.] YYYY [ti.] HH:mm"
        },
        calendar: {
            sameDay: "[otne ti] LT",
            nextDay: "[ihttin ti] LT",
            nextWeek: "dddd [ti] LT",
            lastDay: "[ikte ti] LT",
            lastWeek: "[ovddit] dddd [ti] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s geažes",
            past: "maŋit %s",
            s: "moadde sekunddat",
            m: "okta minuhta",
            mm: "%d minuhtat",
            h: "okta diimmu",
            hh: "%d diimmut",
            d: "okta beaivi",
            dd: "%d beaivvit",
            M: "okta mánnu",
            MM: "%d mánut",
            y: "okta jahki",
            yy: "%d jagit"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("si", {
        months: "ජනවාරි පෙබරවාරි මාර්තු අප්‍රේල් මැයි ජූනි ජූලි අගෝස්තු සැප්තැම්බර් ඔක්තෝබර් නොවැම්බර් දෙසැම්බර්".split(" "),
        monthsShort: "ජන පෙබ මාර් අප් මැයි ජූනි ජූලි අගෝ සැප් ඔක් නොවැ දෙසැ".split(" "),
        weekdays: "ඉරිදා සඳුදා අඟහරුවාදා බදාදා බ්‍රහස්පතින්දා සිකුරාදා සෙනසුරාදා".split(" "),
        weekdaysShort: "ඉරි සඳු අඟ බදා බ්‍රහ සිකු සෙන".split(" "),
        weekdaysMin: "ඉ ස අ බ බ්‍ර සි සෙ".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "a h:mm",
            LTS: "a h:mm:ss",
            L: "YYYY/MM/DD",
            LL: "YYYY MMMM D",
            LLL: "YYYY MMMM D, a h:mm",
            LLLL: "YYYY MMMM D [වැනි] dddd, a h:mm:ss"
        },
        calendar: {
            sameDay: "[අද] LT[ට]",
            nextDay: "[හෙට] LT[ට]",
            nextWeek: "dddd LT[ට]",
            lastDay: "[ඊයේ] LT[ට]",
            lastWeek: "[පසුගිය] dddd LT[ට]",
            sameElse: "L"
        },
        relativeTime: {
            future: "%sකින්",
            past: "%sකට පෙර",
            s: "තත්පර කිහිපය",
            m: "මිනිත්තුව",
            mm: "මිනිත්තු %d",
            h: "පැය",
            hh: "පැය %d",
            d: "දිනය",
            dd: "දින %d",
            M: "මාසය",
            MM: "මාස %d",
            y: "වසර",
            yy: "වසර %d"
        },
        dayOfMonthOrdinalParse: /\d{1,2} \u0dc0\u0dd0\u0db1\u0dd2/,
        ordinal: function (a) {
            return a + " වැනි"
        },
        meridiemParse: /\u0db4\u0dd9\u0dbb \u0dc0\u0dbb\u0dd4|\u0db4\u0dc3\u0dca \u0dc0\u0dbb\u0dd4|\u0db4\u0dd9.\u0dc0|\u0db4.\u0dc0./,
        isPM: function (a) {
            return "ප.ව." === a || "පස් වරු" === a
        },
        meridiem: function (a,
            b, c) {
            return 11 < a ? c ? "ප.ව." : "පස් වරු" : c ? "පෙ.ව." : "පෙර වරු"
        }
    });
    a.defineLocale("sk", {
        months: "január február marec apríl máj jún júl august september október november december".split(" "),
        monthsShort: "jan feb mar apr máj jún júl aug sep okt nov dec".split(" "),
        weekdays: "nedeľa pondelok utorok streda štvrtok piatok sobota".split(" "),
        weekdaysShort: "ne po ut st št pi so".split(" "),
        weekdaysMin: "ne po ut st št pi so".split(" "),
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY H:mm",
            LLLL: "dddd D. MMMM YYYY H:mm"
        },
        calendar: {
            sameDay: "[dnes o] LT",
            nextDay: "[zajtra o] LT",
            nextWeek: function () {
                switch (this.day()) {
                case 0:
                    return "[v nedeľu o] LT";
                case 1:
                case 2:
                    return "[v] dddd [o] LT";
                case 3:
                    return "[v stredu o] LT";
                case 4:
                    return "[vo štvrtok o] LT";
                case 5:
                    return "[v piatok o] LT";
                case 6:
                    return "[v sobotu o] LT"
                }
            },
            lastDay: "[včera o] LT",
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                    return "[minulú nedeľu o] LT";
                case 1:
                case 2:
                    return "[minulý] dddd [o] LT";
                case 3:
                    return "[minulú stredu o] LT";
                case 4:
                case 5:
                    return "[minulý] dddd [o] LT";
                case 6:
                    return "[minulú sobotu o] LT"
                }
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "za %s",
            past: "pred %s",
            s: Ea,
            m: Ea,
            mm: Ea,
            h: Ea,
            hh: Ea,
            d: Ea,
            dd: Ea,
            M: Ea,
            MM: Ea,
            y: Ea,
            yy: Ea
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("sl", {
        months: "januar februar marec april maj junij julij avgust september oktober november december".split(" "),
        monthsShort: "jan. feb. mar. apr. maj. jun. jul. avg. sep. okt. nov. dec.".split(" "),
        monthsParseExact: !0,
        weekdays: "nedelja ponedeljek torek sreda četrtek petek sobota".split(" "),
        weekdaysShort: "ned. pon. tor. sre. čet. pet. sob.".split(" "),
        weekdaysMin: "ne po to sr če pe so".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY H:mm",
            LLLL: "dddd, D. MMMM YYYY H:mm"
        },
        calendar: {
            sameDay: "[danes ob] LT",
            nextDay: "[jutri ob] LT",
            nextWeek: function () {
                switch (this.day()) {
                case 0:
                    return "[v] [nedeljo] [ob] LT";
                case 3:
                    return "[v] [sredo] [ob] LT";
                case 6:
                    return "[v] [soboto] [ob] LT";
                case 1:
                case 2:
                case 4:
                case 5:
                    return "[v] dddd [ob] LT"
                }
            },
            lastDay: "[včeraj ob] LT",
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                    return "[prejšnjo] [nedeljo] [ob] LT";
                case 3:
                    return "[prejšnjo] [sredo] [ob] LT";
                case 6:
                    return "[prejšnjo] [soboto] [ob] LT";
                case 1:
                case 2:
                case 4:
                case 5:
                    return "[prejšnji] dddd [ob] LT"
                }
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "čez %s",
            past: "pred %s",
            s: Fa,
            m: Fa,
            mm: Fa,
            h: Fa,
            hh: Fa,
            d: Fa,
            dd: Fa,
            M: Fa,
            MM: Fa,
            y: Fa,
            yy: Fa
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("sq", {
        months: "Janar Shkurt Mars Prill Maj Qershor Korrik Gusht Shtator Tetor Nëntor Dhjetor".split(" "),
        monthsShort: "Jan Shk Mar Pri Maj Qer Kor Gus Sht Tet Nën Dhj".split(" "),
        weekdays: "E Diel;E Hënë;E Martë;E Mërkurë;E Enjte;E Premte;E Shtunë".split(";"),
        weekdaysShort: "Die Hën Mar Mër Enj Pre Sht".split(" "),
        weekdaysMin: "D H Ma Më E P Sh".split(" "),
        weekdaysParseExact: !0,
        meridiemParse: /PD|MD/,
        isPM: function (a) {
            return "M" === a.charAt(0)
        },
        meridiem: function (a, b, c) {
            return 12 > a ? "PD" : "MD"
        },
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Sot në] LT",
            nextDay: "[Nesër në] LT",
            nextWeek: "dddd [në] LT",
            lastDay: "[Dje në] LT",
            lastWeek: "dddd [e kaluar në] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "në %s",
            past: "%s më parë",
            s: "disa sekonda",
            m: "një minutë",
            mm: "%d minuta",
            h: "një orë",
            hh: "%d orë",
            d: "një ditë",
            dd: "%d ditë",
            M: "një muaj",
            MM: "%d muaj",
            y: "një vit",
            yy: "%d vite"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    var Ta = {
        words: {
            m: ["један минут", "једне минуте"],
            mm: ["минут", "минуте",
                "минута"
            ],
            h: ["један сат", "једног сата"],
            hh: ["сат", "сата", "сати"],
            dd: ["дан", "дана", "дана"],
            MM: ["месец", "месеца", "месеци"],
            yy: ["година", "године",
                "година"
            ]
        },
        correctGrammaticalCase: function (a, b) {
            return 1 === a ? b[0] : 2 <= a && 4 >= a ? b[1] : b[2]
        },
        translate: function (a, b, c) {
            var d = Ta.words[c];
            return 1 === c.length ? b ? d[0] : d[1] : a + " " + Ta.correctGrammaticalCase(a, d)
        }
    };
    a.defineLocale("sr-cyrl", {
        months: "јануар фебруар март април мај јун јул август септембар октобар новембар децембар".split(" "),
        monthsShort: "јан. феб. мар. апр. мај јун јул авг. сеп. окт. нов. дец.".split(" "),
        monthsParseExact: !0,
        weekdays: "недеља понедељак уторак среда четвртак петак субота".split(" "),
        weekdaysShort: "нед. пон. уто. сре. чет. пет. суб.".split(" "),
        weekdaysMin: "не по ут ср че пе су".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY H:mm",
            LLLL: "dddd, D. MMMM YYYY H:mm"
        },
        calendar: {
            sameDay: "[данас у] LT",
            nextDay: "[сутра у] LT",
            nextWeek: function () {
                switch (this.day()) {
                case 0:
                    return "[у] [недељу] [у] LT";
                case 3:
                    return "[у] [среду] [у] LT";
                case 6:
                    return "[у] [суботу] [у] LT";
                case 1:
                case 2:
                case 4:
                case 5:
                    return "[у] dddd [у] LT"
                }
            },
            lastDay: "[јуче у] LT",
            lastWeek: function () {
                return "[прошле] [недеље] [у] LT;[прошлог] [понедељка] [у] LT;[прошлог] [уторка] [у] LT;[прошле] [среде] [у] LT;[прошлог] [четвртка] [у] LT;[прошлог] [петка] [у] LT;[прошле] [суботе] [у] LT".split(";")[this.day()]
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "за %s",
            past: "пре %s",
            s: "неколико секунди",
            m: Ta.translate,
            mm: Ta.translate,
            h: Ta.translate,
            hh: Ta.translate,
            d: "дан",
            dd: Ta.translate,
            M: "месец",
            MM: Ta.translate,
            y: "годину",
            yy: Ta.translate
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 7
        }
    });
    var Ua = {
        words: {
            m: ["jedan minut", "jedne minute"],
            mm: ["minut", "minute", "minuta"],
            h: ["jedan sat", "jednog sata"],
            hh: ["sat", "sata", "sati"],
            dd: ["dan", "dana", "dana"],
            MM: ["mesec", "meseca", "meseci"],
            yy: ["godina", "godine", "godina"]
        },
        correctGrammaticalCase: function (a, b) {
            return 1 === a ? b[0] : 2 <= a && 4 >= a ? b[1] : b[2]
        },
        translate: function (a, b, c) {
            var d = Ua.words[c];
            return 1 === c.length ? b ? d[0] : d[1] : a + " " + Ua.correctGrammaticalCase(a, d)
        }
    };
    a.defineLocale("sr", {
        months: "januar februar mart april maj jun jul avgust septembar oktobar novembar decembar".split(" "),
        monthsShort: "jan. feb. mar. apr. maj jun jul avg. sep. okt. nov. dec.".split(" "),
        monthsParseExact: !0,
        weekdays: "nedelja ponedeljak utorak sreda četvrtak petak subota".split(" "),
        weekdaysShort: "ned. pon. uto. sre. čet. pet. sub.".split(" "),
        weekdaysMin: "ne po ut sr če pe su".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM YYYY",
            LLL: "D. MMMM YYYY H:mm",
            LLLL: "dddd, D. MMMM YYYY H:mm"
        },
        calendar: {
            sameDay: "[danas u] LT",
            nextDay: "[sutra u] LT",
            nextWeek: function () {
                switch (this.day()) {
                case 0:
                    return "[u] [nedelju] [u] LT";
                case 3:
                    return "[u] [sredu] [u] LT";
                case 6:
                    return "[u] [subotu] [u] LT";
                case 1:
                case 2:
                case 4:
                case 5:
                    return "[u] dddd [u] LT"
                }
            },
            lastDay: "[juče u] LT",
            lastWeek: function () {
                return "[prošle] [nedelje] [u] LT;[prošlog] [ponedeljka] [u] LT;[prošlog] [utorka] [u] LT;[prošle] [srede] [u] LT;[prošlog] [četvrtka] [u] LT;[prošlog] [petka] [u] LT;[prošle] [subote] [u] LT".split(";")[this.day()]
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "za %s",
            past: "pre %s",
            s: "nekoliko sekundi",
            m: Ua.translate,
            mm: Ua.translate,
            h: Ua.translate,
            hh: Ua.translate,
            d: "dan",
            dd: Ua.translate,
            M: "mesec",
            MM: Ua.translate,
            y: "godinu",
            yy: Ua.translate
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("ss", {
        months: "Bhimbidvwane Indlovana Indlov'lenkhulu Mabasa Inkhwekhweti Inhlaba Kholwane Ingci Inyoni Imphala Lweti Ingongoni".split(" "),
        monthsShort: "Bhi Ina Inu Mab Ink Inh Kho Igc Iny Imp Lwe Igo".split(" "),
        weekdays: "Lisontfo Umsombuluko Lesibili Lesitsatfu Lesine Lesihlanu Umgcibelo".split(" "),
        weekdaysShort: "Lis Umb Lsb Les Lsi Lsh Umg".split(" "),
        weekdaysMin: "Li Us Lb Lt Ls Lh Ug".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "h:mm A",
            LTS: "h:mm:ss A",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY h:mm A",
            LLLL: "dddd, D MMMM YYYY h:mm A"
        },
        calendar: {
            sameDay: "[Namuhla nga] LT",
            nextDay: "[Kusasa nga] LT",
            nextWeek: "dddd [nga] LT",
            lastDay: "[Itolo nga] LT",
            lastWeek: "dddd [leliphelile] [nga] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "nga %s",
            past: "wenteka nga %s",
            s: "emizuzwana lomcane",
            m: "umzuzu",
            mm: "%d emizuzu",
            h: "lihora",
            hh: "%d emahora",
            d: "lilanga",
            dd: "%d emalanga",
            M: "inyanga",
            MM: "%d tinyanga",
            y: "umnyaka",
            yy: "%d iminyaka"
        },
        meridiemParse: /ekuseni|emini|entsambama|ebusuku/,
        meridiem: function (a, b, c) {
            return 11 > a ? "ekuseni" : 15 > a ? "emini" : 19 > a ? "entsambama" : "ebusuku"
        },
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "ekuseni" === b ? a : "emini" === b ? 11 <= a ? a : a + 12 : "entsambama" === b || "ebusuku" === b ? 0 === a ? 0 : a + 12 : void 0
        },
        dayOfMonthOrdinalParse: /\d{1,2}/,
        ordinal: "%d",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("sv", {
        months: "januari februari mars april maj juni juli augusti september oktober november december".split(" "),
        monthsShort: "jan feb mar apr maj jun jul aug sep okt nov dec".split(" "),
        weekdays: "söndag måndag tisdag onsdag torsdag fredag lördag".split(" "),
        weekdaysShort: "sön mån tis ons tor fre lör".split(" "),
        weekdaysMin: "sö må ti on to fr lö".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "YYYY-MM-DD",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY [kl.] HH:mm",
            LLLL: "dddd D MMMM YYYY [kl.] HH:mm",
            lll: "D MMM YYYY HH:mm",
            llll: "ddd D MMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Idag] LT",
            nextDay: "[Imorgon] LT",
            lastDay: "[Igår] LT",
            nextWeek: "[På] dddd LT",
            lastWeek: "[I] dddd[s] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "om %s",
            past: "för %s sedan",
            s: "några sekunder",
            m: "en minut",
            mm: "%d minuter",
            h: "en timme",
            hh: "%d timmar",
            d: "en dag",
            dd: "%d dagar",
            M: "en månad",
            MM: "%d månader",
            y: "ett år",
            yy: "%d år"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(e|a)/,
        ordinal: function (a) {
            var b = a % 10;
            return a + (1 === ~~(a % 100 / 10) ? "e" : 1 === b ? "a" : 2 === b ? "a" : "e")
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("sw", {
        months: "Januari Februari Machi Aprili Mei Juni Julai Agosti Septemba Oktoba Novemba Desemba".split(" "),
        monthsShort: "Jan Feb Mac Apr Mei Jun Jul Ago Sep Okt Nov Des".split(" "),
        weekdays: "Jumapili Jumatatu Jumanne Jumatano Alhamisi Ijumaa Jumamosi".split(" "),
        weekdaysShort: "Jpl Jtat Jnne Jtan Alh Ijm Jmos".split(" "),
        weekdaysMin: "J2 J3 J4 J5 Al Ij J1".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[leo saa] LT",
            nextDay: "[kesho saa] LT",
            nextWeek: "[wiki ijayo] dddd [saat] LT",
            lastDay: "[jana] LT",
            lastWeek: "[wiki iliyopita] dddd [saat] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s baadaye",
            past: "tokea %s",
            s: "hivi punde",
            m: "dakika moja",
            mm: "dakika %d",
            h: "saa limoja",
            hh: "masaa %d",
            d: "siku moja",
            dd: "masiku %d",
            M: "mwezi mmoja",
            MM: "miezi %d",
            y: "mwaka mmoja",
            yy: "miaka %d"
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    var Pe = {
            1: "௧",
            2: "௨",
            3: "௩",
            4: "௪",
            5: "௫",
            6: "௬",
            7: "௭",
            8: "௮",
            9: "௯",
            "0": "௦"
        },
        Qe = {
            "௧": "1",
            "௨": "2",
            "௩": "3",
            "௪": "4",
            "௫": "5",
            "௬": "6",
            "௭": "7",
            "௮": "8",
            "௯": "9",
            "௦": "0"
        };
    a.defineLocale("ta", {
        months: "ஜனவரி பிப்ரவரி மார்ச் ஏப்ரல் மே ஜூன் ஜூலை ஆகஸ்ட் செப்டெம்பர் அக்டோபர் நவம்பர் டிசம்பர்".split(" "),
        monthsShort: "ஜனவரி பிப்ரவரி மார்ச் ஏப்ரல் மே ஜூன் ஜூலை ஆகஸ்ட் செப்டெம்பர் அக்டோபர் நவம்பர் டிசம்பர்".split(" "),
        weekdays: "ஞாயிற்றுக்கிழமை திங்கட்கிழமை செவ்வாய்கிழமை புதன்கிழமை வியாழக்கிழமை வெள்ளிக்கிழமை சனிக்கிழமை".split(" "),
        weekdaysShort: "ஞாயிறு திங்கள் செவ்வாய் புதன் வியாழன் வெள்ளி சனி".split(" "),
        weekdaysMin: "ஞா தி செ பு வி வெ ச".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY, HH:mm",
            LLLL: "dddd, D MMMM YYYY, HH:mm"
        },
        calendar: {
            sameDay: "[இன்று] LT",
            nextDay: "[நாளை] LT",
            nextWeek: "dddd, LT",
            lastDay: "[நேற்று] LT",
            lastWeek: "[கடந்த வாரம்] dddd, LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s இல்",
            past: "%s முன்",
            s: "ஒரு சில விநாடிகள்",
            m: "ஒரு நிமிடம்",
            mm: "%d நிமிடங்கள்",
            h: "ஒரு மணி நேரம்",
            hh: "%d மணி நேரம்",
            d: "ஒரு நாள்",
            dd: "%d நாட்கள்",
            M: "ஒரு மாதம்",
            MM: "%d மாதங்கள்",
            y: "ஒரு வருடம்",
            yy: "%d ஆண்டுகள்"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\u0bb5\u0ba4\u0bc1/,
        ordinal: function (a) {
            return a + "வது"
        },
        preparse: function (a) {
            return a.replace(/[\u0be7\u0be8\u0be9\u0bea\u0beb\u0bec\u0bed\u0bee\u0bef\u0be6]/g, function (a) {
                return Qe[a]
            })
        },
        postformat: function (a) {
            return a.replace(/\d/g, function (a) {
                return Pe[a]
            })
        },
        meridiemParse: /\u0baf\u0bbe\u0bae\u0bae\u0bcd|\u0bb5\u0bc8\u0b95\u0bb1\u0bc8|\u0b95\u0bbe\u0bb2\u0bc8|\u0ba8\u0ba3\u0bcd\u0baa\u0b95\u0bb2\u0bcd|\u0b8e\u0bb1\u0bcd\u0baa\u0bbe\u0b9f\u0bc1|\u0bae\u0bbe\u0bb2\u0bc8/,
        meridiem: function (a, b, c) {
            return 2 > a ? " யாமம்" : 6 > a ? " வைகறை" : 10 > a ? " காலை" : 14 > a ? " நண்பகல்" : 18 > a ? " எற்பாடு" : 22 > a ? " மாலை" : " யாமம்"
        },
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "யாமம்" === b ? 2 > a ? a : a + 12 : "வைகறை" === b || "காலை" === b ? a : "நண்பகல்" ===
                b && 10 <= a ? a : a + 12
        },
        week: {
            dow: 0,
            doy: 6
        }
    });
    a.defineLocale("te", {
        months: "జనవరి ఫిబ్రవరి మార్చి ఏప్రిల్ మే జూన్ జూలై ఆగస్టు సెప్టెంబర్ అక్టోబర్ నవంబర్ డిసెంబర్".split(" "),
        monthsShort: "జన. ఫిబ్ర. మార్చి ఏప్రి. మే జూన్ జూలై ఆగ. సెప్. అక్టో. నవ. డిసె.".split(" "),
        monthsParseExact: !0,
        weekdays: "ఆదివారం సోమవారం మంగళవారం బుధవారం గురువారం శుక్రవారం శనివారం".split(" "),
        weekdaysShort: "ఆది సోమ మంగళ బుధ గురు శుక్ర శని".split(" "),
        weekdaysMin: "ఆ సో మం బు గు శు శ".split(" "),
        longDateFormat: {
            LT: "A h:mm",
            LTS: "A h:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY, A h:mm",
            LLLL: "dddd, D MMMM YYYY, A h:mm"
        },
        calendar: {
            sameDay: "[నేడు] LT",
            nextDay: "[రేపు] LT",
            nextWeek: "dddd, LT",
            lastDay: "[నిన్న] LT",
            lastWeek: "[గత] dddd, LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s లో",
            past: "%s క్రితం",
            s: "కొన్ని క్షణాలు",
            m: "ఒక నిమిషం",
            mm: "%d నిమిషాలు",
            h: "ఒక గంట",
            hh: "%d గంటలు",
            d: "ఒక రోజు",
            dd: "%d రోజులు",
            M: "ఒక నెల",
            MM: "%d నెలలు",
            y: "ఒక సంవత్సరం",
            yy: "%d సంవత్సరాలు"
        },
        dayOfMonthOrdinalParse: /\d{1,2}\u0c35/,
        ordinal: "%dవ",
        meridiemParse: /\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f|\u0c09\u0c26\u0c2f\u0c02|\u0c2e\u0c27\u0c4d\u0c2f\u0c3e\u0c39\u0c4d\u0c28\u0c02|\u0c38\u0c3e\u0c2f\u0c02\u0c24\u0c4d\u0c30\u0c02/,
        meridiemHour: function (a,
            b) {
            return 12 === a && (a = 0), "రాత్రి" === b ? 4 > a ? a : a + 12 : "ఉదయం" === b ? a : "మధ్యాహ్నం" === b ? 10 <= a ? a : a + 12 : "సాయంత్రం" === b ? a + 12 : void 0
        },
        meridiem: function (a, b, c) {
            return 4 > a ? "రాత్రి" : 10 > a ? "ఉదయం" : 17 > a ? "మధ్యాహ్నం" : 20 > a ? "సాయంత్రం" : "రాత్రి"
        },
        week: {
            dow: 0,
            doy: 6
        }
    });
    a.defineLocale("tet", {
        months: "Janeiru Fevereiru Marsu Abril Maiu Juniu Juliu Augustu Setembru Outubru Novembru Dezembru".split(" "),
        monthsShort: "Jan Fev Mar Abr Mai Jun Jul Aug Set Out Nov Dez".split(" "),
        weekdays: "Domingu Segunda Tersa Kuarta Kinta Sexta Sabadu".split(" "),
        weekdaysShort: "Dom Seg Ters Kua Kint Sext Sab".split(" "),
        weekdaysMin: "Do Seg Te Ku Ki Sex Sa".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Ohin iha] LT",
            nextDay: "[Aban iha] LT",
            nextWeek: "dddd [iha] LT",
            lastDay: "[Horiseik iha] LT",
            lastWeek: "dddd [semana kotuk] [iha] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "iha %s",
            past: "%s liuba",
            s: "minutu balun",
            m: "minutu ida",
            mm: "minutus %d",
            h: "horas ida",
            hh: "horas %d",
            d: "loron ida",
            dd: "loron %d",
            M: "fulan ida",
            MM: "fulan %d",
            y: "tinan ida",
            yy: "tinan %d"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
        ordinal: function (a) {
            var b = a % 10;
            return a + (1 === ~~(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" :
                3 === b ? "rd" : "th")
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("th", {
        months: "มกราคม กุมภาพันธ์ มีนาคม เมษายน พฤษภาคม มิถุนายน กรกฎาคม สิงหาคม กันยายน ตุลาคม พฤศจิกายน ธันวาคม".split(" "),
        monthsShort: "ม.ค. ก.พ. มี.ค. เม.ย. พ.ค. มิ.ย. ก.ค. ส.ค. ก.ย. ต.ค. พ.ย. ธ.ค.".split(" "),
        monthsParseExact: !0,
        weekdays: "อาทิตย์ จันทร์ อังคาร พุธ พฤหัสบดี ศุกร์ เสาร์".split(" "),
        weekdaysShort: "อาทิตย์ จันทร์ อังคาร พุธ พฤหัส ศุกร์ เสาร์".split(" "),
        weekdaysMin: "อา. จ. อ. พ. พฤ. ศ. ส.".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "H:mm",
            LTS: "H:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY เวลา H:mm",
            LLLL: "วันddddที่ D MMMM YYYY เวลา H:mm"
        },
        meridiemParse: /\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07|\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07/,
        isPM: function (a) {
            return "หลังเที่ยง" === a
        },
        meridiem: function (a, b, c) {
            return 12 > a ? "ก่อนเที่ยง" : "หลังเที่ยง"
        },
        calendar: {
            sameDay: "[วันนี้ เวลา] LT",
            nextDay: "[พรุ่งนี้ เวลา] LT",
            nextWeek: "dddd[หน้า เวลา] LT",
            lastDay: "[เมื่อวานนี้ เวลา] LT",
            lastWeek: "[วัน]dddd[ที่แล้ว เวลา] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "อีก %s",
            past: "%sที่แล้ว",
            s: "ไม่กี่วินาที",
            m: "1 นาที",
            mm: "%d นาที",
            h: "1 ชั่วโมง",
            hh: "%d ชั่วโมง",
            d: "1 วัน",
            dd: "%d วัน",
            M: "1 เดือน",
            MM: "%d เดือน",
            y: "1 ปี",
            yy: "%d ปี"
        }
    });
    a.defineLocale("tl-ph", {
        months: "Enero Pebrero Marso Abril Mayo Hunyo Hulyo Agosto Setyembre Oktubre Nobyembre Disyembre".split(" "),
        monthsShort: "Ene Peb Mar Abr May Hun Hul Ago Set Okt Nob Dis".split(" "),
        weekdays: "Linggo Lunes Martes Miyerkules Huwebes Biyernes Sabado".split(" "),
        weekdaysShort: "Lin Lun Mar Miy Huw Biy Sab".split(" "),
        weekdaysMin: "Li Lu Ma Mi Hu Bi Sab".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "MM/D/YYYY",
            LL: "MMMM D, YYYY",
            LLL: "MMMM D, YYYY HH:mm",
            LLLL: "dddd, MMMM DD, YYYY HH:mm"
        },
        calendar: {
            sameDay: "LT [ngayong araw]",
            nextDay: "[Bukas ng] LT",
            nextWeek: "LT [sa susunod na] dddd",
            lastDay: "LT [kahapon]",
            lastWeek: "LT [noong nakaraang] dddd",
            sameElse: "L"
        },
        relativeTime: {
            future: "sa loob ng %s",
            past: "%s ang nakalipas",
            s: "ilang segundo",
            m: "isang minuto",
            mm: "%d minuto",
            h: "isang oras",
            hh: "%d oras",
            d: "isang araw",
            dd: "%d araw",
            M: "isang buwan",
            MM: "%d buwan",
            y: "isang taon",
            yy: "%d taon"
        },
        dayOfMonthOrdinalParse: /\d{1,2}/,
        ordinal: function (a) {
            return a
        },
        week: {
            dow: 1,
            doy: 4
        }
    });
    var ic = "pagh wa’ cha’ wej loS vagh jav Soch chorgh Hut".split(" ");
    a.defineLocale("tlh", {
        months: "tera’ jar wa’;tera’ jar cha’;tera’ jar wej;tera’ jar loS;tera’ jar vagh;tera’ jar jav;tera’ jar Soch;tera’ jar chorgh;tera’ jar Hut;tera’ jar wa’maH;tera’ jar wa’maH wa’;tera’ jar wa’maH cha’".split(";"),
        monthsShort: "jar wa’;jar cha’;jar wej;jar loS;jar vagh;jar jav;jar Soch;jar chorgh;jar Hut;jar wa’maH;jar wa’maH wa’;jar wa’maH cha’".split(";"),
        monthsParseExact: !0,
        weekdays: "lojmItjaj DaSjaj povjaj ghItlhjaj loghjaj buqjaj ghInjaj".split(" "),
        weekdaysShort: "lojmItjaj DaSjaj povjaj ghItlhjaj loghjaj buqjaj ghInjaj".split(" "),
        weekdaysMin: "lojmItjaj DaSjaj povjaj ghItlhjaj loghjaj buqjaj ghInjaj".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[DaHjaj] LT",
            nextDay: "[wa’leS] LT",
            nextWeek: "LLL",
            lastDay: "[wa’Hu’] LT",
            lastWeek: "LLL",
            sameElse: "L"
        },
        relativeTime: {
            future: function (a) {
                return -1 !== a.indexOf("jaj") ? a.slice(0, -3) + "leS" : -1 !== a.indexOf("jar") ? a.slice(0, -3) + "waQ" : -1 !== a.indexOf("DIS") ? a.slice(0, -3) + "nem" : a + " pIq"
            },
            past: function (a) {
                return -1 !== a.indexOf("jaj") ? a.slice(0, -3) + "Hu’" : -1 !== a.indexOf("jar") ? a.slice(0, -3) + "wen" : -1 !== a.indexOf("DIS") ?
                    a.slice(0, -3) + "ben" : a + " ret"
            },
            s: "puS lup",
            m: "wa’ tup",
            mm: Ab,
            h: "wa’ rep",
            hh: Ab,
            d: "wa’ jaj",
            dd: Ab,
            M: "wa’ jar",
            MM: Ab,
            y: "wa’ DIS",
            yy: Ab
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    var vc = {
        1: "'inci",
        5: "'inci",
        8: "'inci",
        70: "'inci",
        80: "'inci",
        2: "'nci",
        7: "'nci",
        20: "'nci",
        50: "'nci",
        3: "'üncü",
        4: "'üncü",
        100: "'üncü",
        6: "'ncı",
        9: "'uncu",
        10: "'uncu",
        30: "'uncu",
        60: "'ıncı",
        90: "'ıncı"
    };
    a.defineLocale("tr", {
        months: "Ocak Şubat Mart Nisan Mayıs Haziran Temmuz Ağustos Eylül Ekim Kasım Aralık".split(" "),
        monthsShort: "Oca Şub Mar Nis May Haz Tem Ağu Eyl Eki Kas Ara".split(" "),
        weekdays: "Pazar Pazartesi Salı Çarşamba Perşembe Cuma Cumartesi".split(" "),
        weekdaysShort: "Paz Pts Sal Çar Per Cum Cts".split(" "),
        weekdaysMin: "Pz Pt Sa Ça Pe Cu Ct".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[bugün saat] LT",
            nextDay: "[yarın saat] LT",
            nextWeek: "[haftaya] dddd [saat] LT",
            lastDay: "[dün] LT",
            lastWeek: "[geçen hafta] dddd [saat] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s sonra",
            past: "%s önce",
            s: "birkaç saniye",
            m: "bir dakika",
            mm: "%d dakika",
            h: "bir saat",
            hh: "%d saat",
            d: "bir gün",
            dd: "%d gün",
            M: "bir ay",
            MM: "%d ay",
            y: "bir yıl",
            yy: "%d yıl"
        },
        dayOfMonthOrdinalParse: /\d{1,2}'(inci|nci|\u00fcnc\u00fc|nc\u0131|uncu|\u0131nc\u0131)/,
        ordinal: function (a) {
            if (0 === a) return a + "'ıncı";
            var b = a % 10;
            return a + (vc[b] || vc[a % 100 - b] || vc[100 <= a ? 100 :
                null])
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    a.defineLocale("tzl", {
        months: "Januar Fevraglh Març Avrïu Mai Gün Julia Guscht Setemvar Listopäts Noemvar Zecemvar".split(" "),
        monthsShort: "Jan Fev Mar Avr Mai Gün Jul Gus Set Lis Noe Zec".split(" "),
        weekdays: "Súladi Lúneçi Maitzi Márcuri Xhúadi Viénerçi Sáturi".split(" "),
        weekdaysShort: "Súl Lún Mai Már Xhú Vié Sát".split(" "),
        weekdaysMin: "Sú Lú Ma Má Xh Vi Sá".split(" "),
        longDateFormat: {
            LT: "HH.mm",
            LTS: "HH.mm.ss",
            L: "DD.MM.YYYY",
            LL: "D. MMMM [dallas] YYYY",
            LLL: "D. MMMM [dallas] YYYY HH.mm",
            LLLL: "dddd, [li] D. MMMM [dallas] YYYY HH.mm"
        },
        meridiemParse: /d\'o|d\'a/i,
        isPM: function (a) {
            return "d'o" === a.toLowerCase()
        },
        meridiem: function (a, b, c) {
            return 11 < a ? c ? "d'o" : "D'O" : c ? "d'a" : "D'A"
        },
        calendar: {
            sameDay: "[oxhi à] LT",
            nextDay: "[demà à] LT",
            nextWeek: "dddd [à] LT",
            lastDay: "[ieiri à] LT",
            lastWeek: "[sür el] dddd [lasteu à] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "osprei %s",
            past: "ja%s",
            s: Ga,
            m: Ga,
            mm: Ga,
            h: Ga,
            hh: Ga,
            d: Ga,
            dd: Ga,
            M: Ga,
            MM: Ga,
            y: Ga,
            yy: Ga
        },
        dayOfMonthOrdinalParse: /\d{1,2}\./,
        ordinal: "%d.",
        week: {
            dow: 1,
            doy: 4
        }
    });
    a.defineLocale("tzm-latn", {
        months: "innayr brˤayrˤ marˤsˤ ibrir mayyw ywnyw ywlywz ɣwšt šwtanbir ktˤwbrˤ nwwanbir dwjnbir".split(" "),
        monthsShort: "innayr brˤayrˤ marˤsˤ ibrir mayyw ywnyw ywlywz ɣwšt šwtanbir ktˤwbrˤ nwwanbir dwjnbir".split(" "),
        weekdays: "asamas aynas asinas akras akwas asimwas asiḍyas".split(" "),
        weekdaysShort: "asamas aynas asinas akras akwas asimwas asiḍyas".split(" "),
        weekdaysMin: "asamas aynas asinas akras akwas asimwas asiḍyas".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[asdkh g] LT",
            nextDay: "[aska g] LT",
            nextWeek: "dddd [g] LT",
            lastDay: "[assant g] LT",
            lastWeek: "dddd [g] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "dadkh s yan %s",
            past: "yan %s",
            s: "imik",
            m: "minuḍ",
            mm: "%d minuḍ",
            h: "saɛa",
            hh: "%d tassaɛin",
            d: "ass",
            dd: "%d ossan",
            M: "ayowr",
            MM: "%d iyyirn",
            y: "asgas",
            yy: "%d isgasn"
        },
        week: {
            dow: 6,
            doy: 12
        }
    });
    a.defineLocale("tzm", {
        months: "ⵉⵏⵏⴰⵢⵔ ⴱⵕⴰⵢⵕ ⵎⴰⵕⵚ ⵉⴱⵔⵉⵔ ⵎⴰⵢⵢⵓ ⵢⵓⵏⵢⵓ ⵢⵓⵍⵢⵓⵣ ⵖⵓⵛⵜ ⵛⵓⵜⴰⵏⴱⵉⵔ ⴽⵟⵓⴱⵕ ⵏⵓⵡⴰⵏⴱⵉⵔ ⴷⵓⵊⵏⴱⵉⵔ".split(" "),
        monthsShort: "ⵉⵏⵏⴰⵢⵔ ⴱⵕⴰⵢⵕ ⵎⴰⵕⵚ ⵉⴱⵔⵉⵔ ⵎⴰⵢⵢⵓ ⵢⵓⵏⵢⵓ ⵢⵓⵍⵢⵓⵣ ⵖⵓⵛⵜ ⵛⵓⵜⴰⵏⴱⵉⵔ ⴽⵟⵓⴱⵕ ⵏⵓⵡⴰⵏⴱⵉⵔ ⴷⵓⵊⵏⴱⵉⵔ".split(" "),
        weekdays: "ⴰⵙⴰⵎⴰⵙ ⴰⵢⵏⴰⵙ ⴰⵙⵉⵏⴰⵙ ⴰⴽⵔⴰⵙ ⴰⴽⵡⴰⵙ ⴰⵙⵉⵎⵡⴰⵙ ⴰⵙⵉⴹⵢⴰⵙ".split(" "),
        weekdaysShort: "ⴰⵙⴰⵎⴰⵙ ⴰⵢⵏⴰⵙ ⴰⵙⵉⵏⴰⵙ ⴰⴽⵔⴰⵙ ⴰⴽⵡⴰⵙ ⴰⵙⵉⵎⵡⴰⵙ ⴰⵙⵉⴹⵢⴰⵙ".split(" "),
        weekdaysMin: "ⴰⵙⴰⵎⴰⵙ ⴰⵢⵏⴰⵙ ⴰⵙⵉⵏⴰⵙ ⴰⴽⵔⴰⵙ ⴰⴽⵡⴰⵙ ⴰⵙⵉⵎⵡⴰⵙ ⴰⵙⵉⴹⵢⴰⵙ".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[ⴰⵙⴷⵅ ⴴ] LT",
            nextDay: "[ⴰⵙⴽⴰ ⴴ] LT",
            nextWeek: "dddd [ⴴ] LT",
            lastDay: "[ⴰⵚⴰⵏⵜ ⴴ] LT",
            lastWeek: "dddd [ⴴ] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",
            past: "ⵢⴰⵏ %s",
            s: "ⵉⵎⵉⴽ",
            m: "ⵎⵉⵏⵓⴺ",
            mm: "%d ⵎⵉⵏⵓⴺ",
            h: "ⵙⴰⵄⴰ",
            hh: "%d ⵜⴰⵙⵙⴰⵄⵉⵏ",
            d: "ⴰⵙⵙ",
            dd: "%d oⵙⵙⴰⵏ",
            M: "ⴰⵢoⵓⵔ",
            MM: "%d ⵉⵢⵢⵉⵔⵏ",
            y: "ⴰⵙⴳⴰⵙ",
            yy: "%d ⵉⵙⴳⴰⵙⵏ"
        },
        week: {
            dow: 6,
            doy: 12
        }
    });
    a.defineLocale("uk", {
        months: {
            format: "січня лютого березня квітня травня червня липня серпня вересня жовтня листопада грудня".split(" "),
            standalone: "січень лютий березень квітень травень червень липень серпень вересень жовтень листопад грудень".split(" ")
        },
        monthsShort: "січ лют бер квіт трав черв лип серп вер жовт лист груд".split(" "),
        weekdays: function (a, b) {
            var c = {
                nominative: "неділя понеділок вівторок середа четвер п’ятниця субота".split(" "),
                accusative: "неділю понеділок вівторок середу четвер п’ятницю суботу".split(" "),
                genitive: "неділі понеділка вівторка середи четверга п’ятниці суботи".split(" ")
            };
            if (!a) return c.nominative;
            var d = /(\[[\u0412\u0432\u0423\u0443]\]) ?dddd/.test(b) ? "accusative" : /\[?(?:\u043c\u0438\u043d\u0443\u043b\u043e\u0457|\u043d\u0430\u0441\u0442\u0443\u043f\u043d\u043e\u0457)? ?\] ?dddd/.test(b) ? "genitive" : "nominative";
            return c[d][a.day()]
        },
        weekdaysShort: "нд пн вт ср чт пт сб".split(" "),
        weekdaysMin: "нд пн вт ср чт пт сб".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD.MM.YYYY",
            LL: "D MMMM YYYY р.",
            LLL: "D MMMM YYYY р., HH:mm",
            LLLL: "dddd, D MMMM YYYY р., HH:mm"
        },
        calendar: {
            sameDay: ob("[Сьогодні "),
            nextDay: ob("[Завтра "),
            lastDay: ob("[Вчора "),
            nextWeek: ob("[У] dddd ["),
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                case 3:
                case 5:
                case 6:
                    return ob("[Минулої] dddd [").call(this);
                case 1:
                case 2:
                case 4:
                    return ob("[Минулого] dddd [").call(this)
                }
            },
            sameElse: "L"
        },
        relativeTime: {
            future: "за %s",
            past: "%s тому",
            s: "декілька секунд",
            m: nb,
            mm: nb,
            h: "годину",
            hh: nb,
            d: "день",
            dd: nb,
            M: "місяць",
            MM: nb,
            y: "рік",
            yy: nb
        },
        meridiemParse: /\u043d\u043e\u0447\u0456|\u0440\u0430\u043d\u043a\u0443|\u0434\u043d\u044f|\u0432\u0435\u0447\u043e\u0440\u0430/,
        isPM: function (a) {
            return /^(\u0434\u043d\u044f|\u0432\u0435\u0447\u043e\u0440\u0430)$/.test(a)
        },
        meridiem: function (a, b, c) {
            return 4 > a ? "ночі" : 12 > a ? "ранку" : 17 > a ? "дня" : "вечора"
        },
        dayOfMonthOrdinalParse: /\d{1,2}-(\u0439|\u0433\u043e)/,
        ordinal: function (a, b) {
            switch (b) {
            case "M":
            case "d":
            case "DDD":
            case "w":
            case "W":
                return a + "-й";
            case "D":
                return a + "-го";
            default:
                return a
            }
        },
        week: {
            dow: 1,
            doy: 7
        }
    });
    var td = "جنوری فروری مارچ اپریل مئی جون جولائی اگست ستمبر اکتوبر نومبر دسمبر".split(" "),
        wc = "اتوار پیر منگل بدھ جمعرات جمعہ ہفتہ".split(" ");
    return a.defineLocale("ur", {
        months: td,
        monthsShort: td,
        weekdays: wc,
        weekdaysShort: wc,
        weekdaysMin: wc,
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd، D MMMM YYYY HH:mm"
        },
        meridiemParse: /\u0635\u0628\u062d|\u0634\u0627\u0645/,
        isPM: function (a) {
            return "شام" ===
                a
        },
        meridiem: function (a, b, c) {
            return 12 > a ? "صبح" : "شام"
        },
        calendar: {
            sameDay: "[آج بوقت] LT",
            nextDay: "[کل بوقت] LT",
            nextWeek: "dddd [بوقت] LT",
            lastDay: "[گذشتہ روز بوقت] LT",
            lastWeek: "[گذشتہ] dddd [بوقت] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s بعد",
            past: "%s قبل",
            s: "چند سیکنڈ",
            m: "ایک منٹ",
            mm: "%d منٹ",
            h: "ایک گھنٹہ",
            hh: "%d گھنٹے",
            d: "ایک دن",
            dd: "%d دن",
            M: "ایک ماہ",
            MM: "%d ماہ",
            y: "ایک سال",
            yy: "%d سال"
        },
        preparse: function (a) {
            return a.replace(/\u060c/g, ",")
        },
        postformat: function (a) {
            return a.replace(/,/g,
                "،")
        },
        week: {
            dow: 1,
            doy: 4
        }
    }), a.defineLocale("uz-latn", {
        months: "Yanvar Fevral Mart Aprel May Iyun Iyul Avgust Sentabr Oktabr Noyabr Dekabr".split(" "),
        monthsShort: "Yan Fev Mar Apr May Iyun Iyul Avg Sen Okt Noy Dek".split(" "),
        weekdays: "Yakshanba Dushanba Seshanba Chorshanba Payshanba Juma Shanba".split(" "),
        weekdaysShort: "Yak Dush Sesh Chor Pay Jum Shan".split(" "),
        weekdaysMin: "Ya Du Se Cho Pa Ju Sha".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "D MMMM YYYY, dddd HH:mm"
        },
        calendar: {
            sameDay: "[Bugun soat] LT [da]",
            nextDay: "[Ertaga] LT [da]",
            nextWeek: "dddd [kuni soat] LT [da]",
            lastDay: "[Kecha soat] LT [da]",
            lastWeek: "[O'tgan] dddd [kuni soat] LT [da]",
            sameElse: "L"
        },
        relativeTime: {
            future: "Yaqin %s ichida",
            past: "Bir necha %s oldin",
            s: "soniya",
            m: "bir daqiqa",
            mm: "%d daqiqa",
            h: "bir soat",
            hh: "%d soat",
            d: "bir kun",
            dd: "%d kun",
            M: "bir oy",
            MM: "%d oy",
            y: "bir yil",
            yy: "%d yil"
        },
        week: {
            dow: 1,
            doy: 7
        }
    }), a.defineLocale("uz", {
        months: "январ феврал март апрел май июн июл август сентябр октябр ноябр декабр".split(" "),
        monthsShort: "янв фев мар апр май июн июл авг сен окт ноя дек".split(" "),
        weekdays: "Якшанба Душанба Сешанба Чоршанба Пайшанба Жума Шанба".split(" "),
        weekdaysShort: "Якш Душ Сеш Чор Пай Жум Шан".split(" "),
        weekdaysMin: "Як Ду Се Чо Па Жу Ша".split(" "),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "D MMMM YYYY, dddd HH:mm"
        },
        calendar: {
            sameDay: "[Бугун соат] LT [да]",
            nextDay: "[Эртага] LT [да]",
            nextWeek: "dddd [куни соат] LT [да]",
            lastDay: "[Кеча соат] LT [да]",
            lastWeek: "[Утган] dddd [куни соат] LT [да]",
            sameElse: "L"
        },
        relativeTime: {
            future: "Якин %s ичида",
            past: "Бир неча %s олдин",
            s: "фурсат",
            m: "бир дакика",
            mm: "%d дакика",
            h: "бир соат",
            hh: "%d соат",
            d: "бир кун",
            dd: "%d кун",
            M: "бир ой",
            MM: "%d ой",
            y: "бир йил",
            yy: "%d йил"
        },
        week: {
            dow: 1,
            doy: 7
        }
    }), a.defineLocale("vi", {
        months: "tháng 1;tháng 2;tháng 3;tháng 4;tháng 5;tháng 6;tháng 7;tháng 8;tháng 9;tháng 10;tháng 11;tháng 12".split(";"),
        monthsShort: "Th01 Th02 Th03 Th04 Th05 Th06 Th07 Th08 Th09 Th10 Th11 Th12".split(" "),
        monthsParseExact: !0,
        weekdays: "chủ nhật;thứ hai;thứ ba;thứ tư;thứ năm;thứ sáu;thứ bảy".split(";"),
        weekdaysShort: "CN T2 T3 T4 T5 T6 T7".split(" "),
        weekdaysMin: "CN T2 T3 T4 T5 T6 T7".split(" "),
        weekdaysParseExact: !0,
        meridiemParse: /sa|ch/i,
        isPM: function (a) {
            return /^ch$/i.test(a)
        },
        meridiem: function (a, b, c) {
            return 12 > a ? c ? "sa" : "SA" : c ? "ch" : "CH"
        },
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "DD/MM/YYYY",
            LL: "D MMMM [năm] YYYY",
            LLL: "D MMMM [năm] YYYY HH:mm",
            LLLL: "dddd, D MMMM [năm] YYYY HH:mm",
            l: "DD/M/YYYY",
            ll: "D MMM YYYY",
            lll: "D MMM YYYY HH:mm",
            llll: "ddd, D MMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[Hôm nay lúc] LT",
            nextDay: "[Ngày mai lúc] LT",
            nextWeek: "dddd [tuần tới lúc] LT",
            lastDay: "[Hôm qua lúc] LT",
            lastWeek: "dddd [tuần rồi lúc] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "%s tới",
            past: "%s trước",
            s: "vài giây",
            m: "một phút",
            mm: "%d phút",
            h: "một giờ",
            hh: "%d giờ",
            d: "một ngày",
            dd: "%d ngày",
            M: "một tháng",
            MM: "%d tháng",
            y: "một năm",
            yy: "%d năm"
        },
        dayOfMonthOrdinalParse: /\d{1,2}/,
        ordinal: function (a) {
            return a
        },
        week: {
            dow: 1,
            doy: 4
        }
    }), a.defineLocale("x-pseudo", {
        months: "J~áñúá~rý F~ébrú~árý ~Márc~h Áp~ríl ~Máý ~Júñé~ Júl~ý Áú~gúst~ Sép~témb~ér Ó~ctób~ér Ñ~óvém~bér ~Décé~mbér".split(" "),
        monthsShort: "J~áñ ~Féb ~Már ~Ápr ~Máý ~Júñ ~Júl ~Áúg ~Sép ~Óct ~Ñóv ~Déc".split(" "),
        monthsParseExact: !0,
        weekdays: "S~úñdá~ý Mó~ñdáý~ Túé~sdáý~ Wéd~ñésd~áý T~húrs~dáý ~Fríd~áý S~átúr~dáý".split(" "),
        weekdaysShort: "S~úñ ~Móñ ~Túé ~Wéd ~Thú ~Frí ~Sát".split(" "),
        weekdaysMin: "S~ú Mó~ Tú ~Wé T~h Fr~ Sá".split(" "),
        weekdaysParseExact: !0,
        longDateFormat: {
            LT: "HH:mm",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY HH:mm",
            LLLL: "dddd, D MMMM YYYY HH:mm"
        },
        calendar: {
            sameDay: "[T~ódá~ý át] LT",
            nextDay: "[T~ómó~rró~w át] LT",
            nextWeek: "dddd [át] LT",
            lastDay: "[Ý~ést~érdá~ý át] LT",
            lastWeek: "[L~ást] dddd [át] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "í~ñ %s",
            past: "%s á~gó",
            s: "á ~féw ~sécó~ñds",
            m: "á ~míñ~úté",
            mm: "%d m~íñú~tés",
            h: "á~ñ hó~úr",
            hh: "%d h~óúrs",
            d: "á ~dáý",
            dd: "%d d~áýs",
            M: "á ~móñ~th",
            MM: "%d m~óñt~hs",
            y: "á ~ýéár",
            yy: "%d ý~éárs"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/,
        ordinal: function (a) {
            var b = a % 10;
            return a + (1 === ~~(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 ===
                b ? "nd" : 3 === b ? "rd" : "th")
        },
        week: {
            dow: 1,
            doy: 4
        }
    }), a.defineLocale("yo", {
        months: "Sẹ́rẹ́ Èrèlè Ẹrẹ̀nà Ìgbé Èbibi Òkùdu Agẹmo Ògún Owewe Ọ̀wàrà Bélú Ọ̀pẹ̀̀".split(" "),
        monthsShort: "Sẹ́r Èrl Ẹrn Ìgb Èbi Òkù Agẹ Ògú Owe Ọ̀wà Bél Ọ̀pẹ̀̀".split(" "),
        weekdays: "Àìkú Ajé Ìsẹ́gun Ọjọ́rú Ọjọ́bọ Ẹtì Àbámẹ́ta".split(" "),
        weekdaysShort: "Àìk Ajé Ìsẹ́ Ọjr Ọjb Ẹtì Àbá".split(" "),
        weekdaysMin: "Àì Aj Ìs Ọr Ọb Ẹt Àb".split(" "),
        longDateFormat: {
            LT: "h:mm A",
            LTS: "h:mm:ss A",
            L: "DD/MM/YYYY",
            LL: "D MMMM YYYY",
            LLL: "D MMMM YYYY h:mm A",
            LLLL: "dddd, D MMMM YYYY h:mm A"
        },
        calendar: {
            sameDay: "[Ònì ni] LT",
            nextDay: "[Ọ̀la ni] LT",
            nextWeek: "dddd [Ọsẹ̀ tón'bọ] [ni] LT",
            lastDay: "[Àna ni] LT",
            lastWeek: "dddd [Ọsẹ̀ tólọ́] [ni] LT",
            sameElse: "L"
        },
        relativeTime: {
            future: "ní %s",
            past: "%s kọjá",
            s: "ìsẹjú aayá die",
            m: "ìsẹjú kan",
            mm: "ìsẹjú %d",
            h: "wákati kan",
            hh: "wákati %d",
            d: "ọjọ́ kan",
            dd: "ọjọ́ %d",
            M: "osù kan",
            MM: "osù %d",
            y: "ọdún kan",
            yy: "ọdún %d"
        },
        dayOfMonthOrdinalParse: /\u1ecdj\u1ecd\u0301\s\d{1,2}/,
        ordinal: "ọjọ́ %d",
        week: {
            dow: 1,
            doy: 4
        }
    }), a.defineLocale("zh-cn", {
        months: "一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" "),
        monthsShort: "1月 2月 3月 4月 5月 6月 7月 8月 9月 10月 11月 12月".split(" "),
        weekdays: "星期日 星期一 星期二 星期三 星期四 星期五 星期六".split(" "),
        weekdaysShort: "周日 周一 周二 周三 周四 周五 周六".split(" "),
        weekdaysMin: "日一二三四五六".split(""),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "YYYY年MMMD日",
            LL: "YYYY年MMMD日",
            LLL: "YYYY年MMMD日Ah点mm分",
            LLLL: "YYYY年MMMD日ddddAh点mm分",
            l: "YYYY年MMMD日",
            ll: "YYYY年MMMD日",
            lll: "YYYY年MMMD日 HH:mm",
            llll: "YYYY年MMMD日dddd HH:mm"
        },
        meridiemParse: /\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "凌晨" === b || "早上" === b || "上午" === b ? a : "下午" === b || "晚上" === b ? a + 12 : 11 <= a ? a : a + 12
        },
        meridiem: function (a, b, c) {
            a = 100 * a + b;
            return 600 > a ? "凌晨" : 900 > a ? "早上" : 1130 > a ? "上午" : 1230 > a ? "中午" :
                1800 > a ? "下午" : "晚上"
        },
        calendar: {
            sameDay: "[今天]LT",
            nextDay: "[明天]LT",
            nextWeek: "[下]ddddLT",
            lastDay: "[昨天]LT",
            lastWeek: "[上]ddddLT",
            sameElse: "L"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(\u65e5|\u6708|\u5468)/,
        ordinal: function (a, b) {
            switch (b) {
            case "d":
            case "D":
            case "DDD":
                return a + "日";
            case "M":
                return a + "月";
            case "w":
            case "W":
                return a + "周";
            default:
                return a
            }
        },
        relativeTime: {
            future: "%s内",
            past: "%s前",
            s: "几秒",
            m: "1 分钟",
            mm: "%d 分钟",
            h: "1 小时",
            hh: "%d 小时",
            d: "1 天",
            dd: "%d 天",
            M: "1 个月",
            MM: "%d 个月",
            y: "1 年",
            yy: "%d 年"
        },
        week: {
            dow: 1,
            doy: 4
        }
    }), a.defineLocale("zh-hk", {
        months: "一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" "),
        monthsShort: "1月 2月 3月 4月 5月 6月 7月 8月 9月 10月 11月 12月".split(" "),
        weekdays: "星期日 星期一 星期二 星期三 星期四 星期五 星期六".split(" "),
        weekdaysShort: "週日 週一 週二 週三 週四 週五 週六".split(" "),
        weekdaysMin: "日一二三四五六".split(""),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "YYYY年MMMD日",
            LL: "YYYY年MMMD日",
            LLL: "YYYY年MMMD日 HH:mm",
            LLLL: "YYYY年MMMD日dddd HH:mm",
            l: "YYYY年MMMD日",
            ll: "YYYY年MMMD日",
            lll: "YYYY年MMMD日 HH:mm",
            llll: "YYYY年MMMD日dddd HH:mm"
        },
        meridiemParse: /\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "凌晨" === b || "早上" === b || "上午" === b ? a : "中午" === b ? 11 <= a ? a : a + 12 : "下午" === b || "晚上" === b ? a + 12 : void 0
        },
        meridiem: function (a, b, c) {
            a = 100 * a + b;
            return 600 > a ? "凌晨" : 900 > a ? "早上" : 1130 > a ? "上午" : 1230 > a ? "中午" : 1800 > a ? "下午" : "晚上"
        },
        calendar: {
            sameDay: "[今天]LT",
            nextDay: "[明天]LT",
            nextWeek: "[下]ddddLT",
            lastDay: "[昨天]LT",
            lastWeek: "[上]ddddLT",
            sameElse: "L"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(\u65e5|\u6708|\u9031)/,
        ordinal: function (a, b) {
            switch (b) {
            case "d":
            case "D":
            case "DDD":
                return a + "日";
            case "M":
                return a + "月";
            case "w":
            case "W":
                return a + "週";
            default:
                return a
            }
        },
        relativeTime: {
            future: "%s內",
            past: "%s前",
            s: "幾秒",
            m: "1 分鐘",
            mm: "%d 分鐘",
            h: "1 小時",
            hh: "%d 小時",
            d: "1 天",
            dd: "%d 天",
            M: "1 個月",
            MM: "%d 個月",
            y: "1 年",
            yy: "%d 年"
        }
    }), a.defineLocale("zh-tw", {
        months: "一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" "),
        monthsShort: "1月 2月 3月 4月 5月 6月 7月 8月 9月 10月 11月 12月".split(" "),
        weekdays: "星期日 星期一 星期二 星期三 星期四 星期五 星期六".split(" "),
        weekdaysShort: "週日 週一 週二 週三 週四 週五 週六".split(" "),
        weekdaysMin: "日一二三四五六".split(""),
        longDateFormat: {
            LT: "HH:mm",
            LTS: "HH:mm:ss",
            L: "YYYY年MMMD日",
            LL: "YYYY年MMMD日",
            LLL: "YYYY年MMMD日 HH:mm",
            LLLL: "YYYY年MMMD日dddd HH:mm",
            l: "YYYY年MMMD日",
            ll: "YYYY年MMMD日",
            lll: "YYYY年MMMD日 HH:mm",
            llll: "YYYY年MMMD日dddd HH:mm"
        },
        meridiemParse: /\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,
        meridiemHour: function (a, b) {
            return 12 === a && (a = 0), "凌晨" === b || "早上" === b || "上午" === b ? a : "中午" === b ? 11 <= a ? a : a + 12 : "下午" === b || "晚上" ===
                b ? a + 12 : void 0
        },
        meridiem: function (a, b, c) {
            a = 100 * a + b;
            return 600 > a ? "凌晨" : 900 > a ? "早上" : 1130 > a ? "上午" : 1230 > a ? "中午" : 1800 > a ? "下午" : "晚上"
        },
        calendar: {
            sameDay: "[今天]LT",
            nextDay: "[明天]LT",
            nextWeek: "[下]ddddLT",
            lastDay: "[昨天]LT",
            lastWeek: "[上]ddddLT",
            sameElse: "L"
        },
        dayOfMonthOrdinalParse: /\d{1,2}(\u65e5|\u6708|\u9031)/,
        ordinal: function (a, b) {
            switch (b) {
            case "d":
            case "D":
            case "DDD":
                return a + "日";
            case "M":
                return a + "月";
            case "w":
            case "W":
                return a +
                    "週";
            default:
                return a
            }
        },
        relativeTime: {
            future: "%s內",
            past: "%s前",
            s: "幾秒",
            m: "1 分鐘",
            mm: "%d 分鐘",
            h: "1 小時",
            hh: "%d 小時",
            d: "1 天",
            dd: "%d 天",
            M: "1 個月",
            MM: "%d 個月",
            y: "1 年",
            yy: "%d 年"
        }
    }), a.locale("en"), a
});
(function (a, b) {
    function c(a) {
        return !!("" === a || a && a.charCodeAt && a.substr)
    }

    function d(a) {
        return v ? v(a) : "[object Array]" === x.call(a)
    }

    function f(a) {
        return a && "[object Object]" === x.call(a)
    }

    function g(a, b) {
        var c;
        a = a || {};
        b = b || {};
        for (c in b) b.hasOwnProperty(c) && null == a[c] && (a[c] = b[c]);
        return a
    }

    function h(a, b, c) {
        var d = [],
            f, g;
        if (!a) return d;
        if (u && a.map === u) return a.map(b, c);
        f = 0;
        for (g = a.length; f < g; f++) d[f] = b.call(c, a[f], f, a);
        return d
    }

    function m(a, b) {
        a = Math.round(Math.abs(a));
        return isNaN(a) ? b : a
    }

    function n(a) {
        var b =
            p.settings.currency.format;
        "function" === typeof a && (a = a());
        return c(a) && a.match("%v") ? {
            pos: a,
            neg: a.replace("-", "").replace("%v", "-%v"),
            zero: a
        } : !a || !a.pos || !a.pos.match("%v") ? !c(b) ? b : p.settings.currency.format = {
            pos: b,
            neg: b.replace("%v", "-%v"),
            zero: b
        } : a
    }
    var p = {
            version: "0.4.1",
            settings: {
                currency: {
                    symbol: "$",
                    format: "%s%v",
                    decimal: ".",
                    thousand: ",",
                    precision: 2,
                    grouping: 3
                },
                number: {
                    precision: 0,
                    grouping: 3,
                    thousand: ",",
                    decimal: "."
                }
            }
        },
        u = Array.prototype.map,
        v = Array.isArray,
        x = Object.prototype.toString,
        y = p.unformat =
        p.parse = function (a, b) {
            if (d(a)) return h(a, function (a) {
                return y(a, b)
            });
            a = a || 0;
            if ("number" === typeof a) return a;
            b = b || p.settings.number.decimal;
            var c = RegExp("[^0-9-" + b + "]", ["g"]),
                c = parseFloat(("" + a).replace(/\((.*)\)/, "-$1").replace(c, "").replace(b, "."));
            return !isNaN(c) ? c : 0
        },
        z = p.toFixed = function (a, b) {
            b = m(b, p.settings.number.precision);
            var c = Math.pow(10, b);
            return (Math.round(p.unformat(a) * c) / c).toFixed(b)
        },
        t = p.formatNumber = p.format = function (a, b, c, n) {
            if (d(a)) return h(a, function (a) {
                return t(a, b, c, n)
            });
            a = y(a);
            var u = g(f(b) ? b : {
                    precision: b,
                    thousand: c,
                    decimal: n
                }, p.settings.number),
                v = m(u.precision),
                x = 0 > a ? "-" : "",
                A = parseInt(z(Math.abs(a || 0), v), 10) + "",
                M = 3 < A.length ? A.length % 3 : 0;
            return x + (M ? A.substr(0, M) + u.thousand : "") + A.substr(M).replace(/(\d{3})(?=\d)/g, "$1" + u.thousand) + (v ? u.decimal + z(Math.abs(a), v).split(".")[1] : "")
        },
        A = p.formatMoney = function (a, b, c, u, v, x) {
            if (d(a)) return h(a, function (a) {
                return A(a, b, c, u, v, x)
            });
            a = y(a);
            var z = g(f(b) ? b : {
                    symbol: b,
                    precision: c,
                    thousand: u,
                    decimal: v,
                    format: x
                }, p.settings.currency),
                H = n(z.format);
            return (0 < a ? H.pos : 0 > a ? H.neg : H.zero).replace("%s", z.symbol).replace("%v", t(Math.abs(a), m(z.precision), z.thousand, z.decimal))
        };
    p.formatColumn = function (a, b, u, v, x, z) {
        if (!a) return [];
        var A = g(f(b) ? b : {
                symbol: b,
                precision: u,
                thousand: v,
                decimal: x,
                format: z
            }, p.settings.currency),
            H = n(A.format),
            M = H.pos.indexOf("%s") < H.pos.indexOf("%v") ? !0 : !1,
            K = 0;
        a = h(a, function (a, b) {
            if (d(a)) return p.formatColumn(a, A);
            a = y(a);
            var c = (0 < a ? H.pos : 0 > a ? H.neg : H.zero).replace("%s", A.symbol).replace("%v", t(Math.abs(a), m(A.precision), A.thousand,
                A.decimal));
            c.length > K && (K = c.length);
            return c
        });
        return h(a, function (a, b) {
            return c(a) && a.length < K ? M ? a.replace(A.symbol, A.symbol + Array(K - a.length + 1).join(" ")) : Array(K - a.length + 1).join(" ") + a : a
        })
    };
    "undefined" !== typeof exports ? ("undefined" !== typeof module && module.exports && (exports = module.exports = p), exports.accounting = p) : "function" === typeof define && define.amd ? define([], function () {
        return p
    }) : (p.noConflict = function (c) {
            return function () {
                a.accounting = c;
                p.noConflict = b;
                return p
            }
        }(a.accounting), a.accounting =
        p)
})(this);
Date.CultureInfo = {
    name: "en-US",
    englishName: "English (United States)",
    nativeName: "English (United States)",
    dayNames: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
    abbreviatedDayNames: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
    shortestDayNames: "Su Mo Tu We Th Fr Sa".split(" "),
    firstLetterDayNames: "SMTWTFS".split(""),
    monthNames: "January February March April May June July August September October November December".split(" "),
    abbreviatedMonthNames: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
    amDesignator: "AM",
    pmDesignator: "PM",
    firstDayOfWeek: 0,
    twoDigitYearMax: 2029,
    dateElementOrder: "mdy",
    formatPatterns: {
        shortDate: "M/d/yyyy",
        longDate: "dddd, MMMM dd, yyyy",
        shortTime: "h:mm tt",
        longTime: "h:mm:ss tt",
        fullDateTime: "dddd, MMMM dd, yyyy h:mm:ss tt",
        sortableDateTime: "yyyy-MM-ddTHH:mm:ss",
        universalSortableDateTime: "yyyy-MM-dd HH:mm:ssZ",
        rfc1123: "ddd, dd MMM yyyy HH:mm:ss GMT",
        monthDay: "MMMM dd",
        yearMonth: "MMMM, yyyy"
    },
    regexPatterns: {
        jan: /^jan(uary)?/i,
        feb: /^feb(ruary)?/i,
        mar: /^mar(ch)?/i,
        apr: /^apr(il)?/i,
        may: /^may/i,
        jun: /^jun(e)?/i,
        jul: /^jul(y)?/i,
        aug: /^aug(ust)?/i,
        sep: /^sep(t(ember)?)?/i,
        oct: /^oct(ober)?/i,
        nov: /^nov(ember)?/i,
        dec: /^dec(ember)?/i,
        sun: /^su(n(day)?)?/i,
        mon: /^mo(n(day)?)?/i,
        tue: /^tu(e(s(day)?)?)?/i,
        wed: /^we(d(nesday)?)?/i,
        thu: /^th(u(r(s(day)?)?)?)?/i,
        fri: /^fr(i(day)?)?/i,
        sat: /^sa(t(urday)?)?/i,
        future: /^next/i,
        past: /^last|past|prev(ious)?/i,
        add: /^(\+|after|from)/i,
        subtract: /^(\-|before|ago)/i,
        yesterday: /^yesterday/i,
        today: /^t(oday)?/i,
        tomorrow: /^tomorrow/i,
        now: /^n(ow)?/i,
        millisecond: /^ms|milli(second)?s?/i,
        second: /^sec(ond)?s?/i,
        minute: /^min(ute)?s?/i,
        hour: /^h(ou)?rs?/i,
        week: /^w(ee)?k/i,
        month: /^m(o(nth)?s?)?/i,
        day: /^d(ays?)?/i,
        year: /^y((ea)?rs?)?/i,
        shortMeridian: /^(a|p)/i,
        longMeridian: /^(a\.?m?\.?|p\.?m?\.?)/i,
        timezone: /^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,
        ordinalSuffix: /^\s*(st|nd|rd|th)/i,
        timeContext: /^\s*(\:|a|p)/i
    },
    abbreviatedTimeZoneStandard: {
        GMT: "-000",
        EST: "-0400",
        CST: "-0500",
        MST: "-0600",
        PST: "-0700"
    },
    abbreviatedTimeZoneDST: {
        GMT: "-000",
        EDT: "-0500",
        CDT: "-0600",
        MDT: "-0700",
        PDT: "-0800"
    }
};
Date.getMonthNumberFromName = function (a) {
    var b = Date.CultureInfo.monthNames,
        c = Date.CultureInfo.abbreviatedMonthNames;
    a = a.toLowerCase();
    for (var d = 0; d < b.length; d++)
        if (b[d].toLowerCase() == a || c[d].toLowerCase() == a) return d;
    return -1
};
Date.getDayNumberFromName = function (a) {
    var b = Date.CultureInfo.dayNames,
        c = Date.CultureInfo.abbreviatedDayNames;
    a = a.toLowerCase();
    for (var d = 0; d < b.length; d++)
        if (b[d].toLowerCase() == a || c[d].toLowerCase() == a) return d;
    return -1
};
Date.isLeapYear = function (a) {
    return 0 === a % 4 && 0 !== a % 100 || 0 === a % 400
};
Date.getDaysInMonth = function (a, b) {
    return [31, Date.isLeapYear(a) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][b]
};
Date.getTimezoneOffset = function (a, b) {
    return b ? Date.CultureInfo.abbreviatedTimeZoneDST[a.toUpperCase()] : Date.CultureInfo.abbreviatedTimeZoneStandard[a.toUpperCase()]
};
Date.getTimezoneAbbreviation = function (a, b) {
    var c = b ? Date.CultureInfo.abbreviatedTimeZoneDST : Date.CultureInfo.abbreviatedTimeZoneStandard,
        d;
    for (d in c)
        if (c[d] === a) return d;
    return null
};
Date.prototype.clone = function () {
    return new Date(this.getTime())
};
Date.prototype.compareTo = function (a) {
    if (isNaN(this)) throw Error(this);
    if (a instanceof Date && !isNaN(a)) return this > a ? 1 : this < a ? -1 : 0;
    throw new TypeError(a);
};
Date.prototype.equals = function (a) {
    return 0 === this.compareTo(a)
};
Date.prototype.between = function (a, b) {
    var c = this.getTime();
    return c >= a.getTime() && c <= b.getTime()
};
Date.prototype.addMilliseconds = function (a) {
    this.setMilliseconds(this.getMilliseconds() + a);
    return this
};
Date.prototype.addSeconds = function (a) {
    return this.addMilliseconds(1E3 * a)
};
Date.prototype.addMinutes = function (a) {
    return this.addMilliseconds(6E4 * a)
};
Date.prototype.addHours = function (a) {
    return this.addMilliseconds(36E5 * a)
};
Date.prototype.addDays = function (a) {
    return this.addMilliseconds(864E5 * a)
};
Date.prototype.addWeeks = function (a) {
    return this.addMilliseconds(6048E5 * a)
};
Date.prototype.addMonths = function (a) {
    var b = this.getDate();
    this.setDate(1);
    this.setMonth(this.getMonth() + a);
    this.setDate(Math.min(b, this.getDaysInMonth()));
    return this
};
Date.prototype.addYears = function (a) {
    return this.addMonths(12 * a)
};
Date.prototype.add = function (a) {
    if ("number" == typeof a) return this._orient = a, this;
    if (a.millisecond || a.milliseconds) this.addMilliseconds(a.millisecond || a.milliseconds);
    if (a.second || a.seconds) this.addSeconds(a.second || a.seconds);
    if (a.minute || a.minutes) this.addMinutes(a.minute || a.minutes);
    if (a.hour || a.hours) this.addHours(a.hour || a.hours);
    if (a.month || a.months) this.addMonths(a.month || a.months);
    if (a.year || a.years) this.addYears(a.year || a.years);
    if (a.day || a.days) this.addDays(a.day || a.days);
    return this
};
Date._validate = function (a, b, c, d) {
    if ("number" != typeof a) throw new TypeError(a + " is not a Number.");
    if (a < b || a > c) throw new RangeError(a + " is not a valid value for " + d + ".");
    return !0
};
Date.validateMillisecond = function (a) {
    return Date._validate(a, 0, 999, "milliseconds")
};
Date.validateSecond = function (a) {
    return Date._validate(a, 0, 59, "seconds")
};
Date.validateMinute = function (a) {
    return Date._validate(a, 0, 59, "minutes")
};
Date.validateHour = function (a) {
    return Date._validate(a, 0, 23, "hours")
};
Date.validateDay = function (a, b, c) {
    return Date._validate(a, 1, Date.getDaysInMonth(b, c), "days")
};
Date.validateMonth = function (a) {
    return Date._validate(a, 0, 11, "months")
};
Date.validateYear = function (a) {
    return Date._validate(a, 1, 9999, "seconds")
};
Date.prototype.set = function (a) {
    !a.millisecond && 0 !== a.millisecond && (a.millisecond = -1);
    !a.second && 0 !== a.second && (a.second = -1);
    !a.minute && 0 !== a.minute && (a.minute = -1);
    !a.hour && 0 !== a.hour && (a.hour = -1);
    !a.day && 0 !== a.day && (a.day = -1);
    !a.month && 0 !== a.month && (a.month = -1);
    !a.year && 0 !== a.year && (a.year = -1); - 1 != a.millisecond && Date.validateMillisecond(a.millisecond) && this.addMilliseconds(a.millisecond - this.getMilliseconds()); - 1 != a.second && Date.validateSecond(a.second) && this.addSeconds(a.second - this.getSeconds()); -
    1 != a.minute && Date.validateMinute(a.minute) && this.addMinutes(a.minute - this.getMinutes()); - 1 != a.hour && Date.validateHour(a.hour) && this.addHours(a.hour - this.getHours()); - 1 !== a.month && Date.validateMonth(a.month) && this.addMonths(a.month - this.getMonth()); - 1 != a.year && Date.validateYear(a.year) && this.addYears(a.year - this.getFullYear()); - 1 != a.day && Date.validateDay(a.day, this.getFullYear(), this.getMonth()) && this.addDays(a.day - this.getDate());
    a.timezone && this.setTimezone(a.timezone);
    a.timezoneOffset && this.setTimezoneOffset(a.timezoneOffset);
    return this
};
Date.prototype.clearTime = function () {
    this.setHours(0);
    this.setMinutes(0);
    this.setSeconds(0);
    this.setMilliseconds(0);
    return this
};
Date.prototype.isLeapYear = function () {
    var a = this.getFullYear();
    return 0 === a % 4 && 0 !== a % 100 || 0 === a % 400
};
Date.prototype.isWeekday = function () {
    return !(this.is().sat() || this.is().sun())
};
Date.prototype.getDaysInMonth = function () {
    return Date.getDaysInMonth(this.getFullYear(), this.getMonth())
};
Date.prototype.moveToFirstDayOfMonth = function () {
    return this.set({
        day: 1
    })
};
Date.prototype.moveToLastDayOfMonth = function () {
    return this.set({
        day: this.getDaysInMonth()
    })
};
Date.prototype.moveToDayOfWeek = function (a, b) {
    var c = (a - this.getDay() + 7 * (b || 1)) % 7;
    return this.addDays(0 === c ? c + 7 * (b || 1) : c)
};
Date.prototype.moveToMonth = function (a, b) {
    var c = (a - this.getMonth() + 12 * (b || 1)) % 12;
    return this.addMonths(0 === c ? c + 12 * (b || 1) : c)
};
Date.prototype.getDayOfYear = function () {
    return Math.floor((this - new Date(this.getFullYear(), 0, 1)) / 864E5)
};
Date.prototype.getWeekOfYear = function (a) {
    var b = this.getFullYear(),
        c = this.getMonth(),
        d = this.getDate();
    a = a || Date.CultureInfo.firstDayOfWeek;
    var f = 8 - (new Date(b, 0, 1)).getDay();
    8 == f && (f = 1);
    c = (Date.UTC(b, c, d, 0, 0, 0) - Date.UTC(b, 0, 1, 0, 0, 0)) / 864E5 + 1;
    c = Math.floor((c - f + 7) / 7);
    c === a && (b--, b = 8 - (new Date(b, 0, 1)).getDay(), c = 2 == b || 8 == b ? 53 : 52);
    return c
};
Date.prototype.isDST = function () {
    console.log("isDST");
    return "D" == this.toString().match(/(E|C|M|P)(S|D)T/)[2]
};
Date.prototype.getTimezone = function () {
    return Date.getTimezoneAbbreviation(this.getUTCOffset, this.isDST())
};
Date.prototype.setTimezoneOffset = function (a) {
    var b = this.getTimezoneOffset();
    this.addMinutes(-6 * Number(a) / 10 - b);
    return this
};
Date.prototype.setTimezone = function (a) {
    return this.setTimezoneOffset(Date.getTimezoneOffset(a))
};
Date.prototype.getUTCOffset = function () {
    var a = -10 * this.getTimezoneOffset() / 6;
    if (0 > a) return a = (a - 1E4).toString(), a[0] + a.substr(2);
    a = (a + 1E4).toString();
    return "+" + a.substr(1)
};
Date.prototype.getDayName = function (a) {
    return a ? Date.CultureInfo.abbreviatedDayNames[this.getDay()] : Date.CultureInfo.dayNames[this.getDay()]
};
Date.prototype.getMonthName = function (a) {
    return a ? Date.CultureInfo.abbreviatedMonthNames[this.getMonth()] : Date.CultureInfo.monthNames[this.getMonth()]
};
Date.prototype._toString = Date.prototype.toString;
Date.prototype.toString = function (a) {
    var b = this,
        c = function (a) {
            return 1 == a.toString().length ? "0" + a : a
        };
    return a ? a.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g, function (a) {
        switch (a) {
        case "hh":
            return c(13 > b.getHours() ? b.getHours() : b.getHours() - 12);
        case "h":
            return 13 > b.getHours() ? b.getHours() : b.getHours() - 12;
        case "HH":
            return c(b.getHours());
        case "H":
            return b.getHours();
        case "mm":
            return c(b.getMinutes());
        case "m":
            return b.getMinutes();
        case "ss":
            return c(b.getSeconds());
        case "s":
            return b.getSeconds();
        case "yyyy":
            return b.getFullYear();
        case "yy":
            return b.getFullYear().toString().substring(2, 4);
        case "dddd":
            return b.getDayName();
        case "ddd":
            return b.getDayName(!0);
        case "dd":
            return c(b.getDate());
        case "d":
            return b.getDate().toString();
        case "MMMM":
            return b.getMonthName();
        case "MMM":
            return b.getMonthName(!0);
        case "MM":
            return c(b.getMonth() + 1);
        case "M":
            return b.getMonth() + 1;
        case "t":
            return 12 > b.getHours() ? Date.CultureInfo.amDesignator.substring(0, 1) : Date.CultureInfo.pmDesignator.substring(0, 1);
        case "tt":
            return 12 >
                b.getHours() ? Date.CultureInfo.amDesignator : Date.CultureInfo.pmDesignator;
        case "zzz":
        case "zz":
        case "z":
            return ""
        }
    }) : this._toString()
};
Date.now = function () {
    return new Date
};
Date.today = function () {
    return Date.now().clearTime()
};
Date.prototype._orient = 1;
Date.prototype.next = function () {
    this._orient = 1;
    return this
};
Date.prototype.last = Date.prototype.prev = Date.prototype.previous = function () {
    this._orient = -1;
    return this
};
Date.prototype._is = !1;
Date.prototype.is = function () {
    this._is = !0;
    return this
};
Number.prototype._dateElement = "day";
Number.prototype.fromNow = function () {
    var a = {};
    a[this._dateElement] = this;
    return Date.now().add(a)
};
Number.prototype.ago = function () {
    var a = {};
    a[this._dateElement] = -1 * this;
    return Date.now().add(a)
};
(function () {
    for (var a = Date.prototype, b = Number.prototype, c = "sunday monday tuesday wednesday thursday friday saturday".split(/\s/), d = "january february march april may june july august september october november december".split(/\s/), f = "Millisecond Second Minute Hour Day Week Month Year".split(/\s/), g = function (a) {
            return function () {
                return this._is ? (this._is = !1, this.getDay() == a) : this.moveToDayOfWeek(a, this._orient)
            }
        }, h = 0; h < c.length; h++) a[c[h]] = a[c[h].substring(0, 3)] = g(h);
    c = function (a) {
        return function () {
            return this._is ?
                (this._is = !1, this.getMonth() === a) : this.moveToMonth(a, this._orient)
        }
    };
    for (g = 0; g < d.length; g++) a[d[g]] = a[d[g].substring(0, 3)] = c(g);
    c = function (a) {
        return function () {
            "s" != a.substring(a.length - 1) && (a += "s");
            return this["add" + a](this._orient)
        }
    };
    g = function (a) {
        return function () {
            this._dateElement = a;
            return this
        }
    };
    for (h = 0; h < f.length; h++) d = f[h].toLowerCase(), a[d] = a[d + "s"] = c(f[h]), b[d] = b[d + "s"] = g(d)
})();
Date.prototype.toJSONString = function () {
    return this.toString("yyyy-MM-ddThh:mm:ssZ")
};
Date.prototype.toShortDateString = function () {
    return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)
};
Date.prototype.toLongDateString = function () {
    return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)
};
Date.prototype.toShortTimeString = function () {
    return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)
};
Date.prototype.toLongTimeString = function () {
    return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)
};
Date.prototype.getOrdinal = function () {
    switch (this.getDate()) {
    case 1:
    case 21:
    case 31:
        return "st";
    case 2:
    case 22:
        return "nd";
    case 3:
    case 23:
        return "rd";
    default:
        return "th"
    }
};
(function () {
    Date.Parsing = {
        Exception: function (a) {
            this.message = "Parse error at '" + a.substring(0, 10) + " ...'"
        }
    };
    for (var a = Date.Parsing, b = a.Operators = {
            rtoken: function (b) {
                return function (c) {
                    var d = c.match(b);
                    if (d) return [d[0], c.substring(d[0].length)];
                    throw new a.Exception(c);
                }
            },
            token: function (a) {
                return function (a) {
                    return b.rtoken(RegExp("^s*" + a + "s*"))(a)
                }
            },
            stoken: function (a) {
                return b.rtoken(RegExp("^" + a))
            },
            until: function (a) {
                return function (b) {
                    for (var c = [], d = null; b.length;) {
                        try {
                            d = a.call(this, b)
                        } catch (f) {
                            c.push(d[0]);
                            b = d[1];
                            continue
                        }
                        break
                    }
                    return [c, b]
                }
            },
            many: function (a) {
                return function (b) {
                    for (var c = [], d = null; b.length;) {
                        try {
                            d = a.call(this, b)
                        } catch (f) {
                            break
                        }
                        c.push(d[0]);
                        b = d[1]
                    }
                    return [c, b]
                }
            },
            optional: function (a) {
                return function (b) {
                    var c = null;
                    try {
                        c = a.call(this, b)
                    } catch (d) {
                        return [null, b]
                    }
                    return [c[0], c[1]]
                }
            },
            not: function (b) {
                return function (c) {
                    try {
                        b.call(this, c)
                    } catch (d) {
                        return [null, c]
                    }
                    throw new a.Exception(c);
                }
            },
            ignore: function (a) {
                return a ? function (b) {
                    var c = null,
                        c = a.call(this, b);
                    return [null, c[1]]
                } : null
            },
            product: function () {
                for (var a =
                        arguments[0], c = Array.prototype.slice.call(arguments, 1), d = [], f = 0; f < a.length; f++) d.push(b.each(a[f], c));
                return d
            },
            cache: function (b) {
                var c = {},
                    d = null;
                return function (f) {
                    try {
                        d = c[f] = c[f] || b.call(this, f)
                    } catch (p) {
                        d = c[f] = p
                    }
                    if (d instanceof a.Exception) throw d;
                    return d
                }
            },
            any: function () {
                var b = arguments;
                return function (c) {
                    for (var d = null, f = 0; f < b.length; f++)
                        if (null != b[f]) {
                            try {
                                d = b[f].call(this, c)
                            } catch (p) {
                                d = null
                            }
                            if (d) return d
                        } throw new a.Exception(c);
                }
            },
            each: function () {
                var b = arguments;
                return function (c) {
                    for (var d = [], f = null, p = 0; p < b.length; p++)
                        if (null != b[p]) {
                            try {
                                f = b[p].call(this, c)
                            } catch (u) {
                                throw new a.Exception(c);
                            }
                            d.push(f[0]);
                            c = f[1]
                        } return [d, c]
                }
            },
            all: function () {
                var a = a;
                return a.each(a.optional(arguments))
            },
            sequence: function (c, d, f) {
                d = d || b.rtoken(/^\s*/);
                f = f || null;
                return 1 == c.length ? c[0] : function (b) {
                    for (var p = null, u = null, v = [], x = 0; x < c.length; x++) {
                        try {
                            p = c[x].call(this, b)
                        } catch (y) {
                            break
                        }
                        v.push(p[0]);
                        try {
                            u = d.call(this, p[1])
                        } catch (z) {
                            u = null;
                            break
                        }
                        b = u[1]
                    }
                    if (!p) throw new a.Exception(b);
                    if (u) throw new a.Exception(u[1]);
                    if (f) try {
                        p = f.call(this, p[1])
                    } catch (t) {
                        throw new a.Exception(p[1]);
                    }
                    return [v, p ? p[1] : b]
                }
            },
            between: function (a, c, d) {
                d = d || a;
                var f = b.each(b.ignore(a), c, b.ignore(d));
                return function (a) {
                    a = f.call(this, a);
                    return [
                        [a[0][0], r[0][2]], a[1]
                    ]
                }
            },
            list: function (a, c, d) {
                c = c || b.rtoken(/^\s*/);
                d = d || null;
                return a instanceof Array ? b.each(b.product(a.slice(0, -1), b.ignore(c)), a.slice(-1), b.ignore(d)) : b.each(b.many(b.each(a, b.ignore(c))), px, b.ignore(d))
            },
            set: function (c, d, f) {
                d = d || b.rtoken(/^\s*/);
                f = f || null;
                return function (n) {
                    for (var p =
                            null, u = p = null, v = null, x = [
                                [], n
                            ], y = !1, z = 0; z < c.length; z++) {
                        p = u = null;
                        y = 1 == c.length;
                        try {
                            p = c[z].call(this, n)
                        } catch (t) {
                            continue
                        }
                        v = [
                            [p[0]], p[1]
                        ];
                        if (0 < p[1].length && !y) try {
                            u = d.call(this, p[1])
                        } catch (A) {
                            y = !0
                        } else y = !0;
                        !y && 0 === u[1].length && (y = !0);
                        if (!y) {
                            p = [];
                            for (y = 0; y < c.length; y++) z != y && p.push(c[y]);
                            p = b.set(p, d).call(this, u[1]);
                            0 < p[0].length && (v[0] = v[0].concat(p[0]), v[1] = p[1])
                        }
                        v[1].length < x[1].length && (x = v);
                        if (0 === x[1].length) break
                    }
                    if (0 === x[0].length) return x;
                    if (f) {
                        try {
                            u = f.call(this, x[1])
                        } catch (w) {
                            throw new a.Exception(x[1]);
                        }
                        x[1] = u[1]
                    }
                    return x
                }
            },
            forward: function (a, b) {
                return function (c) {
                    return a[b].call(this, c)
                }
            },
            replace: function (a, b) {
                return function (c) {
                    c = a.call(this, c);
                    return [b, c[1]]
                }
            },
            process: function (a, b) {
                return function (c) {
                    c = a.call(this, c);
                    return [b.call(this, c[0]), c[1]]
                }
            },
            min: function (b, c) {
                return function (d) {
                    var f = c.call(this, d);
                    if (f[0].length < b) throw new a.Exception(d);
                    return f
                }
            }
        }, c = function (a) {
            return function () {
                var b = null,
                    c = [];
                1 < arguments.length ? b = Array.prototype.slice.call(arguments) : arguments[0] instanceof Array &&
                    (b = arguments[0]);
                if (b)
                    for (var d = b.shift(); 0 < d.length;) return b.unshift(d[0]), c.push(a.apply(null, b)), b.shift(), c;
                else return a.apply(null, arguments)
            }
        }, d = "optional not ignore cache".split(/\s/), f = 0; f < d.length; f++) b[d[f]] = c(b[d[f]]);
    c = function (a) {
        return function () {
            return arguments[0] instanceof Array ? a.apply(null, arguments[0]) : a.apply(null, arguments)
        }
    };
    d = "each any all".split(/\s/);
    for (f = 0; f < d.length; f++) b[d[f]] = c(b[d[f]])
})();
(function () {
    var a = function (b) {
        for (var c = [], d = 0; d < b.length; d++) b[d] instanceof Array ? c = c.concat(a(b[d])) : b[d] && c.push(b[d]);
        return c
    };
    Date.Grammar = {};
    Date.Translator = {
        hour: function (a) {
            return function () {
                this.hour = Number(a)
            }
        },
        minute: function (a) {
            return function () {
                this.minute = Number(a)
            }
        },
        second: function (a) {
            return function () {
                this.second = Number(a)
            }
        },
        meridian: function (a) {
            return function () {
                this.meridian = a.slice(0, 1).toLowerCase()
            }
        },
        timezone: function (a) {
            return function () {
                var b = a.replace(/[^\d\+\-]/g, "");
                b.length ?
                    this.timezoneOffset = Number(b) : this.timezone = a.toLowerCase()
            }
        },
        day: function (a) {
            var b = a[0];
            return function () {
                this.day = Number(b.match(/\d+/)[0])
            }
        },
        month: function (a) {
            return function () {
                this.month = 3 == a.length ? Date.getMonthNumberFromName(a) : Number(a) - 1
            }
        },
        year: function (a) {
            return function () {
                var b = Number(a);
                this.year = 2 < a.length ? b : b + (b + 2E3 < Date.CultureInfo.twoDigitYearMax ? 2E3 : 1900)
            }
        },
        rday: function (a) {
            return function () {
                switch (a) {
                case "yesterday":
                    this.days = -1;
                    break;
                case "tomorrow":
                    this.days = 1;
                    break;
                case "today":
                    this.days =
                        0;
                    break;
                case "now":
                    this.days = 0, this.now = !0
                }
            }
        },
        finishExact: function (a) {
            a = a instanceof Array ? a : [a];
            var b = new Date;
            this.year = b.getFullYear();
            this.month = b.getMonth();
            this.day = 1;
            for (b = this.second = this.minute = this.hour = 0; b < a.length; b++) a[b] && a[b].call(this);
            this.hour = "p" == this.meridian && 13 > this.hour ? this.hour + 12 : this.hour;
            if (this.day > Date.getDaysInMonth(this.year, this.month)) throw new RangeError(this.day + " is not a valid value for days.");
            a = new Date(this.year, this.month, this.day, this.hour, this.minute, this.second);
            this.timezone ? a.set({
                timezone: this.timezone
            }) : this.timezoneOffset && a.set({
                timezoneOffset: this.timezoneOffset
            });
            return a
        },
        finish: function (b) {
            b = b instanceof Array ? a(b) : [b];
            if (0 === b.length) return null;
            for (var c = 0; c < b.length; c++) "function" == typeof b[c] && b[c].call(this);
            if (this.now) return new Date;
            b = Date.today();
            if (null != this.days || this.orient || this.operator) {
                var d, f;
                f = "past" == this.orient || "subtract" == this.operator ? -1 : 1;
                this.weekday && (this.unit = "day", c = Date.getDayNumberFromName(this.weekday) - b.getDay(),
                    d = 7, this.days = c ? (c + f * d) % d : f * d);
                this.month && (this.unit = "month", c = this.month - b.getMonth(), d = 12, this.months = c ? (c + f * d) % d : f * d, this.month = null);
                this.unit || (this.unit = "day");
                if (null == this[this.unit + "s"] || null != this.operator) this.value || (this.value = 1), "week" == this.unit && (this.unit = "day", this.value *= 7), this[this.unit + "s"] = this.value * f;
                return b.add(this)
            }
            this.meridian && this.hour && (this.hour = 13 > this.hour && "p" == this.meridian ? this.hour + 12 : this.hour);
            this.weekday && !this.day && (this.day = b.addDays(Date.getDayNumberFromName(this.weekday) -
                b.getDay()).getDate());
            this.month && !this.day && (this.day = 1);
            return b.set(this)
        }
    };
    var b = Date.Parsing.Operators,
        c = Date.Grammar,
        d = Date.Translator,
        f;
    c.datePartDelimiter = b.rtoken(/^([\s\-\.\,\/\x27]+)/);
    c.timePartDelimiter = b.stoken(":");
    c.whiteSpace = b.rtoken(/^\s*/);
    c.generalDelimiter = b.rtoken(/^(([\s\,]|at|on)+)/);
    var g = {};
    c.ctoken = function (a) {
        var c = g[a];
        if (!c) {
            for (var c = Date.CultureInfo.regexPatterns, d = a.split(/\s+/), f = [], h = 0; h < d.length; h++) f.push(b.replace(b.rtoken(c[d[h]]), d[h]));
            c = g[a] = b.any.apply(null,
                f)
        }
        return c
    };
    c.ctoken2 = function (a) {
        return b.rtoken(Date.CultureInfo.regexPatterns[a])
    };
    c.h = b.cache(b.process(b.rtoken(/^(0[0-9]|1[0-2]|[1-9])/), d.hour));
    c.hh = b.cache(b.process(b.rtoken(/^(0[0-9]|1[0-2])/), d.hour));
    c.H = b.cache(b.process(b.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/), d.hour));
    c.HH = b.cache(b.process(b.rtoken(/^([0-1][0-9]|2[0-3])/), d.hour));
    c.m = b.cache(b.process(b.rtoken(/^([0-5][0-9]|[0-9])/), d.minute));
    c.mm = b.cache(b.process(b.rtoken(/^[0-5][0-9]/), d.minute));
    c.s = b.cache(b.process(b.rtoken(/^([0-5][0-9]|[0-9])/),
        d.second));
    c.ss = b.cache(b.process(b.rtoken(/^[0-5][0-9]/), d.second));
    c.hms = b.cache(b.sequence([c.H, c.mm, c.ss], c.timePartDelimiter));
    c.t = b.cache(b.process(c.ctoken2("shortMeridian"), d.meridian));
    c.tt = b.cache(b.process(c.ctoken2("longMeridian"), d.meridian));
    c.z = b.cache(b.process(b.rtoken(/^(\+|\-)?\s*\d\d\d\d?/), d.timezone));
    c.zz = b.cache(b.process(b.rtoken(/^(\+|\-)\s*\d\d\d\d/), d.timezone));
    c.zzz = b.cache(b.process(c.ctoken2("timezone"), d.timezone));
    c.timeSuffix = b.each(b.ignore(c.whiteSpace), b.set([c.tt,
        c.zzz
    ]));
    c.time = b.each(b.optional(b.ignore(b.stoken("T"))), c.hms, c.timeSuffix);
    c.d = b.cache(b.process(b.each(b.rtoken(/^([0-2]\d|3[0-1]|\d)/), b.optional(c.ctoken2("ordinalSuffix"))), d.day));
    c.dd = b.cache(b.process(b.each(b.rtoken(/^([0-2]\d|3[0-1])/), b.optional(c.ctoken2("ordinalSuffix"))), d.day));
    c.ddd = c.dddd = b.cache(b.process(c.ctoken("sun mon tue wed thu fri sat"), function (a) {
        return function () {
            this.weekday = a
        }
    }));
    c.M = b.cache(b.process(b.rtoken(/^(1[0-2]|0\d|\d)/), d.month));
    c.MM = b.cache(b.process(b.rtoken(/^(1[0-2]|0\d)/),
        d.month));
    c.MMM = c.MMMM = b.cache(b.process(c.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"), d.month));
    c.y = b.cache(b.process(b.rtoken(/^(\d\d?)/), d.year));
    c.yy = b.cache(b.process(b.rtoken(/^(\d\d)/), d.year));
    c.yyy = b.cache(b.process(b.rtoken(/^(\d\d?\d?\d?)/), d.year));
    c.yyyy = b.cache(b.process(b.rtoken(/^(\d\d\d\d)/), d.year));
    f = function () {
        return b.each(b.any.apply(null, arguments), b.not(c.ctoken2("timeContext")))
    };
    c.day = f(c.d, c.dd);
    c.month = f(c.M, c.MMM);
    c.year = f(c.yyyy, c.yy);
    c.orientation = b.process(c.ctoken("past future"),
        function (a) {
            return function () {
                this.orient = a
            }
        });
    c.operator = b.process(c.ctoken("add subtract"), function (a) {
        return function () {
            this.operator = a
        }
    });
    c.rday = b.process(c.ctoken("yesterday tomorrow today now"), d.rday);
    c.unit = b.process(c.ctoken("minute hour day week month year"), function (a) {
        return function () {
            this.unit = a
        }
    });
    c.value = b.process(b.rtoken(/^\d\d?(st|nd|rd|th)?/), function (a) {
        return function () {
            this.value = a.replace(/\D/g, "")
        }
    });
    c.expression = b.set([c.rday, c.operator, c.value, c.unit, c.orientation, c.ddd,
        c.MMM
    ]);
    f = function () {
        return b.set(arguments, c.datePartDelimiter)
    };
    c.mdy = f(c.ddd, c.month, c.day, c.year);
    c.ymd = f(c.ddd, c.year, c.month, c.day);
    c.dmy = f(c.ddd, c.day, c.month, c.year);
    c.date = function (a) {
        return (c[Date.CultureInfo.dateElementOrder] || c.mdy).call(this, a)
    };
    c.format = b.process(b.many(b.any(b.process(b.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/), function (a) {
            if (c[a]) return c[a];
            throw Date.Parsing.Exception(a);
        }), b.process(b.rtoken(/^[^dMyhHmstz]+/), function (a) {
            return b.ignore(b.stoken(a))
        }))),
        function (a) {
            return b.process(b.each.apply(null, a), d.finishExact)
        });
    var h = {};
    c.formats = function (a) {
        if (a instanceof Array) {
            for (var d = [], f = 0; f < a.length; f++) d.push(h[a[f]] = h[a[f]] || c.format(a[f])[0]);
            return b.any.apply(null, d)
        }
        return h[a] = h[a] || c.format(a)[0]
    };
    c._formats = c.formats(["yyyy-MM-ddTHH:mm:ss", "ddd, MMM dd, yyyy H:mm:ss tt", "ddd MMM d yyyy HH:mm:ss zzz", "d"]);
    c._start = b.process(b.set([c.date, c.time, c.expression], c.generalDelimiter, c.whiteSpace), d.finish);
    c.start = function (a) {
        try {
            var b = c._formats.call({},
                a);
            if (0 === b[1].length) return b
        } catch (d) {}
        return c._start.call({}, a)
    }
})();
Date._parse = Date.parse;
Date.parse = function (a) {
    var b = null;
    if (!a) return null;
    try {
        b = Date.Grammar.start.call({}, a)
    } catch (c) {
        return null
    }
    return 0 === b[1].length ? b[0] : null
};
Date.getParseFunction = function (a) {
    var b = Date.Grammar.formats(a);
    return function (a) {
        var d = null;
        try {
            d = b.call({}, a)
        } catch (f) {
            return null
        }
        return 0 === d[1].length ? d[0] : null
    }
};
Date.parseExact = function (a, b) {
    return Date.getParseFunction(b)(a)
};

function string_to_array(a) {
    for (var b = a.length, c = Array(b), d = 0; d < b; d++) c[d] = a.charCodeAt(d);
    return c
}

function array_to_hex_string(a) {
    for (var b = "", c = 0; c < a.length; c++) b += SHA256_hexchars[a[c] >> 4] + SHA256_hexchars[a[c] & 15];
    return b
}

function SHA256_init() {
    SHA256_H = [1779033703, 3144134277, 1013904242, 2773480762, 1359893119, 2600822924, 528734635, 1541459225];
    SHA256_buf = [];
    SHA256_len = 0
}

function SHA256_write(a) {
    SHA256_buf = "string" == typeof a ? SHA256_buf.concat(string_to_array(a)) : SHA256_buf.concat(a);
    for (var b = 0; b + 64 <= SHA256_buf.length; b += 64) SHA256_Hash_Byte_Block(SHA256_H, SHA256_buf.slice(b, b + 64));
    SHA256_buf = SHA256_buf.slice(b);
    SHA256_len += a.length
}

function SHA256_finalize() {
    SHA256_buf[SHA256_buf.length] = 128;
    if (56 < SHA256_buf.length) {
        for (var a = SHA256_buf.length; 64 > a; a++) SHA256_buf[a] = 0;
        SHA256_Hash_Byte_Block(SHA256_H, SHA256_buf);
        SHA256_buf.length = 0
    }
    for (a = SHA256_buf.length; 59 > a; a++) SHA256_buf[a] = 0;
    SHA256_buf[59] = SHA256_len >>> 29 & 255;
    SHA256_buf[60] = SHA256_len >>> 21 & 255;
    SHA256_buf[61] = SHA256_len >>> 13 & 255;
    SHA256_buf[62] = SHA256_len >>> 5 & 255;
    SHA256_buf[63] = SHA256_len << 3 & 255;
    SHA256_Hash_Byte_Block(SHA256_H, SHA256_buf);
    for (var b = Array(32), a = 0; 8 > a; a++) b[4 *
        a + 0] = SHA256_H[a] >>> 24, b[4 * a + 1] = SHA256_H[a] >> 16 & 255, b[4 * a + 2] = SHA256_H[a] >> 8 & 255, b[4 * a + 3] = SHA256_H[a] & 255;
    delete SHA256_H;
    delete SHA256_buf;
    delete SHA256_len;
    return b
}

function SHA256_hash(a) {
    SHA256_init();
    SHA256_write(a);
    a = SHA256_finalize();
    return array_to_hex_string(a)
}

function HMAC_SHA256_init(a) {
    HMAC_SHA256_key = "string" == typeof a ? string_to_array(a) : [].concat(a);
    64 < HMAC_SHA256_key.length && (SHA256_init(), SHA256_write(HMAC_SHA256_key), HMAC_SHA256_key = SHA256_finalize());
    for (a = HMAC_SHA256_key.length; 64 > a; a++) HMAC_SHA256_key[a] = 0;
    for (a = 0; 64 > a; a++) HMAC_SHA256_key[a] ^= 54;
    SHA256_init();
    SHA256_write(HMAC_SHA256_key)
}

function HMAC_SHA256_write(a) {
    SHA256_write(a)
}

function HMAC_SHA256_finalize() {
    for (var a = SHA256_finalize(), b = 0; 64 > b; b++) HMAC_SHA256_key[b] ^= 106;
    SHA256_init();
    SHA256_write(HMAC_SHA256_key);
    SHA256_write(a);
    for (b = 0; 64 > b; b++) HMAC_SHA256_key[b] = 0;
    delete HMAC_SHA256_key;
    return SHA256_finalize()
}

function HMAC_SHA256_MAC(a, b) {
    var c;
    HMAC_SHA256_init(a);
    HMAC_SHA256_write(b);
    c = HMAC_SHA256_finalize();
    return array_to_hex_string(c)
}

function HMAC_SHA256_MAC_RAW(a, b) {
    HMAC_SHA256_init(a);
    HMAC_SHA256_write(b);
    return HMAC_SHA256_finalize()
}
SHA256_hexchars = "0123456789abcdef".split("");
SHA256_K = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804,
    4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298
];

function SHA256_sigma0(a) {
    return (a >>> 7 | a << 25) ^ (a >>> 18 | a << 14) ^ a >>> 3
}

function SHA256_sigma1(a) {
    return (a >>> 17 | a << 15) ^ (a >>> 19 | a << 13) ^ a >>> 10
}

function SHA256_Sigma0(a) {
    return (a >>> 2 | a << 30) ^ (a >>> 13 | a << 19) ^ (a >>> 22 | a << 10)
}

function SHA256_Sigma1(a) {
    return (a >>> 6 | a << 26) ^ (a >>> 11 | a << 21) ^ (a >>> 25 | a << 7)
}

function SHA256_Ch(a, b, c) {
    return c ^ a & (b ^ c)
}

function SHA256_Maj(a, b, c) {
    return a & b ^ c & (a ^ b)
}

function SHA256_Hash_Word_Block(a, b) {
    for (var c = 16; 64 > c; c++) b[c] = SHA256_sigma1(b[c - 2]) + b[c - 7] + SHA256_sigma0(b[c - 15]) + b[c - 16] & 4294967295;
    for (var d = [].concat(a), c = 0; 64 > c; c++) {
        var f = d[7] + SHA256_Sigma1(d[4]) + SHA256_Ch(d[4], d[5], d[6]) + SHA256_K[c] + b[c],
            g = SHA256_Sigma0(d[0]) + SHA256_Maj(d[0], d[1], d[2]);
        d.pop();
        d.unshift(f + g & 4294967295);
        d[4] = d[4] + f & 4294967295
    }
    for (c = 0; 8 > c; c++) a[c] = a[c] + d[c] & 4294967295
}

function SHA256_Hash_Byte_Block(a, b) {
    for (var c = Array(16), d = 0; 16 > d; d++) c[d] = b[4 * d + 0] << 24 | b[4 * d + 1] << 16 | b[4 * d + 2] << 8 | b[4 * d + 3];
    SHA256_Hash_Word_Block(a, c)
}
var exports = exports || {};
exports.HMAC_SHA256_MAC = HMAC_SHA256_MAC;
exports.HMAC_SHA256_MAC_RAW = HMAC_SHA256_MAC_RAW;
var CryptoJS = CryptoJS || function (a, b) {
    var c = {},
        d = c.lib = {},
        f = function () {},
        g = d.Base = {
            extend: function (a) {
                f.prototype = this;
                var b = new f;
                a && b.mixIn(a);
                b.hasOwnProperty("init") || (b.init = function () {
                    b.$super.init.apply(this, arguments)
                });
                b.init.prototype = b;
                b.$super = this;
                return b
            },
            create: function () {
                var a = this.extend();
                a.init.apply(a, arguments);
                return a
            },
            init: function () {},
            mixIn: function (a) {
                for (var b in a) a.hasOwnProperty(b) && (this[b] = a[b]);
                a.hasOwnProperty("toString") && (this.toString = a.toString)
            },
            clone: function () {
                return this.init.prototype.extend(this)
            }
        },
        h = d.WordArray = g.extend({
            init: function (a, c) {
                a = this.words = a || [];
                this.sigBytes = c != b ? c : 4 * a.length
            },
            toString: function (a) {
                return (a || n).stringify(this)
            },
            concat: function (a) {
                var b = this.words,
                    c = a.words,
                    d = this.sigBytes;
                a = a.sigBytes;
                this.clamp();
                if (d % 4)
                    for (var f = 0; f < a; f++) b[d + f >>> 2] |= (c[f >>> 2] >>> 24 - 8 * (f % 4) & 255) << 24 - 8 * ((d + f) % 4);
                else if (65535 < c.length)
                    for (f = 0; f < a; f += 4) b[d + f >>> 2] = c[f >>> 2];
                else b.push.apply(b, c);
                this.sigBytes += a;
                return this
            },
            clamp: function () {
                var b = this.words,
                    c = this.sigBytes;
                b[c >>> 2] &= 4294967295 <<
                    32 - 8 * (c % 4);
                b.length = a.ceil(c / 4)
            },
            clone: function () {
                var a = g.clone.call(this);
                a.words = this.words.slice(0);
                return a
            },
            random: function (b) {
                for (var c = [], d = 0; d < b; d += 4) c.push(4294967296 * a.random() | 0);
                return new h.init(c, b)
            }
        }),
        m = c.enc = {},
        n = m.Hex = {
            stringify: function (a) {
                var b = a.words;
                a = a.sigBytes;
                for (var c = [], d = 0; d < a; d++) {
                    var f = b[d >>> 2] >>> 24 - 8 * (d % 4) & 255;
                    c.push((f >>> 4).toString(16));
                    c.push((f & 15).toString(16))
                }
                return c.join("")
            },
            parse: function (a) {
                for (var b = a.length, c = [], d = 0; d < b; d += 2) c[d >>> 3] |= parseInt(a.substr(d,
                    2), 16) << 24 - 4 * (d % 8);
                return new h.init(c, b / 2)
            }
        },
        p = m.Latin1 = {
            stringify: function (a) {
                var b = a.words;
                a = a.sigBytes;
                for (var c = [], d = 0; d < a; d++) c.push(String.fromCharCode(b[d >>> 2] >>> 24 - 8 * (d % 4) & 255));
                return c.join("")
            },
            parse: function (a) {
                for (var b = a.length, c = [], d = 0; d < b; d++) c[d >>> 2] |= (a.charCodeAt(d) & 255) << 24 - 8 * (d % 4);
                return new h.init(c, b)
            }
        },
        u = m.Utf8 = {
            stringify: function (a) {
                try {
                    return decodeURIComponent(escape(p.stringify(a)))
                } catch (b) {
                    throw Error("Malformed UTF-8 data");
                }
            },
            parse: function (a) {
                return p.parse(unescape(encodeURIComponent(a)))
            }
        },
        v = d.BufferedBlockAlgorithm = g.extend({
            reset: function () {
                this._data = new h.init;
                this._nDataBytes = 0
            },
            _append: function (a) {
                "string" == typeof a && (a = u.parse(a));
                this._data.concat(a);
                this._nDataBytes += a.sigBytes
            },
            _process: function (b) {
                var c = this._data,
                    d = c.words,
                    f = c.sigBytes,
                    g = this.blockSize,
                    m = f / (4 * g),
                    m = b ? a.ceil(m) : a.max((m | 0) - this._minBufferSize, 0);
                b = m * g;
                f = a.min(4 * b, f);
                if (b) {
                    for (var n = 0; n < b; n += g) this._doProcessBlock(d, n);
                    n = d.splice(0, b);
                    c.sigBytes -= f
                }
                return new h.init(n, f)
            },
            clone: function () {
                var a = g.clone.call(this);
                a._data = this._data.clone();
                return a
            },
            _minBufferSize: 0
        });
    d.Hasher = v.extend({
        cfg: g.extend(),
        init: function (a) {
            this.cfg = this.cfg.extend(a);
            this.reset()
        },
        reset: function () {
            v.reset.call(this);
            this._doReset()
        },
        update: function (a) {
            this._append(a);
            this._process();
            return this
        },
        finalize: function (a) {
            a && this._append(a);
            return this._doFinalize()
        },
        blockSize: 16,
        _createHelper: function (a) {
            return function (b, c) {
                return (new a.init(c)).finalize(b)
            }
        },
        _createHmacHelper: function (a) {
            return function (b, c) {
                return (new x.HMAC.init(a,
                    c)).finalize(b)
            }
        }
    });
    var x = c.algo = {};
    return c
}(Math);
(function (a) {
    for (var b = CryptoJS, c = b.lib, d = c.WordArray, f = c.Hasher, c = b.algo, g = [], h = [], m = function (a) {
            return 4294967296 * (a - (a | 0)) | 0
        }, n = 2, p = 0; 64 > p;) {
        var u;
        a: {
            u = n;
            for (var v = a.sqrt(u), x = 2; x <= v; x++)
                if (!(u % x)) {
                    u = !1;
                    break a
                } u = !0
        }
        u && (8 > p && (g[p] = m(a.pow(n, 0.5))), h[p] = m(a.pow(n, 1 / 3)), p++);
        n++
    }
    var y = [],
        c = c.SHA256 = f.extend({
            _doReset: function () {
                this._hash = new d.init(g.slice(0))
            },
            _doProcessBlock: function (a, b) {
                for (var c = this._hash.words, d = c[0], f = c[1], g = c[2], m = c[3], n = c[4], p = c[5], u = c[6], v = c[7], x = 0; 64 > x; x++) {
                    if (16 > x) y[x] =
                        a[b + x] | 0;
                    else {
                        var K = y[x - 15],
                            N = y[x - 2];
                        y[x] = ((K << 25 | K >>> 7) ^ (K << 14 | K >>> 18) ^ K >>> 3) + y[x - 7] + ((N << 15 | N >>> 17) ^ (N << 13 | N >>> 19) ^ N >>> 10) + y[x - 16]
                    }
                    K = v + ((n << 26 | n >>> 6) ^ (n << 21 | n >>> 11) ^ (n << 7 | n >>> 25)) + (n & p ^ ~n & u) + h[x] + y[x];
                    N = ((d << 30 | d >>> 2) ^ (d << 19 | d >>> 13) ^ (d << 10 | d >>> 22)) + (d & f ^ d & g ^ f & g);
                    v = u;
                    u = p;
                    p = n;
                    n = m + K | 0;
                    m = g;
                    g = f;
                    f = d;
                    d = K + N | 0
                }
                c[0] = c[0] + d | 0;
                c[1] = c[1] + f | 0;
                c[2] = c[2] + g | 0;
                c[3] = c[3] + m | 0;
                c[4] = c[4] + n | 0;
                c[5] = c[5] + p | 0;
                c[6] = c[6] + u | 0;
                c[7] = c[7] + v | 0
            },
            _doFinalize: function () {
                var b = this._data,
                    c = b.words,
                    d = 8 * this._nDataBytes,
                    f = 8 * b.sigBytes;
                c[f >>> 5] |= 128 << 24 - f % 32;
                c[(f + 64 >>> 9 << 4) + 14] = a.floor(d / 4294967296);
                c[(f + 64 >>> 9 << 4) + 15] = d;
                b.sigBytes = 4 * c.length;
                this._process();
                return this._hash
            },
            clone: function () {
                var a = f.clone.call(this);
                a._hash = this._hash.clone();
                return a
            }
        });
    b.SHA256 = f._createHelper(c);
    b.HmacSHA256 = f._createHmacHelper(c)
})(Math);
(function () {
    var a = CryptoJS,
        b = a.enc.Utf8;
    a.algo.HMAC = a.lib.Base.extend({
        init: function (a, d) {
            a = this._hasher = new a.init;
            "string" == typeof d && (d = b.parse(d));
            var f = a.blockSize,
                g = 4 * f;
            d.sigBytes > g && (d = a.finalize(d));
            d.clamp();
            for (var h = this._oKey = d.clone(), m = this._iKey = d.clone(), n = h.words, p = m.words, u = 0; u < f; u++) n[u] ^= 1549556828, p[u] ^= 909522486;
            h.sigBytes = m.sigBytes = g;
            this.reset()
        },
        reset: function () {
            var a = this._hasher;
            a.reset();
            a.update(this._iKey)
        },
        update: function (a) {
            this._hasher.update(a);
            return this
        },
        finalize: function (a) {
            var b =
                this._hasher;
            a = b.finalize(a);
            b.reset();
            return b.finalize(this._oKey.clone().concat(a))
        }
    })
})();
(function () {
    var a = CryptoJS,
        b = a.lib.WordArray;
    a.enc.Base64 = {
        stringify: function (a) {
            var b = a.words,
                f = a.sigBytes,
                g = this._map;
            a.clamp();
            a = [];
            for (var h = 0; h < f; h += 3)
                for (var m = (b[h >>> 2] >>> 24 - 8 * (h % 4) & 255) << 16 | (b[h + 1 >>> 2] >>> 24 - 8 * ((h + 1) % 4) & 255) << 8 | b[h + 2 >>> 2] >>> 24 - 8 * ((h + 2) % 4) & 255, n = 0; 4 > n && h + 0.75 * n < f; n++) a.push(g.charAt(m >>> 6 * (3 - n) & 63));
            if (b = g.charAt(64))
                for (; a.length % 4;) a.push(b);
            return a.join("")
        },
        parse: function (a) {
            a = a.replace(/\s/g, "");
            var d = a.length,
                f = this._map,
                g = f.charAt(64);
            g && (g = a.indexOf(g), -1 != g && (d = g));
            for (var g = [], h = 0, m = 0; m < d; m++)
                if (m % 4) {
                    var n = f.indexOf(a.charAt(m - 1)) << 2 * (m % 4),
                        p = f.indexOf(a.charAt(m)) >>> 6 - 2 * (m % 4);
                    g[h >>> 2] |= (n | p) << 24 - 8 * (h % 4);
                    h++
                } return b.create(g, h)
        },
        _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
    }
})();
(function (a) {
    "object" === typeof exports && "undefined" !== typeof module ? module.exports = a() : "function" === typeof define && define.amd ? define([], a) : ("undefined" !== typeof window ? window : "undefined" !== typeof global ? global : "undefined" !== typeof self ? self : this).base64js = a()
})(function () {
    return function b(c, d, f) {
        function g(m, p) {
            if (!d[m]) {
                if (!c[m]) {
                    var u = "function" == typeof require && require;
                    if (!p && u) return u(m, !0);
                    if (h) return h(m, !0);
                    u = Error("Cannot find module '" + m + "'");
                    throw u.code = "MODULE_NOT_FOUND", u;
                }
                u = d[m] = {
                    exports: {}
                };
                c[m][0].call(u.exports, function (b) {
                    var d = c[m][1][b];
                    return g(d ? d : b)
                }, u, u.exports, b, c, d, f)
            }
            return d[m].exports
        }
        for (var h = "function" == typeof require && require, m = 0; m < f.length; m++) g(f[m]);
        return g
    }({
        "/": [function (b, c, d) {
            function f(b, c, d) {
                for (var f = [], h = c; h < d; h += 3) c = (b[h] << 16) + (b[h + 1] << 8) + b[h + 2], f.push(g[c >> 18 & 63] + g[c >> 12 & 63] + g[c >> 6 & 63] + g[c & 63]);
                return f.join("")
            }
            d.toByteArray = function (b) {
                var c, d, f, g, y;
                c = b.length;
                if (0 < c % 4) throw Error("Invalid string. Length must be a multiple of 4");
                g = "=" === b[c - 2] ? 2 :
                    "=" === b[c - 1] ? 1 : 0;
                y = new m(3 * c / 4 - g);
                d = 0 < g ? c - 4 : c;
                var z = 0;
                for (c = 0; c < d; c += 4) f = h[b.charCodeAt(c)] << 18 | h[b.charCodeAt(c + 1)] << 12 | h[b.charCodeAt(c + 2)] << 6 | h[b.charCodeAt(c + 3)], y[z++] = f >> 16 & 255, y[z++] = f >> 8 & 255, y[z++] = f & 255;
                2 === g ? (f = h[b.charCodeAt(c)] << 2 | h[b.charCodeAt(c + 1)] >> 4, y[z++] = f & 255) : 1 === g && (f = h[b.charCodeAt(c)] << 10 | h[b.charCodeAt(c + 1)] << 4 | h[b.charCodeAt(c + 2)] >> 2, y[z++] = f >> 8 & 255, y[z++] = f & 255);
                return y
            };
            d.fromByteArray = function (b) {
                for (var c = b.length, d = c % 3, h = "", m = [], y = 0, z = c - d; y < z; y += 16383) m.push(f(b,
                    y, y + 16383 > z ? z : y + 16383));
                1 === d ? (b = b[c - 1], h += g[b >> 2], h += g[b << 4 & 63], h += "==") : 2 === d && (b = (b[c - 2] << 8) + b[c - 1], h += g[b >> 10], h += g[b >> 4 & 63], h += g[b << 2 & 63], h += "=");
                m.push(h);
                return m.join("")
            };
            var g = [],
                h = [],
                m = "undefined" !== typeof Uint8Array ? Uint8Array : Array;
            (function () {
                for (var b = 0; 64 > b; ++b) g[b] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [b], h["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(b)] = b;
                h[45] = 62;
                h[95] = 63
            })()
        }, {}]
    }, {}, [])("/")
});
"undefined" !== typeof module && "function" === typeof module.require && (require("string.fromcodepoint"), require("string.prototype.codepointat"));
var _UTF8 = {
    isNotUTF8: function (a, b, c) {
        try {
            UTF8.getStringFromBytes(a, b, c, !0)
        } catch (d) {
            return !0
        }
        return !1
    },
    getCharLength: function (a) {
        return 240 == (a & 240) ? 4 : 224 == (a & 224) ? 3 : 192 == (a & 192) ? 2 : a == (a & 127) ? 1 : 0
    },
    getCharCode: function (a, b, c) {
        var d = 0,
            f = "";
        b = b || 0;
        if (0 >= a.length - b) throw Error("No more characters remaining in array.");
        c = c || UTF8.getCharLength(a[b]);
        if (0 == c) throw Error(a[b].toString(2) + " is not a significative byte (offset:" + b + ").");
        if (1 === c) return a[b];
        if (a.length - b < c) throw Error("Expected at least " +
            c + " bytes remaining in array.");
        f = "00000000".slice(0, c) + 1 + "00000000".slice(c + 1);
        if (a[b] & parseInt(f, 2)) throw Error("Index " + b + ": A " + c + " bytes encoded char cannot encode the " + (c + 1) + "th rank bit to 1.");
        f = "0000".slice(0, c + 1) + "11111111".slice(c + 1);
        for (d += (a[b] & parseInt(f, 2)) << 6 * --c; c;) {
            if (128 !== (a[b + 1] & 128) || 64 === (a[b + 1] & 64)) throw Error("Index " + (b + 1) + ': Next bytes of encoded char must begin with a "10" bit sequence.');
            d += (a[++b] & 63) << 6 * --c
        }
        return d
    },
    getStringFromBytes: function (a, b, c, d) {
        var f, g = [];
        b |= 0;
        for (c = "number" === typeof c ? c : a.byteLength || a.length; b < c; b++) {
            f = UTF8.getCharLength(a[b]);
            if (b + f > c) {
                if (d) throw Error("Index " + b + ": Found a " + f + " bytes encoded char declaration but only " + (c - b) + " bytes are available.");
            } else g.push(String.fromCodePoint(UTF8.getCharCode(a, b, f, d)));
            b += f - 1
        }
        return g.join("")
    },
    getBytesForCharCode: function (a) {
        if (128 > a) return 1;
        if (2048 > a) return 2;
        if (65536 > a) return 3;
        if (2097152 > a) return 4;
        throw Error("CharCode " + a + " cannot be encoded with UTF8.");
    },
    setBytesFromCharCode: function (a,
        b, c, d) {
        a |= 0;
        b = b || [];
        c |= 0;
        d = d || UTF8.getBytesForCharCode(a);
        if (1 == d) b[c] = a;
        else
            for (b[c++] = (parseInt("1111".slice(0, d), 2) << 8 - d) + (a >>> 6 * --d); 0 < d;) b[c++] = a >>> 6 * --d & 63 | 128;
        return b
    },
    setBytesFromString: function (a, b, c, d, f) {
        a = a || "";
        b = b || [];
        c |= 0;
        d = "number" === typeof d ? d : b.byteLength || Infinity;
        for (var g = 0, h = a.length; g < h; g++) {
            var m = UTF8.getBytesForCharCode(a[g].codePointAt(0));
            if (f && c + m > d) throw Error('Not enought bytes to encode the char "' + a[g] + '" at the offset "' + c + '".');
            UTF8.setBytesFromCharCode(a[g].codePointAt(0),
                b, c, m, f);
            c += m
        }
        return b
    }
};
if ("undefined" !== typeof module && module.hasOwnProperty("exports")) {
    var UTF8 = _UTF8;
    module.exports = UTF8
} else UTF8 = _UTF8;
_UTF8 = void 0;
(function (a) {
    function b(a, b, c, d, f) {
        this._listener = b;
        this._isOnce = c;
        this.context = d;
        this._signal = a;
        this._priority = f || 0
    }

    function c(a, b) {
        if ("function" !== typeof a) throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}", b));
    }

    function d() {
        this._bindings = [];
        this._prevParams = null;
        var a = this;
        this.dispatch = function () {
            d.prototype.dispatch.apply(a, arguments)
        }
    }
    b.prototype = {
        active: !0,
        params: null,
        execute: function (a) {
            var b;
            this.active && this._listener && (a = this.params ? this.params.concat(a) :
                a, b = this._listener.apply(this.context, a), this._isOnce && this.detach());
            return b
        },
        detach: function () {
            return this.isBound() ? this._signal.remove(this._listener, this.context) : null
        },
        isBound: function () {
            return !!this._signal && !!this._listener
        },
        isOnce: function () {
            return this._isOnce
        },
        getListener: function () {
            return this._listener
        },
        getSignal: function () {
            return this._signal
        },
        _destroy: function () {
            delete this._signal;
            delete this._listener;
            delete this.context
        },
        toString: function () {
            return "[SignalBinding isOnce:" + this._isOnce +
                ", isBound:" + this.isBound() + ", active:" + this.active + "]"
        }
    };
    d.prototype = {
        VERSION: "1.0.0",
        memorize: !1,
        _shouldPropagate: !0,
        active: !0,
        _registerListener: function (a, c, d, f) {
            var p = this._indexOfListener(a, d);
            if (-1 !== p) {
                if (a = this._bindings[p], a.isOnce() !== c) throw Error("You cannot add" + (c ? "" : "Once") + "() then add" + (!c ? "" : "Once") + "() the same listener without removing the relationship first.");
            } else a = new b(this, a, c, d, f), this._addBinding(a);
            this.memorize && this._prevParams && a.execute(this._prevParams);
            return a
        },
        _addBinding: function (a) {
            var b = this._bindings.length;
            do --b; while (this._bindings[b] && a._priority <= this._bindings[b]._priority);
            this._bindings.splice(b + 1, 0, a)
        },
        _indexOfListener: function (a, b) {
            for (var c = this._bindings.length, d; c--;)
                if (d = this._bindings[c], d._listener === a && d.context === b) return c;
            return -1
        },
        has: function (a, b) {
            return -1 !== this._indexOfListener(a, b)
        },
        add: function (a, b, d) {
            c(a, "add");
            return this._registerListener(a, !1, b, d)
        },
        addOnce: function (a, b, d) {
            c(a, "addOnce");
            return this._registerListener(a, !0,
                b, d)
        },
        remove: function (a, b) {
            c(a, "remove");
            var d = this._indexOfListener(a, b); - 1 !== d && (this._bindings[d]._destroy(), this._bindings.splice(d, 1));
            return a
        },
        removeAll: function () {
            for (var a = this._bindings.length; a--;) this._bindings[a]._destroy();
            this._bindings.length = 0
        },
        getNumListeners: function () {
            return this._bindings.length
        },
        halt: function () {
            this._shouldPropagate = !1
        },
        dispatch: function (a) {
            if (this.active) {
                var b = Array.prototype.slice.call(arguments),
                    c = this._bindings.length,
                    d;
                this.memorize && (this._prevParams =
                    b);
                if (c) {
                    d = this._bindings.slice();
                    this._shouldPropagate = !0;
                    do c--; while (d[c] && this._shouldPropagate && !1 !== d[c].execute(b))
                }
            }
        },
        forget: function () {
            this._prevParams = null
        },
        dispose: function () {
            this.removeAll();
            delete this._bindings;
            delete this._prevParams
        },
        toString: function () {
            return "[Signal active:" + this.active + " numListeners:" + this.getNumListeners() + "]"
        }
    };
    var f = d;
    f.Signal = d;
    "function" === typeof define && define.amd ? define(function () {
            return f
        }) : "undefined" !== typeof module && module.exports ? module.exports = f : a.signals =
        f
})(this);
var Hashtable = function (a) {
    function b(a) {
        return typeof a == y ? a : "" + a
    }

    function c(a) {
        return typeof a == y ? a : typeof a.hashCode == x ? (a = a.hashCode(), typeof a == y ? a : c(a)) : b(a)
    }

    function d(a, b) {
        for (var c in b) b.hasOwnProperty(c) && (a[c] = b[c])
    }

    function f(a, b) {
        return a.equals(b)
    }

    function g(a, b) {
        return typeof b.equals == x ? b.equals(a) : a === b
    }

    function h(b) {
        return function (c) {
            if (null === c) throw Error("null is not a valid " + b);
            if (c === a) throw Error(b + " must not be undefined");
        }
    }

    function m(a, b, c, d) {
        this[0] = a;
        this.entries = [];
        this.addEntry(b, c);
        null !== d && (this.getEqualityFunction = function () {
            return d
        })
    }

    function n(a) {
        return function (b) {
            for (var c = this.entries.length, d, f = this.getEqualityFunction(b); c--;)
                if (d = this.entries[c], f(b, d[0])) switch (a) {
                case A:
                    return !0;
                case w:
                    return d;
                case B:
                    return [c, d[1]]
                }
            return !1
        }
    }

    function p(a) {
        return function (b) {
            for (var c = b.length, d = 0, f = this.entries, g = f.length; d < g; ++d) b[c + d] = f[d][a]
        }
    }

    function u(a, b) {
        var c = a[b];
        return c && c instanceof m ? c : null
    }

    function v(b, f) {
        var g = [],
            h = {},
            n = {
                replaceDuplicateKey: !0,
                hashCode: c,
                equals: null
            };
        f !== a ? (n.hashCode = b, n.equals = f) : b !== a && d(n, b);
        var p = n.hashCode,
            v = n.equals;
        this.properties = n;
        this.put = function (a, b) {
            z(a);
            t(b);
            var c = p(a),
                d, f = null;
            (d = u(h, c)) ? (c = d.getEntryForKey(a)) ? (n.replaceDuplicateKey && (c[0] = a), f = c[1], c[1] = b) : d.addEntry(a, b): (d = new m(c, a, b, v), g.push(d), h[c] = d);
            return f
        };
        this.get = function (a) {
            z(a);
            var b = p(a);
            if (b = u(h, b))
                if (a = b.getEntryForKey(a)) return a[1];
            return null
        };
        this.containsKey = function (a) {
            z(a);
            var b = p(a);
            return (b = u(h, b)) ? b.containsKey(a) : !1
        };
        this.containsValue =
            function (a) {
                t(a);
                for (var b = g.length; b--;)
                    if (g[b].containsValue(a)) return !0;
                return !1
            };
        this.clear = function () {
            g.length = 0;
            h = {}
        };
        this.isEmpty = function () {
            return !g.length
        };
        var w = function (a) {
            return function () {
                for (var b = [], c = g.length; c--;) g[c][a](b);
                return b
            }
        };
        this.keys = w("keys");
        this.values = w("values");
        this.entries = w("getEntries");
        this.remove = function (a) {
            z(a);
            var b = p(a),
                c = null,
                d = u(h, b);
            if (d && (c = d.removeEntryForKey(a), null !== c && 0 == d.entries.length)) {
                a: {
                    for (a = g.length; a--;)
                        if (d = g[a], b === d[0]) break a;a = null
                }
                g.splice(a,
                    1);delete h[b]
            }
            return c
        };
        this.size = function () {
            for (var a = 0, b = g.length; b--;) a += g[b].entries.length;
            return a
        }
    }
    var x = "function",
        y = "string";
    if ("undefined" == typeof encodeURIComponent || Array.prototype.splice === a || Object.prototype.hasOwnProperty === a) return null;
    var z = h("key"),
        t = h("value"),
        A = 0,
        w = 1,
        B = 2;
    m.prototype = {
        getEqualityFunction: function (a) {
            return typeof a.equals == x ? f : g
        },
        getEntryForKey: n(w),
        getEntryAndIndexForKey: n(B),
        removeEntryForKey: function (a) {
            return (a = this.getEntryAndIndexForKey(a)) ? (this.entries.splice(a[0],
                1), a[1]) : null
        },
        addEntry: function (a, b) {
            this.entries.push([a, b])
        },
        keys: p(0),
        values: p(1),
        getEntries: function (a) {
            for (var b = a.length, c = 0, d = this.entries, f = d.length; c < f; ++c) a[b + c] = d[c].slice(0)
        },
        containsKey: n(A),
        containsValue: function (a) {
            for (var b = this.entries, c = b.length; c--;)
                if (a === b[c][1]) return !0;
            return !1
        }
    };
    v.prototype = {
        each: function (a) {
            for (var b = this.entries(), c = b.length, d; c--;) d = b[c], a(d[0], d[1])
        },
        equals: function (a) {
            var b, c, d, f = this.size();
            if (f == a.size()) {
                for (b = this.keys(); f--;)
                    if (c = b[f], d = a.get(c),
                        null === d || d !== this.get(c)) return !1;
                return !0
            }
            return !1
        },
        putAll: function (a, b) {
            for (var c = a.entries(), d, f, g, h = c.length, m = typeof b == x; h--;) {
                d = c[h];
                f = d[0];
                d = d[1];
                if (m && (g = this.get(f))) d = b(f, g, d);
                this.put(f, d)
            }
        },
        clone: function () {
            var a = new v(this.properties);
            a.putAll(this);
            return a
        }
    };
    v.prototype.toQueryString = function () {
        for (var a = this.entries(), c = a.length, d, f = []; c--;) d = a[c], f[c] = encodeURIComponent(b(d[0])) + "=" + encodeURIComponent(b(d[1]));
        return f.join("&")
    };
    return v
}();
var sffjs = function () {
        function a(a) {
            return 10 > a ? "0" + a : a
        }

        function b(a) {
            for (var b in v) a[b] = a[b] || v[b];
            a.f = a.f || a.D + " " + a.t;
            a.F = a.F || a.D + " " + a.T;
            a.g = a.g || a.d + " " + a.t;
            a.G = a.G || a.d + " " + a.T;
            a.m = a.M;
            a.y = a.Y;
            return a
        }

        function c() {
            m.LC = y = z && (t[z[u]()] || t[z.split("-")[0][u]()]) || x
        }

        function d(a, b) {
            var c = Math.pow(10, b || 0);
            return "" + Math.round(Math.abs(a) * c) / c
        }

        function f(a) {
            var b = a.indexOf(".");
            return 0 > b ? a.length : b
        }

        function g(a, b) {
            for (var c = 0, d = b.length; c < d; c++) a.push(b.charAt(c)), 1 < a.g && 1 == a.g-- % 3 && a.push(a.t)
        }

        function h(a, b, c, h, m, n) {
            var p = [];
            p.t = n;
            0 > a && p.push("-");
            a = d(a, h);
            h = p.g = f(a);
            n = a;
            var t = n.indexOf(".");
            n = 0 > t ? 0 : n.length - t - 1;
            for (b -= h; 0 < b--;) g(p, "0");
            g(p, a.substr(0, h));
            if (c || n) {
                p.push(m);
                g(p, a.substr(h + 1));
                for (c -= n; 0 < c--;) g(p, "0")
            }
            return p.join("")
        }
        var m = {
                version: "1.12",
                setCulture: function (a) {
                    z = a;
                    c()
                },
                registerCulture: function (a) {
                    t[a.name[u]()] = b(a);
                    c()
                }
            },
            n = Number,
            p = String,
            u = "toUpperCase",
            v = {
                name: "",
                d: "MM/dd/yyyy",
                D: "dddd, dd MMMM yyyy",
                t: "HH:mm",
                T: "HH:mm:ss",
                M: "MMMM dd",
                Y: "yyyy MMMM",
                s: "yyyy-MM-ddTHH:mm:ss",
                _M: "January February March April May June July August September October November December".split(" "),
                _D: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
                _r: ".",
                _t: ",",
                _c: "¤#,0.00",
                _ct: ",",
                _cr: ".",
                _am: "AM",
                _pm: "PM"
            },
            x = b({}),
            y, z = navigator.systemLanguage || navigator.language || "",
            t = {};
        n.prototype.__Format = function (a) {
            var b = n(this),
                c = y._r,
                m = y._t;
            if (!isFinite(b)) return "" + b;
            if (!a && "0" !== a) return h(b, 0, 0, 10, c);
            var t = a.match(/^([a-zA-Z])(\d*)$/);
            if (t) {
                var v = t[1][u](),
                    w = parseInt(t[2],
                        10),
                    w = 15 < w ? 15 : w;
                switch (v) {
                case "D":
                    return h(b, isNaN(w) ? 1 : w, 0, 0);
                case "F":
                    m = "";
                case "N":
                    return h(b, 1, isNaN(w) ? 2 : w, isNaN(w) ? 2 : w, c, m);
                case "G":
                case "E":
                    a = 0;
                    for (var x = Math.abs(b); 10 <= x;) x /= 10, a++;
                    for (; 0 < x && 1 > x;) x *= 10, a--;
                    var t = t[1],
                        z = 3;
                    if ("G" == v) {
                        if (-5 < a && (!w || a < w)) return h(b, 1, w ? w - (0 < a ? a + 1 : 1) : 0, w ? w - (0 < a ? a + 1 : 1) : 10, c);
                        t = "G" == t ? "E" : "e";
                        z = 2;
                        v = (w || 1) - 1;
                        w = (w || 11) - 1
                    } else v = w = isNaN(w) ? 6 : w;
                    0 <= a && (t += "+");
                    0 > b && (x *= -1);
                    return h("" + x, 1, v, w, c, m) + t + h(a, z, 0);
                case "P":
                    return h(100 * b, 1, isNaN(w) ? 2 : w, isNaN(w) ? 2 : w, c, m) +
                        " %";
                case "X":
                    b = Math.round(b).toString(16);
                    "X" == t[1] && (b = b[u]());
                    for (w -= b.length; 0 < w--;) b = "0" + b;
                    return b;
                case "C":
                    a = y._c;
                    c = y._cr;
                    m = y._ct;
                    break;
                case "R":
                    return "" + b
                }
            }
            var w = a,
                z = m,
                A = 0,
                U = m = -1,
                U = 0;
            a = -1;
            for (var T = 1, P = 0, x = 1, S = [], I = [S], J, t = [], v = 0; v < w.length; v++)
                if (J = w.charAt(v), "'" == J || '"' == J) {
                    J = w.indexOf(J, v + 1);
                    S.push(new p(w.substring(v + 1, 0 > J ? void 0 : J)));
                    if (0 > J) break;
                    v = J
                } else if ("\\" == J) S.push(new p(w.charAt(++v)));
            else if (";" == J) {
                if (0 < b || 0 > b && 1 < I.length) break;
                I.push(S = [])
            } else S.push(J);
            0 > b && 1 < I.length ?
                (b *= -1, w = I[1]) : w = I[!b && 2 < I.length ? 2 : 0];
            for (v = 0; v < w.length; v++) J = w[v], "0" === J || "#" === J ? (U += P, "0" == J && (P ? a = U : 0 > m && (m = A)), 1 != T && !P && (t.t = z, T = 1), A += !P) : "." === J ? P = 1 : "," === J && !P && 0 < A ? T *= 0.0010 : "%" === J && (b *= 100);
            m = 0 > m ? 1 : A - m;
            0 > b && t.push("-");
            b = d(b * T, U);
            U = f(b);
            z = U - A;
            t.g = Math.max(U, m);
            for (v = 0; v < w.length; v++)
                if (J = w[v], "#" === J || "0" === J) {
                    if (z < U) 0 <= z ? (x && g(t, b.substr(0, z)), g(t, b.charAt(z))) : z >= U - m && g(t, "0"), x = 0;
                    else if (0 < a-- || z < b.length) g(t, z >= b.length ? "0" : b.charAt(z));
                    z++
                } else "." === J ? (b.length > ++z || 0 < a) && t.push(c) :
                    "," !== J && t.push(J);
            return t.join("")
        };
        Date.prototype.__Format = function (b) {
            var c = this.getFullYear(),
                d = this.getMonth(),
                f = this.getDate(),
                g = this.getDay(),
                h = this.getHours(),
                m = this.getMinutes(),
                n = this.getSeconds();
            b = b || "G";
            1 == b.length && (b = y[b] || b);
            return b.replace(/(\\.|'[^']*'|"[^"]*"|d{1,4}|M{1,4}|yyyy|yy|HH?|hh?|mm?|ss?|tt?)/g, function (b) {
                return "dddd" == b ? y._D[g] : "ddd" == b ? y._d ? y._d[g] : y._D[g].substr(0, 3) : "dd" == b ? a(f) : "d" == b ? f : "MMMM" == b ? y._M[d] : "MMM" == b ? y._m ? y._m[d] : y._M[d].substr(0, 3) : "MM" == b ? a(d + 1) :
                    "M" == b ? d + 1 : "yyyy" == b ? c : "yy" == b ? ("" + c).substr(2) : "HH" == b ? a(h) : "H" == b ? h : "hh" == b ? a((h - 1) % 12 + 1) : "h" == b ? (h - 1) % 12 + 1 : "mm" == b ? a(m) : "m" == b ? m : "ss" == b ? a(n) : "s" == b ? n : "tt" == b ? 12 > h ? y._am : y._pm : "t" == b ? (12 > h ? y._am : y._pm).charAt(0) : b.substr(1, b.length - 1 - ("\\" != b.charAt(0)))
            })
        };
        p.__Format = function (a, b, c, d) {
            var f = arguments;
            return a.replace(/\{((\d+|[a-zA-Z_$]\w*(?:\.[a-zA-Z_$]\w*|\[\d+\])*)(?:\,(-?\d*))?(?:\:([^\}]*(?:(?:\}\})+[^\}]+)*))?)\}|(\{\{)|(\}\})/g, function () {
                var a = arguments,
                    b;
                if (a[5]) b = "{";
                else if (a[6]) b =
                    "}";
                else {
                    var c = a[2];
                    b = a[3];
                    var d = a[4] && a[4].replace(/\}\}/g, "}").replace(/\{\{/g, "{"),
                        g = f,
                        h = parseInt(c, 10),
                        a = "";
                    if (isNaN(h)) {
                        g = g[1];
                        if (null != g)
                            for (var h = /(\.([a-zA-Z_$]\w*)|\[(\d+)\])/g, m = /^[a-zA-Z_$]\w*/.exec(c), g = g[m[0]]; null != g && (m = h.exec(c));) g = g[m[2] || n(m[3])];
                        c = g
                    } else {
                        if (h > g.length - 2) throw "Missing argument";
                        c = g[h + 1]
                    }
                    c = null == c ? "" : c.__Format ? c.__Format(d) : "" + c;
                    b = n(b) || 0;
                    for (d = Math.abs(b) - c.length; 0 < d--;) a += " ";
                    b = 0 > b ? c + a : a + c
                }
                return b
            })
        };
        var A = [Date.prototype, n.prototype, p],
            w;
        for (w in A) A[w].format =
            A[w].format || A[w].__Format;
        c();
        return m
    }(),
    msf = sffjs;
cc.sys.isNative || (cc.LoaderScene = cc.Scene.extend({
    _interval: null,
    _label: null,
    _className: "LoaderScene",
    _loadingText: "Loading... ",
    _backgroundColor: cc.color(0, 0, 0, 255),
    _foregroundColor: cc.color(255, 255, 255, 255),
    cb: null,
    target: null,
    init: function () {
        var a = this,
            b = 70,
            c = a._bgLayer = new cc.LayerColor(a._backgroundColor);
        a.addChild(c, 0);
        var d = -b / 2 - 20,
            f = a._label = new cc.LabelTTF(a._loadingText + "0%", "Arial", 14);
        cc._loaderImage && cc.loader.loadImg(cc._loaderImage, {
            isCrossOrigin: !1
        }, function (c, h) {
            h ? b = h.height : cc.log("error loading loader logo img!");
            d = -b / 2 - 20;
            f.setPosition(cc.pAdd(cc.visibleRect.center, cc.p(0, d)));
            a._initStage(h, cc.visibleRect.center)
        });
        f.setPosition(cc.pAdd(cc.visibleRect.center, cc.p(0, d)));
        f.setColor(a._foregroundColor);
        c.addChild(a._label, 10);
        return !0
    },
    _initStage: function (a, b) {
        var c = this._texture2d = new cc.Texture2D;
        c.initWithElement(a);
        c.handleLoadedTexture();
        c = this._logo = new cc.Sprite(c);
        c.setScale(cc.contentScaleFactor());
        c.x = b.x;
        c.y = b.y;
        this._bgLayer.addChild(c, 10)
    },
    onEnter: function () {
        cc.Node.prototype.onEnter.call(this);
        this.schedule(this._startLoading, 0.5)
    },
    onExit: function () {
        cc.Node.prototype.onExit.call(this);
        this._label.setString(self._loadingText + "0%")
    },
    initWithResources: function (a, b, c) {
        cc.isString(a) && (a = [a]);
        this.resources = a || [];
        this.cb = b;
        this.target = c
    },
    _startLoading: function () {
        var a = this;
        a.unschedule(a._startLoading);
        cc.loader.load(a.resources, function (b, c, d) {
            b = Math.min(100 * (d / c) | 0, 100);
            a._label.setString(a._loadingText + b + "%")
        }, function () {
            a.cb && a.cb.call(a.target)
        })
    }
}), cc.LoaderScene.preload = function (a, b,
    c) {
    var d = cc;
    d.loaderScene || (d.loaderScene = new cc.LoaderScene, d.loaderScene.init());
    d.loaderScene.initWithResources(a, b, c);
    cc.director.runScene(d.loaderScene);
    return d.loaderScene
});
cc._loaderImage = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAAaCAYAAAD/sGP9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABb1JREFUeNrsXM2R4kYYFZTPLuyTbytHYIjAIoKFCBYiAEWAiQAcgcYRwEaAHAE4gsE3n2zZEbh76vXs0zfdaolhq7o101UqLYwW+P7ee1+rW4Okw/jv779G6pR++/0Pl+QNDGVvqk4zdYzwlra7VPZXyfvoW6wzdTroGKv4Tn3XDzp8sE6gAkm0V8e2rwkEgChQNHJom39Vtv/ynm69ivcjAeTWF99Byw/eqdNavH1Vx7xv7KNsHavTiZxYgWn06zFd+qBsX0bOpith0++w6+q4LiN/fMa1VQ9ifrCA5KQptwctKvFEzr3gWNBlufqCfY8K50z21mxDEu3IydsYmccBhDz2yq5cXbeAvSPHdRXAs4w43mvYmEBJ6dimIIaJCxgGHuQ94EOeEBaJVJEeNA49qmMZO/ogUQq81PY8eBBK2/tjTHar314Q8FWI67/q+CD6uUr8+whG0uNnAZ6TGJWHUBe6d50it08mr9V789aFYymMF6wCNjqAvg0bzZnmI6bssqlBBPM84qW2+RiJfZodNxIIRUx3oih0XKcSHETSxQggrKZqv1/4yQqgQwfqskOmNimmvwTJZf6mf8AZDo11jEjrOwfA4UJ2x5IoK0LSFwoBMV2iqEwfO7UVBBhmSn5bRxbrDcWu5gvIbxPfHYDSXThCqpiiKT1JlOsvJgeeIi+evg6WYbnn2hzHvIlFUDymyD5FxDYzKvS9QzHMSa4enIUDeVYIem6lW0FlU/qiWItnRBreNyM1JoCJYRibSp+cBvPsW8b/M85pRMzLeb5tUBUGYMaYUKkXDhLhIGZKOjV7YCYungI/Mgrtr45/qBgyT+FzD6Cp/BHAE/JI28jQG8ZFgG/og3v3pYdRH4hR12yfYZxC9DQ3NfgotiVp/3Xo6IPp501SXx1w9ACHpvaS2CYFyy7eoARkcLwGHm/du5jkz1uSQ052HQwZDME25sO2r51WhF40VbqKqEE8YmZl4pqCZIDQEyPq+A4saxxbBIy6Jq4f7/y5YyFvQi2acfJlpuzY9t4jGGlOIFEYxjE386o73sg0unEUaiIBMAwj6jvgN02lQ6JOqHg2gebOH6TX79l/rgh4Qh47akWWHWPMvdBMTy4MhUS5y4jkXs6MHJm/0t6KHJvZpi8DGEeSlnfpPyF9TBH+Fni8K2KNW+LzgSXpMHm74yec77LaWdwkC65wYCP3n8Uri2YhpE/ojLO8FThgq+lfn2Ybh18j2IEiblNT+yYGkntPkuMm5hH3+y5dpU8gwLHpkMtG5l1w3/KpxzFIkfr6Ef13vSylhUZeUN9Uhq752ySKDwxwU+2ZygNOoJwmb3ScTjegr7xJXkUIHGsRM9cw09c8SZAM0fhcfRRGa9NmnutqsxcB+5EBY92QKGskinM5EXxhbL6G3uOJZTXjpOUNa/Q08iZ5bAt7t9TPNzKu6OFyjuuQ9J+Ray+cCCY6k7wx69IyS5Kd7tV0f+XkuVDx7OAkm+N2JO1OFpvTpL71Io8he1A8uSiemQsYsKp6I4omuhXRJNmcy2ko57mH4x72y+poQcHGORWKKfXMVuhrM/Fe8I617DeqkvriTRcaXXFEv7lN7Ow1zW8ugOFAdmrpPe/BFhLeh1PbV4W8OCcN+3IGFifuXjlRoB27jGV7gWMpfddRwfn7SJPIzLKNRcOfNhVV7EPs/HzeUyTety50HjSgECPpR4HKz45Ek20qs4x1P47lwRx6rCysc6SJBcM+xx4gsAQQuZEtd23si9xm86yBJ2aB/VYm8haORedllCS5QKEHfMG1Rw7N4DzuWz7R694+rMQi3S5QEL18spHc8Ylcf94R6vp/vq3T5w5N16Anjiw6yLZodn/eyD5/Qp71+nFYlmcwVJBuTjL4xqPbq6TdjcI+oVGXdVxpHxNJ3Czs/cCDSbKkviO0UUENkvdh63XSlg4v3z3Wq7hrtXFpMwHyvwADAEC/G+1hVl5CAAAAAElFTkSuQmCC";
var jcore = {
    Version: "1.1",
    models: {},
    io: {},
    net: {},
    service: {}
};
jcore.util = jcore.util || {};
jcore.string = s;
var console = console || {};
console.log || (console.log = cc.log);
jcore.log = jcore.log || {};
jcore.log.debug = function (a) {
    cc.log(a)
};
jcore.log.info = function (a) {
    cc.log(a)
};
jcore.log.warning = jcore.log.warn = function (a) {
    cc.log(a)
};
jcore.log.error = function (a) {
    cc.log(a)
};
jcore.util = jcore.util || {};
jcore.util.isDefined = function (a) {
    return "undefined" !== typeof a
};
jcore.util.notDefined = function (a) {
    return "undefined" === typeof a
};
jcore.util.isNotNull = function (a) {
    return "undefined" !== typeof a && null != a
};
jcore.util.isNull = function (a) {
    return "undefined" === typeof a || null == a
};
jcore.util.orDefault = function (a, b) {
    return "undefined" !== typeof a && null != a ? a : b
};
jcore.util.isValidNumber = function (a) {
    return "undefined" !== typeof a && null != a && "number" === typeof a && a === a
};
jcore.util.isString = function (a) {
    return "string" === typeof a || "[object String]" === Object.prototype.toString.call(a)
};
jcore.util.isNullOrEmpty = function (a) {
    return "undefined" === typeof a || null == a || "" === a
};
jcore.util.toNumber = function (a, b) {
    if (jcore.util.isNotNull(a)) try {
        var c = 0;
        jcore.util.isString(a) ? c = parseInt(a) : jcore.util.isValidNumber(a) && (c = a);
        if (!isNaN(c)) return c
    } catch (d) {
        jcore.log.warning("failed toNumber")
    }
    return jcore.util.isDefined(b) ? b : 0
};
jcore.util.toDecimal = function (a, b) {
    try {
        var c = 0;
        jcore.util.isString(a) ? c = parseFloat(a) : jcore.util.isValidNumber(a) && (c = a);
        if (!isNaN(c)) return c
    } catch (d) {
        jcore.log.warning("failed toDecimal")
    }
    return jcore.util.isDefined(b) ? b : 0
};
jcore.util.toString = function (a, b) {
    try {
        return jcore.util.isString(a) ? a : "" + a
    } catch (c) {
        jcore.log.warning("failed toString")
    }
    return jcore.util.isDefined(b) ? b : ""
};
jcore.util.checkArrayRange = function (a, b) {
    return jcore.util.isNull(a) || !a.length || 0 > b || b >= a.length ? !1 : !0
};
jcore.util.safeIndex = function (a, b, c) {
    c = jcore.util.isDefined(c) ? c : null;
    return jcore.util.isNull(a) || !jcore.util.isDefined(a.length) || a.length <= b ? c : a[b]
};
jcore.util.clamp = function (a, b, c) {
    return b < a ? a : b > c ? c : b
};
jcore.util.getUrlParameter = function (a) {
    if (cc.sys.isNative) return null;
    a = a.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    a = RegExp("[\\?&]" + a + "=([^&#]*)").exec(location.search);
    return null === a ? null : decodeURIComponent(a[1].replace(/\+/g, " "))
};
jcore.util.strExtract = function (a, b, c, d) {
    jcore.util.isDefined(d) || (d = null);
    var f = a.indexOf(b);
    if (0 > f) return d;
    c = a.indexOf(c, f + b.length);
    if (0 > c) return d;
    a = a.substring(f + b.length, c);
    return jcore.util.orDefault(a, d)
};
jcore.util.stringToObject = function (a, b) {
    b = b || "object";
    for (var c = a.split("."), d = window || this, f = 0, g = c.length; f < g; f++) d = d[c[f]];
    if (typeof d !== b) throw Error(b + " not found: " + a);
    return d
};
jcore.assert = function (a, b) {};
jcore.assertNotNull = function (a) {};
jcore.assertType = function (a, b) {};
jcore.assertTypeString = function (a) {};
jcore.Profiler = cc.Class.extend({
    _hashTable: null,
    _inited: !1,
    _afterVisitListener: null,
    ctor: function () {
        this._hashTable = new Hashtable
    },
    getItem: function (a) {
        if (jcore.util.isNull(a)) return null;
        var b = this._hashTable.get(a);
        null == b && (b = new jcore.ProfilerItem(a), this._hashTable.put(a, b));
        return b
    },
    reset: function () {
        _.each(this._hashTable.values(), function (a) {
            a.reset()
        })
    },
    report: function () {
        _.each(this._hashTable.values(), function (a) {
            a.report()
        })
    },
    resumeProfiling: function () {
        this.init();
        this._afterVisitListener &&
            cc.eventManager.addListener(this._afterVisitListener, 1)
    },
    stopProfiling: function () {
        this._afterVisitListener && cc.eventManager.removeListener(this._afterVisitListener)
    },
    init: function () {
        !this._inited && !this._afterVisitListener && (this._afterVisitListener = cc.eventManager.addCustomListener("jcore_profiler", _.bind(this._onAfterUpdates, this)), cc.eventManager.setPriority(this._afterVisitListener, 10), this._inited = !0)
    },
    _onAfterUpdates: function () {
        this.report();
        this.reset()
    }
});
jcore.Profiler.getInstance = function () {
    this._instance || (this._instance = new jcore.Profiler);
    return this._instance
};
jcore.ProfilerItem = cc.Class.extend({
    _name: null,
    _counter: 0,
    _startTime: null,
    _endTime: null,
    _duration: null,
    _entry: 0,
    ctor: function (a) {
        this._name = a;
        this.reset()
    },
    reset: function () {
        this._counter = 0;
        this._endTime = this._startTime = this._duration = null;
        this._entry = 0
    },
    start: function (a) {
        this._counter += jcore.util.orDefault(a, 1);
        this._entry++;
        null == this._startTime && (this._startTime = moment(), this._endTime = null)
    },
    end: function () {
        this._entry--;
        if (0 >= this._entry) {
            this._endTime = moment();
            var a = moment.duration(this._endTime.diff(this._startTime));
            this._duration ? this._duration.add(a) : this._duration = a;
            this._endTime = this._startTime = null
        }
    },
    report: function () {
        this._duration && 0 < this._duration.asMilliseconds() && cc.log("Profile [" + this._name + "] calls=" + this._counter + " time=" + this._duration.asMilliseconds() + "ms")
    }
});
jcore.math = jcore.math || {};
jcore.math.random = function (a, b) {
    a = jcore.util.orDefault(a, 0);
    b = jcore.util.orDefault(b, 1);
    return a + Math.random() * (b - a)
};
jcore.math.randomInt = function (a, b) {
    return jcore.math.random(a, b) | 0
};
jcore.math.shuffle = function (a) {
    for (var b, c, d = a.length; d; b = jcore.math.randomInt(0, d - 1), c = a[--d], a[d] = a[b], a[b] = c);
    return a
};
jcore.math.s4 = function () {
    return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1)
};
jcore.math.guid = function () {
    return jcore.math.s4() + jcore.math.s4() + "-" + jcore.math.s4() + "-" + jcore.math.s4() + "-" + jcore.math.s4() + "-" + jcore.math.s4() + jcore.math.s4() + jcore.math.s4()
};
jcore.Enum = jcore.Enum || {};
jcore.Enum.create = function (a) {
    var b = {},
        c = [],
        d = [];
    for (k in a) {
        var f = a[k];
        f instanceof Array ? (b[a[k] = f[0]] = {
            value: f[0],
            name: f[1]
        }, c.push(f[0]), d.push(f[1])) : (b[f] = {
            value: f,
            name: k
        }, c.push(b[f].value), d.push(b[f].name))
    }
    a.properties = b;
    a.values = c;
    a.names = d;
    a.enumContainsValue = function (b) {
        return _.contains(a.values, b)
    };
    a.enumContainsName = function (b) {
        return _.contains(a.names, b)
    };
    a.enumParse = function (b, c) {
        var d = _.find(a.properties, function (a) {
            return a.name == b
        });
        return null != d ? d.value : c
    };
    a.enumParseNameOrValue =
        function (b, c) {
            c = jcore.util.orDefault(c, a.values[0]);
            if (jcore.util.isNull(b)) return c;
            if (jcore.util.isValidNumber(b)) return a.enumContainsValue(b) ? b : c;
            if (jcore.util.isString(b)) {
                var d = _.find(a.properties, function (a) {
                    return a.name == b
                });
                if (null != d) return d.value;
                d = jcore.util.toNumber(b, c);
                return a.enumContainsValue(d) ? d : c
            }
        };
    a.enumGetName = function (b, c) {
        return (b = a.enumParseNameOrValue(b, c)) && a.properties[b] ? a.properties[b].name : c
    };
    return Object.freeze ? Object.freeze(a) : a
};
jcore.StateMachine = cc.Class.extend({
    _name: "",
    _enumType: null,
    _state: 0,
    _waitState: 0,
    _targetState: 0,
    _transistionDelay: 0,
    ctor: function (a, b, c) {
        this._name = a;
        this._enumType = b;
        this._waitState = c
    },
    getState: function () {
        return this._state
    },
    getTargetState: function () {
        return this._targetState
    },
    getStateName: function (a) {
        return this._enumType.enumGetName(a)
    },
    getStateDelay: function () {
        return this._transistionDelay
    },
    setStateDelay: function (a) {
        this._transistionDelay = a
    },
    isWaitState: function () {
        return this.checkState(this._waitState)
    },
    checkState: function (a) {
        return this._state === a
    },
    checkTargetState: function (a) {
        return this._targetState === a
    },
    transitionToState: function (a, b) {
        this._state !== a && this._targetState !== a && (this._transistionDelay = b = jcore.util.orDefault(b, 0), this._targetState = a, 0 < b ? a = this._waitState : this._targetState = null, jcore.log.debug(this._name + " State: " + this.getStateName(this._state) + " => " + this.getStateName(a)), this._state = a)
    },
    update: function (a) {
        this.getState() === this._waitState && (this._transistionDelay -= a, 0 >= this._transistionDelay &&
            (this._transistionDelay = 0, a = this._targetState, this._targetState = null, this.transitionToState(a, 0)))
    }
});
jcore.AppState = jcore.Enum.create({
    STATE_NONE: 0,
    STATE_INIT_SERVICES: 3,
    STATE_INIT_NETWORK_SERVICES: 4,
    STATE_RUNNING: 5,
    STATE_ERROR_NETWORK: -1
});
jcore.App = cc.Class.extend({
    _version: "1.0.0.0",
    _updateDelay: 0,
    _updatePeriod: 0.5,
    _initServices: !1,
    _initDelay: 1,
    _services: [],
    _state: jcore.AppState.STATE_NONE,
    ctor: function () {},
    init: function () {
        cc.log("INIT VERSION: " + this.getVersion() + "  " + (this.isOfflineMode() ? "OFFLINE" : ""));
        cc.log("Native Build: " + cc.sys.isNative);
        cc.log("LocalStorage: " + ("undefined" !== typeof cc.sys.localStorage ? "OK" : "FAILED!"));
        cc.log("XMLHttpRequest: " + ("undefined" !== typeof XMLHttpRequest ? "OK" : "FAILED!"));
        jui.Globals.init()
    },
    getVersion: function () {
        return this._version
    },
    initServices: function () {
        cc.log("INIT Services... " + this._services.length);
        for (var a = 0; a < this._services.length; a++) this._services[a].init();
        cc.log("INIT Services DONE OK");
        this._initServices = !0
    },
    initNetworkServices: function (a) {
        a || (cc.log("INIT Network Services..."), a = 0);
        for (var b = !1; a < this._services.length; a++)
            if (jcore.util.isDefined(this._services[a].initNetwork)) {
                var b = !0,
                    c = a + 1;
                cc.log("Connecting " + this._services[a].getName());
                this._services[a].initNetwork(_.bind(function (a) {
                        this.initNetworkServices(c)
                    },
                    this), _.bind(function (a) {
                    this._transitionToState(jcore.AppState.STATE_ERROR_NETWORK)
                }, this));
                break
            } b || this._transitionToState(jcore.AppState.STATE_RUNNING)
    },
    initProfiler: function () {
        jcore.Profiler.getInstance().resumeProfiling()
    },
    isOfflineMode: function () {
        return !1
    },
    registerService: function (a) {
        jcore.assert(a instanceof jcore.service.BaseService, "service must inherit from jcore.service.BaseService");
        cc.log("Registering " + a.getName());
        this._services.push(a)
    },
    getState: function () {
        return this._state
    },
    _transitionToState: function (a) {
        cc.log("APP State: " +
            this.getAppStateName(this._state) + " => " + this.getAppStateName(a));
        this._state = a
    },
    update: function (a) {
        this._updateDelay += a;
        if (!(this._updateDelay < this._updatePeriod)) switch (a = this._updateDelay, this._updateDelay = 0, this._state) {
        case jcore.AppState.STATE_NONE:
            this._initDelay -= a;
            0 >= this._initDelay && this._transitionToState(jcore.AppState.STATE_INIT_SERVICES);
            break;
        case jcore.AppState.STATE_INIT_SERVICES:
            this._initServices || (this.initServices(), this._transitionToState(jcore.AppState.STATE_INIT_NETWORK_SERVICES));
            break;
        case jcore.AppState.STATE_INIT_NETWORK_SERVICES:
            this.initNetworkServices();
            break;
        default:
            if (this._initServices)
                for (var b = 0; b < this._services.length; b++) this._services[b].update(a)
        }
    },
    getAppStateName: function (a) {
        return jcore.AppState.enumContainsValue(a) ? jcore.AppState.names[a] : a
    },
    showAlert: function (a) {
        cc.log("ALERT: " + a)
    },
    createRootLayer: function () {
        return null
    },
    getAppParameter: function (a, b) {
        return jcore.util.orDefault(jcore.util.getUrlParameter(a), b)
    }
});
jcore.App.init = function (a) {
    jcore.assertNotNull(a, "must define appInstance");
    jcore.App._instance = a;
    jcore.App.getInstance().init()
};
jcore.App.getInstance = function () {
    jcore.App._instance || cc.log("ERROR call jcore.App.init");
    return jcore.App._instance
};
jcore.App._instance = null;
var jui = jui || {};
jui.Version = "1.1";
jui.SizeMode = jcore.Enum.create({
    none: 1,
    stretch: 2,
    stretch_non_proportional: 3,
    stretch_allways: 3,
    stretch_resize: 4
});
jui.PositionMode = jcore.Enum.create({
    center: 1,
    manual: 2,
    bottom: 3,
    right: 4,
    left: 5,
    top: 6
});
jui.HorizontalAlignment = jcore.Enum.create({
    none: 0,
    center: 2,
    left: 3,
    right: 4,
    stretch: 5
});
jui.VerticalAlignment = jcore.Enum.create({
    none: 0,
    center: 2,
    bottom: 3,
    top: 4
});
jui.TextHorizontalAlignment = jcore.Enum.create({
    left: cc.TEXT_ALIGNMENT_LEFT,
    center: cc.TEXT_ALIGNMENT_CENTER,
    right: cc.TEXT_ALIGNMENT_RIGHT
});
jui.TextVerticalAlignment = jcore.Enum.create({
    top: cc.VERTICAL_TEXT_ALIGNMENT_TOP,
    center: cc.VERTICAL_TEXT_ALIGNMENT_CENTER,
    bottom: cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM
});
jui.ParticleAnimationType = jcore.Enum.create({
    none: 1,
    normal: 2,
    traceBorder: 3
});
jui.ScreenSizeMode = jcore.Enum.create({
    normal: 1,
    large: 2
});
jui.WidgetLayers = {
    Background: 0,
    background: 0,
    UI: 10,
    UI_Overlay: 15,
    UI_HUD: 20,
    Tint: 21,
    Popup: 22,
    Overlay: 30,
    overlay: 30
};
jui.VisualState = {
    none: "none",
    visible: "visible",
    hidden: "hidden",
    animate: "animate"
};
jui.AnimationType = jcore.Enum.create({
    none: 1,
    frames: 2,
    fadeIn: 3,
    blinking: 4,
    pulse: 5,
    jiggle: 6,
    full_spin: 7,
    jump: 8,
    fading: 9,
    slide_down: 10,
    slide: 11,
    simple_fadeIn: 12,
    simple_fadeOut: 13,
    slide_arc: 14,
    spline: 15
});
jui.VisibilityMode = jcore.Enum.create({
    visible: 1,
    hidden: 2,
    duringAnimation: 3,
    manual: 4,
    hiddenDuringAnimation: 5
});
jui.BlendMode = jcore.Enum.create({
    normal: 1,
    additive: 2
});
jui.FontType = jcore.Enum.create({
    ttf: 0,
    bitmap: 1
});
jui.Margin = function (a, b, c, d) {
    return void 0 === a ? {
        l: 0,
        t: 0,
        r: 0,
        b: 0
    } : void 0 === b ? jcore.util.isValidNumber(a) ? {
        l: a,
        t: a,
        r: a,
        b: a
    } : {
        l: jcore.util.orDefault(a.l, 0),
        t: jcore.util.orDefault(a.t, 0),
        r: jcore.util.orDefault(a.r, 0),
        b: jcore.util.orDefault(a.b, 0)
    } : {
        l: jcore.util.orDefault(a, 0),
        t: jcore.util.orDefault(b, 0),
        r: jcore.util.orDefault(c, 0),
        b: jcore.util.orDefault(d, 0)
    }
};
jui.Padding = jui.Margin;
jui.TextStyle = function () {
    this.type = jui.FontType.ttf;
    this.size = 16;
    this.name = "Arial";
    this.color = cc.color(255, 255, 255);
    this.horizontalAlignment = jui.TextHorizontalAlignment.center;
    this.verticalAlignment = jui.TextVerticalAlignment.center;
    this.enableShadow = !1;
    if (arguments && 0 < arguments.length)
        for (var a = 0; a < arguments.length; a++) _.extend(this, arguments[a])
};
jui = jui || {};
jui.init = function () {
    jui.LayoutManager.getInstance().init()
};
var s_Root = "",
    R = {
        sprites: {
            black: s_Root + "default/black.png",
            white: s_Root + "default/white.png",
            empty: s_Root + "default/blank.png",
            button_default_normal: s_Root + "default/button_normal.png",
            button_default_pressed: s_Root + "default/button_selected.png",
            button_default_disabled: s_Root + "default/button_disabled.png",
            button_guest_normal: s_Root + "loading/button_guest.png",
            icon_busy: s_Root + "loading/loading.png"
        },
        fonts: {
            default_ttf_path: s_Root + "res/fonts/font.ttf",
            default_ttf_name: "poker_default_font",
            white_normal_14: s_Root +
                "fonts/white_normal_14.fnt"
        },
        effects: {},
        sounds: {
            betSound: s_Root + "sounds/Bet.mp3",
            checkSound: s_Root + "sounds/Check.mp3",
            foldSound: s_Root + "sounds/Fold.mp3",
            clickSound: s_Root + "sounds/Button_Click.mp3",
            dealSound: s_Root + "sounds/Deal_Card.mp3",
            largeSound: s_Root + "sounds/Large_Stack.mp3",
            smallSound: s_Root + "sounds/Small_Stack.mp3",
            turnSound: s_Root + "sounds/Player_Turn.mp3",
            raiseSound: s_Root + "sounds/Raise.mp3",
            timeSound: s_Root + "sounds/Time_Warning.mp3",
            winSound: s_Root + "sounds/Winner.mp3"
        }
    };
cc.sys.isNative && (R.fonts.default_ttf_name = R.fonts.default_ttf_path);
R.animations = {};
var res = [{
            src: s_Root + "hud_spritesheet.png",
            type: "png",
            spritesheet: !0
        }, {
            src: s_Root + "hud_spritesheet.plist",
            type: "plist",
            spritesheet_list: !0
        }, {
            src: s_Root + "lobby_spritesheet.png",
            type: "png",
            spritesheet: !0
        }, {
            src: s_Root + "lobby_spritesheet.plist",
            type: "plist",
            spritesheet_list: !0
        }, {
            src: s_Root + "game_spritesheet.png",
            type: "png",
            spritesheet: !0
        }, {
            src: s_Root + "game_spritesheet.plist",
            type: "plist",
            spritesheet_list: !0
        }, {
            src: s_Root + "cards_spritesheet.png",
            type: "png",
            spritesheet: !0
        }, {
            src: s_Root + "cards_spritesheet.plist",
            type: "plist",
            spritesheet_list: !0
        }, {
            src: s_Root + "popup_spritesheet.png",
            type: "png",
            spritesheet: !0
        }, {
            src: s_Root + "popup_spritesheet.plist",
            type: "plist",
            spritesheet_list: !0
        }, {
            src: R.sprites.black,
            type: "png"
        }, {
            src: R.sprites.white,
            type: "png"
        }, {
            src: R.sprites.empty,
            type: "png"
        }, {
            src: R.sprites.button_default_normal,
            type: "png"
        }, {
            src: R.sprites.button_default_pressed,
            type: "png"
        }, {
            src: R.sprites.button_default_disabled,
            type: "png"
        }, {
            name: R.fonts.default_ttf_name,
            type: "font",
            preload: {
                color: cc.color(255, 255, 255),
                sizes: [12,
                    14, 16, 18
                ]
            },
            srcs: [R.fonts.default_ttf_path]
        }, {
            src: R.fonts.white_normal_14,
            type: "fnt"
        }, {
            src: "effects/loading_particle.png",
            type: "png"
        }, {
            src: "effects/loading_effect.plist",
            type: "plist"
        }, {
            src: "effects/iris_particle.png",
            type: "png"
        }, {
            src: "effects/iris.plist",
            type: "plist"
        }, {
            src: "effects/winner_effect_texture.png",
            type: "png"
        }, {
            src: "effects/winner_effect.plist",
            type: "plist"
        }, {
            src: "poker_alert_popup.json",
            type: "json"
        }, {
            src: "poker_confirm_popup.json",
            type: "json"
        }, {
            src: "poker_profile_popup.json",
            type: "json"
        },
        {
            src: "poker_filters_popup.json",
            type: "json"
        }, {
            src: "poker_chat_popup.json",
            type: "json"
        }, {
            src: "poker_buyin_popup.json",
            type: "json"
        }, {
            src: "poker_tournament_view.json",
            type: "json"
        }, {
            src: "poker_cell_game_item.json",
            type: "json"
        }, {
            src: "poker_ringgame_view.json",
            type: "json"
        }, {
            src: "poker_cell_ringgame_item.json",
            type: "json"
        }
    ],
    g_resources = [],
    i;
for (i in res) g_resources.push(res[i]);
"undefined" != typeof jQuery && function (a) {
    var b;
    b = window.location.search.substr(1).split("&");
    if ("" == b) b = {};
    else {
        for (var c = {}, d = 0; d < b.length; ++d) {
            var f = b[d].split("=");
            2 == f.length && (c[f[0]] = decodeURIComponent(f[1].replace(/\+/g, " ")))
        }
        b = c
    }
    a.QueryString = b
}(jQuery);
cc.sys.isNative || (window.jsonP = function (a, b, c) {
    var d = arguments.callee,
        f = d.queue || (d.queue = {}),
        g = "jsonP" + Object.keys(f).length + "_" + Date.now(),
        d = "jsonP.queue." + g,
        h = /(=)\?(?=&|$)/,
        m = document.createElement("script");
    m.type = "text/javascript";
    m.src = h.test(a) ? a.replace(h, "$1" + d) : a + (/\?/.test(a) ? "&" : "?") + (c || "callback") + "=" + d;
    m.onload = function () {
        delete f[g]
    };
    m.onreadystatechange = function () {
        "complete" == this.readyState && this.onload()
    };
    f[g] = b;
    (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(m)
});
jcore.DisposableContext = cc.Class.extend({
    _items: null,
    ctor: function () {
        this._items = []
    },
    add: function (a) {
        jcore.util.isNotNull(a) && this._items.push(a)
    },
    remove: function (a, b) {
        if (jcore.util.isNotNull(a)) {
            var c = _.indexOf(this._items, a); - 1 < c && (this._items.splice(c, 1), b && jcore.util.isDefined(item.dispose) && item.dispose())
        }
    },
    dispose: function () {
        for (var a = 0; a < this._items.length; a++) {
            var b = this._items[a];
            jcore.util.isDefined(b.dispose) && b.dispose()
        }
        this._items = []
    }
});
jcore.ObservableModel = cc.Class.extend({
    _observableMap: null,
    ctor: function () {
        this._observableMap = {}
    },
    getValue: function (a, b) {
        var c = this.getObservable(a);
        return null != c ? c() : b ? b : null
    },
    setValue: function (a, b) {
        this.getObservable(a, !0, b)(b)
    },
    getObservable: function (a, b, c) {
        if (this._observableMap[a]) return this._observableMap[a];
        if (jcore.util.orDefault(b, !0)) return b = ko.observable(c), this._observableMap[a] = b;
        jcore.log.debug("expected property not found: " + a);
        return null
    },
    addObservable: function (a, b) {
        return this._observableMap[a] =
            b
    },
    invalidateObservable: function (a) {
        this.getObservable(a).valueHasMutated()
    }
});
jcore.ObservableModel.defineProperty = function (a, b, c) {
    cc.defineGetterSetter(a, b, function () {
        return this.getValue(b, c)
    }, function (a) {
        this.setValue(b, a)
    })
};
jcore.ObservableModel.defineAllProperties = function (a, b) {
    _.each(b, function (b) {
        _.isString(b) ? jcore.ObservableModel.defineProperty(a, b) : jcore.ObservableModel.defineProperty(a, b.name, b.defaultValue)
    }, this)
};
jcore.ObservableCollection = cc.Class.extend({
    on: {
        arrayAdded: null,
        arrayRemoved: null,
        arrayChanged: null
    },
    _observableArray: null,
    ctor: function () {
        this.on = {};
        this.on.arrayAdded = new signals.Signal;
        this.on.arrayRemoved = new signals.Signal;
        this.on.arrayChanged = new signals.Signal;
        this._observableArray = ko.observableArray([]);
        this._observableArray.extend({
            rateLimit: 10
        });
        this._observableArray.subscribe(_.bind(this._onArrayChanges, this), null, "arrayChange")
    },
    getLength: function () {
        return this._observableArray().length
    },
    getArray: function () {
        return this._observableArray()
    },
    getObservableArray: function () {
        return this._observableArray
    },
    push: function (a) {
        this._observableArray.push(a)
    },
    find: function (a) {
        return _.find(this.getArray(), a)
    },
    indexOf: function (a) {
        return this._observableArray.indexOf(a)
    },
    remove: function (a) {
        this._observableArray.remove(a)
    },
    removeAll: function () {
        this._observableArray.removeAll()
    },
    _onArrayChanges: function (a) {
        _.each(a, function (a) {
            "added" === a.status ? this.on.arrayAdded.dispatch(this, a) : "deleted" === a.status ?
                this.on.arrayRemoved.dispatch(this, a) : jcore.log.info(a.status);
            this.on.arrayChanged.dispatch(this, a)
        }, this)
    }
});
jcore.io.DataStream = cc.Class.extend({
    _littleEndian: !0,
    _currentLength: 0,
    _currentOffset: 0,
    _currentChunkOffset: -1,
    _currentUint8Array: null,
    _dataChunks: null,
    _currentDataChunkIndex: -1,
    _moveOffsetOnRead: !0,
    _moveOffsetOnWrite: !0,
    ctor: function (a) {
        this.clear();
        a && this.pushArrayBuffer(new ArrayBuffer(a))
    },
    getOffset: function () {
        return this._currentOffset
    },
    getLength: function () {
        return this._currentLength
    },
    setOffset: function (a) {
        this._currentOffset = 0;
        this._currentChunkOffset = -1;
        this._currentUint8Array = null;
        this._currentDataChunkIndex = -1;
        this._readBytes(a)
    },
    clear: function () {
        this._currentOffset = this._currentLength = 0;
        this._currentChunkOffset = -1;
        this._dataChunks = this._currentUint8Array = null;
        this._currentDataChunkIndex = -1
    },
    trimToOffset: function () {},
    pushArrayBuffer: function (a) {
        this._dataChunks.push(a);
        this._currentLength += a.length
    },
    pushBase64: function (a) {
        this._base64ToBytes(a);
        this.pushArrayBuffer(Uint8Array.from(pushArrayBuffer))
    },
    writeInt8: function (a) {},
    writeUInt8: function (a) {},
    writeInt16: function (a) {},
    writeUInt16: function (a) {},
    writeInt32: function (a) {},
    writeUInt32: function (a) {},
    write7BitEncodedInt: function (a) {
        for (a = value; 128 <= a;) this.writeInt8(a | 128), a >>= 7;
        this.writeInt8(a)
    },
    writeString: function (a) {
        a = UTF8.setBytesFromString(a);
        this.write7BitEncodedInt(byte.length);
        this.writeBytes(a)
    },
    writeBytes: function (a) {
        this._writeBytes(a)
    },
    readFloat64: function () {
        var a = this._getBytes(8),
            b = 1 - 2 * (a[7] >> 7),
            c = ((a[7] << 1 & 255) << 3 | a[6] >> 4) - 1023,
            a = (a[6] & 15) * this._pow2(48) + a[5] * this._pow2(40) + a[4] * this._pow2(32) + a[3] * this._pow2(24) + a[2] * this._pow2(16) + a[1] * this._pow2(8) +
            a[0];
        return 1024 === c ? 0 !== a ? NaN : Infinity * b : -1023 === c ? b * a * this._pow2(-1074) : b * (1 + a * this._pow2(-52)) * this._pow2(c)
    },
    readFloat32: function () {
        var a = this._getBytes(4),
            b = 1 - 2 * (a[3] >> 7),
            c = (a[3] << 1 & 255 | a[2] >> 7) - 127,
            a = (a[2] & 127) << 16 | a[1] << 8 | a[0];
        return 128 === c ? 0 !== a ? NaN : Infinity * b : -127 === c ? b * a * this._pow2(-149) : b * (1 + a * this._pow2(-23)) * this._pow2(c)
    },
    readInt32: function () {
        var a = this._getBytes(4);
        return a[3] << 24 | a[2] << 16 | a[1] << 8 | a[0]
    },
    readUint32: function () {
        return this.getInt32() >>> 0
    },
    readInt16: function () {
        return this.getUint16() <<
            16 >> 16
    },
    readUint16: function () {
        var a = this._getBytes(2);
        return a[1] << 8 | a[0]
    },
    readInt8: function () {
        return this.getUint8() << 24 >> 24
    },
    readUint8: function () {
        return this._getBytes(1)[0]
    },
    read7BitEncodedInt: function () {
        var a, b = 0,
            c = 0;
        do {
            if (35 == c) throw new Exception("Format_Bad7BitInt32");
            a = this.readUint8();
            b |= (a & 127) << c;
            c += 7
        } while (0 != (a & 128));
        return b
    },
    readString: function () {
        var a = this.read7BitEncodedInt(),
            b = this._readBytes(a);
        return UTF8.getStringFromBytes(b, 0, a, !0)
    },
    readBytes: function (a, b) {
        var c = this._getBytes(a);
        return b ? this._arrayFrom(c) : c
    },
    _getDataChunk: function (a) {
        if (0 > a || a >= this._dataChunks.length) throw new RangeError(" data chunk index out of range");
        return this._dataChunks(a)
    },
    _getBytes: function (a) {
        var b = this._readBytes(a);
        return this._littleEndian || 1 >= a ? b : this._arrayFrom(b).reverse()
    },
    _readBytes: function (a) {
        if (0 >= a) return null;
        if (this.getLength() - this.getOffset() < a) throw new RangeError(" not enough bytes");
        var b = null,
            c = 0,
            d = 0;
        if (null == this._dataChunks) throw new RangeError(" out of range");
        for (; !b ||
            c < a;) {
            if (null == this._currentUint8Array) {
                this._currentDataChunkIndex += 1;
                var f = this._getDataChunk(this._currentDataChunkIndex);
                this._currentUint8Array = new Uint8Array(f);
                this._currentChunkOffset = 0
            }
            var g = this._currentUint8Array.length - this._currentChunkOffset;
            g == a ? b = new Uint8Array(this._currentUint8Array.buffer, this._currentChunkOffset, g) : (null == b && (f = new ArrayBuffer(a), b = new Uint8Array(f, 0, a)), b.set(this._currentUint8Array.subarray(this._currentChunkOffset, this._currentChunkOffset + g), d), d += g);
            c += g;
            this._currentChunkOffset +=
                g;
            this._currentOffset += g;
            this._currentChunkOffset == this._currentUint8Array.length && (this._currentUint8Array = null)
        }
        return b
    },
    _writeBytes: function (a) {},
    _is: function (a, b) {
        return "object" !== typeof a || null === a ? !1 : a.constructor === b || Object.prototype.toString.call(a) === "[object " + b.name + "]"
    },
    _arrayFrom: function (a, b) {
        return !b && this._is(a, Array) ? a : Array.prototype.slice.call(a)
    },
    _pow2: function (a) {
        return 0 <= a && 31 > a ? 1 << a : this._pow2[a] || (this._pow2[a] = Math.pow(2, a))
    },
    _base64clean: function (a) {
        a = stringtrim(a).replace(/[^+/0-9A-Za-z-_]/g,
            "");
        if (2 > a.length) return "";
        for (; 0 !== a.length % 4;) a += "=";
        return a
    },
    _stringtrim: function (a) {
        return a.trim ? a.trim() : a.replace(/^\s+|\s+$/g, "")
    },
    _base64ToBytes: function (a) {
        return base64.toByteArray(base64clean(a))
    }
});
jcore.net.WebSocket = cc.Class.extend({
    on: {
        stateChanged: null,
        receivedMessage: null
    },
    _socketUrl: null,
    _keepAliveId: null,
    _keepAliveData: " ",
    _keepAliveTimeout: 25E3,
    _autoReconnectTimeout: 5E3,
    _autoReconnectTimeoutMin: 5E3,
    _autoReconnectTimeoutMax: 3E4,
    _autoReconnectTimeoutThrottle: 5E3,
    _autoReconnect: !0,
    _autoReconnectOnErrors: !1,
    _autoReconnectAttempt: 0,
    _messageCallback: null,
    _errorCallback: null,
    _connectCallback: null,
    _webSocket: null,
    _state: null,
    ctor: function (a) {
        this._state = jcore.net.WebSocket.State.disconnected;
        this.on = {};
        this.on.stateChanged = new signals.Signal;
        this.on.receivedMessage = new signals.Signal;
        this._init(a)
    },
    _init: function (a) {
        this._socketUrl = a.url;
        this._messageCallback = a.onMessage;
        this._errorCallback = a.onError;
        this._connectCallback = a.onConnect;
        this._autoReconnect = jcore.util.orDefault(a.autoReconnect, this._autoReconnect);
        this._autoReconnectOnErrors = jcore.util.orDefault(a.autoReconnectOnErrors, this._autoReconnectOnErrors);
        this._autoReconnectTimeoutMin = jcore.util.orDefault(a.autoReconnectTimeout,
            this._autoReconnectTimeoutMin);
        this._autoReconnectTimeoutMax = jcore.util.orDefault(a.autoReconnectTimeoutMax, this._autoReconnectTimeoutMax);
        this._autoReconnectTimeout = this._autoReconnectTimeoutMin;
        this._keepAliveData = jcore.util.orDefault(a.keepAliveData, this._keepAliveData);
        this._keepAliveTimeout = jcore.util.orDefault(a.keepAliveTimeout, this._keepAliveTimeout);
        a.connect && this.connect()
    },
    isConnected: function () {
        return null != this._webSocket && this.checkState(jcore.net.WebSocket.State.connected)
    },
    isDisconnected: function () {
        return this.checkState(jcore.net.WebSocket.State.disconnected) ||
            this.isError()
    },
    isConnecting: function () {
        return this.checkState(jcore.net.WebSocket.State.connecting)
    },
    isError: function () {
        return this.checkState(jcore.net.WebSocket.State.error)
    },
    getState: function () {
        return this._state
    },
    checkState: function (a) {
        return this._state == a
    },
    setKeepAlive: function (a) {
        a && !this._keepAliveId ? this._keepAliveId = setTimeout(_.bind(this._doKeepAlive, this), 0.25 * this._keepAliveTimeout) : this._keepAliveId && (clearTimeout(this._keepAliveId), this._keepAliveId = null)
    },
    setAutoReconnect: function (a) {
        this._autoReconnect =
            a
    },
    connect: function () {
        var a = !1;
        if (this.checkState(jcore.net.WebSocket.State.connecting)) jcore.log.debug("already connecting... ");
        else if (this.checkState(jcore.net.WebSocket.State.connected)) jcore.log.debug("already connected... ");
        else try {
            this._setState(jcore.net.WebSocket.State.connecting), this._cleanup(), this._webSocket = this._getWebSocket(this._socketUrl), this._webSocket.onopen = _.bind(this._onWebSocketOpen, this), this._webSocket.onclose = _.bind(this._onWebSocketClose, this), this._webSocket.onerror =
                _.bind(this._onWebSocketError, this), this._webSocket.onmessage = _.bind(this._onWebSocketMessage, this), a = !0
        } catch (b) {
            jcore.log.warning("websocket connect error: " + b), this._setState(jcore.net.WebSocket.State.error)
        }
        return a
    },
    disconnect: function () {
        this._autoReconnect = !1;
        this._cleanup()
    },
    send: function (a) {
        if (this.isConnected()) try {
            return this._webSocket.send(JSON.stringify(a)), !0
        } catch (b) {
            jcore.log.warning("websocket send error: " + b), this._setState(jcore.net.WebSocket.State.error), this._triggerReconnect()
        }
        return !1
    },
    _cleanup: function () {
        if (null != this._webSocket) try {
            this._webSocket.onopen = null, this._webSocket.onclose = null, this._webSocket.onerror = null, this._webSocket.onmessage = null, this._webSocket.close()
        } catch (a) {
            jcore.log.warning("websocket close ex: " + a)
        } finally {
            this._webSocket = null
        }
    },
    _setState: function (a) {
        this._state != a && (this._state = a, this.on.stateChanged.dispatch(this, this._state))
    },
    _doAutoConnect: function () {
        this._autoReconnect && (this._autoReconnectAttempt += 1, 20 > this._autoReconnectAttempt ? (jcore.log.debug("websocket reconnect attempt: " +
            this._autoReconnectAttempt), this.connect()) : jcore.log.debug("websocket reconnect giving up: " + this._autoReconnectAttempt))
    },
    _doKeepAlive: function () {
        this.isConnected() && this._webSocket && this._webSocket.send(this._keepAliveData);
        this._keepAliveId = setTimeout(_.bind(this._doKeepAlive, this), this._keepAliveTimeout)
    },
    _getWebSocket: function (a) {
        jcore.log.info("Creating websocket... " + a);
        return window.WebSocket ? new WebSocket(a) : new MozWebSocket(a)
    },
    _onWebSocketError: function (a) {
        jcore.log.info("WebSocket onError: Sorry, but there is some problem with your socket or the server is down");
        this._setState(jcore.net.WebSocket.State.error);
        this.setKeepAlive(!1);
        this._errorCallback && this._errorCallback()
    },
    _onWebSocketClose: function (a) {
        jcore.log.info("WebSocket onClose executed ");
        this._triggerReconnect();
        this._setState(jcore.net.WebSocket.State.disconnected)
    },
    _onWebSocketOpen: function (a) {
        jcore.log.info("WebSocket onOpen: Connected ");
        this._setState(jcore.net.WebSocket.State.connected);
        this._autoReconnectAttempt = 0;
        this._autoReconnectTimeout = this._autoReconnectTimeoutMin;
        this._connectCallback &&
            this._connectCallback()
    },
    _onWebSocketMessage: function (a) {
        a = a.data;
        var b;
        try {
            b = JSON.parse(a)
        } catch (c) {
            jcore.log.error("An error ocurred while parsing the JSON Data:" + a + " Error: " + c);
            return
        }
        this.on.receivedMessage.dispatch(this, b)
    },
    _triggerReconnect: function () {
        if (this._autoReconnect && (this._autoReconnectOnErrors || !this.isError())) {
            var a = this._autoReconnectTimeout,
                a = Math.max(a, this._autoReconnectTimeoutMin);
            jcore.log.debug("websocket will try to connect in: " + a);
            setTimeout(_.bind(this._doAutoConnect,
                this), a);
            this._autoReconnectTimeout += jcore.math.randomInt(500, 500 + this._autoReconnectTimeoutThrottle);
            this._autoReconnectTimeout = Math.min(this._autoReconnectTimeout, this._autoReconnectTimeoutMax)
        }
    }
});
jcore.net.WebSocket.State = jcore.Enum.create({
    disconnected: 0,
    connecting: 1,
    connected: 2,
    error: -1
});
jcore.net.WebSocketDataStream = cc.Class.extend({
    on: {
        connectedChanged: null,
        receivedData: null,
        receivedJsonData: null
    },
    _webSocket: null,
    _inDataStream: null,
    _onDataAvailableCallback: null,
    ctor: function () {
        this.on = {};
        this.on.receivedData = new signals.Signal;
        this.on.receivedJsonData = new signals.Signal;
        this.on.connectedChanged = new signals.Signal;
        this._webSocket = null;
        this._inDataStream = new jcore.io.DataStream
    },
    isConnected: function () {
        return null != this._webSocket && this._webSocket.isConnected()
    },
    isError: function () {
        return null !=
            this._webSocket && this._webSocket.isError()
    },
    connect: function (a) {
        this._webSocket && (this._webSocket.setAutoReconnect(!1), this._webSocket.disconnect(), this._webSocket = null);
        a = {
            url: a,
            connect: !1,
            keepAliveData: "{ ping: 'x' }",
            keepAliveTimeout: 1E4,
            autoReconnect: !0,
            autoReconnectOnErrors: !0
        };
        this._inDataStream.clear();
        this._webSocket = new jcore.net.WebSocket(a);
        this._webSocket.on.stateChanged.add(this._onWebSocketStateChanged, this);
        this._webSocket.on.receivedMessage.add(this._onWebSocketMessage, this);
        return this._webSocket.connect()
    },
    close: function () {
        if (null != this._webSocket) try {
            this._webSocket.setAutoReconnect(!1), this._webSocket.on.stateChanged.removeAll(), this._webSocket.on.receivedMessage.removeAll(), this._webSocket.disconnect()
        } finally {
            this._webSocket = null
        }
    },
    send: function (a) {
        jcore.assertNotNull(a);
        if (!this.isConnected()) return !1;
        a = {
            format: "base64",
            payload: base64.fromByteArray(a)
        };
        this._webSocket.send(a);
        return !0
    },
    sendJson: function (a) {
        jcore.assertNotNull(a);
        if (!this.isConnected()) return !1;
        this._webSocket.send({
            format: "json",
            payload: a
        });
        return !0
    },
    getInputDataStream: function () {
        return this._inDataStream
    },
    _onWebSocketStateChanged: function (a, b) {
        a !== this._webSocket || jcore.util.isNull(this._webSocket) || (b == jcore.net.WebSocket.State.connected && (this._webSocket.setKeepAlive(!0), this._webSocket.setAutoReconnect(!0)), this.on.connectedChanged.dispatch(this))
    },
    _onWebSocketMessage: function (a, b) {
        if (!(a !== this._webSocket || jcore.util.isNull(this._webSocket)) && b && !b.pong && b.payload) {
            var c = b.format,
                d = b.payload;
            c && "json" === c ? this.on.receivedJsonData.dispatch(this,
                d) : this._pushBase64Packet(strbase64)
        }
    },
    _pushBase64Packet: function (a) {
        var b = this._inDataStream.getLength();
        this._inDataStream.pushBase64(a);
        b < this._inDataStream.getLength() && this.on.receivedData.dispatch(this, this._inDataStream)
    }
});
var OWService = jcore.service.BaseService = cc.Class.extend({
    _serviceName: "Service",
    ctor: function (a) {
        jcore.assertNotNull(a);
        jcore.assertTypeString(a);
        this._serviceName = jcore.util.orDefault(a, "Service")
    },
    getName: function () {
        return this._serviceName
    },
    init: function () {
        cc.log("INIT " + this.getName())
    },
    update: function (a) {}
});
jcore.service.Analytics = jcore.service.BaseService.extend({
    _handlers: null,
    ctor: function () {
        this._super("AnalyticsService");
        this._handlers = [];
        cc.sys.isNative ? this._handlers.push(new jcore.service.NativeGoogleAnalytics) : this._handlers.push(new jcore.service.GoogleAnalytics)
    },
    init: function () {
        this._super();
        _.each(this._handlers, function (a) {
            a.init()
        })
    },
    trackScreen: function (a, b) {
        jcore.assertNotNull(a);
        _.each(this._handlers, function (c) {
            c.trackScreen(a, b)
        })
    },
    track: function (a, b) {
        jcore.assertNotNull(a);
        _.each(this._handlers,
            function (c) {
                c.track(a, b)
            })
    }
});
jcore.service.Analytics.getInstance = function () {
    this._instance || (this._instance = new jcore.service.Analytics);
    return this._instance
};
jcore.service.GoogleAnalytics = cc.Class.extend({
    ctor: function () {},
    init: function () {
        jcore.util.isDefined(ga) || jcore.log.warning("Google Analytics not defined")
    },
    trackScreen: function (a, b) {
        jcore.util.isDefined(ga) && ga("send", "screenview", {
            screenName: a
        })
    },
    track: function (a, b) {
        jcore.util.isDefined(ga) && ga("send", {
            hitType: "event",
            eventCategory: a,
            eventAction: b
        })
    }
});
jcore.service.NativeGoogleAnalytics = cc.Class.extend({
    ctor: function () {},
    init: function () {
        sdkbox.PluginGoogleAnalytics.init()
    },
    trackScreen: function (a, b) {
        sdkbox.PluginGoogleAnalytics.logScreen(a)
    },
    track: function (a, b) {
        sdkbox.PluginGoogleAnalytics.logEvent(a, jcore.util.isNotNull(b) ? b : "", "", "")
    }
});
jcore.service.FacebookService = jcore.service.BaseService.extend({
    _isBusy: !1,
    _successHandler: null,
    _errorHandler: null,
    ctor: function () {
        this._super("FacebookService")
    },
    init: function () {
        this._super();
        this.isAvailable() && (sdkbox.PluginFacebook.init(), sdkbox.PluginFacebook.setListener({
            onLogin: _.bind(function (a, b) {
                this._onLogin(a, b)
            }, this),
            onAPI: _.bind(this._onAPI, this),
            onSharedSuccess: _.bind(this._onSharedSuccess, this),
            onSharedFailed: _.bind(this._onSharedFailed, this),
            onSharedCancel: _.bind(this._onSharedCancel,
                this),
            onPermission: _.bind(this._onPermission, this),
            onFetchFriends: _.bind(this._onFetchFriends, this),
            onGetUserInfo: _.bind(this._onGetUserInfo, this)
        }))
    },
    isBusy: function () {
        return this._isBusy
    },
    isAvailable: function () {
        return cc.sys.isNative ? !0 : !1
    },
    isLoggedIn: function () {
        return this.isAvailable() ? sdkbox.PluginFacebook.isLoggedIn() : !1
    },
    getUserID: function () {
        return this.isAvailable() ? sdkbox.PluginFacebook.getUserID() : ""
    },
    getAccessToken: function () {
        return this.isAvailable() ? sdkbox.PluginFacebook.getAccessToken() :
            ""
    },
    login: function (a, b) {
        if (this.isBusy()) return !1;
        if (this.isAvailable()) return this._beginRequest(a, b), cc.log("Starting FB login"), sdkbox.PluginFacebook.login(["public_profile", "user_friends", "email"]), !0;
        cc.log("FB not available, login ignored");
        return !1
    },
    _beginRequest: function (a, b) {
        this._successHandler = a;
        this._errorHandler = b;
        this._isBusy = !0
    },
    _onLogin: function (a, b) {
        this._isBusy && (this._isBusy = !1, cc.log("FB login result: " + a + " " + b), a ? this._successHandler && this._successHandler() : this._errorHandler &&
            this._errorHandler(b))
    },
    _onAPI: function (a, b) {},
    _onSharedSuccess: function (a) {},
    _onSharedFailed: function (a) {},
    _onSharedCancel: function () {},
    _onPermission: function (a, b) {},
    _onFetchFriends: function (a, b) {},
    _onGetUserInfo: function (a) {}
});
jcore.service.FacebookService.getInstance = function () {
    this._instance || (this._instance = new jcore.service.FacebookService);
    return this._instance
};
jui = jui || {};
jui.util = jui.util || {};
jui.util.ko = jui.util.ko || {};
jui.util.isValidNumber = function (a) {
    return "undefined" !== typeof a && null != a && "number" === typeof a && a === a
};
jui.util.ko.subscribe = function (a, b, c) {
    b.call(c, a(), null);
    return a.subscribeChanged(b, c)
};
jui.util.bindWidgetVisibility = function (a, b) {
    b() ? a.show() : a.hide();
    return b.subscribe(function (a) {
        var b = !!a;
        jcore.util.isValidNumber(a) && (b = 0 < jcore.util.toNumber(a, -1));
        b ? this.show() : this.hide()
    }, a)
};
jui.util.getChildByNameRecursive = function (a, b) {
    if (!a) return cc.log("getChildByNameRecursive: Invalid sprite"), null;
    if (!b) return cc.log("getChildByNameRecursive: Invalid name"), null;
    var c = a.getChildren();
    if (!c) return null;
    for (var d = 0, f = c.length; d < f; d++) {
        var g = c[d];
        if (g._name === b || g.getName() === b) return g;
        g = jui.util.getChildByNameRecursive(g, b);
        if (null !== g) return g
    }
    return null
};
jui.util.scaleToSprite = function (a, b, c) {
    jui.util.scaleToSize(a, b.getContentSize(), c)
};
jui.util.scaleToSize = function (a, b, c, d) {
    b = jui.util.calculateScaleToSize(a.getContentSize(), b, c);
    d ? (a.width *= b.x, a.height *= b.y) : (a.scaleX = b.x, a.scaleY = b.y)
};
jui.util.calculateScaleToSize = function (a, b, c) {
    var d = b.width / a.width;
    a = b.height / a.height;
    c && (a = d = Math.min(d, a));
    return cc.p(d, a)
};
jui.util.calculateWidthOfChildren = function (a, b) {
    for (var c = 0, d = 0, f = a.getChildren(), g = 0, h = f.length; g < h; g++) {
        var m = f[g].getBoundingBox();
        if (b && f[g]._isjuiWidget) {
            var n = f[g].getMargin();
            m.x -= n.l;
            m.width += n.l + n.r;
            m.y -= n.b;
            m.height += n.b + n.t
        }
        c = Math.min(c, cc.rectGetMinX(m));
        d = Math.max(d, cc.rectGetMaxX(m))
    }
    return d - c
};
jui.util.calculateHeightOfChildren = function (a, b) {
    for (var c = 0, d = 0, f = a.getChildren(), g = 0, h = f.length; g < h; g++) {
        var m = f[g].getBoundingBox();
        if (b && f[g]._isjuiWidget) {
            var n = f[g].getMargin();
            m.x -= n.l;
            m.width += n.l + n.r;
            m.y -= n.b;
            m.height += n.b + n.t
        }
        c = Math.min(c, cc.rectGetMinY(m));
        d = Math.max(d, cc.rectGetMaxY(m))
    }
    return d - c
};
jui.util.calculateBoundsOfChildren = function (a, b) {
    for (var c = cc.rect(0, 0, 0, 0), d = a.getChildren(), f = 0, g = d.length; f < g; f++) {
        var h = d[f].getBoundingBox();
        if (b && d[f]._isjuiWidget) {
            var m = d[f].getMargin();
            h.x -= m.l;
            h.width += m.l + m.r;
            h.y -= m.b;
            h.height += m.b + m.t
        }
        c = cc.rectUnion(c, h)
    }
    return c
};
jui.util.replaceCCUINodeWidthJUIWidget = function (a, b, c, d) {
    var f = a.getLocalZOrder();
    b.setAnchorPoint(a.getAnchorPoint());
    b.setPosition(a.getPosition());
    b.setScale(a.getScale());
    b.setRotationX(a.getRotationX());
    b.setRotationY(a.getRotationY());
    c && b.setContentSize(cc.size(a.width, a.height));
    d && b.setOpacity(a.getOpacity());
    a.getParent().addChild(b, f);
    a.setVisible(!1)
};
jui.util.loadCCSNode = function (a) {
    cc.log("loading ui json... " + a);
    var b = ccs.load(a);
    (null == b || null == b.node) && cc.log("FAILED to load UI: " + a);
    return b.node
};
jui.util.rotateAroundPoint = function (a, b, c) {
    var d = cos(cc.DEGREES_TO_RADIANS(-c)) * (a.position.x - b.x) - sin(cc.DEGREES_TO_RADIANS(-c)) * (a.position.y - b.y) + b.x;
    b = sin(cc.DEGREES_TO_RADIANS(-c)) * (a.position.x - b.x) + cos(cc.DEGREES_TO_RADIANS(-c)) * (a.position.y - b.y) + b.y;
    a.position = cc.p(d, b);
    a.rotation = c
};
jui.util.createCCSScrollViewForWidget = function (a, b, c) {
    var d = new ccui.ScrollView;
    d.setDirection(ccui.ScrollView.DIR_VERTICAL);
    d.setTouchEnabled(!0);
    d.setClippingEnabled(!0);
    d.setContentSize(a, b);
    d.x = a / 2;
    d.y = 0;
    d.anchorX = 0.5;
    d.anchorY = 0;
    c && jui.util.setCCSScrollViewContentWidget(d, c);
    return d
};
jui.util.setCCSScrollViewContentWidget = function (a, b) {
    b.validateLayout && b.validateLayout(!0);
    b.anchorX = 0.5;
    b.x = a.width / 2;
    b.anchorY = 0;
    b.y = 0;
    null == b.getParent() && a.addChild(b, jui.WidgetLayers.UI);
    a.setInnerContainerSize(cc.size(b.width, b.height));
    a.height > b.height && (b.y = a.height, b.anchorY = 1)
};
jui.util.createFontDefinitionFromTextStyle = function (a) {
    a = {
        fontName: a.name,
        fontSize: jcore.util.orDefault(a.size, 14),
        textAlign: jcore.util.orDefault(a.horizontalAlignment, cc.TEXT_ALIGNMENT_CENTER),
        verticalAlign: jcore.util.orDefault(a.verticalAlignment, cc.VERTICAL_TEXT_ALIGNMENT_CENTER),
        fillStyle: jcore.util.orDefault(a.color, cc.color(255, 255, 255))
    };
    var b = new cc.FontDefinition;
    _.extend(b, a);
    return b
};
jui.util.isInstanceOfSprite = function (a) {
    return a instanceof cc.Sprite || a instanceof cc.Scale9Sprite || a instanceof jui.Widget || a instanceof jui.Panel || a._isjuiWidget
};
jui = jui || {};
jui.util = jui.util || {};
jui.util.asset = jui.util.asset || {};
jui.util.asset.getPath = function (a) {
    var b = a;
    if (a) {
        if (a.asset) {
            if (a.absolute) return a.asset;
            b = a.asset
        }
    } else return null;
    return "" === b ? null : jcore.util.isNotNull(a.assetFolder) ? a.assetFolder + b : b
};
jui.util.asset.createSpriteWithAsset = function (a) {
    return jcore.util.isNull(a) ? null : jcore.util.isNotNull(a.scale9) ? jui.util.sprite.createScale9(jui.util.asset.getPath(a), a.scale9) : jui.util.sprite.create(jui.util.asset.getPath(a))
};
jui.util.asset.createSpriteFrame = function (a) {
    if (!a) return null;
    a = jui.util.asset.getPath(a);
    var b = cc.spriteFrameCache.getSpriteFrame(a);
    if (!b) {
        var c = cc.textureCache.addImage(a),
            d = cc.rect(0, 0, 0, 0);
        c ? (d._size = c.getContentSize(), b = new cc.SpriteFrame(c, d)) : cc.log("failed to load texture: " + a)
    }
    return b
};
jui = jui || {};
jui.util = jui.util || {};
jui.util.sprite = jui.util.sprite || {};
jui.util.sprite.create = function (a) {
    if (jcore.util.isNull(a)) return cc.log("SpriteUtil.create: ERROR: empty sprite name!"), null;
    var b = cc.spriteFrameCache.getSpriteFrame(a);
    if (jcore.util.isNotNull(b)) return new cc.Sprite(b);
    b = cc.textureCache.addImage(a);
    return jcore.util.isNull(b) ? (cc.log("SpriteUtil.create: ERROR: texture not found! " + a), null) : new cc.Sprite(a)
};
jui.util.sprite.getFrame = function (a) {
    if (jcore.util.isNull(a)) return cc.log("SpriteUtil.getFrame: ERROR: empty sprite name!"), null;
    var b = cc.spriteFrameCache.getSpriteFrame(a);
    return jcore.util.isNotNull(b) ? (cc.log("SpriteUtil.getFrame: missing sprite frame!: " + a), null) : b
};
jui.util.sprite.createScale9 = function (a, b) {
    if (jcore.util.isNull(a)) return cc.log("SpriteUtil.createScale9: ERROR: empty sprite name!"), null;
    var c = null,
        c = cc.spriteFrameCache.getSpriteFrame(a);
    jcore.util.isNotNull(c) ? c = new cc.Scale9Sprite(c) : (c = cc.textureCache.addImage(a), jcore.util.isNull(c) ? (cc.log("SpriteUtil.createScale9: ERROR: texture not found! " + a), c = null) : c = new cc.Scale9Sprite(a));
    c && (b && c.setCapInsets) && c.setCapInsets(b);
    return c
};
jui.util.sprite.changeTexture = function (a, b) {
    if (!jcore.util.isNull(a))
        if (jcore.util.isNull(b)) cc.log("SpriteUtil.changeTexture: ERROR: empty sprite name!");
        else {
            var c = cc.spriteFrameCache.getSpriteFrame(b);
            jcore.util.isNotNull(c) ? a.setSpriteFrame(c) : (c = cc.textureCache.addImage(b), jcore.util.isNull(c) ? cc.log("SpriteUtil.changeTexture: ERROR: texture not found! " + b) : (a.setTexture(c), a.setTextureRect(c.getTextureRect())))
        }
};
jui.util.sprite.fromColor = function (a) {
    var b = jui.util.sprite.create(R.sprites.white);
    b.setColor(a);
    return b
};
jui = jui || {};
jui.util = jui.util || {};
jui.util.alignAndAnchorCenter = function (a, b) {
    if (!jcore.util.isNull(a) && (a.setAnchorPoint(cc.p(0.5, 0.5)), a.setCenterAlignment && a.setCenterAlignment(), jcore.util.isNull(b) && a.getParent && (b = a.getParent()), jcore.util.isNotNull(b))) {
        var c = b.getContentSize();
        a.setPosition(cc.p(c.width / 2, c.height / 2))
    }
};
jui.util.alignChildrenVertically = function (a, b, c) {
    return jui.util.alignItemsVertically(a.getChildren(), b, c)
};
jui.util.alignItemsVertically = function (a, b, c) {
    var d = 0,
        f = -b;
    a = a.getChildren();
    var g, h, m, n, p;
    if (a && 0 < a.length) {
        h = 0;
        for (g = a.length; h < g; h++)
            if (!c || a[h].isVisible()) f += a[h].height * a[h].scaleY + b, d = Math.max(d, a[h].width * a[h].scaleX);
        var u = f / 2;
        h = 0;
        for (g = a.length; h < g; h++)
            if (!c || a[h].isVisible()) p = a[h], n = p.height, m = p.scaleY, p.setAnchorPoint(cc.p(0, 0.5)), p.setPosition(0, u - n * m / 2), u -= n * m + b
    }
    return cc.size(d, f)
};
jui.util.alignChildrenHorizontally = function (a, b, c) {
    return jui.util.alignItemsHorizontally(a.getChildren(), b, c)
};
jui.util.alignItemsHorizontally = function (a, b, c) {
    var d = 0,
        f, g, h, m, n = 0 < b ? -b : 0;
    if (a && 0 < a.length) {
        var p = 0;
        for (f = a.length; p < f; p++)
            if (!c || a[p].isVisible()) n += a[p].width * a[p].scaleX, n += b, d = Math.max(d, a[p].height * a[p].scaleY);
        var u = 0 < b ? b : 0,
            p = 0;
        for (f = a.length; p < f; p++)
            if (!c || a[p].isVisible()) m = a[p], g = m.scaleX, h = m.width, m.setPosition(Math.floor(u + h * g / 2), m.y), u += Math.floor(h * g + b)
    }
    return cc.size(n, d)
};
jui.util.align = function (a, b, c) {
    if (a && a.getParent()) {
        var d = a.getParent().getContentSize(),
            f = a.getPosition(),
            g = f.x,
            f = f.y,
            h = a.getContentSize(),
            m = h.height,
            n = h = h.width,
            p = m;
        a.anchorX = 0.5;
        a.anchorY = 0.5;
        switch (b) {
        case jui.HorizontalAlignment.center:
            g = d.width / 2;
            break;
        case jui.HorizontalAlignment.left:
            g = h / 2;
            break;
        case jui.HorizontalAlignment.right:
            g = d.width - h / 2;
            break;
        case jui.HorizontalAlignment.stretch:
            n = d.width, g = n / 2
        }
        switch (c) {
        case jui.VerticalAlignment.center:
            f = d.height / 2;
            break;
        case jui.VerticalAlignment.bottom:
            f =
                m / 2;
            break;
        case jui.VerticalAlignment.top:
            f = d.height - m / 2;
            break;
        case jui.VerticalAlignment.stretch:
            p = d.height, f = p / 2
        }
        a.setPosition(cc.p(g, f));
        a.setContentSize(cc.size(n, p))
    }
};
jui.util.textHorizontalAlignmentToWidget = function (a) {
    switch (a) {
    case jui.TextHorizontalAlignment.left:
        return jui.HorizontalAlignment.left;
    case jui.TextHorizontalAlignment.right:
        return jui.HorizontalAlignment.right;
    default:
        return jui.HorizontalAlignment.center
    }
};
jui.util.textVerticalAlignmentToWidget = function (a) {
    switch (a) {
    case jui.TextVerticalAlignment.top:
        return jui.TextVerticalAlignment.top;
    case jui.TextVerticalAlignment.bottom:
        return jui.TextVerticalAlignment.bottom;
    default:
        return jui.TextVerticalAlignment.center
    }
};
jui.RootLayer = cc.LayerColor.extend({
    _uiroot_design_size: null,
    _lastScreenSize: cc.size(0, 0),
    _screenSizeDirty: 0,
    _root: null,
    _tint: null,
    _uiContentPanel: null,
    _uiroot: null,
    _uiTopBar: null,
    _uiBottomBar: null,
    _backgroundValue: null,
    _backgroundSprite: null,
    _resizeListeners: null,
    _disposableContext: null,
    _currentTheme: null,
    ctor: function (a) {
        this._super(a);
        this._uiroot_design_size = cc.size(jui.Globals.designWidth, jui.Globals.designHeight);
        this._resizeListeners = [];
        this._disposableContext = new jcore.DisposableContext;
        var b =
            this;
        cc.view.setResizeCallback && cc.view.setResizeCallback(function () {
            b._onScreenResized()
        });
        this._root = new jui.Panel;
        this._root.setName("root");
        this._root.setLayout(new jui.DockLayout);
        this.addChild(this._root, jui.WidgetLayers.Background);
        if (this._uiTopBar = this._onCreateTopBar()) this._uiTopBar.setName("uiTopBar"), this._uiTopBar.attachRootPanel(this), this._root.addChild(this._uiTopBar, jui.WidgetLayers.UI_HUD, this._getTopBarLayout());
        this._uiContentPanel = new jui.Panel;
        this._uiContentPanel.setName("uicontent");
        this._uiContentPanel.setLayout(new jui.DockLayout);
        this._root.addChild(this._uiContentPanel, jui.WidgetLayers.UI, new jui.DockLayoutProps(jui.DockLayoutEdge.fill));
        this._uiContentPanel.beginInitChildren();
        if (this._uiBottomBar = this._onCreateBottomBar()) this._uiBottomBar.setName("uiBottomBar"), this._uiContentPanel.addChild(this._uiBottomBar, jui.WidgetLayers.UI_HUD, new jui.DockLayoutProps(jui.DockLayoutEdge.bottom));
        this._uiroot = new jui.Panel;
        this._uiroot.setName("uiroot");
        this._uiContentPanel.addChild(this._uiroot,
            jui.WidgetLayers.UI, new jui.DockLayoutProps(jui.DockLayoutEdge.fill));
        this._uiContentPanel.endInitChildren();
        this._tint = new jui.TintLayer;
        this._tint.setName("tint");
        this._root.addChild(this._tint, jui.WidgetLayers.Tint, new jui.DockLayoutProps(jui.DockLayoutEdge.fill_all));
        jui.PopupManager.getInstance().attachRootPanel(this, this._tint);
        this._lastScreenSize = cc.size(0, 0);
        this._screenSizeDirty = 1
    },
    getRootNode: function () {
        return this._root
    },
    getUINode: function () {
        return this._uiroot
    },
    getTopBarNode: function () {
        return this._uiTopBar
    },
    getBottomBarNode: function () {
        return this._uiBottomBar
    },
    addScreenResizeListener: function (a) {
        this._resizeListeners.push(a)
    },
    getTheme: function () {
        return jcore.util.isNotNull(this._currentTheme) ? this._currentTheme : jui.Globals.defaultTheme
    },
    setTheme: function (a) {
        this._currentTheme = a
    },
    changeBackground: function (a, b) {
        var c = this._root;
        this._backgroundValue !== a && (this._backgroundValue = a, (this._backgroundAttachment = c.setBackground(this._backgroundValue)) && jcore.util.isNotNull(b) && this._backgroundAttachment.setMinScale(b),
            c.invalidateLayout())
    },
    tintBackground: function (a) {
        jcore.util.isNull(this._backgroundAttachment) || this._backgroundAttachment.getNode().runAction(cc.fadeTo(0.5, a.a))
    },
    onEnter: function () {
        this._super();
        this.scheduleUpdate()
    },
    onExit: function () {
        this._disposableContext.dispose()
    },
    update: function (a) {
        this._OnUpdate(a);
        a = cc.view.getFrameSize();
        a.width = Math.max(jui.Globals.minimumScreenWidth, a.width);
        a.height = Math.max(jui.Globals.minimumScreenHeight, a.height);
        this._screenSizeDirty += this._lastScreenSize.width !=
            a.width || this._lastScreenSize.height != a.height ? 1 : 0;
        if (0 < this._screenSizeDirty) {
            a = jui.Globals.updateScreenSize();
            console.log("frame size: " + a.width + " x " + a.height);
            var b = cc.p(a.width / 2, a.height / 2);
            this._lastScreenSize = cc.size(a.width, a.height);
            this._screenSizeDirty -= 1;
            this.setContentSize(a);
            this._root.setAnchorPoint(cc.p(0.5, 0.5));
            this._root.setPosition(b);
            this._root.setContentSize(a);
            this._tint.setAnchorPoint(cc.p(0.5, 0.5));
            this._tint.setPosition(b);
            this._tint.setContentSize(a);
            this._root.validateLayout(!0);
            _.each(this._resizeListeners, function (a) {
                a._onScreenResized.call(a)
            }, this)
        }
    },
    _OnUpdate: function (a) {},
    _onCreateTopBar: function () {
        return new jui.Panel(100, 30)
    },
    _getTopBarLayout: function () {
        var a = new jui.DockLayoutProps(jui.DockLayoutEdge.top);
        a.allowOverlay = !0;
        return a
    },
    _onCreateBottomBar: function () {
        return new jui.Panel(100, 100)
    },
    _onScreenResized: function () {
        this._screenSizeDirty += 2
    }
});
jui.TintLayer = cc.LayerColor.extend({
    _touchListener: null,
    _fade_delay: 0.3,
    _fade_opacity: 100,
    ctor: function (a) {
        a || (a = cc.color(0, 0, 0, this._fade_opacity));
        this._super(a);
        this.ignoreAnchorPointForPosition(!1);
        this.setVisible(!1)
    },
    show: function () {
        this.isVisible() || (this.setOpacity(0), this.setVisible(!0), this.runAction(cc.fadeTo(this._fade_delay, this._fade_opacity)))
    },
    hide: function () {
        this.setVisible(!1)
    },
    onEnter: function () {
        this._super();
        this._touchListener || (this._touchListener = cc.EventListener.create({
            event: cc.EventListener.TOUCH_ONE_BY_ONE,
            swallowTouches: !0,
            onTouchBegan: this.onTouchBegan.bind(this),
            onTouchMoved: this.onTouchMoved.bind(this),
            onTouchEnded: this.onTouchEnded.bind(this)
        }));
        cc.eventManager.addListener(this._touchListener, this)
    },
    onExit: function () {
        this.unscheduleUpdate();
        this._touchListener && (cc.eventManager.removeListener(this._touchListener), this._touchListener = null);
        this._super()
    },
    onTouchBegan: function (a, b) {
        this._hit = !1;
        if (this.isVisible()) {
            var c = a.getLocation();
            this.hitTest(c) && (this._hit = !0)
        }
        return !this._hit ? !1 : !0
    },
    onTouchMoved: function (a,
        b) {},
    onTouchEnded: function (a, b) {
        this._releaseUpEvent()
    },
    onTouchCancelled: function (a) {},
    _releaseUpEvent: function () {
        this._clickEventListener && this._clickEventListener(this)
    },
    addClickEventListener: function (a) {
        this._clickEventListener = a
    },
    hitTest: function (a) {
        var b = cc.rect(0, 0, this.getContentSize().width, this.getContentSize().height);
        return cc.rectContainsPoint(b, this.convertToNodeSpace(a))
    }
});
jui.WidgetAttachment = cc.Class.extend({
    _theNode: null,
    _theWidget: null,
    _depth: jui.WidgetLayers.content,
    _positionMode: jui.PositionMode.center,
    _sizeMode: jui.SizeMode.none,
    _sizeExpand: null,
    _offset: null,
    _visibilityMode: jui.VisibilityMode.visible,
    _baseScale: 1,
    _color: null,
    _animationType: jui.AnimationType.none,
    _animationTrigger: "animate",
    _animationTypeList: [],
    _defaultAnimationTriggerName: "animate",
    _opacity: null,
    _name: "",
    _blendMode: jui.BlendMode.normal,
    _animationEnabled: !0,
    ctor: function () {},
    setName: function (a) {
        this._name =
            a
    },
    getName: function () {
        return this._name
    },
    _initWithConfig: function (a) {
        a || (a = {});
        this._name = jcore.util.orDefault(a.name, "");
        this._depth = jcore.util.orDefault(a.depth, jui.WidgetLayers.UI);
        this._animationType = jcore.util.orDefault(a.animationType, jui.AnimationType.none);
        this._visibilityMode = jcore.util.orDefault(a.visibility, jui.VisibilityMode.visible);
        this._sizeMode = jcore.util.orDefault(a.sizeMode, jui.SizeMode.none);
        this._sizeExpand = jcore.util.orDefault(a.expand, null);
        this._offset = jcore.util.orDefault(a.offset,
            null);
        this._positionMode = jcore.util.orDefault(a.positionMode, jui.PositionMode.center);
        this._opacity = jcore.util.orDefault(a.opacity, 255);
        this._baseScale = jcore.util.orDefault(a.scale, 1);
        this._blendMode = jcore.util.orDefault(a.blendMode, jui.BlendMode.normal);
        this._color = jcore.util.orDefault(a.color, null);
        this._animationTrigger = jcore.util.orDefault(a.animationTrigger, this._defaultAnimationTriggerName);
        a.animationTypeList ? (this._animationTypeList = [].concat(a.animationTypeList), this._animationType = this._animationTypeList[0]) :
            this._animationTypeList = [this._animationType];
        !jcore.util.isDefined(a.sizeMode) && jcore.util.isNotNull(a.scale9) && (this._sizeMode = jui.SizeMode.stretch_resize)
    },
    getNode: function () {
        return this._theNode
    },
    _setNode: function (a) {
        this._theNode && (this._theNode._isjuiAttachment = !1, this._theNode.release(), this._theNode = null);
        if (this._theNode = a) this._theNode._isjuiAttachment = !0, this._theNode.retain()
    },
    getWidget: function () {
        return this._theWidget
    },
    getDepth: function () {
        return this._depth
    },
    getPositionMode: function () {
        return this._positionMode
    },
    getSizeMode: function () {
        return this._sizeMode
    },
    setSizeMode: function (a) {
        this._sizeMode = a
    },
    getAnimationType: function () {
        return this._animationType
    },
    getVisibilityMode: function () {
        return this._visibilityMode
    },
    setVisibilityMode: function (a) {
        this._visibilityMode = a
    },
    getAnimationEnabled: function () {
        return this._animationEnabled
    },
    setAnimationEnabled: function (a, b) {
        if (this._animationEnabled != a && (this._animationEnabled = a, b && this.getNode())) this.onUpdateVisualState("", this.getNode().getVisualState())
    },
    isAnimating: function () {
        return !this._theWidget ?
            !1 : this._theWidget.getVisualState() == this._animationTrigger
    },
    onAttach: function (a) {
        this._theWidget && (this._theWidget.release(), this._theWidget = null);
        (this._theWidget = a) && this._theWidget.retain()
    },
    onDetach: function () {
        this._theWidget && (this._theWidget.release(), this._theWidget = null);
        this._theWidget = null;
        this._setNode(null)
    },
    onResized: function () {},
    onUpdateVisualState: function (a, b) {}
});
jui.SpriteAttachment = jui.WidgetAttachment.extend({
    _max_scale: cc.p(1E5, 1E5),
    _min_scale: cc.p(1E-4, 1E-4),
    _frameAnimation: null,
    _animationList: null,
    _triggerParticleName: null,
    _default_rotation: 0,
    _loop: !1,
    _origFrame: null,
    ctor: function (a) {
        this._super();
        this._animationList = [];
        if (a)
            if (a instanceof cc.Texture2D && (a = new cc.Sprite(a)), jui.util.isInstanceOfSprite(a)) {
                this._setNode(a);
                a.setAnchorPoint(cc.p(0.5, 0.5));
                a.setCascadeOpacityEnabled(!0);
                a = this.getNode().getContentSize();
                this.getNode().x = a.width / 2;
                this.getNode().y =
                    a.height / 2;
                this._opacity = this.getNode().getOpacity();
                this.getNode().getRotationX() == this.getNode().getRotationY() ? this._default_rotation = this.getNode().getRotation() : this._default_rotation = cc.p(this.getNode().getRotationX(), this.getNode().getRotationY());
                a = this.getNode().getScaleX();
                var b = this.getNode().getScaleY();
                this._baseScale = a == b ? a : cc.p(a, b)
            } else "object" === typeof a && this._initWithConfig(a);
        this.getNode() && (this.getNode()._isjuiAttachment = !0)
    },
    _initWithConfig: function (a) {
        this._super(a);
        this._triggerParticleName =
            a.triggerParticleName;
        this._loop = jcore.util.orDefault(a.loop, !1);
        if (jcore.util.isNotNull(a.frames)) {
            for (var b = cc.Animation.create(), c = 0; c < a.frames.length; c++) {
                var d = jui.util.asset.createSpriteFrame({
                    assetFolder: a.assetFolder,
                    asset: a.frames[c]
                });
                b.addSpriteFrame(d)
            }
            c = jcore.util.orDefault(a.frame_delay, 0.1);
            jcore.util.isNotNull(a.frame_delay_min) && jcore.util.isNotNull(a.frame_delay_max) && (c = a.frame_delay_min + jcore.math.random(0, a.frame_delay_max - a.frame_delay_min));
            b.setRestoreOriginalFrame(!0);
            b.setDelayPerUnit(c);
            b.setLoops(jcore.util.orDefault(a.loops, 99999999));
            this._frameAnimation = new cc.Animate(b);
            this._frameAnimation.retain()
        }
        if (jcore.util.isNotNull(a.asset) || jcore.util.isNotNull(a.frames)) b = null, jcore.util.isNotNull(a.asset) ? b = jui.util.asset.createSpriteWithAsset(a) : (d = this._frameAnimation.getAnimation().getFrames()[0].getSpriteFrame(), b = new cc.Sprite(d)), b.setAnchorPoint(jcore.util.orDefault(a.anchor, cc.p(0.5, 0.5))), b.setCascadeOpacityEnabled(!0), this._setNode(b), jcore.util.isNotNull(a.position) ? b.setPosition(cc.p(a.position.x,
            a.position.y)) : (c = b.getContentSize(), b.setPosition(cc.p(c.width / 2, c.height / 2))), jcore.util.isNotNull(a.rotation) && (this._default_rotation = a.rotation, "object" === typeof this._default_rotation ? (b.setRotationX(this._default_rotation.x), b.setRotationY(this._default_rotation.y)) : b.setRotation(this._default_rotation)), jcore.util.isNotNull(a.opacity) && (this._opacity = a.opacity, b.setOpacity(this._opacity)), this.getNode().getSpriteFrame && (this._origFrame = this.getNode().getSpriteFrame());
        this.getNode() && this.getNode().setBlendFunc &&
            (this._blendMode == jui.BlendMode.normal ? (a = {
                src: cc.ONE,
                dst: cc.ONE_MINUS_SRC_ALPHA
            }, this.getNode().setBlendFunc(a)) : this._blendMode == jui.BlendMode.additive && (a = {
                src: cc.SRC_ALPHA,
                dst: cc.ONE
            }, this.getNode().setBlendFunc(a)));
        this.getNode() && this._color && this.getNode().setColor(this._color)
    },
    setMinScale: function (a) {
        this._min_scale = a
    },
    setMaxScale: function (a) {
        this._max_scale = a
    },
    onAttach: function (a) {
        this._super(a)
    },
    onResized: function () {
        this._updatePositionAndSize()
    },
    onUpdateVisualState: function (a, b) {
        var c =
            this.getNode(),
            d = b || "";
        if (null != c) switch (a != b ? this._clearAnimation() : this._clearFrameAnimation(), this.getAnimationEnabled() || (d = jui.VisualState.none), d) {
        case this._animationTrigger:
            for (var f = [], d = [], g = null, f = this._animationTypeList ? [].concat(this._animationTypeList) : [this._animationType], h = 0; h < f.length; h++) {
                var g = f[h],
                    m = {};
                g.params && (m = g.params);
                g.type && (g = g.type);
                var n = this._loop || m.loop;
                switch (g) {
                case jui.AnimationType.blinking:
                    var g = 2,
                        p = 4;
                    jcore.util.isNotNull(m.duration) && (g = m.duration);
                    jcore.util.isNotNull(m.count) &&
                        (p = m.count);
                    g = cc.blink(g, p);
                    jcore.util.isNotNull(m.delay) && 0 < m.delay && (g = cc.sequence(cc.delayTime(m.delay), g));
                    n && (g = cc.repeatForever(g));
                    d.push(g);
                    break;
                case jui.AnimationType.frames:
                    this._frameAnimation && d.push(this._frameAnimation);
                    break;
                case jui.AnimationType.fadeIn:
                    var u = c,
                        v = jcore.util.orDefault(m.fade_start, 1),
                        n = jcore.util.orDefault(m.fade_end, 255),
                        g = jcore.util.orDefault(m.fade_duration, 0.5),
                        p = jcore.util.orDefault(m.fade_delay, 1.6),
                        x = jcore.util.orDefault(m.fade_final, 1),
                        y = jcore.util.orDefault(m.scale_start,
                            0.0010),
                        z = jcore.util.orDefault(m.scale_end, 1),
                        t = jcore.util.orDefault(m.scale_duration, 0.5),
                        A = jcore.util.orDefault(m.scale_delay, 1.35),
                        m = jcore.util.orDefault(m.scale_end, 1.8);
                    u.setScale(y);
                    u.setOpacity(v);
                    d.push(cc.sequence(cc.callFunc(function () {
                        u.setScale(y);
                        u.setOpacity(v)
                    }, this, !0), cc.fadeTo(g, n), cc.callFunc(function () {
                        this._triggerParticleEffect()
                    }, this, !0), cc.delayTime(p), cc.fadeTo(0.65, x), cc.callFunc(function () {
                        u.setScale(y);
                        u.setOpacity(0);
                        this._stopParticleEffect()
                    }, this, !1)));
                    d.push(cc.sequence(cc.scaleTo(t,
                        z), cc.delayTime(A), cc.scaleTo(0.55, m)));
                    break;
                case jui.AnimationType.pulse:
                    g = 0.5;
                    x = c.getScaleX();
                    z = c.getScaleY();
                    t = 2;
                    p = 1.2;
                    jcore.util.isNotNull(m.duration) && (g = m.duration);
                    jcore.util.isNotNull(m.pulseCount) && (t = m.pulseCount);
                    jcore.util.isNotNull(m.pulseScale) && (p = m.pulseScale);
                    g = cc.repeat(cc.sequence(cc.scaleTo(g, x * p, z * p), cc.scaleTo(g, x, z)), t);
                    jcore.util.isNotNull(m.delay) && 0 < m.delay && (g = cc.sequence(cc.delayTime(m.delay), g));
                    n && (g = cc.repeatForever(g));
                    d.push(g);
                    break;
                case jui.AnimationType.jiggle:
                    g =
                        0.45;
                    p = 25;
                    jcore.util.isNotNull(m.duration) && (g = m.duration);
                    jcore.util.isNotNull(m.rotate) && (p = m.rotate);
                    g = cc.sequence(cc.rotateTo(g, p, 0), cc.rotateTo(g, -p), cc.rotateTo(g, 0));
                    jcore.util.isNotNull(m.delay) && 0 < m.delay && (g = cc.sequence(cc.delayTime(m.delay), g));
                    n && (g = cc.repeatForever(g));
                    d.push(g);
                    break;
                case jui.AnimationType.full_spin:
                    g = m.duration || 1.5;
                    p = m.angle || 1800;
                    g = cc.rotateBy(g, p);
                    jcore.util.isNotNull(m.delay) && 0 < m.delay && (g = cc.sequence(cc.delayTime(m.delay), g));
                    n && (g = cc.repeatForever(g));
                    d.push(g);
                    break;
                case jui.AnimationType.jump:
                    g = 1.2;
                    x = 12;
                    p = 3;
                    z = cc.p(c.getPositionX(), c.getPositionY());
                    p = 2;
                    jcore.util.isNotNull(m.duration) && (g = m.duration);
                    jcore.util.isNotNull(m.height) && (x = m.height);
                    jcore.util.isNotNull(m.count) && (p = m.count);
                    g = cc.jumpTo(g, z, x, p);
                    jcore.util.isNotNull(m.delay) && 0 < m.delay && (g = cc.sequence(cc.delayTime(m.delay), g));
                    n && (g = cc.repeatForever(g));
                    d.push(g);
                    break;
                case jui.AnimationType.fading:
                    g = 0.3;
                    x = g * jcore.util.isNotNull(this.reelIndex) ? this.reelIndex + 1 : 0;
                    z = 0;
                    t = 50;
                    A = 255;
                    p = 2;
                    jcore.util.isNotNull(m.delay) &&
                        (x = m.delay);
                    jcore.util.isNotNull(m.repeatDelay) && (z = m.repeatDelay);
                    jcore.util.isNotNull(m.duration) && (g = m.duration);
                    jcore.util.isNotNull(m.opacity_start) && (t = m.opacity_start);
                    jcore.util.isNotNull(m.opacity_end) && (A = m.opacity_end);
                    jcore.util.isNotNull(m.repeatCount) && (p = m.repeatCount);
                    g = 0 < z ? cc.sequence(cc.delayTime(x), cc.fadeTo(g, t), cc.fadeTo(g, A), cc.delayTime(z)) : 0 < x ? cc.sequence(cc.delayTime(x), cc.fadeTo(g, t), cc.fadeTo(g, A)) : cc.sequence(cc.fadeTo(g, t), cc.fadeTo(g, A));
                    1 < p && (g = cc.repeat(g, p));
                    n && (g =
                        cc.repeatForever(g));
                    d.push(g);
                    break;
                case jui.AnimationType.slide_down:
                    var p = c.getPosition(),
                        w = cc.p(p.x, p.y + c.getContentSize().height / 2 * c.getScaleY()),
                        g = 0.3,
                        x = 0,
                        u = c;
                    u.setPosition(w);
                    g = cc.sequence(cc.delayTime(x), cc.callFunc(function () {
                        u.setPosition(w)
                    }, this, !0), cc.moveTo(g, p));
                    d.push(g);
                    break;
                case jui.AnimationType.slide:
                    p = cc.p(0, 0);
                    w = c.getPosition();
                    z = g = 0.3;
                    jcore.util.isNotNull(m.offset) && (p = m.offset);
                    jcore.util.isNotNull(m.duration) && (g = m.duration);
                    p = cc.pAdd(c.getPosition(), p);
                    z = g;
                    jcore.util.isNotNull(m.startAtOffset) &&
                        (g = 1E-4, c.setPosition(p));
                    g = jcore.util.isNotNull(m.oneway) ? cc.moveTo(g, p) : cc.sequence(cc.moveTo(g, p), cc.moveTo(z, w));
                    jcore.util.isNotNull(m.delay) && 0 < m.delay && (g = cc.sequence(cc.delayTime(m.delay), g));
                    n && (g = cc.repeatForever(g));
                    d.push(g);
                    break;
                case jui.AnimationType.slide_arc:
                    p = cc.p(0, 0);
                    w = c.getPosition();
                    z = g = 0.3;
                    x = 0;
                    jcore.util.isNotNull(m.offset) && (p = m.offset);
                    jcore.util.isNotNull(m.duration) && (g = m.duration);
                    jcore.util.isNotNull(m.height) && (x = m.height);
                    p = cc.pAdd(c.getPosition(), p);
                    z = g;
                    jcore.util.isNotNull(m.startAtOffset) &&
                        (g = 1E-4, c.setPosition(p));
                    g = cc.sequence(cc.jumpTo(g, p.x, p.y, x, 1), cc.jumpTo(z, w.x, w.y, x, 1));
                    jcore.util.isNotNull(m.delay) && 0 < m.delay && (g = cc.sequence(cc.delayTime(m.delay), g));
                    n && (g = cc.repeatForever(g));
                    d.push(g);
                    break;
                case jui.AnimationType.simple_fadeIn:
                    g = 0.3;
                    u = c;
                    jcore.util.isNotNull(m.duration) && (g = m.duration);
                    g = cc.sequence(cc.callFunc(function () {
                        u.setOpacity(0)
                    }, this, !0), cc.fadeIn(g));
                    jcore.util.isNotNull(m.delay) && 0 < m.delay && (g = cc.sequence(cc.delayTime(m.delay), g));
                    n && (g = cc.repeatForever(g));
                    d.push(g);
                    break;
                case jui.AnimationType.simple_fadeOut:
                    g = 0.3;
                    u = c;
                    jcore.util.isNotNull(m.duration) && (g = m.duration);
                    g = cc.fadeOut(g);
                    jcore.util.isNotNull(m.delay) && 0 < m.delay && (g = cc.sequence(cc.delayTime(m.delay), g));
                    n && (g = cc.repeatForever(g));
                    d.push(g);
                    break;
                case jui.AnimationType.spline:
                    p = [cc.p(0, 0)], g = 0.3, u = c, jcore.util.isNotNull(m.duration) && (g = m.duration), jcore.util.isNotNull(m.points) && (p = m.points), g = cc.catmullRomTo(g, p), jcore.util.isNotNull(m.delay) && 0 < m.delay && (g = cc.sequence(cc.delayTime(m.delay), g)), n &&
                        (g = cc.repeatForever(g)), d.push(g)
                }
            }
            if (0 < d.length) {
                this.getVisibilityMode() == jui.VisibilityMode.duringAnimation ? d.unshift(cc.callFunc(_.bind(function () {
                    this.setVisible(!0)
                }, c))) : this.getVisibilityMode() == jui.VisibilityMode.hiddenDuringAnimation && d.unshift(cc.callFunc(_.bind(function () {
                    this.setVisible(!1)
                }, c)));
                for (f = 0; f < d.length; f++) c.runAction(d[f]), d[f].retain(), this._animationList.push(d[f])
            } else this.getVisibilityMode() == jui.VisibilityMode.duringAnimation ? c.setVisible(!0) : this.getVisibilityMode() ==
                jui.VisibilityMode.hiddenDuringAnimation && c.setVisible(!1);
            break;
        default:
            "object" === typeof this._default_rotation ? (c.setRotationX(this._default_rotation.x), c.setRotationY(this._default_rotation.y)) : c.setRotation(this._default_rotation);
            this._updatePositionAndSize();
            switch (this.getVisibilityMode()) {
            case jui.VisibilityMode.visible:
            case jui.VisibilityMode.hiddenDuringAnimation:
                c.setVisible(!0);
                break;
            case jui.VisibilityMode.hidden:
            case jui.VisibilityMode.duringAnimation:
                c.setVisible(!1)
            }
            jcore.util.isNotNull(this._opacity) ?
                c.setOpacity(this._opacity) : c.setOpacity(255);
            this._clearFrameAnimation();
            c.stopAllActions()
        }
    },
    _triggerParticleEffect: function () {
        var a = this.getWidget();
        if (a && this.getNode())
            if (this._triggerParticleName) {
                var b = a.findWidgetAttachmentByName(this._triggerParticleName);
                b && b instanceof jui.ParticleAttachment && b._triggerParticleEffect()
            } else
                for (var c = 0; c < a.getAttachmentCount(); c++)(b = a.getAttachmentAt(c)) && b instanceof jui.ParticleAttachment && b._triggerParticleEffect()
    },
    _stopParticleEffect: function () {
        var a =
            this.getWidget();
        if (a && this.getNode())
            if (this._triggerParticleName) {
                var b = a.findWidgetAttachmentByName(this._triggerParticleName);
                b && b instanceof jui.ParticleAttachment && b._stopParticleEffect()
            } else
                for (var c = 0; c < a.getAttachmentCount(); c++)(b = a.getAttachmentAt(c)) && b instanceof jui.ParticleAttachment && b._stopParticleEffect()
    },
    _clearAnimation: function (a) {
        for (var b = 0; b < this._animationList.length; b++) {
            for (var c = this._animationList[b], d = 200; !a && !c.isDone() && 0 < d;) c.step(Math.abs(c.getDuration() - c.getElapsed())),
                d--;
            c.release()
        }
        this._animationList = []
    },
    _clearFrameAnimation: function () {
        null != this._frameAnimation && (this._frameAnimation.stop(), this._origFrame && this.getNode().setSpriteFrame(this._origFrame))
    },
    _updatePositionAndSize: function () {
        var a = this.getWidget(),
            b = this.getNode();
        if (a && b) {
            var c = a.getContentSize(),
                a = b.getContentSize(),
                d = this.getPositionMode(),
                f = b.x,
                g = b.y,
                h = f,
                m = g,
                n = b.getAnchorPoint();
            (0.5 !== n.x || 0.5 !== n.y) && b.setAnchorPoint(cc.p(0.5, 0.5));
            switch (d) {
            case jui.PositionMode.manual:
                break;
            case jui.PositionMode.top:
                h =
                    Math.floor(c.width / 2);
                m = c.height - a.height / 2;
                break;
            case jui.PositionMode.bottom:
                h = Math.floor(c.width / 2);
                m = a.height / 2;
                break;
            case jui.PositionMode.right:
                h = Math.floor(c.width - a.width / 2);
                m = c.height / 2;
                break;
            case jui.PositionMode.left:
                h = Math.floor(a.width / 2);
                m = c.height / 2;
                break;
            default:
                h = Math.floor(c.width / 2), m = c.height / 2
            }
            jcore.util.isNotNull(this._offset) && (h += this._offset.x, m += this._offset.y);
            (h !== f || m !== g) && b.setPosition(cc.p(h, m));
            this._sizeExpand && (a.width -= this._sizeExpand.x, a.height -= this._sizeExpand.y);
            g = d = 1;
            g = this._max_scale;
            h = this._min_scale;
            f = c.width;
            c = c.height;
            d = Math.min(g.x, Math.max(h.x, f / a.width));
            g = Math.min(g.y, Math.max(h.y, c / a.height));
            isNaN(d) && (d = 1);
            isNaN(g) && (g = 1);
            switch (this.getSizeMode()) {
            case jui.SizeMode.stretch_resize:
                b.setContentSize(cc.size(f, c));
                break;
            case jui.SizeMode.stretch:
                g = d = Math.min(d, g);
            case jui.SizeMode.stretch_non_proportional:
                b.setScaleX(d);
                b.setScaleY(g);
                break;
            default:
                a = this._baseScale, jui.util.isValidNumber(a) && ("object" === typeof a ? (b.setScaleX(jcore.util.orDefault(a.x,
                    1)), b.setScaleY(jcore.util.orDefault(a.y, 1))) : (b.setScaleX(a), b.setScaleY(a)))
            }
            this._sizeModeDirty = !1
        }
    }
});
jui.ParticleAttachment = jui.WidgetAttachment.extend({
    _max_scale: cc.p(1E5, 1E5),
    _min_scale: cc.p(1E-4, 1E-4),
    _effectSys: null,
    _animationList: null,
    _particleAnimationType: jui.ParticleAnimationType.none,
    _positionMode: jui.PositionMode.center,
    _delay: null,
    _speed: null,
    _loop: !1,
    _duration: null,
    _path: null,
    ctor: function (a) {
        this._super();
        this._animationList = [];
        this._initWithConfig(a);
        this.getNode() && (this.getNode()._isjuiAttachment = !0, this.getNode().setAnchorPoint(cc.p(0.5, 0.5)), this.getNode().setPosition(cc.p(0, 0)))
    },
    _initWithConfig: function (a) {
        this._super(a);
        this._particleAnimationType = a.animationType || jui.ParticleAnimationType.none;
        var b = jui.PositionMode.center;
        this._particleAnimationType == jui.ParticleAnimationType.traceBorder && (b = jui.PositionMode.none);
        this._positionMode = a.positionMode || b;
        this._duration = jcore.util.orDefault(a.duration, null);
        this._delay = jcore.util.orDefault(a.delay, null);
        this._loop = jcore.util.orDefault(a.loop, !1);
        this._path = jcore.util.orDefault(a.path, null);
        this._speed = jcore.util.orDefault(a.speed,
            90);
        b = jui.util.asset.getPath(a);
        this._effectSys = new cc.ParticleSystem(b);
        a = jcore.util.orDefault(a.particlePositionType, cc.ParticleSystem.TYPE_RELATIVE);
        this._effectSys.setPositionType(a);
        this._effectSys.setAnchorPoint(cc.p(0.5, 0.5));
        this._effectSys.setPosition(cc.p(0, 0));
        this._effectSys.setDrawMode && this._effectSys.setDrawMode(cc.ParticleSystem.TEXTURE_MODE);
        this._setNode(this._effectSys)
    },
    getParticleAnimationType: function () {
        return this._particleAnimationType
    },
    setParticleAnimationType: function (a) {
        this._particleAnimationType =
            a
    },
    onAttach: function (a) {
        this._super(a)
    },
    onResized: function () {
        this._updatePositionAndSize()
    },
    onUpdateVisualState: function (a, b) {
        var c = this.getNode(),
            d = b || "";
        if (null != c) {
            this._clearAnimation(!0);
            var f = [];
            this.getAnimationEnabled() || (d = jui.VisualState.none);
            switch (d) {
            case this._animationTrigger:
                switch (this._particleAnimationType) {
                case jui.ParticleAnimationType.traceBorder:
                    var g = this._delay || 0,
                        h = this._speed || 90,
                        d = this._loop,
                        m = this.getWidget().getContentSize(),
                        n = jcore.util.orDefault(this._offset, cc.rect(-3,
                            -3, 0, 0)),
                        m = cc.rect(n.x, n.y, m.width + jcore.util.orDefault(n.width, 0), m.height + jcore.util.orDefault(n.height, 0)),
                        n = jcore.util.orDefault(this._path, ["lt", "rt", "rb", "lb", "lt"]),
                        p = [];
                    0 < g && p.push(cc.delayTime(d ? g / 2 : g));
                    p.push(cc.callFunc(function () {
                        this._triggerParticleEffect()
                    }, this, !0));
                    for (var u = cc.p(0, 0), v = 0; v < n.length; v++) {
                        var x = cc.p(0, 0),
                            y = n[v];
                        if ("string" === typeof y) switch (y) {
                        case "lt":
                            x = cc.p(cc.rectGetMinX(m), cc.rectGetMaxY(m));
                            break;
                        case "rt":
                            x = cc.p(cc.rectGetMaxX(m), cc.rectGetMaxY(m));
                            break;
                        case "lb":
                            x =
                                cc.p(cc.rectGetMinX(m), cc.rectGetMinY(m));
                            break;
                        case "rb":
                            x = cc.p(cc.rectGetMaxX(m), cc.rectGetMinY(m))
                        } else x = cc.p(y.x, y.y);
                        0 != v ? (u = cc.pDistance(u, x) / h, p.push(cc.moveTo(Math.abs(u), x.x, x.y))) : p.splice(0, 0, cc.moveTo(0.0010, x.x, x.y));
                        u = x
                    }
                    p.push(cc.callFunc(function () {
                        this._stopParticleEffect()
                    }, this, !0));
                    d && 0 < g && p.push(cc.delayTime(d ? g / 2 : g));
                    g = cc.sequence.apply(null, p);
                    d && (g = cc.repeatForever(g));
                    f.push(g);
                    break;
                case jui.ParticleAnimationType.normal:
                    g = null, g = jcore.util.isNotNull(this._delay) ? cc.sequence(cc.delayTime(this._delay),
                        cc.callFunc(function () {
                            this._triggerParticleEffect()
                        }, this, !0)) : cc.callFunc(function () {
                        this._triggerParticleEffect()
                    }, this, !0), jcore.util.isNotNull(this._duration) && (g = cc.sequence(g, cc.delayTime(this._duration), cc.callFunc(function () {
                        this._stopParticleEffect()
                    }, this, !0))), this._loop && (g = cc.repeatForever(g)), f.push(g)
                }
                this.getVisibilityMode() == jui.VisibilityMode.duringAnimation ? f.unshift(cc.callFunc(_.bind(function () {
                        this.setVisible(!0)
                    }, c))) : this.getVisibilityMode() == jui.VisibilityMode.hiddenDuringAnimation &&
                    f.unshift(cc.callFunc(_.bind(function () {
                        this.setVisible(!1)
                    }, c)));
                if (0 < f.length)
                    for (d = 0; d < f.length; d++) g = f[d], c.runAction(g), g.retain(), this._animationList.push(g);
                break;
            default:
                this._updatePositionAndSize();
                switch (this.getVisibilityMode()) {
                case jui.VisibilityMode.visible:
                case jui.VisibilityMode.hiddenDuringAnimation:
                    c.setVisible(!0);
                    break;
                case jui.VisibilityMode.hidden:
                case jui.VisibilityMode.duringAnimation:
                    c.setVisible(!1)
                }
                this._opacity ? c.setOpacity(this._opacity) : c.setOpacity(255);
                c.stopAllActions()
            }
        }
    },
    _triggerParticleEffect: function () {
        this.isAnimating() && this._effectSys && (this._effectSys.scheduleUpdateWithPriority(1), this._effectSys.resetSystem())
    },
    _stopParticleEffect: function () {
        this._effectSys && this._effectSys.stopSystem()
    },
    _clearAnimation: function (a) {
        for (var b = 0; b < this._animationList.length; b++) {
            for (var c = this._animationList[b]; !a && !c.isDone();) c.step(Math.abs(c.getDuration() - c.getElapsed()));
            c.release()
        }
        this._animationList = [];
        this._effectSys && (this._effectSys.stopAllActions(), this._effectSys.resetSystem(),
            this._effectSys.stopSystem())
    },
    _updatePositionAndSize: function () {
        if (this.getWidget() && this.getNode()) {
            var a = this.getWidget().getContentSize(),
                b = this.getNode().getContentSize();
            switch (this.getPositionMode()) {
            case jui.PositionMode.top:
                this.getNode().setAnchorPoint(cc.p(0.5, 0));
                this.getNode().setPosition(cc.pAdd(cc.p(Math.floor(a.width / 2), a.height), jcore.util.orDefault(this._offset, cc.p(0, 0))));
                break;
            case jui.PositionMode.bottom:
                this.getNode().setAnchorPoint(cc.p(0.5, 0));
                this.getNode().setPosition(cc.pAdd(cc.p(Math.floor(a.width /
                    2), 0), jcore.util.orDefault(this._offset, cc.p(0, 0))));
                break;
            case jui.PositionMode.right:
                this.getNode().setAnchorPoint(cc.p(0.5, 0.5));
                this.getNode().setPosition(cc.pAdd(cc.p(Math.floor(a.width - b.width / 2), b.height / 2), jcore.util.orDefault(this._offset, cc.p(0, 0))));
                break;
            default:
                this.getNode().setAnchorPoint(cc.p(0.5, 0.5)), this.getNode().setPosition(cc.pAdd(cc.p(Math.floor(a.width / 2), a.height / 2), jcore.util.orDefault(this._offset, cc.p(0, 0))))
            }
            this._sizeExpand && (b.width -= this._sizeExpand.x, b.height -= this._sizeExpand.y);
            var c = 1,
                d = 1,
                d = this._max_scale,
                f = this._min_scale,
                g = a.height,
                c = Math.min(d.x, Math.max(f.x, a.width / b.width)),
                d = Math.min(d.y, Math.max(f.y, g / b.height));
            isNaN(c) && (c = 1);
            isNaN(d) && (d = 1);
            switch (this.getSizeMode()) {
            case jui.SizeMode.stretch:
                a = Math.min(c, d);
                this.getNode().setScaleX(a);
                this.getNode().setScaleY(a);
                break;
            case jui.SizeMode.stretch_non_proportional:
                this.getNode().setScaleX(c);
                this.getNode().setScaleY(d);
                break;
            default:
                a = this._baseScale, jcore.util.isNotNull(a) && ("object" === typeof a ? (this.getNode().setScaleX(jcore.util.orDefault(a.x,
                    1)), this.getNode().setScaleY(jcore.util.orDefault(a.y, 1))) : (this.getNode().setScaleX(a), this.getNode().setScaleY(a)))
            }
            this._sizeModeDirty = !1
        }
    }
});
jui.Widget = cc.Node.extend({
    DEFAULT_FADEIN_DELAY: 0.5,
    DEFAULT_SCALEIN_DELAY: 0.3,
    layout_properties: null,
    on: {
        clicked: null
    },
    _currentTheme: null,
    _currentTextStyle: null,
    _isjuiWidget: !0,
    _isjuiAttachment: !1,
    _islayout_valid: !1,
    _contentNode: null,
    _contentPadding: new jui.Margin,
    _contentMaxSize: null,
    _margin: new jui.Margin,
    _attachments: [],
    _disposableContext: null,
    _horizontalAlignment: jui.HorizontalAlignment.none,
    _verticalAlignment: jui.VerticalAlignment.none,
    _visualState: jui.VisualState.visible,
    _enableVisualStateChangeOnVisibility: !0,
    _backgroundAttachment: null,
    _enabled: !0,
    _touchEnabled: !1,
    _touchSwallow: !1,
    _hit: !1,
    _touchListener: null,
    _highlight: !1,
    _isShowing: !0,
    _touchMoveSensitivity: 16,
    _touchEventListener: null,
    _touchEventCallback: null,
    _clickEventListener: null,
    _touchBeganPosition: null,
    _touchMovePosition: null,
    _touchEndPosition: null,
    ctor: function (a, b) {
        cc.Node.prototype.ctor.call(this);
        this.on = {};
        this.defineWidgeEvent("clicked");
        this._islayout_valid = !0;
        this._touchBeganPosition = cc.p(0, 0);
        this._touchMovePosition = cc.p(0, 0);
        this._touchEndPosition =
            cc.p(0, 0);
        this._attachments = [];
        this._disposableContext = new jcore.DisposableContext;
        jcore.util.isNotNull(a) && jcore.util.isNotNull(b) && this.setContentSize(cc.size(a, b));
        this._initContentNode();
        this._updateContentPositionAndSize();
        this.setCascadeOpacityEnabled(!0)
    },
    getTheme: function () {
        return jcore.util.isNotNull(this._currentTheme) ? this._currentTheme : jui.Globals.defaultTheme
    },
    setTheme: function (a) {
        this._currentTheme = a
    },
    getTextStyle: function () {
        return jcore.util.isNotNull(this._currentTextStyle) ? this._currentTextStyle :
            this.getTheme().textStyle
    },
    setTextStyle: function (a) {
        this._currentTextStyle = a
    },
    defineWidgeEvent: function (a) {
        this.on[a] = new signals.Signal;
        return this.on[a]
    },
    show: function () {
        if (!this.isVisible() || !this._isShowing) this.onHandleShow()
    },
    hide: function () {
        if (this.isVisible() && this._isShowing) this.onHandleHide()
    },
    isShowing: function () {
        return this.isVisible() && this._isShowing
    },
    isHidden: function () {
        return !this.isShowing()
    },
    showDelayed: function (a) {
        a = jcore.util.orDefault(a, 0.5);
        this.runAction(cc.sequence(cc.delayTime(a),
            cc.callFunc(_.bind(function () {
                this.show()
            }, this))))
    },
    hideDelayed: function (a) {
        a = jcore.util.orDefault(a, 0.5);
        this.runAction(cc.sequence(cc.delayTime(a), cc.callFunc(_.bind(function () {
            this.hide()
        }, this))))
    },
    onHandleShow: function () {
        this.setVisible(!0);
        0 >= this.getOpacity() && this.setOpacity(255);
        this.onShowComplete()
    },
    onHandleHide: function () {
        this.setVisible(!1);
        this.onHideComplete()
    },
    onShowComplete: function () {
        0 >= this.getOpacity() && this.setOpacity(255)
    },
    onHiding: function () {},
    onHideComplete: function () {},
    fadeIn: function (a) {
        this._isShowing = !0;
        this.setVisible(!0);
        this.setOpacity(0);
        this.runAction(cc.sequence(cc.fadeIn(jcore.util.orDefault(a, this.DEFAULT_FADEIN_DELAY)), cc.callFunc(this.onShowComplete, this)))
    },
    fadeOut: function (a) {
        this._isShowing && (this.onHiding(), this._isShowing = !1, this.runAction(cc.sequence(cc.fadeOut(jcore.util.orDefault(a, this.DEFAULT_FADEIN_DELAY)), cc.callFunc(_.bind(function () {
            this.setVisible(!1);
            this.onHideComplete()
        }, this)))))
    },
    fadeOutAndRemove: function (a) {
        this._isShowing && (this.onHiding(), this._isShowing = !1, this.runAction(cc.sequence(cc.fadeOut(jcore.util.orDefault(a,
            this.DEFAULT_FADEIN_DELAY)), cc.callFunc(_.bind(function () {
            this.setVisible(!1);
            var a = this._getAncensterWidget(this);
            null != a && a.removeWidgetChild && a.removeWidgetChild(this)
        }, this)))))
    },
    scaleIn: function (a) {
        this._isShowing = !0;
        this.setVisible(!0);
        var b = this.getScale();
        this.setScale(0.0010);
        this.runAction(cc.sequence(cc.scaleTo(void 0 !== a ? a : this.DEFAULT_SCALEIN_DELAY, b), cc.callFunc(_.bind(function () {
            this.onShowComplete()
        }, this))))
    },
    scaleOut: function (a) {
        this._isShowing = !1;
        this.runAction(cc.sequence(cc.scaleTo(void 0 !==
            a ? a : this.DEFAULT_SCALEIN_DELAY, 0.0010), cc.callFunc(_.bind(function () {
            this.setVisible(!1)
        }, this))))
    },
    slideOut: function (a, b, c) {
        this._isShowing && (b = jcore.util.orDefault(b, -(this.width / 2)), c = jcore.util.orDefault(c, this.height / 2), this.onHiding(), this._isShowing = !1, this.runAction(cc.sequence(cc.moveTo(jcore.util.orDefault(a, this.DEFAULT_FADEIN_DELAY), b, c), cc.hide(), cc.callFunc(_.bind(this.onHideComplete, this)))))
    },
    findChildByName: function (a) {
        return jui.util.getChildByNameRecursive(this, a)
    },
    setVisible: function (a) {
        var b =
            this.isVisible();
        if (b && this._isShowing) this.onHiding();
        this._isShowing = !0 === a;
        b !== a && (cc.Node.prototype.setVisible.call(this, a), this._enableVisualStateChangeOnVisibility && this.setVisualState(a ? jui.VisualState.visible : jui.VisualState.hidden), this.invalidateLayout(!1, a ? jui.Layout.InvalidateType.show : jui.Layout.InvalidateType.hide))
    },
    getHorizontalAlignment: function () {
        return this._horizontalAlignment
    },
    setHorizontalAlignment: function (a) {
        this._horizontalAlignment !== a && (this._horizontalAlignment = a, this.invalidateLayout(!1,
            jui.Layout.InvalidateType.alignment))
    },
    getVerticalAlignment: function () {
        return this._verticalAlignment
    },
    setVerticalAlignment: function (a) {
        this._verticalAlignment !== a && (this._verticalAlignment = a, this.invalidateLayout(!1, jui.Layout.InvalidateType.alignment))
    },
    setCenterAlignment: function () {
        if (this._horizontalAlignment !== jui.HorizontalAlignment.center || this._verticalAlignment !== jui.VerticalAlignment.center) this._horizontalAlignment = jui.HorizontalAlignment.center, this._verticalAlignment = jui.VerticalAlignment.center,
            this.invalidateLayout(!1, jui.Layout.InvalidateType.alignment)
    },
    getPadding: function () {
        return this._contentPadding
    },
    setPadding: function (a) {
        this._contentPadding = new jui.Margin(a);
        this._updateContentPositionAndSize()
    },
    hasPadding: function () {
        return 0 < this._contentPadding.l || 0 < this._contentPadding.r || 0 < this._contentPadding.t || 0 < this._contentPadding.b
    },
    getMargin: function () {
        return this._margin
    },
    setMargin: function (a) {
        this._margin = new jui.Margin(a);
        this.invalidateLayout(!1, jui.Layout.InvalidateType.position |
            jui.Layout.InvalidateType.size)
    },
    getMarginLeft: function () {
        return this._margin.l
    },
    getMarginRight: function () {
        return this._margin.r
    },
    getMarginTop: function () {
        return this._margin.t
    },
    getMarginBottom: function () {
        return this._margin.b
    },
    getContentNode: function () {
        return this._contentNode
    },
    hasContentNode: function () {
        return jcore.util.isNotNull(this._contentNode)
    },
    addWidgetAttachment: function (a, b, c) {
        b = jcore.util.orDefault(b, a.getDepth());
        jcore.util.isNull(b) && (b = jui.WidgetLayers.background);
        var d = a.getNode();
        d &&
            this.addChild(d, b);
        this._attachments.push(a);
        a.onAttach(this);
        a.onUpdateVisualState(this._visualState, this._visualState);
        c || this.invalidateLayout(!1, jui.Layout.InvalidateType.addChild)
    },
    removeWidgetAttachment: function (a, b, c) {
        var d = a.getNode();
        d && this.removeChild(d, b);
        b = this._attachments.indexOf(a); - 1 < b && this._attachments.splice(b, 1);
        a.onDetach();
        c || this.invalidateLayout(!1, jui.Layout.InvalidateType.removeChild)
    },
    removeAllWidgetAttachments: function (a) {
        for (var b = this._attachments.slice(), c = 0; c < b.length; c++) this.removeWidgetAttachment(b[c],
            a)
    },
    addChild: function (a, b) {
        jcore.util.isNull(a) ? cc.log("ERROR!: attempt to add null child.") : cc.Node.prototype.addChild.call(this, a, jcore.util.orDefault(b, 0), 1)
    },
    removeChild: function (a, b) {
        jcore.util.isNull(a) ? cc.log("ERROR!: attempt to remove null child.") : cc.Node.prototype.removeChild.call(this, a, b)
    },
    findWidgetAttachmentByName: function (a) {
        for (var b = 0; b < this._attachments.length; b++)
            if (this._attachments[b].getName() === a) return this._attachments[b];
        return null
    },
    getAttachmentCount: function () {
        return this._attachments.length
    },
    getAttachmentAt: function (a) {
        return this._attachments[a]
    },
    getContentNodeSize: function () {
        return this._getContentNodeSize()
    },
    getContentSizeWithMargins: function () {
        var a = this.getContentSize(),
            b = Math.max(0, a.width + this._margin.l + this._margin.r),
            a = Math.max(0, a.height + this._margin.t + this._margin.b);
        return cc.size(b, a)
    },
    getVisualState: function () {
        return this._visualState
    },
    setVisualState: function (a, b) {
        if (a == this._visualState) b && this._onUpdateVisualState(a, a);
        else {
            var c = this._visualState;
            this._visualState = a;
            this._onUpdateVisualState(c, a)
        }
    },
    setEnableVisualStateChangeOnVisibility: function (a) {
        this._enableVisualStateChangeOnVisibility = a
    },
    getEnableVisualStateChangeOnVisibility: function () {
        return this._enableVisualStateChangeOnVisibility
    },
    _initContentNode: function () {},
    _getContentNodeSize: function () {
        var a = this.getContentSize(),
            b = a.width,
            c = a.height;
        jcore.util.isNotNull(this._contentPadding) && (b = Math.max(0, a.width - this._contentPadding.l - this._contentPadding.r), c = Math.max(0, a.height - this._contentPadding.t - this._contentPadding.b));
        return cc.size(b, c)
    },
    _isAncestorsEnabled: function () {
        var a = this._getAncensterWidget(this);
        return null == a ? !0 : a && !a.isEnabled() ? !1 : a._isAncestorsEnabled()
    },
    _getAncensterWidget: function (a) {
        if (null == a) return null;
        a = a.getParent();
        return null == a ? null : a instanceof jui.Widget ? a : this._getAncensterWidget(a.getParent())
    },
    _isAncestorsVisible: function (a) {
        return null == a ? !0 : (a = a.getParent()) && !a.isVisible() ? !1 : this._isAncestorsVisible(a)
    },
    _onUpdateVisualState: function (a, b) {
        this.onUpdateVisualState(a, b);
        for (var c =
                0; c < this._attachments.length; c++) this._attachments[c].onUpdateVisualState(a, b)
    },
    onUpdateVisualState: function (a, b) {},
    getCenterPosition: function () {
        var a = this.getContentSize();
        return cc.p(a.width / 2, a.height / 2)
    },
    setContentSizeToChildrenWidthAndHeight: function () {
        var a = jui.util.calculateBoundsOfChildren(this, !0);
        this.hasPadding() && (a.width += this._contentPadding.l + this._contentPadding.r, a.height += this._contentPadding.t + this._contentPadding.b);
        this.setContentSize(cc.size(a.width, a.height))
    },
    setContentSizeToChildrenWidth: function () {
        var a =
            cc.size(jui.util.calculateWidthOfChildren(this), this.getContentSize().height);
        this.hasPadding() && (a.width += this._contentPadding.l + this._contentPadding.r);
        this.setContentSize(a)
    },
    setContentSizeToChildrenHeight: function () {
        var a = cc.size(this.getContentSize().width, jui.util.calculateHeightOfChildren(this));
        this.hasPadding() && (a.height += this._contentPadding.t + this._contentPadding.b);
        this.setContentSize(a)
    },
    setContentSize: function (a, b) {
        var c = cc.size(this.width, this.height);
        a = jcore.util.isNotNull(a) && jcore.util.isNotNull(b) ?
            cc.size(a, b) : jcore.util.orDefault(a, cc.size(0, 0));
        cc.Node.prototype.setContentSize.call(this, jcore.util.orDefault(a.width, 0), jcore.util.orDefault(a.height, 0));
        if (c.width != a.width || c.height != a.height) this._updateContentPositionAndSize(), this.invalidateLayout(!1, jui.Layout.InvalidateType.size)
    },
    setContentNode: function (a, b, c) {
        b = jcore.util.orDefault(b, !0);
        this._contentMaxSize = jcore.util.orDefault(c, null);
        this._contentNode && this.removeChild(this._contentNode);
        if (this._contentNode = a) this.addChild(this._contentNode,
            jui.WidgetLayers.UI), b ? (a = this.getPadding(), b = this._contentNode.getContentSize(), b.width += a.l + a.r, b.height += a.t + a.b, this.setContentSize(b)) : this._updateContentPositionAndSize()
    },
    invalidateLayout: function (a, b) {
        b = jcore.util.orDefault(b, jui.Layout.InvalidateType.any);
        if ((a || this._islayout_valid) && (a || this._islayout_valid)) {
            this._islayout_valid = !1;
            a || jui.LayoutManager.getInstance().enqueueLayout(this);
            var c = this.getParent();
            c && c._isjuiWidget && (a || c._islayout_valid) ? c._invalidateParentLayout(this, a, b) :
                a && this.validateLayout(a)
        }
    },
    _invalidateParentLayout: function (a, b, c) {
        this.invalidateLayout(b, jui.Layout.InvalidateType.any)
    },
    validateLayout: function (a) {
        if (a || !this._islayout_valid) this._islayout_valid = !0, this.onValidateLayout()
    },
    onValidateLayout: function () {
        for (var a = 0; a < this._attachments.length; a++) this._attachments[a].onResized()
    },
    _updateContentPositionAndSize: function () {
        if (!jcore.util.isNull(this._contentNode) && this._contentNode.getParent() === this) {
            var a = this._getContentNodeSize();
            this._contentNode.setAnchorPoint(cc.p(0.5,
                0.5));
            var b = a.width / 2 + this._contentPadding.l,
                c = a.height / 2 + this._contentPadding.b,
                d = this._contentNode.getPosition();
            (d = d.x != b || d.y != c) && this._contentNode.setPosition(cc.p(b, c));
            this._contentMaxSize && (a.width = Math.min(a.width, this._contentMaxSize.width), a.height = Math.min(a.height, this._contentMaxSize.height));
            b = this._contentNode.getContentSize();
            (b = b.width != a.width || b.height != a.height) && this._contentNode.setContentSize(cc.size(a.width, a.height));
            this._contentNode._isjuiWidget && (d || b) && this._contentNode.validateLayout(!0)
        }
    },
    setBackgroundSprite: function (a, b, c) {
        return this.setBackground(a, b, c)
    },
    setBackground: function (a, b, c) {
        c = jcore.util.orDefault(c, jui.SizeMode.stretch_non_proportional);
        var d = this._backgroundAttachment,
            f = this._backgroundAttachment = null;
        a && ("string" === typeof a && (a = jui.util.sprite.create(a)), f = new jui.SpriteAttachment(a), f.setName("background"), f.setSizeMode(c), this._backgroundAttachment = f, this.addWidgetAttachment(f, jui.WidgetLayers.background, !0), !0 === b && this.setContentSize(f.getNode().getContentSize()));
        d && this.removeWidgetAttachment(d, !0, !0);
        return f
    },
    setEnabled: function (a) {
        this._enabled = a
    },
    isEnabled: function () {
        return this._enabled
    },
    isTouchEnabled: function () {
        return this._touchEnabled
    },
    isHighlighted: function () {
        return this._highlight
    },
    setHighlighted: function (a) {
        a !== this._highlight && (this._highlight = a)
    },
    setTouchEnabled: function (a, b) {
        this._touchEnabled === a && this._touchSwallow === b || (this._touchEnabled = a, this._touchSwallow = b, this._touchEnabled ? (this._touchListener && (cc.eventManager.removeListener(this._touchListener),
            this._touchListener = null), this._touchListener || (this._touchListener = cc.EventListener.create({
            event: cc.EventListener.TOUCH_ONE_BY_ONE,
            swallowTouches: jcore.util.orDefault(this._touchSwallow, !1),
            onTouchBegan: this.onTouchBegan.bind(this),
            onTouchMoved: this.onTouchMoved.bind(this),
            onTouchEnded: this.onTouchEnded.bind(this)
        })), cc.eventManager.addListener(this._touchListener, this)) : cc.eventManager.removeListener(this._touchListener))
    },
    onEnter: function () {
        cc.Node.prototype.onEnter.call(this);
        if (!cc.sys.isNative) {
            var a =
                this._touchListener;
            a && (!a._isRegistered() && this._touchEnabled) && cc.eventManager.addListener(a, this)
        }
        this.setVisualState(this.getVisualState(), !0)
    },
    onExit: function () {
        this.unscheduleUpdate();
        this._disposableContext.dispose();
        cc.Node.prototype.onExit.call(this)
    },
    getTouchBeganPosition: function () {
        return this._touchBeganPosition
    },
    getTouchMovePosition: function () {
        return this._touchMovePosition
    },
    getTouchEndPosition: function () {
        return this._touchEndPosition
    },
    onTouchBegan: function (a, b) {
        this._hit = !1;
        if (this.isVisible() &&
            this.isEnabled() && this._isAncestorsEnabled() && this._isAncestorsVisible(this)) {
            var c = a.getLocation();
            this._touchBeganPosition.x = c.x;
            this._touchBeganPosition.y = c.y;
            this.hitTest(this._touchBeganPosition) && (this._hit = !0)
        }
        if (!this._hit) return !1;
        this.setHighlighted(!0);
        this._pushDownEvent();
        return !0
    },
    onTouchMoved: function (a, b) {
        var c = a.getLocation();
        this._touchMovePosition.x = c.x;
        this._touchMovePosition.y = c.y;
        Math.abs(this._touchBeganPosition.x - this._touchMovePosition.x) > this._touchMoveSensitivity || Math.abs(this._touchBeganPosition.y -
            this._touchMovePosition.y) > this._touchMoveSensitivity ? this.setHighlighted(!1) : this.setHighlighted(this.hitTest(c));
        this._moveEvent()
    },
    onTouchEnded: function (a, b) {
        var c = a.getLocation();
        this._touchEndPosition.x = c.x;
        this._touchEndPosition.y = c.y;
        c = this._highlight;
        this.setHighlighted(!1);
        c ? this._releaseUpEvent() : this._cancelUpEvent()
    },
    onTouchCancelled: function (a) {
        this.setHighlighted(!1);
        this._cancelUpEvent()
    },
    _pushDownEvent: function () {
        this._touchEventCallback && this._touchEventCallback(this, ccui.Widget.TOUCH_BEGAN);
        this._touchEventListener && this._touchEventSelector && this._touchEventSelector.call(this._touchEventListener, this, ccui.Widget.TOUCH_BEGAN)
    },
    _moveEvent: function () {
        this._touchEventCallback && this._touchEventCallback(this, ccui.Widget.TOUCH_MOVED);
        this._touchEventListener && this._touchEventSelector && this._touchEventSelector.call(this._touchEventListener, this, ccui.Widget.TOUCH_MOVED)
    },
    _releaseUpEvent: function () {
        this._touchEventCallback && this._touchEventCallback(this, ccui.Widget.TOUCH_ENDED);
        this._touchEventListener &&
            this._touchEventSelector && this._touchEventSelector.call(this._touchEventListener, this, ccui.Widget.TOUCH_ENDED);
        this._clickEventListener && this._clickEventListener(this);
        this.on.clicked.dispatch(this)
    },
    _cancelUpEvent: function () {
        this._touchEventCallback && this._touchEventCallback(this, ccui.Widget.TOUCH_CANCELED);
        this._touchEventListener && this._touchEventSelector && this._touchEventSelector.call(this._touchEventListener, this, ccui.Widget.TOUCH_CANCELED)
    },
    addTouchEventListener: function (a, b) {
        void 0 === b ? this._touchEventCallback =
            a : (this._touchEventSelector = a, this._touchEventListener = b)
    },
    addClickEventListener: function (a) {
        this._clickEventListener = a
    },
    bindClickEventListener: function (a, b) {
        jcore.util.isNull(b) ? this._clickEventListener = a : this._clickEventListener = _.bind(a, b)
    },
    hitTest: function (a) {
        var b = cc.rect(0, 0, this.getContentSize().width, this.getContentSize().height);
        return cc.rectContainsPoint(b, this.convertToNodeSpace(a))
    },
    removeAllChildren: function (a) {
        this.removeAllWidgetAttachments(a);
        this._contentNode = null;
        cc.Node.prototype.removeAllChildren.call(this,
            a);
        this.invalidateLayout(!0, jui.Layout.InvalidateType.removeChild)
    }
});
jui.Widget.configureAttachmentsWithConfig = function (a, b, c, d) {
    if (jcore.util.isNull(a)) cc.log("configureAttachmentsWithConfig: null widget!");
    else if (jcore.util.isNull(d)) cc.log("configureAttachmentsWithConfig: null config item!");
    else {
        a.beginInitChildren && a.beginInitChildren();
        if (d.sprites) {
            for (var f = 0; f < d.sprites.length; f++) {
                var g = d.sprites[f];
                d.assetFolder && !g.assetFolder && (g.assetFolder = d.assetFolder);
                var h = new jui.SpriteAttachment(g);
                a.addWidgetAttachment(h);
                jcore.util.isDefined(g.sizeWidgetToAttachment) &&
                    g.sizeWidgetToAttachment ? (g = h.getNode().getContentSize(), b = g.width, c = g.height) : 0 == f && 1 == a.getAttachmentCount() && (g = h.getNode().getContentSize(), b = jcore.util.isNotNull(b) ? b : g.width, c = jcore.util.isNotNull(c) ? c : g.height)
            }
            jcore.util.isDefined(d.sizeWidgetToChildren) ? a.setContentSizeToChildrenWidthAndHeight() : jcore.util.isNotNull(b) && jcore.util.isNotNull(c) && a.setContentSize(cc.size(b, c))
        } else d.asset && (h = new jui.SpriteAttachment(d), a.addWidgetAttachment(h), 1 === a.getAttachmentCount() && (g = h.getNode().getContentSize(),
            b = jcore.util.isNotNull(b) ? b : g.width, c = jcore.util.isNotNull(c) ? c : g.height), jcore.util.isNotNull(b) && jcore.util.isNotNull(c) && a.setContentSize(cc.size(b, c)));
        if (jcore.util.isNotNull(d.particle)) d.assetFolder && !d.particle.assetFolder && (d.particle.assetFolder = d.assetFolder), h = new jui.ParticleAttachment(d.particle), a.addWidgetAttachment(h);
        else if (jcore.util.isNotNull(d.particles))
            for (f = 0; f < d.particles.length; f++) b = d.particles[f], d.assetFolder && !b.assetFolder && (b.assetFolder = d.assetFolder), h = new jui.ParticleAttachment(b),
                a.addWidgetAttachment(h);
        jcore.util.isNotNull(d.padding) && a.setPadding(d.padding);
        jcore.util.isNotNull(d.margin) && a.setMargin(d.margin);
        jcore.util.isNotNull(d.verticalAlignment) && a.setVerticalAlignment(d.verticalAlignment);
        jcore.util.isNotNull(d.horizontalAlignment) && a.setVerticalAlignment(d.horizontalAlignment);
        jcore.util.isNotNull(d.textStyle) && a.setTextStyle(d.textStyle);
        a.endInitChildren && a.endInitChildren();
        return a
    }
};
jui.TouchListenerNode = cc.Node.extend({
    _listener: null,
    ctor: function (a) {
        this._super();
        a.getTargetNode().addChild(this);
        this._listener = a
    },
    onEnter: function () {
        this._super();
        null != this._listener && this._listener._onTargetNodeOnEnter()
    }
});
jui.TouchListener = cc.Class.extend({
    _targetNode: null,
    _enabled: !0,
    _touchEnabled: !1,
    _hit: !1,
    _touchListener: null,
    _highlight: !1,
    _touchEventListener: null,
    _touchEventCallback: null,
    _clickEventListener: null,
    _touchBeganPosition: null,
    _touchMovePosition: null,
    _touchEndPosition: null,
    _linkedChildNode: null,
    ctor: function (a, b) {
        this._targetNode = a;
        this._touchBeganPosition = cc.p(0, 0);
        this._touchMovePosition = cc.p(0, 0);
        this._touchEndPosition = cc.p(0, 0);
        b && this.setTouchEnabled(!0);
        cc.sys.isNative || (this._linkedChildNode = new jui.TouchListenerNode(this))
    },
    cleanup: function () {
        this.setTouchEnabled(!1);
        this._linkedChildNode && this._linkedChildNode.getParent() && this._linkedChildNode.getParent.removeChild(this._linkedChildNode);
        this._linkedChildNode = null
    },
    getTargetNode: function () {
        return this._targetNode
    },
    isTouchEnabled: function () {
        return this._touchEnabled
    },
    setEnabled: function (a) {
        this._enabled = a
    },
    isEnabled: function () {
        return this._enabled
    },
    isHighlighted: function () {
        return this._highlight
    },
    setHighlighted: function (a) {
        a !== this._highlight && (this._highlight = a)
    },
    setTouchEnabled: function (a) {
        this._touchEnabled !== a && ((this._touchEnabled = a) ? (this._touchListener || (this._touchListener = cc.EventListener.create({
            event: cc.EventListener.TOUCH_ONE_BY_ONE,
            swallowTouches: !1,
            onTouchBegan: this.onTouchBegan.bind(this),
            onTouchMoved: this.onTouchMoved.bind(this),
            onTouchEnded: this.onTouchEnded.bind(this)
        })), cc.eventManager.addListener(this._touchListener, this.getTargetNode())) : cc.eventManager.removeListener(this._touchListener))
    },
    _onTargetNodeOnEnter: function () {
        var a = this._touchListener;
        a && (!a._isRegistered() && this._touchEnabled) && cc.eventManager.addListener(a, this.getTargetNode())
    },
    _isAncestorsVisible: function (a) {
        return null == a ? !0 : (a = a.getParent()) && !a.isVisible() ? !1 : this._isAncestorsVisible(a)
    },
    _canBeginTouch: function () {
        return this.getTargetNode().isVisible() && this.isEnabled() && this._isAncestorsVisible(this.getTargetNode())
    },
    onTouchBegan: function (a, b) {
        this._hit = !1;
        if (this._canBeginTouch()) {
            var c = a.getLocation();
            this._touchBeganPosition.x = c.x;
            this._touchBeganPosition.y = c.y;
            this.hitTest(this._touchBeganPosition) &&
                (this._hit = !0)
        }
        if (!this._hit) return !1;
        this.setHighlighted(!0);
        this._pushDownEvent();
        return !0
    },
    onTouchMoved: function (a, b) {
        var c = a.getLocation();
        this._touchMovePosition.x = c.x;
        this._touchMovePosition.y = c.y;
        5 < Math.abs(this._touchBeganPosition.x - this._touchMovePosition.x) || 5 < Math.abs(this._touchBeganPosition.y - this._touchMovePosition.y) ? this.setHighlighted(!1) : this.setHighlighted(this.hitTest(c));
        this._moveEvent()
    },
    onTouchEnded: function (a, b) {
        var c = a.getLocation();
        this._touchEndPosition.x = c.x;
        this._touchEndPosition.y =
            c.y;
        c = this._highlight;
        this.setHighlighted(!1);
        c ? this._releaseUpEvent() : this._cancelUpEvent()
    },
    onTouchCancelled: function (a) {
        this.setHighlighted(!1);
        this._cancelUpEvent()
    },
    _pushDownEvent: function () {
        this._touchEventCallback && this._touchEventCallback(this, ccui.Widget.TOUCH_BEGAN);
        this._touchEventListener && this._touchEventSelector && this._touchEventSelector.call(this._touchEventListener, this, ccui.Widget.TOUCH_BEGAN)
    },
    _moveEvent: function () {
        this._touchEventCallback && this._touchEventCallback(this, ccui.Widget.TOUCH_MOVED);
        this._touchEventListener && this._touchEventSelector && this._touchEventSelector.call(this._touchEventListener, this, ccui.Widget.TOUCH_MOVED)
    },
    _releaseUpEvent: function () {
        this._touchEventCallback && this._touchEventCallback(this, ccui.Widget.TOUCH_ENDED);
        this._touchEventListener && this._touchEventSelector && this._touchEventSelector.call(this._touchEventListener, this, ccui.Widget.TOUCH_ENDED);
        this._clickEventListener && this._clickEventListener(this)
    },
    _cancelUpEvent: function () {
        this._touchEventCallback && this._touchEventCallback(this,
            ccui.Widget.TOUCH_CANCELED);
        this._touchEventListener && this._touchEventSelector && this._touchEventSelector.call(this._touchEventListener, this, ccui.Widget.TOUCH_CANCELED)
    },
    addTouchEventListener: function (a, b) {
        void 0 === b ? this._touchEventCallback = a : (this._touchEventSelector = a, this._touchEventListener = b)
    },
    addClickEventListener: function (a) {
        this._clickEventListener = a
    },
    hitTest: function (a) {
        var b = cc.rect(0, 0, this.getTargetNode().getContentSize().width, this.getTargetNode().getContentSize().height);
        return cc.rectContainsPoint(b,
            this.getTargetNode().convertToNodeSpace(a))
    }
});
jui.Image = jui.Widget.extend({
    ctor: function (a, b, c) {
        this._super(b, c);
        b = jcore.util.isNotNull(b) && jcore.util.isNotNull(c);
        jcore.util.isNotNull(a) ? "string" === typeof a || jui.util.isInstanceOfSprite(a) ? this.setBackground(a, !b, jui.SizeMode.stretch_non_proportional) : "object" === typeof a && jui.Widget.configureAttachmentsWithConfig(this, null, null, a) : cc.log("jui.Image invalid ctor args")
    }
});
jui.Panel = jui.Widget.extend({
    _layout: null,
    _initChildren: !1,
    _initChildrenCount: 0,
    _postLayoutValue: !1,
    _autoSizeToChildrenWidth: !1,
    _autoSizeToChildrenHeight: !1,
    ctor: function (a, b, c) {
        this._super(a, b);
        jcore.util.isNull(c) && (c = new jui.DefaultLayout);
        this.setLayout(c);
        this.setCascadeOpacityEnabled(!0)
    },
    setLayout: function (a) {
        this._layout && this._layout.setPanel(null);
        (this._layout = a) && this._layout.setPanel(this);
        this._layout && !(this._layout instanceof jui.NoneLayout) ? this.invalidateLayout(!0) : this._islayout_valid = !0
    },
    getLayout: function () {
        return this._layout
    },
    isClipping: function () {
        return !1
    },
    setAutoSizeToChildren: function (a, b) {
        this._autoSizeToChildrenWidth = a;
        this._autoSizeToChildrenHeight = jcore.util.orDefault(b, a);
        this.invalidateLayout()
    },
    getAutoSizeToChildren: function () {
        return this._autoSizeToChildrenWidth || this._autoSizeToChildrenHeight
    },
    getAutoSizeToChildrenWidth: function () {
        return this._autoSizeToChildrenWidth
    },
    getAutoSizeToChildrenHeight: function () {
        return this._autoSizeToChildrenHeight
    },
    beginInitChildren: function () {
        this._internalBeginInitChildren()
    },
    endInitChildren: function (a) {
        this._internalEndInitChildren();
        this._initChildren || this.invalidateLayout(a)
    },
    _internalBeginInitChildren: function () {
        this._initChildren = !0;
        this._initChildrenCount++
    },
    _internalEndInitChildren: function () {
        this._initChildrenCount = Math.max(0, this._initChildrenCount - 1);
        0 >= this._initChildrenCount && (this._initChildren = !1)
    },
    invalidateLayout: function (a, b) {
        b = jcore.util.orDefault(b, jui.Layout.InvalidateType.any);
        if ((a || this._layout && !this._layout.isLayoutBusy()) && (a || this._islayout_valid))
            if (this._islayout_valid = !1, a || jui.LayoutManager.getInstance().enqueueLayout(this), this._postLayoutValue = !1, !this._initChildren) {
                var c = this.getParent();
                c && c.getTag() == jui.ClippingPanelTag && (c = c.getParent());
                c && c._isjuiWidget && (a || c._islayout_valid) ? c._invalidateParentLayout(this, a, b) : a && this.validateLayout(a)
            }
    },
    _invalidateParentLayout: function (a, b, c) {
        if (b || this._islayout_valid) {
            c = jcore.util.orDefault(c, jui.Layout.InvalidateType.any);
            var d = b || c === jui.Layout.InvalidateType.any;
            if (!d && this._layout) {
                if (this._autoSizeToChildrenWidth ||
                    this._autoSizeToChildrenHeight) c & (jui.Layout.InvalidateType.position | jui.Layout.InvalidateType.size) && (d = !0);
                d = d || this._layout.requiresLayoutInvalidation(c)
            }
            d ? this.invalidateLayout(b, jui.Layout.InvalidateType.any) : b && a.validateLayout(b)
        }
    },
    validateLayout: function (a) {
        if (jcore.util.isNull(this._layout)) this._super(a);
        else if (a || !this._islayout_valid) {
            this._postLayoutValue = !0;
            var b = !1;
            if (this._autoSizeToChildrenWidth || this._autoSizeToChildrenHeight) {
                var c = this._layout.measureLayout(),
                    d = this.getContentSize();
                if (d.width !== c.width || d.height !== c.height) {
                    this._internalBeginInitChildren();
                    try {
                        this.setContentSize(cc.size(this._autoSizeToChildrenWidth ? c.width : d.width, this._autoSizeToChildrenHeight ? c.height : d.height)), b = !0
                    } finally {
                        this._internalEndInitChildren(), this._postLayoutValue = !0
                    }
                }
            }
            this._layout.beginLayout(a);
            this._islayout_valid = this._postLayoutValue;
            if (!b && this._islayout_valid && !this._layout.isAnimated() && (this._autoSizeToChildrenWidth || this._autoSizeToChildrenHeight)) {
                this._internalBeginInitChildren();
                try {
                    this._autoSizeToChildrenWidth && this._autoSizeToChildrenHeight ? this.setContentSizeToChildrenWidthAndHeight() : this._autoSizeToChildrenWidth ? this.setContentSizeToChildrenWidth() : this._autoSizeToChildrenHeight && this.setContentSizeToChildrenHeight()
                } finally {
                    this._internalEndInitChildren(), this._postLayoutValue = !0
                }
                this._islayout_valid || this._layout.beginLayout(!0);
                this._islayout_valid = this._postLayoutValue
            }
            if (this._islayout_valid) this.onValidateLayout();
            else jui.LayoutManager.getInstance().enqueueLayoutNextFrame(this)
        }
    },
    addChild: function (a, b, c) {
        jcore.util.isNotNull(a.layout_properties) && cc.log("layout already defined");
        a.layout_properties = c;
        this._super(a, jcore.util.orDefault(b, jui.WidgetLayers.background));
        this.invalidateLayout(!1, jui.Layout.InvalidateType.addChild)
    },
    addChildren: function (a, b) {
        b = jcore.util.orDefault(b, jui.WidgetLayers.background);
        for (var c = 0; c < a.length; c++) jui.Widget.prototype.addChild.call(this, a[c], b);
        this.invalidateLayout(!1, jui.Layout.InvalidateType.addChild)
    },
    removeChild: function (a, b) {
        this._super(a,
            b);
        this.invalidateLayout(!1, jui.Layout.InvalidateType.removeChild)
    },
    addWidgetChild: function (a, b, c) {
        this.addChild(a, b, c)
    },
    removeWidgetChild: function (a, b) {
        this.removeChild(a, b)
    }
});
jui.ScaledPanel = jui.Panel.extend({
    ctor: function (a, b, c) {
        this._super(b, c, new jui.ScaledLayout);
        jcore.util.isNotNull(a) && (jcore.util.isNull(b) && jcore.util.isNull(c) && this.setContentSize(a.getContentSize()), this.setScaledChild(a))
    },
    setScaledChild: function (a) {
        this.addChild(a, jui.WidgetLayers.UI)
    }
});
jui.ClippingPanelTag = 109901;
jui.ClippingPanel = jui.Panel.extend({
    _clipper: null,
    _stencilShape: null,
    ctor: function (a, b, c) {
        this._clipper = new cc.ClippingNode;
        this._clipper.setAnchorPoint(cc.p(1, 0));
        this._clipper.setPosition(cc.p(0, 0));
        this._clipper.setInverted(!1);
        this._clipper.setTag(jui.ClippingPanelTag);
        this._super(a, b, c);
        this.addChild(this._clipper)
    },
    cleanup: function () {
        this._stencilShape && (this._stencilShape.isRunning() && (this._stencilShape.onExitTransitionDidStart(), this._stencilShape.onExit()), this._stencilShape.release(), this._stencilShape =
            null);
        this._super()
    },
    isClipping: function () {
        return !0
    },
    setClippingToBounds: function () {
        this._stencilShape && (this._stencilShape.isRunning() && (this._stencilShape.onExitTransitionDidStart(), this._stencilShape.onExit()), this._stencilShape.release(), this._stencilShape = null);
        var a = this.getContentSize(),
            b = new cc.DrawNode;
        b.setName("clip stencil");
        b.setPosition(cc.p(0, 0));
        b.setAnchorPoint(cc.p(0, 1));
        var a = [cc.p(0, 0), cc.p(a.width, 0), cc.p(a.width, a.height), cc.p(0, a.height)],
            c = cc.color(0, 255, 0, 255);
        b.drawPoly(a,
            c, 3, c);
        this._clipper.setStencil(b);
        this._stencilShape = b;
        this._stencilShape.retain()
    },
    validateLayout: function (a) {
        this._super(a);
        this._islayout_valid && this.setClippingToBounds()
    },
    getClippedChildren: function () {
        return this._clipper.getChildren()
    },
    getClippedChildrenCount: function () {
        return this._clipper.getChildrenCount()
    },
    addChild: function (a, b, c) {
        jcore.util.isDefined(a.layout_properties) && null != a.layout_properties && cc.log("layout already defined");
        a.layout_properties = c;
        this._clipper.addChild(a, b);
        this.invalidateLayout(!1,
            jui.Layout.InvalidateType.addChild)
    },
    removeChild: function (a, b) {
        this._clipper.removeChild(a, b);
        this.invalidateLayout(!1, jui.Layout.InvalidateType.removeChild)
    }
});
jui.ParallaxPanel = jui.Panel.extend({
    _scrollOffsets: null,
    _enableAutoScroll: !1,
    ctor: function (a, b) {
        this._super(a, b, new jui.NoneLayout);
        this._scrollOffsets = []
    },
    addInfiniteScrollChild: function (a, b, c, d, f, g) {
        b = new jui.ParallaxScrollOffset(g, b, c, d, f);
        this._scrollOffsets.push(b);
        g.setPosition(c);
        g.setAnchorPoint(cc.p(0, 0));
        this.addChild(g, a)
    },
    updateWithVelocity: function (a, b) {
        a = cc.pMult(a, 32);
        range = this.getContentSize();
        for (var c = 0; c < this._scrollOffsets.length; c++) {
            var d = this._scrollOffsets[c],
                f = cc.pMult(d.getRelVelocity(),
                    32),
                f = cc.pAdd(a, f),
                f = cc.pCompMult(cc.pMult(f, b), d.getRatio()),
                g = d.getNode();
            g.setPosition(cc.pAdd(g.getPosition(), f));
            (0 > f.x && 0 > g.getPosition().x + g.getContentSize().width || 0 < f.x && g.getPosition().x > range.width) && g.setPosition(cc.pAdd(g.getPosition(), cc.p(d.getScrollOffset().x + g.getContentSize().width, 0)))
        }
    },
    setEnableAutoScroll: function (a) {
        (this._enableAutoScroll = jcore.util.orDefault(a, !0)) ? this.scheduleUpdate(): this.unscheduleUpdate()
    },
    onEnter: function () {
        this._super();
        this._enableAutoScroll && this.scheduleUpdate()
    },
    update: function (a) {
        this.updateWithVelocity(cc.p(-5, 0), a)
    }
});
jui.ParallaxScrollOffset = cc.Class.extend({
    _node: null,
    _scrollOffset: null,
    _origPosition: null,
    _relVelocity: null,
    _ratio: null,
    ctor: function (a, b, c, d, f) {
        this._node = a;
        this._scrollOffset = d;
        this._origPosition = c;
        this._relVelocity = f;
        this._ratio = b
    },
    getNode: function () {
        return this._node
    },
    getRatio: function () {
        return this._ratio
    },
    getScrollOffset: function () {
        return this._scrollOffset
    },
    getRelVelocity: function () {
        return this._relVelocity
    }
});
jui.ProjectionPanel = jui.Panel.extend({
    _focalLength: 100,
    _position3d: {
        x: 0,
        y: 0,
        z: 0
    },
    _rotation3d: {
        x: 0,
        y: 0,
        z: 0
    },
    _projectedItems: [],
    _dirtyItems: [],
    ctor: function (a, b) {
        this._super(a, b, new jui.NoneLayout);
        this._projectedItems = [];
        this._dirtyItems = []
    },
    addProjectedChild: function (a, b) {
        if (a) {
            this.addChild(a);
            var c = new jui.ProjectionItem(this, a, b);
            this._projectedItems.push(c);
            return c
        }
    },
    needsProjection: function (a) {
        a && this._dirtyItems.push(a)
    },
    onEnter: function () {
        this._super();
        this.scheduleUpdate()
    },
    update: function (a) {
        for (var b =
                0; b < this._projectedItems.length; b++) {
            var c = this._projectedItems[b];
            c.isDone() || c.step(a)
        }
        a = this._dirtyItems;
        this._dirtyItems = [];
        null != a && 0 < a.length && this._updateItems(a)
    },
    _updateItems: function (a) {
        for (var b = Math.sin(this._rotation3d.x), c = Math.cos(this._rotation3d.x), d = Math.sin(this._rotation3d.y), f = Math.cos(this._rotation3d.y), g = Math.sin(this._rotation3d.z), h = Math.cos(this._rotation3d.z), m, n, p, u, v = 0; v < a.length; v++) {
            var x = a[v],
                y = x.getPosition3D(),
                x = x.getTarget();
            y && (m = y.x - this._position3d.x, n = y.y - this._position3d.y,
                p = y.z - this._position3d.z, u = c * n - b * p, p = b * n + c * p, n = f * p - d * m, p = d * p + f * m, m = h * p - g * u, p = g * p + h * u, u = this._focalLength / (this._focalLength + n), m *= u, n = p * u, p = cc.p(1, 1), x.setLocalZOrder(-y.z), x.setScaleX(1 * u * p.x), x.setScaleY(1 * u * p.y), x.setPosition(cc.p(m, n)), x.setOpacity(255 * ((this._focalLength - y.z) / this._focalLength)))
        }
    }
});
jui.ProjectionItem = cc.Class.extend({
    _projectionPanel: null,
    _target: null,
    _duration: 0,
    _elapsed: 0,
    _firstTick: !1,
    _position3d: {
        x: 0,
        y: 0,
        z: 0
    },
    _start: {
        x: 0,
        y: 0,
        z: 0
    },
    _end: {
        x: 0,
        y: 0,
        z: 0
    },
    _delta: {
        x: 0,
        y: 0,
        z: 0
    },
    ctor: function (a, b, c) {
        this._projectionPanel = a;
        this._target = b;
        this.setPosition3D(c)
    },
    getTarget: function () {
        return this._target
    },
    getDuration: function () {
        return this._duration
    },
    setDuration: function (a) {
        this._duration = jcore.util.orDefault(a, 0)
    },
    getElapsed: function () {
        return this._elapsed
    },
    isDone: function () {
        return this._elapsed >=
            this._duration
    },
    getPosition3D: function () {
        return this._position3d
    },
    setPosition3D: function (a) {
        a = jcore.util.orDefault(a, {
            x: 0,
            y: 0,
            z: 0
        });
        this._position3d = {
            x: jcore.util.orDefault(a.x, 0),
            y: jcore.util.orDefault(a.y, 0),
            z: jcore.util.orDefault(a.z, 0)
        };
        this._projectionPanel && this._projectionPanel.needsProjection(this)
    },
    moveToPosition3D: function (a, b) {
        a = jcore.util.orDefault(a, cc.FLT_EPSILON);
        b = jcore.util.orDefault(b, {
            x: 0,
            y: 0,
            z: 0
        });
        this._end = {
            x: jcore.util.orDefault(b.x, 0),
            y: jcore.util.orDefault(b.y, 0),
            z: jcore.util.orDefault(b.z,
                0)
        };
        this._duration = 0 === a ? cc.FLT_EPSILON : a;
        this._elapsed = 0;
        this._firstTick = !0;
        this._start = {};
        this._delta = {};
        this._start.x = this._position3d.x;
        this._start.y = this._position3d.y;
        this._start.z = this._position3d.z;
        this._delta.x = this._end.x - this._start.x;
        this._delta.y = this._end.y - this._start.y;
        this._delta.z = this._end.z - this._start.z
    },
    step: function (a) {
        this._firstTick ? (this._firstTick = !1, this._elapsed = a) : this._elapsed += a;
        a = this._elapsed / (1.192092896E-7 < this._duration ? this._duration : 1.192092896E-7);
        a = 1 > a ? a : 1;
        this.update(0 < a ? a : 0)
    },
    update: function (a) {
        this.setPosition3D({
            x: this._start.x + this._delta.x * a,
            y: this._start.y + this._delta.y * a,
            z: this._start.z + this._delta.z * a
        })
    }
});
jui.GesturePanel = jui.Panel.extend({
    on: {
        gestureSwipeLeft: null,
        gestureSwipeRight: null
    },
    _minSwipeDiffPercentage: 0.11,
    _trackingGesture: !1,
    ctor: function (a, b, c) {
        this._super(a, b, c);
        this.defineWidgeEvent("gestureSwipeLeft");
        this.defineWidgeEvent("gestureSwipeRight");
        this.setTouchEnabled(!0, !1)
    },
    _onGestureSwipeLeft: function () {
        this.on.gestureSwipeLeft.dispatch(this)
    },
    _onGestureSwipeRight: function () {
        this.on.gestureSwipeRight.dispatch(this)
    },
    _pushDownEvent: function () {
        this._super();
        this._trackingGesture = !0
    },
    _releaseUpEvent: function () {
        this._trackingGesture = !1;
        this._super()
    },
    _cancelUpEvent: function () {
        this._trackingGesture = !1;
        this._super()
    },
    _moveEvent: function () {
        this._super();
        this._trackingGesture && (this._trackingGesture = !this._evalSwipeGesture())
    },
    _evalSwipeGesture: function () {
        var a = this.getTouchBeganPosition(),
            b = this.getTouchMovePosition(),
            a = a.x - b.x;
        return Math.abs(a) > this.width * this._minSwipeDiffPercentage ? (0 < a ? this._onGestureSwipeLeft() : this._onGestureSwipeRight(), !0) : !1
    }
});
jui.ItemsPanel = jui.Panel.extend({
    _dataItems: null,
    _itemWidgetFactory: null,
    ctor: function (a, b) {
        this._super(a, b, new jui.StackLayout(jui.StackLayout.VERTICAL));
        this._dataItems = [];
        this.setAutoSizeToChildren(!1, !0);
        this._itemWidgetFactory = function (a, b) {
            var f = new jui.Widget(200, 80);
            f.setMargin({
                l: 4,
                r: 4,
                t: 4,
                b: 4
            });
            f.setBackgroundSprite(R.sprites.black);
            return f
        }
    },
    setItemWidgetFactory: function (a) {
        this._itemWidgetFactory = a
    },
    addItem: function (a) {
        var b = this._itemWidgetFactory(a, this._dataItems.length);
        if (b) return this._dataItems.push({
            item: a,
            widget: b
        }), this.addChild(b, jui.WidgetLayers.UI), !0;
        cc.log("Failed to create item.");
        return !1
    },
    addArrayOfItems: function (a) {
        for (var b = [], c = 0; c < a.length; c++) {
            var d = this._itemWidgetFactory(a[c], this._dataItems.length);
            d ? (this._dataItems.push({
                item: a[c],
                widget: d
            }), b.push(d)) : cc.log("Failed to create item.")
        }
        this.addChildren(b, jui.WidgetLayers.UI);
        return !1
    },
    removeItem: function (a) {
        return this.removeItemAt(this._findItemIndex(a))
    },
    removeItemAt: function (a) {
        return 0 <= a && a < this._dataItems.length ? (this.removeChild(this._dataItems[a].widget),
            this._dataItems.splice(a, 1), !0) : !1
    },
    removeAllItems: function () {
        this.beginInitChildren();
        try {
            for (var a = 0; a < this._dataItems.length; a++) this.removeChild(this._dataItems[a].widget)
        } finally {
            this.endInitChildren()
        }
        this._dataItems = []
    },
    getItemCount: function () {
        return this._dataItems.length
    },
    getItemAt: function (a) {
        return !jcore.util.checkArrayRange(this._dataItems, a) ? null : this._dataItems[a].item
    },
    getItemCellAt: function (a) {
        return this._dataItems[a].widget
    },
    getAllItems: function () {
        return _.clone(this._dataItems)
    },
    findItemCell: function (a) {
        if (jcore.util.isNull(a)) return null;
        a = this._findItemIndex(a);
        return -1 != a ? this.getItemCellAt(a) : null
    },
    _findItemIndex: function (a) {
        for (var b = 0; b < this._dataItems.length; b++)
            if (this._dataItems[b].item === a) return b;
        return -1
    }
});
jui.View = jui.Panel.extend({
    ctor: function () {
        this._super()
    },
    getViewIdentifier: function () {
        return "unknown"
    },
    getViewTransition: function (a) {
        return jui.ViewTransition.fadeIn
    },
    shouldAddToBackStack: function () {
        return !0
    },
    canPopView: function () {
        return !0
    }
});
jui.ViewTransition = jcore.Enum.create({
    fadeIn: 0,
    slideInFromRight: 1,
    slideInFromLeft: 2,
    none: 3
});
jui.ViewPanel = jui.Panel.extend({
    on: {
        activeViewChanged: null,
        viewAdded: null,
        viewRemoved: null
    },
    _views: null,
    _activeView: null,
    _backStack: null,
    ctor: function (a, b) {
        this._super(a, b, new jui.DockLayout);
        this.on = {};
        this.on.activeViewChanged = new signals.Signal;
        this.on.viewAdded = new signals.Signal;
        this.on.viewRemoved = new signals.Signal;
        this._activeView = null;
        this._views = [];
        this._backStack = []
    },
    getViews: function () {
        return [].concat(this._views)
    },
    findView: function (a) {
        jcore.assertNotNull(a);
        return _.find(this._views,
            function (b) {
                return b.getViewIdentifier() === a
            })
    },
    findViewByFilter: function (a) {
        jcore.assertNotNull(a);
        return _.find(this._views, a)
    },
    hasActiveView: function () {
        return jcore.util.isNotNull(this._activeView)
    },
    getActiveView: function () {
        return this._activeView
    },
    pushView: function (a, b, c) {
        if (!jcore.util.isNull(a) && this._activeView !== a) {
            jcore.assert(a instanceof jui.View, "view must be an instance of jui.View");
            var d = !1;
            null == this.findView(a.getViewIdentifier()) && (this.addChild(a, jui.WidgetLayers.UI), this._views.push(a),
                d = !0);
            var f = this._activeView;
            this._activeView = a;
            null !== f && (jcore.util.isDefined(f.shouldAddToBackStack) && f.shouldAddToBackStack()) && this._backStack.push(f);
            this._transitionView(f, this._activeView, b, c);
            d && this.on.viewAdded.dispatch(this, a);
            this.on.activeViewChanged.dispatch(this, this._activeView, f)
        }
    },
    popView: function (a) {
        if (this.canPopView()) {
            var b = this._backStack.pop();
            if (!jcore.util.isNull(b)) {
                var c = this._activeView;
                this._activeView = b;
                this._transitionView(c, this._activeView, jui.ViewTransition.slideInFromLeft,
                    a);
                this.on.activeViewChanged.dispatch(this, this._activeView, c)
            }
        }
    },
    canPopView: function () {
        return 0 < this._backStack.length ? !0 : this.hasActiveView() ? this.getActiveView().canPopView() : !1
    },
    findNextView: function (a, b, c) {
        var d = this.getViews(),
            d = _.filter(d, c);
        c = d.length;
        if (1 < c) {
            var f = b.getViewIdentifier();
            b = _.findIndex(d, function (a) {
                return a.getViewIdentifier() === f
            });
            if (0 <= b) return b = (b + a) % c, jcore.util.safeIndex(d, 0 > b ? b + c : b, null)
        }
        return null
    },
    removeView: function (a) {
        !jcore.util.isNull(a) && null !== this.findView(a.getViewIdentifier()) &&
            (this._views = _.filter(this._views, function (b) {
                return b !== a
            }), this.removeChild(a), this.on.viewRemoved.dispatch(this, a))
    },
    _transitionView: function (a, b, c, d) {
        if (!jcore.util.isNull(b)) {
            d = jcore.util.orDefault(!!d, !1);
            a === b && (b.isShowing() || b.show(), d = !1);
            var f = this.getLayout(),
                g = this.getContentSize();
            c = jcore.util.orDefault(c, b.getViewTransition(a));
            if (c === jui.ViewTransition.none) jcore.util.isNotNull(a) && (a.hide ? a.hide() : a.visible = !1), jcore.util.isNotNull(b) && (b.show ? b.show() : b.visible = !0);
            else if (c === jui.ViewTransition.fadeIn) jcore.util.isNotNull(a) &&
                (a.setLocalZOrder(jui.WidgetLayers.UI), a.fadeOut(0.1), d && a.runAction(cc.sequence(cc.delayTime(0.1), cc.callFunc(_.bind(this.removeView, this, a))))), jcore.util.isNotNull(b) && (b.stopAllActions(), b.setVisible(!1), b.setAnchorPoint(cc.p(0.5, 0.5)), b.setLocalZOrder(jui.WidgetLayers.UI), f.setItemPosition(b, g.width / 2, g.height / 2, !1, !1), b.fadeIn(0.25));
            else {
                var h = cc.p(0, 0),
                    m = cc.p(0, 0),
                    n = cc.p(0, 0);
                c == jui.ViewTransition.slideInFromLeft ? (h = cc.p(g.width + g.width / 2, g.height / 2), m = cc.p(-g.width / 2, g.height / 2)) : (h = cc.p(-g.width /
                    2, g.height / 2), m = cc.p(g.width + g.width / 2, g.height / 2));
                n = cc.p(g.width / 2, g.height / 2);
                jcore.util.isNotNull(a) && (c = f.getAnimatedDuration(), a.setLocalZOrder(jui.WidgetLayers.UI), a.stopAllActions(), a.slideOut(c, h.x, h.y), d && a.runAction(cc.sequence(cc.delayTime(c), cc.callFunc(_.bind(this.removeView, this, a)))));
                jcore.util.isNotNull(b) && (b.stopAllActions(), b.setAnchorPoint(cc.p(0.5, 0.5)), b.setLocalZOrder(jui.WidgetLayers.UI + 1), b.show ? b.show() : (b.setVisible(!0), b.setOpacity(255)), f.setItemSize(b, g.width, g.height),
                    this.invalidateLayout(!0), f.setItemPosition(b, m.x, m.y, !1, !1), f.setItemPosition(b, n.x, n.y, !0, !0))
            }
        }
    }
});
jui.Button = jui.Widget.extend({
    on: {
        held: null,
        toggled: null
    },
    _button_mode: null,
    _normal_attachment: null,
    _pressed_attachment: null,
    _touchHeldCallback: null,
    _touchswallow: !1,
    _toggleValue: !1,
    ctor: function (a, b, c) {
        jcore.util.isNotNull(a) && jcore.util.isNotNull(a.textStyle) && a.textStyle instanceof jui.TextStyle && this.setTextStyle(a.textStyle);
        this._super(b, c);
        this.defineWidgeEvent("held");
        this.defineWidgeEvent("toggled");
        this._button_mode = jui.Button.Mode.normal;
        var d = jcore.util.isNotNull(b) && jcore.util.isNotNull(c);
        jcore.util.isNotNull(a) ? ("string" === typeof a || jui.util.isInstanceOfSprite(a) ? this.setBackground(a, !d, jui.SizeMode.stretch_non_proportional) : a instanceof jui.Button.Config ? this.setButtonConfiguration(a, b, c) : "object" === typeof a && jui.Widget.configureAttachmentsWithConfig(this, b, c, a), jcore.util.isNotNull(a.textStyle) && a.textStyle instanceof jui.TextStyle && this.setTextStyle(a.textStyle)) : cc.log("jui.Button invalid ctor args");
        this._changeButtonState(jui.Button.VisualStates.normal);
        this.setTouchEnabled(!0,
            this._touchswallow)
    },
    setButtonMode: function (a) {
        this._button_mode = a
    },
    setButtonConfiguration: function (a, b, c) {
        this.removeAllWidgetAttachments();
        if (!(a instanceof jui.Button.Config)) return !1;
        jcore.util.isNotNull(a.textStyle) && a.textStyle instanceof jui.TextStyle && this.setTextStyle(a.textStyle);
        var d = {
            sprites: []
        };
        jcore.util.isNotNull(a.selected) || jcore.util.isNotNull(a.pressed) || jcore.util.isNotNull(a.disabled) ? d.sprites.push({
            asset: a.normal,
            depth: jui.WidgetLayers.Background,
            sizeMode: jui.SizeMode.stretch_non_proportional,
            animationTrigger: jui.Button.VisualStates.normal,
            visibility: jui.VisibilityMode.duringAnimation,
            blendMode: jcore.util.orDefault(a.blendMode, jui.BlendMode.normal)
        }) : d.sprites.push({
            asset: a.normal,
            depth: jui.WidgetLayers.Background,
            sizeMode: jui.SizeMode.stretch_non_proportional,
            animationTrigger: jui.Button.VisualStates.normal,
            visibility: jui.VisibilityMode.visible,
            blendMode: jcore.util.orDefault(a.blendMode, jui.BlendMode.normal)
        });
        jcore.util.isNotNull(a.selected) && d.sprites.push({
            asset: a.selected,
            depth: jui.WidgetLayers.Background,
            sizeMode: jui.SizeMode.stretch_non_proportional,
            animationTrigger: jui.Button.VisualStates.selected,
            visibility: jui.VisibilityMode.duringAnimation,
            blendMode: jcore.util.orDefault(a.blendMode, jui.BlendMode.normal)
        });
        jcore.util.isNotNull(a.pressed) && d.sprites.push({
            asset: a.pressed,
            depth: jui.WidgetLayers.Background,
            sizeMode: jui.SizeMode.stretch_non_proportional,
            animationTrigger: jui.Button.VisualStates.pressed,
            visibility: jui.VisibilityMode.duringAnimation,
            blendMode: jcore.util.orDefault(a.blendMode, jui.BlendMode.normal)
        });
        jcore.util.isNotNull(a.disabled) && d.sprites.push({
            asset: a.disabled,
            depth: jui.WidgetLayers.Background,
            sizeMode: jui.SizeMode.stretch_non_proportional,
            animationTrigger: jui.Button.VisualStates.disabled,
            visibility: jui.VisibilityMode.duringAnimation,
            blendMode: jcore.util.orDefault(a.blendMode, jui.BlendMode.normal)
        });
        jui.Widget.configureAttachmentsWithConfig(this, b, c, d)
    },
    setOnHeldListener: function (a) {
        this._touchHeldCallback = a
    },
    isToggleOn: function () {
        return this._toggleValue
    },
    setToggle: function (a) {
        this._button_mode ===
            jui.Button.Mode.toggle && this._toggleValue !== (!0 === a) && (this._toggleValue = !0 === a, this.isEnabled() && (this._toggleValue ? this._changeButtonState(jui.Button.VisualStates.selected) : this._changeButtonState(jui.Button.VisualStates.normal), this.on.toggled.dispatch(this)))
    },
    setEnabled: function (a) {
        this._super(a);
        this._changeButtonState(jui.Button.VisualStates.normal)
    },
    _changeButtonState: function (a) {
        this._button_mode == jui.Button.Mode.toggle && a == jui.Button.VisualStates.normal && this.isToggleOn() && (a = jui.Button.VisualStates.selected);
        this.isEnabled() || (a = jui.Button.VisualStates.disabled);
        this.setVisualState(a)
    },
    _pushDownEvent: function () {
        this._super();
        this._changeButtonState(jui.Button.VisualStates.pressed);
        this._touchHeldCallback && this.scheduleOnce(this._onHeldEvent, 0.99, "touchHeld")
    },
    _cancelUpEvent: function () {
        this._super();
        this._changeButtonState(jui.Button.VisualStates.normal);
        this._touchHeldCallback && this.unschedule(this._onHeldEvent)
    },
    _releaseUpEvent: function () {
        this.setToggle(!this.isToggleOn());
        this._super();
        this._changeButtonState(jui.Button.VisualStates.normal);
        this._touchHeldCallback && this.unschedule(this._onHeldEvent)
    },
    _onHeldEvent: function () {
        this._touchHeldCallback && this.isHighlighted() && (this._touchHeldCallback(this), this.on.held.dispatch(this))
    }
});
jui.Button.VisualStates = {
    normal: jui.VisualState.visible,
    pressed: "button_pressed",
    selected: "button_selected",
    disabled: "button_disabled"
};
jui.Button.Mode = jcore.Enum.create({
    normal: 0,
    toggle: 1
});
jui.Button.Config = function () {
    this.textStyle = this.disabled = this.selected = this.pressed = this.normal = null;
    arguments && 0 < arguments.length && _.extend(this, arguments[0])
};
jui.ButtonLabel = jui.Button.extend({
    _ui_label: null,
    ctor: function (a, b, c) {
        jcore.util.isNotNull(a) && jcore.util.isNotNull(a.textStyle) && this.setTextStyle(a.textStyle);
        this._super(a, b, c)
    },
    _initContentNode: function () {
        var a = this._getContentNodeSize();
        this._contentNode = this._ui_label = new jui.TextBox(a.width, a.height, this.getTextStyle());
        this._contentNode.setAnchorPoint(cc.p(0.5, 0.5));
        this.addChild(this._contentNode, jui.WidgetLayers.UI)
    },
    getLabel: function () {
        return this._ui_label
    },
    setTextValue: function (a) {
        return this._ui_label.setTextValue(a)
    },
    getTextValue: function () {
        return this._ui_label.getTextValue()
    },
    setTextStyle: function (a) {
        this._super(a);
        jcore.util.isNotNull(this._ui_label) && this._ui_label.setTextStyle(a)
    }
});
jui.TextBox = jui.Widget.extend({
    _ui_label: null,
    _text_value: null,
    _prefix_value: null,
    _bindingSub: null,
    _sizeToContentEnabled: !1,
    _converter: null,
    _textHorizontalAlignment: jui.TextHorizontalAlignment.center,
    _textVerticalAlignment: jui.TextVerticalAlignment.center,
    _isBMFont: !1,
    _lblScale: 1,
    ctor: function (a, b, c) {
        jcore.util.isNotNull(c) && this.setTextStyle(c);
        this._super(a, b)
    },
    _initContentNode: function () {
        var a = jcore.util.orDefault(this._text_value, ""),
            b = this.getTextStyle();
        if (jcore.util.isNotNull(b))
            if (this._textHorizontalAlignment =
                jcore.util.orDefault(b.horizontalAlignment, jui.TextHorizontalAlignment.center), this._textVerticalAlignment = jcore.util.orDefault(b.verticalAlignment, jui.TextHorizontalAlignment.center), b.type == jui.FontType.bitmap) this._ui_label = new cc.LabelBMFont(a, b.name, void 0, jcore.util.orDefault(b.horizontalAlignment, jui.TextHorizontalAlignment.center)), this._isBMFont = !0;
            else {
                var c = jui.util.createFontDefinitionFromTextStyle(b);
                c.fontSize = this._calcFontSize(c.fontSize);
                this._ui_label = new cc.LabelTTF(a, c);
                jcore.util.isNotNull(b.enableShadow) &&
                    this.setShadow(b.enableShadow)
            }
        else this._ui_label = new cc.LabelTTF(a, "Arial", this._calcFontSize(14), cc.size(1, 1), jui.TextHorizontalAlignment.center, jui.TextVerticalAlignment.center);
        this._lblScale = 1 + (1 - jui.Globals.getDesignScale().x);
        this.setCascadeOpacityEnabled(!0);
        this._ui_label.setCascadeOpacityEnabled(!0);
        this._contentNode = this._ui_label;
        this._contentNode.setAnchorPoint(cc.p(0.5, 0.5));
        this.addChild(this._contentNode, jui.WidgetLayers.UI)
    },
    _calcFontSize: function (a) {
        a = jui.Globals.getResolutionAdjustedFontSize(a);
        cc.view.isRetinaEnabled() && (a = Math.floor(a * cc.view.getDevicePixelRatio()));
        return a
    },
    _updateContentPositionAndSize: function () {
        if (this._ui_label) {
            var a = this.getContentNodeSize();
            this._contentNode.setAnchorPoint(cc.p(0.5, 0.5));
            this._contentNode.setPosition(cc.p(a.width / 2 + this._contentPadding.l, a.height / 2 + this._contentPadding.b));
            var b = this._lblScale;
            this._contentNode.scale = b;
            a = cc.size(Math.floor(a.width / b), Math.floor(a.height / b));
            this._contentNode.setContentSize(a);
            0 < a.width && (jcore.util.isDefined(this._ui_label.boundingWidth) ?
                this._ui_label.boundingWidth = a.width : jcore.util.isDefined(this._ui_label.setDimensions) ? this._ui_label.setDimensions(a.width, a.height) : jcore.util.isDefined(this._ui_label.setBoundingWidth) && this._ui_label.setBoundingWidth(a.width))
        }
    },
    setConverter: function (a) {
        this._converter = a
    },
    getConverter: function () {
        return this._converter
    },
    setBlendFunc: function (a) {
        this._ui_label.setBlendFunc && this._ui_label.setBlendFunc(a)
    },
    setBoundingWidth: function (a) {
        jcore.util.isDefined(this._ui_label.boundingWidth) && (this._ui_label.boundingWidth =
            a)
    },
    setEnableSizeToContent: function (a) {
        this._sizeToContentEnabled = a
    },
    setTextColor: function (a) {
        this._ui_label && this._ui_label.setFontFillColor && this._ui_label.setFontFillColor(a)
    },
    setShadow: function (a) {
        this._ui_label && this._ui_label.enableShadow && (a ? this._ui_label.enableShadow(cc.color(0, 0, 0, 200), cc.p(2, -2), 5) : this._ui_label.disableShadow())
    },
    setTextSize: function (a) {
        this._ui_label && this._ui_label.setFontSize && this._ui_label.setFontSize(this._calcFontSize(a))
    },
    setTextHorizontalAlignment: function (a) {
        this._textHorizontalAlignment =
            a;
        this._ui_label && (this._ui_label.setHorizontalAlignment ? this._ui_label.setHorizontalAlignment(a) : this._ui_label.setAlignment && this._ui_label.setAlignment(a))
    },
    setTextVerticalAlignment: function (a) {
        this._textVerticalAlignment = a;
        this._ui_label && this._ui_label.setVerticalAlignment && this._ui_label.setVerticalAlignment(a)
    },
    setTextCenteredAlignment: function () {
        this.setTextHorizontalAlignment(jui.TextHorizontalAlignment.center);
        this.setTextVerticalAlignment(jui.TextVerticalAlignment.center)
    },
    setPrefixValue: function (a) {
        this._prefix_value =
            a;
        a = this._text_value;
        this._text_value = null;
        this.setTextValue(a)
    },
    setTextValue: function (a) {
        this._converter && (a = this._converter.convertValue(a));
        if (this._text_value === a) return !1;
        this._text_value = jcore.util.orDefault(a, "");
        if (!this._ui_label) return !1;
        jcore.util.isNotNull(this._prefix_value) && (this._text_value = this._prefix_value + this._text_value);
        this._ui_label.setString("" + this._text_value);
        this._sizeToContentEnabled ? (a = this._ui_label.getContentSize(), 0 < a.height && (a.height += 1.5), this.setContentSize(cc.size(a.width,
            a.height))) : this._isBMFont && jui.util.align(this._ui_label, jui.util.textHorizontalAlignmentToWidget(this._textHorizontalAlignment), jui.util.textVerticalAlignmentToWidget(this._textVerticalAlignment));
        return !0
    },
    getTextValue: function () {
        return this._text_value
    },
    bindTextValue: function (a) {
        this._bindingSub && (this._bindingSub.dispose(), this._bindingSub = null);
        return null != a ? (this.setTextValue(a()), this._bindingSub = a.subscribe(function (a) {
            this.setTextValue(a)
        }, this)) : null
    },
    setTextStyle: function (a) {
        this._super(a);
        a && (this.setTextColor(a.color), this.setTextSize(a.size), this.setTextHorizontalAlignment(a.horizontalAlignment), this.setTextVerticalAlignment(a.verticalAlignment), jcore.util.isNotNull(a.enableShadow) && this.setShadow(a.enableShadow))
    }
});
jui.NumberCounter = cc.Class.extend({
    _countAnimationSteps: 15,
    _num: 0,
    _intermediateNum: 0,
    _stepAmount: 0,
    _updateDelay: 999999,
    _updateStep: 0.15,
    _updateTextValue: null,
    setAnimationStep: function (a, b) {
        this._countAnimationSteps = a;
        this._updateStep = b
    },
    setNumber: function (a, b) {
        this._intermediateNum = b ? a : this._num;
        this._num = a;
        this._intermediateNum == this._num ? this._stepAmount = 0 : (this._stepAmount = Math.floor((this._num - this._intermediateNum) / this._countAnimationSteps), this._stepAmount = 0 > this._stepAmount ? Math.min(-2, this._stepAmount) :
            Math.max(2, this._stepAmount));
        this._updateTextValue && this._updateTextValue(this._intermediateNum)
    },
    setUpdateCallback: function (a) {
        this._updateTextValue = a
    },
    update: function (a) {
        if (this._intermediateNum != this._num) {
            this._updateDelay += a;
            if (this._updateDelay < this._updateStep) return !1;
            this._updateDelay = 0;
            a = this._intermediateNum - this._num;
            0 == this._stepAmount || Math.abs(a) < Math.abs(this._stepAmount) ? this._intermediateNum = this._num : 0 != a && (this._intermediateNum += this._stepAmount);
            this._updateTextValue && this._updateTextValue(this._intermediateNum);
            return this._intermediateNum == this._num
        }
    }
});
jui.NumberBox = jui.TextBox.extend({
    _num: 0,
    _counter: null,
    _animateChanges: {
        up: !1,
        down: !1
    },
    ctor: function (a, b, c) {
        this._super(a, b, c);
        this._counter = new jui.NumberCounter;
        this._counter.setUpdateCallback(_.bind(function (a) {
            this._updateTextValue(a)
        }, this));
        this.setConverter(new jui.NumberToStringConverter);
        this.setNumberValue(0, !1)
    },
    getCounter: function () {
        return this._counter
    },
    setChangeAnimation: function (a, b) {
        this._animateChanges = {
            up: a,
            down: b
        }
    },
    setNumberValue: function (a, b) {
        var c = this._num;
        this._num = a;
        var d = !1,
            f = this._animateChanges;
        jcore.util.isNotNull(b) && (f = b);
        f && (this._num > c && f.up && (d = !0), this._num < c && f.down && (d = !0));
        d ? (this._counter.setNumber(this._num, !1), this.scheduleUpdate()) : (this._counter.setNumber(this._num, !0), this._updateTextValue(this._num))
    },
    update: function (a) {
        this._counter.update(a) && this.unscheduleUpdate()
    },
    bindNumberValue: function (a) {
        this._bindingSub && (this._bindingSub.dispose(), this._bindingSub = null);
        null != a ? (this.setNumberValue(a(), !1), this._bindingSub = a.subscribe(function (a) {
            this.setNumberValue(null ==
                a ? 0 : a, this._animateChanges)
        }, this)) : this.setNumberValue(0, !1);
        return this._bindingSub
    },
    _updateTextValue: function (a) {
        this.setTextValue(a)
    }
});
jui.ScrollBox = jui.Widget.extend({
    _scrollView: null,
    _scrollContent: null,
    ctor: function (a, b) {
        this._super(a, b)
    },
    _initContentNode: function () {
        var a = this.getContentNodeSize();
        this._contentNode = this._scrollView = jui.util.createCCSScrollViewForWidget(a.width, a.height, this._scrollContent);
        this._contentNode.setAnchorPoint(cc.p(0.5, 0.5));
        this.addChild(this._contentNode, jui.WidgetLayers.UI)
    },
    _updateContentPositionAndSize: function () {
        this._super();
        if (null != this._scrollContent && null != this._scrollView) {
            this._scrollContent.x =
                this._scrollView.x;
            var a = jui.HorizontalAlignment.stretch;
            this._scrollContent.getHorizontalAlignment && (a = this._scrollContent.getHorizontalAlignment());
            a === jui.HorizontalAlignment.stretch && (this._scrollContent.width = this._scrollView.width);
            this._scrollContent.invalidateLayout && this._scrollContent.invalidateLayout(!0);
            jui.util.setCCSScrollViewContentWidget(this._scrollView, this._scrollContent)
        }
    },
    setScrollContent: function (a) {
        this._scrollContent = a;
        jui.util.setCCSScrollViewContentWidget(this._scrollView,
            this._scrollContent);
        this._updateContentPositionAndSize()
    }
});
jui.RichTextBox = jui.Widget.extend({
    _listCtrl: null,
    _scrollView: null,
    _textColor: cc.color(255, 255, 255),
    _itemMargin: jui.Margin(2),
    ctor: function (a, b, c) {
        jcore.util.isNotNull(c) && this.setTextStyle(c);
        this._super(a, b);
        this.setTouchEnabled(!0, !1)
    },
    _initContentNode: function () {
        var a = this.getContentNodeSize();
        this._listCtrl = new jui.ItemsPanel(a.width, a.height);
        this._listCtrl.setItemWidgetFactory(_.bind(function (a) {
            return this._createListItem(a)
        }, this));
        this._contentNode = this._scrollView = jui.util.createCCSScrollViewForWidget(this._listCtrl.width,
            this._listCtrl.height, this._listCtrl);
        this.addChild(this._contentNode, jui.WidgetLayers.UI)
    },
    _updateContentPositionAndSize: function () {
        this._super();
        null != this._listCtrl && null != this._contentNode && (this._listCtrl.x = this._contentNode.x, this._listCtrl.width = this._contentNode.width)
    },
    _createListItem: function (a) {
        var b = null;
        if (a && a.text) {
            var c = this.getContentNodeSize(),
                b = new jui.TextBox(null, null, this.getTextStyle());
            b.setMargin(this._itemMargin);
            b.setHorizontalAlignment(jui.HorizontalAlignment.left);
            b.setEnableSizeToContent(!0);
            b.setBoundingWidth(c.width);
            b.setTextColor(this._textColor);
            b.setTextValue(a.text)
        }
        return b
    },
    _updateScrollView: function () {
        jui.util.setCCSScrollViewContentWidget(this._scrollView, this._listCtrl);
        this._scrollView.jumpToBottom()
    },
    scrollToBottom: function () {
        this._scrollView.jumpToBottom()
    },
    getTextLineCount: function () {
        return this._listCtrl.getItemCount()
    },
    getTextLineAt: function (a) {
        return this._listCtrl.getItemAt(a)
    },
    appendTextLine: function (a) {
        this._listCtrl.addItem({
            text: a
        });
        this._updateScrollView()
    },
    removeTextLineAt: function (a) {
        return this._listCtrl.removeItemAt(a)
    },
    removeAllTextLines: function () {
        this._listCtrl.removeAllItems()
    }
});
jui.ProgressBoxText = {
    none: 1,
    percentage: 2,
    values: 3
};
jui.ProgressBox = jui.Widget.extend({
    ANIM_SCALE_TAG: 95093,
    on: {
        valueChanged: null
    },
    _min: 0,
    _max: 1,
    _val: 0,
    _lastVal: 0,
    _progressfillMinX: 0,
    _ui_fill: null,
    _ui_label: null,
    _mode: 0,
    _textMode: jui.ProgressBoxText.none,
    _animate: {
        up: !0,
        down: !0,
        delay: 1
    },
    _percentageDecimals: 0,
    ctor: function (a, b, c, d) {
        this._super(b, c);
        this._mode = jui.ProgressBox.Mode.horizontal;
        this.defineWidgeEvent("valueChanged");
        jcore.util.isNotNull(d) && this.setTextStyle(d);
        b = jcore.util.isNotNull(b) && jcore.util.isNotNull(c);
        c = null;
        jcore.util.isNotNull(a) &&
            ("string" === typeof a || jui.util.isInstanceOfSprite(a) ? this.setBackground(a, !b, jui.SizeMode.stretch_non_proportional) : a instanceof jui.ProgressBox.Config && (this.setBackground(a.track, !b, jui.SizeMode.stretch_non_proportional), jcore.util.isNotNull(a.fill) && (c = a.fill, "string" === typeof c ? c = jui.util.sprite.create(c) : jui.util.isInstanceOfSprite(c) || (c = new jui.Widget, jui.Widget.configureAttachmentsWithConfig(c, null, null, a.fill)))));
        c && (this._setFillSprite(c), this.addChild(this._ui_fill))
    },
    _initLabel: function () {
        this._ui_label =
            new jui.TextBox(null, null, this.getTextStyle());
        this._ui_label.anchorX = 0.5;
        this._ui_label.anchorY = 0.5;
        this._ui_label.setPosition(this.getCenterPosition());
        this.addChild(this._ui_label)
    },
    _setFillSprite: function (a) {
        if (this._ui_fill !== a) {
            var b = 0;
            null != this._ui_fill && (this._ui_fill.setVisible(!1), b = this._ui_fill.scaleX);
            if (this._ui_fill = a) this._ui_fill.setVisible(!0), this._ui_fill.setAnchorPoint(cc.p(0, 0.5)), this._ui_fill.setPosition(cc.p(0, this.height / 2)), this._ui_fill.setScaleX(b), this._ui_fill.setScaleY(this.height /
                this._ui_fill.height)
        }
    },
    getMode: function () {
        return this._mode
    },
    setMode: function (a) {
        this._mode !== a && (this._mode = a, a = this._ui_fill, this._ui_fill = null, this._setFillSprite(a), this._updateProgress())
    },
    setFillMinX: function (a) {
        this._progressfillMinX = a;
        this._updateProgress()
    },
    setFillColor: function (a) {
        this._ui_fill && this._ui_fill.setColor(a)
    },
    setRange: function (a, b) {
        if (this._min != a || this._max != b) this._min = jcore.util.orDefault(a, 0), this._max = jcore.util.orDefault(b, 0), this._updateProgress()
    },
    getRangeMin: function () {
        return this._min
    },
    getRangeMax: function () {
        return this._max
    },
    setValue: function (a, b) {
        a = Math.max(this._min, Math.min(this._max, jcore.util.orDefault(a, this._min)));
        this._val !== jcore.util.toDecimal(a, 0) && (this._lastVal = this._val, this._val = a, this._updateProgress(b), this.on.valueChanged.dispatch(this, this._val))
    },
    getValue: function () {
        return this._val
    },
    setValueAsPercentage: function (a) {
        100 < a && (a = 100);
        0 > a && (a = 0);
        this.setValue(this._min + a / 100 * (this._max - this._min))
    },
    setTextMode: function (a) {
        this._textMode = a;
        this._textMode != jui.ProgressBoxText.none &&
            !this._ui_label && this._initLabel();
        this._updateProgress()
    },
    setTextColor: function (a) {
        this._ui_label && this._ui_label.setTextColor(a)
    },
    setTextSize: function (a) {
        this._ui_label && this._ui_label.setTextSize(a)
    },
    setText: function (a) {
        this._text != a && (this._text = a, this._ui_label && this._ui_label.setTextValue(this._text))
    },
    setAnimateValueOptions: function (a, b, c) {
        this._animate = {
            up: a,
            down: b,
            delay: c
        }
    },
    _updateProgress: function (a) {
        var b = !1,
            c = this._max - this._min,
            d = (this._val - this._min) / c;
        jui.util.isValidNumber(d) || (d =
            0);
        0 < d && 0 < c && (b = this._val > this._lastVal ? this._animate.up : this._animate.down);
        jcore.util.isNotNull(a) && (b = a);
        this._updateFillPercentage(d, b);
        switch (this._textMode) {
        case jui.ProgressBoxText.percentage:
            a = Math.floor(100 * d);
            100 * d == a ? this.setText("" + a + " %") : this.setText("" + Number(100 * d).numberFormat(this._percentageDecimals) + " %");
            break;
        case jui.ProgressBoxText.values:
            this.setText("" + this._val + "/" + this._max)
        }
    },
    _updateFillPercentage: function (a, b) {
        this._lastFillPercent = a;
        if (this._ui_fill && !isNaN(a)) {
            var c =
                this._ui_fill.width / this.width,
                d = c * this._progressfillMinX,
                f = this._ui_fill.width - d,
                d = (d + a * f) / (d + f);
            jui.util.isValidNumber(d) || (d = 0);
            c = d * (1 / c);
            d = this._ui_fill.getScaleY();
            (f = this._ui_fill.getActionByTag(this.ANIM_SCALE_TAG)) && this._ui_fill.stopAction(f);
            b ? (f = cc.scaleTo(this._animate.delay, c, d), f.setTag(this.ANIM_SCALE_TAG), this._ui_fill.runAction(f)) : this._ui_fill.setScaleX(c)
        }
    },
    bindValue: function (a) {
        this.setValue(a());
        return a.subscribe(function (a) {
            this.setValue(a)
        }, this)
    },
    bindMin: function (a) {
        this.setRange(a(),
            this._max);
        return a.subscribe(function (a) {
            this.setRange(a, this._max)
        }, this)
    },
    bindMax: function (a) {
        this.setRange(this._min, a());
        return a.subscribe(function (a) {
            this.setRange(this._min, a)
        }, this)
    },
    onEnter: function () {
        this._super();
        this.setValue(this.getValue())
    }
});
jui.ProgressBox.Mode = jcore.Enum.create({
    horizontal: 0,
    vertical: 1
});
jui.ProgressBox.Config = cc.Class.extend({
    track: null,
    fill: null,
    ctor: function () {
        this.fill = this.track = null;
        arguments && 0 < arguments.length && _.extend(this, arguments[0])
    }
});
jui.Func = cc.Class.extend({
    _selector: null,
    _selectorTarget: null,
    ctor: function (a, b) {
        this._selector = a;
        this._selectorTarget = b
    },
    callFunc: function (a) {
        this._selector && this._selectorTarget && this._selector.call(this._selectorTarget, a)
    },
    callFuncAndReturn: function (a) {
        if (this._selector && this._selectorTarget) return this._selector.call(this._selectorTarget, a)
    }
});
jui.SpinnerButton = jui.Widget.extend({
    _ui_increaseButton: null,
    _ui_decreaseButton: null,
    _ui_menu: null,
    _value: 0,
    _min_value: 0,
    _max_value: 100,
    _increment: 1,
    _setValue: null,
    _getValue: null,
    _sound_asset: null,
    _layout: null,
    ctor: function (a, b, c) {
        this._super(b, c);
        b = jcore.util.isNotNull(b) && jcore.util.isNotNull(c);
        a && (a instanceof cc.Sprite ? this.setBackgroundSprite(a, !b, jui.SizeMode.stretch_non_proportional) : "object" === typeof a && (jui.Widget.configureAttachmentsWithConfig(this, null, null, a), _.defaults(a.button_decrease, {
                assetFolder: a.assetFolder
            }), _.defaults(a.button_increase, {
                assetFolder: a.assetFolder
            }), this._ui_decreaseButton = new jui.Button(a.button_decrease), this._ui_decreaseButton.addClickEventListener(_.bind(function () {
                this._onDecCallback()
            }, this)), this._ui_increaseButton = new jui.Button(a.button_increase), this._ui_increaseButton.addClickEventListener(_.bind(function () {
                this._onIncCallback()
            }, this)), this._ui_decreaseButton.setAnchorPoint(cc.p(0, 0.5)), this._ui_decreaseButton.setPosition(cc.p(0, this._ui_decreaseButton.getContentSize().height /
                2)), this._ui_increaseButton.setAnchorPoint(cc.p(0, 0.5)), this._ui_increaseButton.setPosition(cc.p(this._ui_decreaseButton.getContentSize().width, this._ui_increaseButton.getContentSize().height / 2)), a = cc.size(this._ui_decreaseButton.getContentSize().width + this._ui_increaseButton.getContentSize().width, Math.max(this._ui_decreaseButton.getContentSize().height, this._ui_increaseButton.getContentSize().height)), b = new cc.Node, b.setContentSize(a), b.addChild(this._ui_decreaseButton), b.addChild(this._ui_increaseButton),
            this.setContentNode(b)))
    },
    setRange: function (a, b) {
        this._min_value = a;
        this._max_value = b
    },
    setIncrement: function (a) {
        this._increment = a
    },
    setGetter: function (a, b) {
        this._getValue = new jui.Func(a, b)
    },
    setSetter: function (a, b) {
        this._setValue = new jui.Func(a, b)
    },
    _onIncCallback: function (a) {
        a = this._value;
        this._getValue && (a = this._getValue.callFuncAndReturn());
        this._value = a = Math.max(this._min_value, Math.min(this._max_value, a + this._increment));
        this._setValue && this._setValue.callFunc(a)
    },
    _onDecCallback: function (a) {
        a = this._value;
        this._getValue && (a = this._getValue.callFuncAndReturn());
        this._value = a = Math.max(this._min_value, Math.min(this._max_value, a - this._increment));
        this._setValue && this._setValue.callFunc(a)
    },
    _currentMinSub: null,
    _currentMaxSub: null,
    bindMinimumValue: function (a) {
        null != a && (this._min_value = a(), this._currentMinSub = a.subscribe(function (a) {
            this._min_value = a
        }, this));
        return this._currentMinSub
    },
    bindMaximumValue: function (a) {
        null != a && (this._max_value = a(), this._currentMaxSub = a.subscribe(function (a) {
                this._max_value = a
            },
            this));
        return this._currentMaxSub
    }
});
jui.Slider = jui.ProgressBox.extend({
    _ui_handle: null,
    _handle_padding: new jui.Margin,
    _dragging: !1,
    _dragoffset: 0,
    _lastDragPosition: null,
    _incrementValue: 0.1,
    ctor: function (a, b, c, d) {
        this._super(a, b, c, d);
        jcore.util.isNotNull(b) && jcore.util.isNotNull(c);
        b = null;
        a instanceof jui.Slider.Config && jcore.util.isNotNull(a.handle) && (this._handle_padding = new jui.Margin(a.handlePadding), b = a.handle, "string" === typeof b ? b = jui.util.sprite.create(b) : !jui.util.isInstanceOfSprite(b) && "object" === typeof a && (b = new jui.Widget,
            jui.Widget.configureAttachmentsWithConfig(b, null, null, a.handle)));
        if (this._ui_handle = b) this.addChild(this._ui_handle), this.setTouchEnabled(!0), this._positionTrackHandle()
    },
    getIncrementValue: function () {
        return this._incrementValue
    },
    setIncrementValue: function (a) {
        this._incrementValue = Math.max(jcore.util.toDecimal(a, 1), 0.01)
    },
    getHandleBounds: function () {
        return cc.rect(this._handle_padding.l, this._handle_padding.b, this.width - this._handle_padding.l - this._handle_padding.r, this.height - this._handle_padding.b -
            this._handle_padding.t)
    },
    _positionTrackHandle: function () {
        this._ui_handle && (this._ui_handle.setAnchorPoint(cc.p(0.5, 0.5)), this.getMode() === jui.ProgressBox.Mode.horizontal ? this._ui_handle.setPosition(cc.p(this._handle_padding.l, this.height / 2)) : this._ui_handle.setPosition(cc.p(this.width / 2, this._handle_padding.b)))
    },
    _getIncrementValueAsPercentage: function () {
        return 100 * (this.getIncrementValue() / (this.getRangeMax() - this.getRangeMin()))
    },
    _updateFillPercentage: function (a, b) {
        this._super(a, b);
        if (this._ui_handle) {
            var c =
                this.getHandleBounds(),
                c = this.getMode() === jui.ProgressBox.Mode.horizontal ? cc.p(c.x + c.width * a, c.y + c.height / 2) : cc.p(c.x + c.width / 2, c.y + c.height * a);
            this._ui_handle.setPosition(c)
        }
    },
    _handleHitTest: function (a) {
        if (this._ui_handle) {
            var b = this._ui_handle.getBoundingBox();
            return cc.rectContainsPoint(b, this.convertToNodeSpace(a))
        }
        return !1
    },
    _pushDownEvent: function () {
        this._super();
        if (this._ui_handle) {
            var a = this.getTouchBeganPosition(),
                b = this.convertToNodeSpace(a),
                a = this._handleHitTest(a);
            this._dragging = !0;
            this.getMode() ===
                jui.ProgressBox.Mode.horizontal ? (this._lastDragPosition = this._ui_handle.getPosition().x, this._dragoffset = a ? this._ui_handle.getPosition().x - b.x : 0) : (this._lastDragPosition = this._ui_handle.getPosition().y, this._dragoffset = a ? this._ui_handle.getPosition().y - b.y : 0);
            a || this._setSliderValueByPosition(b)
        }
    },
    _moveEvent: function () {
        this._super();
        this._dragging && this._ui_handle && this._setSliderValueByPosition(this.convertToNodeSpace(this.getTouchMovePosition()))
    },
    _setSliderValueByPosition: function (a) {
        var b = this.getHandleBounds();
        if (this.getMode() === jui.ProgressBox.Mode.horizontal) {
            a = a.x + this._dragoffset;
            b = 100 * ((a - b.x) / b.width);
            99.99 < b ? b = 100 : 0.01 > b && (b = 0);
            if (0 !== b && 100 !== b) {
                a = this._getIncrementValueAsPercentage();
                var c = b % a,
                    d = 0 < this._lastDragPosition - this._ui_handle.getPosition().x,
                    b = d ? b - c : b + (a - c)
            }
            this.setValueAsPercentage(b);
            this._lastDragPosition = this._ui_handle.getPosition().x
        } else a = a.y + this._dragoffset, b = 100 * ((a - b.y) / b.height), 99.99 < b ? b = 100 : 0.01 > b && (b = 0), 0 !== b && 100 !== b && (a = this._getIncrementValueAsPercentage(), c = b % a, b =
            (d = 0 < this._lastDragPosition - this._ui_handle.getPosition().y) ? b - c : b + (a - c)), this.setValueAsPercentage(b), this._lastDragPosition = this._ui_handle.getPosition().y
    },
    _releaseUpEvent: function () {
        this._super();
        this._dragging = !1
    },
    _cancelUpEvent: function () {
        this._super();
        this._dragging = !1
    }
});
jui.Slider.Config = jui.ProgressBox.Config.extend({
    handle: null,
    handlePadding: new jui.Margin,
    ctor: function () {
        this._super();
        this.handle = null;
        arguments && 0 < arguments.length && _.extend(this, arguments[0])
    }
});
jui.CCSContainer = jui.Widget.extend({
    _ccsuiFileName: null,
    _ccsNode: null,
    ctor: function (a) {
        this._ccsuiFileName = a;
        this._ccsNode = jui.util.loadCCSNode(this._ccsuiFileName);
        this._super(this._ccsNode.width, this._ccsNode.height)
    },
    getCCSNode: function () {
        return this._ccsNode
    },
    findCCSNode: function (a, b) {
        return b ? jui.util.getChildByNameRecursive(b, a) : jui.util.getChildByNameRecursive(this.getCCSNode(), a)
    },
    _initContentNode: function () {
        this._contentNode = this._ccsNode;
        this._contentNode.setAnchorPoint(cc.p(0.5, 0.5));
        this.addChild(this._contentNode,
            jui.WidgetLayers.UI)
    }
});
jui.Busy = jui.Image.extend({
    _config: {
        sprites: [{
            name: "progress",
            asset: R.sprites.icon_busy,
            animationTypeList: [{
                type: jui.AnimationType.full_spin,
                params: {
                    loop: !0,
                    duration: 4
                }
            }]
        }]
    },
    ctor: function (a) {
        this._super(jcore.util.orDefault(a, this._config))
    },
    beginLoading: function () {
        this.isShowing() || (this.show(), this.setVisualState(jui.VisualState.animate))
    },
    endLoading: function () {
        this.fadeOut()
    }
});
jui.LoadingPanel = jui.Panel.extend({
    _defaultTextStyle: new jui.TextStyle({
        name: R.fonts.white_bold_18,
        type: jui.FontType.bitmap,
        color: cc.color(255, 255, 255)
    }),
    _loading_panel_background: R.sprites.startup_panel,
    _loading_background: R.sprites.startup_background,
    _ui_loadingPanel: null,
    _ui_loadingIcon: null,
    _ui_statusLabel: null,
    _ui_versionLabel: null,
    _ui_buttonPanel: null,
    _currentLoadingSpriteConfig: null,
    _defaultLoadingSpriteConfig: null,
    ctor: function () {
        this._super(jui.Globals.designWidth, jui.Globals.designHeight);
        this.setName("LoadingLayer");
        this.setLayout(new jui.ScaledLayout);
        jui.Globals.isScreenLarge() ? this.getLayout().setMaxScale(2.15, 2.15) : this.getLayout().setMaxScale(1.25, 1.25);
        this._loading_background && this.setBackground(this._loading_background);
        if (null == this._defaultLoadingSpriteConfig) {
            var a = OWGameChunkManager.getInstance().getChunk("lobby");
            a && this.setDefaultSpriteConfig(a.getChunkConfig())
        }
    },
    setDefaultSpriteConfig: function (a) {
        this._defaultLoadingSpriteConfig = a
    },
    _setupVersionLabel: function (a) {
        this._ui_versionLabel =
            new jui.TextBox(100, 30);
        this._ui_versionLabel.setTextColor(this._defaultTextStyle.color);
        this._ui_versionLabel.setTextSize(12);
        this._ui_versionLabel.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_RIGHT);
        this._ui_versionLabel.setHorizontalAlignment(jui.HorizontalAlignment.right);
        this._ui_versionLabel.setVerticalAlignment(jui.VerticalAlignment.bottom);
        this._ui_versionLabel.setMargin({
            l: 6,
            r: 6,
            t: 6,
            b: 6
        });
        this._ui_versionLabel.setTextValue(jcore.App.getInstance().getVersion());
        this._ui_versionLabel.setOpacity(75);
        a.addWidgetChild(this._ui_versionLabel, jui.WidgetLayers.Overlay)
    },
    onHideComplete: function () {
        this._super();
        this._resetLoadingPanel()
    },
    hideActionButtons: function () {
        null != this._ui_buttonPanel && this._ui_buttonPanel.setVisible(!1)
    },
    showActionButtons: function () {
        null != this._ui_buttonPanel && !this._ui_buttonPanel.isShowing() && (this.onUpdateProgressStatus("READY"), this._ui_buttonPanel.fadeIn(0.5))
    },
    _resetLoadingPanel: function () {
        null != this._ui_loadingIcon && this._ui_loadingIcon.removeAllChildren();
        null != this._ui_loadingPanel &&
            (this._ui_loadingPanel.removeAllChildren(), this.removeWidgetChild(this._ui_loadingPanel));
        this._ui_loadingPanel = this._ui_loadingIcon = null
    },
    _createLoadingPanel: function (a) {
        this._resetLoadingPanel();
        this._ui_loadingPanel = new jui.Panel(1, 1);
        this._ui_loadingPanel.setName("ui_loadingPanel");
        this._ui_loadingPanel.setLayout(new jui.StackLayout(!1));
        this._ui_loadingPanel.setHorizontalAlignment(jui.HorizontalAlignment.center);
        this._ui_loadingPanel.setVerticalAlignment(jui.VerticalAlignment.center);
        this._ui_loadingPanel.beginInitChildren();
        this._ui_loadingIcon = this._createLoadingIcon(a);
        null != this._ui_loadingIcon ? a !== this._defaultLoadingSpriteConfig ? (a = new jui.Panel, a.setLayout(new jui.DockLayout), a.setHorizontalAlignment(jui.HorizontalAlignment.center), a.setVerticalAlignment(jui.VerticalAlignment.center), a.setMargin({
                l: 0,
                t: 20,
                b: 10,
                r: 0
            }), a.setPadding({
                l: 0,
                t: 0,
                b: 0,
                r: 0
            }), this._loading_panel_background ? (a.setBackground(R.sprites.startup_panel, !0), a.addWidgetChild(this._ui_loadingIcon)) : (a.addWidgetChild(this._ui_loadingIcon), a.setContentSizeToChildrenWidthAndHeight()),
            this._ui_loadingPanel.addWidgetChild(a)) : this._ui_loadingPanel.addWidgetChild(this._ui_loadingIcon) : cc.log("no loading icon created!");
        this._ui_statusLabel = new jui.TextBox(400, 40, this._defaultTextStyle);
        this._ui_statusLabel.setCenterAlignment();
        this._ui_loadingPanel.addWidgetChild(this._ui_statusLabel);
        this._ui_buttonPanel = new jui.Panel(1, 1);
        this._ui_buttonPanel.setLayout(new jui.StackLayout(!0));
        this._ui_buttonPanel.setMargin({
            l: 0,
            t: 10,
            r: 0,
            b: 5
        });
        this._ui_buttonPanel.setHorizontalAlignment(jui.HorizontalAlignment.center);
        this.createActionButtons(this._ui_buttonPanel);
        this._ui_buttonPanel.setContentSizeToChildrenWidthAndHeight();
        this._ui_loadingPanel.addWidgetChild(this._ui_buttonPanel);
        this._ui_loadingPanel.endInitChildren();
        jui.Globals.isScreenLarge() ? this._ui_loadingPanel.setMargin({
            l: 30,
            t: 30,
            r: 30,
            b: 30
        }) : this._ui_loadingPanel.setMargin({
            l: 10,
            t: 10,
            r: 10,
            b: 10
        });
        this.addWidgetChild(this._ui_loadingPanel, jui.WidgetLayers.UI);
        this._ui_loadingPanel.invalidateLayout(!0);
        this._ui_loadingPanel.setContentSizeToChildrenWidthAndHeight();
        this._ui_loadingPanel.invalidateLayout(!0);
        this.hideActionButtons()
    },
    _createLoadingIcon: function (a) {
        cc.log("creating loading icon...");
        var b = new jui.Widget;
        b.setCenterAlignment();
        jcore.util.isNotNull(a) && jcore.util.isNotNull(a.loadingIcon) && jui.Widget.configureAttachmentsWithConfig(b, null, null, a.loadingIcon);
        return b
    },
    createActionButtons: function (a) {},
    onUpdateProgressStatus: function (a, b, c, d) {}
});
jui.ValueConverter = cc.Class.extend({
    ctor: function () {},
    convertValue: function (a) {
        return a
    }
});
Number.prototype.numberFormat = function (a, b, c) {
    b = "undefined" !== typeof b ? b : ".";
    c = "undefined" !== typeof c ? c : ",";
    a = this.toFixed(a).toString().split(".");
    a[0] = a[0].replace(/\B(?=(\d{3})+(?!\d))/g, c);
    return a.join(b)
};
jui.NumberToStringConverter = jui.ValueConverter.extend({
    _showZeroValue: !0,
    _fixedDecimals: null,
    ctor: function (a) {
        this._super();
        this._fixedDecimals = a
    },
    setShowZeroValue: function (a) {
        this._showZeroValue = a
    },
    setFixedDecimals: function (a) {
        this._fixedDecimals = a
    },
    convertValue: function (a) {
        return !this._showZeroValue && (!jui.util.isValidNumber(a) || 0 == a) ? "" : jui.util.isValidNumber(a) ? jui.util.isValidNumber(this._fixedDecimals) ? Number(a).numberFormat(this._fixedDecimals) : Number(a).numberFormat(0) : "0"
    }
});
jui.NumberToStringConverter.default = new jui.NumberToStringConverter;
jui.SecondsToTimeStringConverter = jui.ValueConverter.extend({
    _showZeroValue: !0,
    _shortMode: !1,
    _zeroDisplayValue: "0:00",
    _showMinCutOff: 0,
    ctor: function (a, b) {
        this._shortMode = a;
        jcore.util.isDefined(b) && (this._zeroDisplayValue = b)
    },
    setShowZeroValue: function (a) {
        this._showZeroValue = a
    },
    setZeroDisplayValue: function (a) {
        this._zeroDisplayValue = a
    },
    convertValue: function (a) {
        if (!jui.util.isValidNumber(a) || 0 >= a) return this._showZeroValue ? this._zeroDisplayValue : "";
        var b = Math.floor(a / 60 / 60),
            c = Math.floor(a / 60) - 60 * b,
            d = Math.floor(a -
                60 * c - 3600 * b),
            f = "";
        this._shortMode && (0 < b || 10 < c) ? 0 < b ? f += "" + b + "hr " : 0 < c && (f += "" + c + "min") : 0 >= a ? f = "0:00" : (0 < b && (f += "" + b + ":"), f = 0 < c ? f + ("" + c + ":") : f + (0 < b ? "00:" : "0:"), f = 0 < d ? f + ((10 > d ? "0" : "") + d) : f + "00");
        return f
    }
});
jui.Effects = cc.Class.extend({});
jui.Effects.DefaultButtonClick = function (a) {
    return jui.Effects.PressedIn(a)
};
jui.Effects.PressedIn = function (a, b, c) {
    if (!jcore.util.isNull(a)) {
        b = jcore.util.orDefault(b, 0.1);
        c = -0.1 * jcore.util.orDefault(c, 1);
        var d = a.getScaleX(),
            f = a.getScaleY();
        a.runAction(cc.sequence(cc.scaleTo(b, d + c, f + c), cc.scaleTo(b, d, f)));
        return a
    }
};
jui.Effects.PressedOut = function (a, b, c) {
    if (!jcore.util.isNull(a)) {
        b = 0.5 * jcore.util.orDefault(b, 0.2);
        c = 0.1 * jcore.util.orDefault(c, 1);
        var d = a.getScaleX(),
            f = a.getScaleY();
        a.runAction(cc.sequence(cc.scaleTo(b, d + c, f + c), cc.scaleTo(b, d, f)));
        return a
    }
};
jui.Effects.CallFunction = function (a, b, c, d) {
    !jcore.util.isNull(a) && !jcore.util.isNull(c) && (b = jcore.util.orDefault(b, 0), 0 < b ? a.runAction(cc.sequence(cc.delayTime(b), cc.callFunc(c, d))) : c.call(d, a))
};
jui.Effects.FadeInAndOut = function (a, b, c, d, f) {
    if (!jcore.util.isNull(a)) {
        b = jcore.util.orDefault(b, 0.1);
        c = jcore.util.orDefault(c, 0.1);
        d = jcore.util.orDefault(d, 0);
        var g = [];
        0 < d && g.push(cc.delayTime(d));
        a instanceof jui.Widget ? (g.push(cc.callFunc(_.bind(a.fadeIn, a, b))), g.push(cc.delayTime(c)), f ? g.push(cc.callFunc(_.bind(a.fadeOutAndRemove, a, b))) : g.push(cc.callFunc(_.bind(a.fadeOut, a, b)))) : (a.isVisible() || a.setVisible(!0), g.push(cc.fadeIn(b)), g.push(cc.delayTime(c)), g.push(cc.fadeOut(b)), f && g.push(cc.removeSelf()));
        a.runAction(cc.sequence(g));
        return a
    }
};
jui.LayoutSizeMode = {
    size_by_scaling: 0,
    size_by_content: 1
};
jui.LayoutProperties = cc.Class.extend({
    _width_size_mode: 0,
    _height_size_mode: 0
});
jui.Layout = cc.Class.extend({
    _thePanel: null,
    _layoutBusy: !1,
    _animated: !1,
    _animated_duration: 0.3,
    _profileItem: null,
    ctor: function () {
        this._profileItem = jcore.Profiler.getInstance().getItem("Layout._doLayout")
    },
    getPanel: function () {
        return this._thePanel
    },
    setPanel: function (a) {
        this._thePanel = a
    },
    isLayoutBusy: function () {
        return this._layoutBusy
    },
    setAnimated: function (a, b) {
        this._animated = jcore.util.orDefault(!!a, !0);
        this._animated_duration = jcore.util.orDefault(b, this._animated_duration)
    },
    isAnimated: function () {
        return this._animated
    },
    getAnimatedDuration: function () {
        return this._animated_duration
    },
    requiresLayoutInvalidation: function (a) {
        return !0
    },
    measureLayout: function () {
        var a = cc.size(0, 0);
        if (this._thePanel) {
            var b = this._thePanel.getChildren();
            this._thePanel.getChildrenCount();
            a = this._thePanel.getContentSize();
            this._thePanel.isClipping() && (b = this._thePanel.getClippedChildren(), this._thePanel.getClippedChildrenCount());
            if (b) {
                var a = jui.Margin(),
                    c = this._thePanel.getContentSize();
                this._thePanel.hasPadding() && (a = this._thePanel.getPadding(),
                    c = this._thePanel._getContentNodeSize());
                a = this._measureLayout(b, a.l, a.t, a.r, a.b, c)
            }
        }
        return a
    },
    beginLayout: function (a) {
        if (!this._layoutBusy) {
            this._layoutBusy = !0;
            try {
                this._doLayout(a)
            } finally {
                this._layoutBusy = !1
            }
        }
    },
    getItemLayoutProperties: function (a) {
        return a.layout_properties
    },
    setItemPosition: function (a, b, c, d, f) {
        !jcore.util.isNull(a) && !jcore.util.isNull(b) && !jcore.util.isNull(c) && (a.x !== b || a.y !== c) && this._setItemPosition(a, this.getItemLayoutProperties(a), b, c, d, f)
    },
    setItemSize: function (a, b, c) {
        !jcore.util.isNull(a) &&
            !jcore.util.isNull(b) && !jcore.util.isNull(c) && (a.width !== b || a.height !== c) && this._setItemSize(a, this.getItemLayoutProperties(a), b, c)
    },
    _doLayout: function (a) {
        if (this._thePanel) {
            var b = this._thePanel.getChildren(),
                c = this._thePanel.getChildrenCount();
            this._thePanel.isClipping() && (b = this._thePanel.getClippedChildren(), c = this._thePanel.getClippedChildrenCount());
            if (!(1 > c) && b) {
                var d = jui.Margin(),
                    f = this._thePanel.getContentSize();
                this._thePanel.hasPadding() && (d = this._thePanel.getPadding(), f = this._thePanel._getContentNodeSize());
                if (!(0 >= f.width && 0 >= f.height)) {
                    this._profileItem && this._profileItem.start();
                    b = this._beginLayout(b, d.l, d.t, d.r, d.b, f);
                    for (d = 0; d < c; d++)
                        if (f = b[d]) {
                            var g = f.layout_properties;
                            g || (f.layout_properties = g = {});
                            jcore.util.isNotNull(g.animation);
                            this._doItemLayout(f, g)
                        } for (d = 0; d < c; d++)(f = b[d]) && (f._isjuiWidget && f.validateLayout) && f.validateLayout(a);
                    this._endLayout();
                    this._profileItem && this._profileItem.end()
                }
            }
        }
    },
    _measureLayout: function (a, b, c, d, f, g) {
        return cc.size(b + d + g.width, f + c + g.height)
    },
    _beginLayout: function (a,
        b, c, d, f, g) {
        return a
    },
    _endLayout: function () {},
    _doItemLayout: function (a, b) {},
    _getItemPosition: function (a, b) {
        return !a ? cc.p(0, 0) : b && b.animation && b.animation.hasPosition(a) ? b.animation.getPosition() : a.getPosition()
    },
    _getItemScale: function (a, b) {
        return !a ? cc.p(1, 1) : b && b.animation && b.animation.hasScale(a) ? b.animation.getScale() : cc.p(a.scaleX, a.scaleY)
    },
    _getItemSize: function (a, b) {
        return !a ? cc.size(0, 0) : a.getContentSize()
    },
    _setItemPosition: function (a, b, c, d, f, g) {
        a && (jcore.util.isNotNull(b) ? f || g ? (jcore.util.isNull(b.animation) &&
            (b.animation = new jui.LayoutAnimationProperties), b.animation.moveTo(this._animated_duration, a, c, d)) : (jcore.util.isNotNull(b.animation) && b.animation.stopPositionAnimation(a), a.setPosition(cc.p(c, d))) : a.setPosition(cc.p(c, d)))
    },
    _setItemScale: function (a, b, c, d, f) {
        a && (jcore.util.isNotNull(b) ? f ? (jcore.util.isNull(b.animation) && (b.animation = new jui.LayoutAnimationProperties), b.animation.scaleTo(this._animated_duration, a, c, d)) : (jcore.util.isNotNull(b.animation) && b.animation.stopScaleAnimation(a), a.scaleX =
            c, a.scaleY = d) : (a.scaleX = c, a.scaleY = d))
    },
    _setItemSize: function (a, b, c, d) {
        a && a.setContentSize(c, d)
    }
});
jui.Layout.POSITION_ACTION_TAG = 80085;
jui.Layout.SCALE_ACTION_TAG = 80086;
jui.Layout.InvalidateType = jcore.Enum.create({
    show: 2,
    hide: 4,
    size: 8,
    position: 16,
    alignment: 32,
    addChild: 64,
    removeChild: 128,
    any: 4294967295
});
jui.LayoutAnimationProperties = cc.Class.extend({
    _target_pos: cc.p(0, 0),
    _target_scale: cc.p(0, 0),
    hasPosition: function (a) {
        return null == a || null == this._target_pos ? !1 : (a = a.getActionByTag(jui.Layout.POSITION_ACTION_TAG)) ? !a.isDone() : !1
    },
    getPosition: function () {
        return this._target_pos
    },
    hasScale: function (a) {
        return null == a || null == this._target_scale ? !1 : (a = a.getActionByTag(jui.Layout.SCALE_ACTION_TAG)) ? !a.isDone() : !1
    },
    getScale: function () {
        return this._target_scale
    },
    moveTo: function (a, b, c, d) {
        if (null == this._target_pos ||
            this._target_pos.x !== c || this._target_pos.y !== d) this.stopPositionAnimation(b), this._target_pos = cc.p(c, d), a = cc.moveTo(a, this._target_pos), a.setTag(jui.Layout.POSITION_ACTION_TAG), b.runAction(a)
    },
    scaleTo: function (a, b, c, d) {
        if (null === this._target_scale || this._target_scale.x !== c || this._target_scale.y !== d) this.stopScaleAnimation(b), this._target_scale = cc.p(c, d), a = cc.scaleTo(a, c, d), a.setTag(jui.Layout.SCALE_ACTION_TAG), b.runAction(a)
    },
    stopPositionAnimation: function (a) {
        if (a) {
            var b = a.getActionByTag(jui.Layout.POSITION_ACTION_TAG);
            b && a.stopAction(b)
        }
        this._target_pos = null
    },
    stopScaleAnimation: function (a) {
        if (jcore.util.isNotNull(a)) {
            var b = a.getActionByTag(jui.Layout.SCALE_ACTION_TAG);
            jcore.util.isNotNull(b) && a.stopAction(b)
        }
        this._target_scale = null
    },
    stopAnimations: function (a) {
        this.stopPositionAnimation(a);
        this.stopScaleAnimation(a)
    }
});
jui.LayoutManager = cc.Class.extend({
    _inited: !1,
    _listener: null,
    _layoutQueue: null,
    _lastEnqueued: null,
    _nextFrameQueue: null,
    _profileItem: null,
    ctor: function () {
        this._layoutQueue = [];
        this._nextFrameQueue = []
    },
    init: function () {
        this._inited || (this._listener = cc.eventManager.addCustomListener(cc.Director.EVENT_AFTER_UPDATE, _.bind(this.validateLayout, this)), this._inited = !0)
    },
    enqueueLayout: function (a) {
        if (a && a.validateLayout) {
            if (this._lastEnqueued) {
                if (this._lastEnqueued === a || this._lastEnqueued === a.getParent()) return;
                this._lastEnqueued.getParent() === a && this._layoutQueue.pop()
            }
            this._layoutQueue.push(a);
            this._lastEnqueued = a
        }
    },
    enqueueLayoutNextFrame: function (a) {
        a && a.validateLayout && this._nextFrameQueue.push(a)
    },
    validateLayout: function () {
        var a = 0;
        for (this._profileItem && this._profileItem.start(); 0 < this._layoutQueue.length;) this._lastEnqueued = null, this._layoutQueue.pop().validateLayout(), a++;
        for (var b = 0; b < this._nextFrameQueue.length; b++) this.enqueueLayout(this._nextFrameQueue[b]);
        this._nextFrameQueue = [];
        this._profileItem &&
            (0 < a && jcore.log.debug("layout length: " + a), this._profileItem.end())
    }
});
jui.LayoutManager.getInstance = function () {
    jui.LayoutManager._singleton_instance || (jui.LayoutManager._singleton_instance = new jui.LayoutManager);
    return jui.LayoutManager._singleton_instance
};
jui.NoneLayout = jui.Layout.extend({
    requiresLayoutInvalidation: function (a) {
        return !1
    },
    _doItemLayout: function (a, b, c) {}
});
jui.DefaultLayout = jui.Layout.extend({
    _panel_size: cc.size(0, 0),
    _paddingLeft: 0,
    _paddingTop: 0,
    _paddingRight: 0,
    _paddingBottom: 0,
    ctor: function () {
        this._super()
    },
    requiresLayoutInvalidation: function (a) {
        return 0 !== (a & (jui.Layout.InvalidateType.alignment | jui.Layout.InvalidateType.size | jui.Layout.InvalidateType.show | jui.Layout.InvalidateType.addChild))
    },
    _beginLayout: function (a, b, c, d, f, g) {
        this._paddingLeft = b;
        this._paddingTop = c;
        this._paddingRight = d;
        this._paddingBottom = f;
        this._panel_size = cc.size(g.width, g.height);
        return a
    },
    _doItemLayout: function (a, b, c) {
        var d = a._isjuiAttachment;
        if (a._isjuiWidget && !d) {
            a.getContentSize();
            var f = a.getMargin(),
                g = a.getHorizontalAlignment(),
                h = a.getVerticalAlignment(),
                m = this._getItemPosition(a),
                d = m.x,
                n = m.y,
                p = this._getItemSize(a),
                u = p.height,
                v = p.width,
                x = v,
                y = u;
            g !== jui.HorizontalAlignment.none && 0.5 !== a.anchorX && (a.anchorX = 0.5);
            h !== jui.VerticalAlignment.none && 0.5 !== a.anchorY && (a.anchorY = 0.5);
            switch (g) {
            case jui.HorizontalAlignment.center:
                d = this._paddingLeft + this._panel_size.width / 2;
                break;
            case jui.HorizontalAlignment.left:
                d = this._paddingLeft + f.l + v / 2;
                break;
            case jui.HorizontalAlignment.right:
                d = this._paddingLeft + this._paddingRight + this._panel_size.width - f.r - v / 2;
                break;
            case jui.HorizontalAlignment.stretch:
                x = this._panel_size.width - f.r - f.l, d = this._paddingLeft + f.l + x / 2
            }
            switch (h) {
            case jui.VerticalAlignment.center:
                n = this._paddingBottom + this._panel_size.height / 2;
                break;
            case jui.VerticalAlignment.bottom:
                n = this._paddingBottom + f.b + u / 2;
                break;
            case jui.VerticalAlignment.top:
                n = this._paddingBottom + this._panel_size.height -
                    f.t - u / 2;
                break;
            case jui.VerticalAlignment.stretch:
                y = this._panel_size.height - f.t - f.b, n = this._paddingBottom + f.b + y / 2
            }
            if (c) return a = x, b = y, p.width === x && (a += margin.l + margin.r), p.height === y && (b += margin.b + margin.t), cc.rect(d - x / 2, n - y / 2, a, b);
            (m.x !== d || m.y !== n) && this._setItemPosition(a, b, d, n, this.isAnimated(), this.isAnimated());
            (p.width !== x || p.height !== y) && this._setItemSize(a, b, x, y, this.isAnimated())
        }
    }
});
jui.DockLayoutEdge = {
    top: 2,
    bottom: 3,
    left: 4,
    right: 5,
    fill: 6,
    fill_all: 7,
    none: 8,
    max: 9
};
jui.DockLayoutProps = cc.Class.extend({
    edge: jui.DockLayoutEdge.fill_all,
    allowOverlay: !1,
    scaleToFill: !1,
    ignoreFill: !1,
    ignoreFillWidth: !1,
    ignoreFillHeight: !1,
    ctor: function (a) {
        this.edge = a
    }
});
jui.DockLayoutPropsForEdge = function (a, b) {
    var c = new jui.DockLayoutProps(a);
    b && (c.ignoreFill = b);
    return c
};
jui.DockLayout = jui.Layout.extend({
    _offset_x: 0,
    _offset_y: 0,
    _paddingLeft: 0,
    _paddingTop: 0,
    _paddingRight: 0,
    _paddingBottom: 0,
    _panel_size: cc.size(0, 0),
    _available_size: cc.size(0, 0),
    _defaultLayoutEdge: jui.DockLayoutEdge.fill_all,
    ctor: function () {
        this._super()
    },
    setDefaultLayoutEdge: function (a) {
        this._defaultLayoutEdge = a
    },
    _beginLayout: function (a, b, c, d, f, g) {
        this._paddingLeft = b;
        this._paddingTop = c;
        this._paddingRight = d;
        this._paddingBottom = f;
        this._offset_y = this._offset_x = 0;
        this._panel_size = cc.size(g.width, g.height);
        this._available_size = cc.size(g.width, g.height);
        return _.sortBy(a.slice(), function (a) {
            return jcore.util.isNotNull(a.layout_properties) ? a.layout_properties.edge : jui.DockLayoutEdge.max
        })
    },
    _doItemLayout: function (a, b, c) {
        var d = a._isjuiWidget,
            f = a._isjuiAttachment;
        if (d && !f) {
            var g = this._defaultLayoutEdge;
            b && jcore.util.isDefined(b.edge) && (g = b.edge);
            if (!a.isVisible() || d && !a.isShowing())
                if (!b || !(b.allowOverlay || g == jui.DockLayoutEdge.fill_all)) return;
            if (g !== jui.DockLayoutEdge.none) {
                var d = this._getItemPosition(a,
                        b),
                    f = this._getItemSize(a, b),
                    h = this._getItemScale(a, b),
                    m = d.x,
                    n = d.y,
                    p = f.height,
                    u = f.width,
                    v = u,
                    x = p,
                    y = h.x,
                    z = h.y,
                    t = a.getMargin();
                a.setAnchorPoint(cc.p(0.5, 0.5));
                switch (g) {
                case jui.DockLayoutEdge.none:
                    break;
                case jui.DockLayoutEdge.top:
                    g = this._available_size.width - (t.l + t.r);
                    m = this._paddingLeft + t.l + g / 2;
                    n = this._paddingBottom + this._panel_size.height - (t.t + p / 2);
                    b && b.scaleToFill ? (z = jui.util.calculateScaleToSize(f, cc.size(g, p), !0), y = z.x, z = z.y) : (v = g, x = p);
                    if (!b || !b.allowOverlay) t = p + t.t + t.b, this._available_size.height -=
                        t;
                    break;
                case jui.DockLayoutEdge.bottom:
                    g = this._available_size.width - (t.l + t.r);
                    m = this._paddingLeft + t.l + g / 2;
                    n = this._paddingBottom + t.b + p / 2;
                    b && b.scaleToFill ? (z = jui.util.calculateScaleToSize(f, cc.size(g, p), !0), y = z.x, z = z.y) : (v = g, x = p);
                    if (!b || !b.allowOverlay) t = p + t.t + t.b, this._available_size.height -= t, this._offset_y += t;
                    break;
                case jui.DockLayoutEdge.left:
                    m = this._paddingLeft + this._offset_x + t.l + u / 2;
                    n = this._paddingBottom + this._offset_y + t.b + (this._available_size.height - t.t - t.b) / 2;
                    if (b && b.scaleToFill) z = jui.util.calculateScaleToSize(f,
                        cc.size(u, this._available_size.height), !0), y = z.x, z = z.y;
                    else if (!b || !b.ignoreFill && !b.ignoreFillWidth) v = u, x = this._available_size.height - t.t - t.b;
                    if (!b || !b.allowOverlay) t = this._offset_x + u + t.l + t.r, this._available_size.width -= t, this._offset_x += t;
                    break;
                case jui.DockLayoutEdge.right:
                    m = this._paddingLeft + this._panel_size.width - this._paddingRight - t.r - u / 2;
                    n = this._paddingBottom + this._offset_y + t.b + (this._available_size.height - t.t - t.b) / 2;
                    if (b && b.scaleToFill) z = jui.util.calculateScaleToSize(f, cc.size(u, this._available_size.height),
                        !0), y = z.x, z = z.y;
                    else if (!b || !b.ignoreFill && !b.ignoreFillWidth) v = u, x = this._available_size.height - t.t - t.b;
                    if (!b || !b.allowOverlay) t = u + t.l + t.r, this._available_size.width -= t;
                    break;
                case jui.DockLayoutEdge.fill:
                    g = Math.max(0, this._available_size.width - (t.l + t.r));
                    p = Math.max(0, this._available_size.height - (t.t + t.b));
                    m = this._paddingLeft + this._offset_x + t.l + g / 2;
                    n = this._paddingBottom + this._offset_y + t.b + p / 2;
                    b && b.scaleToFill ? (z = jui.util.calculateScaleToSize(f, cc.size(g, p), !0), y = z.x, z = z.y) : (v = b && (b.ignoreFill || b.ignoreFillWidth) ?
                        v : g, x = b && (b.ignoreFill || b.ignoreFillHeight) ? x : p);
                    break;
                default:
                    g = this._panel_size.width - t.l + t.r, p = this._panel_size.height - t.t + t.b, m = this._paddingLeft + t.l + g / 2, n = this._paddingBottom + t.b + p / 2, b && b.scaleToFill ? (z = jui.util.calculateScaleToSize(f, cc.size(g, p), !0), y = z.x, z = z.y) : (v = g, x = p)
                }
                if (c) return cc.rect(m - v / 2, n - x / 2, v, x);
                (d.x != m || d.y != n) && this._setItemPosition(a, b, m, n, this.isAnimated(), this.isAnimated());
                (h.x != y || h.y != z) && this._setItemScale(a, b, y, z, this.isAnimated());
                (f.width != v || f.height != x) && this._setItemSize(a,
                    b, v, x, this.isAnimated())
            }
        }
    }
});
jui.StackLayout = jui.Layout.extend({
    _paddingLeft: 0,
    _paddingTop: 0,
    _paddingRight: 0,
    _paddingBottom: 0,
    _panel_size: cc.size(0, 0),
    _offset_x: 0,
    _offset_y: 0,
    _horizontal: !0,
    _layoutHiddenItems: !1,
    _reverseLayoutDirection: !1,
    ctor: function (a) {
        this._super();
        this._horizontal = a
    },
    setLayoutHiddenItems: function (a) {
        this._layoutHiddenItems = a
    },
    setReverseLayoutDirection: function (a) {
        this._reverseLayoutDirection = a
    },
    requiresLayoutInvalidation: function (a) {
        var b = jui.Layout.InvalidateType.alignment | jui.Layout.InvalidateType.size |
            jui.Layout.InvalidateType.addChild | jui.Layout.InvalidateType.removeChild;
        this._layoutHiddenItems || (b = b | jui.Layout.InvalidateType.show | jui.Layout.InvalidateType.hide);
        return 0 !== (a & b)
    },
    _beginLayout: function (a, b, c, d, f, g) {
        this._initForLayout(b, c, d, f, g);
        return a
    },
    _initForLayout: function (a, b, c, d, f) {
        this._paddingLeft = a;
        this._paddingTop = b;
        this._paddingRight = c;
        this._paddingBottom = d;
        this._offset_x = this._paddingLeft;
        this._offset_y = this._paddingBottom + f.height;
        this._reverseLayoutDirection && (this._offset_x = this._paddingLeft +
            f.width, this._offset_y = this._paddingBottom);
        this._panel_size = cc.size(f.width, f.height);
        this._biggestHeight = 0
    },
    _measureLayout: function (a, b, c, d, f, g) {
        for (var h = g = 0, m = 0; m < a.length; m++) {
            var n = a[m];
            if (this._shouldLayoutItem(n)) {
                var p = n.getMargin(),
                    u = this._getItemSize(n),
                    n = u.height + p.t + p.b,
                    p = u.width + p.l + p.r;
                this._horizontal ? (g += p, h = Math.max(h, n)) : (g = Math.max(g, p), h += n)
            }
        }
        return cc.size(g + (d + b), h + (c + f))
    },
    _shouldLayoutItem: function (a) {
        if (!a) return !1;
        var b = a._isjuiWidget,
            c = a._isjuiAttachment;
        return !b || c || !this._layoutHiddenItems &&
            (!a.isVisible() || b && !a.isShowing()) ? !1 : !0
    },
    _doItemLayout: function (a, b, c) {
        if (this._shouldLayoutItem(a)) {
            var d = this._getItemPosition(a),
                f = d.x,
                g = d.y,
                h = this._getItemSize(a),
                m = h.height,
                n = h.width,
                p = n,
                u = m,
                v = a.getMargin();
            if (this._horizontal) switch (a.anchorX = 0.5, this._reverseLayoutDirection ? (f = this._offset_x - v.r - n / 2, this._offset_x = f - v.l - n / 2) : (f = this._offset_x + v.l + n / 2, this._offset_x = f + v.r + n / 2), a.getVerticalAlignment()) {
            case jui.VerticalAlignment.center:
                g = this._paddingBottom + this._panel_size.height / 2;
                a.anchorY =
                    0.5;
                break;
            case jui.VerticalAlignment.bottom:
                g = this._paddingBottom + v.b + m / 2;
                a.anchorY = 0.5;
                break;
            case jui.VerticalAlignment.top:
                g = this._paddingBottom + this._panel_size.height - v.t - m / 2;
                a.anchorY = 0.5;
                break;
            case jui.VerticalAlignment.stretch:
                g = this._paddingBottom + this._panel_size.height / 2, a.anchorY = 0.5, u = this._panel_size.height - (v.l + v.r)
            } else {
                switch (a.getHorizontalAlignment()) {
                case jui.HorizontalAlignment.center:
                    f = this._paddingLeft + this._panel_size.width / 2 + v.l - v.r;
                    a.anchorX = 0.5;
                    break;
                case jui.HorizontalAlignment.left:
                    f =
                        this._paddingLeft + v.l + n / 2;
                    a.anchorX = 0.5;
                    break;
                case jui.HorizontalAlignment.right:
                    f = this._paddingLeft + this._panel_size.width - this._paddingRight - v.r - n / 2;
                    a.anchorX = 0.5;
                    break;
                case jui.HorizontalAlignment.stretch:
                    p = this._panel_size.width - (v.l + v.r), f = this._paddingLeft + p / 2 + v.l, a.anchorX = 0.5
                }
                a.anchorY = 0.5;
                this._reverseLayoutDirection ? (g = this._offset_y + v.b + m / 2, this._offset_y = g + v.t + m / 2) : (g = this._offset_y - v.t - m / 2, this._offset_y = g - v.b - m / 2)
            }
            if (c) return a = p, b = u, h.width === p && (a += v.l + v.r), h.height === u && (b += v.b + v.t),
                cc.rect(f - p / 2, g - u / 2, a, b);
            (d.x !== f || d.y !== g) && this._setItemPosition(a, b, f, g, this.isAnimated(), this.isAnimated());
            (h.width !== p || h.height !== u) && this._setItemSize(a, b, p, u, this.isAnimated())
        }
    }
});
jui.StackLayout.VERTICAL = !1;
jui.StackLayout.HORIZONTAL = !0;
jui.GridLayoutProps = cc.Class.extend({
    _row: 0,
    _col: 0,
    ctor: function (a, b) {
        this._col = a;
        this._row = b
    }
});
jui.GridLayout = jui.Layout.extend({
    _paddingLeft: 0,
    _paddingTop: 0,
    _paddingRight: 0,
    _paddingBottom: 0,
    _panel_size: cc.size(0, 0),
    _offset_x: 0,
    _offset_y: 0,
    _horizontal: !0,
    ctor: function (a) {
        this._super();
        this._horizontal = a
    },
    _beginLayout: function (a, b, c, d, f, g) {
        this._paddingLeft = b;
        this._paddingTop = c;
        this._paddingRight = d;
        this._paddingBottom = f;
        this._offset_x = b;
        this._offset_y = f + g.height;
        this._panel_size = cc.size(g.width, g.height);
        return a
    },
    _doItemLayout: function (a, b) {
        var c = a._isjuiWidget,
            d = a._isjuiAttachment;
        c && !d &&
            a.isVisible() && (a.getContentSize(), a.getContentSize(), c && a.getMargin())
    }
});
jui.WrapLayout = jui.Layout.extend({
    _paddingLeft: 0,
    _paddingTop: 0,
    _paddingRight: 0,
    _paddingBottom: 0,
    _panel_size: cc.size(0, 0),
    _offset_x: 0,
    _offset_y: 0,
    _horizontal: !0,
    _biggestHeight: 0,
    ctor: function (a) {
        this._super();
        this._horizontal = jcore.util.orDefault(a, !0)
    },
    _initForLayout: function (a, b, c, d, f) {
        this._paddingLeft = a;
        this._paddingTop = b;
        this._paddingRight = c;
        this._paddingBottom = d;
        this._offset_x = a;
        this._offset_y = d + f.height;
        this._panel_size = cc.size(f.width, f.height);
        this._biggestHeight = 0
    },
    _measureLayout: function (a,
        b, c, d, f, g) {
        this._initForLayout(b, c, d, f, g);
        if (this._horizontal) {
            b = cc.rect(0, 0, g.width, 0);
            for (c = 0; c < a.length; c++)(d = this._doItemLayout(a[c], null, !0)) && (b = cc.rectUnion(b, d));
            return cc.size(b.width, b.height)
        }
        return cc.size(b + d + g.width, f + c + g.height)
    },
    _beginLayout: function (a, b, c, d, f, g) {
        this._initForLayout(b, c, d, f, g);
        return a
    },
    _doItemLayout: function (a, b, c) {
        var d = a._isjuiWidget,
            f = a._isjuiAttachment;
        if (d && !f && a.isVisible() && (!d || a.isShowing())) {
            var d = this._getItemSize(a),
                f = d.height,
                g = d.width,
                h = a.getMargin(),
                m = this._getItemPosition(a),
                n = m.x,
                p = m.y;
            if (this._horizontal) {
                if (this._offset_x + (h.l || 0) + g + (h.r || 0) >= this._panel_size.width) this._offset_x = this._paddingLeft, this._offset_y -= this._biggestHeight, this._biggestHeight = 0;
                n = this._offset_x + (h.l || 0);
                this._offset_x = n + g + (h.r || 0);
                n += g / 2;
                a.anchorX = 0.5;
                p = this._offset_y - (h.t || 0) - f / 2;
                a.anchorY = 0.5;
                this._biggestHeight = Math.max(this._biggestHeight, f + (h.t || 0) + (h.b || 0))
            }
            if (c) return cc.rect(n - g / 2, p - f / 2, g, f);
            (m.x != n || m.y != p) && this._setItemPosition(a, b, n, p, !this._horizontal &&
                this._animated, this._horizontal && this._animated);
            (d.width != g || d.height != f) && this._setItemSize(a, b, g, f, this.isAnimated())
        }
    }
});
jui.ScaledLayout = jui.Layout.extend({
    _max_scale: cc.p(-1, -1),
    _preserve_aspect: !0,
    _panel_size: cc.size(0, 0),
    _paddingLeft: 0,
    _paddingTop: 0,
    _paddingRight: 0,
    _paddingBottom: 0,
    ctor: function () {
        this._super()
    },
    setMaxScale: function (a, b) {
        this._max_scale = cc.p(a, b)
    },
    setPreserveAspectRatio: function (a) {
        this._preserve_aspect = a
    },
    requiresLayoutInvalidation: function (a) {
        return 0 !== (a & (jui.Layout.InvalidateType.size | jui.Layout.InvalidateType.addChild))
    },
    _getAdjustedItemSize: function (a, b) {
        return cc.size(a, b)
    },
    _beginLayout: function (a,
        b, c, d, f, g) {
        this._paddingLeft = b;
        this._paddingTop = c;
        this._paddingRight = d;
        this._paddingBottom = f;
        this._panel_size = cc.size(g.width, g.height);
        return a
    },
    _doItemLayout: function (a, b, c) {
        if (a._isjuiWidget) {
            var d = a.getMargin(),
                f = this._getItemPosition(a, b),
                g = f.x,
                h = f.y,
                g = this._getItemSize(a, b),
                g = this._getAdjustedItemSize(g.width, g.height),
                m = g.width,
                n = g.height,
                p = this._getItemScale(a, b),
                u = p.x,
                v = p.y,
                h = cc.size(this._panel_size.width - d.l - d.r, this._panel_size.height - d.t - d.b),
                u = Math.max(0, h.width / g.width),
                v = Math.max(0,
                    h.height / g.height);
            0 < this._max_scale.x && (u = Math.min(this._max_scale.x, u));
            0 < this._max_scale.y && (v = Math.min(this._max_scale.y, v));
            this._preserve_aspect && (u = v = Math.min(u, v));
            g = this._paddingLeft + d.l + h.width / 2;
            a.anchorX = 0.5;
            h = this._paddingBottom + d.b + h.height / 2;
            a.anchorY = 0.5;
            if (c) return cc.rect(g - m / 2, h - n / 2, m, n);
            (f.x != g || f.y != h) && this._setItemPosition(a, b, g, h, this.isAnimated(), this.isAnimated());
            (p.x != u || p.y != v) && this._setItemScale(a, b, u, v, this.isAnimated())
        }
    }
});
jui.ColumnLayoutProps = cc.Class.extend({
    percentage: 50,
    ctor: function (a) {
        this.percentage = a
    }
});
jui.ColumnLayout = jui.Layout.extend({
    _paddingLeft: 0,
    _paddingTop: 0,
    _paddingRight: 0,
    _paddingBottom: 0,
    _panel_size: cc.size(0, 0),
    _offset_x: 0,
    _offset_y: 0,
    _col_count: 1,
    _item_counter: 0,
    ctor: function (a) {
        this._super();
        this._col_count = jcore.util.orDefault(a, 1)
    },
    _beginLayout: function (a, b, c, d, f, g) {
        this._initForLayout(b, c, d, f, g);
        return a
    },
    _initForLayout: function (a, b, c, d, f) {
        this._paddingLeft = a;
        this._paddingTop = b;
        this._paddingRight = c;
        this._paddingBottom = d;
        this._panel_size = cc.size(f.width, f.height);
        this._item_counter =
            0;
        this._offset_x = this._paddingLeft
    },
    _measureLayout: function (a, b, c, d, f, g) {
        this._initForLayout(b, c, d, f, g);
        g = cc.rect(0, 0, 0, 0);
        for (var h = 0; h < a.length; h++) {
            var m = this._doItemLayout(a[h], null, !0);
            m && (g = cc.rectUnion(g, m))
        }
        g.width += b + d;
        g.height += f + c;
        return cc.size(g.width, g.height)
    },
    _doItemLayout: function (a, b, c) {
        if (a) {
            var d = a._isjuiAttachment;
            if (a._isjuiWidget && !d) {
                var f = this._getItemPosition(a),
                    d = f.x,
                    g = f.y,
                    h = this._getItemSize(a),
                    m = h.height,
                    n = h.width,
                    p = m,
                    u = a.getMargin(),
                    v = this._panel_size.width / this._col_count;
                b && jcore.util.isDefined(b.percentage) && (v = b.percentage / 100 * this._panel_size.width);
                n = v - u.l - u.r;
                d = this._offset_x + u.l + n / 2;
                this._offset_x += v;
                a.anchorX = 0.5;
                switch (a.getVerticalAlignment()) {
                case jui.VerticalAlignment.center:
                    g = this._paddingBottom + this._panel_size.height / 2;
                    a.anchorY = 0.5;
                    break;
                case jui.VerticalAlignment.bottom:
                    g = this._paddingBottom + u.b + m / 2;
                    a.anchorY = 0.5;
                    break;
                case jui.VerticalAlignment.top:
                    g = this._paddingBottom + this._panel_size.height - u.t - m / 2;
                    a.anchorY = 0.5;
                    break;
                case jui.VerticalAlignment.stretch:
                    g =
                        this._paddingBottom + this._panel_size.height / 2, a.anchorY = 0.5, p = this._panel_size.height - (u.l + u.r)
                }
                this._item_counter++;
                if (c) return a = n, b = p, h.width === n && (a += u.l + u.r), h.height === p && (b += u.b + u.t), cc.rect(d - n / 2, g - p / 2, a, b);
                (f.x !== d || f.y !== g) && this._setItemPosition(a, b, d, g, this.isAnimated(), this.isAnimated());
                (h.width !== n || h.height !== p) && this._setItemSize(a, b, n, p, this.isAnimated())
            }
        }
    }
});
jui.PopupPositioning = {
    center: 0,
    relative_bottom_left: 1,
    relative_bottom_right: 2,
    relative_top_right: 3,
    relative_top_left: 4
};
jui.Popup = jui.Panel.extend({
    _popupPositioning: jui.PopupPositioning.center,
    _relativeWidget: null,
    _isPopupClosed: !1,
    _isPopupClosing: !1,
    ctor: function (a, b) {
        this._super(a, b);
        this.setVisible(!1)
    },
    _initContentNode: function () {
        this._contentNode = new cc.Node;
        this._contentNode.setAnchorPoint(cc.p(0.5, 0.5));
        this.addChild(this._contentNode, jui.WidgetLayers.UI, 0)
    },
    setPopupPosition: function (a, b) {
        this._popupPositioning = a;
        this._relativeWidget = b
    },
    show: function () {
        this.validateLayout(!0);
        this.updatePosition();
        this._super();
        this._isPopupClosing = this._isPopupClosed = !1
    },
    hide: function () {
        this._super()
    },
    isPopupClosed: function () {
        return this._isPopupClosed
    },
    closePopup: function () {
        !this._isPopupClosed && !this._isPopupClosing && (cc.log("closing popup..."), jui.PopupManager.getInstance()._closePopup(this) && (this._isPopupClosing = !0, this._onClose(), this._isPopupClosed = !0))
    },
    _onClose: function () {},
    canPopupClose: function () {
        return !0
    },
    updatePosition: function () {
        var a = this.getParent();
        if (!jcore.util.isNull(a)) {
            var b = a.getContentSize(),
                c = this._popupPositioning,
                d = a;
            jcore.util.isNotNull(this._relativeWidget) && (d = this._relativeWidget);
            jcore.util.isNull(d) && (c = jui.PopupPositioning.center);
            switch (c) {
            case jui.PopupPositioning.center:
                this.x = b.width / 2;
                this.y = b.height / 2;
                this.anchorY = this.anchorX = 0.5;
                break;
            case jui.PopupPositioning.relative_bottom_left:
                c = this._relativeWidget.getBoundingBoxToWorld();
                b = cc.p(c.x, c.y);
                b = a.convertToNodeSpace(b);
                this.x = b.x + this._getMenuNode().width / 2 * this._getMenuNode().scaleX;
                this.y = b.y - this._getMenuNode().height / 2 * this._getMenuNode().scaleY;
                this.anchorY = this.anchorX = 0.5;
                break;
            case jui.PopupPositioning.relative_bottom_right:
                c = d.getBoundingBoxToWorld();
                b = cc.p(c.x, c.y);
                c = cc.p(c.x + c.width, c.y + c.height);
                b = a.convertToNodeSpace(b);
                a = a.convertToNodeSpace(c);
                this.x = a.x - this._getMenuNode().width / 2 * this._getMenuNode().scaleX;
                this.y = b.y - this._getMenuNode().height / 2 * this._getMenuNode().scaleY;
                this.anchorY = this.anchorX = 0.5;
                break;
            case jui.PopupPositioning.relative_top_right:
                c = d.getBoundingBoxToWorld();
                b = cc.p(c.x, c.y);
                c = cc.p(c.x + c.width, c.y + c.height);
                a.convertToNodeSpace(b);
                a = a.convertToNodeSpace(c);
                this.x = a.x + this._getMenuNode().width / 2 * this._getMenuNode().scaleX;
                this.y = a.y + this._getMenuNode().height / 2 * this._getMenuNode().scaleY;
                this.anchorY = this.anchorX = 0.5;
                break;
            case jui.PopupPositioning.relative_top_left:
                c = d.getBoundingBoxToWorld(), b = cc.p(c.x, c.y), c = cc.p(c.x + c.width, c.y + c.height), b = a.convertToNodeSpace(b), a = a.convertToNodeSpace(c), this.x = b.x + this._getMenuNode().width / 2 * this._getMenuNode().scaleX, this.y = a.y + this._getMenuNode().height / 2 * this._getMenuNode().scaleY,
                    this.anchorY = this.anchorX = 0.5
            }
        }
    },
    _getMenuNode: function () {
        return this
    }
});
jui.PopupManager = cc.Class.extend({
    _popupStack: [],
    _rootLayer: null,
    _tintLayer: null,
    ctor: function () {
        this._popupStack = []
    },
    attachRootPanel: function (a, b) {
        jcore.assertNotNull(a);
        jcore.assertNotNull(b);
        this._rootLayer = a;
        this._tintLayer = b;
        this._rootLayer.addScreenResizeListener(this);
        this._tintLayer.addClickEventListener(_.bind(function () {
            var a = this.getCurrentPopup();
            a && a.closePopup()
        }, this))
    },
    showPopup: function (a) {
        jcore.assertNotNull(a);
        jcore.assertNotNull(this._rootLayer);
        jcore.assertNotNull(this._tintLayer);
        jcore.assert(a instanceof jui.Popup, "popup must inherit from jui.Popup");
        a && (null != a.getParent() ? a.getParent() != this._rootLayer && a.getParent().removeChild(a) : this._rootLayer.addChild(a, jui.WidgetLayers.Popup), this._pushPopup(a))
    },
    findPopupOfType: function (a) {
        jcore.assertNotNull(a);
        for (var b = this._popupStack.length - 1; 0 <= b; b--)
            if (this._popupStack[b] instanceof a) return this._popupStack[b];
        return null
    },
    getCurrentPopup: function () {
        return 0 < this._popupStack.length ? this._popupStack[this._popupStack.length -
            1] : null
    },
    isPopupActive: function () {
        return null != this.getCurrentPopup()
    },
    _closePopup: function (a) {
        if (!a || !a.canPopupClose()) return !1;
        this._popPopup(a);
        return !0
    },
    _pushPopup: function (a) {
        jcore.assertNotNull(a);
        var b = this.getCurrentPopup();
        b ? b.hide() : this._tintLayer.show();
        this._popupStack.push(a);
        a.show()
    },
    _popPopup: function (a) {
        if (a) {
            var b = this.getCurrentPopup();
            b && (b != a ? this._popupStack = _.filter(this._popupStack, function (b) {
                    return b != a
                }) : this._popupStack.splice(-1, 1), a.hide(), (b = this.getCurrentPopup()) ?
                b.show() : this._tintLayer.hide())
        }
    },
    _onScreenResized: function () {
        var a = this.getCurrentPopup();
        a && a.updatePosition()
    }
});
jui.PopupManager._instance = new jui.PopupManager;
jui.PopupManager.getInstance = function () {
    return this._instance
};
jui.CCSPopup = jui.Popup.extend({
    _uiNode: null,
    _uiContentNode: null,
    _uiProgressPanel: null,
    _uiProgressNode: null,
    _isProgressBusy: !1,
    _canClose: !0,
    ctor: function (a) {
        this._super();
        cc.log("loading ui json... " + a);
        var b = ccs.load(a);
        (null == b || null == b.node) && jcore.log.error("FAILED to load UI: " + a);
        a = b.node.height;
        var c = b.node.width;
        this.setContentSize(cc.size(c, a));
        this._uiNode = b.node;
        this._uiNode.x = c / 2;
        this._uiNode.y = a / 2;
        this._uiNode.anchorX = 0.5;
        this._uiNode.anchorY = 0.5;
        this._uiNode.scale = jui.Globals.getPopupScale();
        this.addChild(this._uiNode, jui.WidgetLayers.UI);
        (a = ccui.helper.seekWidgetByName(b.node, "Panel_Background")) && a.setTouchEnabled && a.setTouchEnabled(!0);
        this._uiContentNode = ccui.helper.seekWidgetByName(b.node, "Panel_Content");
        this._initProgressPanel();
        a = ccui.helper.seekWidgetByName(b.node, "button_close");
        null == a && (a = ccui.helper.seekWidgetByName(b.node, "Button_Close"));
        null != a && a.addClickEventListener(_.bind(function () {
            this.closePopup()
        }, this));
        this.setCanClose(!1)
    },
    loadCCSNode: function (a) {
        return jui.util.loadCCSNode(a)
    },
    onShowComplete: function () {
        this.setCanClose(!0)
    },
    getCCSNode: function () {
        return this._uiNode
    },
    getCCSContentNode: function () {
        return this._uiContentNode
    },
    findCCSNode: function (a, b) {
        return b ? jui.util.getChildByNameRecursive(b, a) : jui.util.getChildByNameRecursive(this.getCCSNode(), a)
    },
    isProgressBusy: function () {
        return this._isProgressBusy
    },
    beginProgress: function (a, b, c, d) {
        this._isProgressBusy = !0;
        this._uiProgressPanel && (this._uiProgressPanel.setVisible(!0), this._uiProgressPanel.setOpacity(255), this._uiProgressNode.setVisualState("animate"));
        this._uiContentNode && this._uiContentNode.setVisible(!1);
        this.onUpdateProgressStatus(a, b, c, d)
    },
    onUpdateProgressStatus: function (a, b, c, d) {},
    endProgress: function () {
        this._uiProgressPanel && this._uiProgressPanel.runAction(cc.sequence(cc.fadeOut(0.5), cc.callFunc(_.bind(function () {
            this._uiProgressPanel.setVisible(!1)
        }, this))));
        this._uiContentNode && this._uiContentNode.setVisible(!0);
        this._isProgressBusy = !1
    },
    _initProgressPanel: function () {
        this._uiProgressPanel = ccui.helper.seekWidgetByName(this._uiNode, "Panel_Progress");
        null != this._uiProgressPanel && (this._uiProgressNode = new jui.Busy, this._uiProgressNode.setAnchorPoint(cc.p(0.5, 0.5)), this._uiProgressNode.setPosition(cc.p(this._uiProgressPanel.getContentSize().width / 2, this._uiProgressPanel.getContentSize().height / 2)), this._uiProgressPanel.addChild(this._uiProgressNode), this._uiProgressPanel.setVisible(!1))
    },
    updatePosition: function () {
        this._super();
        if (this._uiNode) {
            var a = this.getParent();
            if (a) {
                var b = a.getContentSize(),
                    a = Math.max(0, b.width - this._contentPadding.l - this._contentPadding.r),
                    b = Math.max(0, b.height - this._contentPadding.t - this._contentPadding.b);
                a < this._uiNode.width || b < this._uiNode.height ? (a = Math.min(a / this._uiNode.width, b / this._uiNode.height), this._uiNode.scale = Math.max(0.55, a)) : this._uiNode.scale = jui.Globals.getPopupScale()
            }
        }
    },
    _updateContentPositionAndSize: function () {
        if (this._contentNode) {
            var a = this.getContentSize(),
                b = Math.max(0, a.width - this._contentPadding.l - this._contentPadding.r),
                a = Math.max(0, a.height - this._contentPadding.t - this._contentPadding.b);
            this._uiNode && (this._uiNode.x =
                b / 2, this._uiNode.y = a / 2, b < this._uiNode.width || a < this._uiNode.height ? (b = Math.min(b / this._uiNode.width, a / this._uiNode.height), this._uiNode.scale = Math.max(0.66, b)) : this._uiNode.scale = jui.Globals.getPopupScale())
        }
    },
    canPopupClose: function () {
        return this._canClose
    },
    setCanClose: function (a) {
        this._canClose = a
    }
});
jui = jui || {};
jui.Globals = {
    defaultTheme: {
        color_highlight: cc.color(240, 92, 49),
        textStyle: new jui.TextStyle
    },
    currentScreenSizeMode: jui.ScreenSizeMode.normal,
    screenWidth: 0,
    screenHeight: 0,
    designWidth: 960,
    designHeight: 640,
    minimumScreenWidth: 480,
    minimumScreenHeight: 320,
    init: function () {
        jui.Globals.updateScreenSize()
    },
    isScreenLarge: function () {
        return jui.Globals.currentScreenSizeMode == jui.ScreenSizeMode.large
    },
    getDesignScale: function () {
        if (jui.Globals.screenWidth >= jui.Globals.designWidth && jui.Globals.screenHeight >= jui.Globals.designHeight) return cc.p(1,
            1);
        var a = jui.Globals.screenWidth / jui.Globals.designWidth,
            b = jui.Globals.screenHeight / jui.Globals.designHeight;
        return cc.p(Math.min(a, b), Math.min(a, b))
    },
    getPopupScale: function () {
        return jui.Globals.screenHeight === jui.Globals.designHeight ? 1 : Math.max(0.55, 0.9 * jui.Globals.screenHeight / jui.Globals.designHeight)
    },
    getHUDScale: function () {
        return jui.Globals.isScreenLarge() ? 2 : 1
    },
    getResolutionAdjustedFontSize: function (a) {
        var b = this.getDesignScale();
        return Math.floor(a * b.x)
    },
    updateScreenSize: function () {
        var a = cc.view.getFrameSize();
        a.width = Math.max(jui.Globals.minimumScreenWidth, a.width);
        a.height = Math.max(jui.Globals.minimumScreenHeight, a.height);
        cc.log("screen size " + a.width + "x" + a.height);
        cc.view.setDesignResolutionSize(a.width, a.height, cc.ResolutionPolicy.EXACT_FIT);
        jui.Globals.screenWidth = a.width;
        jui.Globals.screenHeight = a.height;
        return a
    }
};
var pokerapp = pokerapp || {};
jui.Globals.defaultFont = new jui.TextStyle({
    name: R.fonts.default_ttf_name,
    size: 16,
    color: cc.color(255, 255, 255)
});
jui.Globals.nameplateFont = new jui.TextStyle({
    name: R.fonts.default_ttf_name,
    size: 18,
    color: cc.color(255, 255, 255)
});
jui.Globals.tableFont = new jui.TextStyle({
    name: R.fonts.default_ttf_name,
    size: 18,
    color: cc.color(255, 255, 255),
    enableShadow: !0
});
jui.Globals.actionsFont = new jui.TextStyle({
    name: R.fonts.default_ttf_name,
    size: 16,
    color: cc.color(255, 255, 255),
    enableShadow: !0
});
jui.Globals.chatFont = new jui.TextStyle({
    name: R.fonts.default_ttf_name,
    size: 12,
    color: cc.color(255, 255, 255)
});
jui.Globals.chatLargeFont = new jui.TextStyle({
    name: R.fonts.default_ttf_name,
    size: 18,
    color: cc.color(255, 255, 255)
});
jui.Globals.tableInfoFont = new jui.TextStyle({
    name: R.fonts.default_ttf_name,
    size: 12,
    color: cc.color(255, 255, 255)
});
jui.Globals.preloadAlphabet = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ~!@#$%^&*()-_[];':,./\\|;\"+=<>€£¥₹₩m฿珍珠";
jui.Globals.defaultTheme = {
    textStyle: new jui.TextStyle(jui.Globals.defaultFont),
    loading_config: {
        textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
            size: 18,
            color: cc.color(255, 255, 255)
        }),
        loadingBackground: {
            asset: "lobby/lobby-background.png"
        },
        loadingIcon: {
            sprites: [{
                asset: "loading/logo.png",
                depth: jui.WidgetLayers.UI_Overlay
            }],
            particle: {
                asset: "effects/loading_effect.plist",
                animationType: jui.ParticleAnimationType.normal,
                depth: jui.WidgetLayers.UI,
                offset: cc.p(0, 0)
            }
        }
    },
    topbar_textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
        size: 18
    }),
    topbar_large_textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
        size: 24
    }),
    gamelist_textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
        size: 20,
        color: cc.color(0, 0, 0)
    }),
    gamelist_details_textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
        size: 18,
        color: cc.color(100, 50, 50)
    }),
    gamelist_action_textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
        size: 20,
        color: cc.color(255, 255, 255)
    }),
    nameplate_textStyle: new jui.TextStyle(jui.Globals.nameplateFont, {
        size: 18,
        color: cc.color(255, 255, 255)
    }),
    nameplate_empty_textStyle: new jui.TextStyle(jui.Globals.nameplateFont, {
        size: 18,
        color: cc.color(60, 60, 60)
    }),
    nameplate_reserved_textStyle: new jui.TextStyle(jui.Globals.nameplateFont, {
        size: 18,
        color: cc.color(255, 255, 255)
    }),
    nameplate_sithere_textStyle: new jui.TextStyle(jui.Globals.nameplateFont, {
        size: 18,
        color: cc.color(255, 255, 255)
    }),
    nameplate_banner_textStyle: new jui.TextStyle(jui.Globals.nameplateFont, {
        size: 22,
        color: cc.color(255, 255, 255)
    }),
    nameplate_win_banner_config: {
        sprites: [{
            asset: "game/nameplate-winner.png",
            depth: jui.WidgetLayers.UI,
            sizeMode: jui.SizeMode.stretch_allways,
            animationType: jui.AnimationType.simple_fadeIn
        }],
        particle: {
            asset: "effects/winner_effect.plist",
            animationType: jui.ParticleAnimationType.traceBorder,
            depth: jui.WidgetLayers.background,
            animationTrigger: jui.VisualState.visible,
            speed: 150
        },
        textStyle: new jui.TextStyle(jui.Globals.nameplateFont, {
            size: 20,
            color: cc.color(255, 255, 255)
        })
    },
    chipstack_textStyle: new jui.TextStyle(jui.Globals.tableFont, {
        size: 18,
        color: cc.color(255, 255, 255)
    }),
    table_config: {
        sprites: [{
                asset: "game/game-table.png",
                depth: jui.WidgetLayers.Background
            },
            {
                asset: "game/game-table-logo.png",
                depth: jui.WidgetLayers.UI,
                opacity: 100
            }
        ]
    },
    actionsContainer_config: {
        asset: "game/actions-container-background.png",
        depth: jui.WidgetLayers.Background,
        sizeMode: jui.SizeMode.stretch_allways
    },
    totalpot_textStyle: new jui.TextStyle(jui.Globals.tableFont, {
        size: 18,
        color: cc.color(255, 255, 255)
    }),
    totalpot_config: {
        asset: "game/message-background.png",
        scale9: cc.rect(8, 8, 32, 32),
        depth: jui.WidgetLayers.Background
    },
    handstrength_config: {
        asset: "game/handstrength-background.png",
        scale9: cc.rect(8,
            8, 32, 32),
        depth: jui.WidgetLayers.Background,
        padding: 4,
        textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
            size: 18,
            color: cc.color(255, 255, 255)
        })
    },
    handstrength_win_config: {
        asset: "game/handstrength-win-background.png",
        scale9: cc.rect(8, 8, 32, 32),
        depth: jui.WidgetLayers.Background,
        padding: 4,
        textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
            size: 18,
            color: cc.color(255, 255, 255)
        })
    },
    tablemessage_textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
        size: 22,
        color: cc.color(255, 255, 255),
        horizontalAlignment: jui.TextHorizontalAlignment.center
    }),
    tablemessage_config: {
        asset: "game/message-background.png",
        scale9: cc.rect(8, 8, 32, 32),
        depth: jui.WidgetLayers.Background,
        padding: jui.Padding({
            l: 15,
            r: 15,
            t: 12,
            b: 12
        })
    },
    connectmessage_textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
        size: 24,
        color: cc.color(255, 255, 255),
        horizontalAlignment: cc.TEXT_ALIGNMENT_LEFT
    }),
    connectmessage_config: {
        asset: "game/connect-background.png",
        scale9: cc.rect(8, 8, 32, 32),
        depth: jui.WidgetLayers.Background
    },
    connectaction_config: {
        asset: "popup/btn-normal.png",
        depth: jui.WidgetLayers.Background,
        textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
            size: 20,
            color: cc.color(255, 255, 255)
        })
    },
    actionbuttons_textStyle: new jui.TextStyle(jui.Globals.actionsFont, {
        size: 14,
        color: cc.color(255, 255, 255)
    }),
    tableinfo_textStyle: new jui.TextStyle(jui.Globals.tableInfoFont, {
        size: 14,
        color: cc.color(255, 255, 255),
        horizontalAlignment: jui.TextHorizontalAlignment.left
    }),
    tableinfo_config: {
        asset: "game/message-background.png",
        scale9: cc.rect(8, 8, 32, 32),
        depth: jui.WidgetLayers.Background
    },
    chatbox_textStyle: new jui.TextStyle(jui.Globals.chatFont, {
        size: 15,
        color: cc.color(255, 255, 255),
        horizontalAlignment: jui.TextHorizontalAlignment.left
    }),
    chatbox_largeTextStyle: new jui.TextStyle(jui.Globals.chatLargeFont, {
        size: 18,
        color: cc.color(255, 255, 255),
        horizontalAlignment: jui.TextHorizontalAlignment.left
    }),
    chatbox_config: {
        asset: "game/chatbox-background.png",
        scale9: cc.rect(10, 10, 200, 20),
        depth: jui.WidgetLayers.Background,
        padding: 5
    },
    infoTab_textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
        size: 14,
        color: cc.color(255, 255, 255),
        horizontalAlignment: jui.TextHorizontalAlignment.left
    }),
    infoTab_config: {
        asset: "game/infotab-background.png",
        sizeMode: jui.SizeMode.stretch_allways,
        depth: jui.WidgetLayers.Background,
        padding: 2
    },
    gameMenu_textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
        size: 14,
        color: cc.color(255, 255, 255),
        horizontalAlignment: jui.TextHorizontalAlignment.left
    }),
    gameMenu_config: {
        asset: "lobby/menu-background.png",
        scale9: cc.rect(10, 15, 80, 30),
        padding: {
            l: 2,
            r: 2,
            t: 18,
            b: 2
        },
        depth: jui.WidgetLayers.Background
    },
    tableMenu_textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
        size: 14,
        color: cc.color(255,
            255, 255),
        horizontalAlignment: jui.TextHorizontalAlignment.left
    }),
    tableMenu_config: {
        asset: "lobby/menu-tables-background.png",
        scale9: cc.rect(10, 15, 80, 30),
        padding: {
            l: 2,
            r: 2,
            t: 18,
            b: 2
        },
        depth: jui.WidgetLayers.Background
    },
    popup_buyin_detail_config: {
        asset: "popup/buyin/details-background.png",
        padding: {
            t: 12,
            b: 5,
            l: 5,
            r: 5
        },
        depth: jui.WidgetLayers.Background,
        sizeMode: jui.SizeMode.stretch_allways,
        textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
            size: 26,
            color: cc.color(255, 255, 255)
        })
    },
    popup_buyin_detail_small_textConfig: new jui.TextStyle(jui.Globals.defaultFont, {
        size: 18,
        color: cc.color(255, 255, 255)
    }),
    popup_buyin_balance_config: {
        asset: "popup/buyin/balance-background.png",
        padding: 5,
        depth: jui.WidgetLayers.Background,
        sizeMode: jui.SizeMode.stretch_allways,
        textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
            size: 26,
            color: cc.color(225, 225, 225)
        })
    },
    popup_buyin_accept_config: new jui.Button.Config({
        normal: "popup/buyin/btn-accept.png",
        pressed: "popup/buyin/btn-accept-pressed.png",
        textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
            size: 22,
            color: cc.color(82, 174, 0)
        })
    }),
    popup_buyin_cancel_config: new jui.Button.Config({
        normal: "popup/buyin/btn-cancel.png",
        pressed: "popup/buyin/btn-cancel-pressed.png",
        textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
            size: 22,
            color: cc.color(182, 0, 0)
        })
    }),
    popup_buyin_slider_config: new jui.Slider.Config({
        track: "popup/buyin/buyin-slider-track.png",
        handle: "popup/buyin/buyin-slider-handle.png",
        handlePadding: {
            l: 30,
            r: 30
        }
    }),
    popup_buyin_slider_textStyle: new jui.TextStyle(jui.Globals.defaultFont, {
        size: 20,
        color: cc.color(255, 255, 255)
    })
};
pokerapp.Skins = pokerapp.Skins || {};
pokerapp.SkinDefinition = cc.Class.extend({
    _skinId: null,
    _siteId: null,
    _defaultCurrency: null,
    _url_gameServer: null,
    _url_requestAvatar: null,
    ctor: function (a, b) {
        this._skinId = a;
        this._siteId = b;
        this._defaultCurrency = pokerapp.Currency.USD;
        this._url_gameServer = "wss://conmgr2.playdata.co.uk:4702/ws/game";
        this._url_requestAvatar = "https://clientapiv2.ckpnetwork.eu/ReqAvatar.aspx"
    },
    getSkinId: function () {
        return this._skinId
    },
    getSiteId: function () {
        return this._siteId
    },
    getDefaultCurrency: function () {
        return this._defaultCurrency
    },
    getGameServerUrl: function () {
        return this._url_gameServer
    },
    getRequestAvatarUrl: function () {
        return this._url_requestAvatar
    }
});
pokerapp.SkinDefinition.load = function (a) {
    return new(jcore.util.stringToObject("pokerapp.Skins." + a, "function"))
};
pokerapp.Skins = pokerapp.Skins || {};
pokerapp.Skins.JUICY = pokerapp.SkinDefinition.extend({
    ctor: function () {
        this._super("JUICY", "JUICY");
        this._defaultCurrency = pokerapp.Currency.USD
    }
});
pokerapp.Skins = pokerapp.Skins || {};
pokerapp.Skins.INTERTOPS = pokerapp.SkinDefinition.extend({
    ctor: function () {
        this._super("INTERTOPS", "INTERTOPS");
        this._defaultCurrency = pokerapp.Currency.USD
    }
});
pokerapp.Skins = pokerapp.Skins || {};
pokerapp.Skins.EVERYGAME = pokerapp.SkinDefinition.extend({
    ctor: function () {
        this._super("EVERYGAME", "INTERTOPS");
        this._defaultCurrency = pokerapp.Currency.USD
    }
});
pokerapp.NetMsgTypes = jcore.Enum.create({
    INVALID: -1,
    PlayerConnect: 100,
    PlayerChat: 101,
    PlayerDisconnect: 102,
    PlayerLeaveTable: 103,
    PlayerReqSeat: 104,
    PlayerBuyIn: 105,
    PlayerSittingOut: 106,
    PlayerSittingIn: 107,
    PlayerFold: 108,
    PlayerCheck: 109,
    PlayerBet: 110,
    PlayerRaise: 111,
    PlayerAllIn: 112,
    PlayerCall: 113,
    PlayerShowCards: 114,
    PlayerSitOutNextHand: 115,
    PlayerUpdateState: 116,
    PlayerWaitBB: 117,
    PlayerReqTournamentInfo: 118,
    PlayerRebuyAddon: 119,
    PlayerCastVote: 120,
    PlayerUpdateVoteState: 121,
    PlayerAcceptRematch: 125,
    PlayerDeclineRematch: 126,
    PlayerRematchSupported: 127,
    TableState: 200,
    TableSeatState: 201,
    TableChat: 202,
    TableUpdate: 203,
    TableConnected: 204,
    TablePlayerLeave: 205,
    TableSeatReserved: 206,
    TableReqSeatDenied: 207,
    TablePlayerTurn: 208,
    TablePlayerQueryMuck: 209,
    TableServerMessage: 210,
    TableHandStart: 211,
    TableDealCards: 212,
    TableShowDown: 213,
    TableDealerChat: 214,
    TablePlayerShowCards: 215,
    TableHandEnd: 216,
    TableStartShowDown: 217,
    TableError: 218,
    TableDisconnect: 219,
    TableTournamentInfo: 220,
    TableTournamentUpdate: 221,
    TableHello: 222,
    TablePlayerRoundBye: 223,
    TableWaitRoundStart: 224,
    TableWaitTournamentStart: 225,
    TableWaitBreakStart: 226,
    TableInBreak: 227,
    TablePlayerCPBalance: 228,
    TablePlayerRebuyStatus: 229,
    TableStatistics: 230,
    TableHandMuckedCards: 231,
    TableSwitchHost: 232,
    TableVoteState: 233,
    TableTournamentStatistics: 234,
    Ping: 300,
    Pong: 301,
    ServerNotification: 302,
    ProtocolCompoundMsg: 303,
    ProtocolOptions: 304,
    ProxyConnected: 305,
    LobbyRequest: 600,
    LobbyResponseMore: 601,
    LobbyResponseLast: 602,
    LobbyDisconnect: 603,
    LobbyError: 604,
    LobbyResponseProgress: 605,
    LobbyUpdateRequestLookupTable: 606,
    LobbyQuery: 700,
    LobbyQueryDelta: 701,
    LobbyResults: 702,
    LobbyDeletedNode: 703,
    LobbySubscribeView: 704,
    LobbyUnsubscribeView: 705,
    LobbySubscribeChat: 706,
    LobbyUnsubscribeChat: 707,
    LobbyChatFeed: 708,
    LobbyResultNodeList: 709,
    LobbyResultAlias: 710,
    WardenCommand: 750,
    WardenResponseMore: 751,
    WardenResponseLast: 752,
    WardenAlert: 753,
    WardenCaptcha: 754,
    EncryptRequest: 800,
    ClientPublicKey: 801,
    ServerSessionKey: 802,
    ClientPublicKeyWithProtocolVersion: 803,
    ErrorActionOutOfTurn: 900,
    ErrorInvalidAction: 901,
    ErrorInvalidBetAmount: 902,
    ErrorInvalidBuyInAmount: 903,
    ConnectViaProxy: 950
});
pokerapp.NetMsgParameter = cc.Class.extend({
    _parameterType: null,
    _value: null,
    ctor: function (a, b) {
        this._parameterType = jcore.util.orDefault(b, pokerapp.NetMsgParameter.Types.string);
        this._value = a
    },
    getValue: function () {
        return this._value
    },
    getType: function () {
        return this._parameterType
    },
    toString: function () {
        return "" + this._value
    },
    toDecimal: function (a) {
        return pokerapp.ConvertUtil.toDecimal(this._value, a)
    },
    toInteger: function (a) {
        return pokerapp.ConvertUtil.toInt(this._value, a)
    },
    toBoolean: function (a) {
        return pokerapp.ConvertUtil.toBoolean(this._value,
            a)
    },
    toKeyValueString: function () {
        var a = jcore.string.strLeft(this._value, "="),
            b = jcore.string.strRight(this._value, "=");
        return {
            key: a,
            value: b
        }
    }
});
pokerapp.NetMsgParameter.Types = {
    string: "string",
    keyvalue: "keyvalue",
    uint8: "byte",
    uint16: "uint16",
    uint32: "uint32",
    int8: "int8",
    int16: "int16",
    int32: "int32"
};
pokerapp.NetMsgParameter.create = function (a, b) {
    return new pokerapp.NetMsgParameter(a, b)
};
pokerapp.NetProtocol = {};
pokerapp.NetProtocol.ProtocolFeature = {
    messageOptions: "messageOptions",
    writeBinaryParameters: "writeBinaryParameters",
    readBinaryParameters: "readBinaryParameters"
};
pokerapp.NetProtocol.ProtocolMsgOptions = {
    Compressed: 1,
    GlobalLookupTable: 2,
    HasTableSessionId: 4,
    reserved4: 8,
    reserved5: 16,
    reserved6: 32,
    reserved7: 64,
    reserved8: 128,
    None: 0
};
pokerapp.NetProtocol.ProtocolOptions = {
    CODES_NOT_STRINGS: 1,
    ALLOW_COMPOSITE_MESSAGES: 2,
    ENABLE_LOBBYDATA_LOOKUPTABLE: 4,
    RESERVED_5: 8,
    COMPRESSED_ZLIB: 16,
    None: 0
};
pokerapp.NetProtocol.MsgOptions = {
    CODES_NOT_STRINGS: 1,
    ALLOW_COMPOSITE_MESSAGES: 2,
    ENABLE_LOBBYDATA_LOOKUPTABLE: 4,
    RESERVED_5: 8,
    COMPRESSED_ZLIB: 16
};
pokerapp.NetProtocol.MsgParamType = {
    String: 0,
    Byte: 1,
    UByte: 2,
    Integer16: 3,
    UInteger16: 4,
    Integer32: 5,
    UInteger32: 6,
    Integer64: 7,
    UInteger64: 8,
    BooleanTrue: 9,
    BooleanFalse: 10,
    TimeStamp: 11,
    Single: 12,
    Double: 13,
    Null: 14,
    Zero: 15,
    One: 16,
    KeyValue: 64,
    StringKeyValue: 128
};
pokerapp.NetProtocol.ProtocolPreample = cc.Class.extend({
    _SIZE_BYTES: 4,
    _length: 0,
    _lengthCheck: 0,
    ctor: function (a, b) {
        this._length = a;
        this._lengthCheck = b
    },
    getLength: function () {
        return this._length
    },
    getLengthCheck: function () {
        return this._lengthCheck
    }
});
pokerapp.NetProtocol.ProtocolIdentifier = cc.Class.extend({
    _SIZE_BYTES: 5,
    _msgId: 0,
    _msgIdCheck: 0,
    _options: 0,
    ctor: function (a, b, c) {
        this._msgId = a;
        this._msgIdCheck = b;
        this._options = optins
    },
    getMsgId: function () {
        return this._msgId
    },
    getMsgIdCheck: function () {
        return this._msgIdCheck
    },
    getOptions: function () {
        return this._options
    }
});
pokerapp.NetProtocol.ProtocolHeader = cc.Class.extend({
    _protocol_preample: null,
    _protocol_identifier: null,
    ctor: function () {
        this._protocol_preample = new pokerapp.NetProtocol.ProtocolPreample;
        this._protocol_identifier = new pokerapp.NetProtocol.ProtocolIdentifier
    },
    isLengthValid: function () {
        return this._protocol_preample._length == (this._protocol_preample._lengthCheck ^ 65535)
    },
    isMsgIdValid: function () {
        return this._protocol_identifier._msgId == (this._protocol_identifier._msgIdCheck ^ 65535)
    },
    getPreample: function () {
        return this._protocol_preample
    },
    setPreample: function (a) {
        this._protocol_preample = a
    },
    getIdentifer: function () {
        return this._protocol_identifier
    },
    setIdentifer: function (a) {
        this._protocol_identifier = a
    }
});
pokerapp.NetMsgSerializer = {};
pokerapp.NetMsgSerializer.readHeader = function (a, b, c, d, f) {
    f || (f = new pokerapp.NetProtocol.ProtocolHeader);
    c && (c = new pokerapp.NetProtocol.ProtocolPreample(b.ReadUInt16(), b.ReadUInt16()), f.setPreample(c));
    if (64206 != f.getPreample().getLength() && d) {
        d = b.ReadUInt16();
        c = b.ReadUInt16();
        var g = 0;
        pokerapp.NetMsgTypes.ServerSessionKey != d && a.hasFeature(pokerapp.NetProtocol.ProtocolFeature.messageOptions) && (g = b.ReadByte());
        a = new pokerapp.NetProtocol.ProtocolIdentifier(d, c, g);
        f.setIndentifier(a)
    }
    return f
};
pokerapp.NetMsgSerializer.readBody = function (a, b, c) {
    b.getPreample().getLength();
    0 < (b.getIndent().getOptions() & pokerapp.NetProtocol.ProtocolMsgOptions.HasTableSessionId) && c.ReadString();
    b = c.ReadByte();
    var d = [];
    if (!a.hasFeature(pokerapp.NetProtocol.ProtocolFeature.readBinaryParameters))
        for (var f = 0; f < b; f++) {
            var g = c.ReadString();
            d.push(new StringMsgParameter(g))
        }
    a = pokerapp.NetMsg.create(a, header.getIndent().getMsgId(), d, null);
    a.setUsesLookupTable(0 < (options & pokerapp.NetProtocol.ProtocolMsgOptions.GlobalLookupTable));
    return a
};
pokerapp.NetMsg = cc.Class.extend({
    _msgType: null,
    _parameters: null,
    _tableSessionId: null,
    ctor: function (a, b) {
        this._msgType = pokerapp.NetMsgTypes.enumParseNameOrValue(a, pokerapp.NetMsgTypes.INVALID);
        this._tableSessionId = b;
        this._parameters = []
    },
    getMsgType: function () {
        return this._msgType
    },
    getTableSessionId: function () {
        return this._tableSessionId
    },
    setTableSessionId: function (a) {
        this._tableSessionId = a
    },
    hasTableSessionId: function () {
        return jcore.util.isNotNull(this._tableSessionId) && "" !== this._tableSessionId
    },
    getParameterCount: function () {
        return this._parameters.length
    },
    getParameterAt: function (a) {
        return !this._parameters || this._parameters.length <= a ? null : this._parameters[a]
    },
    addParameter: function (a) {
        a instanceof pokerapp.NetMsgParameter || (a = new pokerapp.NetMsgParameter(a));
        this._parameters.push(a)
    },
    addParameters: function (a) {
        for (var b = 0; b < a.length; b++) {
            var c = a[b];
            c instanceof pokerapp.NetMsgParameter || (c = new pokerapp.NetMsgParameter(c));
            this._parameters.push(c)
        }
    },
    setUsesLookupTable: function (a) {},
    getParametersAsStrings: function (a) {
        a = jcore.util.orDefault(a, 0);
        for (var b = []; a < this._parameters.length; a++) b.push("" + this._parameters[a].getValue());
        return b
    },
    copyParams: function (a, b) {
        return this._parameters.slice(a, b + 1)
    },
    getLastParameter: function () {
        return 0 < this._parameters.length ? this._parameters[this._parameters.length - 1] : null
    }
});
pokerapp.NetMsg.create = function (a, b, c, d) {};
pokerapp.NetMsgFactory = {};
pokerapp.NetMsgFactory.newConnectViaProxy = function (a, b, c) {
    a = new pokerapp.NetMsg(pokerapp.NetMsgTypes.ConnectViaProxy);
    a.addParameter(b);
    a.addParameter(c);
    a.addParameter("1");
    a.addParameter("1");
    a.addParameter(pokerapp.SecurityUtil.getLocalIP());
    return a
};
pokerapp.NetMsgFactory.newPlayerConnectRinggame = function (a, b) {
    var c = a.createNetMsg(pokerapp.NetMsgTypes.PlayerConnect);
    c.addParameter(b);
    c.addParameter("R");
    c.addParameter(pokerapp.SecurityUtil.getLocalIP());
    c.addParameter(pokerapp.SecurityUtil.getMachineID());
    return c
};
pokerapp.NetMsgFactory.newPlayerConnectTournament = function (a, b) {
    var c = a.createNetMsg(pokerapp.NetMsgTypes.PlayerConnect);
    c.addParameter(b);
    c.addParameter("T");
    c.addParameter(pokerapp.SecurityUtil.getLocalIP());
    c.addParameter(pokerapp.SecurityUtil.getMachineID());
    return c
};
pokerapp.NetMsgFactory.newPlayerUpdateState = function (a, b) {
    return a.createNetMsg(pokerapp.NetMsgTypes.PlayerUpdateState)
};
pokerapp.NetMsgFactory.newPlayerRequestSeat = function (a, b, c) {
    a = a.createNetMsg(pokerapp.NetMsgTypes.PlayerReqSeat);
    a.addParameter(b);
    a.addParameter(c);
    return a
};
pokerapp.NetMsgFactory.newPlayerBuyIn = function (a, b, c) {
    a = a.createNetMsg(pokerapp.NetMsgTypes.PlayerBuyIn);
    a.addParameter(b);
    a.addParameter(c);
    return a
};
pokerapp.NetMsgFactory.newPlayerCancelBuyIn = function (a) {
    a = a.createNetMsg(pokerapp.NetMsgTypes.PlayerBuyIn);
    a.addParameter("-1");
    return a
};
pokerapp.NetMsgFactory.newPlayerCancelRebuy = function (a) {
    a = a.createNetMsg(pokerapp.NetMsgTypes.PlayerRebuyAddon);
    a.addParameter("cancel");
    return a
};
pokerapp.NetMsgFactory.newPlayerRebuyAddon = function (a, b, c) {
    b = jcore.util.orDefault(b, !1);
    c = jcore.util.orDefault(c, 1);
    a = a.createNetMsg(pokerapp.NetMsgTypes.PlayerRebuyAddon);
    a.addParameter(b ? "1" : "0");
    a.addParameter(2 == c ? "1" : "0");
    a.addParameter("");
    a.addParameter("" + c);
    return a
};
pokerapp.NetMsgFactory.newPlayerCancelRequestSeat = function (a) {
    a = a.createNetMsg(pokerapp.NetMsgTypes.PlayerReqSeat);
    a.addParameter("cancel");
    return a
};
pokerapp.NetMsgFactory.newPlayerCall = function (a, b) {
    var c = a.createNetMsg(pokerapp.NetMsgTypes.PlayerCall);
    c.addParameter(b);
    c.addParameter("0:0");
    return c
};
pokerapp.NetMsgFactory.newPlayerCheck = function (a, b) {
    var c = a.createNetMsg(pokerapp.NetMsgTypes.PlayerCheck);
    c.addParameter(b);
    c.addParameter("0:0");
    return c
};
pokerapp.NetMsgFactory.newPlayerFold = function (a, b) {
    var c = a.createNetMsg(pokerapp.NetMsgTypes.PlayerFold);
    c.addParameter(b);
    c.addParameter("0:0");
    return c
};
pokerapp.NetMsgFactory.newPlayerBet = function (a, b, c) {
    a = a.createNetMsg(pokerapp.NetMsgTypes.PlayerBet);
    a.addParameter(b);
    a.addParameter(c);
    a.addParameter("0:0");
    return a
};
pokerapp.NetMsgFactory.newPlayerRaise = function (a, b, c) {
    a = a.createNetMsg(pokerapp.NetMsgTypes.PlayerRaise);
    a.addParameter(b);
    a.addParameter(c);
    a.addParameter("0:0");
    return a
};
pokerapp.NetMsgFactory.newPlayerAllIn = function (a, b) {
    var c = a.createNetMsg(pokerapp.NetMsgTypes.PlayerAllIn);
    c.addParameter(b);
    c.addParameter("0:0");
    return c
};
pokerapp.NetMsgFactory.newPlayerSitOut = function (a) {
    return a.createNetMsg(pokerapp.NetMsgTypes.PlayerSittingOut)
};
pokerapp.NetMsgFactory.newPlayerSitIn = function (a) {
    return a.createNetMsg(pokerapp.NetMsgTypes.PlayerSittingIn)
};
pokerapp.NetMsgFactory.newPlayerSitOutNextHand = function (a, b) {
    var c = a.createNetMsg(pokerapp.NetMsgTypes.PlayerSitOutNextHand);
    c.addParameter(b ? "1" : "0");
    return c
};
pokerapp.NetMsgFactory.newPlayerMuckCards = function (a) {
    a = a.createNetMsg(pokerapp.NetMsgTypes.PlayerShowCards);
    a.addParameter("0");
    return a
};
pokerapp.NetMsgFactory.newPlayerShowCards = function (a) {
    a = a.createNetMsg(pokerapp.NetMsgTypes.PlayerShowCards);
    a.addParameter("1");
    return a
};
pokerapp.NetMsgFactory.newPlayerLeaveTable = function (a) {
    return a.createNetMsg(pokerapp.NetMsgTypes.PlayerLeaveTable)
};
pokerapp.NetMsgFactory.newPlayerChatMessage = function (a, b) {
    var c = a.createNetMsg(pokerapp.NetMsgTypes.PlayerChat);
    c.addParameter("" + b);
    return c
};
pokerapp.NetMsgFactory.newPlayerAcceptRematchMessage = function (a) {
    return a.createNetMsg(pokerapp.NetMsgTypes.PlayerAcceptRematch)
};
pokerapp.NetMsgFactory.newPlayerDeclineRematchMessage = function (a) {
    return a.createNetMsg(pokerapp.NetMsgTypes.PlayerDeclineRematch)
};
pokerapp.NetMsgFactory.newPlayerRematchSupportedMessage = function (a) {
    return a.createNetMsg(pokerapp.NetMsgTypes.PlayerRematchSupported)
};
pokerapp.NetConnection = cc.Class.extend({
    ProtocolVersion: 2,
    on: {
        connectedChanged: null,
        receivedMsg: null
    },
    _lastReceiveTime: null,
    _protocolState: null,
    _currentProtocolOptions: null,
    _connectionDataStream: null,
    _connectionReady: !1,
    _endpoint_url: null,
    ctor: function (a) {
        this.on = {};
        this.on.connectedChanged = new signals.Signal;
        this.on.receivedMsg = new signals.Signal;
        this._endpoint_url = a;
        this._connectionReady = !1;
        this._protocolState = pokerapp.NetConnection.ProtocolReadState.none;
        this._currentProtocolOptions = pokerapp.NetProtocol.ProtocolMsgOptions.none;
        this._connectionDataStream = new jcore.net.WebSocketDataStream;
        this._connectionDataStream.on.connectedChanged.add(this._onDataConnectedChanged, this);
        this._connectionDataStream.on.receivedData.add(this._onDataAvailable, this);
        this._connectionDataStream.on.receivedJsonData.add(this._onDataAvailableJson, this)
    },
    hasFeature: function (a) {
        switch (a) {
        case pokerapp.NetProtocol.ProtocolFeature.writeBinaryParameters:
            return !1;
        case pokerapp.NetProtocol.ProtocolFeature.readBinaryParameters:
            return 2 <= this.ProtocolVersion;
        case pokerapp.NetProtocol.ProtocolFeature.messageOptions:
            return 2 <= this.ProtocolVersion;
        default:
            return !1
        }
    },
    isConnected: function () {
        return this._connectionReady && null != this._connectionDataStream && this._connectionDataStream.isConnected()
    },
    isError: function () {
        return null == this._connectionDataStream || this._connectionDataStream.isError()
    },
    isDisconnected: function () {
        return !this.isConnected()
    },
    connect: function () {
        this._connectionDataStream.connect(this._endpoint_url)
    },
    close: function () {
        if (null != this._connectionDataStream) try {
            this._connectionDataStream.on.connectedChanged.removeAll(),
                this._connectionDataStream.on.receivedData.removeAll(), this._connectionDataStream.on.receivedJsonData.removeAll(), this._connectionDataStream.close()
        } finally {
            this._connectionDataStream = null
        }
    },
    send: function (a) {
        var b = {
            t: a.getMsgType(),
            p: a.getParametersAsStrings()
        };
        a.hasTableSessionId() && (b.s = a.getTableSessionId());
        this._connectionDataStream.sendJson(b)
    },
    _setConnectionReady: function (a) {
        this._connectionReady = a;
        this.on.connectedChanged.dispatch(this)
    },
    _onDataConnectedChanged: function (a, b) {
        this._connectionDataStream.isConnected() ?
            this._setConnectionReady(!0) : this._setConnectionReady(!1)
    },
    _onDataAvailable: function (a, b) {
        var c = this._connectionDataStream.getInputDataStream();
        c.getLength() - c.getOffset() >= this._currentExpectedBytes && this._endReadFromStream()
    },
    _onDataAvailableJson: function (a, b) {
        if (jcore.util.isNotNull(b)) {
            var c = b.t,
                d = b.s;
            if (jcore.util.isNotNull(c)) {
                var f = pokerapp.NetMsgTypes.enumParseNameOrValue(c, pokerapp.NetMsgTypes.INVALID);
                if (f == pokerapp.NetMsgTypes.INVALID) jcore.log.warning("unexpected NetMsgType: " + c);
                else {
                    c =
                        new pokerapp.NetMsg(f, d);
                    d = b.p;
                    if (jcore.util.isNotNull(d))
                        for (f = 0; f < d.length; f++) {
                            var g = new pokerapp.NetMsgParameter(d[f]);
                            c.addParameter(g)
                        }
                    this.on.receivedMsg.dispatch(this, c)
                }
            }
        }
    },
    _beginReadFromStream: function (a) {
        this._currentExpectedBytes = a;
        a = this._connectionDataStream.getInputDataStream();
        a.getLength() - a.getOffset() >= this._currentExpectedBytes && this._endReadFromStream()
    },
    _endReadFromStream: function () {
        try {
            switch (this._protocolState) {
            case pokerapp.NetConnection.ProtocolReadState.readHeader:
                this._transitionProtocolToState(pokerapp.NetConnection.ProtocolReadState.processHeader);
                break;
            case pokerapp.NetConnection.ProtocolReadState.ReadBody:
                this._transitionProtocolToState(pokerapp.NetConnection.ProtocolReadState.processBody)
            }
        } catch (a) {}
    },
    _transitionProtocolToState: function (a) {
        try {
            switch (this._protocolState = a, a) {
            case pokerapp.NetConnection.ProtocolReadState.readHeader:
                var b = pokerapp.NetProtocol.ProtocolPreample.SIZE_BYTES;
                this._beginReadFromStream(b);
                break;
            case pokerapp.NetConnection.ProtocolReadState.processHeader:
                this._currentHeader = pokerapp.NetMsgSerializeHelper.readHeader(this,
                    this._readerBuffer, !0, !1, this._currentHeader);
                this._processHeader(this._currentHeader);
                break;
            case pokerapp.NetConnection.ProtocolReadState.readBody:
                null != m_Stream && (b = this._currentHeader.getPreample().getLength(), this._beginReadFromStream(b));
                break;
            case pokerapp.NetConnection.ProtocolReadState.processBody:
                this._currentHeader = pokerapp.NetMsgSerializeHelper.readHeader(this, this._readerBuffer, !1, !0, this._currentHeader), this._readBody(this._currentHeader, this._readerBuffer)
            }
        } catch (c) {}
    },
    _processProtocolOptions: function (a) {
        this._currentProtocolOptions =
            options
    },
    _processHeader: function (a) {
        64206 == a.getPreample().getLength() ? (a.getPreample().getLengthCheck(), this._tranistionProtocolToState(pokerapp.NetConnection.ProtocolReadState.readHeader)) : (a.isLengthValid(), this._tranistionProtocolToState(pokerapp.NetConnection.ProtocolReadState.readBody))
    },
    _readBody: function (a, b) {
        a.isMsgIdValid();
        if (pokerapp.NetMsgTypes.ServerSessionKey == a.getIndent().getMsgId()) SendPreferredOptions(), this._tranistionProtocolToState(pokerapp.NetConnection.ProtocolReadState.readHeader),
            this._setConnectionReady(!0);
        else {
            var c = pokerapp.NetMsgSerializer.readBody(this, a, b.Reader);
            switch (c.getMsgID()) {
            case pokerapp.NetMsgTypes.ProtocolOptions:
                this._processProtocolOptions(c.getParameterAt(0).ToUInt(0));
                break;
            case pokerapp.NetMsgTypes.ProtocolCompoundMsg:
                break;
            default:
                try {
                    this._lastReceiveTime = moment(), this.on.receivedMsg.dispatch(this, c)
                } catch (d) {}
            }
            this._tranistionProtocolToState(pokerapp.NetConnection.ProtocolReadState.readHeader)
        }
    }
});
pokerapp.NetConnection.ProtocolReadState = {
    none: "none",
    readHeader: "readHeader",
    processHeader: "processHeader",
    readBody: "readBody",
    processBody: "processBody"
};
pokerapp.NetSession = cc.Class.extend({
    on: {
        connectedChanged: null,
        receivedMsg: null
    },
    _netSessionId: null,
    _netConnection: null,
    _endpoint_url: null,
    _sessionData: null,
    ctor: function (a) {
        this.on = {};
        this.on.connectedChanged = new signals.Signal;
        this.on.receivedMsg = new signals.Signal;
        this._netSessionId = new pokerapp.NetSessionId;
        this._endpoint_url = a;
        this._getConnection()
    },
    isConnected: function () {
        return jcore.util.isNotNull(this._netConnection) && this._netConnection.isConnected()
    },
    isError: function () {
        return jcore.util.isNotNull(this._netConnection) &&
            this._netConnection.isError()
    },
    isAnonymous: function () {
        return jcore.util.isNull(this._netSessionId) || this._netSessionId.isAnonymous()
    },
    getSessionId: function () {
        return this._netSessionId
    },
    setSessionId: function (a) {
        jcore.util.isNull(a) ? this._netSessionId = new pokerapp.NetSessionId : this._netSessionId = a instanceof pokerapp.NetSessionId ? a : new pokerapp.NetSessionId(a)
    },
    clearSessionId: function () {
        this._netSessionId = new pokerapp.NetSessionId
    },
    connect: function () {
        jcore.assert(!this.isConnected(), "already connected");
        this._getConnection().connect()
    },
    close: function () {
        if (jcore.util.isNotNull(this._netConnection)) {
            var a = this._netConnection;
            this._netConnection = null;
            a.on.receivedMsg.removeAll();
            a.on.connectedChanged.removeAll();
            a.close()
        }
    },
    destroy: function () {
        pokerapp.NetSessionManager.getInstance().removeSession(this);
        this.clearSessionId();
        this.close()
    },
    createNetMsg: function (a) {
        return new pokerapp.NetMsg(a, this.getSessionId().toString())
    },
    sendNetMsg: function (a) {
        var b = a._msgType;
        Object.keys(pokerapp.NetMsgTypes).find(function (a) {
            return pokerapp.NetMsgTypes[a] ===
                b
        });
        jcore.assertNotNull(a);
        jcore.assert(this.isConnected(), "not connected, cannot send net msg");
        var c = this._getConnection();
        jcore.assertNotNull(c);
        c.send(a)
    },
    send: function (a) {
        jcore.assertNotNull(a);
        if (a && 0 < a.length) {
            var b = null;
            if (a[0] instanceof pokerapp.NetMsg) b = a[0];
            else
                for (var b = new pokerapp.NetMsg(a[0]), c = 1; c < a.length; c++) b.addParameter(new pokerapp.NetMsgParameter(a[c]));
            this.sendNetMsg(b)
        }
    },
    getSessionData: function () {
        return this._sessionData
    },
    setSessionData: function (a) {
        this._sessionData = a
    },
    _getConnection: function () {
        null == this._netConnection && (this._netConnection = new pokerapp.NetConnection(this._endpoint_url), this._netConnection.on.receivedMsg.add(this._onReceivedMsg, this), this._netConnection.on.connectedChanged.add(this._onConnectedChange, this));
        return this._netConnection
    },
    _onReceivedMsg: function (a, b) {
        this.on.receivedMsg.dispatch(this, b);
        return !0
    },
    _onConnectedChange: function (a) {
        this.on.connectedChanged.dispatch(this);
        return !0
    }
});
pokerapp.NetSessionId = cc.Class.extend({
    EMPTY: "00000000000000000000000000000000",
    _id: null,
    ctor: function (a) {
        this._id = jcore.util.orDefault(a, this.EMPTY)
    },
    isAnonymous: function () {
        return null === this._id || "" === this._id || this._id === this.EMPTY
    },
    equals: function (a) {
        return this.valueOf() === a.valueOf()
    },
    toString: function () {
        return this._id
    },
    valueOf: function () {
        return this._id
    }
});
pokerapp.NetRequestHandle = cc.Class.extend({
    on: {
        completed: null,
        error: null
    },
    _isComplete: !1,
    _isError: !1,
    _err: null,
    _promise: null,
    _promise_resolve: null,
    _promise_reject: null,
    ctor: function () {
        this.on = {};
        this.on.completed = new signals.Signal;
        this.on.error = new signals.Signal
    },
    asPromise: function () {
        if (!this._promise) {
            var a, b;
            this._promise = new Promise(function (c, d) {
                a = c;
                b = d
            });
            this._promise_resolve = a;
            this._promise_reject = b;
            this._isComplete ? this._promise_resolve && this._promise_resolve(this) : this._isError && this._promise_reject &&
                this._promise_reject(this._err)
        }
        return this._promise
    },
    isComplete: function () {
        return this._isComplete
    },
    isError: function () {
        return this._isError
    },
    onHandleCompletion: function () {
        this._isComplete = !0;
        this.on.completed.dispatch(this);
        this._promise_resolve && this._promise_resolve(this)
    },
    onHandleError: function (a) {
        this._isError = !0;
        this.on.error.dispatch(this);
        this._err = {
            name: "",
            message: a,
            request: this
        };
        this._promise_reject && this._promise_reject(this._err)
    }
});
pokerapp.NetSessionManager = cc.Class.extend({
    _netSessionMap: null,
    ctor: function () {
        this._netSessionMap = new Hashtable
    },
    getSession: function (a) {
        var b = null,
            c = a;
        a instanceof pokerapp.NetSessionId ? b = this.getSessionById(a) : a instanceof pokerapp.DataObject && (c = a.getObjectId());
        null == b && (this._netSessionMap.containsKey(c) ? b = this._netSessionMap.get(c) : (b = new pokerapp.NetSession(this._getConnectionUrl()), this._netSessionMap.put(c, b)));
        return b
    },
    getSessionById: function (a) {
        var b = null,
            b = a instanceof pokerapp.NetSessionId ?
            a : new pokerapp.NetSessionId(a);
        return (a = _.find(this._netSessionMap.values(), function (a) {
            return jcore.util.isNotNull(a) && a.getSessionId().equals(b)
        })) ? a : null
    },
    removeSession: function (a) {
        if (a && a.getSessionId) {
            var b = this;
            _.each(this._netSessionMap.keys(), function (c) {
                var d = b._netSessionMap.get(c);
                jcore.util.isNotNull(d) && (d === a || d.getSessionId().equals(a.getSessionId())) && b._netSessionMap.remove(c)
            });
            a.close()
        }
    },
    _getConnectionUrl: function () {
        var a = jcore.App.getInstance().getCurrentSkin().getGameServerUrl();
        return jcore.App.getInstance().getAppParameter("server", a)
    }
});
pokerapp.NetSessionManager.getInstance = function () {
    this._instance || (this._instance = new pokerapp.NetSessionManager);
    return this._instance
};
pokerapp.Constants = {};
pokerapp.Constants.INVALID_SEAT_POSITION = -1;
pokerapp.Constants.INVALID_TABLE_ID = -1;
pokerapp.Constants.INVALID_TOURNAMENT_ID = -1;
pokerapp.PokerLimitTypeMAX = 0;
pokerapp.PokerLimitType = jcore.Enum.create({
    NoLimit: pokerapp.PokerLimitTypeMAX++,
    PotLimit: pokerapp.PokerLimitTypeMAX++,
    FixedLimit: pokerapp.PokerLimitTypeMAX++,
    Unknown: pokerapp.PokerLimitTypeMAX++
});
pokerapp.PokerGameTypeMAX = 0;
pokerapp.PokerGameType = jcore.Enum.create({
    Unknown: pokerapp.PokerGameTypeMAX++,
    TexasHoldem: pokerapp.PokerGameTypeMAX++,
    Omaha: pokerapp.PokerGameTypeMAX++,
    OmahaHiLo: pokerapp.PokerGameTypeMAX++
});
pokerapp.EntryTypeMAX = 0;
pokerapp.EntryType = jcore.Enum.create({
    Unknown: pokerapp.EntryTypeMAX++,
    FREEROLL: pokerapp.EntryTypeMAX++,
    CAKESLICES: pokerapp.EntryTypeMAX++,
    GOLDCARDS: pokerapp.EntryTypeMAX++,
    TICKET: pokerapp.EntryTypeMAX++,
    TICKETCASH: pokerapp.EntryTypeMAX++,
    CASH: pokerapp.EntryTypeMAX++
});
pokerapp.WinTypeMAX = 0;
pokerapp.WinType = jcore.Enum.create({
    Unknown: pokerapp.WinTypeMAX++,
    TEXT: pokerapp.WinTypeMAX++,
    CAKESLICES: pokerapp.WinTypeMAX++,
    GOLDCARDS: pokerapp.WinTypeMAX++,
    TICKET: pokerapp.WinTypeMAX++,
    CASH: pokerapp.WinTypeMAX++
});
pokerapp.PlayerActionMAX = 0;
pokerapp.PokerPlayerActions = jcore.Enum.create({
    None: pokerapp.PlayerActionMAX++,
    Fold: pokerapp.PlayerActionMAX++,
    Call: pokerapp.PlayerActionMAX++,
    Check: pokerapp.PlayerActionMAX++,
    Bet: pokerapp.PlayerActionMAX++,
    Raise: pokerapp.PlayerActionMAX++,
    AllIn: pokerapp.PlayerActionMAX++,
    PostSB: pokerapp.PlayerActionMAX++,
    PostBB: pokerapp.PlayerActionMAX++,
    PostDB: pokerapp.PlayerActionMAX++,
    PostAnte: pokerapp.PlayerActionMAX++,
    SitOut: pokerapp.PlayerActionMAX++,
    WaitBB: pokerapp.PlayerActionMAX++,
    Win: pokerapp.PlayerActionMAX++,
    ExtraTime: pokerapp.PlayerActionMAX++,
    DET: pokerapp.PlayerActionMAX++,
    SitIn: pokerapp.PlayerActionMAX++,
    BringIn: pokerapp.PlayerActionMAX++,
    Client_Muck: pokerapp.PlayerActionMAX++,
    Client_ShowCards: pokerapp.PlayerActionMAX++,
    Client_AlwaysMuck: pokerapp.PlayerActionMAX++,
    Client_JoinWaitList: pokerapp.PlayerActionMAX++,
    Client_UnJoinWaitList: pokerapp.PlayerActionMAX++,
    Client_CancelRebuy: pokerapp.PlayerActionMAX++,
    Client_Rebuy: pokerapp.PlayerActionMAX++,
    Client_BetOrRaiseAllIn: pokerapp.PlayerActionMAX++,
    Client_PlayNow: pokerapp.PlayerActionMAX++,
    Client_ReEnter: pokerapp.PlayerActionMAX++,
    Client_CancelReEnter: pokerapp.PlayerActionMAX++,
    Client_AcceptRematch: pokerapp.PlayerActionMAX++,
    Client_DeclineRematch: pokerapp.PlayerActionMAX++,
    Client_RematchSupported: pokerapp.PlayerActionMAX++
});
pokerapp.PlayerPreActionsMAX = 0;
pokerapp.PokerPlayerPreActions = jcore.Enum.create({
    None: pokerapp.PlayerPreActionsMAX++,
    FoldToAnyBet: pokerapp.PlayerPreActionsMAX++,
    Fold: pokerapp.PlayerPreActionsMAX++,
    Check: pokerapp.PlayerPreActionsMAX++,
    CheckFold: pokerapp.PlayerPreActionsMAX++,
    Call: pokerapp.PlayerPreActionsMAX++,
    CallAny: pokerapp.PlayerPreActionsMAX++,
    CallAllIn: pokerapp.PlayerPreActionsMAX++,
    CheckCallAny: pokerapp.PlayerPreActionsMAX++,
    Bet: pokerapp.PlayerPreActionsMAX++,
    BetRaiseAllIn: pokerapp.PlayerPreActionsMAX++,
    Raise: pokerapp.PlayerPreActionsMAX++,
    RaiseAny: pokerapp.PlayerPreActionsMAX++,
    BetRaiseAny: pokerapp.PlayerPreActionsMAX++,
    Pot: pokerapp.PlayerPreActionsMAX++,
    AllIn: pokerapp.PlayerPreActionsMAX++
});
pokerapp.SeatStateMAX = 0;
pokerapp.SeatState = jcore.Enum.create({
    Empty: pokerapp.SeatStateMAX++,
    Unavailable: pokerapp.SeatStateMAX++,
    Reserved: pokerapp.SeatStateMAX++,
    SitOut: pokerapp.SeatStateMAX++,
    WaitBB: pokerapp.SeatStateMAX++,
    ReadyForNextHand: pokerapp.SeatStateMAX++,
    Playing: pokerapp.SeatStateMAX++,
    Sat: pokerapp.SeatStateMAX++
});
pokerapp.DealerChatType = jcore.Enum.create({
    Flop: 0,
    Turn: 1,
    River: 2,
    HoleCards: 3,
    Fold: 4,
    Call: 5,
    Raise_: 6,
    Bet: 7,
    ReturnBet: 8,
    ShowCards: 9,
    Check: 10,
    Muck: 11,
    BuyIn: 12,
    SitOut: 13,
    SitIn: 14,
    WinPot: 15,
    Leave: 16,
    Join: 17,
    PostSB: 18,
    PostBB: 19,
    PostDB: 20,
    AllIn: 21,
    Chat: 22,
    AbortHand: 23,
    StartGame: 24,
    Pause: 25,
    Resume: 26,
    BreakStart: 27,
    BreakEnd: 28,
    NewBlindLevel: 29,
    WinRound: 30,
    WinTournament: 31,
    EliminateFromTournament: 32,
    StartDET: 33,
    StartExtraTime: 34,
    MoveBetToPot: 35,
    WinHiPot: 36,
    WinLoPot: 37,
    GetGC: 38,
    PostAnte: 39,
    ChatSuspended: 40,
    WaitButtonPass: 41,
    TablePlayerMoved: 42,
    HandForHandPause: 43,
    BuyInHand: 44,
    PauseTournament: 45,
    ResumeTournament: 46,
    WaitListPosition: 47,
    Addon: 48,
    Rebuy: 49,
    WaitForRebuy: 50,
    Bounty: 51,
    HandSaveProblem: 52,
    CancelTournament: 53,
    Table_ChatEnabled: 54,
    Table_ChatDisabled: 55,
    RebuyCompleted: 56,
    RebuyRefunded: 57,
    CloseTable: 58,
    DisconnectObserver: 59,
    HFHChatDisabled: 60,
    ThirdStreet: 61,
    FourthStreet: 62,
    FifthStreet: 63,
    Vela: 64,
    BringIn: 65,
    ClientGenerated: 66,
    None: 67,
    QueryRematch: 68,
    RematchAccepted: 69,
    RematchDeclined: 70
});
pokerapp.PlayerChatType = jcore.Enum.create({
    Unknown: 0,
    PLR: 1,
    OBS: 2,
    SUP: 3,
    SYS: 4,
    CELP: 5,
    CELO: 6,
    None: 7
});
pokerapp.BreakType = jcore.Enum.create({
    None: -1,
    Rebuy: 0,
    Addon: 1,
    RebuyAddon: 2,
    Sync: 3,
    Regular: 4
});
pokerapp.BuyInType = jcore.Enum.create({
    Normal: 0,
    AutoRebuy: 1,
    AutoTopup: 2
});
pokerapp.TableErrorCode = jcore.Enum.create({
    ActionOutOfTurn: 0,
    InvalidAction: 1,
    InvalidBetAmount: 2,
    InvalidBuyInAmount: 3,
    SeatDenied: 4,
    DuplicatedIP: 5,
    RebuyAddonDenied: 6,
    GenericError: 7,
    InvalidSession: 8,
    UserLimitsExceeded: 9,
    Unknown: 10
});
pokerapp.SeatDeniedError = jcore.Enum.create({
    None: 0,
    TableNotDefined: 1,
    UserNotDefined: 2,
    EmailNotValidated: 3,
    NotRealMoneyAccount: 4,
    TableAtMaxPlayers: 5,
    InvalidSiteId: 6,
    MaxTablesPerHeadsUpStakes: 7,
    OperatorsCannotPlay: 8,
    PlayPrivilegeLocked: 9,
    DisallowSitWith: 10,
    PropRestriction: 11,
    PlayRestriction: 12,
    DuplicateReservedSeat: 13,
    BankrollProtection: 14,
    ForcedBankrollProtection: 15,
    BalanceValidation: 16,
    UserLimitsExceeded: 17
});
pokerapp.ActionIndicator = jcore.Enum.create({
    Positive: 0,
    Negative: 1,
    Neutral: 2,
    Generic: 3
});
pokerapp.TournamentState = jcore.Enum.create({
    Unknown: 0,
    Cancelled: 1,
    Completed: 2,
    Canceling: 3,
    Announced: 4,
    Running: 5,
    Paused: 6,
    Seating: 7,
    Full: 8,
    Registering: 9
});
pokerapp.CurrencyMAX = 0;
pokerapp.Currency = jcore.Enum.create({
    Unknown: pokerapp.CurrencyMAX++,
    XXX: pokerapp.CurrencyMAX++,
    USD: pokerapp.CurrencyMAX++,
    CAD: pokerapp.CurrencyMAX++,
    CNY: pokerapp.CurrencyMAX++,
    RMB: pokerapp.CurrencyMAX++,
    HKD: pokerapp.CurrencyMAX++,
    JPY: pokerapp.CurrencyMAX++,
    RUB: pokerapp.CurrencyMAX++,
    EUR: pokerapp.CurrencyMAX++,
    GBP: pokerapp.CurrencyMAX++,
    AUD: pokerapp.CurrencyMAX++,
    INR: pokerapp.CurrencyMAX++,
    TWD: pokerapp.CurrencyMAX++,
    KRW: pokerapp.CurrencyMAX++,
    VND: pokerapp.CurrencyMAX++,
    TRY: pokerapp.CurrencyMAX++,
    PLN: pokerapp.CurrencyMAX++,
    SEK: pokerapp.CurrencyMAX++,
    MYR: pokerapp.CurrencyMAX++,
    MBC: pokerapp.CurrencyMAX++,
    NGN: pokerapp.CurrencyMAX++,
    VEF: pokerapp.CurrencyMAX++,
    MXN: pokerapp.CurrencyMAX++,
    PRL: pokerapp.CurrencyMAX++
});
pokerapp.CurrencySymbols = new Hashtable;
pokerapp.CurrencySymbols.put(pokerapp.Currency.Unknown, "");
pokerapp.CurrencySymbols.put(pokerapp.Currency.XXX, "");
pokerapp.CurrencySymbols.put(pokerapp.Currency.USD, "$");
pokerapp.CurrencySymbols.put(pokerapp.Currency.EUR, "€");
pokerapp.CurrencySymbols.put(pokerapp.Currency.GBP, "£");
pokerapp.CurrencySymbols.put(pokerapp.Currency.CAD, "C$");
pokerapp.CurrencySymbols.put(pokerapp.Currency.CNY, "¥");
pokerapp.CurrencySymbols.put(pokerapp.Currency.RMB, "¥");
pokerapp.CurrencySymbols.put(pokerapp.Currency.HKD, "HK$");
pokerapp.CurrencySymbols.put(pokerapp.Currency.JPY, "¥");
pokerapp.CurrencySymbols.put(pokerapp.Currency.RUB, "RUB");
pokerapp.CurrencySymbols.put(pokerapp.Currency.AUD, "A$");
pokerapp.CurrencySymbols.put(pokerapp.Currency.INR, "₹");
pokerapp.CurrencySymbols.put(pokerapp.Currency.TWD, "NT$");
pokerapp.CurrencySymbols.put(pokerapp.Currency.KRW, "₩");
pokerapp.CurrencySymbols.put(pokerapp.Currency.VND, "₫");
pokerapp.CurrencySymbols.put(pokerapp.Currency.TRY, "TRY");
pokerapp.CurrencySymbols.put(pokerapp.Currency.PLN, "zl");
pokerapp.CurrencySymbols.put(pokerapp.Currency.SEK, "kr");
pokerapp.CurrencySymbols.put(pokerapp.Currency.MYR, "MYR");
pokerapp.CurrencySymbols.put(pokerapp.Currency.MBC, "m฿");
pokerapp.CurrencySymbols.put(pokerapp.Currency.NGN, "₦");
pokerapp.CurrencySymbols.put(pokerapp.Currency.VEF, "Bs");
pokerapp.CurrencySymbols.put(pokerapp.Currency.MXN, "$");
pokerapp.CurrencySymbols.put(pokerapp.Currency.PRL, "珍珠");
pokerapp.Money = cc.Class.extend({
    _currency: null,
    _amount: 0,
    ctor: function (a, b) {
        this._currency = jcore.util.orDefault(a, pokerapp.Currency.Unknown);
        this._amount = jcore.util.orDefault(b, 0)
    },
    getCurrency: function () {
        return this._currency
    },
    getAmount: function () {
        return this._amount
    },
    isZero: function () {
        return 0 == this._amount
    }
});
var _proto = pokerapp.Money.prototype;
cc.defineGetterSetter(_proto, "currency", _proto.getCurrency, null);
cc.defineGetterSetter(_proto, "amount", _proto.getAmount, null);
pokerapp.Stake = cc.Class.extend({
    _currency: null,
    _loStake: 0,
    _hiStake: 0,
    _smallBlind: 0,
    _ante: 0,
    _limit: null,
    ctor: function (a, b, c, d, f) {
        this._loStake = jcore.util.orDefault(a, 0);
        this._hiStake = jcore.util.orDefault(b, 0);
        this._ante = jcore.util.orDefault(c, 0);
        this._smallBlind = jcore.util.orDefault(d, 0);
        this._currency = jcore.util.orDefault(f, pokerapp.Currency.Unknown);
        this._limit = pokerapp.PokerLimitType.Unknown
    },
    getLow: function () {
        return this._loStake
    },
    setLow: function (a) {
        this._loStake = a
    },
    getHigh: function () {
        return this._hiStake
    },
    setHigh: function (a) {
        this._hiStake = a
    },
    getSmallBlind: function () {
        return this._smallBlind
    },
    setSmallBlind: function (a) {
        this._smallBlind = a
    },
    getAnte: function () {
        return this._ante
    },
    setAnte: function (a) {
        this._ante = a
    },
    getCurrency: function () {
        return this._currency
    },
    setCurrency: function (a) {
        this._currency = a
    },
    getLimit: function () {
        return this._limit
    },
    setLimit: function (a) {
        this._limit = a
    }
});
_proto = pokerapp.Stake.prototype;
cc.defineGetterSetter(_proto, "high", _proto.getHigh, _proto.setHigh);
cc.defineGetterSetter(_proto, "low", _proto.getLow, _proto.setLow);
cc.defineGetterSetter(_proto, "smallBlind", _proto.getSmallBlind, _proto.setSmallBlind);
cc.defineGetterSetter(_proto, "ante", _proto.getAnte, _proto.setAnte);
cc.defineGetterSetter(_proto, "currency", _proto.getCurrency, _proto.setCurrency);
cc.defineGetterSetter(_proto, "limit", _proto.getLimit, _proto.setLimit);
pokerapp.User = jcore.ObservableModel.extend({
    _balanceTable: null,
    ctor: function () {
        this._super();
        this.securityToken = this.displayName = this.externalSessionId = this.userId = "";
        this._balanceTable = new Hashtable
    },
    getBalance: function (a, b) {
        var c = pokerapp.Currency.enumParseNameOrValue(a),
            d = this._balanceTable.get(c);
        return null != d ? new pokerapp.Money(c, d.amount + (b ? d.amountInPlay : 0)) : 0
    },
    getBalanceObservable: function (a) {
        a = pokerapp.Currency.enumParseNameOrValue(a);
        var b = this._balanceTable.get(a);
        null == b && (b = new pokerapp.UserBalance(a),
            this._balanceTable.put(a, b));
        return b
    },
    updateBalance: function (a, b, c) {
        a = pokerapp.Currency.enumParseNameOrValue(a);
        var d = this._balanceTable.get(a);
        null == d && (d = new pokerapp.UserBalance(a), this._balanceTable.put(a, d));
        d.amount = b;
        d.amountInPlay = c
    },
    update: function (a, b, c) {
        this.userId = a;
        this.externalSessionId = b;
        this.displayName = c
    }
});
pokerapp.User.ObservableProperties = ["userId", "externalSessionId", "displayName", "securityToken"];
jcore.ObservableModel.defineAllProperties(pokerapp.User.prototype, pokerapp.User.ObservableProperties);
pokerapp.UserBalance = jcore.ObservableModel.extend({
    ctor: function (a) {
        this._super();
        this.currency = a;
        this.amountInPlay = this.amount = 0
    }
});
pokerapp.UserBalance.ObservableProperties = ["currency", "amount", "amountInPlay"];
jcore.ObservableModel.defineAllProperties(pokerapp.UserBalance.prototype, pokerapp.UserBalance.ObservableProperties);
pokerapp.DataObject = jcore.ObservableModel.extend({
    _dataObjectId: null,
    _dataObjectShortId: null,
    _parent: null,
    _children: null,
    ctor: function () {
        this._super();
        this._parent = null;
        this._children = []
    },
    initDataObject: function (a, b) {
        this._dataObjectShortId = this._dataObjectId = a;
        this._parent = b
    },
    getObjectId: function () {
        return this._dataObjectId
    },
    getObjectShortId: function () {
        return this._dataObjectShortId
    },
    getParent: function () {
        return this._parent
    },
    hasParent: function () {
        return jcore.util.isNotNull(this._parent)
    },
    addChild: function (a) {
        a._parent =
            this;
        this._children.push(a)
    },
    removeChild: function () {},
    updateDataValues: function (a) {},
    _processUpdatedValues: function (a, b, c) {
        for (var d = 0; d < b.length; d++) {
            var f = b[d],
                g = [];
            _.isArray(f.fromName) ? g = g.concat(f.fromName) : g.push(f.fromName);
            _.each(g, function (b) {
                a.containsKey(b) ? (b = a.get(b), f.converter && (b = f.converter(b)), this.setValue(f.toName, b)) : c && cc.log("property not found " + b)
            }, this)
        }
    }
});
pokerapp.DataObject.toBoolean = function (a) {
    return pokerapp.ConvertUtil.toBoolean(a, !1)
};
pokerapp.DataObject.toDecimal = function (a) {
    return pokerapp.ConvertUtil.toDecimal(a, 0)
};
pokerapp.DataObject.toInt = function (a) {
    return pokerapp.ConvertUtil.toInt(a, 0)
};
pokerapp.DataObject.toIntDefaultNegative = function (a) {
    return pokerapp.ConvertUtil.toInt(a, -1)
};
pokerapp.DataObjectManager = jcore.service.BaseService.extend({
    _objectTable: null,
    ctor: function () {
        this._super("DataObjectManager");
        this._objectTable = new Hashtable
    },
    init: function () {
        this._super()
    },
    find: function (a) {
        return jcore.util.isNull(a) ? null : this._objectTable.get(a)
    },
    findWithFilter: function (a) {
        return jcore.util.isNull(a) ? [] : _.filter(this._objectTable.values(), a)
    },
    update: function (a, b) {
        var c = this.find(a);
        null == c && (c = this._createDataObject(a), c.initDataObject(a), this._objectTable.put(a, c));
        c.updateDataValues(b);
        return c
    },
    _createDataObject: function (a) {
        return s.startsWith(a, "/RG/") || s.startsWith(a, "@:RG:") ? new pokerapp.RingGameHeader : s.startsWith(a, "/TN/Tournaments/") || s.startsWith(a, "@:TN:Tournaments:") ? new pokerapp.TournamentGameHeader : new pokerapp.DataObject
    }
});
pokerapp.DataObjectManager.getInstance = function () {
    this._instance || (this._instance = new pokerapp.DataObjectManager);
    return this._instance
};
pokerapp.GameHeader = pokerapp.DataObject.extend({
    ctor: function () {
        this._super();
        this.host = "";
        this.port = 0;
        this.limitType = pokerapp.PokerLimitType.Unknown;
        this.gameType = pokerapp.PokerGameType.Unknown;
        this.currency = pokerapp.Currency.Unknown
    },
    getTitle: function () {
        return ""
    },
    updateDataValues: function (a) {
        this._super(a);
        this._processUpdatedValues(a, pokerapp.GameHeader.UpdatePropertiesMap)
    }
});
pokerapp.GameHeader.ObservableProperties = ["host", "port", "limitType", "gameType", "currency"];
pokerapp.GameHeader.UpdatePropertiesMap = [{
    toName: "host",
    fromName: "HostName",
    converter: null
}, {
    toName: "port",
    fromName: ["PortNo", "Port"],
    converter: pokerapp.DataObject.toInt
}, {
    toName: "limitType",
    fromName: "LimitType",
    converter: function (a) {
        return pokerapp.ConvertUtil.toLimitType(a)
    }
}, {
    toName: "gameType",
    fromName: "GameTypeID",
    converter: function (a) {
        return pokerapp.ConvertUtil.toGameType(a)
    }
}, {
    toName: "currency",
    fromName: "Currency",
    converter: function (a) {
        return pokerapp.ConvertUtil.toCurrency(a)
    }
}];
jcore.ObservableModel.defineAllProperties(pokerapp.GameHeader.prototype, pokerapp.GameHeader.ObservableProperties);
pokerapp.RingGameHeader = pokerapp.GameHeader.extend({
    ctor: function () {
        this._super();
        this.tableId = pokerapp.Constants.INVALID_TABLE_ID;
        this.tableName = "";
        this.playersWaiting = this.handsPerHour = this.averagePot = this.flopPercentage = this.playersPlaying = 0;
        this.isFoldOrAllIn = this.isTurbo = this.isShared = !1;
        this.maxSeats = this.maxBuyIn = this.minBuyIn = 0;
        var a = this;
        this.isTableFull = ko.computed(function () {
            return a.playersPlaying >= a.maxSeats
        });
        var b = a.getObservable("loStake"),
            c = a.getObservable("hiStake"),
            d = a.getObservable("smallBlind"),
            f = a.getObservable("currency");
        this.addObservable("stakes", ko.computed(function () {
            return new pokerapp.Stake(b(), c(), 0, d(), f())
        }))
    },
    getTitle: function () {
        return String.format("#{0} Ring Game: {1}", this.tableId, this.tableName, pokerapp.FormatUtil.formatLimitType(this.limitType), pokerapp.FormatUtil.formatShortGameType(this.gameType))
    },
    updateDataValues: function (a) {
        this._super(a);
        this._processUpdatedValues(a, pokerapp.RingGameHeader.UpdatePropertiesMap)
    }
});
pokerapp.RingGameHeader.ObservableProperties = "tableId tableName playersPlaying flopPercentage averagePot handsPerHour playersWaiting isShared isTurbo isFoldOrAllIn minBuyIn maxBuyIn maxSeats smallBlind loStake hiStake stakes".split(" ");
pokerapp.RingGameHeader.UpdatePropertiesMap = [{
        toName: "tableId",
        fromName: "TableID",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "tableName",
        fromName: "TableName",
        converter: null
    }, {
        toName: "playersPlaying",
        fromName: "PlayersPlaying",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "flopPercentage",
        fromName: "ViewFlopPerc",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "averagePot",
        fromName: "AvgPot",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "handsPerHour",
        fromName: "HandsPerHour",
        converter: pokerapp.DataObject.toDecimal
    },
    {
        toName: "playersWaiting",
        fromName: "PlayersWaiting",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "isShared",
        fromName: "Shared",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "isTurbo",
        fromName: "Turbo",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "isFoldOrAllIn",
        fromName: "AllInFold",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "minBuyIn",
        fromName: "MinBuyIn",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "maxBuyIn",
        fromName: "MaxBuyIn",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "maxSeats",
        fromName: "MaxSeats",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "smallBlind",
        fromName: "SmallBlind",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "loStake",
        fromName: "LoStake",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "hiStake",
        fromName: "HiStake",
        converter: pokerapp.DataObject.toDecimal
    }
];
jcore.ObservableModel.defineAllProperties(pokerapp.RingGameHeader.prototype, pokerapp.RingGameHeader.ObservableProperties);
pokerapp.TournamentGameHeader = pokerapp.GameHeader.extend({
    ctor: function () {
        this._super();
        this.tournamentId = pokerapp.Constants.INVALID_TOURNAMENT_ID;
        this.TSID = -1;
        this.status = pokerapp.TournamentState.Unknown;
        this.description = "";
        this.registeredPlayers = this.activePlayers = 0;
        this.actualStartDate = this.startDate = null;
        this.quickTimeSecs = this.extraTimeMaxSecs = this.extraTimeAwardedSecs = this.timeBankSecs = this.maxSeats = this.maxPlayers = this.minPlayers = 0;
        this.registrationClosingTime = this.registrationOpenTime = null;
        this.entryType = pokerapp.EntryType.Unknown;
        this.entryGoldCards = null;
        this.lateRegistrationMins = this.rebuyPeriod = this.rebuyMaxCount = this.rebuyMaxAmount = this.rebuyFee = this.rebuyCost = this.isUnlimitedRebuys = this.addOnMaxCount = this.addOnMaxAmount = this.addOnFee = this.addOnCost = this.entryFeeGoldChips = this.entryFee = this.entryBuyIn = this.entryGoldChips = 0;
        this.winType = pokerapp.WinType.Unknown;
        this.winTicketTSID = -1;
        this.winTicketCount = 0;
        this.salesPitch = this.winDescription = "";
        this.endDate = this.salesPitchUrl = null;
        this.initialChipCount = this.reEntryMaxCount = this.estimatedLengthMins = 0;
        this.dynamicPSID = -1;
        this.bountyAmount = 0;
        this.isSharedTable = this.isSyncroBreak = this.isOnBreak = this.isKamikazeTournament = this.isShootoutTournament = this.isTurbo = this.isPrivate = this.hideAnnounced = this.isAllowRedeemTickets = this.isShootoutTournament = this.isBountyTournament = this.isReEntryAllowed = this.isLateRegistration = !1;
        this.lateRegistrationSecondsRemaining = this.rebuyTimeRemaining = 0
    },
    getTitle: function () {
        return String.format("Tournament {0}",
            0)
    },
    updateDataValues: function (a) {
        this._super(a);
        this._processUpdatedValues(a, pokerapp.TournamentGameHeader.UpdatePropertiesMap)
    }
});
pokerapp.TournamentGameHeader.ObservableProperties = "tournamentId TSID status description activePlayers registeredPlayers startDate actualStartDate minPlayers maxPlayers maxSeats timeBankSecs extraTimeAwardedSecs extraTimeMaxSecs quickTimeSecs registrationOpenTime registrationClosingTime entryType entryGoldCards entryGoldChips entryBuyIn entryFee entryFeeGoldChips addOnCost addOnFee addOnMaxAmount addOnMaxCount isUnlimitedRebuys rebuyCost rebuyFee rebuyMaxAmount rebuyMaxCount rebuyPeriod lateRegistrationMins winType winTicketTSID winTicketCount winDescription salesPitch salesPitchUrl endDate estimatedLengthMins reEntryMaxCount initialChipCount dynamicPSID bountyAmount isLateRegistration isReEntryAllowed isBountyTournament isShootoutTournament isAllowRedeemTickets hideAnnounced isPrivate isTurbo isShootoutTournament isKamikazeTournament isOnBreak isSyncroBreak isSharedTable rebuyTimeRemaining lateRegistrationSecondsRemaining".split(" ");
pokerapp.TournamentGameHeader.UpdatePropertiesMap = [{
        toName: "tournamentId",
        fromName: "TournamentID",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "TSID",
        fromName: "TSID",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "status",
        fromName: "Status",
        converter: function (a) {
            return pokerapp.ConvertUtil.toTournamentState(a)
        }
    }, {
        toName: "description",
        fromName: "Description",
        converter: null
    }, {
        toName: "activePlayers",
        fromName: "PlayerCount",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "registeredPlayers",
        fromName: "RegCount",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "startDate",
        fromName: "StartDate",
        converter: null
    }, {
        toName: "actualStartDate",
        fromName: "ActualStartDate",
        converter: null
    }, {
        toName: "minPlayers",
        fromName: "MinPlayers",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "maxPlayers",
        fromName: "MaxPlayers",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "maxSeats",
        fromName: "MaxSeats",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "timeBankSecs",
        fromName: "TimeBankSecs",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "extraTimeAwardedSecs",
        fromName: "ExtraTimeAwardedSecs",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "extraTimeMaxSecs",
        fromName: "ExtraTimeMaxSecs",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "quickTimeSecs",
        fromName: "QuickTimeSecs",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "registrationOpenTime",
        fromName: "OpenRegMins",
        converter: function (a) {
            return moment().add(pokerapp.ConvertUtil.toInt(a, 0), "minutes")
        }
    }, {
        toName: "registrationClosingTime",
        fromName: "CloseRegSecs",
        converter: function (a) {
            return moment().add(pokerapp.ConvertUtil.toInt(a,
                0), "seconds")
        }
    }, {
        toName: "entryType",
        fromName: "EntryType",
        converter: function (a) {
            return pokerapp.ConvertUtil.toEntryType(a)
        }
    }, {
        toName: "entryGoldCards",
        fromName: "EntryGoldCards",
        converter: null
    }, {
        toName: "entryGoldChips",
        fromName: "EntryGoldChips",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "entryBuyIn",
        fromName: "EntryBuyIn",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "entryFee",
        fromName: "EntryFee",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "entryFeeGoldChips",
        fromName: "GChipEntryFee",
        converter: pokerapp.DataObject.toInt
    },
    {
        toName: "addOnCost",
        fromName: "AddonCost",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "addOnFee",
        fromName: "AddonFee",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "addOnMaxAmount",
        fromName: "AddonMaxAmount",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "addOnMaxCount",
        fromName: "AddonMaxCount",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "isUnlimitedRebuys",
        fromName: "RebuyUnlimited",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "rebuyCost",
        fromName: "RebuyCost",
        converter: pokerapp.DataObject.toDecimal
    },
    {
        toName: "rebuyFee",
        fromName: "RebuyFee",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "rebuyMaxAmount",
        fromName: "RebuyMaxAmount",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "rebuyMaxCount",
        fromName: "RebuyMaxCount",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "rebuyPeriod",
        fromName: "RebuyPeriod",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "lateRegistrationMins",
        fromName: "LateRegistrationMins",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "winType",
        fromName: "WinType",
        converter: function (a) {
            return pokerapp.ConvertUtil.toWinType(a)
        }
    },
    {
        toName: "winTicketTSID",
        fromName: "WinTicketTSID",
        converter: null
    }, {
        toName: "winTicketCount",
        fromName: "WinTicketCount",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "winDescription",
        fromName: "WinDescription",
        converter: null
    }, {
        toName: "salesPitch",
        fromName: "SalesPitch",
        converter: null
    }, {
        toName: "salesPitchUrl",
        fromName: "SalesPitchUrl",
        converter: null
    }, {
        toName: "endDate",
        fromName: "EndDate",
        converter: null
    }, {
        toName: "estimatedLengthMins",
        fromName: "EstLengthMins",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "reEntryMaxCount",
        fromName: "ReEntryMaxCount",
        converter: pokerapp.DataObject.toInt
    }, {
        toName: "initialChipCount",
        fromName: "ChipCount",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "dynamicPSID",
        fromName: "DynamicPSID",
        converter: null
    }, {
        toName: "bountyAmount",
        fromName: "BountyAmount",
        converter: pokerapp.DataObject.toDecimal
    }, {
        toName: "isLateRegistration",
        fromName: "LateRegistration",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "isReEntryAllowed",
        fromName: "AllowReEntry",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "isBountyTournament",
        fromName: "Bounty",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "isShootoutTournament",
        fromName: "ShootoutTournament",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "isAllowRedeemTickets",
        fromName: "AllowRedeemTickets",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "hideAnnounced",
        fromName: "HideAnnounced",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "isPrivate",
        fromName: "IsPrivate",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "isTurbo",
        fromName: "Turbo",
        converter: pokerapp.DataObject.toBoolean
    },
    {
        toName: "isShootoutTournament",
        fromName: "ShootoutTournament",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "isKamikazeTournament",
        fromName: "KamikazeTournament",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "isOnBreak",
        fromName: "OnBreak",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "isSyncroBreak",
        fromName: "AutoSync",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "isSharedTable",
        fromName: "Shared",
        converter: pokerapp.DataObject.toBoolean
    }, {
        toName: "rebuyTimeRemaining",
        fromName: "RemainingRebuyPeriod",
        converter: null
    }, {
        toName: "lateRegistrationSecondsRemaining",
        fromName: "RemainingLateRegistration",
        converter: pokerapp.DataObject.toDecimal
    }
];
jcore.ObservableModel.defineAllProperties(pokerapp.TournamentGameHeader.prototype, pokerapp.TournamentGameHeader.ObservableProperties);
var CardDeckModel = cc.Class.extend({
    _cards: [],
    _nDealt: 0,
    ctor: function () {
        this._cards = [];
        this._nDealt = 0;
        this.reset()
    },
    reset: function () {
        for (; 52 > this._cards.length;) this._cards.push(new CardModel.create(CardRank.kCardRank_Invalid, CardSuit.kCardSuit_Invalid));
        for (var a = this._nDealt = 0, b = 0; b <= CardSuit.kCardSuit_Max; b++)
            for (var c = 0; c <= CardRank.kCardRank_Max; c++) this._cards[a].set(c, b), a++
    },
    getCardAt: function (a) {
        return this._cards[a]
    },
    getCount: function () {
        return this._cards.length
    },
    getCardsDealt: function () {
        return this._nDealt
    },
    getCardsUnDealt: function () {
        return this.getCount() - this.getCardsDealt()
    },
    shuffle: function () {
        for (var a = this.getCount() - 1; 0 < a; a--) {
            var b = Math.floor(Math.random() * a) + 1,
                c = this._cards[a];
            this._cards[a] = this._cards[b];
            this._cards[b] = c
        }
    },
    dealCard: function () {
        if (this._nDealt < this.getCount()) {
            var a = this._cards[this._nDealt];
            this._nDealt++;
            return a
        }
        return null
    }
});
var CardRank = jcore.Enum.create({
        Two: 0,
        Three: 1,
        Four: 2,
        Five: 3,
        Six: 4,
        Seven: 5,
        Eight: 6,
        Nine: 7,
        Ten: 8,
        Jack: 9,
        Queen: 10,
        King: 11,
        Ace: 12,
        Min: 0,
        Max: 12,
        Invalid: -1
    }),
    CardSuit = jcore.Enum.create({
        Diamond: 0,
        Heart: 1,
        Spade: 2,
        Club: 3,
        Min: 0,
        Max: 3,
        Invalid: -1
    }),
    CardModel = cc.Class.extend({
        rank: 0,
        suit: 0,
        ctor: function (a, b) {
            this.rank = jcore.util.orDefault(a, CardRank.Invalid);
            this.suit = jcore.util.orDefault(b, CardSuit.Invalid)
        },
        set: function (a, b) {
            this.rank = a;
            this.suit = b
        },
        getSuit: function () {
            return this.suit
        },
        getRank: function () {
            return this.rank
        },
        reset: function () {
            this.set(CardRank.Invalid, CardSuit.Invalid)
        },
        isValid: function () {
            return this.rank >= CardRank.Min && this.rank <= CardRank.Max && this.suit >= CardSuit.Min && this.suit <= CardSuit.Max
        },
        equals: function (a) {
            return !a || !(a instanceof CardModel) ? !1 : this === a ? !0 : this.suit === a.suit && this.rank === a.rank
        },
        cardRankToString: function (a) {
            var b = pokerapp.TranslationId.Invalid;
            switch (this.rank) {
            case CardRank.Two:
                b = a ? pokerapp.TranslationId.CardRank_Twos : pokerapp.TranslationId.CardRank_Two;
                break;
            case CardRank.Three:
                b =
                    a ? pokerapp.TranslationId.CardRank_Threes : pokerapp.TranslationId.CardRank_Three;
                break;
            case CardRank.Four:
                b = a ? pokerapp.TranslationId.CardRank_Fours : pokerapp.TranslationId.CardRank_Four;
                break;
            case CardRank.Five:
                b = a ? pokerapp.TranslationId.CardRank_Fives : pokerapp.TranslationId.CardRank_Five;
                break;
            case CardRank.Six:
                b = a ? pokerapp.TranslationId.CardRank_Sixes : pokerapp.TranslationId.CardRank_Six;
                break;
            case CardRank.Seven:
                b = a ? pokerapp.TranslationId.CardRank_Sevens : pokerapp.TranslationId.CardRank_Seven;
                break;
            case CardRank.Eight:
                b = a ? pokerapp.TranslationId.CardRank_Eights : pokerapp.TranslationId.CardRank_Eight;
                break;
            case CardRank.Nine:
                b = a ? pokerapp.TranslationId.CardRank_Nines : pokerapp.TranslationId.CardRank_Nine;
                break;
            case CardRank.Ten:
                b = a ? pokerapp.TranslationId.CardRank_Tens : pokerapp.TranslationId.CardRank_Ten;
                break;
            case CardRank.Jack:
                b = a ? pokerapp.TranslationId.CardRank_Jacks : pokerapp.TranslationId.CardRank_Jack;
                break;
            case CardRank.Queen:
                b = a ? pokerapp.TranslationId.CardRank_Queens : pokerapp.TranslationId.CardRank_Queen;
                break;
            case CardRank.King:
                b = a ? pokerapp.TranslationId.CardRank_Kings : pokerapp.TranslationId.CardRank_King;
                break;
            case CardRank.Ace:
                b = a ? pokerapp.TranslationId.CardRank_Aces : pokerapp.TranslationId.CardRank_Ace;
                break;
            default:
                b = TranslationId.Invalid
            }
            return pokerapp.Translator.Translate(b)
        }
    });
CardModel.create = function (a, b) {
    return new CardModel(a, b)
};
CardModel.parse = function (a) {
    return new CardModel(CardModel.getRankFromString(a[0]), CardModel.getSuitFromString(a[1]))
};
CardModel.createRandom = function () {
    return CardModel.create(jcore.math.randomInt(CardRank.Min, CardRank.Max), jcore.math.randomInt(CardSuit.Min, CardSuit.Max))
};
CardModel.getSuitString = function (a) {
    switch (a) {
    case CardSuit.Diamond:
        return "D";
    case CardSuit.Heart:
        return "H";
    case CardSuit.Spade:
        return "S";
    case CardSuit.Club:
        return "C";
    default:
        return ""
    }
};
CardModel.getRankString = function (a) {
    switch (a) {
    case CardRank.Two:
        return "2";
    case CardRank.Three:
        return "3";
    case CardRank.Four:
        return "4";
    case CardRank.Five:
        return "5";
    case CardRank.Six:
        return "6";
    case CardRank.Seven:
        return "7";
    case CardRank.Eight:
        return "8";
    case CardRank.Nine:
        return "9";
    case CardRank.Ten:
        return "T";
    case CardRank.Jack:
        return "J";
    case CardRank.Queen:
        return "Q";
    case CardRank.King:
        return "K";
    case CardRank.Ace:
        return "A";
    default:
        return ""
    }
};
CardModel.getSuitFromString = function (a) {
    a = a && a.toUpperCase ? a.toUpperCase() : a;
    switch (a) {
    case "D":
        return CardSuit.Diamond;
    case "H":
        return CardSuit.Heart;
    case "S":
        return CardSuit.Spade;
    case "C":
        return CardSuit.Club;
    default:
        return CardSuit.Invalid
    }
};
CardModel.getRankFromString = function (a) {
    a = a && a.toUpperCase ? a.toUpperCase() : a;
    switch (a) {
    case "2":
        return CardRank.Two;
    case "3":
        return CardRank.Three;
    case "4":
        return CardRank.Four;
    case "5":
        return CardRank.Five;
    case "6":
        return CardRank.Six;
    case "7":
        return CardRank.Seven;
    case "8":
        return CardRank.Eight;
    case "9":
        return CardRank.Nine;
    case "T":
        return CardRank.Ten;
    case "J":
        return CardRank.Jack;
    case "Q":
        return CardRank.Queen;
    case "K":
        return CardRank.King;
    case "A":
        return CardRank.Ace;
    default:
        return CardRank.Invalid
    }
};
pokerapp.PlayerModel = jcore.ObservableModel.extend({
    _tableModel: null,
    _seatModel: null,
    ctor: function (a, b) {
        this._super();
        this._tableModel = b;
        this._seatModel = a;
        this.seatState = pokerapp.SeatState.Unavailable;
        this.playerCity = this.playerName = this.playerId = "";
        this.playerStack = this.playerBet = 0;
        this.playerCards = [];
        this.lastAction = "";
        this.avatarId = this.lastActionAmount = 0;
        this.foldedCards = [];
        this.handStrength = "";
        this.bounty = 0;
        this.allowAddon = this.allowRebuy = this.isWinner = !1
    },
    getDisplayName: function () {
        return this.playerName
    },
    getCards: function () {
        return this.playerCards
    },
    hasCards: function () {
        return null != this.playerCards && 0 < this.playerCards.length
    },
    getFoldedCards: function () {
        return this.foldedCards
    },
    hasFoldedCards: function () {
        return null != this.foldedCards && 0 < this.foldedCards.length
    },
    getChipStack: function () {
        return this.playerStack
    },
    hasChips: function () {
        return 0 < this.playerStack
    },
    getLastAction: function () {
        return this.lastAction
    },
    getCurrentBet: function () {
        return this.playerBet
    },
    getBounty: function () {
        return this.bounty
    },
    isLocalPlayer: function () {
        return null !=
            this._seatModel && this._seatModel.isLocalPlayer()
    },
    isPlayersTurn: function () {
        return null != this._tableModel && null != this._seatModel && this._tableModel.getCurrentTurnPlayer() === this
    },
    checkSeatState: function (a) {
        return this.seatState === a
    },
    resetForNewHand: function () {
        this.lastActionAmount = this.playerBet = 0;
        this.lastAction = "";
        this.playerCards = [];
        this.foldedCards = [];
        this.isWinner = !1
    },
    updateCurrentBet: function (a) {
        this.playerBet = Math.max(0, jcore.util.toDecimal(a, 0))
    },
    updateFromState: function (a) {
        this.seatState = a.getSeatState();
        this.playerId = a.getPlayerId();
        this.playerCity = a.getPlayerCity();
        this.playerName = a.getPlayerName();
        this.playerStack = a.getPlayerStack();
        0 >= this.playerStack && (this.playerStack = 0);
        this.playerBet = a.getPlayerBet();
        0 >= this.playerBet && (this.playerBet = 0);
        this.lastActionAmount = a.getLastActionAmount();
        0 >= this.lastActionAmount && (this.lastActionAmount = 0);
        this.lastAction = a.getLastAction();
        this.playerCards = a.getPlayerCards();
        this.handStrength = a.getHandStrength();
        var b = jcore.util.toString(a.getRebuyAddonState(),
            "");
        this.allowRebuy = -1 < b.indexOf("R");
        this.allowAddon = -1 < b.indexOf("A");
        b = jcore.util.toNumber(a.getAvatarId(), -1);
        "" != this.playerId && 0 >= b ? 0 >= this.avatarId && (this.avatarId = jcore.math.randomInt(1, 20)) : this.avatarId = b;
        this.bounty = a.getBounty()
    }
});
pokerapp.PlayerModel.ObservableProperties = "seatState playerId playerName playerCity playerBet playerStack playerCards lastAction lastActionAmount avatarId allowRebuy allowAddon foldedCards handStrength isWinner bounty".split(" ");
jcore.ObservableModel.defineAllProperties(pokerapp.PlayerModel.prototype, pokerapp.PlayerModel.ObservableProperties);
pokerapp.PlayerInfoModel = jcore.ObservableModel.extend({
    ctor: function (a, b, c) {
        this._super();
        this.name = jcore.util.orDefault(a, "");
        this.chips = jcore.util.orDefault(b, 0);
        this.rank = jcore.util.orDefault(c, 0)
    }
});
pokerapp.PlayerInfoModel.ObservableProperties = ["name", "chips", "rank"];
jcore.ObservableModel.defineAllProperties(pokerapp.PlayerInfoModel.prototype, pokerapp.PlayerInfoModel.ObservableProperties);
pokerapp.PlayerTurnModel = jcore.ObservableModel.extend({
    _tableMode: null,
    _turnPosition: 0,
    _secondsToAct: 0,
    _remainingToAct: 0,
    _extraTimeoutSeconds: 0,
    _availableActions: [],
    _currentBet: 0,
    _callAmount: 0,
    _isMyTurn: !1,
    ctor: function (a) {
        this._super();
        this._tableMode = a;
        this._turnPosition = pokerapp.Constants.INVALID_SEAT_POSITION;
        this.raiseCount = this.raiseIncrementAmount = this.twoThirdsPotBetAmount = this.halfPotBetAmount = this.potBetAmount = this.raiseBetAmount = this.minimumBetAmount = this.maximumBetAmount = this.previousBetAmount =
            this.currentBetAmount = this._remainingToAct = this._secondsToAct = 0
    },
    getSeatPosition: function () {
        return this._turnPosition
    },
    isMyTurn: function () {
        return this._tableMode.hasLocalPlayer() && this._tableMode.getLocalPlayerPosition() === this._turnPosition
    },
    getSecondsToAct: function () {
        return this._secondsToAct
    },
    getRemainingSecondsToAct: function () {
        return this._remainingToAct
    },
    getExtraTimeoutSeconds: function () {
        return this._extraTimeoutSeconds
    },
    updateActionTimer: function (a) {
        this._remainingToAct = Math.max(0, this._remainingToAct -
            a)
    },
    containsAvailableAction: function (a) {
        return _.contains(this._availableActions, a)
    },
    updateFromState: function (a) {
        this._availableActions = [].concat(a.getAvailableActions());
        this._turnPosition = a.getSeatPosition();
        this._secondsToAct = a.getTimeoutSeconds();
        this._extraTimeoutSeconds = a.getExtraTimeoutSeconds();
        this._remainingToAct = this._secondsToAct + jcore.util.orDefault(this._extraTimeoutSeconds, 0);
        this.currentBetAmount = a.getCurrentBetAmount();
        this.previousBetAmount = a.getPreviousBetAmount();
        this.maximumBetAmount =
            a.getMaxBetAmount();
        this.minimumBetAmount = this.raiseBetAmount = a.getRaiseBetAmount();
        this.callBetAmount = this.currentBetAmount;
        this.potBetAmount = a.getPotBetAmount();
        this.halfPotBetAmount = a.getHalfPotBetAmount();
        this.twoThirdsPotBetAmount = a.getTwoThirdsPotBetAmount();
        this.raiseIncrementAmount = a.getRaiseIncrement();
        this.raiseCount = a.getRaiseCount()
    }
});
pokerapp.PlayerTurnModel.ObservableProperties = "currentBetAmount callBetAmount previousBetAmount maximumBetAmount minimumBetAmount raiseBetAmount potBetAmount halfPotBetAmount twoThirdsPotBetAmount raiseIncrementAmount raiseCount".split(" ");
jcore.ObservableModel.defineAllProperties(pokerapp.PlayerTurnModel.prototype, pokerapp.PlayerTurnModel.ObservableProperties);
pokerapp.SeatModel = jcore.ObservableModel.extend({
    _seatPosition: pokerapp.Constants.INVALID_SEAT_POSITION,
    _player: null,
    _tableModel: null,
    ctor: function (a, b) {
        this._super();
        this._seatPosition = a;
        this._tableModel = b;
        this.seatState = pokerapp.SeatState.Unavailable;
        this.isReserved = this.isEmpty = !1
    },
    getTableModel: function () {
        return this._tableModel
    },
    getSeatPosition: function () {
        return this._seatPosition
    },
    setPlayer: function (a) {
        this._player = a
    },
    clearPlayer: function () {
        this._player = null
    },
    getPlayer: function () {
        return this._player
    },
    hasPlayer: function () {
        return null != this._player
    },
    isLocalPlayer: function () {
        return null != this._tableModel && this._tableModel.getLocalPlayerPosition() === this.getSeatPosition()
    },
    updateFromState: function (a) {
        this.seatState = a.getSeatState();
        switch (this.seatState) {
        case pokerapp.SeatState.Reserved:
        case pokerapp.SeatState.SitOut:
        case pokerapp.SeatState.WaitBB:
        case pokerapp.SeatState.ReadyForNextHand:
        case pokerapp.SeatState.Playing:
        case pokerapp.SeatState.Sat:
            this.hasPlayer() || this.setPlayer(new pokerapp.PlayerModel(this,
                this._tableModel));
            this.getPlayer().updateFromState(a);
            break;
        default:
            this.hasPlayer() && this.clearPlayer()
        }
        this.isEmpty = this.seatState === pokerapp.SeatState.Empty;
        this.isReserved = this.seatState === pokerapp.SeatState.Reserved
    }
});
pokerapp.SeatModel.ObservableProperties = ["seatState", "isEmpty", "isReserved"];
jcore.ObservableModel.defineAllProperties(pokerapp.SeatModel.prototype, pokerapp.SeatModel.ObservableProperties);
pokerapp.TableModel = jcore.ObservableModel.extend({
    MAX_SEATS: 10,
    MAX_LAST_HAND_HISTORY: 25,
    _seats: [],
    _dealerPosition: 0,
    _totalPot: 0,
    _communityCards: [],
    _pots: [],
    _currentTurn: null,
    _tableMessages: null,
    _chatMessages: null,
    _gameHeader: null,
    _gameController: null,
    _tableSessionData: null,
    _actionStates: null,
    _preActionStates: null,
    _availablePreActions: null,
    _handIdHistory: null,
    _tableStatistics: null,
    _buyin: null,
    ctor: function (a, b, c) {
        this._super();
        this._gameHeader = a;
        this._gameController = c;
        this._tableSessionData = b;
        this._handIdHistory = [];
        this._dealerPosition = 1;
        this._buyin = new pokerapp.BuyinModel(this);
        this._tableStatistics = new pokerapp.TableStatisticsModel;
        this._tableMessages = new pokerapp.TableMessageCollection;
        this._chatMessages = new jcore.ObservableCollection;
        this._seats = [];
        for (a = 0; a < this.MAX_SEATS; a++) this._seats.push(new pokerapp.SeatModel(a, this));
        this._actionStates = new pokerapp.ActionStateCollection;
        this._preActionStates = new pokerapp.PreActionStateCollection;
        this._availablePreActions = [];
        this.tableId = this.tournamentId = -1;
        this.limitType =
            pokerapp.PokerLimitType.Unknown;
        this.currentStakes = null;
        this.firstHandId = this.currentHandId = this.lastHandId = "";
        this.allowRebuy = this.allowAddon = this.allowBuyChips = !1;
        this.resetForNewHand()
    },
    isTournament: function () {
        return this._gameHeader instanceof pokerapp.TournamentGameHeader
    },
    getGameHeader: function () {
        return this._gameHeader
    },
    getGameController: function () {
        return this._gameController
    },
    getTableStatistics: function () {
        return this._tableStatistics
    },
    createPlayer: function (a) {
        a = this.getSeat(a);
        var b = new pokerapp.PlayerModel(a,
            this);
        a.setPlayer(b);
        return b
    },
    getPlayerAtSeat: function (a) {
        a = this.getSeat(a);
        return null != a ? a.getPlayer() : null
    },
    hasPlayerAtSeat: function (a) {
        return null != this.getPlayerAtSeat(a)
    },
    getSeat: function (a) {
        return 0 > a || a >= this._seats.length ? null : this._seats[a]
    },
    getSeatCount: function () {
        return this._seats.length
    },
    getMaxPlayersCount: function () {
        return this._tableSessionData.getMaxPlayers()
    },
    getCommunityCards: function () {
        return this._communityCards
    },
    hasCommunityCards: function () {
        return 0 < this._communityCards.length
    },
    getDealerPosition: function () {
        return this._dealerPosition
    },
    getCurrentTurn: function () {
        return this._currentTurn
    },
    hasCurrentTurn: function () {
        return jcore.util.isNotNull(this._currentTurn)
    },
    getCurrentTurnPlayer: function () {
        if (null == this._currentTurn) return null;
        var a = this._currentTurn.getSeatPosition();
        return this.getSeat(a).getPlayer()
    },
    getLocalPlayerPosition: function () {
        return this._tableSessionData.getLocalPlayerPosition()
    },
    getLocalPlayer: function () {
        var a = this.getLocalPlayerPosition();
        return 0 > a || a >= this._seats.length ?
            null : this.getSeat(a).getPlayer()
    },
    hasLocalPlayer: function () {
        return null != this.getLocalPlayer()
    },
    getAvailablePreActions: function () {
        if (null == this.getLocalPlayer()) return null;
        var a = this.getLocalPlayer().getCards();
        return null == a || 1 > a.length ? null : [0, 1, 2]
    },
    getTableMessages: function () {
        return this._tableMessages
    },
    clearTableMessage: function (a) {
        this._tableMessages.remove(a)
    },
    getChatMessages: function () {
        return this._chatMessages
    },
    addChatMessage: function (a, b) {
        this._chatMessages.push({
            dealer: !0,
            chatType: a,
            messageParameters: b
        })
    },
    addPlayerChatMessage: function (a, b, c) {
        this._chatMessages.push({
            player: !0,
            chatType: a,
            playerName: b,
            messageText: c
        })
    },
    hasLastHandId: function () {
        return !jcore.util.isNullOrEmpty(this.lastHandId)
    },
    getHandIdHistory: function () {
        return [].concat(this._handIdHistory)
    },
    recordHandId: function (a) {
        jcore.util.isNullOrEmpty(a) || (this._handIdHistory.push(a), this._handIdHistory.length > this.MAX_LAST_HAND_HISTORY && this._handIdHistory.shift(), jcore.util.isNullOrEmpty(this.firstHandId) && (this.firstHandId = a), this.lastHandId =
            a, this.currentHandId = "")
    },
    resetForNewHand: function (a) {
        this._tableSessionData.setHandId(a);
        this.currentHandId = jcore.util.orDefault(a, "");
        this.resetAllTurnState();
        this.waitForRebuy = this.madeActionThisTurn = this.madeActionThisRound = this.wonHand = this.postedSB = this.postedBB = this.postedDB = this.postedAnti = this.isAllIn = this.folded = this.showDown = this.flopped = this.handDealt = this.handStarted = !1;
        this.activePreAction = pokerapp.PokerPlayerPreActions.None;
        this.preActionCallAmount = this.preActionBetAmount = this.lastRaiseAmount =
            this.lastActionAmount = 0;
        this.moveBetsToPot = this.anyPreAction = this.anyBetAction = this.anyAction = !1;
        this._totalPot = 0;
        this._pots = [];
        this._communityCards = [];
        this._currentTurn = null;
        for (a = 0; a < this._seats.length; a++) {
            var b = this._seats[a];
            b.hasPlayer() && b.getPlayer().resetForNewHand()
        }
        this.updateShowDownWinners(null);
        this.clearActionStates();
        this.clearPreActionStates()
    },
    resetAllTurnState: function () {
        this._currentTurn = null;
        this.madeActionThisTurn = !1
    },
    getShowDownWinners: function () {
        return this._showDownWinners
    },
    showDownWinnersContainsSeat: function (a) {
        if (jcore.util.isNull(this._showDownWinners)) return !1;
        for (var b = [].concat(this._showDownWinners.getHiWinners()).concat(this._showDownWinners.getLoWinners()), c = 0; c < b.length; c++)
            if (b[c].getSeatNumber() === a) return !0;
        return !1
    },
    getMainPot: function () {
        return 0 < this._pots.length ? this._pots[0] : null
    },
    getPotAt: function (a) {
        return this._pots.length > a ? this._pots[a] : null
    },
    getTotalPot: function () {
        return this._totalPot
    },
    refreshTotalPot: function () {
        for (var a = 0, b = 0; b < this._pots.length; b++) a +=
            this._pots[b];
        for (b = 0; b < this._seats.length; b++) {
            var c = this._seats[b];
            c.hasPlayer() && (a += c.getPlayer().getCurrentBet())
        }
        this._totalPot = a
    },
    clearPlayerTurn: function () {
        this._currentTurn = null
    },
    hasPlayerTurn: function () {
        return null != this._currentTurn
    },
    getPlayerTurn: function () {
        return this._currentTurn
    },
    getCurrentBet: function () {
        return this.hasPlayerTurn() ? this.getCurrentTurn().currentBetAmount : 0
    },
    getCallAmount: function () {
        return this.hasPlayerTurn() ? this.getCurrentTurn().previousBetAmount - this.getCurrentTurn().currentBetAmount :
            0
    },
    getRaiseBetAmount: function () {
        return this.hasPlayerTurn() ? this.getCurrentTurn().raiseBetAmount : 0
    },
    getPotBetAmount: function () {
        return this.hasPlayerTurn() ? this.getCurrentTurn().potBetAmount : 0
    },
    getHalfPotBetAmount: function () {
        return this.hasPlayerTurn() ? this.getCurrentTurn().halfPotBetAmount : 0
    },
    getTwoThirdsPotBetAmount: function () {
        return this.hasPlayerTurn() ? this.getCurrentTurn().twoThirdsPotBetAmount : 0
    },
    getRaiseIncrementAmount: function () {
        return this.hasPlayerTurn() ? this.getCurrentTurn().raiseIncrementAmount :
            0
    },
    getMinimumBetAmount: function () {
        return this.hasPlayerTurn() ? Math.min(this.getCurrentTurn().maximumBetAmount, this.getCurrentTurn().raiseBetAmount) : 0
    },
    getMaximumBetAmount: function () {
        return this.hasPlayerTurn() ? this.getCurrentTurn().maximumBetAmount : 0
    },
    getBetSliderIncrementAmount: function () {
        if (this.hasPlayerTurn()) {
            var a = this.currentStakes;
            return a && !this.isTournament() ? this.getGameHeader().limitType == pokerapp.PokerLimitType.FixedLimit ? a.getHigh() : a.getLow() : this.getCurrentTurn().raiseIncrementAmount
        }
        return 1
    },
    isMyTurn: function () {
        return this.hasPlayerTurn() && this.getPlayerTurn().isMyTurn()
    },
    isObserving: function () {
        return null == this.getLocalPlayer()
    },
    isSittingOut: function () {
        return null != this.getLocalPlayer() && this.getLocalPlayer().seatState == pokerapp.SeatState.SitOut
    },
    isSeatAssigned: function () {
        return null != this.getLocalPlayer()
    },
    isInHand: function () {
        return this.isSeatAssigned() && (this.getLocalPlayer().seatState == pokerapp.SeatState.Sat || this.getLocalPlayer().seatState == pokerapp.SeatState.Playing)
    },
    isMySeat: function (a) {
        return this.isSeatAssigned() &&
            a == this.getLocalPlayerPosition()
    },
    getCurrency: function () {
        return this.getGameHeader().currency
    },
    getDisplayCurrency: function () {
        return this.isTournament() ? pokerapp.Currency.XXX : this.getCurrency()
    },
    isFractionalBetAllowed: function () {
        return !this.isTournament() && this.getCurrency() !== pokerapp.Currency.XXX
    },
    formatCurrency: function (a) {
        a = jcore.util.toDecimal(a, 0);
        this.isFractionalBetAllowed() || (a = a.toFixed(0));
        return pokerapp.FormatUtil.formatCurrency(this.getDisplayCurrency(), jcore.util.toDecimal(a, 0))
    },
    getActionStates: function () {
        return this._actionStates
    },
    clearActionStates: function () {
        for (var a = 0; a < this._actionStates.getCount(); a++) this._actionStates.getAt(a).reset();
        this.anyBetAction = this.anyAction = !1
    },
    updateActionStates: function (a) {
        for (var b = this.anyAction = !1, c = this.anyBetAction = !1, d = 0; d < this._actionStates.getCount(); d++)
            if (a && a.getCount() > d) {
                this._actionStates.getAt(d).action = a.getAt(d).action;
                this._actionStates.getAt(d).amount = a.getAt(d).amount;
                var f = a.getAt(d).action;
                f != pokerapp.PokerPlayerActions.None && (b = !0);
                if (f == pokerapp.PokerPlayerActions.Bet ||
                    f == pokerapp.PokerPlayerActions.Raise || f == pokerapp.PokerPlayerActions.Client_BetOrRaiseAllIn) c = !0
            } else this._actionStates.getAt(d).reset();
        this.anyAction = b;
        this.anyBetAction = c
    },
    getAvailablePreActions: function () {
        return this._availablePreActions
    },
    containsAvailablePreAction: function (a) {
        return _.contains(this._availablePreActions, a)
    },
    clearAvailablePreActions: function () {
        this._availablePreActions = []
    },
    updateAvailablePreActions: function (a) {
        this._availablePreActions = [].concat(a)
    },
    getPreActionStates: function () {
        return this._preActionStates
    },
    clearPreActionStates: function () {
        for (var a = 0; a < this._preActionStates.getCount(); a++) this._preActionStates.getAt(a).reset();
        this.anyPreAction = !1
    },
    updatePreActionStates: function (a) {
        for (var b = this.anyPreAction = !1, c = 0; c < this._preActionStates.getCount(); c++)
            if (a && a.getCount() > c) {
                var d = a.getAt(c).action;
                d != pokerapp.PokerPlayerPreActions.None && (b = !0);
                this._preActionStates.getAt(c).action = d;
                this._preActionStates.getAt(c).amount = a.getAt(c).amount;
                this._preActionStates.getAt(c).active = d === this.activePreAction
            } else this._preActionStates.getAt(c).reset();
        this.anyPreAction = b
    },
    updateFromState: function (a, b) {
        jcore.util.isNotNull(a) && (this._dealerPosition = a.getDealerButtonPosition(), this._communityCards = a.getCommunityCards(), jcore.util.isNull(this._communityCards) && (this._communityCards = []), this._pots = a.getPots(), jcore.util.isNull(this._pots) && (this._pots = []));
        jcore.util.isNotNull(b) ? (this.tableId = jcore.util.orDefault(b.getTableId(), -1), this.limitType = b.getLimitType(), this.currentStakes = b.getStakes()) : (this.tableId = jcore.util.orDefault(this.getGameHeader().tableId,
            -1), this.limitType = this.getGameHeader().limitType, jcore.util.isNotNull(this.getGameHeader().stakes) && (this.currentStakes = this.getGameHeader().stakes));
        this.isTournament() && (this.tournamentId = this.getGameHeader().tournamentId);
        this.allowBuyChips = !this.isTournament() && this.isSeatAssigned();
        this.hasLocalPlayer() ? (this.allowAddon = this.isTournament() && this.getLocalPlayer().allowAddon, this.allowRebuy = this.isTournament() && this.getLocalPlayer().allowRebuy) : this.allowRebuy = this.allowAddon = !1;
        this.refreshTotalPot()
    },
    updatePlayerTurn: function (a) {
        jcore.util.isNull(this._currentTurn) && (this._currentTurn = new pokerapp.PlayerTurnModel(this));
        this._currentTurn.updateFromState(a);
        this.isMyTurn() && (this.madeActionThisTurn = !1)
    },
    updateShowDownWinners: function (a) {
        this._showDownWinners = a;
        for (a = 0; a < this._seats.length; a++) {
            var b = this._seats[a];
            b.hasPlayer() && (b.getPlayer().isWinner = this.showDownWinnersContainsSeat(b.getSeatPosition()))
        }
    },
    getCurrentBuyin: function () {
        return this._buyin
    },
    updateBuyinState: function (a, b) {
        this._buyin.setBuyinState(a)
    },
    update: function (a) {
        this._tableMessages.update(a);
        if (this.hasPlayerTurn()) {
            var b = this.getPlayerTurn(),
                c = b.getRemainingSecondsToAct();
            b.updateActionTimer(a);
            a = this.getCurrentTurnPlayer();
            var d = this.getGameHeader().isTurbo || !this.handDealt ? 5 : 10;
            c - b.getExtraTimeoutSeconds() > d && b.getRemainingSecondsToAct() - b.getExtraTimeoutSeconds() <= d && (b.getRemainingSecondsToAct() > b.getExtraTimeoutSeconds() && 0 < b.getExtraTimeoutSeconds() ? (a.isLocalPlayer() && this._gameController.playSound(pokerapp.SoundId.TIME_WARNING),
                b = String.format(pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_SecondsLeftToActBeforeExtraTime, a.playerName, Math.floor(b.getRemainingSecondsToAct())))) : (a.isLocalPlayer() && this._gameController.playSound(pokerapp.SoundId.TIME_WARNING), b = String.format(pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_SecondsLeftToAct, a.playerName, Math.floor(b.getRemainingSecondsToAct())))), this.addChatMessage(pokerapp.DealerChatType.ClientGenerated, [b]))
        }
    }
});
pokerapp.TableModel.ObservableProperties = "tableId limitType currentStakes tournamentId lastHandId currentHandId firstHandId handStarted handDealt flopped showDown folded isAllIn postedAnti postedDB postedBB postedSB wonHand waitingBB waitForRebuy madeActionThisRound madeActionThisTurn lastActionAmount lastRaiseAmount anyAction anyBetAction anyPreAction activePreAction preActionBetAmount preActionCallAmount allowBuyChips allowAddon allowRebuy moveBetsToPot".split(" ");
jcore.ObservableModel.defineAllProperties(pokerapp.TableModel.prototype, pokerapp.TableModel.ObservableProperties);
pokerapp.TableStatisticsModel = jcore.ObservableModel.extend({
    ctor: function () {
        this._super();
        this.observerCount = this.viewFlopPercentage = this.averagePot = this.handsPerHour = 0;
        this.activePlayers = this.currentLevel = this.currentRank = "-"
    },
    updateTableStatistics: function (a, b, c, d) {
        this.handsPerHour = Math.ceil(jcore.util.orDefault(a, 0));
        this.averagePot = b;
        this.viewFlopPercentage = c;
        this.observerCount = d
    },
    updateTournamentStatistics: function (a, b, c) {},
    updateTournamentInfo: function (a, b, c) {
        this.currentRank = a;
        this.currentLevel =
            b;
        this.activePlayers = c
    }
});
pokerapp.TableStatisticsModel.ObservableProperties = "handsPerHour averagePot viewFlopPercentage observerCount currentRank currentLevel activePlayers".split(" ");
jcore.ObservableModel.defineAllProperties(pokerapp.TableStatisticsModel.prototype, pokerapp.TableStatisticsModel.ObservableProperties);
pokerapp.TableSessionData = cc.Class.extend({
    _tableId: null,
    _tournamentId: null,
    _tableName: null,
    _minBuyin: null,
    _maxBuyin: null,
    _loStake: null,
    _hiStake: null,
    _limitType: null,
    _gameType: null,
    _maxPlayers: null,
    _currency: null,
    _handId: null,
    _smallBlind: null,
    _ante: null,
    _autoRebuy: null,
    _topupThreshold: null,
    _playerSeatPosition: -1,
    _currentStakes: null,
    ctor: function (a, b) {
        this.setTableId(a);
        this.setTournamentId(b);
        this.reset()
    },
    getTableId: function () {
        return this._tableId
    },
    getTournamentId: function () {
        return this._tournamentId
    },
    reset: function () {
        this._tableName = "";
        this._currency = this._maxPlayers = this._gameType = this._limitType = this._hiStake = this._loStake = this._maxBuyin = this._minBuyin = 0;
        this._handId = "";
        this._ante = this._smallBlind = 0;
        this._autoRebuy = !1;
        this._topupThreshold = 0;
        this._currentStakes = null;
        this._playerSeatPosition = pokerapp.Constants.INVALID_SEAT_POSITION
    },
    getTableName: function () {
        return this._tableName
    },
    getMaxPlayers: function () {
        return this._maxPlayers
    },
    getCurrency: function () {
        return this._currency
    },
    getLimitType: function () {
        return this._limitType
    },
    getGameType: function () {
        return this._gameType
    },
    getHandId: function () {
        return this._handId
    },
    setHandId: function (a) {
        this._handId = jcore.util.orDefault(a, "")
    },
    getLocalPlayerPosition: function () {
        return this._playerSeatPosition
    },
    setLocalPlayerPosition: function (a) {
        this._playerSeatPosition = pokerapp.ConvertUtil.toInt(a, pokerapp.Constants.INVALID_SEAT_POSITION)
    },
    clearLocalPlayerPosition: function () {
        this._playerSeatPosition = pokerapp.Constants.INVALID_SEAT_POSITION
    },
    getStakes: function () {
        return this._currentStakes
    },
    setStakes: function (a, b, c, d) {
        this._smallBlind = a;
        this._loStake = b;
        this._hiStake = c;
        this._ante = d;
        this._currentStakes = new pokerapp.Stake(this._loStake, this._hiStake, this._ante, this._smallBlind, this._currency)
    },
    setTableId: function (a) {
        this._tableId = pokerapp.ConvertUtil.toInt(a, pokerapp.Constants.INVALID_TABLE_ID)
    },
    setTournamentId: function (a) {
        this._tournamentId = pokerapp.ConvertUtil.toInt(a, pokerapp.Constants.INVALID_TOURNAMENT_ID)
    },
    updateFromValues: function (a) {
        this._tableName = pokerapp.ConvertUtil.toString(jcore.util.safeIndex(a,
            0), "");
        this._minBuyin = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 1), 0);
        this._maxBuyin = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 2), 0);
        this._loStake = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 3), 0);
        this._hiStake = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 4), 0);
        this._limitType = pokerapp.ConvertUtil.toLimitType(jcore.util.safeIndex(a, 5), pokerapp.PokerLimitType.Unknown);
        this._maxPlayers = pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(a, 6), 0);
        this._gameType =
            pokerapp.ConvertUtil.toGameType(jcore.util.safeIndex(a, 7), pokerapp.PokerGameType.Unknown);
        this._currency = pokerapp.ConvertUtil.toCurrency(jcore.util.safeIndex(a, 8), pokerapp.Currency.Unknown);
        this._handId = pokerapp.ConvertUtil.toString(jcore.util.safeIndex(a, 9), "");
        this._smallBlind = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 10), 0);
        this._ante = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 11), 0);
        this._autoRebuy = pokerapp.ConvertUtil.toBoolean(jcore.util.safeIndex(a, 12), !1);
        this._topupThreshold =
            pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(a, 13), 0);
        this.setStakes(this._smallBlind, this._loStake, this._hiStake, this._ante)
    }
});
pokerapp.TableStateData = cc.Class.extend({
    _communityCards: null,
    _dealerButtonPosition: null,
    _tablePots: null,
    _rakeAmount: null,
    _dealerAction: null,
    _tournamentState: null,
    _seconds: null,
    _currentTurnPosition: null,
    _extraTimeSeconds: null,
    _detSeconds: null,
    _waitListSize: null,
    ctor: function () {
        this.reset()
    },
    reset: function () {
        this._communityCards = [];
        this._dealerButtonPosition = 0;
        this._tablePots = [];
        this._rakeAmount = 0;
        this._tournamentState = this._dealerAction = "";
        this._waitListSize = this._detSeconds = this._extraTimeSeconds =
            this._currentTurnPosition = this._seconds = 0
    },
    getPots: function () {
        return this._tablePots
    },
    getCommunityCards: function () {
        return this._communityCards
    },
    getDealerButtonPosition: function () {
        return this._dealerButtonPosition
    },
    updateFromValues: function (a) {
        this._communityCards = pokerapp.ConvertUtil.toCards(jcore.util.safeIndex(a, 0), []);
        this._dealerButtonPosition = pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(a, 1), 0);
        this._tablePots = pokerapp.ConvertUtil.toPots(jcore.util.safeIndex(a, 2), []);
        this._rakeAmount = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a,
            3), 0);
        this._dealerAction = pokerapp.ConvertUtil.toString(jcore.util.safeIndex(a, 4), 0);
        this._tournamentState = pokerapp.ConvertUtil.toString(jcore.util.safeIndex(a, 5), 0);
        this._seconds = pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(a, 6), 0);
        this._currentTurnPosition = pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(a, 7), -1);
        this._extraTimeSeconds = pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(a, 8), -1);
        this._detSeconds = pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(a, 9), -1);
        this._waitListSize = pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(a,
            10), -1)
    }
});
pokerapp.TableSeatStateData = cc.Class.extend({
    _seatPosition: null,
    _seatState: null,
    _playerName: null,
    _playerStack: null,
    _playerBet: null,
    _lastAction: null,
    _lastActionAmount: null,
    _playerCards: null,
    _playerId: null,
    _playerCity: null,
    _avatarId: null,
    _rebuyAddonState: null,
    _handStrength: "",
    _bounty: null,
    ctor: function () {
        this._seatPosition = -1;
        this._seatState = pokerapp.SeatState.Empty;
        this._playerName = "";
        this._playerBet = this._playerStack = 0;
        this._lastAction = "";
        this._lastActionAmount = 0;
        this._playerCards = [];
        this._handStrength =
            this._rebuyAddonState = this._avatarId = this._playerCity = this._playerId = "";
        this._bounty = 0
    },
    getSeatPosition: function () {
        return this._seatPosition
    },
    getSeatState: function () {
        return this._seatState
    },
    getPlayerName: function () {
        return this._playerName
    },
    getPlayerStack: function () {
        return this._playerStack
    },
    getPlayerBet: function () {
        return this._playerBet
    },
    getLastAction: function () {
        return this._lastAction
    },
    getLastActionAmount: function () {
        return this._lastActionAmount
    },
    getPlayerCards: function () {
        return this._playerCards
    },
    getPlayerId: function () {
        return this._playerId
    },
    getPlayerCity: function () {
        return this._playerCity
    },
    getAvatarId: function () {
        return this._avatarId
    },
    getRebuyAddonState: function () {
        return this._rebuyAddonState
    },
    getHandStrength: function () {
        return this._handStrength
    },
    getBounty: function () {
        return this._bounty
    },
    updateFromValues: function (a) {
        this._seatPosition = pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(a, 0), -1);
        this._seatState = pokerapp.ConvertUtil.toSeatState(jcore.util.safeIndex(a, 1), pokerapp.SeatState.Empty);
        this._playerName = pokerapp.ConvertUtil.toString(jcore.util.safeIndex(a, 2), "");
        this._playerStack = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 3), 0);
        this._playerBet = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 4), 0);
        this._lastAction = pokerapp.ConvertUtil.toString(jcore.util.safeIndex(a, 5), "");
        this._lastActionAmount = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 6), 0);
        this._playerCards = pokerapp.ConvertUtil.toCards(jcore.util.safeIndex(a, 7), []);
        this._playerId = pokerapp.ConvertUtil.toString(jcore.util.safeIndex(a,
            8), "");
        this._playerCity = pokerapp.ConvertUtil.toString(jcore.util.safeIndex(a, 9), "");
        var b = pokerapp.ConvertUtil.toString(jcore.util.safeIndex(a, 10), ""); - 1 < b.indexOf(":") ? this._avatarId = b.substring(b.indexOf(":") + 1) : this._avatarId = pokerapp.ConvertUtil.toInt(b, -1);
        this._rebuyAddonState = pokerapp.ConvertUtil.toString(jcore.util.safeIndex(a, 11), "");
        this._handStrength = pokerapp.ConvertUtil.toString(jcore.util.safeIndex(a, 14), "");
        this._bounty = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 15), 0)
    }
});
pokerapp.TablePlayerTurnData = cc.Class.extend({
    _seatPosition: null,
    _availableActions: null,
    _previousBetAmount: null,
    _currentBetAmount: null,
    _raiseBetAmount: null,
    _potBetAmount: null,
    _maxBetAmount: null,
    _raiseIncrement: null,
    _raiseCount: null,
    _timeoutSeconds: null,
    _extraTimeoutSeconds: null,
    _halfPotBetAmount: null,
    _twoThirdsPotBetAmount: null,
    ctor: function () {
        this._seatPosition = -1;
        this._availableActions = [];
        this._twoThirdsPotBetAmount = this._halfPotBetAmount = this._extraTimeoutSeconds = this._timeoutSeconds = this._raiseCount =
            this._raiseIncrement = this._maxBetAmount = this._potBetAmount = this._raiseBetAmount = this._currentBetAmount = this._previousBetAmount = 0
    },
    getSeatPosition: function () {
        return this._seatPosition
    },
    getAvailableActions: function () {
        return this._availableActions
    },
    getPreviousBetAmount: function () {
        return this._previousBetAmount
    },
    getCurrentBetAmount: function () {
        return this._currentBetAmount
    },
    getRaiseBetAmount: function () {
        return this._raiseBetAmount
    },
    getPotBetAmount: function () {
        return this._potBetAmount
    },
    getMaxBetAmount: function () {
        return this._maxBetAmount
    },
    getRaiseIncrement: function () {
        return this._raiseIncrement
    },
    getRaiseCount: function () {
        return this._raiseCount
    },
    getTimeoutSeconds: function () {
        return this._timeoutSeconds
    },
    getExtraTimeoutSeconds: function () {
        return this._extraTimeoutSeconds
    },
    getHalfPotBetAmount: function () {
        return this._halfPotBetAmount
    },
    getTwoThirdsPotBetAmount: function () {
        return this._twoThirdsPotBetAmount
    },
    updateFromValues: function (a) {
        this._seatPosition = pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(a, 0), -1);
        this._availableActions = pokerapp.ConvertUtil.toPlayerActions(jcore.util.safeIndex(a,
            1), []);
        this._previousBetAmount = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 2), 0);
        this._currentBetAmount = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 3), 0);
        this._raiseBetAmount = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 4), 0);
        this._potBetAmount = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 5), 0);
        this._maxBetAmount = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 6), 0);
        this._raiseIncrement = pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(a, 7), 0);
        this._raiseCount =
            pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(a, 8), 0);
        this._timeoutSeconds = pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(a, 9), 0);
        this._extraTimeoutSeconds = pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(a, 10), 0);
        this._halfPotBetAmount = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 11), 0);
        this._twoThirdsPotBetAmount = pokerapp.ConvertUtil.toDecimal(jcore.util.safeIndex(a, 12), 0)
    }
});
pokerapp.PotWinnersModel = cc.Class.extend({
    _potNumber: -1,
    _potAmount: 0,
    _hiWinners: [],
    _loWinners: [],
    _handStrength: "",
    ctor: function (a, b, c, d, f) {
        this._potNumber = jcore.util.orDefault(a, -1);
        this._potAmount = jcore.util.orDefault(b, 0);
        this._hiWinners = jcore.util.orDefault(c, []);
        this._loWinners = jcore.util.orDefault(d, []);
        this._handStrength = jcore.util.orDefault(f, "")
    },
    getPotNumber: function () {
        return this._potNumber
    },
    getAmount: function () {
        return this._potAmount
    },
    getHiWinners: function () {
        return this._hiWinners
    },
    getLoWinners: function () {
        return this._loWinners
    },
    getHandStrength: function () {
        return this._handStrength
    }
});
pokerapp.PotWin = cc.Class.extend({
    _seatNumber: -1,
    _amount: 0,
    _cards: [],
    ctor: function (a, b, c) {
        this._seatNumber = jcore.util.orDefault(a, -1);
        this._amount = jcore.util.orDefault(b, 0);
        this._cards = jcore.util.orDefault(c, [])
    },
    getSeatNumber: function () {
        return this._seatNumber
    },
    getAmount: function () {
        return this._amount
    },
    getCards: function () {
        return this._cards
    }
});
pokerapp.PotWin.parse = function (a) {
    a = a.split(",");
    return new pokerapp.PotWin(pokerapp.ConvertUtil.toInt(a[0], -1), pokerapp.ConvertUtil.toDecimal(a[1], 0), pokerapp.ConvertUtil.toCards(a[2], []))
};
pokerapp.ActionStateIndex = jcore.Enum.create({
    One: 2,
    Two: 1,
    Three: 0,
    MAX: 3
});
pokerapp.PreActionStateIndex = jcore.Enum.create({
    One: 2,
    Two: 1,
    Three: 0,
    Four: 3,
    Five: 4,
    Six: 5,
    MAX: 6
});
pokerapp.ActionStateItem = jcore.ObservableModel.extend({
    ctor: function () {
        this._super();
        this.reset()
    },
    reset: function () {
        this.active = !1;
        this.amount = null;
        this.action = pokerapp.PokerPlayerActions.None
    }
});
pokerapp.ActionStateItem.ObservableProperties = ["action", "amount", "active"];
jcore.ObservableModel.defineAllProperties(pokerapp.ActionStateItem.prototype, pokerapp.ActionStateItem.ObservableProperties);
pokerapp.ActionStateCollection = jcore.ObservableModel.extend({
    _validatorFunc: null,
    _lst: null,
    ctor: function (a) {
        this._super();
        this._lst = [];
        this._validatorFunc = a;
        this._init()
    },
    _init: function () {
        for (var a = 0; a < pokerapp.ActionStateIndex.MAX; a++) this._lst.push(new pokerapp.ActionStateItem)
    },
    getCount: function () {
        return this._lst.length
    },
    getAt: function (a) {
        return this._lst[a]
    },
    enableAndValidate: function (a, b, c) {
        return this.enable(a, b, c, !0)
    },
    enable: function (a, b, c, d) {
        if (d = !d || jcore.util.isNull(this._validatorFunc) ||
            this._validatorFunc(b)) this._lst[a].action = b, this._lst[a].amount = c;
        return d
    },
    clearAction: function (a) {
        this._lst[a].action = pokerapp.PokerPlayerActions.None
    }
});
pokerapp.PreActionStateItem = pokerapp.ActionStateItem.extend({
    ctor: function () {
        this._super()
    }
});
pokerapp.PreActionStateCollection = pokerapp.ActionStateCollection.extend({
    ctor: function () {
        this._super()
    },
    _init: function () {
        for (var a = 0; a < pokerapp.PreActionStateIndex.MAX; a++) this._lst.push(new pokerapp.PreActionStateItem)
    },
    clearAction: function (a) {
        this._lst[a].action = pokerapp.PokerPlayerPreActions.None
    }
});
pokerapp.TableMessage = jcore.ObservableModel.extend({
    _expireTimeStamp: null,
    ctor: function (a, b, c, d) {
        this._super();
        this.identifier = a;
        this.text = b;
        this.textTimeout = "";
        this.setTimeout(c, d)
    },
    setTimeout: function (a, b) {
        this.timeoutSeconds = a;
        this.displayTimeout = b;
        this.expired = !1;
        this.textTimeout = "";
        this._expireTimeStamp = null;
        jcore.util.isNotNull(a) && 0 < a ? this._expireTimeStamp = moment().add(a, "seconds") : this.displayTimeout = !1
    },
    updateTimeout: function () {
        jcore.util.isNotNull(this._expireTimeStamp) && (this.timeoutSeconds =
            Math.max(0, this._expireTimeStamp.diff(moment(), "seconds")), this.displayTimeout && (this.textTimeout = pokerapp.FormatUtil.formatTimeSpanSeconds(Math.floor(this.timeoutSeconds))), this.expired = 0 >= this.timeoutSeconds)
    }
});
pokerapp.TableMessage.ObservableProperties = "identifier text textTimeout timeoutSeconds displayTimeout expired".split(" ");
jcore.ObservableModel.defineAllProperties(pokerapp.TableMessage.prototype, pokerapp.TableMessage.ObservableProperties);
pokerapp.TableMessageId = jcore.Enum.create({
    GameStatus: 1,
    TournamentElimination: 2,
    RebuyStatus: 3,
    MoveTableStatus: 4
});
pokerapp.TableMessageCollection = jcore.ObservableModel.extend({
    _messageList: null,
    ctor: function () {
        this._super();
        this._messageList = new jcore.ObservableCollection
    },
    getCount: function () {
        return this._messageList.getLength()
    },
    getMessagesObservableCollection: function () {
        return this._messageList
    },
    clear: function () {
        this._messageList.removeAll()
    },
    add: function (a, b, c, d) {
        b = jcore.util.orDefault(b, "");
        c = pokerapp.ConvertUtil.toDecimal(c, -1);
        d = jcore.util.orDefault(d, !0);
        var f = this.find(a);
        jcore.util.isNull(f) && (f = new pokerapp.TableMessage(a,
            b, c, d), this._messageList.push(f));
        f.text = b;
        f.setTimeout(c, d);
        return f
    },
    appendOrAdd: function (a, b, c) {
        var d = this.find(a);
        if (jcore.util.isNull(d)) return this.add(a, b, c);
        if (jcore.util.isDefined(d.getText)) return this.add(a, d.getText() + "\n" + b, c)
    },
    remove: function (a) {
        this._messageList.remove(function (b) {
            return b.identifier === a
        })
    },
    find: function (a) {
        return this._messageList.find(function (b) {
            return b.identifier === a
        })
    },
    update: function (a) {
        if (!(1 > this._messageList.getLength())) {
            var b = this;
            a = this._messageList.getArray().slice();
            _.each(a, function (a) {
                a.updateTimeout();
                a.expired && b._messageList.remove(a)
            })
        }
    }
});
pokerapp.BuyinState = jcore.Enum.create({
    none: 0,
    error: 2,
    cancelled: 3,
    waitForUser: 4,
    waitForUserActive: 5
});
pokerapp.BuyinMode = jcore.Enum.create({
    none: 0,
    buyin: 2,
    rebuy: 3,
    addon: 4
});
pokerapp.BuyinModel = jcore.ObservableModel.extend({
    _tableModel: null,
    _state: null,
    _mode: 0,
    ctor: function (a) {
        this._super();
        this._state = pokerapp.BuyinState.none;
        this._tableModel = a;
        this._mode = pokerapp.BuyinMode.buyin;
        this.ratHole = this.maxBuyin = this.minBuyin = this.inPlay = 0
    },
    setBuyinDetails: function (a, b, c, d, f, g) {
        this.timeout = jcore.util.orDefault(g, 30);
        this.inPlay = jcore.util.orDefault(a, 0);
        this.minBuyin = jcore.util.orDefault(b, this.minBuyin);
        this.maxBuyin = jcore.util.orDefault(c, this.maxBuyin);
        this.ratHole = jcore.util.orDefault(d,
            this.ratHole);
        this.currency = jcore.util.orDefault(f, this.currency)
    },
    setBuyinMode: function (a) {
        this._mode = a
    },
    getBuyinMode: function () {
        return this._mode
    },
    getBuyinState: function () {
        return this._state
    },
    setBuyinState: function (a) {
        this._state = a
    },
    isActive: function () {
        return this._state === pokerapp.BuyinState.waitForUser || this._state === pokerapp.BuyinState.waitForUserActive
    }
});
pokerapp.BuyinModel.ObservableProperties = "timeout inPlay minBuyin maxBuyin ratHole currency".split(" ");
jcore.ObservableModel.defineAllProperties(pokerapp.BuyinModel.prototype, pokerapp.BuyinModel.ObservableProperties);
pokerapp.BuyInDetails = jcore.ObservableModel.extend({
    ctor: function () {
        this._super();
        this.allowBuyIn = !1;
        this.buyInType = this.buyInAmount = 0;
        this.errorExceedsMaximumChips = this.errorInsufficentFunds = !1;
        this.minimumBuyInAmount = this.maximumBuyInAmount = 0;
        this.buyInIncrement = 1
    }
});
pokerapp.BuyInDetails.ObservableProperties = "allowBuyIn buyInAmount buyInType maximumBuyInAmount minimumBuyInAmount buyInIncrement errorInsufficentFunds errorExceedsMaximumChips".split(" ");
jcore.ObservableModel.defineAllProperties(pokerapp.BuyInDetails.prototype, pokerapp.BuyInDetails.ObservableProperties);
pokerapp.BuyinHelper = cc.Class.extend({
    calculateBuyinDetails: function (a, b, c, d, f, g) {
        var h = new pokerapp.BuyInDetails;
        h.maximumBuyInAmount = g - c;
        h.minimumBuyInAmount = f;
        var m;
        if (c >= g || 0.05 > g - c) return 0 >= h.maximumBuyInAmount && (h.maximumBuyInAmount = g), h.errorExceedsMaximumChips = !0, h;
        Math.min(0, b);
        switch (a.currency) {
        case pokerapp.Currency.XXX:
        case pokerapp.Currency.Unknown:
            m = 1;
            break;
        default:
            m = 0.05
        }
        0 == c && (d ? h.BuyInAmount = f : h.buyInAmount = a.limitType == pokerapp.PokerLimitType.FixedLimit ? 4 * f : 1.5 * f, h.buyInAmount =
            Math.max(h.buyInAmount, f), h.buyInAmount = Math.min(h.buyInAmount, h.maximumBuyInAmount), h.buyInAmount = Math.min(h.buyInAmount, b));
        if (0 < c && c <= f || c > f && c <= g - m) h.buyInAmount = a.limitType == pokerapp.PokerLimitType.FixedLimit ? 3 * f : 2 * f, 0 < c && c <= f ? (h.minimumBuyInAmount = f - c, h.minimumBuyInAmount < m && (h.minimumBuyInAmount = m), h.buyInAmount = Math.max(h.buyInAmount, h.minimumBuyInAmount)) : h.minimumBuyInAmount = m, h.buyInAmount = Math.min(h.buyInAmount, h.maximumBuyInAmount), h.buyInAmount = Math.min(h.buyInAmount, b);
        h.errorInsufficentFunds =
            h.minimumBuyInAmount > b;
        h.errorInsufficentFunds || (h.maximumBuyInAmount = Math.min(h.maximumBuyInAmount, b));
        h.buyInIncrement = m;
        h.allowBuyIn = !h.errorInsufficentFunds && !h.errorExceedsMaximumChips;
        return h
    }
});
pokerapp.ILobbyController = cc.Class.extend({
    ctor: function () {},
    getUser: function () {
        jcore.log.debug("OVERRIDE REQUIRED!");
        return null
    },
    getSessionId: function () {
        jcore.log.debug("OVERRIDE REQUIRED!");
        return null
    },
    isConnected: function () {
        jcore.log.debug("OVERRIDE REQUIRED!");
        return !1
    },
    connect: function () {
        jcore.log.debug("OVERRIDE REQUIRED!");
        return !1
    },
    loginUser: function (a, b) {
        jcore.log.debug("OVERRIDE REQUIRED!");
        return null
    },
    joinGame: function (a) {
        jcore.log.debug("OVERRIDE REQUIRED!");
        return null
    },
    refreshUserBalance: function (a) {
        jcore.log.debug("OVERRIDE REQUIRED!");
        return null
    },
    refreshConnectedGames: function () {
        jcore.log.debug("OVERRIDE REQUIRED!");
        return null
    },
    registerTournament: function (a) {
        jcore.log.debug("OVERRIDE REQUIRED!");
        return null
    },
    unRegisterTournament: function (a) {
        jcore.log.debug("OVERRIDE REQUIRED!");
        return null
    },
    isRegisteredForTournament: function (a) {
        jcore.log.debug("OVERRIDE REQUIRED!");
        return !1
    }
});
pokerapp.LobbyRequestType = jcore.Enum.create({
    Unknown: 0,
    SetSiteSkinID: 1,
    GetServerTime: 6,
    GetLobbyStats: 7,
    LoginUser: 8,
    CreateBasicUser: 9,
    ForgotPassword: 10,
    QueryEmailExists: 11,
    QuerySignupCodeExists: 12,
    IsNickNameUnique: 13,
    TopUpUserPlayMoney: 14,
    GetConnectedTables: 15,
    GetUserBalance: 16,
    GetUserTickets: 17,
    GetUserCakePoints: 18,
    GetUserGCCollection: 19,
    GetUserCakeSlices: 20,
    GetUserGoldStackLevel: 21,
    GetUserBankrollProtectionStatus: 22,
    GetUserShareGoldStackStatus: 23,
    SetUserShareGoldStackStatus: 24,
    UpdateAvatarID: 25,
    GetAvatarID: 26,
    RegisterTournamentUser: 27,
    RegisterTournamentUserAsync: 28,
    CancelTournamentRegistration: 29,
    UnregisterTournamentUser: 30,
    JoinRingTable: 31,
    JoinTournamentTable: 32,
    GetTournamentTokens: 33,
    GetIPLocationCountry: 34,
    GetExternalUserSessionID: 35,
    GetSupportedCurrencies: 36,
    IsFeatureSupportedForSite: 37,
    GetSupportedFeaturesForSite: 38,
    GetGXProposition: 39,
    PostGXBuyProposition: 40,
    GenerateUserSecurityToken: 41,
    GetCakePointRatesInfo: 42,
    Query: 999
});
pokerapp.LobbyRequest = pokerapp.NetRequestHandle.extend({
    _reqId: null,
    _lobbyRequestType: null,
    _aliasArray: null,
    _responseArray: null,
    _userContext: null,
    ctor: function (a, b) {
        this._super();
        var c = pokerapp.LobbyRequest.nextRequestId();
        this._reqId = null != a && "" != a ? "#[" + a + "]_" + c : "#" + c;
        this._lobbyRequestType = b;
        this._aliasArray = [];
        this._responseArray = []
    },
    getRequestId: function () {
        return this._reqId
    },
    getLobbyRequestType: function () {
        return this._lobbyRequestType
    },
    addAlias: function (a) {
        this._aliasArray.push(a)
    },
    getAliasList: function () {
        return this._aliasArray
    },
    addResponse: function (a) {
        this._responseArray.push(a)
    },
    getResponse: function () {
        return this._responseArray
    },
    hasResponse: function () {
        return null != this._responseArray && 0 < this._responseArray.length
    },
    getUserContext: function () {
        return this._userContext
    },
    setUserContext: function (a) {
        this._userContext = a
    }
});
pokerapp.LobbyRequest.nextRequestId = function () {
    null == this._static_counter && (this._static_counter = 1);
    return this._static_counter++
};
pokerapp.LobbyQuery = pokerapp.LobbyRequest.extend({
    _queryPath: null,
    ctor: function (a) {
        this._super("Q", pokerapp.LobbyRequestType.Query);
        this._queryPath = a
    },
    getQueryPath: function () {
        return this._queryPath
    }
});
pokerapp.RegistrationRecord = cc.Class.extend({
    _tournamentHeader: null,
    _pendingRequest: null,
    _tableSessionId: null,
    ctor: function (a) {
        this._tournamentHeader = a
    },
    getTournamentHeader: function () {
        return this._tournamentHeader
    },
    getPendingRequest: function () {
        return this._pendingRequest
    },
    setPendingRequest: function (a) {
        this._pendingRequest = a
    },
    setTableSessionId: function (a) {
        this._tableSessionId = a
    },
    getTableSessionId: function () {
        return this._tableSessionId
    }
});
pokerapp.ConnectedGameRecord = pokerapp.DataObject.extend({
    ctor: function () {
        this._super();
        host = tableSessionId = "";
        seatNumber = tableId = tournamentId = port = -1
    },
    hasValidSessionId: function () {
        return !(new pokerapp.NetSessionId(this.tableSessionId)).isAnonymous()
    },
    updateDataValues: function (a) {
        this._super(a);
        this._processUpdatedValues(a, pokerapp.ConnectedGameRecord.UpdatePropertiesMap)
    }
});
pokerapp.ConnectedGameRecord.ObservableProperties = "tableSessionId host port tournamentId tableId seatNumber".split(" ");
pokerapp.ConnectedGameRecord.UpdatePropertiesMap = [{
    toName: "tableSessionId",
    fromName: "TableSessionID",
    converter: null
}, {
    toName: "host",
    fromName: "HostName",
    converter: null
}, {
    toName: "port",
    fromName: "PortNo",
    converter: pokerapp.DataObject.toInt
}, {
    toName: "tournamentId",
    fromName: "TournamentID",
    converter: pokerapp.DataObject.toIntDefaultNegative
}, {
    toName: "tableId",
    fromName: "TableID",
    converter: pokerapp.DataObject.toIntDefaultNegative
}, {
    toName: "seatNumber",
    fromName: "SeatNo",
    converter: pokerapp.DataObject.toIntDefaultNegative
}];
jcore.ObservableModel.defineAllProperties(pokerapp.ConnectedGameRecord.prototype, pokerapp.ConnectedGameRecord.ObservableProperties);
pokerapp.LobbyRequestAccountant = cc.Class.extend({
    MAX_PENDING_REQUESTS: 10,
    _queuedRequestsArray: null,
    _pendingRequestsHashTable: null,
    ctor: function () {
        this._queuedRequestsArray = [];
        this._pendingRequestsHashTable = new Hashtable
    },
    checkLimits: function (a) {
        return null
    },
    checkQueryLimits: function (a) {
        return null
    },
    queueRequest: function (a, b, c) {
        var d = 0 < this._queuedRequestsArray.length || this._pendingRequestsHashTable.size() > pokerapp.LobbyRequestAccountant.MAX_PENDING_REQUESTS;
        switch (a.getLobbyRequestType()) {
        case pokerapp.LobbyRequestType.JoinTournamentTable:
        case pokerapp.LobbyRequestType.JoinRingTable:
        case pokerapp.LobbyRequestType.LoginUser:
            d = !1
        }!c.isConnected() || d ? this._queuedRequestsArray.push({
            request: a,
            netMsg: b
        }) : (c.sendNetMsg(b), this._pendingRequestsHashTable.put(a.getRequestId(), a));
        this.incrementPending(a.getLobbyRequestType(), a);
        this._pendingRequestsHashTable.size() < pokerapp.LobbyRequestAccountant.MAX_PENDING_REQUESTS && this.sendNextRequest(c)
    },
    sendNextRequest: function (a) {
        if (!(0 >= this._queuedRequestsArray.length) && a.isConnected()) {
            var b = this._queuedRequestsArray[0];
            this._queuedRequestsArray.shift();
            null != b && null != b.netMsg && (a.sendNetMsg(b.netMsg),
                this._pendingRequestsHashTable.put(b.request.getRequestId(), b.request))
        }
    },
    findPendingRequestById: function (a) {
        return this._pendingRequestsHashTable.get(a)
    },
    addRequestAlias: function (a, b) {
        var c = this.findPendingRequestById(b);
        null == c && (c = this.findPendingRequestById(a), null != c && (c.addAlias(b), this._pendingRequestsHashTable.put(b, c)))
    },
    incrementPending: function (a, b) {},
    decrementPending: function (a, b) {},
    removePendingRequest: function (a) {
        var b = 0;
        null != this._pendingRequestsHashTable.remove(a.getRequestId()) &&
            b++;
        _.each(a.getAliasList(), function (a) {
            null != this._pendingRequestsHashTable.remove(a) && b++
        }, this);
        0 < b && this.decrementPending(a.getLobbyRequestType(), a)
    }
});
pokerapp.DefaultLobbyController = pokerapp.ILobbyController.extend({
        _user: null,
        _requestAccountant: null,
        _netSession: null,
        _nullRequestHandle: null,
        _registrationRecords: null,
        _connectedGameRecords: null,
        ctor: function () {
            this._super();
            this._connectedGameRecords = [];
            this._registrationRecords = new Hashtable;
            this._user = new pokerapp.User;
            this._requestAccountant = new pokerapp.LobbyRequestAccountant;
            this._netSession = pokerapp.NetSessionManager.getInstance().getSession(this);
            this._netSession.on.connectedChanged.add(this._onConnectedChanged,
                this, !1, 999);
            this._netSession.on.receivedMsg.add(this._onReceivedMsg, this, !1, 999);
            this._nullRequestHandle = new pokerapp.LobbyRequest("", pokerapp.LobbyRequestType.Unknown);
            this._nullRequestHandle.onHandleError("unexpected error")
        },
        isConnected: function () {
            return this._netSession.isConnected()
        },
        isLoggedIn: function () {
            return this._netSession.isConnected() && !this._netSession.isAnonymous()
        },
        connect: function () {
            return this._netSession.connect()
        },
        getUser: function () {
            return this._user
        },
        getSessionId: function () {
            return this._netSession.getSessionId()
        },
        loginUser: function (a, b) {
            return !this.isConnected() ? null : this._sendLobbyRequest(pokerapp.LobbyRequestType.LoginUser, [a, b, pokerapp.SecurityUtil.getMachineID(), pokerapp.NetUtil.getLocalIPString(), pokerapp.SecurityUtil.getMachineSignature(), pokerapp.Translator.instance.getActiveTwoLetterLanguageCode(), "", ""])
        },
        joinGame: function (a) {
            if (!this.isConnected()) return this._nullRequestHandle;
            var b = this._nullRequestHandle;
            a instanceof pokerapp.RingGameHeader ? (jcore.log.info("joining ringgame table: " + a.tableId),
                b = this._sendLobbyRequest(pokerapp.LobbyRequestType.JoinRingTable, [a.tableId, pokerapp.SecurityUtil.getMachineID(), "False"]), b.setUserContext(a)) : a instanceof pokerapp.TournamentGameHeader ? jcore.log.warning("TODO join tournament table") : jcore.log.warning("unexpected header types");
            return b
        },
        refreshUserBalance: function (a) {
            if (!this.isConnected()) return this._nullRequestHandle;
            a = pokerapp.Currency.enumGetName(a);
            var b = this._sendLobbyRequest(pokerapp.LobbyRequestType.GetUserBalance, ["" + a, "0"]);
            b.setUserContext(a);
            return b
        },
        refreshGamesList: function () {
            return !this.isConnected() ? this._nullRequestHandle : this._sendLobbyQuery("/RG/Omaha") ? b.getParameterAt(1).toString() : "" != b.getParameterAt(1).toString() ? s.rtrim(f.getQueryPath(), "*") + b.getParameterAt(1).toString() : s.rtrim(f.getQueryPath(), "*/\\");
            if (2 < b.getParameterCount()) {
                b.getParameterAt(2).toInteger(0);
                for (var h = new Hashtable, c = 3; c < b.getParameterCount(); c++) {
                    var m = b.getParameterAt(c).toKeyValueString();
                    h.put(m.key, m.value)
                }
                0 < h.size() && pokerapp.DataObjectManager.getInstance().update(g, h)
            }
        } else this._requestAccountant.removePendingRequest(d),
            d.onHandleCompletion()
    }
    break;
    case pokerapp.NetMsgTypes.LobbyDeletedNode: c = b.getParameterAt(0).toString(); d = this._requestAccountant.findPendingRequestById(c);
    if (null != d && d instanceof pokerapp.LobbyQuery) d.onHandleCompletion();
    break;
    case pokerapp.NetMsgTypes.LobbyResultNodeList: c = b.getParameterAt(0).toString(); d = this._requestAccountant.findPendingRequestById(c);
    if (null != d && d instanceof pokerapp.LobbyQuery && (f = d, 1 < b.getParameterCount() && (f.getQueryPath(), "" != b.getParameterAt(1).toString() ? (s.rtrim(f.getQueryPath(),
            "*"), b.getParameterAt(1)) : s.rtrim(f.getQueryPath(), "*/\\"), b.getParameterAt(2).toInteger(0), 3 < b.getParameterCount() && 4 < b.getParameterCount() && "..." == b.getLastParameter().toString()))) {
        d.addResponse(b.copyParams(3, b.getParameterCount() - 4));
        break
    }
    break;
    case pokerapp.NetMsgTypes.LobbyResultAlias: this._requestAccountant.addRequestAlias(b.getParameterAt(0).toString(), b.getParameterAt(1).toString())
}
}
catch (n) {
    jcore.log.warning(n)
}
null != this._netSession && this._netSession.isConnected() && this._requestAccountant.sendNextRequest(this._netSession);
return !0
}, _onHandleResponse: function (a) {
        var b = a.getLobbyRequestType(),
            c = a.getResponse(),
            d = null;
        a.hasResponse() ? d = c[c.length - 1] : (c = [], d = []);
        if (a.isError()) return !0;
        switch (b) {
        case pokerapp.LobbyRequestType.GetUserBalance:
            this._checkResponseLength(a, 2);
            a = a.getUserContext();
            this._user.updateBalance(pokerapp.Currency.enumParseNameOrValue(a), d[0].toDecimal(), d[1].toDecimal());
            break;
        case pokerapp.LobbyRequestType.GetAvatarID:
            this._checkResponseLength(a, 2);
            break;
        case pokerapp.LobbyRequestType.GetExternalUserSessionID:
            this._checkResponseLength(a,
                1);
            this._user.externalSessionID = d[0].toString();
            break;
        case pokerapp.LobbyRequestType.GetUserGCCollection:
            this._checkResponseLength(a, 1);
            break;
        case pokerapp.LobbyRequestType.GetServerTime:
            this._checkResponseLength(a, 1);
            break;
        case pokerapp.LobbyRequestType.GetLobbyStats:
            this._checkResponseLength(a, 2);
            break;
        case pokerapp.LobbyRequestType.LoginUser:
            this._checkResponseLength(a, 2);
            this._netSession.setSessionId(d[0].toString());
            this._user.update(d[3].toString(), d[2].toString(), d[1].toString());
            jcore.App.getInstance().showAlert("Logged In As " +
                d[1].toString());
            break;
        case pokerapp.LobbyRequestType.GetConnectedTables:
            this._connectedGameRecords.slice();
            var f = this._connectedGameRecords;
            try {
                f = [], _.each(c, function (a) {
                    var b = new Hashtable;
                    _.each(a, function (a) {
                        a = a.toKeyValueString();
                        b.put(a.key, a.value)
                    });
                    a = new pokerapp.ConnectedGameRecord;
                    a.updateDataValues(b);
                    var c = a.host,
                        d = a.port;
                    !jcore.util.isNullOrEmpty(a.tableSessionId) && (-1 != d && !jcore.util.isNullOrEmpty(c)) && f.push(a)
                }), this._connectedGameRecords = f
            } finally {
                this._processActiveGames()
            }
            break;
        case pokerapp.LobbyRequestType.JoinRingTable:
            this._checkResponseLength(a, 1);
            if (b = a.getUserContext()) a = pokerapp.NetSessionManager.getInstance().getSession(b), a.setSessionId(d[0].toString()), a.setSessionData(new pokerapp.TableSessionData(b.tableId, -1));
            break;
        case pokerapp.LobbyRequestType.JoinTournamentTable:
            this._checkResponseLength(a, 1);
            break;
        case pokerapp.LobbyRequestType.RegisterTournamentUser:
            this._checkResponseLength(a, 1);
            b = a.getUserContext();
            jcore.assertNotNull(b);
            c = b.getTournamentHeader();
            jcore.assertNotNull(c);
            b.setPendingRequest(null);
            b.setSessionId(d[0].toString());
            d = !0;
            c.status !== pokerapp.TournamentState.Registering && (d = !1);
            d && (a = pokerapp.NetSessionManager.getInstance().getSession(c), a.setSessionId(b.getSessionId()), jcore.util.isNull(a.getSessionData()) && a.setSessionData(new pokerapp.TableSessionData(-1, c.tournamentId)));
            this.refreshConnectedGames();
            break;
        case pokerapp.LobbyRequestType.GenerateUserSecurityToken:
            this._checkResponseLength(a, 1), this._user.externalSessionId = d[0].toString()
        }
        return !0
    }, _onHandleError: function (a) {
        return !0
    },
    _checkResponseLength: function (a, b) {}, _findTournamentHeader: function (a) {
        var b = pokerapp.DataObjectManager.getInstance().findWithFilter(function (b) {
            return b instanceof pokerapp.TournamentGameHeader && b.tournamentId == a
        });
        return 0 < b.length ? b[0] : null
    }, _processActiveGames: function (a) {
        try {
            for (var b = 0; b < this._connectedGameRecords.length && this.isConnected() && this.isLoggedIn(); b++) {
                var c = this._connectedGameRecords[b],
                    d = c.tournamentId,
                    f = c.tableId;
                if (c.hasValidSessionId())
                    if (-1 != d) {
                        var g = this._findTournamentHeader(d);
                        if (null == g) {
                            if (!this.isConnected() || !this.isLoggedIn()) break;
                            g = this._findTournamentHeader(d);
                            if (null == g) {
                                jcore.log.warning("ProcessConnectedGames-ProcessActiveGames - Couldn't find tournament " + d + ". Failed to open connected game");
                                continue
                            }
                        }
                        if (!(null != a && a.tournamentId != g.tournamentId)) {
                            var h = this._findOrCreateRegistrationRecord(g);
                            h.setTableSessionId(c.tableSessionId);
                            var m = pokerapp.NetSessionManager.getInstance().getSession(g);
                            m.setSessionId(c.tableSessionId);
                            jcore.util.isNull(m.getSessionData()) &&
                                m.setSessionData(new pokerapp.TableSessionData(f, d));
                            this._openTournamentTable(g, h.getTableSessionId(), d, f)
                        }
                    } else null == a && this._openRingGameTable(f)
            }
        } catch (n) {
            jcore.log.error(n)
        } finally {}
    }, _openRingGameTable: function (a) {}, _openTournamentTable: function (a, b, c, d) {
        -1 == d || a.status == pokerapp.TournamentState.Registering || pokerapp.GameManagerService.getInstance().isGameOpen(a) || cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_open_game, a)
    }
});
var DataexService = cc.Class.extend({
    idMap: [],
    ctor: function () {},
    logLocalMessage: function (a) {
        jcore.log.info(a)
    },
    createRequest: function (a, b) {
        var c = {
            id: jcore.math.guid(),
            method: a,
            type: "request",
            payload: b
        };
        this.validateRequest(c);
        var d, f, g = {
            promise: new Promise(function (a, b) {
                d = a;
                f = b
            }),
            resolve: d,
            reject: f,
            data: c
        };
        this.savePromise(c.id, g);
        return g
    },
    savePromise: function (a, b) {
        this.idMap[a] = b;
        return !0
    },
    sendRequest: function (a, b, c, d) {
        if (void 0 === a || void 0 === c) throw "Invalid window reference or data";
        b = this.createRequest(b,
            c);
        c = JSON.stringify(b.data);
        this.logLocalMessage("Sending request to game service: " + c);
        this.postMessage(a, c, d);
        return b.promise
    },
    removePromise: function (a) {
        if (void 0 === a) return !1;
        delete this.idMap[a]
    },
    call: function (a, b, c, d) {
        try {
            var f = null;
            void 0 !== b && (f = b()) && this.logLocalMessage("COCOS: called callback, result: " + JSON.stringify(f));
            var g = this.createResponse(a);
            g.payload = f;
            this.logLocalMessage("Returning: " + JSON.stringify(g));
            c(g)
        } catch (h) {
            g = this.createError(a, h), d(g), Raven.captureException(h)
        }
        this.removePromise(a.id)
    },
    process: function (a, b) {
        this.validateRequest(a);
        var c = this,
            d, f, g = {
                promise: new Promise(function (g, m) {
                    d = g;
                    f = m;
                    c.call(a, b, d, f)
                }),
                resolve: d,
                reject: f,
                data: a
            };
        this.savePromise(a.id, g);
        return g
    },
    processPromise: function (a, b, c) {
        this.validateRequest(a);
        var d = this;
        b = {
            promise: b.then(function (b) {
                var c = d.createResponse(a);
                c.payload = b;
                d.removePromise(a.id);
                return c
            }).catch(function (b) {
                d.createError(a, e);
                Raven.captureException(e);
                d.removePromise(a.id);
                c && c()
            }),
            resolve: void 0,
            reject: void 0,
            data: a
        };
        this.savePromise(a.id,
            b);
        return b
    },
    validateRequest: function (a) {
        if (void 0 === a || !a.hasOwnProperty("id")) throw jcore.log.error("Invalid request or no id present: " + a), "Error: Invalid request";
    },
    createResponse: function (a) {
        this.validateRequest(a);
        var b = void 0,
            b = void 0 === a ? {} : Object.assign({}, a);
        b.type = "response";
        b.success = !0;
        return b
    },
    createError: function (a, b) {
        var c = this.createResponse(a);
        c.success = !1;
        c.error = b;
        return c
    },
    getResponse: function (a) {
        throw "Not implemented. This method should be implemented in the sub class";
    },
    postMessage: function (a,
        b, c) {
        c ? (this.logLocalMessage("Posting from browser"), a.postMessage(b, "*")) : (this.logLocalMessage("Posting from native"), a.postMessage(b))
    },
    processRequest: function (a, b, c) {
        b = this.getResponse(b);
        if (jcore.util.isNull(b)) jcore.log.error("Something did not work");
        else {
            this.logLocalMessage("Successfully received promise response");
            var d = this;
            (jcore.util.isNull(b.promise) ? b : b.promise).then(function (b) {
                b = JSON.stringify(b);
                d.logLocalMessage("Obtained success: browser=" + c + ", response=" + b);
                d.postMessage(a,
                    b, c)
            }).catch(function (b) {
                jcore.log.error("Error: " + b);
                d.postMessage(a, b, c)
            })
        }
    },
    processResponse: function (a, b) {
        this.logLocalMessage("Incoming resp: " + JSON.stringify(b));
        if (void 0 === b || !b.hasOwnProperty("id")) jcore.log.error("Invalid response or no id present: " + b);
        else {
            var c = this.idMap[b.id];
            if (void 0 === c) this.logLocalMessage("Promise corresponding to request id not found: " + b.id);
            else {
                if (b.hasOwnProperty("success") && !b.success) {
                    var d = b.hasOwnProperty("error") ? b.error : "Not provided";
                    this.logLocalMessage("Error occurred: " +
                        d);
                    c.reject(d)
                }
                c.resolve(b.payload);
                c.resolve = void 0;
                c.reject = void 0
            }
        }
    }
});
pokerapp.BridgeGameService = DataexService.extend({
    ctor: function () {
        this._super()
    },
    getResponse: function (a) {
        var b = void 0;
        jcore.log.debug("COCOS: Getting response for request (json): " + JSON.stringify(a));
        switch (a.method) {
        case "isInitialized":
            b = this.isInitialized(a);
            break;
        case "openGame":
            b = this.openGame(a);
            break;
        case "isGameOpen":
            b = this.isGameOpen(a);
            break;
        case "getOpenGames":
            b = this.getOpenGames(a);
            break;
        case "settingsUpdated":
            b = this.settingsUpdated(a);
            break;
        case "userLoggedOut":
            b = this.userLoggedOut(a);
            break;
        case "updateBalance":
            b = this.updateBalance(a)
        }
        return b
    },
    isInitialized: function (a) {
        return this.process(a, function () {
            return {
                initialized: !0
            }
        })
    },
    openGame: function (a) {
        var b = pokerapp.ConvertUtil.toInt(a.payload.tableId, -1),
            c = pokerapp.ConvertUtil.toInt(a.payload.tournamentId, -1),
            d = pokerapp.ConvertUtil.toString(a.payload.tableSessionId, null),
            f = pokerapp.ConvertUtil.toInt(a.payload.seatNo, pokerapp.Constants.INVALID_SEAT_POSITION),
            g = pokerapp.ConvertUtil.toBoolean(a.payload.makeActive, !0);
        jcore.log.debug("received request to open game tableId: " +
            b + " tournamentId: " + c + " sessionId: " + d);
        return jcore.util.isNullOrEmpty(d) ? this.process(a, function () {
            cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_popup_alert, "There was a problem opening the game, Please try again. Session Id required.");
            throw "There was a problem opening the game, Please try again. Session Id required.";
        }) : this.processPromise(a, pokerapp.BridgeLobbyService.getInstance().getSettings().then(function (a) {
            pokerapp.BridgeService.getInstance().updateSettings(a);
            return jcore.util.isNotNull(c) &&
                0 < c ? pokerapp.BridgeLobbyService.getInstance().getTournamentDetails(c) : pokerapp.BridgeLobbyService.getInstance().getRinggameDetails(b)
        }).then(function (a) {
            var m = {
                    opened: !1
                },
                n = new Hashtable,
                p;
            for (p in a.values) jcore.util.isDefined(a.values[p].Value) ? n.put(p, a.values[p].Value) : n.put(p, a.values[p]);
            a = pokerapp.DataObjectManager.getInstance().update(a.path, n);
            null != a && (n = pokerapp.NetSessionManager.getInstance().getSession(a), n.setSessionId(d), jcore.util.isNull(n.getSessionData()) && (n.setSessionData(new pokerapp.TableSessionData(b,
                c)), f != pokerapp.Constants.INVALID_SEAT_POSITION && n.getSessionData().setLocalPlayerPosition(f)), cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_open_game, {
                gameHeader: a,
                makeActive: g
            }), m.opened = !0);
            return m
        }).catch(function (a) {
            cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_popup_alert, "There was a problem opening the game, Please try again.");
            throw a;
        }))
    },
    isGameOpen: function (a) {
        return this.process(a, function () {
            var b = pokerapp.ConvertUtil.toInt(a.payload.tableId, -1),
                c = pokerapp.ConvertUtil.toInt(a.payload.tournamentId, -1),
                d = !1;
            if (b = pokerapp.GameManagerService.getInstance().findGameByTableId(b, c)) d = pokerapp.UIAppViewManager.getInstance().findGameView(b.getGameHeader()), d = jcore.util.isNotNull(d) && d == pokerapp.UIAppViewManager.getInstance().getActiveView();
            return {
                isOpen: b ? !0 : !1,
                isActive: d
            }
        })
    },
    getOpenGames: function (a) {
        return this.process(a, function () {
            var a = {
                tableIds: [],
                tournamentIds: []
            };
            _.each(pokerapp.GameManagerService.getInstance().getOpenGameHeaders(), function (c) {
                c instanceof
                pokerapp.RingGameHeader ? a.tableIds.add("" + c.tableId) : c instanceof pokerapp.RingGameHeader && a.tournamentIds.add("" + c.tournamentId)
            });
            return a
        })
    },
    userLoggedOut: function (a) {
        return this.process(a, function () {
            pokerapp.GameManagerService.getInstance().closeAllGames();
            return {
                ok: !0
            }
        })
    },
    settingsUpdated: function (a) {
        var b = a.payload || a;
        return this.process(a, function () {
            pokerapp.BridgeService.getInstance().updateSettings(b);
            return {
                ok: !0
            }
        })
    },
    updateBalance: function (a) {
        var b = a.payload || a;
        return this.process(a, function () {
            pokerapp.BridgeService.getInstance().updateTheBalance(b);
            return {
                ok: !0
            }
        })
    }
});
pokerapp.BridgeGameService.getInstance = function () {
    this._instance || (this._instance = new pokerapp.BridgeGameService);
    return this._instance
};
pokerapp.BridgeLobbyService = DataexService.extend({
    _targetWindowRef: null,
    ctor: function () {
        this._super();
        this._targetWindowRef = window.parent;
        pokerapp.GameManagerService.getInstance().on.gameClosed.add(this.onGameClosed, this)
    },
    getUserBalance: function (a) {
        var b = {};
        jcore.util.isNotNull(a) ? b.currency = pokerapp.Currency.enumGetName(a) : b.currency = "USD";
        return this.sendRequest(this._targetWindowRef, "getUserBalance", b, !0)
    },
    getUserId: function () {
        return this.sendRequest(this._targetWindowRef, "getUserId", {}, !0)
    },
    isUserLoggedIn: function () {
        return this.sendRequest(this._targetWindowRef, "isUserLoggedIn", {}, !0)
    },
    getRinggameDetails: function (a) {
        return this.sendRequest(this._targetWindowRef, "getRinggameDetails", {
            tableId: "" + a
        }, !0)
    },
    getTournamentDetails: function (a) {
        return this.sendRequest(this._targetWindowRef, "getTournamentDetails", {
            tournamentId: "" + a
        }, !0)
    },
    onGameClosed: function (a, b, c) {
        var d = this;
        b && b.getGameHeader && (a = {
                tableId: "" + b.getGameHeader().tableId
            }, b.getGameHeader() instanceof pokerapp.TournamentGameHeader &&
            (a.tournamentId = "" + b.getGameHeader().tournamentId, a.reOpen = c), this.sendRequest(this._targetWindowRef, "gameClosed", a, !0).then(function (a) {
                return 1 > pokerapp.GameManagerService.getInstance().getQueueLength() && 1 > pokerapp.GameManagerService.getInstance().getOpenGameCount() ? d.showLobbyView() : !0
            }).catch(function (a) {
                jcore.log.error(a)
            }))
    },
    gameServiceInitialized: function () {
        return this.sendRequest(this._targetWindowRef, "gameServiceInitialized", {}, !0)
    },
    showLobbyView: function () {
        return this.sendRequest(this._targetWindowRef,
            "showLobbyView", {}, !0)
    },
    showDepositView: function () {
        return this.sendRequest(this._targetWindowRef, "showDepositView", {}, !0)
    },
    showProfileView: function () {
        return this.sendRequest(this._targetWindowRef, "showProfileView", {}, !0)
    },
    showHandHistoryView: function (a, b) {
        return this.sendRequest(this._targetWindowRef, "showHandHistoryView", {
            handId: a,
            currency: b
        }, !0)
    },
    getSettings: function () {
        return this.sendRequest(this._targetWindowRef, "getSettings", {}, !0)
    },
    getMachineId: function () {
        return this.sendRequest(this._targetWindowRef,
            "getMachineId", {}, !0)
    },
    getIPAddress: function () {
        return this.sendRequest(this._targetWindowRef, "getIPAddress", {}, !0
    },
    openGameViewFromLobby: function (a) {
        return this.sendRequest(this._targetWindowRef, "openGameViewFromLobby", {}, !0)
    },
    registerTournament: function (a) {
        return this.sendRequest(this._targetWindowRef, "registerTournament", {
            tournamentHeader: a
        }, !0)
    }
});
pokerapp.BridgeLobbyService.getInstance = function () {
    this._instance || (this._instance = new pokerapp.BridgeLobbyService);
    return this._instance
};
pokerapp.BridgeService = jcore.service.BaseService.extend({
    _delay: 0,
    _gameServiceReady: !1,
    ctor: function () {
        this._super("BridgeService")
    },
    init: function () {
        this._super();
        if (!cc.sys.isNative) {
            var a = this;
            document.addEventListener("message", function (b) {
                a._processIncomingMessage(window, b.data)
            });
            window.addEventListener ? window.addEventListener("message", function (b) {
                a._processIncomingMessage(window.parent, b.data)
            }, !1) : window.attachEvent("on", "message", function (b) {
                    a._processIncomingMessage(window.parent, b.data)
                },
                !1)
        }
    },
    _processIncomingMessage: function (a, b) {
        if (jcore.util.isNull(a) || jcore.util.isNull(b)) throw "window reference or incoming message undefined";
        try {
            var c = JSON.parse(b)
        } catch (d) {
            jcore.log.error("failed to parse json data: " + b);
            return
        }
        if (!c.hasOwnProperty("type")) throw "type not present in incoming response";
        "response" === c.type ? pokerapp.BridgeLobbyService.getInstance().processResponse(a, c) : "request" === c.type && pokerapp.BridgeGameService.getInstance().processRequest(a, c, !0)
    },
    updateSettings: function (a) {
        if (jcore.util.isNull(a)) return !1;
        jcore.log.info(a);
        var b = pokerapp.PokerGameGlobalOptions.getInstance();
        b.soundsEnabled = pokerapp.ConvertUtil.toBoolean(a.sound, !0);
        b.autoPostBlinds = pokerapp.ConvertUtil.toBoolean(a.autoPostBlinds, !0);
        b.autoMuck = pokerapp.ConvertUtil.toBoolean(a.autoMuck, !0);
        b.fourColorDeck = pokerapp.ConvertUtil.toBoolean(a.deckColor, !0);
        return !0
    },
    updateMachineId: function (a) {
        if (jcore.util.isNull(a) && !jcore.util.isNullOrEmpty(a.value)) return !1;
        pokerapp.SecurityUtil.setMachineSignature(a.value);
        return !0
    },
    updateIPAddress: function (a) {
        if (jcore.util.isNull(a) &&
            !jcore.util.isNullOrEmpty(a.value)) return !1;
        pokerapp.SecurityUtil.setLocalIP(a.value);
        return !0
    },
    updateTheBalance: function (a) {
        if (jcore.util.isNull(a)) return !1;
        for (var b = "", c = 0; c < a.length; c++) {
            var d = a[c],
                b = jcore.util.isNotNull(d.Currency) ? pokerapp.Currency.enumGetName(d.Currency) : "USD";
            pokerapp.LobbyService.getInstance().getUser().updateBalance(pokerapp.Currency.enumParseNameOrValue(b), d.Balance, d.InPlay)
        }
        return !0
    },
    update: function (a) {
        if (!this._gameServiceReady && jcore.App.getInstance().isRunningEmbeddedMode() &&
            (this._delay += a, 1.5 <= this._delay)) {
            this._gameServiceReady = !0;
            var b = this;
            pokerapp.BridgeLobbyService.getInstance().gameServiceInitialized().then(function (a) {
                return pokerapp.LobbyService.getInstance().refreshUserBalance().asPromise()
            }).then(function (a) {
                return pokerapp.BridgeLobbyService.getInstance().getMachineId()
            }).then(function (a) {
                return b.updateMachineId(a)
            }).then(function (a) {
                return pokerapp.BridgeLobbyService.getInstance().getIPAddress()
            }).then(function (a) {
                return b.updateIPAddress(a)
            }).then(function (a) {
                return pokerapp.BridgeLobbyService.getInstance().getSettings()
            }).then(function (a) {
                return b.updateSettings(a)
            }).then(function (a) {
                return b.updateTheBalance(a)
            }).catch(function (a) {
                jcore.log.error("error initializing BridgeService: " +
                    a)
            })
        }
    }
});
pokerapp.BridgeService.getInstance = function () {
    this._instance || (this._instance = new pokerapp.BridgeService);
    return this._instance
};
pokerapp.BridgeLobbyController = pokerapp.ILobbyController.extend({
    _user: null,
    _sessionId: null,
    _nullRequestHandle: null,
    ctor: function () {
        this._super();
        this._user = new pokerapp.User;
        this._sessionId = new pokerapp.NetSessionId;
        this._nullRequestHandle = new pokerapp.LobbyRequest("", pokerapp.LobbyRequestType.Unknown);
        this._nullRequestHandle.onHandleError("unexpected lobby error")
    },
    getUser: function () {
        return this._user
    },
    getSessionId: function () {
        return this._sessionId
    },
    isConnected: function () {
        return !0
    },
    connect: function () {
        return !0
    },
    loginUser: function (a, b) {
        return this._nullRequestHandle
    },
    joinGame: function (a) {
        return this._nullRequestHandle
    },
    refreshUserBalance: function (a) {
        var b = this,
            c = new pokerapp.BridgeLobbyRequest;
        pokerapp.BridgeLobbyService.getInstance().getUserBalance(a).then(function (a) {
            b._user.updateBalance(pokerapp.Currency.enumParseNameOrValue(a.currency), a.balance);
            c.onHandleCompletion()
        }).catch(function (a) {
            c.onHandleError(a)
        });
        return c
    }
});
pokerapp.BridgeLobbyRequest = pokerapp.NetRequestHandle.extend({
    _responseArray: null,
    ctor: function () {
        this._super();
        this._responseArray = []
    },
    addResponse: function (a) {
        this._responseArray.push(a)
    },
    getResponse: function () {
        return this._responseArray
    },
    hasResponse: function () {
        return null != this._responseArray && 0 < this._responseArray.length
    }
});
pokerapp.LobbyService = jcore.service.BaseService.extend({
    _lobbyController: null,
    ctor: function () {
        this._super("LobbyService");
        jcore.App.getInstance().isRunningEmbeddedMode() ? this._lobbyController = new pokerapp.BridgeLobbyController : this._lobbyController = new pokerapp.DefaultLobbyController
    },
    init: function () {
        this._super()
    },
    connect: function () {
        this._lobbyController.isConnected && !this._lobbyController.isConnected() && this._lobbyController.connect()
    },
    getSessionId: function () {
        return this._lobbyController.getSessionId()
    },
    getUser: function () {
        return this._lobbyController.getUser()
    },
    refreshUserBalance: function (a) {
        jcore.util.isNull(a) && (a = jcore.App.getInstance().getCurrentSkin().getDefaultCurrency());
        return this._lobbyController.refreshUserBalance(a)
    },
    loginUser: function (a, b) {
        return this._lobbyController.loginUser(a, b)
    },
    joinGame: function (a) {
        return this._lobbyController.joinGame(a)
    },
    refreshGamesList: function () {
        return this._lobbyController.refreshGamesList()
    },
    refreshConnectedGames: function () {},
    registerTournament: function (a) {
        return this._lobbyController.registerTournament(a)
    },
    unRegisterTournament: function (a) {},
    isRegisteredForTournament: function (a) {
        return !1
    }
});
pokerapp.LobbyService.getInstance = function () {
    this._instance || (this._instance = new pokerapp.LobbyService);
    return this._instance
};
pokerapp.DialogService = jcore.service.BaseService.extend({
    ctor: function () {
        this._super("DialogService")
    },
    showMessage: function (a, b) {
        jcore.App.getInstance().showAlert(a)
    }
});
pokerapp.DialogService.getInstance = function () {
    this._instance || (this._instance = new pokerapp.DialogService);
    return this._instance
};
pokerapp.GameManagerService = jcore.service.BaseService.extend({
    on: {
        gameOpened: null,
        gameClosed: null
    },
    _gameRecords: null,
    _openQueue: null,
    ctor: function () {
        this._super("GameManagerService");
        this.on = {};
        this.on.gameOpened = new signals.Signal;
        this.on.gameClosed = new signals.Signal;
        this._gameRecords = [];
        this._openQueue = []
    },
    init: function () {
        this._super()
    },
    isGameOpen: function (a) {
        return jcore.util.isNotNull(this.findGame(a))
    },
    findGame: function (a) {
        jcore.assertNotNull(a);
        return jcore.util.isNull(a) ? null : _.find(this._gameRecords,
            function (b) {
                return b.getGameHeader().getObjectId() === a.getObjectId()
            })
    },
    findGameByTableId: function (a, b) {
        a = jcore.util.toNumber(a, -1);
        b = jcore.util.toNumber(b, -1);
        if (0 < b) return _.find(this._gameRecords, function (c) {
            return c.getGameHeader() instanceof pokerapp.TournamentGameHeader && c.getGameHeader().tableId === a && c.getGameHeader().tournamentId === b
        });
        jcore.assert(-1 !== a, "tableId is invalid");
        return _.find(this._gameRecords, function (b) {
            return b.getGameHeader() instanceof pokerapp.RingGameHeader && b.getGameHeader().tableId ===
                a
        })
    },
    getOpenGameHeaders: function () {
        var a = [];
        _.each(this._gameRecords, function (b) {
            a.push(b.getGameHeader())
        });
        return a
    },
    getOpenGameCount: function () {
        return this._gameRecords.length
    },
    openGame: function (a) {
        jcore.assertNotNull(a);
        var b = a.getObjectId();
        jcore.assertNotNull(b);
        b = this.findGame(a);
        jcore.util.isNull(b) && (b = new pokerapp.ActiveGameRecord(a, PokerGame.newGame(a)), this._gameRecords.push(b), this.on.gameOpened.dispatch(this, b.getGameInstance()));
        return b.getGameInstance()
    },
    closeGame: function (a, b) {
        jcore.assertNotNull(a);
        var c = a.getObjectId();
        jcore.assertNotNull(c);
        var d = this.findGame(a);
        return jcore.util.isNotNull(d) ? (this._gameRecords = _.filter(this._gameRecords, function (a) {
            return a !== d
        }), c = d.getGameInstance(), c.closeGame(!0), this.on.gameClosed.dispatch(this, c, b), !0) : !1
    },
    closeAllGames: function () {
        for (this.clearOpenGameQueue(); 0 < this._gameRecords.length;) this.closeGame(this._gameRecords[0].getGameHeader())
    },
    queueOpenGame: function (a, b) {
        jcore.assertNotNull(a);
        var c = a.getObjectId();
        jcore.assertNotNull(c);
        b = jcore.util.orDefault(b,
            !0);
        var d = _.find(this._openQueue, function (a) {
            return a.gameHeader.getObjectId() === c
        });
        jcore.util.isNull(d) && this._openQueue.push({
            gameHeader: a,
            makeActive: b
        })
    },
    dequeOpenGame: function () {
        if (0 < this._openQueue.length) {
            var a = this._openQueue[0];
            this._openQueue.shift();
            return a
        }
        return null
    },
    peakOpenGame: function () {
        return 0 < this._openQueue.length ? this._openQueue[0] : null
    },
    clearOpenGameQueue: function () {
        this._openQueue = []
    },
    getQueueLength: function () {
        return this._openQueue.length
    }
});
pokerapp.GameManagerService.getInstance = function () {
    this._instance || (this._instance = new pokerapp.GameManagerService);
    return this._instance
};
pokerapp.ActiveGameRecord = cc.Class.extend({
    _gameHeader: null,
    _game: null,
    ctor: function (a, b) {
        this._gameHeader = a;
        this._game = b
    },
    getGameHeader: function () {
        return this._gameHeader
    },
    getGameInstance: function () {
        return this._game
    }
});
pokerapp.AudioService = jcore.service.BaseService.extend({
    _enabled: !0,
    _enabledSources: null,
    ctor: function () {
        this._super("AudioService");
        this._enabledSources = new Hashtable
    },
    init: function () {
        this._super()
    },
    isEnabled: function () {
        return this._enabled
    },
    setEnabled: function (a) {
        this._enabled = a
    },
    playSound: function (a, b, c) {
        jcore.util.isNull(b) || (c = jcore.util.orDefault(c, pokerapp.SoundLevel.NORMAL), this._enabled && (!(c < pokerapp.SoundLevel.ALWAYS) || this._isEnabledForSource(a)) && cc.audioEngine.playEffect(this._getSoundResource(b),
            !1))
    },
    enableForSource: function (a, b) {
        this._enabledSources.put(a, b)
    },
    _isEnabledForSource: function (a) {
        return jcore.util.isNull(a) ? !0 : this._enabledSources.containsKey(a) ? this._enabledSources.get(a) : !0
    },
    _getSoundResource: function (a) {
        switch (a) {
        case pokerapp.SoundId.BET:
            return R.sounds.betSound;
        case pokerapp.SoundId.CHECK:
            return R.sounds.checkSound;
        case pokerapp.SoundId.CLICK:
            return R.sounds.clickSound;
        case pokerapp.SoundId.DEAL:
            return R.sounds.dealSound;
        case pokerapp.SoundId.FOLD:
            return R.sounds.foldSound;
        case pokerapp.SoundId.CHIPS_LARGE:
            return R.sounds.largeSound;
        case pokerapp.SoundId.CHIPS_SMALL:
            return R.sounds.smallSound;
        case pokerapp.SoundId.TURN:
            return R.sounds.turnSound;
        case pokerapp.SoundId.RAISE:
            return R.sounds.raiseSound;
        case pokerapp.SoundId.TIME_WARNING:
            return R.sounds.timeSound;
        case pokerapp.SoundId.WIN:
            return R.sounds.winSound;
        default:
            return R.sounds.clickSound
        }
    }
});
pokerapp.SoundLevel = jcore.Enum.create({
    NORMAL: 0,
    ALERT: 1,
    ALWAYS: 2
});
pokerapp.SoundId = jcore.Enum.create({
    BET: 0,
    CHECK: 1,
    CLICK: 2,
    DEAL: 3,
    FOLD: 4,
    CHIPS_LARGE: 5,
    CHIPS_SMALL: 6,
    TURN: 7,
    RAISE: 8,
    TIME_WARNING: 9,
    WIN: 10
});
pokerapp.AudioService.getInstance = function () {
    this._instance || (this._instance = new pokerapp.AudioService);
    return this._instance
};
pokerapp.PokerGameState = jcore.Enum.create({
    GAME_INVALID: 0,
    GAME_JOINING_TABLE: 1,
    GAME_CONNECTING: 2,
    GAME_DISCONNECTED: 3,
    GAME_PREPARE: 4,
    GAME_RUNNING: 5,
    GAME_END: 6,
    GAME_OK: 7,
    GAME_ERROR: 8,
    GAME_WAITING: 9,
    GAME_CONNECTING_WAIT: 10
});
var PokerGame = cc.Class.extend({
    _gameHeader: null,
    _netSession: null,
    _tableStateData: null,
    _tableSessionData: null,
    _tableModel: null,
    _gameOptions: null,
    _receivedTableConnected: !1,
    _userClickedSitOut: !1,
    _leaveTableCommandSent: !1,
    _stateMachine: null,
    _enableReconnect: !0,
    _reconnectCount: 0,
    _closed: !1,
    _reopenAfterClose: !1,
    ctor: function (a) {
        jcore.assertNotNull(a);
        this._stateMachine = new jcore.StateMachine("Game", pokerapp.PokerGameState, pokerapp.PokerGameState.GAME_WAITING);
        this._gameHeader = a;
        this._netSession = pokerapp.NetSessionManager.getInstance().getSession(this._gameHeader);
        this._netSession.on.connectedChanged.add(this._onConnectedChanged, this);
        this._netSession.on.receivedMsg.add(this._onReceivedMsg, this);
        this._tableSessionData = this._netSession.getSessionData();
        jcore.util.isNull(this._tableSessionData) && (this._tableSessionData = this._gameHeader instanceof pokerapp.TournamentGameHeader ? new pokerapp.TableSessionData(-1, this._gameHeader.tournamentId) : new pokerapp.TableSessionData(this._gameHeader.tableId, -1), this._netSession.setSessionData(this._tableSessionData));
        this._tableModel =
            new pokerapp.TableModel(this.getGameHeader(), this._tableSessionData, this);
        this._gameOptions = pokerapp.PokerGameGlobalOptions.getInstance().createOptionsForGame(this);
        this._receivedTableConnected = !1
    },
    getGameHeader: function () {
        return this._gameHeader
    },
    getTableModel: function () {
        return this._tableModel
    },
    getMe: function () {
        return this.getTableModel().getLocalPlayer()
    },
    getInstanceOptions: function () {
        return this._gameOptions
    },
    isTableSessionValid: function () {
        return !this._netSession.getSessionId().isAnonymous()
    },
    isTournament: function () {
        return this.getTableModel().isTournament()
    },
    isConnected: function () {
        return null != this._netSession && this._netSession.isConnected() && this._receivedTableConnected
    },
    setCurrentBetAmount: function (a) {
        var b = this.getTableModel();
        if (b.hasPlayerTurn()) {
            var c = this.getMe(),
                b = b.getCurrentTurn();
            c.playerStack < a - c.playerBet && (a = c.playerStack - c.playerBet);
            a = this.validatePlayerBet(a);
            a = jcore.util.clamp(b.minimumBetAmount, Math.max(a, b.raiseBetAmount), b.maximumBetAmount);
            b.currentBetAmount !== a &&
                (b.currentBetAmount = a, this.determineActionStates())
        }
    },
    beginRebuy: function () {
        var a = this.getTableModel(),
            b = a.getCurrentBuyin();
        if (!jcore.util.isNull(b) && !b.isActive())
            if (a.isTournament()) {
                if (a.allowRebuy || a.waitForRebuy) b.setBuyinMode(pokerapp.BuyinMode.rebuy), b.setBuyinDetails(a.getLocalPlayer().playerStack), b.setBuyinState(pokerapp.BuyinState.waitForUser)
            } else a.hasLocalPlayer() && (b.setBuyinMode(pokerapp.BuyinMode.buyin), b.setBuyinDetails(a.getLocalPlayer().playerStack), b.setBuyinState(pokerapp.BuyinState.waitForUser))
    },
    beginAddon: function () {
        var a = this.getTableModel(),
            b = a.getCurrentBuyin();
        a.isTournament() && (a.allowAddon && !b.isActive()) && (b.setBuyinMode(pokerapp.BuyinMode.addon), b.setBuyinDetails(a.getLocalPlayer().playerStack), b.setBuyinState(pokerapp.BuyinState.waitForUser))
    },
    completeRebuyAddon: function (a, b) {
        var c = this.getTableModel();
        c.getCurrentBuyin().isActive() && (c.getCurrentBuyin().setBuyinState(pokerapp.BuyinState.none), c.clearTableMessage(pokerapp.TableMessageId.RebuyStatus), c.waitForRebuy = !1, a ? this.executeGameCommand(new pokerapp.PokerAddonCmd(b)) :
            this.executeGameCommand(new pokerapp.PokerRebuyCmd(b)), this.setActionRequired(!1), this.sendPlayerUpdateState())
    },
    actionRequestSeat: function (a) {
        this.executeGameCommand(new pokerapp.PokerRequestSeatCmd(a));
        this.sendPlayerUpdateState()
    },
    actionCancelRequestSeat: function () {
        this.sendPlayerCancelRequestSeat()
    },
    actionBuyIn: function (a) {
        this.getTableModel().getCurrentBuyin().isActive() && (this.getTableModel().getCurrentBuyin().setBuyinState(pokerapp.BuyinState.none), this.sendPlayerBuyIn(a, pokerapp.BuyInType.Normal))
    },
    actionCancelBuyIn: function () {
        var a = this.getTableModel();
        a.getCurrentBuyin().isActive() && a.hasLocalPlayer() && (a.getCurrentBuyin().setBuyinState(pokerapp.BuyinState.cancelled), a.getLocalPlayer().seatState === pokerapp.SeatState.Reserved && (this._tableSessionData.clearLocalPlayerPosition(), this.sendPlayerCancelBuyIn()));
        this.sendPlayerUpdateState()
    },
    actionCancelRebuy: function (a) {
        var b = this.getTableModel();
        b.getCurrentBuyin().isActive() && (b.getCurrentBuyin().setBuyinState(pokerapp.BuyinState.cancelled),
            a && (this.doAction(pokerapp.PokerPlayerActions.Client_CancelRebuy), b.clearTableMessage(pokerapp.TableMessageId.RebuyStatus)))
    },
    actionCancelAddon: function () {
        var a = this.getTableModel();
        a.getCurrentBuyin().isActive() && (a.getCurrentBuyin().setBuyinState(pokerapp.BuyinState.cancelled), this.doAction(pokerapp.PokerPlayerActions.Client_CancelRebuy))
    },
    actionPlayerCall: function () {
        this.doAction(pokerapp.PokerPlayerActions.Call)
    },
    actionPlayerCheck: function () {
        this.doAction(pokerapp.PokerPlayerActions.Check)
    },
    actionPlayerFold: function () {
        this.doAction(pokerapp.PokerPlayerActions.Fold)
    },
    actionPlayerBet: function (a) {
        this.doAction(pokerapp.PokerPlayerActions.Bet, a)
    },
    actionPlayerRaise: function (a) {
        this.doAction(pokerapp.PokerPlayerActions.Raise, a)
    },
    actionPlayerAllIn: function () {
        this.doAction(pokerapp.PokerPlayerActions.AllIn)
    },
    actionPlayerSitOut: function () {
        this.doAction(pokerapp.PokerPlayerActions.SitOut)
    },
    actionPlayerSitIn: function () {
        this.doAction(pokerapp.PokerPlayerActions.SitIn)
    },
    actionPlayerWaitBB: function () {
        this.doAction(pokerapp.PokerPlayerActions.WaitBB)
    },
    actionPlayerMuckCards: function () {
        this.doAction(pokerapp.PokerPlayerActions.Client_Muck)
    },
    actionPlayerShowCards: function () {
        this.doAction(pokerapp.PokerPlayerActions.Client_ShowCards)
    },
    actionLeaveTable: function () {
        this.executeGameCommand(new pokerapp.PokerLeaveTableCmd)
    },
    actionPlayerPostSB: function () {
        this.doAction(pokerapp.PokerPlayerActions.PostSB)
    },
    actionPlayerPostBB: function () {
        this.doAction(pokerapp.PokerPlayerActions.PostBB)
    },
    actionPlayerPostDB: function () {
        this.doAction(pokerapp.PokerPlayerActions.PostDB)
    },
    actionPlayerPostAnte: function () {
        this.doAction(pokerapp.PokerPlayerActions.PostAnte)
    },
    actionLeaveTable: function () {
        this._leaveTableCommandSent = !0;
        this.executeGameCommand(new pokerapp.PokerLeaveTableCmd)
    },
    actionAcceptRematch: function () {
        this.doAction(pokerapp.PokerPlayerActions.Client_AcceptRematch)
    },
    actionDeclineRematch: function () {
        this.doAction(pokerapp.PokerPlayerActions.Client_DeclineRematch)
    },
    confirmRebuyCancelYes: function () {
        this.closeGame(!1, "", 1)
    },
    confirmCancelRebuyAction: function () {
        var a = pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_RebuyRemoveFromTournament),
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_OptionYes),
            c = pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_OptionNo),
            d = _.bind(this.confirmRebuyCancelYes, this),
            a = new pokerapp.ConfirmPopup(a, "", b, c, d, function () {});
        jui.PopupManager.getInstance().showPopup(a)
    },
    confirmReEnterYesAction: function () {
        this._netSession.clearSessionId();
        this._reopenAfterClose = !0;
        this.closeGame(!1, "", 1)
    },
    confirmReEnterNoAction: function () {
        this.setActionRequired(!1);
        this.closeGame(!1, "", 1)
    },
    confirmReEntryAction: function () {
        var a = this.getGameHeader().tournamentId,
            a = pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_ReEntryConfirm) + "#" + a,
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_OptionYes),
            c = pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_OptionNo),
            d = _.bind(this.confirmReEnterYesAction, this),
            f = _.bind(this.confirmReEnterNoAction, this),
            a = new pokerapp.ConfirmPopup(a, "", b, c, d, f, !1);
        jui.PopupManager.getInstance().showPopup(a)
    },
    confirmRematchYesAction: function () {
        this.actionAcceptRematch();
        this.setActionRequired(!1);
        this.closeGame(!1, "", 15)
    },
    confirmRematchNoAction: function () {
        this.actionDeclineRematch();
        this.setActionRequired(!1);
        this.closeGame(!1, "", 7)
    },
    confirmRematchAction: function () {
        this.getGameHeader();
        var a = pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_OptionYes),
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_OptionNo),
            c = _.bind(this.confirmRematchYesAction, this),
            d = _.bind(this.confirmRematchNoAction, this),
            a = new pokerapp.ConfirmPopup("Rematch Available! Select Yes if you'd like to play this opponent again!",
                "", a, b, c, d, !1);
        jui.PopupManager.getInstance().showPopup(a)
    },
    confirmLeaveTableYes: function () {
        this.closeGame(!1, "", 1)
    },
    leaveTableAfterCardsDealtPopup: function () {
        var a = pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_LeaveAfterCardDealt),
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_OptionYes),
            c = pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_OptionNo),
            d = _.bind(this.confirmLeaveTableYes, this),
            a = new pokerapp.ConfirmPopup(a, "", b, c, d, function () {});
        jui.PopupManager.getInstance().showPopup(a)
    },
    hasCardsDealt: function () {
        var a = this.getTableModel().getLocalPlayer();
        if (jcore.util.isNull(a)) return !1;
        a = a.getCards();
        a = this.getTableModel().getLocalPlayer().getCards();
        return jcore.util.isNotNull(a) && jcore.util.safeIndex(a, 0) ? !0 : !1
    },
    setActivePreAction: function (a, b, c) {
        var d = this.getTableModel();
        b && b instanceof pokerapp.Money && (b = b.amount);
        if (c) {
            switch (a) {
            case pokerapp.PokerPlayerPreActions.Raise:
            case pokerapp.PokerPlayerPreActions.Bet:
            case pokerapp.PokerPlayerPreActions.BetRaiseAllIn:
                d.preActionBetAmount =
                    b;
                break;
            case pokerapp.PokerPlayerPreActions.Call:
            case pokerapp.PokerPlayerPreActions.CallAllIn:
                d.preActionCallAmount = b
            }
            d.activePreAction = a
        } else d.activePreAction = pokerapp.PokerPlayerPreActions.None;
        this.determineValidPreActions(d.getCurrentTurn());
        this.determinePreActionStates();
        this.playSound(pokerapp.SoundId.CLICK)
    },
    doAction: function (a, b, c) {
        c = this.getTableModel();
        var d = !0,
            f = !1;
        if (!this.validatePlayerAction(a))
            if (a === pokerapp.PokerPlayerActions.Client_Rebuy) {
                if (!c.waitForRebuy && !c.allowRebuy && !c.allowAddon) return !1
            } else if (a ===
            pokerapp.PokerPlayerActions.Client_CancelRebuy) {
            if (!c.waitForRebuy) return !1
        } else return jcore.log.info("Invalid action attempted! - " + a), !1;
        jcore.util.isNotNull(b) && b instanceof pokerapp.Money && (b = b.amount);
        switch (a) {
        case pokerapp.PokerPlayerActions.SitIn:
            this.executeGameCommand(new pokerapp.PokerSitInCmd);
            this.executeGameCommand(new pokerapp.PokerUpdateStateCmd);
            d = !1;
            this._userClickedSitOut && (this._userClickedSitOut = !1);
            break;
        case pokerapp.PokerPlayerActions.SitOut:
            this.executeGameCommand(new pokerapp.PokerSitOutCmd);
            this.executeGameCommand(new pokerapp.PokerUpdateStateCmd);
            d = !1;
            break;
        case pokerapp.PokerPlayerActions.Fold:
            this.executeGameCommand(new pokerapp.PokerFoldCmd);
            c.folded = !0;
            a = this.getMe();
            a.foldedCards = [].concat(a.playerCards);
            break;
        case pokerapp.PokerPlayerActions.Call:
            this.executeGameCommand(new pokerapp.PokerCallCmd);
            break;
        case pokerapp.PokerPlayerActions.Check:
            this.executeGameCommand(new pokerapp.PokerCheckCmd);
            break;
        case pokerapp.PokerPlayerActions.PostAnte:
            this.executeGameCommand(new pokerapp.PokerPostAnteCmd(Math.min(c.getCurrentTurn().maximumBetAmount,
                c.getCurrentTurn().raiseBetAmount)));
            d = !1;
            c.postedAnti = !0;
            break;
        case pokerapp.PokerPlayerActions.PostDB:
            this.executeGameCommand(new pokerapp.PokerPostDBCmd(Math.min(c.getCurrentTurn().maximumBetAmount, c.getCurrentTurn().raiseBetAmount)));
            d = !1;
            f = !0;
            c.postedDB = !0;
            this.getInstanceOptions().alwaysWaitBBFirstTime = !1;
            break;
        case pokerapp.PokerPlayerActions.PostBB:
            this.executeGameCommand(new pokerapp.PokerPostBBCmd(Math.min(c.getCurrentTurn().maximumBetAmount, c.getCurrentTurn().raiseBetAmount)));
            d = !1;
            f = !0;
            c.postedBB = !0;
            this.getInstanceOptions().alwaysWaitBBFirstTime = !1;
            break;
        case pokerapp.PokerPlayerActions.PostSB:
            this.executeGameCommand(new pokerapp.PokerPostSBCmd(Math.min(c.getCurrentTurn().maximumBetAmount, c.getCurrentTurn().raiseBetAmount)));
            d = !1;
            f = !0;
            c.postedSB = !0;
            this.getInstanceOptions().alwaysWaitBBFirstTime = !1;
            break;
        case pokerapp.PokerPlayerActions.WaitBB:
            this.executeGameCommand(new pokerapp.PokerWaitBBCmd);
            d = !1;
            f = !0;
            c.waitingBB = !0;
            break;
        case pokerapp.PokerPlayerActions.Raise:
            this.executeGameCommand(new pokerapp.PokerRaiseCmd(this.validatePlayerBet(b)));
            a = this.getMe();
            c.isAllIn = null != a ? a.getChipStack() == b : !1;
            break;
        case pokerapp.PokerPlayerActions.Bet:
            this.executeGameCommand(new pokerapp.PokerBetCmd(this.validatePlayerBet(b)));
            a = this.getMe();
            c.isAllIn = null != a ? a.getChipStack() == b : !1;
            break;
        case pokerapp.PokerPlayerActions.Client_BetOrRaiseAllIn:
        case pokerapp.PokerPlayerActions.AllIn:
            this.executeGameCommand(new pokerapp.PokerAllInCmd);
            c.isAllIn = !0;
            break;
        case pokerapp.PokerPlayerActions.Client_Muck:
            this.executeGameCommand(new pokerapp.PokerMuckCardsCmd);
            break;
        case pokerapp.PokerPlayerActions.Client_ShowCards:
            this.executeGameCommand(new pokerapp.PokerShowCardsCmd);
            break;
        case pokerapp.PokerPlayerActions.Client_AlwaysMuck:
            this.getInstanceOptions().autoMuck = !0;
            this.executeGameCommand(new pokerapp.PokerMuckCardsCmd);
            break;
        case pokerapp.PokerPlayerActions.Client_CancelRebuy:
            this.confirmCancelRebuyAction();
            break;
        case pokerapp.PokerPlayerActions.Client_Rebuy:
            this.beginRebuy();
            this.sendPlayerUpdateState();
            break;
        case pokerapp.PokerPlayerActions.Client_PlayNow:
            this.executeGameCommand(new pokerapp.PokerSitInCmd);
            this.executeGameCommand(new pokerapp.PokerUpdateStateCmd);
            c.waitingBB = !1;
            this.getInstanceOptions().alwaysWaitBBFirstTime = !1;
            break;
        case pokerapp.PokerPlayerActions.Client_AcceptRematch:
            this.executeGameCommand(new pokerapp.PokerAcceptRematchCmd);
            break;
        case pokerapp.PokerPlayerActions.Client_DeclineRematch:
            this.executeGameCommand(new pokerapp.PokerDeclineRematchCmd);
            break;
        case pokerapp.PokerPlayerActions.Client_RematchSupported:
            this.executeGameCommand(new pokerapp.PokerRematchSupportedCmd)
        }
        d && (c.madeActionThisRound = !0, c.madeActionThisTurn = !0, this.setActionCompleted());
        f && (c.madeActionThisTurn = !0, this.setActionCompleted());
        this.determineActionStates()
    },
    validatePlayerAction: function (a) {
        var b = this.getTableModel();
        if (a == pokerapp.PokerPlayerActions.SitIn) {
            if (b.isTournament() && b.isSittingOut() || b.isSeatAssigned() && b.isSittingOut()) return !0
        } else {
            if (a == pokerapp.PokerPlayerActions.SitOut && b.isSeatAssigned() || b.isSeatAssigned() && (a == pokerapp.PokerPlayerActions.Client_AlwaysMuck || a == pokerapp.PokerPlayerActions.Client_Muck ||
                    a == pokerapp.PokerPlayerActions.Client_ShowCards)) return !0;
            if (a == pokerapp.PokerPlayerActions.Client_JoinWaitList) return b.isSeatAssigned() ? !1 : !0;
            if (a == pokerapp.PokerPlayerActions.Client_UnJoinWaitList) return !0;
            if (a == pokerapp.PokerPlayerActions.Client_CancelRebuy || a == pokerapp.PokerPlayerActions.Client_Rebuy) return !b.isTournament() || !b.isSeatAssigned() ? !1 : b.waitForRebuy;
            if (a == pokerapp.PokerPlayerActions.Client_RematchSupported || a == pokerapp.PokerPlayerActions.Client_AcceptRematch || a == pokerapp.PokerPlayerActions.Client_DeclineRematch) return !0;
            if (a == pokerapp.PokerPlayerActions.Client_PlayNow) return b.isTournament() || !b.isSeatAssigned() || this.getMe().seatState != pokerapp.SeatState.WaitBB ? !1 : !0;
            if (a == pokerapp.PokerPlayerActions.Client_BetOrRaiseAllIn && b.hasCurrentTurn() && b.getCurrentTurn().containsAvailableAction(pokerapp.PokerPlayerActions.AllIn)) return !0
        }
        return !b.hasCurrentTurn() || !b.getCurrentTurn().containsAvailableAction(a) || !b.isMyTurn() ? !1 : !0
    },
    validatePlayerBet: function (a) {
        a = jcore.util.toDecimal(a);
        return this.getTableModel().isFractionalBetAllowed() ?
            parseFloat(a.toFixed(2)) : Math.floor(a)
    },
    isValidAction: function (a) {
        var b = this.getTableModel();
        return null == b.getCurrentTurn() ? !1 : b.getCurrentTurn().containsAvailableAction(a)
    },
    isValidPreAction: function (a) {
        var b = this.getTableModel();
        return null == b.getCurrentTurn() ? !1 : b.containsAvailablePreAction(a)
    },
    determineActionStates: function () {
        var a = this.getTableModel(),
            b = new pokerapp.ActionStateCollection(_.bind(this.validatePlayerAction, this));
        try {
            var c = this.getMe();
            if (null == c) a.isTournament();
            else if (c.seatState ==
                pokerapp.SeatState.SitOut) c.hasChips() && b.enable(pokerapp.ActionStateIndex.Three, pokerapp.PokerPlayerActions.SitIn);
            else if (c.seatState == pokerapp.SeatState.WaitBB) b.enable(pokerapp.ActionStateIndex.Three, pokerapp.PokerPlayerActions.Client_PlayNow);
            else if (c.isPlayersTurn() && !a.madeActionThisTurn) {
                !b.enableAndValidate(pokerapp.ActionStateIndex.One, pokerapp.PokerPlayerActions.Fold) && this.isValidAction(pokerapp.PokerPlayerActions.SitOut) && b.enableAndValidate(pokerapp.ActionStateIndex.One, pokerapp.PokerPlayerActions.SitOut);
                var d = new pokerapp.Money(a.getDisplayCurrency(), Math.min(a.getCurrentTurn().maximumBetAmount, a.getCurrentTurn().raiseBetAmount)),
                    f = new pokerapp.Money(a.getDisplayCurrency(), a.getCurrentTurn().callBetAmount - c.getCurrentBet()),
                    g = b.enableAndValidate(pokerapp.ActionStateIndex.Two, pokerapp.PokerPlayerActions.Check);
                g || (g = b.enable(pokerapp.ActionStateIndex.Two, pokerapp.PokerPlayerActions.Call, f, !0));
                if (!g) {
                    var h = !a.waitingBB && b.enableAndValidate(pokerapp.ActionStateIndex.Two, pokerapp.PokerPlayerActions.WaitBB) ?
                        pokerapp.ActionStateIndex.Three : pokerapp.ActionStateIndex.Two;
                    !a.postedSB && b.enable(h, pokerapp.PokerPlayerActions.PostSB, d, !0) || !a.postedBB && b.enable(h, pokerapp.PokerPlayerActions.PostBB, d, !0) || !a.postedDB && b.enable(h, pokerapp.PokerPlayerActions.PostDB, d, !0)
                }
                this.determineBetActionState(b)
            } else a.waitForRebuy && (b.enableAndValidate(pokerapp.ActionStateIndex.One, pokerapp.PokerPlayerActions.Client_CancelRebuy), b.enableAndValidate(pokerapp.ActionStateIndex.Three, pokerapp.PokerPlayerActions.Client_Rebuy))
        } finally {
            a.updateActionStates(b)
        }
    },
    determineBetActionState: function (a) {
        var b = this.getTableModel(),
            c = b.getCurrentTurn(),
            d = b.getDisplayCurrency();
        jcore.util.isNull(a) && (a = b.getActionStates());
        return !b.isMyTurn() || b.madeActionThisTurn ? !1 : !b.isTournament() && this.getGameHeader().limitType == pokerapp.PokerLimitType.NoLimit && this.getGameHeader().isFoldOrAllIn && a.enable(pokerapp.ActionStateIndex.Three, pokerapp.PokerPlayerActions.AllIn, new pokerapp.Money(d, this.validatePlayerBet(c.maximumBetAmount - c.previousBetAmount)), !0) ? !0 : c.currentBetAmount ==
            c.maximumBetAmount && a.enable(pokerapp.ActionStateIndex.Three, pokerapp.PokerPlayerActions.Client_BetOrRaiseAllIn, new pokerapp.Money(d, c.maximumBetAmount - c.previousBetAmount), !0) ? (a.clearAction(pokerapp.ActionStateIndex.Two), !0) : a.enable(pokerapp.ActionStateIndex.Three, pokerapp.PokerPlayerActions.Bet, new pokerapp.Money(d, this.validatePlayerBet(Math.max(c.minimumBetAmount, c.currentBetAmount))), !0) || a.enable(pokerapp.ActionStateIndex.Three, pokerapp.PokerPlayerActions.Raise, new pokerapp.Money(d, this.validatePlayerBet(Math.max(c.raiseBetAmount,
                c.currentBetAmount))), !0) || a.enable(pokerapp.ActionStateIndex.Three, pokerapp.PokerPlayerActions.AllIn, new pokerapp.Money(d, this.validatePlayerBet(c.maximumBetAmount - c.previousBetAmount)), !0) ? !0 : !1
    },
    determineValidPreActions: function (a) {
        var b = this.getGameHeader(),
            c = this.getTableModel(),
            d = this.getMe(),
            f = [];
        c.clearAvailablePreActions();
        if (!(null == a || null == d || c.folded || !d.hasCards()) && !c.showDown && !c.isAllIn) {
            if (b.limitType === pokerapp.PokerLimitType.NoLimit && !c.isTournament() && b.isFoldOrAllIn) f.push(pokerapp.PokerPlayerPreActions.FoldToAnyBet),
                0 < d.playerStack && f.push(pokerapp.PokerPlayerPreActions.AllIn);
            else if (b.limitType === pokerapp.PokerLimitType.NoLimit || b.limitType === pokerapp.PokerLimitType.PotLimit) f.push(pokerapp.PokerPlayerPreActions.FoldToAnyBet), a.currentBetAmount == d.playerBet ? (f.push(pokerapp.PokerPlayerPreActions.Check), f.push(pokerapp.PokerPlayerPreActions.CheckFold), c.postedBB && !c.flopped ? a.raiseBetAmount >= d.playerStack + d.playerBet ? f.push(pokerapp.PokerPlayerPreActions.BetRaiseAllIn) : d.playerBet < a.raiseBetAmount && a.raiseBetAmount <
                d.playerStack + d.playerBet && f.push(pokerapp.PokerPlayerPreActions.Raise) : c.flopped && (a.raiseBetAmount >= d.Money + d.playerBet ? f.push(pokerapp.PokerPlayerPreActions.BetRaiseAllIn) : f.push(pokerapp.PokerPlayerPreActions.Bet))) : a.currentBetAmount > d.playerBet && (d.playerBet < a.currentBetAmount && (d.playerStack + d.playerBet <= a.currentBetAmount ? f.push(pokerapp.PokerPlayerPreActions.CallAllIn) : f.push(pokerapp.PokerPlayerPreActions.Call)), 2 * (a.previousBetAmount - d.playerBet) > a.raiseIncrementAmount - a.previousBetAmount &&
                (a.raiseBetAmount >= d.playerStack + d.playerBet ? f.push(pokerapp.PokerPlayerPreActions.BetRaiseAllIn) : (d.playerBet < a.currentBetAmount && d.playerBet < a.raiseBetAmount && a.raiseBetAmount < d.playerStack + d.playerBet || d.playerBet == a.currentBetAmount && !c.madeActionThisRound) && f.push(pokerapp.PokerPlayerPreActions.Raise)));
            else if (b.limitType === pokerapp.PokerLimitType.FixedLimit)
                if (d.playerBet == a.currentBetAmount && !c.madeActionThisRound ? (f.push(pokerapp.PokerPlayerPreActions.Check), f.push(pokerapp.PokerPlayerPreActions.CheckFold),
                        f.push(pokerapp.PokerPlayerPreActions.CheckCallAny)) : d.playerBet < a.currentBetAmount && (f.push(pokerapp.PokerPlayerPreActions.Fold), a.currentBetAmount > d.playerStack ? f.push(pokerapp.PokerPlayerPreActions.CallAllIn) : (f.push(pokerapp.PokerPlayerPreActions.Call), f.push(pokerapp.PokerPlayerPreActions.CallAny))), 0 == a.currentBetAmount && !c.madeActionThisRound) a.raiseBetAmount > d.playerStack && 3 > a.raiseCount ? f.push(pokerapp.PokerPlayerPreActions.BetRaiseAllIn) : (f.push(pokerapp.PokerPlayerPreActions.Bet), f.push(pokerapp.PokerPlayerPreActions.BetRaiseAny));
                else if (d.playerBet < a.raiseBetAmount && d.playerBet < a.currentBetAmount && (3 > a.raiseCount || !c.madeActionThisRound)) f.push(pokerapp.PokerPlayerPreActions.RaiseAny), f.push(pokerapp.PokerPlayerPreActions.Raise);
            c.updateAvailablePreActions(f)
        }
    },
    determinePreActionStates: function () {
        var a = this.getTableModel(),
            b = a.getCurrentTurn(),
            c = a.getDisplayCurrency(),
            d = this.getMe(),
            f = new pokerapp.PreActionStateCollection;
        try {
            null == d || (!a.isInHand() || a.folded || a.isAllIn || a.showDown || !d.hasCards() || null == b) || (d.seatState >
                pokerapp.SeatState.WaitBB && f.enable(pokerapp.PreActionStateIndex.One, pokerapp.PokerPlayerPreActions.FoldToAnyBet), a.isMyTurn() || (a.limitType == pokerapp.PokerLimitType.NoLimit && !a.isTournament() && a.isFoldOrAllIn ? (a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.AllIn) || a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.CallAllIn)) && f.enable(pokerapp.PreActionStateIndex.Three, pokerapp.PokerPlayerPreActions.AllIn, new pokerapp.Money(c, d.playerStack)) : a.limitType == pokerapp.PokerLimitType.NoLimit ||
                    a.limitType == pokerapp.PokerLimitType.PotLimit ? (a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.Check) ? (f.enable(pokerapp.PreActionStateIndex.Two, pokerapp.PokerPlayerPreActions.Check), a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.CheckFold) && f.enable(pokerapp.PreActionStateIndex.Five, pokerapp.PokerPlayerPreActions.CheckFold)) : a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.CallAllIn) ? f.enable(pokerapp.PreActionStateIndex.Two, pokerapp.PokerPlayerPreActions.CallAllIn,
                            new pokerapp.Money(c, d.playerStack)) : a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.Call) && f.enable(pokerapp.PreActionStateIndex.Two, pokerapp.PokerPlayerPreActions.Call, new pokerapp.Money(c, b.currentBetAmount - d.playerBet)), a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.BetRaiseAllIn) && !a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.CallAllIn) ? f.enable(pokerapp.PreActionStateIndex.Three, pokerapp.PokerPlayerPreActions.BetRaiseAllIn, new pokerapp.Money(c, d.playerStack)) :
                        a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.Bet) ? f.enable(pokerapp.PreActionStateIndex.Three, pokerapp.PokerPlayerPreActions.Bet, new pokerapp.Money(c, b.raiseBetAmount)) : a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.Raise) && (a.activePreAction == pokerapp.PokerPlayerPreActions.Raise && b.raiseBetAmount != a.preActionBetAmount && (a.activePreAction = pokerapp.PokerPlayerPreActions.None), f.enable(pokerapp.PreActionStateIndex.Three, pokerapp.PokerPlayerPreActions.Raise, new pokerapp.Money(c,
                            b.raiseBetAmount)))) : a.limitType == pokerapp.PokerLimitType.FixedLimit && (a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.Fold) ? (a.activePreAction == pokerapp.PokerPlayerPreActions.CheckFold && (a.activePreAction = pokerapp.PokerPlayerPreActions.Fold), f.enable(pokerapp.PreActionStateIndex.Four, pokerapp.PokerPlayerPreActions.Fold)) : a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.CheckFold) && f.enable(pokerapp.PreActionStateIndex.Four, pokerapp.PokerPlayerPreActions.CheckFold), a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.Check) ?
                        f.enable(pokerapp.PreActionStateIndex.Five, pokerapp.PokerPlayerPreActions.Check) : a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.CallAllIn) ? f.enable(pokerapp.PreActionStateIndex.Five, pokerapp.PokerPlayerPreActions.CallAllIn, new pokerapp.Money(c, d.playerStack - d.playerBet)) : a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.Call) && (a.activePreAction == pokerapp.PokerPlayerPreActions.Call && b.currentBetAmount - d.playerBet != a.preActionCallAmount && (a.activePreAction = pokerapp.PokerPlayerPreActions.None),
                            f.enable(pokerapp.PreActionStateIndex.Five, pokerapp.PokerPlayerPreActions.Call, new pokerapp.Money(c, b.currentBetAmount - d.playerBet))), a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.Bet) ? (a.activePreAction == PreActions.Bet && b.raiseBetAmount != a.preActionBetAmount && (a.activePreAction = pokerapp.PokerPlayerPreActions.None), f.enable(pokerapp.PreActionStateIndex.Six, pokerapp.PokerPlayerPreActions.Bet, new pokerapp.Money(c, b.raiseBetAmount))) : a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.BetRaiseAllIn) ?
                        f.enable(pokerapp.PreActionStateIndex.Six, pokerapp.PokerPlayerPreActions.BetRaiseAllIn, new pokerapp.Money(c, b.raiseBetAmount)) : a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.Raise) && (a.activePreAction == PreActions.Raise && b.raiseBetAmount != a.preActionBetAmount && (a.activePreAction = pokerapp.PokerPlayerPreActions.None), f.enable(pokerapp.PreActionStateIndex.Six, pokerapp.PokerPlayerPreActions.Raise, new pokerapp.Money(c, b.raiseBetAmount))), a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.RaiseAny) ?
                        (a.activePreAction == pokerapp.PokerPlayerPreActions.BetRaiseAny && (a.activePreAction = pokerapp.PokerPlayerPreActions.RaiseAny), f.enable(pokerapp.PreActionStateIndex.Three, pokerapp.PokerPlayerPreActions.RaiseAny)) : a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.BetRaiseAny) && f.enable(pokerapp.PreActionStateIndex.Three, pokerapp.PokerPlayerPreActions.BetRaiseAny), a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.CallAny) ? (a.activePreAction == pokerapp.PokerPlayerPreActions.CheckCallAny &&
                            (a.activePreAction = pokerapp.PokerPlayerPreActions.CallAny), f.enable(pokerapp.PreActionStateIndex.Two, pokerapp.PokerPlayerPreActions.CallAny)) : a.containsAvailablePreAction(pokerapp.PokerPlayerPreActions.CheckCallAny) && f.enable(pokerapp.PreActionStateIndex.Two, pokerapp.PokerPlayerPreActions.CheckCallAny))))
        } finally {
            a.updatePreActionStates(f)
        }
    },
    executeGameCommand: function (a) {
        if (a instanceof pokerapp.PokerRequestSeatCmd) {
            a = a.getSeatPosition();
            var b = this.getTableModel();
            if (!b.isSeatAssigned() && !b.getCurrentBuyin().isActive()) {
                this.getInstanceOptions().sitOutOnNextHand = !1;
                var c = pokerapp.LobbyService.getInstance().getSessionId().toString();
                b.getCurrentBuyin().setBuyinState(pokerapp.BuyinState.none);
                this.sendPlayerRequestSeat(a, c)
            }
            this.sendPlayerUpdateState()
        } else !(a instanceof pokerapp.PokerBuyInCmd) && !(a instanceof pokerapp.PokerCancelBuyInCmd) && (a instanceof pokerapp.PokerCancelRequestSeatCmd ? this.sendPlayerCancelRequestSeat() : a instanceof pokerapp.PokerCallCmd ? this.sendPlayerCall() : a instanceof pokerapp.PokerCheckCmd ? this.sendPlayerCheck() : a instanceof pokerapp.PokerBetCmd ?
            this.sendPlayerBet(a.getAmount()) : a instanceof pokerapp.PokerRaiseCmd ? this.sendPlayerRaise(a.getAmount()) : a instanceof pokerapp.PokerAllInCmd ? this.sendPlayerAllIn() : a instanceof pokerapp.PokerFoldCmd ? this.sendPlayerFold() : a instanceof pokerapp.PokerSitOutCmd ? this.sendPlayerSitOut() : a instanceof pokerapp.PokerSitOutNextHandCmd ? (this._userClickedSitOut = a.isSitOut, this.sendPlayerSitOutNextHand(a.isSitOut), this.sendPlayerUpdateState()) : a instanceof pokerapp.PokerSitInCmd ? (this.getInstanceOptions().sitOutOnNextHand = !1, this.sendPlayerSitIn()) : a instanceof pokerapp.PokerMuckCardsCmd ? this.sendPlayerMuckCards() : a instanceof pokerapp.PokerShowCardsCmd ? this.sendPlayerShowCards() : a instanceof pokerapp.PokerLeaveTableCmd ? this.sendPlayerLeaveTable() : a instanceof pokerapp.PokerPlayerChatCmd ? this.sendPlayerChatMessage(a.getMessage()) : a instanceof pokerapp.PokerUpdateStateCmd ? this.sendPlayerUpdateState() : a instanceof pokerapp.PokerRebuyCmd ? this.sendPlayerRebuy(a.getMultiple()) : a instanceof pokerapp.PokerAddonCmd ? this.sendPlayerAddon(a.getMultiple()) :
            a instanceof pokerapp.PokerCancelRebuyCmd ? this.sendPlayerCancelRebuy() : !(a instanceof pokerapp.PokerWaitBBCmd) && !(a instanceof pokerapp.PokerDisconnectCmd) && (a instanceof pokerapp.PokerAcceptRematchCmd ? this.sendPlayerAcceptRematch() : a instanceof pokerapp.PokerDeclineRematchCmd ? this.sendPlayerDeclineRematch() : a instanceof pokerapp.PokerRematchSupportedCmd && (console.log("sending rematch supported"), this.sendPlayerRematchSupported())))
    },
    _resetAllTableState: function () {
        var a = this.getTableModel();
        a.resetForNewHand();
        a.resetAllTurnState();
        this.setActionRequired(!1);
        this.determineActionStates();
        this.determinePreActionStates()
    },
    _resetAllTurnState: function () {
        this.getTableModel().resetAllTurnState();
        this.setActionRequired(!1)
    },
    setActionRequired: function (a, b, c) {
        a ? (a = jcore.util.orDefault(b, 0) + jcore.util.orDefault(c, 0), pokerapp.ActionRequiredManager.getInstance().actionRequiredBy(this, a)) : pokerapp.ActionRequiredManager.getInstance().cancelActionRequiredBy(this, !1)
    },
    setActionCompleted: function () {
        pokerapp.ActionRequiredManager.getInstance().cancelActionRequiredBy(this,
            !0)
    },
    _joinGame: function () {
        if (!this.isTableSessionValid()) {
            var a = this;
            pokerapp.LobbyService.getInstance().joinGame(this.getGameHeader()).asPromise().then(function (b) {
                (b.isError() || !a.isTableSessionValid()) && a._onGameError("Unable to join table")
            }).catch(function (b) {
                a._onGameError(b ? b.message : "Unable to join table, please try again.")
            })
        }
        this._stateMachine.transitionToState(pokerapp.PokerGameState.GAME_JOINING_TABLE)
    },
    retryConnectGame: function () {
        this._enableReconnect = !0;
        this._reconnectCount = 0;
        this._connectGame()
    },
    _connectGame: function () {
        this.isTableSessionValid() ? (this._netSession.isConnected() || this._netSession.connect(), this._stateMachine.transitionToState(pokerapp.PokerGameState.GAME_CONNECTING)) : this._onGameError("Invalid Session")
    },
    _onConnectedChanged: function (a) {
        if (!(null == this._netSession || this._netSession != a)) {
            if (this._netSession.isConnected()) {
                this._reconnectCount = 0;
                a = jcore.util.orDefault(this.getGameHeader().host, "");
                var b = jcore.util.orDefault(this.getGameHeader().port, 0);
                if ("" == a || 0 == b) return this._enableReconnect = !1, this._onGameError("Host-Port Invalid"), !1;
                b = jcore.util.toNumber(b) + 100;
                a = pokerapp.NetMsgFactory.newConnectViaProxy(this._netSession, a, b);
                this._netSession.sendNetMsg(a)
            } else this._netSession.isError() ? (this._reconnectCount += 1, (this._enableReconnect = this._enableReconnect && 5 > this._reconnectCount) ? this._stateMachine.transitionToState(pokerapp.PokerGameState.GAME_JOINING_TABLE, 1 < this._reconnectCount ? 10 : 5) : this._stateMachine.transitionToState(pokerapp.PokerGameState.GAME_CONNECTING_WAIT)) : (this._reconnectCount +=
                1, this._enableReconnect = this._enableReconnect && 5 > this._reconnectCount, a = this._stateMachine.getState(), b = this._stateMachine.getTargetState(), a != pokerapp.PokerGameState.GAME_ERROR && b != pokerapp.PokerGameState.GAME_ERROR && (this._enableReconnect ? this._stateMachine.transitionToState(pokerapp.PokerGameState.GAME_JOINING_TABLE, 1 < this._reconnectCount ? 10 : 5) : this._stateMachine.transitionToState(pokerapp.PokerGameState.GAME_CONNECTING_WAIT)));
            return !0
        }
    },
    isClosed: function () {
        return this._closed
    },
    closeGame: function (a,
        b, c) {
        if (this._closed) return !1;
        this._enableReconnect = !1;
        c = jcore.util.orDefault(c, 0);
        if (0 < c) {
            var d = this;
            setTimeout(function () {
                d.closeGame(a, b, 0)
            }, 1E3 * c)
        } else this._closed = !0, a && this._netSession.isConnected() ? this.sendPlayerLeaveTable() : this._netSession.close(), pokerapp.AudioService.getInstance().enableForSource(this, !1), this._stateMachine.transitionToState(pokerapp.PokerGameState.GAME_DISCONNECTED);
        return !0
    },
    _startQueryMuck: function () {
        var a = this.getTableModel(),
            b = new pokerapp.ActionStateCollection;
        b.enable(pokerapp.ActionStateIndex.Three, pokerapp.PokerPlayerActions.Client_Muck);
        b.enable(pokerapp.ActionStateIndex.Two, pokerapp.PokerPlayerActions.Client_ShowCards);
        b.enable(pokerapp.ActionStateIndex.One, pokerapp.PokerPlayerActions.Client_AlwaysMuck);
        a.updateActionStates(b);
        this.getInstanceOptions().autoMuck && this.doAction(pokerapp.PokerPlayerActions.Client_Muck)
    },
    _updateTableState: function (a, b) {
        this.getTableModel().updateFromState(a, b);
        this.determineActionStates();
        this.determinePreActionStates()
    },
    _updateTableSeatState: function (a) {
        var b = this.getTableModel().getSeat(a.getSeatPosition());
        null != b && b.updateFromState(a)
    },
    _updateTablePlayerTurnState: function (a) {
        var b = this.getTableModel();
        b.updatePlayerTurn(a);
        if (b.isSeatAssigned() && !b.isMyTurn()) {
            if (b.activePreAction === pokerapp.PokerPlayerPreActions.Call || b.activePreAction === pokerapp.PokerPlayerPreActions.Check) a.getCurrentBetAmount() > b.lastActionAmount && (b.activePreAction = pokerapp.PokerPlayerPreActions.None), b.lastActionAmount = a.getCurrentBetAmount(),
                b.lastRaiseAmount = a.getRaiseBetAmount();
            this.determineValidPreActions(b.getCurrentTurn());
            this.setActionRequired(!1)
        }
        this.determinePreActionStates();
        if (b.isMyTurn()) {
            if (!b.isTournament() && this.getInstanceOptions().sitOutOnNextBigBlind && this.isValidAction(pokerapp.PokerPlayerActions.PostBB)) {
                this.getInstanceOptions().sitOutOnNextHand = !0;
                this.getInstanceOptions().sitOutOnNextBigBlind = !1;
                this.getInstanceOptions().autoPostBlinds = !1;
                this.actionPlayerSitOut();
                return
            }
            if (this.isValidAction(pokerapp.PokerPlayerActions.WaitBB) &&
                this.getInstanceOptions().alwaysWaitBBFirstTime) {
                this.getInstanceOptions().alwaysWaitBBFirstTime = !1;
                this.actionPlayerWaitBB();
                return
            }
            if (b.isTournament() || this.getInstanceOptions().autoPostBlinds) {
                if (this.isValidAction(pokerapp.PokerPlayerActions.PostSB)) {
                    this.actionPlayerPostSB();
                    return
                }
                if (this.isValidAction(pokerapp.PokerPlayerActions.PostBB)) {
                    this.actionPlayerPostBB();
                    return
                }
                if (this.isValidAction(pokerapp.PokerPlayerActions.PostDB)) {
                    this.actionPlayerPostDB();
                    return
                }
                if (this.isValidAction(pokerapp.PokerPlayerActions.PostAnte)) {
                    this.actionPlayerPostAnte();
                    return
                }
            }
            var c = b.activePreAction;
            c !== pokerapp.PokerPlayerPreActions.FoldToAnyBet && (b.activePreAction = pokerapp.PokerPlayerPreActions.None);
            switch (c) {
            case pokerapp.PokerPlayerPreActions.Fold:
                this.isValidAction(pokerapp.PokerPlayerActions.Fold) && this.actionPlayerFold();
                break;
            case pokerapp.PokerPlayerPreActions.Check:
                this.isValidAction(pokerapp.PokerPlayerActions.Check) && this.actionPlayerCheck();
                break;
            case pokerapp.PokerPlayerPreActions.CheckCallAny:
                this.isValidAction(pokerapp.PokerPlayerActions.Check) ?
                    this.actionPlayerCheck() : this.isValidAction(pokerapp.PokerPlayerActions.Call) && this.actionPlayerCall();
                break;
            case pokerapp.PokerPlayerPreActions.CallAllIn:
                this.isValidAction(pokerapp.PokerPlayerActions.AllIn) && this.actionPlayerAllIn();
                break;
            case pokerapp.PokerPlayerPreActions.FoldToAnyBet:
                this.isValidAction(pokerapp.PokerPlayerActions.Check) ? this.actionPlayerCheck() : this.isValidAction(pokerapp.PokerPlayerActions.Fold) && this.actionPlayerFold();
                break;
            case pokerapp.PokerPlayerPreActions.CheckFold:
                this.isValidAction(pokerapp.PokerPlayerActions.Check) ?
                    this.actionPlayerCheck() : this.isValidAction(pokerapp.PokerPlayerActions.Fold) && this.actionPlayerFold();
                break;
            case pokerapp.PokerPlayerPreActions.Call:
                this.isValidAction(pokerapp.PokerPlayerActions.Call) && (c = this.getMe(), b.getCurrentTurn().currentBetAmount - c.playerBet == b.preActionCallAmount && this.actionPlayerCall());
                break;
            case pokerapp.PokerPlayerPreActions.CallAny:
                this.isValidAction(pokerapp.PokerPlayerActions.Call) && this.actionPlayerCall();
                break;
            case pokerapp.PokerPlayerPreActions.Bet:
                this.isValidAction(pokerapp.PokerPlayerActions.Bet) &&
                    b.getCurrentTurn().raiseBetAmount == b.preActionBetAmount && this.actionPlayerBet(b.getCurrentTurn().raiseBetAmount);
                break;
            case pokerapp.PokerPlayerPreActions.BetRaiseAllIn:
                this.isValidAction(pokerapp.PokerPlayerActions.AllIn) && this.actionPlayerAllIn();
                break;
            case pokerapp.PokerPlayerPreActions.Raise:
                this.isValidAction(pokerapp.PokerPlayerActions.Raise) && b.getCurrentTurn().raiseBetAmount == b.preActionBetAmount && this.actionPlayerRaise(b.getCurrentTurn().raiseBetAmount);
                break;
            case pokerapp.PokerPlayerPreActions.BetRaiseAny:
                this.isValidAction(pokerapp.PokerPlayerActions.Raise) ?
                    this.actionPlayerRaise(b.getCurrentTurn().raiseBetAmount) : this.isValidAction(pokerapp.PokerPlayerActions.Bet) && this.actionPlayerBet(b.getCurrentTurn().raiseBetAmount);
                break;
            case pokerapp.PokerPlayerPreActions.RaiseAny:
                this.isValidAction(pokerapp.PokerPlayerActions.Raise) && this.actionPlayerRaise(b.getCurrentTurn().raiseBetAmount);
                break;
            case pokerapp.PokerPlayerPreActions.AllIn:
                this.isValidAction(pokerapp.PokerPlayerActions.AllIn) && this.actionPlayerAllIn()
            }!b.madeActionThisTurn && 0 < a.getTimeoutSeconds() &&
                (this.setActionRequired(!0, a.getTimeoutSeconds(), a.getExtraTimeoutSeconds()), this.playSound(pokerapp.SoundId.TURN, pokerapp.SoundLevel.ALERT), pokerapp.BridgeLobbyService.getInstance().openGameViewFromLobby())
        }
        this.determinePreActionStates();
        this.determineActionStates()
    },
    _getBreakTypeText: function (a) {
        switch (a) {
        case pokerapp.BreakType.Rebuy:
            return pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_BreakRebuy);
        case pokerapp.BreakType.Addon:
            return pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_BreakAddon);
        case pokerapp.BreakType.RebuyAddon:
            return pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_BreakRebuyAddon);
        case pokerapp.BreakType.Sync:
            return pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_BreakSynchronized);
        case pokerapp.BreakType.Regular:
            return pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_BreakRegular)
        }
        return ""
    },
    _translateBreakStarting: function (a, b, c) {
        switch (b) {
        case pokerapp.BreakType.Rebuy:
        case pokerapp.BreakType.Addon:
        case pokerapp.BreakType.RebuyAddon:
            c =
                c ? pokerapp.TranslationId.GameMessage_BreakStartingFinalExtended : pokerapp.TranslationId.GameMessage_BreakStartingFinal;
            break;
        default:
            c = pokerapp.TranslationId.GameMessage_BreakStarting
        }
        b = this._getBreakTypeText(b);
        a = moment.duration(a, "seconds");
        this.getTableModel().getTableMessages().add(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(c, b, a.asMinutes() + ":00"))
    },
    _translateBreakStarted: function (a, b, c) {
        switch (b) {
        case pokerapp.BreakType.Rebuy:
        case pokerapp.BreakType.Addon:
        case pokerapp.BreakType.RebuyAddon:
            c =
                c ? pokerapp.TranslationId.GameMessage_BreakStartedFinalExtended : pokerapp.TranslationId.GameMessage_BreakStartedFinal;
            break;
        default:
            c = pokerapp.TranslationId.GameMessage_BreakStarted
        }
        b = this._getBreakTypeText(b);
        0 < a ? this.getTableModel().getTableMessages().add(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(c, b), a) : this.getTableModel().getTableMessages().add(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(c, b))
    },
    _onGameError: function (a) {
        this._receivedTableConnected = !1;
        a = jcore.util.orDefault(a, "");
        this.getTableModel().getCurrentBuyin().isActive() && this.getTableModel().getCurrentBuyin().setBuyinState(pokerapp.BuyinState.error);
        jcore.log.error(a);
        jcore.App.getInstance().showAlert("Sorry there was a problem, Please try again.\n\n" + a);
        this._stateMachine.transitionToState(pokerapp.PokerGameState.GAME_ERROR)
    },
    _onReceivedMsg: function (a, b) {
        var c = b.getMsgType();
        Object.keys(pokerapp.NetMsgTypes).find(function (a) {
            return pokerapp.NetMsgTypes[a] === c
        });
        try {
            switch (b.getMsgType()) {
            case pokerapp.NetMsgTypes.TableError:
                var d =
                    pokerapp.TableErrorCode.enumParseNameOrValue(b.getParameterAt(0).getValue()),
                    f = b.getParametersAsStrings(1),
                    g = this.getTableModel();
                d == pokerapp.TableErrorCode.SeatDenied ? (g.getCurrentBuyin().setBuyinState(pokerapp.BuyinState.error), this._tableSessionData.clearLocalPlayerPosition()) : d == pokerapp.TableErrorCode.InvalidBuyInAmount && (g.getCurrentBuyin().setBuyinState(pokerapp.BuyinState.error), g.getLocalPlayer().seatState === pokerapp.SeatState.Reserved && this._tableSessionData.clearLocalPlayerPosition());
                this._processTableError(d, f);
                break;
            case pokerapp.NetMsgTypes.TableHello:
                this.getGameHeader() instanceof pokerapp.RingGameHeader ? this.sendPlayerConnectRinggame() : this.sendPlayerConnectTournament();
                break;
            case pokerapp.NetMsgTypes.TableConnected:
                this._autoTakeSeat = this._receivedTableConnected = !0;
                var h = b.getParameterAt(9).toString();
                this._tableSessionData.updateFromValues(b.getParametersAsStrings());
                g = this.getTableModel();
                g.resetForNewHand(h);
                this._updateTableState(this._tableStateData, this._tableSessionData);
                this.getTableModel().addChatMessage(pokerapp.DealerChatType.ClientGenerated, ["Connected " + this._tableSessionData.getTableName()]);
                this.sendPlayerUpdateState();
                this.determineActionStates();
                this.determinePreActionStates();
                break;
            case pokerapp.NetMsgTypes.TableState:
                var m = new pokerapp.TableStateData;
                m.updateFromValues(b.getParametersAsStrings());
                this._tableStateData = m;
                this._updateTableState(this._tableStateData, this._tableSessionData);
                break;
            case pokerapp.NetMsgTypes.TableSeatState:
                for (var n = 0; n < b.getParameterCount(); n++) {
                    var p =
                        b.getParameterAt(n).toString().split("|"),
                        m = new pokerapp.TableSeatStateData;
                    m.updateFromValues(p);
                    this._updateTableSeatState(m)
                }
                g = this.getTableModel();
                g.refreshTotalPot();
                this.determineActionStates();
                this.determinePreActionStates();
                break;
            case pokerapp.NetMsgTypes.TablePlayerTurn:
                m = new pokerapp.TablePlayerTurnData;
                m.updateFromValues(b.getParametersAsStrings());
                this._updateTablePlayerTurnState(m);
                break;
            case pokerapp.NetMsgTypes.TablePlayerLeave:
                this._tableSessionData.clearLocalPlayerPosition();
                this.sendPlayerUpdateState();
                this.determineActionStates();
                this.determinePreActionStates();
                break;
            case pokerapp.NetMsgTypes.TableDisconnect:
                this._tableSessionData.clearLocalPlayerPosition();
                this.closeGame(!1, "", 1);
                break;
            case pokerapp.NetMsgTypes.TableHandStart:
                var u = b.getParameterAt(0).toString(),
                    g = this.getTableModel();
                g.clearTableMessage(pokerapp.TableMessageId.RebuyStatus);
                g.addChatMessage(pokerapp.DealerChatType.ClientGenerated, [String.format(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_DealerHand), u)]);
                g.resetForNewHand(u);
                g.handStarted = !0;
                g.waitForRebuy = !1;
                this.setActionRequired(!1);
                this.determineActionStates();
                this.determinePreActionStates();
                break;
            case pokerapp.NetMsgTypes.TableHandEnd:
                var v = b.getParameterAt(0).toString("");
                this.getTableModel().recordHandId(v);
                this._resetAllTableState();
                break;
            case pokerapp.NetMsgTypes.TableDealCards:
                g = this.getTableModel();
                g.handDealt = !0;
                break;
            case pokerapp.NetMsgTypes.TablePlayerShowCards:
                var x = b.getParameterAt(0).toInteger(pokerapp.Constants.INVALID_SEAT_POSITION),
                    y = pokerapp.ConvertUtil.toCards(b.getParameterAt(1).toString(), []);
                if ((g = this.getTableModel()) && g.hasPlayerAtSeat(x)) g.getPlayerAtSeat(x).playerCards = y;
                break;
            case pokerapp.NetMsgTypes.TablePlayerQueryMuck:
                this._startQueryMuck();
                break;
            case pokerapp.NetMsgTypes.TableShowDown:
                var z = b.getParameterAt(0).toInteger(-1),
                    t = b.getParameterAt(1).toDecimal(0),
                    A = [],
                    w = [],
                    p = b.getParameterAt(2).toString().split(";");
                _.each(p, function (a) {
                    A.push(pokerapp.PotWin.parse(a))
                });
                p = b.getParameterAt(3).toString().split(";");
                _.each(p, function (a) {
                    w.push(pokerapp.PotWin.parse(a))
                });
                var B = b.getParameterAt(4).toString();
                if ("" !== B) {
                    var F = [];
                    _.each(B.split(","), function (a) {
                        F = F.concat(a.split(" "))
                    });
                    B = F.join()
                }
                var C = new pokerapp.PotWinnersModel(z, t, A, w, B);
                this._resetAllTurnState();
                g = this.getTableModel();
                g.updateShowDownWinners(C);
                break;
            case pokerapp.NetMsgTypes.TableStartShowDown:
                this._resetAllTurnState();
                g = this.getTableModel();
                g.activePreAction = pokerapp.PokerPlayerPreActions.None;
                g.clearPreActionStates();
                p = b.getParameterAt(1).toString().split(",");
                1 < p.length && (g.showDown = !0);
                break;
            case pokerapp.NetMsgTypes.TableDealerChat:
                var D = pokerapp.DealerChatType.enumParseNameOrValue(b.getParameterAt(0).toString()),
                    E = b.getParametersAsStrings(1),
                    g = this.getTableModel();
                g.addChatMessage(D, E);
                this._processDealerChat(D, b);
                break;
            case pokerapp.NetMsgTypes.TableChat:
                var G = b.getParameterAt(0).toString(),
                    H = b.getParameterAt(1).toString(),
                    D = pokerapp.PlayerChatType.enumParseNameOrValue(b.getParameterAt(2).toString()),
                    g = this.getTableModel();
                g.addPlayerChatMessage(D,
                    G, H);
                break;
            case pokerapp.NetMsgTypes.TableSeatReserved:
                var x = b.getParameterAt(0).toInteger(pokerapp.Constants.INVALID_SEAT_POSITION),
                    M = b.getParameterAt(1).toInteger(0),
                    K = b.getParameterAt(2).toDecimal(0),
                    N = b.getParameterAt(3).toDecimal(0);
                if (4 < b.getParameterCount()) {
                    var U = b.getParameterAt(4).toInteger(0),
                        T = b.getParameterAt(5).toDecimal(0),
                        P = b.getParameterAt(6).toDecimal(0),
                        n = 2 * P,
                        S = b.getParameterAt(7).toDecimal(0);
                    0 < U && this._tableSessionData.setTableId(U);
                    this._tableSessionData.setStakes(T, P, n, S)
                }
                this._tableSessionData.setLocalPlayerPosition(x);
                g = this.getTableModel();
                0 < K && 0 < N && 0 < M ? (g.getCurrentBuyin().setBuyinDetails(0, K, N, 0, g.currency, M), g.getCurrentBuyin().setBuyinState(pokerapp.BuyinState.waitForUser)) : (g.getCurrentBuyin().setBuyinState(pokerapp.BuyinState.cancelled), g.hasLocalPlayer() && g.getLocalPlayer().hasChips() && this.actionPlayerSitIn());
                this._updateTableState(this._tableStateData, this._tableSessionData);
                this.determineActionStates();
                this.determinePreActionStates();
                break;
            case pokerapp.NetMsgTypes.TableReqSeatDenied:
                this._tableSessionData.clearLocalPlayerPosition();
                this.getTableModel().getCurrentBuyin().setBuyinState(pokerapp.BuyinState.error);
                break;
            case pokerapp.NetMsgTypes.TablePlayerRoundBye:
                this.getTableModel().getTableMessages().add(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_ReceivedRandomByeForRound));
                break;
            case pokerapp.NetMsgTypes.TableWaitRoundStart:
                this._resetAllTableState();
                this.getTableModel().getTableMessages().add(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_TournamentWaitForRoundStart));
                break;
            case pokerapp.NetMsgTypes.TableWaitTournamentStart:
                this._resetAllTableState();
                this.getTableModel().getTableMessages().add(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_TournamentHandRollbackResuming));
                break;
            case pokerapp.NetMsgTypes.TableWaitBreakStart:
                this._resetAllTableState();
                var I = b.getParameterAt(0).toInteger(0),
                    J = pokerapp.BreakType.enumParseNameOrValue(b.getParameterAt(1).toString(""), pokerapp.BreakType.Regular),
                    W = b.getParameterAt(2).toBoolean(!1);
                this._translateBreakStarting(I, J, W);
                break;
            case pokerapp.NetMsgTypes.TableInBreak:
                this._resetAllTableState();
                I = b.getParameterAt(0).toInteger(0);
                J = pokerapp.BreakType.enumParseNameOrValue(b.getParameterAt(1).toString(""), pokerapp.BreakType.Regular);
                W = b.getParameterAt(2).toBoolean(!1);
                this._translateBreakStarted(I, J, W);
                break;
            case pokerapp.NetMsgTypes.TableStatistics:
                var $ = b.getParameterAt(0).toDecimal(0),
                    O = b.getParameterAt(1).toDecimal(0),
                    Z = b.getParameterAt(2).toInteger(0),
                    V = b.getParameterAt(3).toInteger(0);
                this.getTableModel().getTableStatistics().updateTableStatistics($, O, Z, V);
                break;
            case pokerapp.NetMsgTypes.TableTournamentStatistics:
                for (var L = b.getParameterAt(0).toInteger(0), Y = b.getParameterAt(1).toInteger(0), g = [], X = b.getParameterAt(2).toString("").split(";"), n = 0; n < X.length; n++) {
                    var p = X[n].split("|"),
                        aa = jcore.util.safeIndex(p, 0, ""),
                        da = pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(p, 1, "0"), 0),
                        ta = pokerapp.ConvertUtil.toInt(jcore.util.safeIndex(p, 2, "0"), 0),
                        ja = new pokerapp.PlayerInfoModel(aa, da, ta);
                    g.push(ja)
                }
                this.getTableModel().getTableStatistics().updateTournamentStatistics(L, Y, g);
                break;
            case pokerapp.NetMsgTypes.TableTournamentInfo:
                var ha = b.getParameterAt(0).toString(""),
                    ha = ha.replace(/"/g, "'"),
                    sa = jcore.util.strExtract(ha, " Place='", "'", "-"),
                    la = jcore.util.strExtract(ha, " CurrentBlindLevel='", "'", "-"),
                    ua = jcore.util.strExtract(ha, " ActivePlayers='", "'", "") + "/" + jcore.util.strExtract(ha, " TotalPlayers='", "'", "-");
                pokerapp.ConvertUtil.toBoolean(jcore.util.strExtract(ha, " IsBreak='",
                    "'", "false"), !1);
                this.getTableModel().getTableStatistics().updateTournamentInfo(sa, la, ua);
                if (!jcore.util.isNullOrEmpty(la)) {
                    var p = la.split("/"),
                        na = pokerapp.ConvertUtil.toDecimal(0 < p.length ? p[0] : "0", 0),
                        pa = pokerapp.ConvertUtil.toDecimal(1 < p.length ? p[1] : "0", 0),
                        S = pokerapp.ConvertUtil.toDecimal(2 < p.length ? p[2] : "0", 0);
                    if (0 < na || 0 < pa || 0 < S) this._tableSessionData.setStakes(na, pa, pa, S), this._updateTableState(this._tableStateData, this._tableSessionData)
                }
            }
        } catch (qa) {
            jcore.log.error(qa), Raven.captureException(qa),
                this._onGameError(qa)
        }
        return !0
    },
    _onReceivedQueryRematch: function () {
        this.confirmRematchAction()
    },
    _onReceivedTableTournamentReEnter: function (a, b) {
        this.getTableModel();
        this.getGameHeader();
        var c = this;
        pokerapp.BridgeLobbyService.getInstance().getTournamentDetails(b).then(function (a) {
            var b = new Hashtable,
                g;
            for (g in a.values) jcore.util.isDefined(a.values[g].Value) ? b.put(g, a.values[g].Value) : b.put(g, a.values[g]);
            a = pokerapp.DataObjectManager.getInstance().update(a.path, b);
            g = a.lateRegistrationSecondsRemaining;
            var b = a.status,
                h = b === pokerapp.TournamentState.Announced || b === pokerapp.TournamentState.Registering;
            g = a.isLateRegistration && !h && 0 < g;
            null != a && g && b !== pokerapp.TournamentState.Completed ? c.confirmReEntryAction() : c.closeGame(!1, "", 1)
        }).catch(function (a) {
            console.log("**## Error getting tournament info from lobby")
        })
    },
    _processDealerChat: function (a, b) {
        Object.keys(pokerapp.DealerChatType).find(function (b) {
            return pokerapp.DealerChatType[b] === a
        });
        var c = this.getTableModel();
        switch (a) {
        case pokerapp.DealerChatType.PauseTournament:
            this._resetAllTurnState();
            c.getTableMessages().add(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_TournamentPaused));
            break;
        case pokerapp.DealerChatType.ResumeTournament:
            c.getTableMessages().add(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_TournamentResumed), 5, !1);
            break;
        case pokerapp.DealerChatType.WinRound:
            c.isSeatAssigned() && c.isMySeat(b.getParameterAt(1).toInteger(pokerapp.Constants.INVALID_SEAT_POSITION)) && c.getTableMessages().add(pokerapp.TableMessageId.GameStatus,
                pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_WinRound));
            break;
        case pokerapp.DealerChatType.NewBlindLevel:
            var d = b.getParameterAt(1).toDecimal(0),
                f = b.getParameterAt(2).toDecimal(0),
                g = b.getParameterAt(3).toDecimal(0),
                h = 0,
                m = this._tableSessionData.getStakes();
            m && (h = m.getAnte());
            4 < b.getParameterCount() && (h = b.getParameterAt(4).toDecimal(0));
            this._tableSessionData.setStakes(d, f, g, h);
            this._updateTableState(this._tableStateData, this._tableSessionData);
            d = pokerapp.FormatUtil.formatStake(this._tableSessionData.getStakes(),
                this._tableSessionData.getLimitType(), !1, !0);
            c.getTableMessages().add(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_BlindsIncreasing, d), 4, !1);
            break;
        case pokerapp.DealerChatType.AbortHand:
            this._resetAllTurnState();
            c.getTableMessages().add(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_HandAborted), 5, !1);
            break;
        case pokerapp.DealerChatType.TablePlayerMoved:
            d = b.getParameterAt(1).toInteger(pokerapp.Constants.INVALID_SEAT_POSITION);
            b.getParameterAt(2);
            f = b.getParameterAt(3).toInteger(pokerapp.Constants.INVALID_TABLE_ID);
            this._tableSessionData.setLocalPlayerPosition(d);
            this._tableSessionData.setTableId(f);
            c.getTableMessages().add(pokerapp.TableMessageId.MoveTableStatus, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_MovedTable, f, d + 1), 3, !1);
            this._updateTableState(this._tableStateData, this._tableSessionData);
            this.sendPlayerUpdateState();
            this.determineActionStates();
            this.determinePreActionStates();
            break;
        case pokerapp.DealerChatType.EliminateFromTournament:
            d =
                b.getParameterAt(1).toInteger(pokerapp.Constants.INVALID_SEAT_POSITION);
            f = 25;
            if (c.isMySeat(d)) {
                this._resetAllTurnState();
                var d = b.getParameterAt(3).toInteger(-1),
                    n = b.getParameterAt(4).toInteger(-1),
                    g = b.getParameterAt(5).toBoolean(!0); - 1 < d ? c.getTableMessages().appendOrAdd(pokerapp.TableMessageId.TournamentElimination, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_ElimiatedFromTournament, pokerapp.FormatUtil.formatPlace(d)), f) : c.getTableMessages().appendOrAdd(pokerapp.TableMessageId.TournamentElimination,
                    pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_ElimiatedFromTournamentWithoutPlace), f);
                if (c.isTournament() && -1 < d)
                    if (g) {
                        c.getTableMessages().clear();
                        var p = this;
                        setTimeout(function () {
                            p._onReceivedTableTournamentReEnter(n, p.getGameHeader().tournamentId)
                        }, 8E3)
                    } else this.closeGame(!1, "", f);
                this.sendPlayerUpdateState();
                this.determineActionStates()
            }
            break;
        case pokerapp.DealerChatType.WinTournament:
            c.getTableMessages().remove(pokerapp.TableMessageId.RebuyStatus);
            d = b.getParameterAt(1).toInteger(pokerapp.Constants.INVALID_SEAT_POSITION);
            f = b.getParameterAt(2).toString("");
            c.isMySeat(d) ? (c.getTableMessages().appendOrAdd(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_WinTournament)), this._tableSessionData.clearLocalPlayerPosition(), this.closeGame(!1, "", 25)) : c.getTableMessages().appendOrAdd(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_OppenentWinTournament, f));
            this.determineActionStates();
            break;
        case pokerapp.DealerChatType.CancelTournament:
            c.getTableMessages().add(pokerapp.TableMessageId.GameStatus,
                pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_CancelTournament), 55);
            c.isTournament();
            this._resetAllTableState();
            this.determineActionStates();
            this.closeGame(!1, "tournament cancelled", 25);
            break;
        case pokerapp.DealerChatType.StartGame:
            c.getTableMessages().clear();
            d = Math.max(0, b.getParameterAt(1).toDecimal(0));
            c.isTournament() ? (10 > d && (this.setActionRequired(!0), this.playSound(pokerapp.SoundId.TURN, pokerapp.SoundLevel.ALERT), this.setActionRequired(!1)), 30 > d ? (c.getTableMessages().add(pokerapp.TableMessageId.GameStatus,
                pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_TournamentStartShortly, this.getGameHeader().description), d, !1), this.setActionRequired(!0), this.setActionRequired(!1)) : c.getTableMessages().add(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_TournamentStart), d)) : 30 > d ? c.getTableMessages().add(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_GameStartShortly), d, !1) : c.getTableMessages().add(pokerapp.TableMessageId.GameStatus,
                pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_GameStart), d);
            break;
        case pokerapp.DealerChatType.WinPot:
        case pokerapp.DealerChatType.WinHiPot:
        case pokerapp.DealerChatType.WinLoPot:
            d = b.getParameterAt(1).toInteger(pokerapp.Constants.INVALID_SEAT_POSITION);
            c.isMySeat(d) && (c.wonHand = !0, this.playSound(pokerapp.SoundId.WIN));
            break;
        case pokerapp.DealerChatType.ReturnBet:
            d = b.getParameterAt(1).toInteger(pokerapp.Constants.INVALID_SEAT_POSITION);
            c.isMySeat(d) && (d = b.getParameterAt(2).toDecimal(0),
                f = c.getLocalPlayer(), f.updateCurrentBet(f.playerBet - d));
            this.playSound(pokerapp.SoundId.CHIPS_SMALL);
            break;
        case pokerapp.DealerChatType.MoveBetToPot:
            c.moveBetsToPot = !0;
            break;
        case pokerapp.DealerChatType.Fold:
            d = b.getParameterAt(1).toInteger(pokerapp.Constants.INVALID_SEAT_POSITION);
            c.isMySeat(d) && (f = c.getLocalPlayer(), f.foldedCards = [].concat(f.playerCards), c.folded = !0);
            this.playSound(pokerapp.SoundId.FOLD);
            break;
        case pokerapp.DealerChatType.Check:
            this.playSound(pokerapp.SoundId.CHECK);
            break;
        case pokerapp.DealerChatType.Bet:
            this.playSound(pokerapp.SoundId.BET);
            break;
        case pokerapp.DealerChatType.Raise_:
            this.playSound(pokerapp.SoundId.RAISE);
            break;
        case pokerapp.DealerChatType.Call:
            this.playSound(pokerapp.SoundId.BET);
            break;
        case pokerapp.DealerChatType.AllIn:
            this.playSound(pokerapp.SoundId.BET);
            break;
        case pokerapp.DealerChatType.PostSB:
            d = b.getParameterAt(1).toInteger(pokerapp.Constants.INVALID_SEAT_POSITION);
            c.isMySeat(d) && (c.postedSB = !0);
            this.playSound(pokerapp.SoundId.BET);
            break;
        case pokerapp.DealerChatType.PostBB:
            d = b.getParameterAt(1).toInteger(pokerapp.Constants.INVALID_SEAT_POSITION);
            c.isMySeat(d) && (c.postedBB = !0);
            this.playSound(pokerapp.SoundId.BET);
            break;
        case pokerapp.DealerChatType.PostDB:
            d = b.getParameterAt(1).toInteger(pokerapp.Constants.INVALID_SEAT_POSITION);
            c.isMySeat(d) && (c.postedDB = !0);
            this.playSound(pokerapp.SoundId.BET);
            break;
        case pokerapp.DealerChatType.Flop:
            c.flopped = c.folded ? !1 : !0;
        case pokerapp.DealerChatType.HoleCards:
        case pokerapp.DealerChatType.Turn:
        case pokerapp.DealerChatType.River:
            this._resetAllTurnState();
            c.activePreAction != pokerapp.PokerPlayerPreActions.FoldToAnyBet &&
                (c.activePreAction = pokerapp.PokerPlayerPreActions.None);
            c.madeActionThisRound = !1;
            this.playSound(pokerapp.SoundId.DEAL);
            break;
        case pokerapp.DealerChatType.WaitForRebuy:
            f = Math.max(0, b.getParameterAt(3).toDecimal(10));
            d = b.getParameterAt(1).toInteger(-1);
            c.isMySeat(d) ? (c.allowRebuy = !0, c.waitForRebuy = !0, this.setActionRequired(!0, f, 0), c.getTableMessages().add(pokerapp.TableMessageId.RebuyStatus, String.format("You have {0} seconds to rebuy", f), f)) : c.getTableMessages().add(pokerapp.TableMessageId.RebuyStatus,
                String.format("Tournament players have {0} seconds to rebuy", f), f);
            this.determineActionStates();
            break;
        case pokerapp.DealerChatType.RebuyCompleted:
            c.getTableMessages().add(pokerapp.TableMessageId.RebuyStatus, "Rebuy Completed", 2, !1);
            this.sendPlayerUpdateState();
            setTimeout(function () {
                pokerapp.LobbyService.getInstance().refreshUserBalance()
            }, 5E3);
            c.waitForRebuy = !1;
            break;
        case pokerapp.DealerChatType.RebuyRefunded:
            c.getTableMessages().add(pokerapp.TableMessageId.RebuyStatus, "Rebuy Refunded", 2, !1);
            setTimeout(function () {
                    pokerapp.LobbyService.getInstance().refreshUserBalance()
                },
                5E3);
            c.waitForRebuy = !1;
            break;
        case pokerapp.DealerChatType.Addon:
            this.sendPlayerUpdateState();
            setTimeout(function () {
                pokerapp.LobbyService.getInstance().refreshUserBalance()
            }, 5E3);
            c.waitForRebuy = !1;
            break;
        case pokerapp.DealerChatType.BreakStart:
            c = b.getParameterAt(1).toInteger(0);
            d = pokerapp.BreakType.enumParseNameOrValue(b.getParameterAt(2).toString(""), pokerapp.BreakType.Regular);
            f = b.getParameterAt(3).toBoolean(!1);
            this._translateBreakStarted(c, d, f);
            this.sendPlayerUpdateState();
            break;
        case pokerapp.DealerChatType.CloseTable:
            d =
                3 <= b.getParameterCount() ? b.getParameterAt(2).toInteger(15) : 15;
            c.getTableMessages().add(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_TableClosed), d);
            this.closeGame(!1, "dealer chat", d);
            break;
        case pokerapp.DealerChatType.DisconnectObserver:
            d = 15;
            c.getTableMessages().add(pokerapp.TableMessageId.GameStatus, pokerapp.Translator.Translate(pokerapp.TranslationId.GameMessage_ObserverTableClosed), d);
            this.closeGame(!1, "dealer chat observer close", d);
            break;
        case pokerapp.DealerChatType.Join:
        case pokerapp.DealerChatType.BuyIn:
        case pokerapp.DealerChatType.BuyInHand:
            setTimeout(function () {
                pokerapp.LobbyService.getInstance().refreshUserBalance()
            }, 5E3);
            break;
        case pokerapp.DealerChatType.QueryRematch:
            this.doAction(pokerapp.PokerPlayerActions.Client_RematchSupported);
            c.getTableMessages().clear();
            this._onReceivedQueryRematch();
            break;
        case pokerapp.DealerChatType.RematchAccepted:
            c.getTableMessages().appendOrAdd(pokerapp.TableMessageId.GameStatus, "Rematch accepted! Please wait for new Sit 'n Go game to start.",
                f);
            this.closeGame(!1, "rematch accepted", 5);
            break;
        case pokerapp.DealerChatType.RematchDeclined:
            c.getTableMessages().appendOrAdd(pokerapp.TableMessageId.GameStatus, "Rematch declined.", f), this.closeGame(!1, "rematch declined", 5)
        }
    },
    _getCurrentHandIdShort: function () {
        var a = this.getTableModel();
        return null != a && !jcore.util.isNullOrEmpty(a.currentHandId) && 2 < a.currentHandId.length ? a.currentHandId.substring(a.currentHandId.length - 2) : ""
    },
    sendPlayerConnectRinggame: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerConnectRinggame(this._netSession,
                this.getGameHeader().tableId);
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerConnectTournament: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerConnectTournament(this._netSession, this.getGameHeader().tournamentId);
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerUpdateState: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerUpdateState(this._netSession);
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerRequestSeat: function (a, b) {
        if (this._checkConnection()) {
            var c =
                pokerapp.NetMsgFactory.newPlayerRequestSeat(this._netSession, a, b);
            this._netSession.sendNetMsg(c)
        }
    },
    sendPlayerBuyIn: function (a, b) {
        if (this._checkConnection()) {
            var c = pokerapp.NetMsgFactory.newPlayerBuyIn(this._netSession, a, b);
            this._netSession.sendNetMsg(c)
        }
    },
    sendPlayerCancelBuyIn: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerCancelBuyIn(this._netSession);
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerCancelRebuy: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerCancelRebuy(this._netSession);
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerRebuy: function (a) {
        this._checkConnection() && (a = pokerapp.NetMsgFactory.newPlayerRebuyAddon(this._netSession, !1, a), this._netSession.sendNetMsg(a))
    },
    sendPlayerAddon: function (a) {
        this._checkConnection() && (a = pokerapp.NetMsgFactory.newPlayerRebuyAddon(this._netSession, !0, a), this._netSession.sendNetMsg(a))
    },
    sendPlayerCancelRequestSeat: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerCancelRequestSeat(this._netSession);
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerCall: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerCall(this._netSession, this._getCurrentHandIdShort());
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerCheck: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerCheck(this._netSession, this._getCurrentHandIdShort());
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerFold: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerFold(this._netSession, this._getCurrentHandIdShort());
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerBet: function (a) {
        this._checkConnection() && (a = pokerapp.NetMsgFactory.newPlayerBet(this._netSession, a, this._getCurrentHandIdShort()), this._netSession.sendNetMsg(a))
    },
    sendPlayerRaise: function (a) {
        this._checkConnection() && (a = pokerapp.NetMsgFactory.newPlayerRaise(this._netSession, a, this._getCurrentHandIdShort()), this._netSession.sendNetMsg(a))
    },
    sendPlayerAllIn: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerAllIn(this._netSession, this._getCurrentHandIdShort());
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerSitOut: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerSitOut(this._netSession);
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerSitIn: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerSitIn(this._netSession);
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerSitOutNextHand: function (a) {
        this._checkConnection() && (a = pokerapp.NetMsgFactory.newPlayerSitOutNextHand(this._netSession, a), this._netSession.sendNetMsg(a))
    },
    sendPlayerMuckCards: function () {
        if (this._checkConnection()) {
            var a =
                pokerapp.NetMsgFactory.newPlayerMuckCards(this._netSession);
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerShowCards: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerShowCards(this._netSession);
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerLeaveTable: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerLeaveTable(this._netSession);
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerChatMessage: function (a) {
        this._checkConnection() && !jcore.util.isNullOrEmpty(a) && (a =
            pokerapp.NetMsgFactory.newPlayerChatMessage(this._netSession, a), this._netSession.sendNetMsg(a))
    },
    sendPlayerAcceptRematch: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerAcceptRematchMessage(this._netSession);
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerDeclineRematch: function () {
        if (this._checkConnection()) {
            var a = pokerapp.NetMsgFactory.newPlayerDeclineRematchMessage(this._netSession);
            this._netSession.sendNetMsg(a)
        }
    },
    sendPlayerRematchSupported: function () {
        if (this._checkConnection()) {
            var a =
                pokerapp.NetMsgFactory.newPlayerRematchSupportedMessage(this._netSession);
            this._netSession.sendNetMsg(a)
        }
    },
    _checkConnection: function () {
        if (this._netSession.isConnected()) return !0;
        jcore.log.info("not connected to game");
        return !1
    },
    openCashierAction: function () {
        cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_open_cashier, this)
    },
    _processTableError: function (a, b) {
        if (!this._stateMachine.checkState(pokerapp.PokerGameState.GAME_DISCONNECTED) && !this._stateMachine.checkState(pokerapp.PokerGameState.GAME_ERROR)) {
            var c =
                "",
                d = jcore.util.safeIndex(b, 0, "");
            switch (a) {
            case pokerapp.TableErrorCode.ActionOutOfTurn:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.BasePokerTableView_ActionOutOfTurn);
                break;
            case pokerapp.TableErrorCode.InvalidAction:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.BasePokerTableView_InvalidAction);
                break;
            case pokerapp.TableErrorCode.InvalidBetAmount:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.BasePokerTableView_InvalidBetAmount);
                break;
            case pokerapp.TableErrorCode.InvalidBuyInAmount:
                c =
                    pokerapp.Translator.Translate(pokerapp.TranslationId.BasePokerTableView_InvalidBuyInAmount);
                break;
            case pokerapp.TableErrorCode.RebuyAddonDenied:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.BasePokerTableView_RebuyAddonDenied);
                this.sendPlayerUpdateState();
                break;
            case pokerapp.TableErrorCode.DuplicatedIP:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.BasePokerTableView_DuplicateIP);
                this._netSession.clearSessionId();
                this.closeGame(!1, "", 1);
                break;
            case pokerapp.TableErrorCode.InvalidSession:
                c =
                    pokerapp.Translator.Translate(pokerapp.TranslationId.BasePokerTableView_InvalidSession);
                this._netSession.clearSessionId();
                this.closeGame(!1, "", 1);
                break;
            case pokerapp.TableErrorCode.GenericError:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.BasePokerTableView_GenericError, d)
            }
            if (a === pokerapp.TableErrorCode.SeatDenied && 0 < b.length) switch (pokerapp.SeatDeniedError.enumParseNameOrValue(b[1])) {
            case pokerapp.SeatDeniedError.TableNotDefined:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_TableNotDefined);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a));
                break;
            case pokerapp.SeatDeniedError.UserNotDefined:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_UserNotDefined);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a));
                break;
            case pokerapp.SeatDeniedError.EmailNotValidated:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_EmailNotValidated);
                c = new pokerapp.AlertPopup(c, "", "Ok", this.openCashierAction);
                jui.PopupManager.getInstance().showPopup(c);
                break;
            case pokerapp.SeatDeniedError.NotRealMoneyAccount:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_NotRealMoneyAccount);
                c = new pokerapp.AlertPopup(c, "", "Ok", this.openCashierAction);
                jui.PopupManager.getInstance().showPopup(c);
                break;
            case pokerapp.SeatDeniedError.TableAtMaxPlayers:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_TableAtMaxPlayers);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a));
                break;
            case pokerapp.SeatDeniedError.InvalidSiteId:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_InvalidSiteId);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a));
                break;
            case pokerapp.SeatDeniedError.MaxTablesPerHeadsUpStakes:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_MaxTablesPerHeadsUpStakes);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a));
                break;
            case pokerapp.SeatDeniedError.OperatorsCannotPlay:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_OperatorsCannotPlay);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a));
                break;
            case pokerapp.SeatDeniedError.PlayPrivilegeLocked:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_PlayPrivilegeLocked);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a));
                break;
            case pokerapp.SeatDeniedError.DisallowSitWith:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_DisallowSitWith);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a));
                break;
            case pokerapp.SeatDeniedError.PropRestriction:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_PropRestriction);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a));
                break;
            case pokerapp.SeatDeniedError.PlayRestriction:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniLobby_Error_SeatDenied_PlayRestrictioned_NotRealMoneyAccount);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a));
                break;
            case pokerapp.SeatDeniedError.DuplicateReservedSeat:
                c =
                    pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_DuplicateReservedSeat);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a));
                break;
            case pokerapp.SeatDeniedError.BankrollProtection:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_BankrollProtection);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle,
                    a));
                break;
            case pokerapp.SeatDeniedError.ForcedBankrollProtection:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_ForcedBankrollProtection);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a));
                break;
            case pokerapp.SeatDeniedError.BalanceValidation:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_BalanceValidation);
                pokerapp.DialogService.getInstance().showMessage(c,
                    pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a));
                break;
            case pokerapp.SeatDeniedError.UserLimitsExceeded:
                c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_UserLimitsExceeded);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a));
                break;
            default:
                if (!c || "" === c) c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle);
                pokerapp.DialogService.getInstance().showMessage(c,
                    pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a))
            } else if (a === pokerapp.TableErrorCode.SeatDenied) {
                if (!c || "" === c) c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle);
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a))
            } else a === pokerapp.TableErrorCode.UserLimitsExceeded ? (c = pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDenied_UserLimitsExceeded),
                pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, a))) : pokerapp.DialogService.getInstance().showMessage(c, pokerapp.Translator.Translate(pokerapp.TranslationId.BasePokerTableView_TableErrorDlgTitle, a))
        }
    },
    getState: function () {
        return this._stateMachine.getState()
    },
    getTargetState: function () {
        return this._stateMachine.getTargetState()
    },
    update: function (a) {
        this._stateMachine.update(a);
        switch (this._stateMachine.getState()) {
        case pokerapp.PokerGameState.GAME_INVALID:
            this._stateMachine.transitionToState(pokerapp.PokerGameState.OK);
            break;
        case pokerapp.PokerGameState.OK:
            this._joinGame();
            break;
        case pokerapp.PokerGameState.GAME_JOINING_TABLE:
            this.isTableSessionValid() && this._connectGame();
            break;
        case pokerapp.PokerGameState.GAME_CONNECTING:
            this.isConnected() && this._stateMachine.transitionToState(pokerapp.PokerGameState.GAME_PREPARE, 0.1);
            break;
        case pokerapp.PokerGameState.GAME_CONNECTING_WAIT:
            this._netSession && this._netSession.close();
            break;
        case pokerapp.PokerGameState.GAME_PREPARE:
            this._stateMachine.transitionToState(pokerapp.PokerGameState.GAME_RUNNING);
            break;
        case pokerapp.PokerGameState.GAME_RUNNING:
            this.getTableModel().update(a);
            break;
        case pokerapp.PokerGameState.GAME_ERROR:
            this._stateMachine.transitionToState(pokerapp.PokerGameState.GAME_END, 1);
            break;
        case pokerapp.PokerGameState.GAME_DISCONNECTED:
            this._stateMachine.transitionToState(pokerapp.PokerGameState.GAME_END, 1);
            break;
        case pokerapp.PokerGameState.GAME_END:
            pokerapp.GameManagerService.getInstance().isGameOpen(this.getGameHeader()) && pokerapp.GameManagerService.getInstance().closeGame(this.getGameHeader(),
                this._reopenAfterClose);
            var b = this._netSession;
            setTimeout(function () {
                b.destroy()
            }, 500)
        }
    },
    playSound: function (a, b) {
        pokerapp.AudioService.getInstance().playSound(this, a, b)
    }
});
PokerGame.newGame = function (a) {
    return new PokerGame(a)
};
pokerapp.PokerGameGlobalOptions = jcore.ObservableModel.extend({
    ctor: function () {
        this._super();
        this.getObservable("soundsEnabled").subscribe(function (a) {
            pokerapp.AudioService.getInstance().setEnabled(!!a)
        }, this);
        this.getObservable("fourColorDeck").subscribe(function (a) {
            pokerapp.CardRender.getInstance().setDeckName(a ? "4color/" : "regular/")
        }, this);
        this.alwaysWaitBBFirstTime = !1;
        this.autoMuck = this.autoPostBlinds = !0;
        this.alwaysWaitBBFirstTime = this.sitOutOnNextBigBlind = this.sitOutOnNextHand = !1;
        this.soundsEnabled = !0;
        this.fourColorDeck = !1
    },
    createOptionsForGame: function (a) {
        a = new pokerapp.PokerGameInstanceOptions;
        a.alwaysWaitBBFirstTime = this.alwaysWaitBBFirstTime;
        a.autoPostBlinds = this.autoPostBlinds;
        a.autoMuck = this.autoMuck;
        a.sitOutOnNextHand = this.sitOutOnNextHand;
        a.sitOutOnNextBigBlind = this.sitOutOnNextBigBlind;
        a.alwaysWaitBBFirstTime = this.alwaysWaitBBFirstTime;
        return a
    }
});
pokerapp.PokerGameGlobalOptions.ObservableProperties = "alwaysWaitBBFirstTime autoPostBlinds autoMuck sitOutOnNextHand sitOutOnNextBigBlind alwaysWaitBBFirstTime soundsEnabled fourColorDeck".split(" ");
jcore.ObservableModel.defineAllProperties(pokerapp.PokerGameGlobalOptions.prototype, pokerapp.PokerGameGlobalOptions.ObservableProperties);
pokerapp.PokerGameGlobalOptions.getInstance = function () {
    this._instance || (this._instance = new pokerapp.PokerGameGlobalOptions);
    return this._instance
};
pokerapp.PokerGameInstanceOptions = jcore.ObservableModel.extend({
    ctor: function () {
        this._super();
        this.alwaysWaitBBFirstTime = !1;
        this.autoMuck = this.autoPostBlinds = !0;
        this.alwaysWaitBBFirstTime = this.sitOutOnNextBigBlind = this.sitOutOnNextHand = !1
    }
});
pokerapp.PokerGameInstanceOptions.ObservableProperties = "alwaysWaitBBFirstTime autoPostBlinds autoMuck sitOutOnNextHand sitOutOnNextBigBlind alwaysWaitBBFirstTime".split(" ");
jcore.ObservableModel.defineAllProperties(pokerapp.PokerGameInstanceOptions.prototype, pokerapp.PokerGameInstanceOptions.ObservableProperties);
pokerapp.GameCommand = cc.Class.extend({});
pokerapp.PokerBetCmd = pokerapp.GameCommand.extend({
    _amount: 0,
    ctor: function (a) {
        this._amount = jcore.util.orDefault(a, 0)
    },
    getAmount: function () {
        return this._amount
    }
});
pokerapp.PokerRaiseCmd = pokerapp.GameCommand.extend({
    _amount: 0,
    ctor: function (a) {
        this._amount = jcore.util.orDefault(a, 0)
    },
    getAmount: function () {
        return this._amount
    }
});
pokerapp.PokerUpdateStateCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerCancelRequestSeatCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerCancelBuyInCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerCancelRebuyCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerDisconnectCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerMuckCardsCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerShowCardsCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerSitOutCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerSitInCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerLeaveTableCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerWaitBBCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerCallCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerCheckCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerAllInCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerFoldCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerPostBBCmd = pokerapp.PokerBetCmd;
pokerapp.PokerPostSBCmd = pokerapp.PokerBetCmd;
pokerapp.PokerPostAnteCmd = pokerapp.PokerBetCmd;
pokerapp.PokerPostDBCmd = pokerapp.PokerBetCmd;
pokerapp.PokerAcceptRematchCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerDeclineRematchCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerRematchSupportedCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerBuyInCmd = pokerapp.GameCommand.extend({});
pokerapp.PokerRebuyCmd = pokerapp.GameCommand.extend({
    _multiple: 1,
    ctor: function (a) {
        this._multiple = a
    },
    getMultiple: function () {
        return this._multiple
    }
});
pokerapp.PokerAddonCmd = pokerapp.GameCommand.extend({
    _multiple: 1,
    ctor: function (a) {
        this._multiple = a
    },
    getMultiple: function () {
        return this._multiple
    }
});
pokerapp.PokerRequestSeatCmd = pokerapp.GameCommand.extend({
    _seatPosition: -1,
    ctor: function (a) {
        this._seatPosition = a
    },
    getSeatPosition: function () {
        return this._seatPosition
    }
});
pokerapp.PokerPlayerChatCmd = pokerapp.GameCommand.extend({
    _message: null,
    ctor: function (a) {
        this._message = a
    },
    getMessage: function () {
        return this._message
    }
});
pokerapp.PokerSitOutNextHandCmd = pokerapp.GameCommand.extend({
    _sitOut: !1,
    ctor: function (a) {
        this._sitOut = a
    },
    isSitOut: function () {
        return this._sitOut
    }
});
pokerapp.ActionRequiredManager = cc.Class.extend({
    _actionStack: null,
    ctor: function () {
        this._actionStack = [];
        pokerapp.GameManagerService.getInstance().on.gameClosed.add(this._onGameClosed, this)
    },
    actionRequiredBy: function (a, b) {
        jcore.assertNotNull(a);
        jcore.assertNotNull(b);
        var c = moment().add(b, "seconds"),
            d = this._findActionRecord(a);
        null != d ? d.setRequiredBy(c) : this._actionStack.push(new pokerapp.ActionRequiredRecord(a, c));
        this._actionStack.sort(function (a, b) {
            return a.getRequiredBy() - b.getRequiredBy()
        });
        1 ==
            this._actionStack.length && this._bringNextToTop()
    },
    isActionRequired: function (a) {
        jcore.assertNotNull(a);
        return null != this._findActionRecord(a)
    },
    isAnyActionRequired: function () {
        return 0 < this._actionStack.length
    },
    cancelActionRequiredBy: function (a, b) {
        var c = this._findActionRecord(a);
        null != c && this._cancelActionRequiredBy(c, b || 2 == this._actionStack.length)
    },
    cancelAll: function () {
        for (; 0 < this._actionStack.length;) this._cancelActionRequiredBy(this._actionStack[0], !1)
    },
    _cancelActionRequiredBy: function (a, b) {
        this._removeActionRecord(a.getPokerGame());
        b && this._bringNextToTop()
    },
    _bringNextToTop: function () {
        if (!pokerapp.UIAppViewManager.getInstance().hasActiveView() || pokerapp.UIAppViewManager.getInstance().isPokerGameView(pokerapp.UIAppViewManager.getInstance().getActiveView())) {
            var a = null;
            0 < this._actionStack.length && (a = this._actionStack[0]);
            null != a && (a = a.getPokerGame().getGameHeader(), a = pokerapp.UIAppViewManager.getInstance().findGameView(a), null != a && pokerapp.UIAppViewManager.getInstance().pushView(a))
        }
    },
    _findActionRecord: function (a) {
        return jcore.util.isNull(a) ?
            null : _.find(this._actionStack, function (b) {
                return b.getPokerGame().getGameHeader().getObjectId() == a.getGameHeader().getObjectId()
            })
    },
    _removeActionRecord: function (a) {
        if (jcore.util.isNull(a)) return null;
        this._actionStack = _.filter(this._actionStack, function (b) {
            return b.getPokerGame().getGameHeader().getObjectId() != a.getGameHeader().getObjectId()
        })
    },
    _onGameClosed: function (a, b) {
        if (!jcore.util.isNull(b)) {
            var c = this._findActionRecord(b);
            null != c && this._cancelActionRequiredBy(c, !1)
        }
    }
});
pokerapp.ActionRequiredManager.getInstance = function () {
    this._instance || (this._instance = new pokerapp.ActionRequiredManager);
    return this._instance
};
pokerapp.ActionRequiredRecord = cc.Class.extend({
    _pokerGame: null,
    _requiredBy: null,
    ctor: function (a, b) {
        this._pokerGame = a;
        this._requiredBy = b
    },
    getPokerGame: function () {
        return this._pokerGame
    },
    getRequiredBy: function () {
        return this._requiredBy
    },
    setRequiredBy: function (a) {
        this._requiredBy = a
    }
});
pokerapp.TranslationId = {};
var _TranslationIdMAX = 0;
pokerapp.TranslationId = jcore.Enum.create({
    GameLimits_NoLimit: _TranslationIdMAX++,
    GameLimits_PotLimit: _TranslationIdMAX++,
    GameLimits_FixedLimit: _TranslationIdMAX++,
    GameLimits_Short_NoLimit: _TranslationIdMAX++,
    GameLimits_Short_PotLimit: _TranslationIdMAX++,
    GameLimits_Short_FixedLimit: _TranslationIdMAX++,
    GameTypes_TexasHoldem: _TranslationIdMAX++,
    GameTypes_Omaha: _TranslationIdMAX++,
    GameTypes_OmahaHiLo: _TranslationIdMAX++,
    Numbers_Trailing_ST: _TranslationIdMAX++,
    Numbers_Trailing_ND: _TranslationIdMAX++,
    Numbers_Trailing_RD: _TranslationIdMAX++,
    Numbers_Trailing_TH: _TranslationIdMAX++,
    CardRank_Twos: _TranslationIdMAX++,
    CardRank_Two: _TranslationIdMAX++,
    CardRank_Threes: _TranslationIdMAX++,
    CardRank_Three: _TranslationIdMAX++,
    CardRank_Fours: _TranslationIdMAX++,
    CardRank_Four: _TranslationIdMAX++,
    CardRank_Fives: _TranslationIdMAX++,
    CardRank_Five: _TranslationIdMAX++,
    CardRank_Sixes: _TranslationIdMAX++,
    CardRank_Six: _TranslationIdMAX++,
    CardRank_Sevens: _TranslationIdMAX++,
    CardRank_Seven: _TranslationIdMAX++,
    CardRank_Eights: _TranslationIdMAX++,
    CardRank_Eight: _TranslationIdMAX++,
    CardRank_Nines: _TranslationIdMAX++,
    CardRank_Nine: _TranslationIdMAX++,
    CardRank_Tens: _TranslationIdMAX++,
    CardRank_Ten: _TranslationIdMAX++,
    CardRank_Jacks: _TranslationIdMAX++,
    CardRank_Jack: _TranslationIdMAX++,
    CardRank_Queens: _TranslationIdMAX++,
    CardRank_Queen: _TranslationIdMAX++,
    CardRank_Kings: _TranslationIdMAX++,
    CardRank_King: _TranslationIdMAX++,
    CardRank_Aces: _TranslationIdMAX++,
    CardRank_Ace: _TranslationIdMAX++,
    HandStrength_RoyalFlush: _TranslationIdMAX++,
    HandStrength_StraightFlush: _TranslationIdMAX++,
    HandStrength_FourofaKind: _TranslationIdMAX++,
    HandStrength_FullHouse: _TranslationIdMAX++,
    HandStrength_Flush: _TranslationIdMAX++,
    HandStrength_Straight: _TranslationIdMAX++,
    HandStrength_ThreeofaKind: _TranslationIdMAX++,
    HandStrength_TwoPairs: _TranslationIdMAX++,
    HandStrength_Pairof: _TranslationIdMAX++,
    HandStrength_HighCard: _TranslationIdMAX++,
    HandStrength_SingleKicker: _TranslationIdMAX++,
    HandStrength_MultiKicker: _TranslationIdMAX++,
    HandStrength_Short_RoyalFlush: _TranslationIdMAX++,
    HandStrength_Short_StraightFlush: _TranslationIdMAX++,
    HandStrength_Short_FourofaKind: _TranslationIdMAX++,
    HandStrength_Short_FullHouse: _TranslationIdMAX++,
    HandStrength_Short_Flush: _TranslationIdMAX++,
    HandStrength_Short_Straight: _TranslationIdMAX++,
    HandStrength_Short_ThreeofaKind: _TranslationIdMAX++,
    HandStrength_Short_TwoPairs: _TranslationIdMAX++,
    HandStrength_Short_Pairof: _TranslationIdMAX++,
    HandStrength_Short_HighCard: _TranslationIdMAX++,
    ChatMessage_AdminPrefix: _TranslationIdMAX++,
    ChatMessage_DealerHand: _TranslationIdMAX++,
    ChatMessage_DealerDealingTurn: _TranslationIdMAX++,
    ChatMessage_DealerDealingFlop: _TranslationIdMAX++,
    ChatMessage_DealerDealingRiver: _TranslationIdMAX++,
    ChatMessage_DealerDealingHoleCards: _TranslationIdMAX++,
    ChatMessage_DealerDealingThirdStreet: _TranslationIdMAX++,
    ChatMessage_DealerDealingFourthStreet: _TranslationIdMAX++,
    ChatMessage_DealerDealingFifthStreet: _TranslationIdMAX++,
    ChatMessage_DealerDealingVela: _TranslationIdMAX++,
    ChatMessage_DealerHandCancelled: _TranslationIdMAX++,
    ChatMessage_PlayerAddsOnChips: _TranslationIdMAX++,
    ChatMessage_PlayerIsAllIn: _TranslationIdMAX++,
    ChatMessage_PlayerBets: _TranslationIdMAX++,
    ChatMessage_PlayerMucks: _TranslationIdMAX++,
    ChatMessage_PlayerSitin: _TranslationIdMAX++,
    ChatMessage_PlayerSitout: _TranslationIdMAX++,
    ChatMessage_PlayerPostsAnte: _TranslationIdMAX++,
    ChatMessage_PlayerPostsBigBlind: _TranslationIdMAX++,
    ChatMessage_PlayerPostsBigAndDeadBlind: _TranslationIdMAX++,
    ChatMessage_PlayerPostsSmallBlind: _TranslationIdMAX++,
    ChatMessage_PlayerPostsBringIn: _TranslationIdMAX++,
    ChatMessage_PlayerRaise: _TranslationIdMAX++,
    ChatMessage_PlayerRebuy: _TranslationIdMAX++,
    ChatMessage_PlayerReturnBet: _TranslationIdMAX++,
    ChatMessage_PlayerShowCards: _TranslationIdMAX++,
    ChatMessage_PlayerShowCardsWithHandInfo: _TranslationIdMAX++,
    ChatMessage_PlayerWinLowPot: _TranslationIdMAX++,
    ChatMessage_PlayerWinHighPot: _TranslationIdMAX++,
    ChatMessage_PlayerWinHighPotNoCards: _TranslationIdMAX++,
    ChatMessage_PlayerWinPot: _TranslationIdMAX++,
    ChatMessage_PlayerWinPotNoCards: _TranslationIdMAX++,
    ChatMessage_TournamentRebuySecondsLeft: _TranslationIdMAX++,
    ChatMessage_TournamentPlayersRebuySecondsLeft: _TranslationIdMAX++,
    ChatMessage_TournamentRebuyFixedTime: _TranslationIdMAX++,
    ChatMessage_TournamentBountyWin: _TranslationIdMAX++,
    ChatMessage_TournamentBreakHasEnded: _TranslationIdMAX++,
    ChatMessage_TournamentBreakHasStart: _TranslationIdMAX++,
    ChatMessage_TournamentCancelled: _TranslationIdMAX++,
    ChatMessage_TournamentPaused: _TranslationIdMAX++,
    ChatMessage_TournamentResumed: _TranslationIdMAX++,
    ChatMessage_TournamentBlindsChanged: _TranslationIdMAX++,
    ChatMessage_TournamentJoinTable: _TranslationIdMAX++,
    ChatMessage_TournamentLeaveTable: _TranslationIdMAX++,
    ChatMessage_TournamentMovedTable: _TranslationIdMAX++,
    ChatMessage_JoinTable: _TranslationIdMAX++,
    ChatMessage_LeaveTable: _TranslationIdMAX++,
    ChatMessage_TournamentWinRound: _TranslationIdMAX++,
    ChatMessage_TournamentWin: _TranslationIdMAX++,
    ChatMessage_TournamentDisconnectExtraTime: _TranslationIdMAX++,
    ChatMessage_TournamentExtraTime: _TranslationIdMAX++,
    ChatMessage_TournamentStartingShortly: _TranslationIdMAX++,
    ChatMessage_TournamentStartingInSecs: _TranslationIdMAX++,
    ChatMessage_TournamentHandForHandInEffect: _TranslationIdMAX++,
    ChatMessage_TournamentHandForHandInEffectChatDisabled: _TranslationIdMAX++,
    ChatMessage_TablePaused: _TranslationIdMAX++,
    ChatMessage_TableResumed: _TranslationIdMAX++,
    ChatMessage_NewGameStartingShortly: _TranslationIdMAX++,
    ChatMessage_NewGameStartingInSecs: _TranslationIdMAX++,
    ChatMessage_ChatEnabled: _TranslationIdMAX++,
    ChatMessage_AllInChatdisabled: _TranslationIdMAX++,
    ChatMessage_PlayerChatdisabledAtFinalTable: _TranslationIdMAX++,
    ChatMessage_PlayerChatdisabledWhileInTheMoney: _TranslationIdMAX++,
    ChatMessage_PlayerChatdisabledforTournament: _TranslationIdMAX++,
    ChatMessage_ObserverChatdisabledAtFinalTable: _TranslationIdMAX++,
    ChatMessage_ObserverChatdisabledWhileInTheMoney: _TranslationIdMAX++,
    ChatMessage_ObserverChatdisabledForTournament: _TranslationIdMAX++,
    ChatMessage_PlayerChatDisabled: _TranslationIdMAX++,
    ChatMessage_ObserverChatDisabled: _TranslationIdMAX++,
    ChatMessage_PlayerChatEnabled: _TranslationIdMAX++,
    ChatMessage_ObserverChatEnabled: _TranslationIdMAX++,
    ChatMessage_PlayerBuyin: _TranslationIdMAX++,
    ChatMessage_PlayerCalls: _TranslationIdMAX++,
    ChatMessage_PlayerCallsNoAmount: _TranslationIdMAX++,
    ChatMessage_PlayerChecks: _TranslationIdMAX++,
    ChatMessage_PlayerFolds: _TranslationIdMAX++,
    ChatMessage_PlayerGetGoldCard: _TranslationIdMAX++,
    ChatMessage_PlayerChatSuspended: _TranslationIdMAX++,
    ChatMessage_EligibleToPlayAfterButtonPass: _TranslationIdMAX++,
    ChatMessage_TournamentEliminated: _TranslationIdMAX++,
    ChatMessage_TitleObserver: _TranslationIdMAX++,
    ChatMessage_TitleOperator: _TranslationIdMAX++,
    ChatMessage_TitleSystem: _TranslationIdMAX++,
    ChatMessage_TitleVIP: _TranslationIdMAX++,
    Lobby_Error_AccessDenied: _TranslationIdMAX++,
    Lobby_Error_TournamentForcedBankrollProtection: _TranslationIdMAX++,
    Lobby_Error_TournamentBankrollProtection: _TranslationIdMAX++,
    Lobby_Error_TournamentRegisterationFailed: _TranslationIdMAX++,
    Lobby_Error_TournamentRegisterationFailedTitle: _TranslationIdMAX++,
    Lobby_Error_TournamentUnregisterationFailed: _TranslationIdMAX++,
    Lobby_Error_TournamentPlayRestrictions: _TranslationIdMAX++,
    Lobby_Error_RingPlayRestrictions: _TranslationIdMAX++,
    Lobby_Error_SeatDeniedTitle: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_BankrollProtection: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_ForcedBankrollProtection: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_InvalidSiteId: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_TableNotDefined: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_UserNotDefined: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_EmailNotValidated: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_NotRealMoneyAccount: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_NotRealMoneyAccount_CreationNotAllowed: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_MaxTablesPerHeadsUpStakes: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_PlayPrivilegeLocked: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_OperatorsCannotPlay: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_DisallowSitWith: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_PropRestriction: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_PlayRestriction: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_UserLimitsExceeded: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_BuyInLimitsExceeded: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_LossLimitsExceeded: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_TimeLimitsExceeded: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_BalanceValidation: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_DuplicateReservedSeat: _TranslationIdMAX++,
    Lobby_Error_SeatDenied_TableAtMaxPlayers: _TranslationIdMAX++,
    Lobby_Error_TopUpPlayMoneyVerifyEmail24Hours: _TranslationIdMAX++,
    Lobby_Error_TopUpPlayMoneyVerifyEmail: _TranslationIdMAX++,
    Lobby_Error_TopUpPlayMoneyReplentishTime: _TranslationIdMAX++,
    BasePokerTableView_TableErrorDlgTitle: _TranslationIdMAX++,
    BasePokerTableView_ActionOutOfTurn: _TranslationIdMAX++,
    BasePokerTableView_InvalidAction: _TranslationIdMAX++,
    BasePokerTableView_InvalidBetAmount: _TranslationIdMAX++,
    BasePokerTableView_InvalidBuyInAmount: _TranslationIdMAX++,
    BasePokerTableView_SeatDenied: _TranslationIdMAX++,
    BasePokerTableView_DuplicateIP: _TranslationIdMAX++,
    BasePokerTableView_RebuyAddonDenied: _TranslationIdMAX++,
    BasePokerTableView_InvalidSession: _TranslationIdMAX++,
    BasePokerTableView_GenericError: _TranslationIdMAX++,
    GameActions_Call: _TranslationIdMAX++,
    GameActions_Bet: _TranslationIdMAX++,
    GameActions_Raise: _TranslationIdMAX++,
    GameActions_AllIn: _TranslationIdMAX++,
    GameActions_Fold: _TranslationIdMAX++,
    GameActions_Check: _TranslationIdMAX++,
    GameActions_PostSB: _TranslationIdMAX++,
    GameActions_PostBB: _TranslationIdMAX++,
    GameActions_PostDB: _TranslationIdMAX++,
    GameActions_PostAnte: _TranslationIdMAX++,
    GameActions_SitOut: _TranslationIdMAX++,
    GameActions_WaitBB: _TranslationIdMAX++,
    GameActions_TakeMySeat: _TranslationIdMAX++,
    GameActions_PlayNow: _TranslationIdMAX++,
    GameActions_Leave: _TranslationIdMAX++,
    GameActions_Rebuy: _TranslationIdMAX++,
    GameActions_RebuyRefunded: _TranslationIdMAX++,
    GameActions_RebuyCompleted: _TranslationIdMAX++,
    GameActions_MuckCards: _TranslationIdMAX++,
    GameActions_ShowCards: _TranslationIdMAX++,
    GameActions_AlwaysMuckCards: _TranslationIdMAX++,
    GameActions_JoinWaitList: _TranslationIdMAX++,
    GameActions_UnJoinWaitList: _TranslationIdMAX++,
    GameActions_ReEnter: _TranslationIdMAX++,
    GamePreActions_CheckCallAny: _TranslationIdMAX++,
    GamePreActions_CallAny: _TranslationIdMAX++,
    GamePreActions_BetRaiseAny: _TranslationIdMAX++,
    GamePreActions_RaiseAny: _TranslationIdMAX++,
    GamePreActions_RaiseTo: _TranslationIdMAX++,
    GamePreActions_BetRaiseAllIn: _TranslationIdMAX++,
    GamePreActions_AllIn: _TranslationIdMAX++,
    GamePreActions_Bet: _TranslationIdMAX++,
    GamePreActions_Call: _TranslationIdMAX++,
    GamePreActions_CallAllIn: _TranslationIdMAX++,
    GamePreActions_Check: _TranslationIdMAX++,
    GamePreActions_CheckFold: _TranslationIdMAX++,
    GamePreActions_Fold: _TranslationIdMAX++,
    GamePreActions_FoldToAnyBet: _TranslationIdMAX++,
    GameMessage_MovedTable: _TranslationIdMAX++,
    GameMessage_SwitchingServer: _TranslationIdMAX++,
    GameMessage_ReceivedRandomByeForRound: _TranslationIdMAX++,
    GameMessage_TournamentStartShortly: _TranslationIdMAX++,
    GameMessage_TournamentStart: _TranslationIdMAX++,
    GameMessage_GameStartShortly: _TranslationIdMAX++,
    GameMessage_GameStart: _TranslationIdMAX++,
    GameMessage_TableClosed: _TranslationIdMAX++,
    GameMessage_ObserverTableClosed: _TranslationIdMAX++,
    GameMessage_BlindsIncreasing: _TranslationIdMAX++,
    GameMessage_ElimiatedFromTournament: _TranslationIdMAX++,
    GameMessage_ElimiatedFromTournamentWithoutPlace: _TranslationIdMAX++,
    GameMessage_TournamentPaused: _TranslationIdMAX++,
    GameMessage_TournamentResumed: _TranslationIdMAX++,
    GameMessage_WinTournament: _TranslationIdMAX++,
    GameMessage_OppenentWinTournament: _TranslationIdMAX++,
    GameMessage_WinRound: _TranslationIdMAX++,
    GameMessage_CancelTournament: _TranslationIdMAX++,
    GameMessage_HandAborted: _TranslationIdMAX++,
    GameMessage_TournamentHandRollbackResuming: _TranslationIdMAX++,
    GameMessage_TournamentWaitForRoundStart: _TranslationIdMAX++,
    GameMessage_BreakRebuy: _TranslationIdMAX++,
    GameMessage_BreakAddon: _TranslationIdMAX++,
    GameMessage_BreakRebuyAddon: _TranslationIdMAX++,
    GameMessage_BreakRegular: _TranslationIdMAX++,
    GameMessage_BreakSynchronized: _TranslationIdMAX++,
    GameMessage_BreakStarting: _TranslationIdMAX++,
    GameMessage_BreakStartingFinal: _TranslationIdMAX++,
    GameMessage_BreakStartingFinalExtended: _TranslationIdMAX++,
    GameMessage_BreakStarted: _TranslationIdMAX++,
    GameMessage_BreakStartedFinal: _TranslationIdMAX++,
    GameMessage_BreakStartedFinalExtended: _TranslationIdMAX++,
    GameMessage_SecondsLeftToAct: _TranslationIdMAX++,
    GameMessage_SecondsLeftToActBeforeExtraTime: _TranslationIdMAX++,
    GameMessage_OptionYes: _TranslationIdMAX++,
    GameMessage_OptionNo: _TranslationIdMAX++,
    GameMessage_RebuyRemoveFromTournament: _TranslationIdMAX++,
    GameMessage_ReEntryConfirm: _TranslationIdMAX++,
    GameMessage_LeaveAfterCardDealt: _TranslationIdMAX++
});
pokerapp.Translation = {};
var _lang = "EN";
pokerapp.Translation[_lang] = new Hashtable;
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameLimits_NoLimit, "No Limit");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameLimits_PotLimit, "Pot Limit");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameLimits_FixedLimit, "Fixed Limit");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameLimits_Short_NoLimit, "NL");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameLimits_Short_PotLimit, "PL");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameLimits_Short_FixedLimit, "FL");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameTypes_TexasHoldem, "Holdem");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameTypes_Omaha, "Omaha");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameTypes_OmahaHiLo, "Omaha HL");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Twos, "deuces");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Two, "deuce");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Threes, "Threes");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Three, "Three");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Fours, "Fours");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Four, "Four");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Fives, "Fives");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Five, "Five");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Sixes, "Sixes");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Six, "Six");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Sevens, "Sevens");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Seven, "Seven");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Eights, "Eights");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Eight, "Eight");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Nines, "Nines");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Nine, "Nine");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Tens, "Tens");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Ten, "Ten");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Jacks, "Jacks");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Jack, "Jack");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Queens, "Queens");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Queen, "Queen");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Kings, "Kings");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_King, "King");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Aces, "Aces");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.CardRank_Ace, "Ace");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_RoyalFlush, "Royal Flush");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_StraightFlush, "Straight Flush {0} high");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_FourofaKind, "Four of a Kind {0} {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_FullHouse, "Full House {0} full of {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_Flush, "Flush {0} high");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_Straight, "Straight {0} high");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_ThreeofaKind, "Three of a Kind {0} {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_TwoPairs, "Two Pairs {0} and {1} {2}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_Pairof, "Pair of {0} {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_HighCard, "High card {0} {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_SingleKicker, "with {0} kicker");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_MultiKicker, "with {0} kickers");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_Short_RoyalFlush, "Royal Flush");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_Short_StraightFlush, "Straight Flush");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_Short_FourofaKind, "Four of a Kind");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_Short_FullHouse, "Full House");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_Short_Flush, "Flush");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_Short_Straight, "Straight");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_Short_ThreeofaKind, "Three of a Kind");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_Short_TwoPairs, "Two Pairs");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_Short_Pairof, "Pair");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.HandStrength_Short_HighCard, "High Card");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Numbers_Trailing_ST, "st");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Numbers_Trailing_ND, "nd");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Numbers_Trailing_RD, "rd");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Numbers_Trailing_TH, "th");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_AdminPrefix, "Admin");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_DealerHand, "Dealer: Hand #{0}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_DealerDealingTurn, "Dealer: Dealing turn: [ {0} ]");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_DealerDealingFlop, "Dealer: Dealing flop: [ {0} ]");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_DealerDealingRiver, "Dealer: Dealing river: [ {0} ]");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_DealerDealingHoleCards, "Dealer: Dealing hole cards");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_DealerDealingThirdStreet, "Dealer: Dealing third street");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_DealerDealingFourthStreet, "Dealer: Dealing fourth street");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_DealerDealingFifthStreet, "Dealer: Dealing fifth street");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_DealerDealingVela, "Dealer: Dealing Vela: [ {0} ]");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_DealerHandCancelled, "Dealer: Hand cancelled");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerAddsOnChips, "Dealer: {0} adds on {1} chips");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerIsAllIn, "Dealer: {0} is all in");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerBets, "Dealer: {0} bets {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerMucks, "Dealer: {0} mucks");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerSitin, "Dealer: {0} sits in");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerSitout, "Dealer: {0} sits out");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerPostsAnte, "Dealer: {0} posts ante of {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerPostsBigBlind, "Dealer: {0} posts big blind");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerPostsBigAndDeadBlind, "Dealer: {0} posts big and dead blinds");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerPostsSmallBlind, "Dealer: {0} posts small blind");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerPostsBringIn, "Dealer: {0} posts a bring-in of {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerRaise, "Dealer: {0} raises to {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerRebuy, "Dealer: {0} rebuys {1} chips");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerReturnBet, "Dealer: {0} returns bet {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerShowCards, "Dealer: {0} shows [ {1} ]");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerShowCardsWithHandInfo, "Dealer: {0} shows [ {1} ] {2}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerWinLowPot, "Dealer: {0} wins low pot {1} with {2}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerWinHighPot, "Dealer: {0} wins high pot {1} with {2}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerWinHighPotNoCards, "Dealer: {0} wins high pot {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerWinPot, "Dealer: {0} wins {1} with {2}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerWinPotNoCards, "Dealer: {0} wins {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentRebuySecondsLeft, "Tournament: {0} has {1} seconds to re-buy...");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentPlayersRebuySecondsLeft, "Tournament: Players have {0} seconds to re-buy...");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentRebuyFixedTime, "Tournament: {0} has 15 seconds to re-buy...");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentBountyWin, "Tournament: {0} wins {1} bounty");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentBreakHasEnded, "Break has ended. The Tournament will now resume play");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentBreakHasStart, "Tournament: Break started. Game will resume in {0}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentCancelled, "Tournament Cancelled – Prize Pool has been distributed based on our cancellation policies");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentPaused, "Tournament: Tournament is paused by Floor Manager");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentResumed, "Tournament: Tournament is resumed by Floor Manager");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentBlindsChanged, "Tournament: Blinds going up to {0}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentJoinTable, "Tournament: {0} joins table");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentLeaveTable, "Tournament: {0} leaves table");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentMovedTable, "Tournament: {0} is moved to table {1}, seat {2}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_JoinTable, "Dealer: {0} joins table");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_LeaveTable, "Dealer: {0} leaves table");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentWinRound, "Tournament: {0} wins tournament round");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentWin, "Tournament: {0} wins tournament");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentDisconnectExtraTime, "Tournament: Disconnect Extra Time for {0}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentExtraTime, "Tournament: Extra Time for {0}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentStartingShortly, "Tournament will start shortly");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentStartingInSecs, "Tournament will start in {0}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentHandForHandInEffect, "Tournament: Hand-for-Hand play in effect. Waiting for other tables to finish");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentHandForHandInEffectChatDisabled, "Hand for hand mode in affect: Chat has been disabled, waiting for other tables to finish their current hand");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TablePaused, "Dealer: Table paused");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TableResumed, "Dealer: Table resumed");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_NewGameStartingShortly, "A new game will start shortly");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_NewGameStartingInSecs, "A new game will start in {0} seconds");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_ChatEnabled, "Chat is now enabled");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_AllInChatdisabled, "Player {0} is all-in, chat is temporarily disabled");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerChatdisabledAtFinalTable, "Player chat is disabled at the final table");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerChatdisabledWhileInTheMoney, "Player chat is disabled while players are in the money");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerChatdisabledforTournament, "Player chat is disabled for this tournament. Good luck players!");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_ObserverChatdisabledAtFinalTable, "Observer chat is disabled at the final table");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_ObserverChatdisabledWhileInTheMoney, "Observer chat is disabled while players are in the money");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_ObserverChatdisabledForTournament, "Observer chat is disabled for this tournament");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerChatDisabled, "Player chat is currently disabled");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_ObserverChatDisabled, "Observer chat is currently disabled");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerChatEnabled, "Player chat has been enabled");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_ObserverChatEnabled, "Observer chat has been enabled");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerBuyin, "Dealer: {0} buys in for {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerCalls, "Dealer: {0} calls {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerCallsNoAmount, "Dealer: {0} calls");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerChecks, "Dealer: {0} checks");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerFolds, "Dealer: {0} folds");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerGetGoldCard, "Dealer: {0} has won a Gold Card!");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_PlayerChatSuspended, "Dealer: Your chat privileges have been suspended");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_EligibleToPlayAfterButtonPass, "Dealer: {0} will be eligible to play after the button passes");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TournamentEliminated, "Tournament: {0} is eliminated and is placed {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TitleObserver, "[Observer]:");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TitleOperator, "[Op]:");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TitleSystem, "System:");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.ChatMessage_TitleVIP, "Celeb");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_AccessDenied, "Access Denied");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_TournamentForcedBankrollProtection, "Tournament Forced Bankroll Protection");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_TournamentBankrollProtection, "Tournament Bankroll Protection");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_TournamentRegisterationFailed, "Tournament Registration Failed: {0}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_TournamentRegisterationFailedTitle, "Tournament Registration Failed");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_TournamentUnregisterationFailed, "Could not Unregister from tournament {0} {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_TournamentPlayRestrictions, "Play Restrictions: To successfully manage your bankroll, please choose a lower buy-in or a non-cash buy-in. You will have access to more tournaments as your bankroll increases.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_RingPlayRestrictions, "Play Restrictions: To successfully manage your bankroll, please choose lower stakes or a different game type. You will have access to more games as your bankroll increases.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDeniedTitle, "Seat Denied");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_BankrollProtection, "Bankroll protection.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_ForcedBankrollProtection, "Forced bankroll protection.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_InvalidSiteId, "Invalid site identity.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_TableNotDefined, "Table not defined.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_UserNotDefined, "User not defined.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_EmailNotValidated, "A validated email is required to play at this table. Would you like to complete the validation process now?");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_NotRealMoneyAccount, "You are attempting to join a game that involves real money. Would you like to create a Real Money Account?");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_NotRealMoneyAccount_CreationNotAllowed, "You are attempting to join a game that involves real money. Please contact the support team");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_MaxTablesPerHeadsUpStakes, "Sorry, all players are only allowed 4 seats at these heads-up tables. Please choose different stakes if you wish to play more heads-up tables.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_PlayPrivilegeLocked, "Your play privilege is locked.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_OperatorsCannotPlay, "Operators are not allowed to play.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_DisallowSitWith, "There are some players at the table you are not allowed to play with.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_PropRestriction, "This table is actively hosted. Please choose another table.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_PlayRestriction, "Your cash game play is currently restricted to $0.02/$0.04 Fixed Limit tables. For full access to all tables please make a deposit.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_UserLimitsExceeded, "Your personal limits have been exceeded. Please wait for them to be normalized or change them on the cashier.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_BuyInLimitsExceeded, "Your buy-in limits have been exceeded. Please wait for them to be normalized or change them on the cashier.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_LossLimitsExceeded, "Your loss limits have been exceeded. Please wait for them to be normalized or change them on the cashier.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_TimeLimitsExceeded, "Your time limits have been exceeded. Please wait for them to be normalized or change them on the cashier.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_BalanceValidation, "Balance validation error.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_DuplicateReservedSeat, "Duplicated Reserved seat found.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_SeatDenied_TableAtMaxPlayers, "This table is limited to MAX {0} players.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_TopUpPlayMoneyVerifyEmail24Hours, "You have not yet verified your e-mail. Please do so in order to acquire more play money chips. (Until you verify your E-mail, you are limited to 1000 chips every 23 hrs)");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_TopUpPlayMoneyVerifyEmail, "You have not yet verified your e-mail. Please do so in order to acquire more play money chips.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.Lobby_Error_TopUpPlayMoneyReplentishTime, "Sorry you are limited to {0} chips every {1} hrs.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.BasePokerTableView_ActionOutOfTurn, "Action out of turn -");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.BasePokerTableView_InvalidAction, "Invalid action -");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.BasePokerTableView_InvalidBetAmount, "Invalid bet amount -");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.BasePokerTableView_InvalidBuyInAmount, "Invalid buy in amount -");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.BasePokerTableView_SeatDenied, "Seat denied -");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.BasePokerTableView_DuplicateIP, "Another user that shares the same IP is currently seated at the table you are attempting to join. Please select another table.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.BasePokerTableView_RebuyAddonDenied, "Rebuy Addon Denied -");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.BasePokerTableView_InvalidSession, "Invalid session id. Please rejoin the table from the lobby.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.BasePokerTableView_GenericError, "Error - {0}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.BasePokerTableView_TableErrorDlgTitle, "Table Error - {0}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_Call, "Call");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_Bet, "Bet");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_Raise, "Raise");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_AllIn, "All In");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_Fold, "Fold");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_Check, "Check");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_PostSB, "Post SB");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_PostBB, "Post BB");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_PostDB, "Post DB");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_PostAnte, "Post Ante");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_SitOut, "Sit Out");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_WaitBB, "Wait BB");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_TakeMySeat, "Take My Seat");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_PlayNow, "Play Now");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_Leave, "Leave");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_Rebuy, "Rebuy");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_ReEnter, "Re-enter");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_RebuyRefunded, "Rebuy Refunded");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_RebuyCompleted, "Rebuy Transaction Completed");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_MuckCards, "Muck Cards");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_ShowCards, "Show Cards");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_AlwaysMuckCards, "Always Muck Cards");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_JoinWaitList, "Join Wait List");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameActions_UnJoinWaitList, "UnJoin Wait List");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GamePreActions_CheckCallAny, "Check/Call Any");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GamePreActions_CallAny, "Call Any");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GamePreActions_BetRaiseAny, "Bet/Raise Any");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GamePreActions_RaiseAny, "Raise Any");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GamePreActions_RaiseTo, "Raise to");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GamePreActions_BetRaiseAllIn, "Raise to");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GamePreActions_AllIn, "All In");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GamePreActions_Bet, "Bet");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GamePreActions_Call, "Call");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GamePreActions_CallAllIn, "Call All In");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GamePreActions_Check, "Check");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GamePreActions_CheckFold, "Check/Fold");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GamePreActions_Fold, "Fold");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GamePreActions_FoldToAnyBet, "Fold to Any Bet");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_MovedTable, "You have been moved to table {0}, seat {1}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_SwitchingServer, "Switching Game Server...");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_ReceivedRandomByeForRound, "You received a random bye for this round");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_TournamentStartShortly, "Tournament will start shortly\n\n {0}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_TournamentStart, "Tournament will start in");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_GameStartShortly, "A new game will start shortly");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_GameStart, "A new game will start in");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_TableClosed, "Thank you for playing with us. This table is now closed");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_ObserverTableClosed, "Thank you for observing this game. This table will now close as we allow others players to watch.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_BlindsIncreasing, "Blinds going up to  {0}");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_ElimiatedFromTournament, "You have finished {0} in this tournament.\nThank you for playing.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_ElimiatedFromTournamentWithoutPlace, "Thank you for playing.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_TournamentPaused, "Tournament Paused");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_TournamentResumed, "Tournament Resumed");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_WinTournament, "You have won the tournament!");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_OppenentWinTournament, "{0} has won the tournament!");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_WinRound, "Congratulations! You have won this tournament round!");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_CancelTournament, "Tournament Cancelled \n Prize Pool has been distributed based on our cancellation policies.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_HandAborted, "Hand Aborted");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_TournamentHandRollbackResuming, "The tournament has been rolled back 1 hand. The game will resume in 2 minutes.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_TournamentWaitForRoundStart, "Please wait for next tournament round to start");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_BreakRebuy, "rebuy");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_BreakAddon, "addon");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_BreakRebuyAddon, "rebuy/addon");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_BreakRegular, "regular");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_BreakSynchronized, "synchronized");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_BreakStarting, "A {0} break lasting {1} will begin when all other tables end their current hand.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_BreakStartingFinal, "A final {0} break lasting {1} will begin when all tables end their current hand.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_BreakStartingFinalExtended, "An extended final {0} break lasting {1} will begin when all tables end their current hand.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_BreakStarted, "A {0} break is currently in progress.\nThe game will resume shortly.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_BreakStartedFinal, "A final {0} break is currently in progress.\nThe game will resume shortly.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_BreakStartedFinalExtended, "An extended final {0} break is currently in progress.\nThe game will resume shortly.");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_SecondsLeftToAct, "{0} has {1} seconds to act");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_SecondsLeftToActBeforeExtraTime, "{0} has {1} seconds to act before Extra Time is activated");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_RebuyRemoveFromTournament, "If you leave, you will be removed from the tournament. Are you sure you want to leave?");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_OptionYes, "Yes");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_OptionNo, "No");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_ReEntryConfirm, "Do you want to re-enter tournament ");
pokerapp.Translation[_lang].put(pokerapp.TranslationId.GameMessage_LeaveAfterCardDealt, "Your hand will be check/folded if you leave the table now.");
pokerapp.Translator = cc.Class.extend({
    _defaultLangCode: "EN",
    _activeLangCode: null,
    ctor: function () {},
    getActiveTwoLetterLanguageCode: function () {
        return jcore.util.orDefault(this._activeLangCode, this._defaultLangCode)
    },
    translate: function (a) {
        var b = this.getActiveTwoLetterLanguageCode(),
            b = pokerapp.Translation[b].get(a);
        null == b && (b = pokerapp.Translation[this._defaultLangCode].get(a));
        null == b && (b = "");
        if (1 < arguments.length) try {
            var c = [b].concat(Array.prototype.slice.call(arguments, 1)),
                b = String.format.apply(void 0,
                    c)
        } catch (d) {
            jcore.log.warning("missing argument for translation: " + a)
        }
        return b
    }
});
pokerapp.Translator.instance = new pokerapp.Translator;
pokerapp.Translator.Translate = function () {
    var a = pokerapp.Translator.instance;
    return a.translate.apply(a, arguments)
};
pokerapp.LoadingPanel = jui.LoadingPanel.extend({
    _ui_playButton: null,
    ctor: function () {
        this._loading_background = this.getTheme().loading_config.loadingBackground;
        this._defaultTextStyle = this.getTheme().loading_config.textStyle;
        this._loading_panel_background = null;
        this.setDefaultSpriteConfig(this.getTheme().loading_config);
        this._super()
    },
    hideActionButtons: function () {
        null != this._ui_playButton && this._ui_playButton.setVisible(!1)
    },
    showActionButtons: function () {
        null != this._ui_playButton && !this._ui_playButton.isShowing() &&
            (this.onUpdateProgressStatus(""), this._ui_playButton.fadeIn(0.5))
    },
    createActionButtons: function (a) {
        this._ui_playButton = new jui.Button(R.sprites.button_guest_normal);
        this._ui_playButton.setHorizontalAlignment(jui.HorizontalAlignment.center);
        this._ui_playButton.setMargin({
            l: 15,
            t: 5,
            r: 5,
            b: 5
        });
        this._ui_playButton.setPadding({
            l: 4,
            t: 2,
            r: 4,
            b: 4
        });
        this._ui_playButton.bindClickEventListener(this._onPlayCallback, this);
        var b = new jui.TextBox(232, 45);
        b.setTextColor(cc.color(215, 215, 215));
        b.setTextSize(16);
        b.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
        b.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
        b.setTextValue("PLAY");
        this._ui_playButton.setContentNode(b);
        a.addWidgetChild(this._ui_playButton)
    },
    onUpdateProgressStatus: function (a, b, c, d) {
        if (!jcore.util.isNotNull(d) || !jcore.util.isNotNull(d.loadingIcon)) d = this._defaultLoadingSpriteConfig;
        if (null == this._ui_loadingPanel || this._currentLoadingSpriteConfig !== d) this._currentLoadingSpriteConfig = d, this._createLoadingPanel(d), this._ui_loadingIcon.setVisualState("animate");
        this._ui_statusLabel.setTextValue(a);
        this._ui_statusLabel.fadeIn()
    },
    _onPlayCallback: function () {
        !cc.sys.isNative && cc.sys.isMobile && (cc.screen.init(), cc.screen.requestFullScreen());
        this.onUpdateProgressStatus("CONNECTING...", 0, 0, null);
        this.hideActionButtons();
        cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_popup_login, {})
    }
});
pokerapp.UIAppViewManager = jui.ViewPanel.extend({
    ctor: function (a, b) {
        this._super(a, b)
    },
    getAllGameViews: function () {
        var a = this.getViews();
        return _.filter(a, function (a) {
            return this.isPokerGameView(a)
        })
    },
    isPokerGameView: function (a) {
        return a instanceof pokerapp.UIPokerGameView
    },
    findGameView: function (a) {
        a = a.getObjectId();
        return this.findView(a)
    }
});
pokerapp.UIAppViewManager.getInstance = function () {
    this._instance || (this._instance = new pokerapp.UIAppViewManager);
    return this._instance
};
pokerapp.CommandBar = jui.Panel.extend({
    _designSize: cc.size(760, 65),
    _designSize_webMobile: cc.size(640, 34),
    _designFieldSize_webMobile: cc.size(120, 30),
    _designFieldSize: cc.size(135, 40),
    _designPadding: 5,
    _designGap: 7,
    _textStyle: null,
    _rootLayer: null,
    ctor: function () {
        this._super();
        this._textStyle = this.getTheme().topbar_textStyle;
        !cc.sys.isNative && cc.sys.isMobile && (this._designSize = this._designSize_webMobile, this._designFieldSize = this._designFieldSize_webMobile, this._designPadding = 2, this._designGap = 3);
        this.setContentSize(this._designSize);
        this.setBackground("hud/topbar-background.png");
        this.setTouchEnabled(!0, !0)
    },
    attachRootPanel: function (a) {
        this._rootLayer = a;
        this._rootLayer.addScreenResizeListener(this)
    },
    _onScreenResized: function () {}
});
pokerapp.TopBar = pokerapp.CommandBar.extend({
    _uibutton_back: null,
    _uibutton_tables: null,
    _uibutton_game: null,
    _uiclock: null,
    _clockUpdateDelay: 0,
    ctor: function () {
        this._super();
        this._createControls()
    },
    setBackButtonVisible: function (a) {
        this._uibutton_back.isShowing() !== a && (a ? this._uibutton_back.fadeIn() : this._uibutton_back.hide())
    },
    _createControls: function () {
        this.setLayout(new jui.DockLayout);
        var a = new jui.Panel(this._designSize.width / 2, this._designSize.height);
        a.setLayout(new jui.StackLayout(jui.StackLayout.HORIZONTAL));
        this._uibutton_back = this._createButton(new jui.Image("hud/icn-back.png"), pokerapp.PokerAppEvents.event_back);
        this._uibutton_back.setMargin(jui.Margin({
            r: 2
        }));
        a.addChild(this._uibutton_back);
        var b = this._createButton(new jui.Image("hud/icn-account.png"), pokerapp.PokerAppEvents.event_popup_profile);
        a.addChild(b);
        b = this._createTextField(this._textStyle);
        a.addChild(b);
        var c = jcore.App.getInstance().getCurrentSkin().getDefaultCurrency(),
            d = pokerapp.LobbyService.getInstance().getUser().getBalanceObservable(c);
        b.setConverter(new pokerapp.BalanceToStringConverter(c));
        b.bindTextValue(d.getObservable("amount"));
        b = new jui.Panel(this._designSize.width / 2, this._designSize.height);
        b.setLayout(new jui.StackLayout(jui.StackLayout.HORIZONTAL));
        b.getLayout().setReverseLayoutDirection(!0);
        this._uibutton_game = this._createButton(new jui.Image("hud/icn-game.png"), pokerapp.PokerAppEvents.event_popup_menu_game);
        b.addChild(this._uibutton_game);
        this._uiclock = this._createClockField(this._textStyle);
        b.addChild(this._uiclock);
        this._uibutton_tables = new pokerapp.ActiveTablesButton;
        this._uibutton_tables.setMargin(jui.Margin({
            l: this._designGap,
            r: this._designGap
        }));
        jui.util.scaleToSize(this._uibutton_tables, this._designSize, !0, !0);
        b.addChild(this._uibutton_tables);
        b.setContentSizeToChildrenWidthAndHeight();
        a.setContentSizeToChildrenWidthAndHeight();
        this.addChild(a, jui.WidgetLayers.UI, new jui.DockLayoutProps(jui.DockLayoutEdge.left));
        this.addChild(b, jui.WidgetLayers.UI, new jui.DockLayoutProps(jui.DockLayoutEdge.right));
        a = new jui.Panel(this._designSize.width,
            this._designSize.height);
        b = new pokerapp.ChipTrayButton(this._textStyle);
        jui.util.scaleToSize(b, this._designSize, !0);
        a.addChild(b);
        this.addChild(a, jui.WidgetLayers.background, new jui.DockLayoutProps(jui.DockLayoutEdge.fill_all))
    },
    _adjustSizeWithDesignScale: function (a) {
        jui.Globals.getDesignScale()
    },
    _createButton: function (a, b) {
        var c = cc.size(this._designSize.height, this._designSize.height),
            d = new jui.Button(new jui.Button.Config({
                normal: "hud/btn-normal.png",
                pressed: "hud/btn-pressed.png"
            }), c.width, c.height);
        d.setVerticalAlignment(jui.VerticalAlignment.center);
        a && d.setContentNode(a, !1, c);
        this._adjustSizeWithDesignScale(d);
        b && d.addClickEventListener(function () {
            cc.eventManager.dispatchCustomEvent(b, d)
        });
        return d
    },
    _createNumberField: function (a) {
        var b = this._designFieldSize;
        a = new jui.NumberBox(null, null, a);
        a.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);
        a.setBackgroundSprite("hud/field-background.png", !1);
        a.setContentSize(b);
        a.setVerticalAlignment(jui.VerticalAlignment.center);
        a.setHorizontalAlignment(jui.HorizontalAlignment.center);
        a.setMargin({
            l: this._designGap,
            t: 0,
            r: this._designGap,
            b: 0
        });
        a.setPadding({
            l: this._designPadding + 4,
            t: 4,
            r: 4,
            b: 4
        });
        a.setChangeAnimation(!0, !1);
        return a
    },
    _createTextField: function (a) {
        var b = this._designFieldSize;
        a = new jui.TextBox(null, null, a);
        a.setTextHorizontalAlignment(jui.TextHorizontalAlignment.left);
        a.setBackground("hud/field-background.png", !1);
        a.setContentSize(b);
        a.setCenterAlignment();
        a.setMargin({
            l: this._designGap,
            t: 0,
            r: this._designGap,
            b: 0
        });
        a.setPadding({
            l: this._designPadding + 4,
            t: 4,
            r: 4,
            b: 4
        });
        a.setTextValue("");
        return a
    },
    _createClockField: function (a) {
        a = new jui.TextBox(0.65 * this._designFieldSize.width, this._designFieldSize.height, this._textStyle);
        a.setMargin(jui.Margin({
            l: this._designGap,
            r: this._designGap
        }));
        a.setBackground("hud/field-background.png", !1);
        a.setCenterAlignment();
        a.setTextCenteredAlignment();
        a.setTextValue("");
        return a
    },
    update: function (a) {
        var b = pokerapp.UIAppViewManager.getInstance().canPopView();
        this.setBackButtonVisible(b);
        b = pokerapp.UIAppViewManager.getInstance().getActiveView();
        null != b && b instanceof pokerapp.UIPokerGameView ? this._uibutton_game.show() : this._uibutton_game.hide();
        this._clockUpdateDelay += a;
        1 < this._clockUpdateDelay && this._uiclock.setTextValue(moment().format("LT"))
    }
});
pokerapp.BalanceToStringConverter = jui.ValueConverter.extend({
    _currency: null,
    ctor: function (a) {
        this._super();
        this._currency = a
    },
    convertValue: function (a) {
        return pokerapp.FormatUtil.formatCurrency(this._currency, a)
    }
});
pokerapp.BottomBar = pokerapp.CommandBar.extend({
    ctor: function () {
        this._super();
        this._createControls()
    },
    _createControls: function () {
        var a = new jui.Panel(this.width, this.height, new jui.StackLayout(jui.StackLayout.HORIZONTAL));
        a.setCenterAlignment();
        a.beginInitChildren();
        for (var b = 0; 3 > b; b++) {
            var c = new jui.Button(new jui.Button.Config({
                normal: "hud/btn-bar.png",
                pressed: "hud/btn-bar-pressed.png"
            }));
            c.setMargin({
                l: 15,
                t: 0,
                r: 15,
                b: 0
            });
            c.addClickEventListener(_.bind(function () {
                    jcore.App.getInstance().showAlert("Test menu option")
                },
                this));
            var d = null;
            0 == b ? d = new jui.Image("hud/icn-account2.png") : 1 == b ? d = new jui.Image("hud/icn-vip.png") : 2 == b && (d = new jui.Image("hud/icn-setting.png"));
            c.addChild(d);
            jui.util.alignAndAnchorCenter(d);
            a.addChild(c);
            jui.util.alignAndAnchorCenter(c)
        }
        a.endInitChildren(!0);
        a.setContentSizeToChildrenWidthAndHeight();
        this.addChild(a)
    },
    update: function (a) {
        a = pokerapp.UIAppViewManager.getInstance().getActiveView();
        null != a && a instanceof pokerapp.UIPokerGameView ? this.hide() : this.show()
    }
});
pokerapp.ChipTrayButton = jui.Panel.extend({
    _tableModel: null,
    _uibutton_buychips: null,
    _uibutton_rebuy: null,
    _uibutton_addon: null,
    ctor: function (a) {
        this._super();
        this.setTextStyle(a);
        this._createControls();
        pokerapp.UIAppViewManager.getInstance().on.activeViewChanged.add(this._onActiveViewChanged, this)
    },
    _createControls: function () {
        this.setBackground("hud/icn-chips-tray.png", !0);
        this.setCenterAlignment();
        this.setLayout(new jui.StackLayout(jui.StackLayout.VERTICAL));
        this.getLayout().setReverseLayoutDirection(!0);
        this._uibutton_buychips = this._createActionButton("BUY CHIPS");
        this._uibutton_buychips.addClickEventListener(_.bind(function () {
            cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_game_buychips, this._tableModel)
        }, this));
        this.addChild(this._uibutton_buychips);
        this._uibutton_rebuy = this._createActionButton("REBUY");
        this._uibutton_rebuy.addClickEventListener(_.bind(function () {
            cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_game_rebuy, this._tableModel)
        }, this));
        this.addChild(this._uibutton_rebuy);
        this._uibutton_addon = this._createActionButton("ADDON");
        this._uibutton_addon.addClickEventListener(_.bind(function () {
            cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_game_addon, this._tableModel)
        }, this));
        this.addChild(this._uibutton_addon);
        this._uibutton_buychips.setVisible(!1);
        this._uibutton_rebuy.setVisible(!1);
        this._uibutton_addon.setVisible(!1)
    },
    _createActionButton: function (a) {
        var b = new jui.ButtonLabel(new jui.Button.Config({
            normal: "hud/btn-chips-normal.png",
            pressed: "hud/btn-chips-pressed.png",
            testStyle: this.getTextStyle()
        }));
        b.setMargin(jui.Margin(4));
        b.setVerticalAlignment(jui.VerticalAlignment.bottom);
        b.setHorizontalAlignment(jui.HorizontalAlignment.center);
        b.setTextValue(a);
        return b
    },
    _onActiveViewChanged: function (a, b, c) {
        this._disposableContext.dispose();
        jcore.util.isNull(b) || !(b instanceof pokerapp.UIPokerGameView) ? this.hide() : (this.show(), this._tableModel = b.getPokerGame().getTableModel(), a = jui.util.bindWidgetVisibility(this._uibutton_buychips, this._tableModel.getObservable("allowBuyChips")),
            this._disposableContext.add(a), a = jui.util.bindWidgetVisibility(this._uibutton_rebuy, this._tableModel.getObservable("allowRebuy")), this._disposableContext.add(a), a = jui.util.bindWidgetVisibility(this._uibutton_addon, this._tableModel.getObservable("allowAddon")), this._disposableContext.add(a))
    }
});
pokerapp.ActiveTablesButton = jui.Panel.extend({
    ctor: function () {
        this._super();
        this._createControls();
        pokerapp.UIAppViewManager.getInstance().on.viewAdded.add(this._onUpdateViews, this);
        pokerapp.UIAppViewManager.getInstance().on.vizFewRemoved.add(this._onUpdateViews, this);
        pokerapp.UIAppViewManager.getInstance().on.activeViewChanged.add(this._onUpdateViews, this)
    },
    _createControls: function () {
        this.setBackground("hud/btn-tables-normal.png", !0);
        this.setCenterAlignment();
        this.setTouchEnabled(!0);
        this.bindClickEventListener(this._onClick,
            this)
    },
    _getAllGameViews: function () {
        var a = pokerapp.UIAppViewManager.getInstance().getViews();
        return _.filter(a, function (a) {
            return a instanceof pokerapp.UIPokerGameView
        })
    },
    _onUpdateViews: function (a, b) {
        0 < this._getAllGameViews().length ? this.show() : this.hide()
    },
    _onClick: function () {
        cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_popup_menu_tables, this)
    }
});
pokerapp.GameListItem = jui.Panel.extend({
    _designSize: cc.size(950, 90),
    _background_config: {
        asset: "lobby/cell-background.png"
    },
    _selected_config: {
        asset: "lobby/cell-selected.png"
    },
    _gameHeaderItem: null,
    _isSelected: !1,
    ctor: function (a, b) {
        this._super(this._designSize.width, this._designSize.height, b);
        this._gameHeaderItem = a;
        this.setBackground(this._background_config);
        this.setVerticalAlignment(jui.VerticalAlignment.center);
        this.setHorizontalAlignment(jui.HorizontalAlignment.stretch);
        this._createControls();
        this._updateData()
    },
    getGameItem: function () {
        return this._gameHeaderItem
    },
    isSelected: function () {
        return this._isSelected
    },
    setSelected: function (a) {
        a = jcore.util.orDefault(a, !0);
        this._isSelected != a && (this._isSelected = a, this._onSelectedChanged())
    },
    _onSelectedChanged: function () {
        this.isSelected() ? (this.setBackground(this._selected_config), jui.Effects.PressedOut(this, 0.25, 0.5), jui.Effects.CallFunction(this, 0.2, function () {
            cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_open_game, this.getGameItem())
        }, this), jui.Effects.CallFunction(this,
            1,
            function () {
                this.setSelected(!1)
            }, this)) : this.setBackground(this._background_config)
    },
    _createControls: function () {},
    _updateData: function () {}
});
pokerapp.RingGameListItem = pokerapp.GameListItem.extend({
    _action_positive_config: {
        asset: "lobby/cell-action-positive.png"
    },
    _action_negative_config: {
        asset: "lobby/cell-action-negative.png"
    },
    _designContentSize: cc.size(780, 65),
    _designContentPos: cc.p(408, 41),
    _designActionSize: cc.size(130, 90),
    _designActionPos: cc.p(885, 45),
    _uitxtbox_title: null,
    _uitxtbox_details: null,
    _uitxtbox_playerCount: null,
    _uicontentpanel: null,
    _uiactionpanel: null,
    ctor: function (a) {
        this._super(a, new jui.NoneLayout)
    },
    _createControls: function () {
        this._uicontentpanel =
            this._createContentPanel(this._designContentSize);
        this._uiactionpanel = this._createActionPanel(this._designActionSize);
        this._uicontentpanel.setAnchorPoint(cc.p(0.5, 0.5));
        this._uicontentpanel.setPosition(this._designContentPos);
        this._uiactionpanel.setAnchorPoint(cc.p(0.5, 0.5));
        this._uiactionpanel.setPosition(this._designActionPos);
        this.addChild(this._uicontentpanel, jui.WidgetLayers.UI);
        this.addChild(this._uiactionpanel, jui.WidgetLayers.UI)
    },
    _createContentPanel: function (a) {
        var b = new cc.Node;
        b.setContentSize(a.width,
            a.height);
        this._uitxtbox_title = new jui.TextBox(b.width, b.height / 2, this.getTheme().gamelist_textStyle);
        this._uitxtbox_title.setTextHorizontalAlignment(jui.TextHorizontalAlignment.left);
        this._uitxtbox_title.setTextVerticalAlignment(jui.TextVerticalAlignment.top);
        b.addChild(this._uitxtbox_title, jui.WidgetLayers.UI);
        this._uitxtbox_details = new jui.TextBox(b.width, b.height / 2, this.getTheme().gamelist_details_textStyle);
        this._uitxtbox_details.setTextHorizontalAlignment(jui.TextHorizontalAlignment.left);
        this._uitxtbox_details.setTextVerticalAlignment(jui.TextVerticalAlignment.top);
        b.addChild(this._uitxtbox_details, jui.WidgetLayers.UI);
        jui.util.align(this._uitxtbox_title, jui.HorizontalAlignment.left, jui.VerticalAlignment.top);
        jui.util.align(this._uitxtbox_details, jui.HorizontalAlignment.left, jui.VerticalAlignment.bottom);
        return b
    },
    _createActionPanel: function (a) {
        a = new jui.Panel(a.width, a.height, new jui.NoneLayout);
        var b = new jui.Image("lobby/icn-cell-user.png");
        b.setAnchorPoint(cc.p(0.5, 0.5));
        b.setPosition(cc.p(12 + b.width / 2, a.height / 2));
        a.addChild(b, jui.WidgetLayers.UI);
        this._uitxtbox_playerCount =
            new jui.TextBox(a.width - b.width - 12, a.height / 2, this.getTheme().gamelist_action_textStyle);
        this._uitxtbox_playerCount.setTextHorizontalAlignment(jui.TextHorizontalAlignment.left);
        this._uitxtbox_playerCount.setTextVerticalAlignment(jui.TextVerticalAlignment.center);
        this._uitxtbox_playerCount.setAnchorPoint(cc.p(0, 0.5));
        this._uitxtbox_playerCount.setPosition(cc.p(12 + b.width, a.height / 2));
        a.addChild(this._uitxtbox_playerCount, jui.WidgetLayers.UI);
        return a
    },
    _updateData: function () {
        var a = this.getGameItem();
        this._uitxtbox_title && this._uitxtbox_title.setTextValue(a.getTitle());
        if (this._uitxtbox_details) {
            var b = "" + pokerapp.FormatUtil.formatLimitType(a.limitType) + " " + pokerapp.FormatUtil.formatShortGameType(a.gameType),
                b = b + (" - " + pokerapp.FormatUtil.formatStake(a.stakes, a.limitType, !1, !1));
            this._uitxtbox_details.setTextValue(b)
        }
        this._uitxtbox_playerCount && (b = String.format("{0}/{1}", a.playersPlaying, a.maxSeats), this._uitxtbox_playerCount.setTextValue(b));
        this._uiactionpanel && (a.playersPlaying < a.maxSeats ? this._uiactionpanel.setBackground(this._action_positive_config) :
            this._uiactionpanel.setBackground(this._action_negative_config))
    }
});
pokerapp.TournamentGameListItem = pokerapp.GameListItem.extend({
    ctor: function (a) {
        this._super(a)
    }
});
pokerapp.GameListView = jui.Widget.extend({
    _listCtrl: null,
    _scrollView: null,
    _itemMargin: jui.Margin(2, 2, 2, 2),
    _selectedItem: null,
    _selectedItemView: null,
    _source: null,
    ctor: function (a, b) {
        this._super(a, b)
    },
    setItemsSource: function (a) {
        this._source = a;
        null != this._source ? this._source instanceof jcore.ObservableCollection ? (this._source.on.arrayChanged.add(_.bind(this._onItemsSourceChanged, this)), this._onPopulateList(this._source.getArray())) : this._onPopulateList(this._source) : this._onPopulateList([])
    },
    getSelectedItem: function () {
        return this._selectedItem
    },
    setSelectedItem: function (a) {
        itemView = this._listCtrl.findItemCell(a);
        this._selectListItem(a, itemView)
    },
    clearSelectedItem: function () {
        this.setSelectedItem(null)
    },
    _initContentNode: function () {
        this._listCtrl = new jui.ItemsPanel(this.width, this.height);
        this._listCtrl.setItemWidgetFactory(_.bind(this._createListItem, this));
        this._contentNode = this._scrollView = jui.util.createCCSScrollViewForWidget(this.width, this.height, this._listCtrl);
        this._contentNode.setAnchorPoint(cc.p(0.5, 0.5));
        this.addChild(this._contentNode,
            jui.WidgetLayers.UI)
    },
    _updateContentPositionAndSize: function () {
        this._super();
        null != this._listCtrl && null != this._scrollView && (this._listCtrl.x = this._scrollView.width / 2, this._listCtrl.width = this._scrollView.width)
    },
    _createListItem: function (a) {
        var b = null;
        a instanceof pokerapp.RingGameHeader ? b = new pokerapp.RingGameListItem(a) : a instanceof pokerapp.TournamentGameHeader ? b = new pokerapp.TournamentGameListItem(a) : (b = new jui.Widget(this.width, 5), b.setBackground(R.sprites.white));
        b.setMargin(this._itemMargin);
        b.setTouchEnabled(!0, !1);
        b.addClickEventListener(_.bind(function (a, b) {
            this._selectListItem(b, a)
        }, this, b, a));
        return b
    },
    _selectListItem: function (a, b) {
        var c = this._selectedItem;
        this._selectedItem != a && (null != this._selectedItemView && this._selectedItemView.setSelected && this._selectedItemView.setSelected(!1), this._selectedItemView = this._selectedItem = null);
        jcore.util.isNotNull(a) && (this._selectedItemView = b, this._selectedItem = a, null != this._selectedItemView && this._selectedItemView.setSelected && this._selectedItemView.setSelected(!0));
        c != this._selectedItem && this._onSelectionChanged(c, this._selectedItem)
    },
    _onPopulateList: function (a) {
        this._scrollView && this._scrollView.setVisible(!1);
        this.setSelectedItem(null);
        this._listCtrl.removeAllItems();
        a && a.length && (this._listCtrl.beginInitChildren(), this._listCtrl.addArrayOfItems(a), this._listCtrl.endInitChildren());
        this._scrollView && (this._scrollView.setVisible(!0), jui.util.setCCSScrollViewContentWidget(this._scrollView, this._listCtrl))
    },
    _onItemsSourceChanged: function (a, b) {
        this._onPopulateList(a)
    },
    _onSelectionChanged: function (a, b) {}
});
pokerapp.GameModeCarousel = jui.GesturePanel.extend({
    AUTO_SLIDE_DELAY: 20,
    SLIDE_LEFT: -1,
    SLIDE_RIGHT: 1,
    _effect_select: null,
    _projectionPanel: null,
    _uioptions: [],
    _targetPositions: [],
    _pivot: 0,
    _selectionBusy: !1,
    _autoSlideTimer: 0,
    _autoSlideEnabled: !1,
    ctor: function (a, b) {
        this._super(a, b);
        this._createControls()
    },
    setAutoSlideEnabled: function (a) {
        this._autoSlideEnabled = a;
        this._autoSlideTimer = 0
    },
    setPivot: function (a) {
        this._pivot != a && (this._pivot = jcore.util.orDefault(a, 0) % this._uioptions.length, this._slideItems(0))
    },
    spinAllItems: function () {
        for (var a = [], b = 0; b < this._uioptions.length; b++) a.push(cc.callFunc(_.bind(function () {
            this._slideItems(-1)
        }, this))), a.push(cc.delayTime(0.25));
        this.runAction(cc.sequence(a))
    },
    _createControls: function () {
        var a = this._projectionPanel = new jui.ProjectionPanel;
        a.setHorizontalAlignment(jui.HorizontalAlignment.center);
        a.setVerticalAlignment(jui.VerticalAlignment.center);
        var b = cc.p(-380, 0),
            b = {
                x: b.x,
                y: b.y,
                z: 18
            },
            c = this._createItem(b, pokerapp.PokerAppEvents.event_open_lobby_ringgames, new jui.Button.Config({
                normal: "lobby/lobby-option1.png"
            }));
        this._uioptions.push(c);
        this._targetPositions.push(b);
        b = cc.p(0, 0);
        b = {
            x: b.x,
            y: b.y,
            z: 0
        };
        c = this._createItem(b, pokerapp.PokerAppEvents.event_open_lobby_tournaments, new jui.Button.Config({
            normal: "lobby/lobby-option2.png"
        }));
        this._uioptions.push(c);
        this._targetPositions.push(b);
        b = cc.p(380, 0);
        b = {
            x: b.x,
            y: b.y,
            z: 18
        };
        c = this._createItem(b, pokerapp.PokerAppEvents.event_open_lobby_ringgames, new jui.Button.Config({
            normal: "lobby/lobby-option3.png"
        }));
        this._uioptions.push(c);
        this._targetPositions.push(b);
        b = cc.p(190,
            0);
        b = {
            x: b.x,
            y: b.y,
            z: 70
        };
        c = this._createItem(b, pokerapp.PokerAppEvents.event_lobby_test, new jui.Button.Config({
            normal: "lobby/lobby-option4.png"
        }));
        this._uioptions.push(c);
        this._targetPositions.push(b);
        b = cc.p(-190, 0);
        b = {
            x: b.x,
            y: b.y,
            z: 70
        };
        c = this._createItem(b, pokerapp.PokerAppEvents.event_popup_test, new jui.Button.Config({
            normal: "lobby/lobby-option5.png"
        }));
        this._uioptions.push(c);
        this._targetPositions.push(b);
        this.addWidgetChild(a);
        this._effect_select = cc.ParticleSystem.create("effects/iris.plist");
        this._effect_select.setVisible(!1);
        a.addChild(this._effect_select)
    },
    _createItem: function (a, b, c) {
        c = new jui.Button(c);
        c.setAnchorPoint(cc.p(0.5, 0.5));
        c.setPosition(cc.p(a.x, a.y));
        a = {
            x: a.x,
            y: a.y,
            z: a.z
        };
        c._touchMoveSensitivity = 12;
        c.addClickEventListener(_.bind(function (a, b) {
            this._optionClicked(a, b)
        }, this, b, c));
        return this._projectionPanel.addProjectedChild(c, a)
    },
    _optionClicked: function (a, b) {
        if (!this._selectionBusy) {
            this._selectionBusy = !0;
            var c = cc.sequence(cc.jumpBy(0.5, 0, 0, 10, 1), cc.delayTime(0.75), cc.callFunc(_.bind(function () {
                cc.eventManager.dispatchCustomEvent(a, {});
                this._selectionBusy = !1
            }, this)));
            b.runAction(c);
            c = b.getBoundingBox();
            c = cc.p(c.x + c.width / 2, c.y + 50);
            this._effect_select.setLocalZOrder(b.getLocalZOrder() - 1);
            this._effect_select.scaleX = b.scaleX;
            this._effect_select.scaleY = b.scaleY;
            this._effect_select.setPosition(c);
            this._effect_select.setVisible(!0);
            this._effect_select.scheduleUpdateWithPriority(1);
            this._effect_select.resetSystem()
        }
    },
    _slideItems: function (a) {
        this._autoSlideTimer = 0;
        var b = this._uioptions.length;
        this._pivot += a;
        0 > this._pivot && (this._pivot =
            b - 1);
        this._pivot >= b && (this._pivot = 0);
        for (a = 0; a < b; a++) {
            var c = (a + this._pivot) % b,
                c = jcore.util.clamp(0, c, this._targetPositions.length - 1),
                c = this._targetPositions[c];
            this._uioptions[a].moveToPosition3D(0.35, {
                x: c.x,
                y: c.y,
                z: c.z
            })
        }
    },
    _onGestureSwipeLeft: function () {
        this._super();
        this._slideItems(this.SLIDE_LEFT)
    },
    _onGestureSwipeRight: function () {
        this._super();
        this._slideItems(this.SLIDE_RIGHT)
    },
    onEnter: function () {
        this._super();
        this.scheduleUpdate()
    },
    update: function (a) {
        this.isVisible() && this._autoSlideEnabled &&
            (this._autoSlideTimer += a, this._autoSlideTimer > this.AUTO_SLIDE_DELAY && (this._autoSlideTimer = 0, this._slideItems(this.SLIDE_LEFT)))
    }
});
pokerapp.GameSelectionView = jui.Panel.extend({
    _designSize: cc.size(960, 520),
    _ccslayoutName: null,
    _gameList: null,
    _uibusy: null,
    ctor: function (a) {
        this._super(this._designSize.width, this._designSize.height, new jui.ScaledLayout);
        this._ccslayoutName = a;
        this._createControls()
    },
    showGameList: function (a) {
        this._beginLoading();
        var b = this,
            c = pokerapp.LobbyService.getInstance().refreshGamesList();
        null != c ? c.asPromise().then(function () {
            try {
                var c = pokerapp.DataObjectManager.getInstance().findWithFilter(a);
                b._gameList && b._gameList.setItemsSource(c)
            } finally {
                b._endLoading()
            }
        }).catch(function (a) {
            jcore.log.error(a.message);
            b._endLoading()
        }) : this._endLoading()
    },
    _createControls: function () {
        var a = new jui.CCSContainer(this._ccslayoutName);
        a.setCenterAlignment();
        var b = a.findCCSNode("Panel_List");
        this._createGameListControl(b);
        this.addChild(a)
    },
    _createGameListControl: function (a, b, c) {
        jcore.util.isNull(b) && (b = a.width);
        jcore.util.isNull(c) && (c = a.height);
        this._gameList = new pokerapp.GameListView(b, c);
        a.addChild(this._gameList, jui.WidgetLayers.UI);
        this._uibusy = new jui.Busy;
        this._uibusy.setAnchorPoint(cc.p(0.5, 0.5));
        this._uibusy.setPosition(cc.p(b /
            2, c / 2));
        this._uibusy.setVisible(!1);
        a.addChild(this._uibusy, jui.WidgetLayers.UI_Overlay)
    },
    _beginLoading: function () {
        this._uibusy.beginLoading()
    },
    _endLoading: function () {
        this._uibusy.endLoading()
    }
});
pokerapp.LobbyView = jui.View.extend({
    _designSize: cc.size(960, 520),
    _gameModeSelector: null,
    ctor: function () {
        this._super();
        this._createControls()
    },
    getViewIdentifier: function () {
        return "lobby"
    },
    canPopView: function () {
        return jcore.App.getInstance().isRunningEmbeddedMode() ? !0 : !1
    },
    _createControls: function () {
        this.setLayout(new jui.DockLayout);
        this.setContentSize(this._designSize);
        if (!jcore.App.getInstance().isRunningEmbeddedMode()) {
            var a = new jui.Panel(this._designSize.width, this._designSize.height);
            this._gameModeSelector =
                new pokerapp.GameModeCarousel(this._designSize.width, this._designSize.height);
            this._gameModeSelector.setCenterAlignment();
            a.addChild(this._gameModeSelector);
            var b = new jui.DockLayoutProps(jui.DockLayoutEdge.fill);
            b.scaleToFill = !0;
            this.addChild(a, jui.WidgetLayers.UI, b);
            this._gameModeSelector.setVisible(!1)
        }
    },
    onShowComplete: function () {
        this._super();
        if (this._gameModeSelector && (this._gameModeSelector.setAutoSlideEnabled(!0), this._gameModeSelector.setPivot(0), !this._gameModeSelector.isVisible())) {
            this._gameModeSelector.spinAllItems();
            this._gameModeSelector.setOpacity(0);
            this._gameModeSelector.setScale(0.1);
            this._gameModeSelector.setVisible(!0);
            var a = cc.spawn(cc.fadeIn(1.25), cc.scaleTo(1.25, 1, 1));
            this._gameModeSelector.runAction(a)
        }
    },
    onHideComplete: function () {
        this._super();
        this._gameModeSelector && this._gameModeSelector.setAutoSlideEnabled(!1)
    }
});
pokerapp.RingGameSelectionView = jui.View.extend({
    _designSize: cc.size(960, 520),
    _gamesView: null,
    ctor: function () {
        this._super();
        this._createControls()
    },
    getViewIdentifier: function () {
        return "lobby-ringgames"
    },
    _createControls: function () {
        this.setLayout(new jui.DockLayout);
        this.setContentSize(this._designSize);
        this._gamesView = new pokerapp.GameSelectionView("poker_ringgame_view.json");
        this._gamesView.setCenterAlignment();
        this._gamesView.setMargin(5);
        this.addChild(this._gamesView, jui.WidgetLayers.UI_Overlay, new jui.DockLayoutProps(jui.DockLayoutEdge.fill))
    },
    onShowComplete: function () {
        this._super();
        this._gamesView.showGameList(function (a) {
            return a instanceof pokerapp.RingGameHeader ? a.currency !== pokerapp.Currency.USD && a.currency !== pokerapp.Currency.EUR && a.currency !== pokerapp.Currency.XXX ? !1 : !0 : !1
        })
    }
});
pokerapp.TournamentGameSelectionView = jui.View.extend({
    _designSize: cc.size(960, 520),
    _gamesView: null,
    ctor: function () {
        this._super();
        this._createControls()
    },
    getViewIdentifier: function () {
        return "lobby-tournaments"
    },
    _createControls: function () {
        this.setLayout(new jui.DockLayout);
        this.setContentSize(this._designSize);
        this._gamesView = new pokerapp.GameSelectionView("poker_tournament_view.json");
        this._gamesView.setCenterAlignment();
        this._gamesView.setMargin(5);
        this.addChild(this._gamesView, jui.WidgetLayers.UI_Overlay,
            new jui.DockLayoutProps(jui.DockLayoutEdge.fill))
    },
    onShowComplete: function () {
        this._super();
        this._gamesView.showGameList(function (a) {
            return a instanceof pokerapp.TournamentGameHeader ? a.currency !== pokerapp.Currency.USD && a.currency !== pokerapp.Currency.EUR && a.currency !== pokerapp.Currency.XXX ? !1 : !0 : !1
        })
    }
});
pokerapp.BasePopup = jui.CCSPopup.extend({
    onHandleShow: function () {
        this.scaleIn()
    }
});
pokerapp.AlertPopup = pokerapp.BasePopup.extend({
    _autoCloseDelay: 10,
    ctor: function (a, b, c, d) {
        this._super("poker_alert_popup.json");
        var f = this.findCCSNode("Label_Title"),
            g = this.findCCSNode("Label_Message"),
            h = this.findCCSNode("Label_Button");
        jcore.util.isDefined(b) ? f.setString(b) : f.setVisible(!1);
        g.getVirtualRenderer() && g.getVirtualRenderer().setBoundingWidth && g.getVirtualRenderer().setBoundingWidth(450);
        jcore.util.isDefined(a) ? g.setString(a) : g.setVisible(!1);
        jcore.util.isDefined(c) && h.setString(c);
        a = this.findCCSNode("Button_Ok");
        null != a && a.addClickEventListener(_.bind(function () {
            this.closePopup();
            d && d()
        }, this))
    },
    onEnter: function () {
        this._super();
        this.scheduleUpdate()
    },
    update: function (a) {
        this._autoCloseDelay -= a;
        0 >= this._autoCloseDelay && this.closePopup()
    }
});
pokerapp.ProfilePopup = pokerapp.BasePopup.extend({
    ctor: function (a, b, c) {
        this._super("poker_profile_popup.json");
        this._createControls()
    },
    _createControls: function () {}
});
pokerapp.FilterPopup = pokerapp.BasePopup.extend({
    ctor: function (a, b, c) {
        this._super("poker_filters_popup.json")
    }
});
pokerapp.ChatPopup = pokerapp.BasePopup.extend({
    _tableModel: null,
    _uitextfield_message: null,
    _uibutton_send: null,
    _uichatBox: null,
    ctor: function (a) {
        this._super("poker_chat_popup.json");
        this._tableModel = a;
        this._createControls()
    },
    _createControls: function () {
        this._uitextfield_message = this.findCCSNode("TextField_Message");
        this._uibutton_send = this.findCCSNode("Button_Send");
        this._uibutton_send.addClickEventListener(_.bind(this._onSendMessage, this));
        var a = this.findCCSNode("Panel_Chat");
        this._uichatBox = new pokerapp.UIChatBox(a.width,
            a.height, !0);
        this._uichatBox.setExpandButtonVisible(!1);
        jui.util.replaceCCUINodeWidthJUIWidget(a, this._uichatBox, !0, !0)
    },
    _onSendMessage: function () {
        var a = this._uitextfield_message.getString();
        this._uitextfield_message.setString("");
        jcore.util.isNotNull(a) && "" !== a && this._tableModel.getGameController().sendPlayerChatMessage(a)
    },
    onEnter: function () {
        this._super();
        this._uichatBox.setTableModel(this._tableModel)
    },
    onExit: function () {
        this._super();
        this._uichatBox.setTableModel(null)
    }
});
pokerapp.BuyinPopup = pokerapp.BasePopup.extend({
    _tableModel: null,
    _buyinDetails: null,
    _playerBalance: null,
    _timeout: -1,
    _uiminTextBox: null,
    _uimaxTextBox: null,
    _uislider: null,
    _uibuyinTextBox: null,
    _uibalanceTextBox: null,
    _uierrorTextBox: null,
    ctor: function (a) {
        this._super("poker_buyin_popup.json");
        this._tableModel = a;
        this._timeout = this._tableModel.getCurrentBuyin().timeout;
        this._createControls()
    },
    _createControls: function () {
        this._createDetailsPanel(this.findCCSNode("Panel_Details"));
        this._createBalancePanel(this.findCCSNode("Panel_Balance"));
        this._createAcceptButton(this.findCCSNode("Panel_Accept"));
        this._createCancelButton(this.findCCSNode("Panel_Cancel"))
    },
    _createDetailsPanel: function (a) {
        var b = this.getTheme().popup_buyin_detail_config,
            c = new jui.Panel(a.width, a.height, new jui.StackLayout(jui.StackLayout.VERTICAL));
        jui.Widget.configureAttachmentsWithConfig(c, c.width, c.height, b);
        b = new jui.TextBox(c.width - 50, 35, c.getTextStyle());
        b.setMargin({
            b: 10
        });
        b.setHorizontalAlignment(jui.HorizontalAlignment.stretch);
        b.setTextCenteredAlignment();
        b.setTextValue("Ringgame Buyin: " +
            this._tableModel.getGameHeader().tableId);
        c.addChild(b);
        b = new jui.TextBox(c.width - 50, 35, c.getTextStyle());
        b.setMargin({
            b: 20
        });
        b.setHorizontalAlignment(jui.HorizontalAlignment.stretch);
        b.setTextCenteredAlignment();
        b.setTextValue(this._tableModel.getGameHeader().tableName);
        c.addChild(b);
        b = new jui.Panel(a.width - 160, 45);
        b.setCenterAlignment();
        b.setMargin({
            t: 15,
            b: 10
        });
        this._uiminTextBox = new jui.TextBox(null, null, this.getTheme().popup_buyin_detail_small_textConfig);
        this._uiminTextBox.setVerticalAlignment(jui.VerticalAlignment.center);
        this._uiminTextBox.setHorizontalAlignment(jui.HorizontalAlignment.left);
        this._uiminTextBox.setTextCenteredAlignment();
        this._uiminTextBox.setTextValue("MIN\n$100");
        b.addChild(this._uiminTextBox);
        this._uimaxTextBox = new jui.TextBox(null, null, this.getTheme().popup_buyin_detail_small_textConfig);
        this._uimaxTextBox.setVerticalAlignment(jui.VerticalAlignment.center);
        this._uimaxTextBox.setHorizontalAlignment(jui.HorizontalAlignment.right);
        this._uimaxTextBox.setTextCenteredAlignment();
        this._uimaxTextBox.setTextValue("MAX\n$200");
        b.addChild(this._uimaxTextBox);
        c.addChild(b);
        b = this.getTheme().popup_buyin_slider_config;
        this._uislider = new jui.Slider(b);
        this._uislider.setHorizontalAlignment(jui.HorizontalAlignment.center);
        this._uislider.setMargin({
            t: 10,
            b: 10
        });
        this._uislider.setRange(0, 100);
        this._uislider.on.valueChanged.add(this._onUpdateCurrentBuyinAmount, this);
        c.addChild(this._uislider);
        jui.util.replaceCCUINodeWidthJUIWidget(a, c, !0)
    },
    _createBalancePanel: function (a) {
        var b = this.getTheme().popup_buyin_balance_config,
            c = new jui.Panel(a.width,
                a.height);
        jui.Widget.configureAttachmentsWithConfig(c, c.width, c.height, b);
        b = new jui.Panel(a.width, 20, new jui.StackLayout(jui.StackLayout.VERTICAL));
        b.setCenterAlignment();
        b.setAutoSizeToChildren(!1, !0);
        this._uierrorTextBox = new jui.TextBox(c.width, 40, c.getTextStyle());
        this._uierrorTextBox.setHorizontalAlignment(jui.HorizontalAlignment.center);
        this._uierrorTextBox.setTextCenteredAlignment();
        this._uierrorTextBox.setMargin({
            b: 10
        });
        b.addChild(this._uierrorTextBox);
        this._uibalanceTextBox = new jui.TextBox(c.width,
            40, c.getTextStyle());
        this._uibalanceTextBox.setHorizontalAlignment(jui.HorizontalAlignment.center);
        this._uibalanceTextBox.setTextCenteredAlignment();
        b.addChild(this._uibalanceTextBox);
        b.invalidateLayout(!0);
        c.addChild(b);
        jui.util.replaceCCUINodeWidthJUIWidget(a, c, !0)
    },
    _createAcceptButton: function (a) {
        var b = this.getTheme().popup_buyin_accept_config,
            b = new jui.ButtonLabel(b, a.width, a.height);
        b.bindClickEventListener(this._onAcceptClicked, this);
        this._uibuyinTextBox = b.getLabel();
        jui.util.replaceCCUINodeWidthJUIWidget(a,
            b, !0)
    },
    _createCancelButton: function (a) {
        var b = this.getTheme().popup_buyin_cancel_config,
            b = new jui.ButtonLabel(b, a.width, a.height);
        b.bindClickEventListener(this._onCancelClicked, this);
        b.setTextValue("CANCEL");
        jui.util.replaceCCUINodeWidthJUIWidget(a, b, !0)
    },
    _updatePlayerBalance: function () {
        var a = this._tableModel.getCurrency(),
            b = this;
        this.beginProgress();
        var c = pokerapp.LobbyService.getInstance().refreshUserBalance(a);
        c.asPromise().then(function (d) {
            b.endProgress();
            d.isError() ? b._onRequestBalanceError(c) :
                (b._playerBalance = pokerapp.LobbyService.getInstance().getUser().getBalance(a, !1), b._uibalanceTextBox.setTextColor(cc.color(255, 255, 255)), b._uibalanceTextBox.setTextValue("BALANCE: " + pokerapp.FormatUtil.formatMoney(b._playerBalance)), b._setupBuyinValues())
        }).catch(function (a) {
            b.endProgress();
            b._onRequestBalanceError(c)
        })
    },
    _onRequestBalanceError: function (a) {
        this.closePopup();
        jcore.App.getInstance().showAlert("There was a problem requesting player balance, Please try again.")
    },
    _setupBuyinValues: function () {
        var a =
            this._tableModel.getGameHeader(),
            b = this._tableModel.getCurrentBuyin();
        this._buyinDetails = (new pokerapp.BuyinHelper).calculateBuyinDetails(a, this._playerBalance.amount, b.inPlay, b.ratHole, b.minBuyin, b.maxBuyin);
        this._uislider.setIncrementValue(this._buyinDetails.buyInIncrement);
        this._uislider.setRange(this._buyinDetails.minimumBuyInAmount, this._buyinDetails.maximumBuyInAmount);
        this._uislider.setValue(this._buyinDetails.buyInAmount);
        this._uiminTextBox.setTextValue("MIN\n" + pokerapp.FormatUtil.formatCurrency(a.currency,
            this._buyinDetails.minimumBuyInAmount));
        this._uimaxTextBox.setTextValue("MAX\n" + pokerapp.FormatUtil.formatCurrency(a.currency, this._buyinDetails.maximumBuyInAmount));
        this._onUpdateCurrentBuyinAmount()
    },
    _onUpdateCurrentBuyinAmount: function () {
        var a = this._tableModel.getGameHeader(),
            b = this._uislider.getValue();
        jcore.util.isNotNull(this._buyinDetails) && this._buyinDetails.errorInsufficentFunds ? (this._uibuyinTextBox.setTextValue("OPEN\nCASHIER"), this._uierrorTextBox.setTextValue("You do not have enough funds."),
            this._uibalanceTextBox.setTextColor(cc.color(240, 0, 0))) : 0 < b ? this._uibuyinTextBox.setTextValue("BUY-IN\n" + pokerapp.FormatUtil.formatCurrency(a.currency, b)) : (this.closePopup(), jcore.App.getInstance().showAlert("Buy Chips would exceed the maximum buy-in for table."))
    },
    _onAcceptClicked: function () {
        if (jcore.util.isNotNull(this._buyinDetails) && this._buyinDetails.allowBuyIn) {
            var a = jcore.util.orDefault(this._uislider.getValue(), 0);
            0 < a ? this._tableModel.getGameController().actionBuyIn(a) : this._tableModel.getGameController().actionCancelBuyIn()
        } else jcore.util.isNotNull(this._buyinDetails) &&
            this._buyinDetails.errorInsufficentFunds && cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_open_cashier, this);
        this.closePopup()
    },
    _onCancelClicked: function () {
        this._tableModel.getGameController().actionCancelBuyIn();
        this.closePopup()
    },
    _onClose: function () {
        this._tableModel.getCurrentBuyin().isActive() && this._onCancelClicked()
    },
    onShowComplete: function () {
        this._super();
        this._updatePlayerBalance()
    },
    onEnter: function () {
        this._super();
        this.beginProgress();
        this.scheduleUpdate()
    },
    update: function (a) {
        0 <
            this._timeout && (this._timeout -= a, 0 >= this._timeout && this.closePopup())
    }
});
pokerapp.RebuyPopup = pokerapp.BasePopup.extend({
    _tableModel: null,
    _buyinDetails: null,
    _playerBalance: null,
    _timeout: -1,
    _uiminTextBox: null,
    _uimaxTextBox: null,
    _uislider: null,
    _uibuyinTextBox: null,
    _uibalanceTextBox: null,
    _uierrorTextBox: null,
    _errorInsufficentFunds: !1,
    ctor: function (a) {
        this._super("poker_buyin_popup.json");
        this._tableModel = a;
        this._timeout = this._tableModel.getCurrentBuyin().timeout;
        this._createControls()
    },
    isRebuyMode: function () {
        return this._tableModel.getCurrentBuyin().getBuyinMode() === pokerapp.BuyinMode.rebuy
    },
    isAddonMode: function () {
        return this._tableModel.getCurrentBuyin().getBuyinMode() === pokerapp.BuyinMode.addon
    },
    _createControls: function () {
        this._createDetailsPanel(this.findCCSNode("Panel_Details"));
        this._createBalancePanel(this.findCCSNode("Panel_Balance"));
        this._createAcceptButton(this.findCCSNode("Panel_Accept"));
        this._createCancelButton(this.findCCSNode("Panel_Cancel"))
    },
    _createDetailsPanel: function (a) {
        var b = this.getTheme().popup_buyin_detail_config,
            c = new jui.Panel(a.width, a.height, new jui.StackLayout(jui.StackLayout.VERTICAL));
        jui.Widget.configureAttachmentsWithConfig(c, c.width, c.height, b);
        b = new jui.TextBox(c.width - 50, 35, c.getTextStyle());
        b.setMargin({
            b: 10
        });
        b.setHorizontalAlignment(jui.HorizontalAlignment.stretch);
        b.setTextCenteredAlignment();
        this.isRebuyMode() ? b.setTextValue("Tournament Rebuy: " + this._tableModel.getGameHeader().tournamentId) : b.setTextValue("Tournament Addon: " + this._tableModel.getGameHeader().tournamentId);
        c.addChild(b);
        b = new jui.TextBox(c.width - 50, 35, c.getTextStyle());
        b.setMargin({
            b: 35
        });
        b.setHorizontalAlignment(jui.HorizontalAlignment.stretch);
        b.setTextCenteredAlignment();
        b.setTextValue(this._tableModel.getGameHeader().description);
        c.addChild(b);
        if (this.isRebuyMode()) {
            var d = this._tableModel.getGameHeader().rebuyCost + this._tableModel.getGameHeader().rebuyFee,
                f = this._tableModel.getGameHeader().rebuyMaxAmount,
                b = new jui.TextBox(c.width - 50, 20, c.getTextStyle());
            b.setMargin({
                b: 20
            });
            b.setHorizontalAlignment(jui.HorizontalAlignment.stretch);
            b.setTextCenteredAlignment();
            b.setTextValue("Rebuy is " + pokerapp.FormatUtil.formatCurrency(this._tableModel.getGameHeader().currency,
                d) + " for " + f + " chips")
        } else d = this._tableModel.getGameHeader().addOnCost + this._tableModel.getGameHeader().addOnFee, f = this._tableModel.getGameHeader().addOnMaxAmount, b = new jui.TextBox(c.width - 50, 20, c.getTextStyle()), b.setMargin({
            b: 20
        }), b.setHorizontalAlignment(jui.HorizontalAlignment.stretch), b.setTextCenteredAlignment(), b.setTextValue("Addon is " + pokerapp.FormatUtil.formatCurrency(this._tableModel.getGameHeader().currency, d) + " for " + f + " chips");
        c.addChild(b);
        b = new jui.Panel(a.width - 160, 45);
        b.setCenterAlignment();
        b.setMargin({
            t: 15,
            b: 10
        });
        this._uiminTextBox = new jui.TextBox(null, null, this.getTheme().popup_buyin_detail_small_textConfig);
        this._uiminTextBox.setVerticalAlignment(jui.VerticalAlignment.center);
        this._uiminTextBox.setHorizontalAlignment(jui.HorizontalAlignment.left);
        this._uiminTextBox.setTextCenteredAlignment();
        this._uiminTextBox.setTextValue("MIN\n$100");
        b.addChild(this._uiminTextBox);
        this._uimaxTextBox = new jui.TextBox(null, null, this.getTheme().popup_buyin_detail_small_textConfig);
        this._uimaxTextBox.setVerticalAlignment(jui.VerticalAlignment.center);
        this._uimaxTextBox.setHorizontalAlignment(jui.HorizontalAlignment.right);
        this._uimaxTextBox.setTextCenteredAlignment();
        this._uimaxTextBox.setTextValue("MAX\n$200");
        b.addChild(this._uimaxTextBox);
        c.addChild(b);
        b = this.getTheme().popup_buyin_slider_config;
        this._uislider = new jui.Slider(b);
        this._uislider.setHorizontalAlignment(jui.HorizontalAlignment.center);
        this._uislider.setMargin({
            t: 10,
            b: 10
        });
        this._uislider.setRange(0, 100);
        this._uislider.on.valueChanged.add(this._onUpdateCurrentBuyinAmount, this);
        c.addChild(this._uislider);
        jui.util.replaceCCUINodeWidthJUIWidget(a, c, !0)
    },
    _createBalancePanel: function (a) {
        var b = this.getTheme().popup_buyin_balance_config,
            c = new jui.Panel(a.width, a.height);
        jui.Widget.configureAttachmentsWithConfig(c, c.width, c.height, b);
        b = new jui.Panel(a.width, 20, new jui.StackLayout(jui.StackLayout.VERTICAL));
        b.setCenterAlignment();
        b.setAutoSizeToChildren(!1, !0);
        this._uierrorTextBox = new jui.TextBox(c.width, 40, c.getTextStyle());
        this._uierrorTextBox.setHorizontalAlignment(jui.HorizontalAlignment.center);
        this._uierrorTextBox.setTextCenteredAlignment();
        this._uierrorTextBox.setMargin({
            b: 10
        });
        b.addChild(this._uierrorTextBox);
        this._uibalanceTextBox = new jui.TextBox(c.width, 40, c.getTextStyle());
        this._uibalanceTextBox.setHorizontalAlignment(jui.HorizontalAlignment.center);
        this._uibalanceTextBox.setTextCenteredAlignment();
        b.addChild(this._uibalanceTextBox);
        b.invalidateLayout(!0);
        c.addChild(b);
        jui.util.replaceCCUINodeWidthJUIWidget(a, c, !0)
    },
    _createAcceptButton: function (a) {
        var b = this.getTheme().popup_buyin_accept_config,
            b = new jui.ButtonLabel(b, a.width, a.height);
        b.bindClickEventListener(this._onAcceptClicked, this);
        this._uibuyinTextBox = b.getLabel();
        jui.util.replaceCCUINodeWidthJUIWidget(a, b, !0)
    },
    _createCancelButton: function (a) {
        var b = this.getTheme().popup_buyin_cancel_config,
            b = new jui.ButtonLabel(b, a.width, a.height);
        b.bindClickEventListener(this._onCancelClicked, this);
        b.setTextValue("CANCEL");
        jui.util.replaceCCUINodeWidthJUIWidget(a, b, !0)
    },
    _updatePlayerBalance: function () {
        var a = this._tableModel.getCurrency(),
            b = this;
        this.beginProgress();
        var c = pokerapp.LobbyService.getInstance().refreshUserBalance(a);
        c.asPromise().then(function (d) {
            b.endProgress();
            d.isError() ? b._onRequestBalanceError(c) : (b._playerBalance = pokerapp.LobbyService.getInstance().getUser().getBalance(a, !1), b._uibalanceTextBox.setTextColor(cc.color(255, 255, 255)), b._uibalanceTextBox.setTextValue("BALANCE: " + pokerapp.FormatUtil.formatMoney(b._playerBalance)), b._setupBuyinValues())
        }).catch(function (a) {
            b.endProgress();
            b._onRequestBalanceError(c)
        })
    },
    _onRequestBalanceError: function (a) {
        this.closePopup();
        jcore.App.getInstance().showAlert("There was a problem requesting player balance, Please try again.")
    },
    _setupBuyinValues: function () {
        this._tableModel.getGameHeader();
        var a = this._tableModel.getCurrentBuyin(),
            b = 1,
            b = this.isRebuyMode() ? this._tableModel.getGameHeader().isUnlimitedRebuys ? 99 : 1 < this._tableModel.getGameHeader().rebuyMaxCount && 0 >= a.inPlay ? 2 : 1 : 1;
        this._uislider.setIncrementValue(1);
        this._uislider.setRange(1, b);
        this._uislider.setValue(1);
        1 < b ? (this._uiminTextBox.setTextValue("1"), this._uimaxTextBox.setTextValue("" + b)) : (this._uislider.hide(), this._uiminTextBox.setTextValue(""), this._uimaxTextBox.setTextValue(""));
        this._onUpdateCurrentBuyinAmount()
    },
    _onUpdateCurrentBuyinAmount: function () {
        var a = this._tableModel.getGameHeader(),
            b = 0,
            b = this.isAddonMode() ? this._tableModel.getGameHeader().addOnCost + this._tableModel.getGameHeader().addOnFee : this._tableModel.getGameHeader().rebuyCost + this._tableModel.getGameHeader().rebuyFee,
            c = pokerapp.ConvertUtil.toInt(this._uislider.getValue(), 1);
        0 > c && (c = 1);
        b *= c;
        this._errorInsufficentFunds = !1;
        this._playerBalance.amount < b && (this._errorInsufficentFunds = !0);
        this._errorInsufficentFunds ?
            (this._uibuyinTextBox.setTextValue("OPEN\nCASHIER"), this._uierrorTextBox.setTextValue("You do not have enough funds."), this._uibalanceTextBox.setTextColor(cc.color(240, 0, 0))) : 0 < b && (this.isRebuyMode() ? this._uibuyinTextBox.setTextValue("REBUY\n" + pokerapp.FormatUtil.formatCurrency(a.currency, b)) : this._uibuyinTextBox.setTextValue("ADDON\n" + pokerapp.FormatUtil.formatCurrency(a.currency, b)))
    },
    _onAcceptClicked: function () {
        if (this._errorInsufficentFunds) cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_open_cashier,
            this);
        else {
            var a = pokerapp.ConvertUtil.toInt(this._uislider.getValue(), 1);
            this.isAddonMode() ? this._tableModel.getGameController().completeRebuyAddon(!0, a) : this._tableModel.getGameController().completeRebuyAddon(!1, a)
        }
        this.closePopup()
    },
    _onCancelClicked: function () {
        this.isAddonMode() ? this._tableModel.getGameController().actionCancelAddon() : this._tableModel.getGameController().actionCancelRebuy(!1);
        this.closePopup()
    },
    _onClose: function () {
        this._onCancelClicked()
    },
    onShowComplete: function () {
        this._super();
        this._updatePlayerBalance()
    },
    onEnter: function () {
        this._super();
        this.beginProgress();
        this.scheduleUpdate()
    },
    update: function (a) {
        0 < this._timeout && (this._timeout -= a, 0 >= this._timeout && this.closePopup())
    }
});
pokerapp.ConfirmPopup = pokerapp.BasePopup.extend({
    _autoCloseDelay: 10,
    ctor: function (a, b, c, d, f, g) {
        this._super("poker_confirm_popup.json");
        var h = this.findCCSNode("Label_Title"),
            m = this.findCCSNode("Label_Message"),
            n = this.findCCSNode("Label_Button_Ok"),
            p = this.findCCSNode("Label_Button_Cancel"),
            u = this.findCCSNode("Button_Ok"),
            v = this.findCCSNode("Button_Cancel");
        jcore.util.isDefined(b) ? h.setString(b) : h.setVisible(!1);
        m.getVirtualRenderer() && m.getVirtualRenderer().setBoundingWidth && m.getVirtualRenderer().setBoundingWidth(450);
        jcore.util.isDefined(a) ? m.setString(a) : m.setVisible(!1);
        jcore.util.isDefined(c) && n.setString(c);
        jcore.util.isDefined(d) && p.setString(d);
        null != u && u.addClickEventListener(_.bind(function () {
            this.closePopup();
            f && f()
        }, this));
        null != v && v.addClickEventListener(_.bind(function () {
            this.closePopup();
            g && g()
        }, this))
    },
    onEnter: function () {
        this._super();
        this.scheduleUpdate()
    },
    update: function (a) {
        this._autoCloseDelay -= a;
        0 >= this._autoCloseDelay && this.closePopup()
    }
});
pokerapp.MenuPopup = jui.Popup.extend({
    ctor: function () {
        this._super(180, 40);
        this.setLayout(new jui.StackLayout(!1));
        this.setAutoSizeToChildren(!0, !0);
        this._createControls();
        this.scale = Math.max(0.8, jui.Globals.getPopupScale())
    },
    _createControls: function () {},
    _createMenuItem: function (a, b, c) {
        c = new jui.Panel(180, 38);
        c.setLayout(new jui.StackLayout(!0));
        c.getLayout().setLayoutHiddenItems(!0);
        var d = new jui.Image("lobby/icn-tick.png");
        d.setVerticalAlignment(jui.VerticalAlignment.center);
        d.setMargin(jui.Margin({
            l: 4,
            r: 6
        }));
        d.setOpacity(b ? 255 : 0);
        c.addChild(d);
        d = new jui.TextBox(150, 28, this.getTextStyle());
        d.setVerticalAlignment(jui.VerticalAlignment.center);
        d.setTextHorizontalAlignment(jui.TextHorizontalAlignment.left);
        d.setTextValue(a);
        d.setMargin(jui.Margin({
            r: 8
        }));
        c.addChild(d);
        a = new jui.Button(new jui.Button.Config({
            normal: "lobby/btn-menu-item-normal.png",
            pressed: "lobby/btn-menu-item-pressed.png"
        }));
        a.setContentNode(c);
        a.setMargin(jui.Margin({
            t: 4,
            b: 4
        }));
        a.setPadding(jui.Margin({
            t: 5,
            b: 5
        }));
        a.setButtonMode(jui.Button.Mode.toggle);
        a.setToggle(b);
        this.addChild(a);
        return a
    }
});
pokerapp.GameMenuPopup = pokerapp.MenuPopup.extend({
    _pokerGame: null,
    ctor: function (a) {
        this._pokerGame = a;
        this._super()
    },
    _createControls: function () {
        this.setTextStyle(this.getTheme().gameMenu_textStyle);
        jui.Widget.configureAttachmentsWithConfig(this, this.width, this.height, this.getTheme().gameMenu_config);
        if (this._pokerGame) {
            var a = this._pokerGame.getTableModel();
            if (a) {
                var b = null;
                a.hasLocalPlayer() ? (a = this._pokerGame.getInstanceOptions().sitOutOnNextHand || this._pokerGame.getInstanceOptions().sitOutOnNextBigBlind,
                    this._pokerGame.isTournament() || (b = this._createMenuItem("AUTO BLINDS", this._pokerGame.isTournament() ? !0 : this._pokerGame.getInstanceOptions().autoPostBlinds, null), b.bindClickEventListener(this._onToggleAutoBlinds, this)), b = this._createMenuItem("AUTO MUCK", this._pokerGame.getInstanceOptions().autoMuck, null), b.bindClickEventListener(this._onToggleAutoMuck, this), b = this._createMenuItem("SIT OUT", a, null), b.bindClickEventListener(this._onSitOut, this), this._pokerGame.getTableModel().hasLastHandId() && (b = this._createMenuItem("LAST HAND",
                        !1, null), b.bindClickEventListener(this._onLastHand, this)), b = this._createMenuItem("LEAVE TABLE", !1, null)) : (this._pokerGame.getTableModel().hasLastHandId() && (b = this._createMenuItem("LAST HAND", !1, null), b.bindClickEventListener(this._onLastHand, this)), b = this._createMenuItem("CLOSE TABLE", !1, null));
                b.bindClickEventListener(this._onCloseTable, this)
            }
        }
    },
    _onSitOut: function (a) {
        this.closePopup();
        this._pokerGame && (this._pokerGame.getInstanceOptions().sitOutOnNextHand = a.isToggleOn(), a.isToggleOn() ? (this._pokerGame.executeGameCommand(new pokerapp.PokerSitOutNextHandCmd(!0)),
            this._pokerGame.getInstanceOptions().sitOutOnNextBigBlind = !1) : (this._pokerGame.executeGameCommand(new pokerapp.PokerSitOutNextHandCmd(!1)), this._pokerGame.doAction(pokerapp.PokerPlayerActions.SitIn)))
    },
    _onToggleAutoBlinds: function () {
        this.closePopup();
        this._pokerGame && !this._pokerGame.isTournament() && (this._pokerGame.getInstanceOptions().autoPostBlinds = !this._pokerGame.getInstanceOptions().autoPostBlinds, this._pokerGame.getInstanceOptions().autoPostBlinds && (this._pokerGame.getInstanceOptions().sitOutOnNextBigBlind = !1))
    },
    _onToggleAutoMuck: function () {
        this.closePopup();
        this._pokerGame && (this._pokerGame.getInstanceOptions().autoMuck = !this._pokerGame.getInstanceOptions().autoMuck)
    },
    _onCloseTable: function () {
        this.closePopup();
        this._pokerGame && (this._pokerGame.hasCardsDealt() ? this._pokerGame.leaveTableAfterCardsDealtPopup() : pokerapp.GameManagerService.getInstance().closeGame(this._pokerGame.getGameHeader()))
    },
    _onLastHand: function () {
        this.closePopup();
        (this._pokerGame || !this._pokerGame.getTableModel().hasLastHandId()) &&
        cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_open_handhistory, this._pokerGame.getTableModel())
    }
});
pokerapp.TableMenuPopup = pokerapp.MenuPopup.extend({
    ctor: function () {
        this._super()
    },
    _createControls: function () {
        this.setTextStyle(this.getTheme().tableMenu_textStyle);
        jui.Widget.configureAttachmentsWithConfig(this, this.width, this.height, this.getTheme().tableMenu_config);
        for (var a = pokerapp.UIAppViewManager.getInstance().getViews(), b = pokerapp.UIAppViewManager.getInstance().getActiveView(), a = _.filter(a, function (a) {
                return a instanceof pokerapp.UIPokerGameView
            }), c = 0; c < a.length; c++) {
            var d = a[c],
                f = "TABLE #" +
                d.getPokerGame().getGameHeader().tableId;
            d.getPokerGame().isTournament() && (f = "TOURNAMENT #" + d.getPokerGame().getGameHeader().tournamentId);
            this._createMenuItem(f, b === d, null).addClickEventListener(_.bind(function (a) {
                pokerapp.UIAppViewManager.getInstance().pushView(a)
            }, this, d))
        }
    }
});
pokerapp.UIPokerGameView = jui.View.extend({
    CHIPS_LAYER: 1,
    COMMUNITY_LAYER: 2,
    BANNER_LAYER: 3,
    SEATS_LAYER: 4,
    _pokerGame: null,
    _createdControls: !1,
    _designUIRootSize: cc.size(960, 490),
    _designActions: cc.size(960, 110),
    _updateDelay: 0,
    _updatePeriod: 0.1,
    _uiroot: null,
    _uihud: null,
    _uiactions_container: null,
    _uiactions: null,
    _tableLayout: null,
    _uielements: null,
    _uicommunity: null,
    _uitotalpot: null,
    _uitablemessage: null,
    _uidealerbutton: null,
    _dealerbutton_target: cc.p(0, 0),
    _ui_seats: null,
    _ui_chipstacks: null,
    _uibutton_moreTables: null,
    _uipanel_info: null,
    _uiconnectmessage: null,
    _uireconnectbutton: null,
    _lastShowDownWinners: null,
    _showHandStrength: null,
    _showWinnerHandStrength: null,
    _lastMaxPlayers: -1,
    ctor: function (a) {
        this._super();
        this._pokerGame = a;
        this._ui_seats = [];
        this._ui_chipstacks = [];
        this._tableLayout = new pokerapp.TableLayout;
        this._createControls()
    },
    getViewIdentifier: function () {
        return this._pokerGame.getGameHeader().getObjectId()
    },
    getViewTransition: function (a) {
        return null == a || !(a instanceof pokerapp.UIPokerGameView) ? jui.ViewTransition.fadeIn :
            jui.ViewTransition.slideInFromRight
    },
    shouldAddToBackStack: function () {
        return !1
    },
    getPokerGame: function () {
        return this._pokerGame
    },
    _createControls: function () {
        if (!this._createdControls) {
            this._createdControls = !0;
            this.setLayout(new jui.DockLayout);
            this.beginInitChildren();
            var a = new jui.GesturePanel(this._designUIRootSize.width, this._designUIRootSize.height, new jui.ScaledLayout);
            a.on.gestureSwipeLeft.add(this._onSwipeLeft, this);
            a.on.gestureSwipeRight.add(this._onSwipeRight, this);
            this._uiroot = new jui.Panel(this._designUIRootSize.width,
                this._designUIRootSize.height, new jui.NoneLayout);
            this._uiroot.setCenterAlignment();
            a.addChild(this._uiroot, jui.WidgetLayers.UI);
            this._createTable();
            this._createTableUIElements();
            this._createActionsPanel();
            this._uihud = new jui.Panel(this._designUIRootSize.width, this._designUIRootSize.height);
            this._createInfoPanel();
            this._uiconnectmessage = new pokerapp.UIConnectMessage;
            this.addChild(a, jui.WidgetLayers.UI, new jui.DockLayoutProps(jui.DockLayoutEdge.fill));
            this.addChild(this._uihud, jui.WidgetLayers.UI,
                new jui.DockLayoutProps(jui.DockLayoutEdge.fill));
            this.addChild(this._uiconnectmessage, jui.WidgetLayers.UI, new jui.DockLayoutProps(jui.DockLayoutEdge.fill));
            this.endInitChildren()
        }
    },
    _createInfoPanel: function () {
        this._uipanel_info = new pokerapp.UITableInfo;
        this._uipanel_info.setVisible(!1);
        this._uihud.addChild(this._uipanel_info)
    },
    _createTable: function () {
        var a = new jui.Image(this.getTheme().table_config);
        this._uiroot.addChild(a);
        jui.util.alignAndAnchorCenter(a)
    },
    _createTableUIElements: function () {
        this._uielements =
            new jui.Panel(this._designUIRootSize.width, this._designUIRootSize.height, new jui.NoneLayout);
        this._uielements.beginInitChildren();
        this._uiroot.addChild(this._uielements);
        jui.util.alignAndAnchorCenter(this._uielements);
        this._createCommunity(this._pokerGame);
        this._createSeats(this._pokerGame);
        this._uielements.endInitChildren()
    },
    _createCommunity: function (a) {
        a = a.getTableModel();
        this._uitotalpot || (this._uitotalpot = new pokerapp.UITotalPot(a), this._uitotalpot.setVisible(!1), this._uielements.addChild(this._uitotalpot,
            this.COMMUNITY_LAYER), jui.util.alignAndAnchorCenter(this._uitotalpot));
        this._uicommunity || (this._uicommunity = new pokerapp.UICardCollection(5), this._uielements.addChild(this._uicommunity, this.COMMUNITY_LAYER), jui.util.alignAndAnchorCenter(this._uicommunity), this._uicommunity.scale = 1.35, this._uicommunity.y -= 5);
        this._uitotalpot && this._uicommunity && (this._uitotalpot.y = this._uicommunity.y + this._uicommunity.height / 2 + 35)
    },
    _createSeats: function (a) {
        var b = a.getTableModel(),
            c = b.getSeatCount(),
            d = b.getMaxPlayersCount(),
            f = 2;
        if (a.getGameHeader().gameType == pokerapp.PokerGameType.Omaha || a.getGameHeader().gameType == pokerapp.PokerGameType.OmahaHiLo) f = 4;
        this._lastMaxPlayers = d;
        for (a = 0; a < c; a++) {
            var g = new pokerapp.UIChipStack(b, this._tableLayout._getChipStackLayoutMode(a, d));
            g.setAnchorPoint(cc.p(0.5, 0.5));
            g.setPosition(this._tableLayout._getChipStackLayoutPosition(a, d));
            g.setVisible(!1);
            this._uielements.addChild(g, this.CHIPS_LAYER);
            var h = new pokerapp.UITableSeat(f);
            h.setAnchorPoint(cc.p(0.5, 0.5));
            h.setPosition(this._tableLayout._getSeatLayoutPosition(a,
                d));
            h.setVisible(!1);
            this._uielements.addChild(h, this.SEATS_LAYER);
            this._ui_chipstacks.push(g);
            this._ui_seats.push(h)
        }
    },
    _createActionsPanel: function () {
        var a = cc.size(this._designActions.width, this._designActions.height);
        jui.Globals.isScreenLarge() ? a = cc.size(960, 205) : 640 > jui.Globals.screenHeight && (a.height *= jui.Globals.screenHeight / 640);
        this._uiactions = new pokerapp.UIPlayerActions(a.width, a.height);
        jui.Widget.configureAttachmentsWithConfig(this._uiactions, a.width, a.height, this.getTheme().actionsContainer_config);
        this.addChild(this._uiactions, jui.WidgetLayers.UI, new jui.DockLayoutProps(jui.DockLayoutEdge.bottom))
    },
    _updateSeatLayout: function (a) {
        a = a.getTableModel();
        a.getSeatCount();
        a = a.getMaxPlayersCount();
        if (this._lastMaxPlayers !== a) {
            this._lastMaxPlayers = a;
            this._uielements.beginInitChildren();
            for (var b = 0; b < this._ui_seats.length; b++) {
                var c = this._ui_chipstacks[b];
                c.setVisible(!1);
                c.setPosition(this._tableLayout._getChipStackLayoutPosition(b, a));
                c = this._ui_seats[b];
                c.setVisible(!1);
                c.setPosition(this._tableLayout._getSeatLayoutPosition(b,
                    a));
                c.setLocalZOrder(this._tableLayout._getSeatLayoutLayer(b, a))
            }
            this._uielements.endInitChildren()
        }
    },
    getUISeat: function (a) {
        return jcore.util.safeIndex(this._ui_seats, a, null)
    },
    getUISeatCount: function () {
        return this._ui_seats.length
    },
    getUIChipStack: function (a) {
        return jcore.util.safeIndex(this._ui_chipstacks, a, null)
    },
    _updateTableInfo: function (a) {
        a = a.getTableModel();
        this._uipanel_info.isShowing() || this._uipanel_info.fadeIn();
        this._uipanel_info.setTableModel(a)
    },
    _updateSeats: function (a) {
        var b = a.getTableModel(),
            c = b.getSeatCount(),
            d = this._uielements.convertToWorldSpace(cc.pAdd(cc.p(0, 40), this._uielements.getCenterPosition())),
            f = this._uitotalpot.getPosition(),
            g = b.moveBetsToPot;
        b.moveBetsToPot = !1;
        for (var h = b.isTournament() ? 300 : 30, m = !1, n = !1, p = 0, u = 0; u < c; u++) {
            var v = b.getSeat(u);
            if (v) {
                var x = v.getPlayer();
                null != x && x.hasCards() && (p += 1);
                var y = this.getUISeat(v.getSeatPosition()),
                    z = this.getUIChipStack(v.getSeatPosition());
                !jcore.util.isNull(y) && !jcore.util.isNull(z) && (y.updateModel(v, d, 0.1 * p), g && 0 < z.getChipValue() &&
                    (this._createMovePotAnimation(b, z.getLayoutMode(), z.getPosition(), f, z.getChipValue()), n = !0, m = m || z.getChipValue() > h * b.currentStakes.getLow()), null == x ? (z.setChipValue(0), z.hide()) : (z.setChipValue(x.getCurrentBet()), z.show()))
            }
        }
        n && a.playSound(m ? pokerapp.SoundId.CHIPS_LARGE : pokerapp.SoundId.CHIPS_SMALL)
    },
    _updatePots: function (a) {
        a = a.getTableModel();
        this._uitotalpot && (a = a.getTotalPot(), this._uitotalpot.setChipValue(a), 0 < a ? this._uitotalpot.show() : this._uitotalpot.hide())
    },
    _updateDealerButton: function (a) {
        a =
            a.getTableModel();
        var b = a.getDealerPosition();
        a = this._tableLayout._getDealerChipLayoutPosition(b, a.getMaxPlayersCount());
        jcore.util.isNull(this._uidealerbutton) ? (this._uidealerbutton = new jui.Image("game/chip-dealer.png"), this._uidealerbutton.setAnchorPoint(cc.p(0.5, 0.5)), this._uidealerbutton.setPosition(a), this._uielements.addChild(this._uidealerbutton, this.CHIPS_LAYER)) : cc.pointEqualToPoint(this._dealerbutton_target, a) || (this._dealerbutton_target = cc.p(a.x, a.y), this._uidealerbutton.runAction(cc.moveTo(0.25,
            a.x, a.y)))
    },
    _updateActions: function (a) {
        a = a.getTableModel();
        null != this._uiactions && this._uiactions.setTableModel(a)
    },
    _updateCommunity: function (a) {
        a = a.getTableModel();
        if (!jcore.util.isNull(this._uicommunity)) {
            a.hasCommunityCards() || this._uicommunity.reset();
            var b = a.getCommunityCards();
            this._uicommunity.setCards(b) && a.hasCommunityCards() && (this._showHandStrength = !0)
        }
    },
    _updateShowDown: function (a) {
        a = a.getTableModel();
        var b = a.getShowDownWinners();
        if (this._lastShowDownWinners !== b) {
            var c = [];
            if (jcore.util.isNotNull(b)) {
                this._showHandStrength = !1;
                this._showWinnerHandStrength = !0;
                b.getPotNumber();
                for (var d = this._uitotalpot.getPosition(), f = [].concat(b.getHiWinners()).concat(b.getLoWinners()), g = 0; g < f.length; g++) {
                    var h = f[g].getCards(),
                        m = f[g].getAmount(),
                        n = this.getUISeat(f[g].getSeatNumber()),
                        p = this.getUIChipStack(f[g].getSeatNumber());
                    jcore.util.isNotNull(n) && jcore.util.isNotNull(p) && (0 < h.length && (this._uicommunity.updateWinningCards(h), n.updateWinningCards(h)), 0 < m && this._createMovePotAnimation(a, p.getLayoutMode(), d, p.getPosition(), m, 0.1, 0.8),
                        c.push(n))
                }
            }
            for (g = 0; g < this.getUISeatCount(); g++) n = this.getUISeat(g), !jcore.util.isNull(n) && !_.contains(c, n) && n.updateWinningCards([]);
            this._lastShowDownWinners = b
        }
    },
    _updateHandStrength: function (a) {
        var b = a.getTableModel();
        a = "";
        var c = null;
        this._showWinnerHandStrength && jcore.util.isNotNull(this._lastShowDownWinners) ? (a = pokerapp.FormatUtil.formatHandInfo(this._lastShowDownWinners.getHandStrength().split(",")), c = this.getTheme().handstrength_win_config) : this._showHandStrength && (b.hasLocalPlayer() && b.getLocalPlayer().hasCards()) &&
            (a = pokerapp.FormatUtil.formatHandInfo([b.getLocalPlayer().handStrength]), c = this.getTheme().handstrength_config);
        "" !== a && (this._showWinnerHandStrength = this._showHandStrength = !1, b = new jui.TextBox(this._uicommunity.width * this._uicommunity.scale + 12, 34, c.textStyle), jui.Widget.configureAttachmentsWithConfig(b, b.width, b.height, c), b.setTextCenteredAlignment(), b.setOpacity(0), this._uielements.addChild(b, this.BANNER_LAYER), jui.util.alignAndAnchorCenter(b), b.y = this._uicommunity.y - this._uicommunity.height / 2 -
            5, b.setTextValue(a), b.hide(), jui.Effects.FadeInAndOut(b, 0.2, 1.5, 0.45, !0))
    },
    _updateMessages: function (a) {
        a = a.getTableModel();
        jcore.util.isNull(this._uitablemessage) && (this._uitablemessage = new pokerapp.UITableMessage, this._uitablemessage.setAnchorPoint(cc.p(0.5, 0.5)), this._uielements.addChild(this._uitablemessage, this.COMMUNITY_LAYER), jui.util.alignAndAnchorCenter(this._uitablemessage));
        this._uitablemessage.setTableModel(a)
    },
    _createMovePotAnimation: function (a, b, c, d, f, g, h) {
        g = jcore.util.orDefault(g, 0.01);
        h = jcore.util.orDefault(h, 0.01);
        a = new pokerapp.UIChipStack(a);
        a.setAnchorPoint(cc.p(0.5, 0.5));
        a.setPosition(c);
        a.setLayoutMode(b);
        a.setChipValue(f);
        this._uielements.addChild(a, this.CHIPS_LAYER);
        a.setVisible(!0);
        a.setOpacity(0);
        b = cc.sequence(cc.delayTime(g), cc.fadeIn(0.05), cc.moveTo(0.5, d.x, d.y), cc.delayTime(h), cc.fadeOut(0.15), cc.removeSelf());
        a.runAction(b);
        return a
    },
    _showConnectionMessage: function (a, b) {
        jcore.util.isNull(this._uiconnectmessage) || (a ? (this._uiconnectmessage.setMessage(jcore.util.orDefault(b,
            "Connecting")), this._uiconnectmessage.setAction(null, null), this._uiconnectmessage.isShowing() || this._uiconnectmessage.fadeIn()) : this._uiconnectmessage.fadeOut())
    },
    _showReConnectMessage: function () {
        this._uiconnectmessage.setMessage("Network Unavailable");
        this._uiconnectmessage.setAction("Reconnect", _.bind(this._onBeginReconnect, this));
        this._uiconnectmessage.isShowing() || this._uiconnectmessage.fadeIn()
    },
    _onBeginReconnect: function () {
        this._pokerGame && this._pokerGame.retryConnectGame()
    },
    _updateBuyin: function (a) {
        a =
            a.getTableModel();
        var b = a.getCurrentBuyin();
        if (null != b) switch (b.getBuyinState()) {
        case pokerapp.BuyinState.waitForUser:
            b.setBuyinState(pokerapp.BuyinState.waitForUserActive), a.isTournament() ? cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_popup_rebuy_addon, a) : cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_popup_buyin, a)
        }
    },
    _findNextView: function (a) {
        return pokerapp.UIAppViewManager.getInstance().findNextView(a, this, function (a) {
            return a instanceof pokerapp.UIPokerGameView
        })
    },
    _onSwipeLeft: function () {
        var a = this._findNextView(-1);
        null != a && a !== this && pokerapp.UIAppViewManager.getInstance().pushView(a, jui.ViewTransition.slideInFromRight)
    },
    _onSwipeRight: function () {
        var a = this._findNextView(1);
        null != a && a !== this && pokerapp.UIAppViewManager.getInstance().pushView(a, jui.ViewTransition.slideInFromLeft)
    },
    onEnter: function () {
        this._super();
        this.scheduleUpdate()
    },
    update: function (a) {
        this._updateDelay += a;
        if (!(this._updateDelay < this._updatePeriod)) {
            a = this._updateDelay;
            this._updateDelay = 0;
            var b = this._pokerGame;
            if (b) {
                var c = this.isShowing() && !b.isClosed() && pokerapp.UIAppViewManager.getInstance().getActiveView() === this;
                pokerapp.AudioService.getInstance().enableForSource(b, c);
                b.update(a);
                switch (b.getState()) {
                case pokerapp.PokerGameState.GAME_JOINING_TABLE:
                case pokerapp.PokerGameState.GAME_CONNECTING:
                case pokerapp.PokerGameState.GAME_CONNECTING_WAIT:
                    this._handleLoadingStates(b.getState());
                    this._lastShowDownWinners = null;
                    break;
                case pokerapp.PokerGameState.GAME_RUNNING:
                    if (!this.isShowing()) break;
                    this._updatePeriod = 0.2;
                    this._showConnectionMessage(!1);
                    this._updateBuyin(b);
                    this._updateTableInfo(b);
                    this._updateMessages(b);
                    this._updateSeatLayout(b);
                    this._updateSeats(b);
                    this._updatePots(b);
                    this._updateDealerButton(b);
                    this._updateActions(b);
                    this._updateCommunity(b);
                    this._updateShowDown(b);
                    this._updateHandStrength(b);
                    break;
                case pokerapp.PokerGameState.GAME_ERROR:
                case pokerapp.PokerGameState.GAME_DISCONNECTED:
                    this._handleLoadingStates(b.getState());
                    break;
                case pokerapp.PokerGameState.GAME_END:
                    this._updatePeriod =
                        1;
                    pokerapp.UIAppViewManager.getInstance().getActiveView() === this ? this.isShowing() ? (a = this._findNextView(1), null != a && a !== this ? pokerapp.UIAppViewManager.getInstance().pushView(a, jui.ViewTransition.slideInFromLeft, !0) : pokerapp.UIAppViewManager.getInstance().popView(!0)) : pokerapp.UIAppViewManager.getInstance().removeView(this) : pokerapp.UIAppViewManager.getInstance().removeView(this);
                    break;
                case pokerapp.PokerGameState.GAME_WAITING:
                    this._handleLoadingStates(b.getTargetState());
                    break;
                default:
                    this._showConnectionMessage(!0,
                        "Loading...")
                }
            }
        }
    },
    _handleLoadingStates: function (a) {
        switch (a) {
        case pokerapp.PokerGameState.GAME_JOINING_TABLE:
        case pokerapp.PokerGameState.GAME_CONNECTING:
            this._showConnectionMessage(!0, "Connecting...");
            break;
        case pokerapp.PokerGameState.GAME_CONNECTING_WAIT:
            this._showReConnectMessage();
            break;
        case pokerapp.PokerGameState.GAME_END:
        case pokerapp.PokerGameState.GAME_ERROR:
        case pokerapp.PokerGameState.GAME_DISCONNECTED:
            this._showConnectionMessage(!0, "Table Closed.")
        }
    }
});
pokerapp.UIBaseActionButton = jui.Button.extend({
    _designAmountLabelHeightPercentage: 0.38,
    _ui_action_label: null,
    _ui_amount_label: null,
    _tableModel: null,
    _actionState: null,
    _currentIndicatorType: null,
    ctor: function (a) {
        this._super(a);
        this.addClickEventListener(_.bind(this._onClick, this))
    },
    setTableModel: function (a) {
        this._tableModel = a
    },
    setActionState: function (a) {
        this._actionState !== a && (this._actionState = a, this._updateButton(this._actionState.action, this._actionState.amount, this._actionState.active), this._actionState.getObservable("action").subscribe(function () {
            this._updateButton(this._actionState.action,
                this._actionState.amount, this._actionState.active)
        }, this), this._actionState.getObservable("amount").subscribe(function () {
            this._updateButton(this._actionState.action, this._actionState.amount, this._actionState.active)
        }, this), this._actionState.getObservable("active").subscribe(function () {
            this._updateButton(this._actionState.action, this._actionState.amount, this._actionState.active)
        }, this))
    },
    _initContentNode: function () {
        var a = this._getContentNodeSize(),
            b = new cc.Node;
        b.setContentSize(a);
        b.setAnchorPoint(cc.p(0.5,
            0.5));
        b.setPosition(cc.p(a.width / 2, a.height / 2));
        this._ui_action_label = new jui.TextBox(a.width, a.height, this.getTextStyle());
        this._ui_action_label.setAnchorPoint(cc.p(0.5, 0.5));
        this._ui_action_label.setTextCenteredAlignment();
        b.addChild(this._ui_action_label);
        this._ui_amount_label = new jui.TextBox(a.width, a.height, this.getTextStyle());
        this._ui_amount_label.setAnchorPoint(cc.p(0.5, 0.5));
        this._ui_amount_label.setTextCenteredAlignment();
        b.addChild(this._ui_amount_label);
        this._contentNode = b;
        this.addChild(this._contentNode,
            jui.WidgetLayers.UI);
        this.invalidateLayout(!0)
    },
    _updateStyle: function (a) {
        jcore.util.isNull(a) || (this.setButtonConfiguration(a), a.amountLabel && this._ui_amount_label && (a = a.amountLabel, this._ui_amount_label.removeAllWidgetAttachments(), "string" === typeof a || jui.util.isInstanceOfSprite(a) ? this._ui_amount_label.setBackground(a, !1, jui.SizeMode.stretch_non_proportional) : "object" === typeof a && jui.Widget.configureAttachmentsWithConfig(this._ui_amount_label, this._ui_amount_label.width, this._ui_amount_label.height,
            a), this._updateLabelPosition()))
    },
    _updateContentPositionAndSize: function () {
        this._super();
        this._updateLabelPosition()
    },
    _updateLabelPosition: function () {
        var a = this._getContentNodeSize(),
            b = this._ui_amount_label.getMargin(),
            c = this._ui_action_label.getMargin(),
            c = cc.rect(c.l, c.b, a.width - c.l - c.r, a.height - c.t - c.b),
            d = 0;
        this._ui_amount_label.isVisible() && (a = cc.rect(b.l, b.b, a.width - b.l - b.r, a.height * this._designAmountLabelHeightPercentage - b.b - b.t), this._ui_amount_label.setContentSize(cc.size(a.width, a.height)),
            this._ui_amount_label.setPosition(cc.p(a.x + a.width / 2, a.y + a.height / 2)), d += a.height + b.b + b.t);
        c.y += d;
        c.height -= d;
        this._ui_action_label.setContentSize(cc.size(c.width, c.height));
        this._ui_action_label.setPosition(cc.p(c.x + c.width / 2, c.y + c.height / 2))
    },
    _updateButton: function (a, b, c) {
        var d = this._getTextForAction(a);
        b = this._getTextForAmount(b);
        var f = this._getIndicatorForAction(a);
        if (this._currentIndicatorType !== f) {
            var g = this._getButtonStyle(f);
            this._currentIndicatorType = f;
            this._updateStyle(g)
        }
        this._getVisibilityForAction(a) ?
            (this.setVisible(!0), this.setOpacity(255), this.setEnabled(!0), this.setToggle(c)) : this.isEnabled() && (this.setVisible(!0), this.setOpacity(150), this.setToggle(!1), this.setEnabled(!1));
        this._ui_action_label.setTextValue(d);
        this._ui_action_label.setVisible(this.isEnabled() && "" !== d);
        this._ui_amount_label.setTextValue(b);
        this._ui_amount_label.setVisible(this.isEnabled() && "" !== b);
        this._updateLabelPosition()
    },
    _onClick: function () {},
    _getVisibilityForAction: function (a) {
        return !1
    },
    _getButtonStyle: function (a) {
        return null
    },
    _getTextForAction: function (a) {
        return ""
    },
    _getTextForAmount: function (a) {
        return jcore.util.isNull(a) ? "" : a instanceof pokerapp.Money ? pokerapp.FormatUtil.formatMoney(a) : "" + a
    },
    _getIndicatorForAction: function (a) {
        return pokerapp.ActionIndicator.Neutral
    }
});
pokerapp.UIActionButton = pokerapp.UIBaseActionButton.extend({
    _positiveStyle: new jui.Button.Config({
        normal: "game/action-positive.png",
        pressed: "game/action-positive-pressed.png",
        disabled: "game/action-disable.png",
        amountLabel: {
            asset: "game/action-positive-amount.png",
            scale9: cc.rect(6, 6, 105, 29),
            margin: {
                l: 6,
                r: 6
            },
            depth: jui.WidgetLayers.background
        },
        textStyle: jui.Globals.actionsFont
    }),
    _negativeStyle: new jui.Button.Config({
        normal: "game/action-negative.png",
        pressed: "game/action-negative-pressed.png",
        disabled: "game/action-disable.png",
        amountLabel: {
            asset: "game/action-negative-amount.png",
            scale9: cc.rect(6, 6, 105, 29),
            margin: {
                l: 6,
                r: 6
            },
            depth: jui.WidgetLayers.background
        },
        textStyle: jui.Globals.actionsFont
    }),
    _nuetralStyle: new jui.Button.Config({
        normal: "game/action-nuetral.png",
        pressed: "game/action-nuetral-pressed.png",
        disabled: "game/action-disable.png",
        amountLabel: {
            asset: "game/action-nuetral-amount.png",
            scale9: cc.rect(6, 6, 105, 29),
            margin: {
                l: 6,
                r: 6
            },
            depth: jui.WidgetLayers.background
        },
        textStyle: jui.Globals.actionsFont
    }),
    _genericStyle: new jui.Button.Config({
        normal: "game/action-generic.png",
        pressed: "game/action-generic-pressed.png",
        disabled: "game/action-disable.png",
        amountLabel: {
            asset: "game/action-generic-amount.png",
            scale9: cc.rect(6, 6, 105, 29),
            margin: {
                l: 6,
                r: 6
            },
            depth: jui.WidgetLayers.background
        },
        textStyle: jui.Globals.actionsFont
    }),
    ctor: function () {
        this._super(this._positiveStyle)
    },
    _onClick: function () {
        this._tableModel && this._actionState && this._tableModel.getGameController().doAction(this._actionState.action, this._actionState.amount)
    },
    _getVisibilityForAction: function (a) {
        return a !== pokerapp.PokerPlayerActions.None
    },
    _getButtonStyle: function (a) {
        var b = this._positiveStyle;
        switch (a) {
        case pokerapp.ActionIndicator.Negative:
            b = this._negativeStyle;
            break;
        case pokerapp.ActionIndicator.Neutral:
            b = this._nuetralStyle;
            break;
        case pokerapp.ActionIndicator.Positive:
            b = this._positiveStyle;
            break;
        default:
            b = this._genericStyle
        }
        return b
    },
    _getTextForAction: function (a) {
        var b = "";
        switch (a) {
        case pokerapp.PokerPlayerActions.Call:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_Call);
            break;
        case pokerapp.PokerPlayerActions.Bet:
            b =
                pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_Bet);
            break;
        case pokerapp.PokerPlayerActions.Raise:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_Raise);
            break;
        case pokerapp.PokerPlayerActions.Client_BetOrRaiseAllIn:
        case pokerapp.PokerPlayerActions.AllIn:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_AllIn);
            break;
        case pokerapp.PokerPlayerActions.Fold:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_Fold);
            break;
        case pokerapp.PokerPlayerActions.Check:
            b =
                pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_Check);
            break;
        case pokerapp.PokerPlayerActions.BringIn:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_BringIn);
            break;
        case pokerapp.PokerPlayerActions.PostSB:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_PostSB);
            break;
        case pokerapp.PokerPlayerActions.PostBB:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_PostBB);
            break;
        case pokerapp.PokerPlayerActions.PostDB:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_PostDB);
            break;
        case pokerapp.PokerPlayerActions.PostAnte:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_PostAnte);
            break;
        case pokerapp.PokerPlayerActions.SitOut:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_SitOut);
            break;
        case pokerapp.PokerPlayerActions.WaitBB:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_WaitBB);
            break;
        case pokerapp.PokerPlayerActions.SitIn:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_TakeMySeat);
            break;
        case pokerapp.PokerPlayerActions.Client_PlayNow:
            b =
                pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_PlayNow);
            break;
        case pokerapp.PokerPlayerActions.Client_CancelRebuy:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_Leave);
            break;
        case pokerapp.PokerPlayerActions.Client_Rebuy:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_Rebuy);
            break;
        case pokerapp.PokerPlayerActions.Client_ReEnter:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_ReEnter);
            break;
        case pokerapp.PokerPlayerActions.Client_CancelReEnter:
            b =
                pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_Leave);
            break;
        case pokerapp.PokerPlayerActions.Client_Muck:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_MuckCards);
            break;
        case pokerapp.PokerPlayerActions.Client_ShowCards:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_ShowCards);
            break;
        case pokerapp.PokerPlayerActions.Client_AlwaysMuck:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_AlwaysMuckCards);
            break;
        case pokerapp.PokerPlayerActions.Client_JoinWaitList:
            b =
                pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_JoinWaitList);
            break;
        case pokerapp.PokerPlayerActions.Client_UnJoinWaitList:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_UnJoinWaitList);
            break;
        default:
            b = ""
        }
        return b
    },
    _getIndicatorForAction: function (a) {
        switch (a) {
        case pokerapp.PokerPlayerActions.Client_ShowCards:
        case pokerapp.PokerPlayerActions.Client_JoinWaitList:
        case pokerapp.PokerPlayerActions.Client_UnJoinWaitList:
        case pokerapp.PokerPlayerActions.Client_AlwaysMuck:
        case pokerapp.PokerPlayerActions.WaitBB:
        case pokerapp.PokerPlayerActions.Client_Rebuy:
        case pokerapp.PokerPlayerActions.Client_ReEnter:
        case pokerapp.PokerPlayerActions.Client_CancelReEnter:
        case pokerapp.PokerPlayerActions.Client_PlayNow:
        case pokerapp.PokerPlayerActions.Client_Muck:
        case pokerapp.PokerPlayerActions.SitIn:
        case pokerapp.PokerPlayerActions.SitOut:
            return pokerapp.ActionIndicator.Generic;
        case pokerapp.PokerPlayerActions.Call:
        case pokerapp.PokerPlayerActions.Check:
        case pokerapp.PokerPlayerActions.PostSB:
        case pokerapp.PokerPlayerActions.PostBB:
        case pokerapp.PokerPlayerActions.PostDB:
        case pokerapp.PokerPlayerActions.BringIn:
        case pokerapp.PokerPlayerActions.PostAnte:
            return pokerapp.ActionIndicator.Neutral;
        case pokerapp.PokerPlayerActions.Bet:
        case pokerapp.PokerPlayerActions.Raise:
        case pokerapp.PokerPlayerActions.AllIn:
        case pokerapp.PokerPlayerActions.Client_BetOrRaiseAllIn:
            return pokerapp.ActionIndicator.Positive;
        case pokerapp.PokerPlayerActions.Fold:
        case pokerapp.PokerPlayerActions.Client_CancelRebuy:
            return pokerapp.ActionIndicator.Negative;
        default:
            return pokerapp.ActionIndicator.Neutral
        }
    }
});
pokerapp.UIPreActionButton = pokerapp.UIBaseActionButton.extend({
    _negativeStyle: new jui.Button.Config({
        normal: "game/preaction-negative-off.png",
        pressed: "game/preaction-negative-off.png",
        selected: "game/preaction-negative.png",
        disabled: "game/preaction-disable.png",
        textStyle: jui.Globals.actionsFont,
        amountLabel: {
            margin: {
                b: 6
            }
        }
    }),
    _nuetralStyle: new jui.Button.Config({
        normal: "game/preaction-nuetral-off.png",
        pressed: "game/preaction-nuetral-off.png",
        selected: "game/preaction-nuetral.png",
        disabled: "game/preaction-disable.png",
        textStyle: jui.Globals.actionsFont,
        amountLabel: {
            margin: {
                b: 6
            }
        }
    }),
    ctor: function () {
        this._super(this._nuetralStyle);
        this.setButtonMode(jui.Button.Mode.toggle)
    },
    _onClick: function () {
        this._tableModel && this._actionState && this._tableModel.getGameController().setActivePreAction(this._actionState.action, this._actionState.amount, this.isToggleOn());
        (!this._actionState || this._tableModel.activePreAction !== this._actionState.action) && this.setToggle(!1)
    },
    _getVisibilityForAction: function (a) {
        return a !== pokerapp.PokerPlayerPreActions.None
    },
    _getButtonStyle: function (a) {
        var b = this._positiveStyle;
        switch (a) {
        case pokerapp.ActionIndicator.Negative:
            b = this._negativeStyle;
            break;
        default:
            b = this._nuetralStyle
        }
        return b
    },
    _getTextForAction: function (a) {
        var b = "";
        switch (a) {
        case pokerapp.PokerPlayerPreActions.CheckCallAny:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GamePreActions_CheckCallAny);
            break;
        case pokerapp.PokerPlayerPreActions.CallAny:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GamePreActions_CallAny);
            break;
        case pokerapp.PokerPlayerPreActions.BetRaiseAny:
            b =
                pokerapp.Translator.Translate(pokerapp.TranslationId.GamePreActions_BetRaiseAny);
            break;
        case pokerapp.PokerPlayerPreActions.RaiseAny:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GamePreActions_RaiseAny);
            break;
        case pokerapp.PokerPlayerPreActions.Raise:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GamePreActions_RaiseTo);
            break;
        case pokerapp.PokerPlayerPreActions.BetRaiseAllIn:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GamePreActions_BetRaiseAllIn);
            break;
        case pokerapp.PokerPlayerPreActions.Bet:
            b =
                pokerapp.Translator.Translate(pokerapp.TranslationId.GamePreActions_Bet);
            break;
        case pokerapp.PokerPlayerPreActions.Call:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GamePreActions_Call);
            break;
        case pokerapp.PokerPlayerPreActions.CallAllIn:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GamePreActions_CallAllIn);
            break;
        case pokerapp.PokerPlayerPreActions.Check:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GamePreActions_Check);
            break;
        case pokerapp.PokerPlayerPreActions.CheckFold:
            b =
                pokerapp.Translator.Translate(pokerapp.TranslationId.GamePreActions_CheckFold);
            break;
        case pokerapp.PokerPlayerPreActions.Fold:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GamePreActions_Fold);
            break;
        case pokerapp.PokerPlayerPreActions.FoldToAnyBet:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GamePreActions_FoldToAnyBet);
            break;
        case pokerapp.PokerPlayerPreActions.AllIn:
            b = pokerapp.Translator.Translate(pokerapp.TranslationId.GamePreActions_AllIn);
            break;
        default:
            b = ""
        }
        return b
    },
    _getIndicatorForAction: function (a) {
        switch (a) {
        case pokerapp.PokerPlayerPreActions.Check:
        case pokerapp.PokerPlayerPreActions.Call:
        case pokerapp.PokerPlayerPreActions.CallAny:
        case pokerapp.PokerPlayerPreActions.CallAllIn:
        case pokerapp.PokerPlayerPreActions.CheckCallAny:
            return pokerapp.ActionIndicator.Neutral;
        case pokerapp.PokerPlayerPreActions.Bet:
        case pokerapp.PokerPlayerPreActions.BetRaiseAllIn:
        case pokerapp.PokerPlayerPreActions.Raise:
        case pokerapp.PokerPlayerPreActions.RaiseAny:
        case pokerapp.PokerPlayerPreActions.BetRaiseAny:
        case pokerapp.PokerPlayerPreActions.Pot:
        case pokerapp.PokerPlayerPreActions.AllIn:
            return pokerapp.ActionIndicator.Positive;
        case pokerapp.PokerPlayerPreActions.FoldToAnyBet:
        case pokerapp.PokerPlayerPreActions.CheckFold:
        case pokerapp.PokerPlayerPreActions.Fold:
            return pokerapp.ActionIndicator.Negative;
        default:
            return pokerapp.ActionIndicator.Neutral
        }
    }
});
pokerapp.UIActionProgress = jui.ProgressBox.extend({
    ANIM_BLINK_TAG: 95493,
    _fill_red: null,
    _fill_normal: null,
    ctor: function (a, b, c, d) {
        this._super(a, b, c, d);
        this.setAnimateValueOptions(!1, !1, 0.25);
        this._fill_normal = this._ui_fill;
        this._fill_red = jui.util.sprite.create("game/action-timer-red.png");
        this._fill_red.setVisible(!1);
        this.addChild(this._fill_red)
    },
    _updateFillPercentage: function (a, b) {
        0.6 < a ? this._setFillSprite(this._fill_normal) : this._setFillSprite(this._fill_red);
        if (0.35 > a) {
            var c = this._ui_fill.getActionByTag(this.ANIM_BLINK_TAG);
            c || (c = cc.sequence(cc.fadeIn(0.1), cc.delayTime(0.1), cc.fadeOut(0.1)).repeatForever(), c.setTag(this.ANIM_BLINK_TAG), this._ui_fill.runAction(c))
        } else this._ui_fill.stopActionByTag(this.ANIM_BLINK_TAG), this._ui_fill.setOpacity(255);
        this._super(a, b)
    }
});
pokerapp.UIGameTabs = jui.Panel.extend({
    _designPadding: jui.Padding({
        l: 2
    }),
    _designTabMargin: jui.Margin(1),
    _uibutton_chat: null,
    _uibutton_info: null,
    _uipanel_chat: null,
    _uipanel_info: null,
    _tableModel: null,
    ctor: function (a, b) {
        this._super(a, b, new jui.DockLayout);
        this._createControls()
    },
    _createControls: function () {
        this.setPadding(this._designPadding);
        var a = this.getContentNodeSize(),
            b = cc.size(a.height / 2 - 5, a.height / 2 - 5);
        this._uipanel_chat = this._createChatPanel();
        this.addChild(this._uipanel_chat, jui.WidgetLayers.UI,
            new jui.DockLayoutProps(jui.DockLayoutEdge.fill));
        a = new jui.Panel(a.height / 2, this.height);
        a.setLayout(new jui.StackLayout(!1));
        a.setPadding(this._designTabMargin);
        this._uibutton_chat = this._createIconButton(b, new jui.Image("game/icn-chat.png"));
        this._uibutton_chat.on.toggled.add(this._onToggleTab, this);
        a.addChild(this._uibutton_chat);
        this._uibutton_info = this._createIconButton(b, new jui.Image("game/icn-stats.png"));
        this._uibutton_info.on.toggled.add(this._onToggleTab, this);
        a.addChild(this._uibutton_info);
        this.addChild(a, jui.WidgetLayers.UI + 1, new jui.DockLayoutProps(jui.DockLayoutEdge.left));
        this._uibutton_chat.setToggle(!0)
    },
    _createIconButton: function (a, b) {
        var c = new jui.Button(new jui.Button.Config({
            normal: "game/btn-tab-off.png",
            pressed: "game/btn-tab.png",
            selected: "game/btn-tab.png",
            textStyle: this.getTheme().actionbuttons_textStyle
        }), a.width, a.height);
        c.setMargin(jui.Margin(2));
        c.setHorizontalAlignment(jui.HorizontalAlignment.center);
        c.setContentNode(b, !1, b.getContentSize());
        c.setButtonMode(jui.Button.Mode.toggle);
        return c
    },
    _createChatPanel: function () {
        var a = new pokerapp.UIChatBox(this.getContentNodeSize().width, this.getContentNodeSize().height);
        a.setMargin(this._designTabMargin);
        return a
    },
    _createTournamentInfoPanel: function (a) {
        null != this._uipanel_info && this.removeChild(this._uipanel_info);
        this._uipanel_info = new pokerapp.UITournamentGameInfoTab(a, this.getContentNodeSize().width, this.getContentNodeSize().height);
        this._uipanel_info.setMargin(this._designTabMargin);
        this.addChild(this._uipanel_info, jui.WidgetLayers.UI,
            new jui.DockLayoutProps(jui.DockLayoutEdge.fill))
    },
    _createRinggameInfoPanel: function (a) {
        null != this._uipanel_info && this.removeChild(this._uipanel_info);
        this._uipanel_info = new pokerapp.UIRingGameInfoTab(a, this.getContentNodeSize().width, this.getContentNodeSize().height);
        this._uipanel_info.setMargin(this._designTabMargin);
        this.addChild(this._uipanel_info, jui.WidgetLayers.UI, new jui.DockLayoutProps(jui.DockLayoutEdge.fill))
    },
    _onToggleTab: function (a) {
        a === this._uibutton_chat ? this._uibutton_info.setToggle(!this._uibutton_chat.isToggleOn()) :
            a === this._uibutton_info && this._uibutton_chat.setToggle(!this._uibutton_info.isToggleOn());
        this._uipanel_chat.setVisible(this._uibutton_chat.isToggleOn());
        jcore.util.isNotNull(this._uipanel_info) && this._uipanel_info.setVisible(this._uibutton_info.isToggleOn())
    },
    setTableModel: function (a) {
        this._tableModel !== a && (this._tableModel = a, null != this._tableModel && (this._tableModel.isTournament() ? this._createTournamentInfoPanel(a) : this._createRinggameInfoPanel(a), this._uipanel_info.setVisible(this._uibutton_info.isToggleOn())));
        this._uipanel_chat.setTableModel(a)
    }
});
pokerapp.UIPlayerActions = jui.Panel.extend({
    ACTION_BUTTON_MAX: 3,
    PREACTION_BUTTON_MAX: 3,
    _designChatBoxSize: cc.size(380, 110),
    _designGap: 6,
    _uibutton_actions: null,
    _uibutton_preactions: null,
    _uipanel_action: null,
    _uipanel_preaction: null,
    _uipanel_bet: null,
    _uipanel_chat: null,
    ctor: function (a, b) {
        this._super(a, b, new jui.ColumnLayout(2));
        this.setCenterAlignment();
        this._uibutton_actions = [];
        this._uibutton_preactions = [];
        this._createControls()
    },
    _createControls: function () {
        var a = new jui.Panel(0.45 * this.width, this.height,
                new jui.DockLayout),
            b = new jui.Panel(0.55 * this.width, this.height, new jui.DockLayout);
        a.setVerticalAlignment(jui.VerticalAlignment.stretch);
        b.setVerticalAlignment(jui.VerticalAlignment.stretch);
        this._uipanel_action = this._createActionPanel(b.width, b.height);
        this._uipanel_preaction = this._createPreActionPanel(b.width, b.height);
        this._uipanel_chat = this._createChatPanel(a.width, a.height);
        this._uipanel_bet = this._createBetPanel(a.width, a.height);
        a.addChild(this._uipanel_chat, jui.WidgetLayers.UI);
        a.addChild(this._uipanel_bet,
            jui.WidgetLayers.UI);
        b.addChild(this._uipanel_action, jui.WidgetLayers.UI);
        b.addChild(this._uipanel_preaction, jui.WidgetLayers.UI);
        this.addChild(a, jui.WidgetLayers.UI, new jui.ColumnLayoutProps(45));
        this.addChild(b, jui.WidgetLayers.UI, new jui.ColumnLayoutProps(55));
        this._uipanel_action.setVisible(!1);
        this._uipanel_preaction.setVisible(!1);
        this._uipanel_chat.setVisible(!0);
        this._uipanel_bet.setVisible(!1)
    },
    _createActionPanel: function (a, b) {
        var c = new jui.Panel(a, b, new jui.ColumnLayout(this.ACTION_BUTTON_MAX));
        c.beginInitChildren();
        for (var d = 0; d < this.ACTION_BUTTON_MAX; d++) {
            var f = new pokerapp.UIActionButton;
            f.setName("Action Button " + d);
            f.setVerticalAlignment(jui.VerticalAlignment.stretch);
            f.setPadding(4);
            f.setMargin({
                l: this._designGap / 2,
                r: this._designGap / 2
            });
            c.addChild(f);
            this._uibutton_actions.push(f)
        }
        c.endInitChildren(!0);
        return c
    },
    _createBetPanel: function (a, b) {
        var c = new pokerapp.UIQuickBetPanel(this._designChatBoxSize.width, this._designChatBoxSize.height);
        c.setHorizontalAlignment(jui.HorizontalAlignment.left);
        c.setVerticalAlignment(jui.VerticalAlignment.center);
        c.setMargin({
            r: this._designGap / 2
        });
        return c
    },
    _createPreActionPanel: function (a, b) {
        var c = new jui.Panel(a, b, new jui.ColumnLayout(this.PREACTION_BUTTON_MAX));
        c.beginInitChildren();
        for (var d = 0; d < this.PREACTION_BUTTON_MAX; d++) {
            var f = new pokerapp.UIPreActionButton;
            f.setName("PreAction Button " + d);
            f.setVerticalAlignment(jui.VerticalAlignment.stretch);
            f.setPadding(4);
            f.setMargin({
                l: this._designGap,
                r: this._designGap,
                t: 2 * this._designGap,
                b: 2 * this._designGap
            });
            c.addChild(f);
            this._uibutton_preactions.push(f)
        }
        c.endInitChildren(!0);
        return c
    },
    _createChatPanel: function (a, b) {
        var c = new pokerapp.UIGameTabs(a, b);
        c.setHorizontalAlignment(jui.HorizontalAlignment.left);
        c.setVerticalAlignment(jui.VerticalAlignment.center);
        c.setMargin({
            r: this._designGap / 2
        });
        return c
    },
    setTableModel: function (a) {
        if (this._tableModel !== a && (this._tableModel = a, this._uipanel_chat.setTableModel(a), this._uipanel_bet.setTableModel(a), null != this._tableModel)) {
            this.beginInitChildren();
            this._uipanel_action.setVisible(this._tableModel.anyAction);
            this._uipanel_chat.setVisible(!this._tableModel.anyAction);
            this._uipanel_bet.setVisible(this._tableModel.anyBetAction);
            this._uipanel_preaction.setVisible(this._tableModel.anyPreAction && !this._tableModel.anyAction);
            this._tableModel.getObservable("anyAction").subscribe(function () {
                this._uipanel_action.setVisible(this._tableModel.anyAction);
                this._uipanel_preaction.setVisible(this._tableModel.anyPreAction && !this._tableModel.anyAction)
            }, this);
            this._tableModel.getObservable("anyPreAction").subscribe(function () {
                this._uipanel_preaction.setVisible(this._tableModel.anyPreAction &&
                    !this._tableModel.anyAction)
            }, this);
            this._tableModel.getObservable("anyBetAction").subscribe(function () {
                this._uipanel_bet.setVisible(this._tableModel.anyBetAction);
                this._uipanel_chat.setVisible(!this._tableModel.anyBetAction)
            }, this);
            for (var b = 0; b < this._uibutton_actions.length; b++) a.getActionStates().getCount() > b && (this._uibutton_actions[b].setTableModel(a), this._uibutton_actions[b].setActionState(a.getActionStates().getAt(b)));
            for (b = 0; b < this._uibutton_preactions.length; b++) a.getPreActionStates().getCount() >
                b && (this._uibutton_preactions[b].setTableModel(a), this._uibutton_preactions[b].setActionState(a.getPreActionStates().getAt(b)));
            this.endInitChildren(!0)
        }
    }
});
pokerapp.UIBetPanel = jui.Panel.extend({
    _designGap: 8,
    _tableModel: null,
    _uibutton_halfPot: null,
    _uibutton_pot: null,
    _uibutton_allIn: null,
    _uislider_bet: null,
    _uibutton_min: null,
    _uibutton_max: null,
    ctor: function (a, b) {
        this._super(a, b, new jui.StackLayout(jui.StackLayout.VERTICAL));
        this._createControls()
    },
    _createControls: function () {
        var a = this.getContentNodeSize(),
            b = new jui.Panel(a.width, a.height / 2, new jui.DockLayout),
            a = new jui.Panel(a.width, a.height / 2, new jui.ColumnLayout(3));
        a.setHorizontalAlignment(jui.HorizontalAlignment.stretch);
        b.setHorizontalAlignment(jui.HorizontalAlignment.stretch);
        this._uibutton_halfPot = this._createQuickBetButton("1/2 POT");
        this._uibutton_halfPot.bindClickEventListener(this._onButtonHalfPot, this);
        a.addChild(this._uibutton_halfPot);
        this._uibutton_pot = this._createQuickBetButton("POT");
        this._uibutton_pot.bindClickEventListener(this._onButtonPot, this);
        a.addChild(this._uibutton_pot);
        this._uibutton_allIn = this._createQuickBetButton("ALL IN");
        this._uibutton_allIn.bindClickEventListener(this._onButtonAllIn, this);
        a.addChild(this._uibutton_allIn);
        this._uibutton_min = new jui.Button("game/bet-slider-button-minus.png");
        this._uibutton_min.setCenterAlignment();
        this._uibutton_min.setMargin(jui.Margin(12, 2, 2, 2));
        this._uibutton_min.bindClickEventListener(this._onButtonBetDecrease, this);
        b.addChild(this._uibutton_min, jui.WidgetLayers.UI, jui.DockLayoutPropsForEdge(jui.DockLayoutEdge.left, !0));
        this._uibutton_max = new jui.Button("game/bet-slider-button-plus.png");
        this._uibutton_min.setCenterAlignment();
        this._uibutton_max.setMargin(jui.Margin(2,
            2, 12, 2));
        this._uibutton_max.bindClickEventListener(this._onButtonBetIncrease, this);
        b.addChild(this._uibutton_max, jui.WidgetLayers.UI, jui.DockLayoutPropsForEdge(jui.DockLayoutEdge.right, !0));
        this._uislider_bet = new jui.Slider(new jui.Slider.Config({
            track: "game/bet-slider-track.png",
            handle: "game/bet-slider-handle.png",
            handlePadding: {
                l: 24,
                r: 24
            }
        }));
        this._uislider_bet.setCenterAlignment();
        this._uislider_bet.setRange(0, 100);
        this._uislider_bet.on.valueChanged.add(this._onSliderUpdateBetAmount, this);
        var c =
            jui.DockLayoutPropsForEdge(jui.DockLayoutEdge.fill);
        c.ignoreFillHeight = !0;
        b.addChild(this._uislider_bet, jui.WidgetLayers.UI, c);
        this.addChild(b);
        this.addChild(a)
    },
    _createQuickBetButton: function (a) {
        var b = this._designGap / 2,
            c = new jui.ButtonLabel(new jui.Button.Config({
                normal: "game/button-bet.png",
                pressed: "game/button-bet-pressed.png",
                textStyle: this.getTheme().actionbuttons_textStyle
            }));
        c.setHorizontalAlignment(jui.HorizontalAlignment.stretch);
        c.setVerticalAlignment(jui.VerticalAlignment.stretch);
        c.setMargin(jui.Margin(b,
            b / 2, b, b / 2));
        c.setTextValue(a);
        return c
    },
    _onButtonBetIncrease: function () {
        this._tableModel && this._updateBetAmount(this._tableModel.getCurrentBet() + this._tableModel.getBetSliderIncrementAmount())
    },
    _onButtonBetDecrease: function () {
        this._tableModel && this._updateBetAmount(this._tableModel.getCurrentBet() - this._tableModel.getBetSliderIncrementAmount())
    },
    _onButtonHalfPot: function () {
        this._tableModel && this._updateBetAmount(this._tableModel.getHalfPotBetAmount())
    },
    _onButtonTwoThirdsPot: function () {
        this._tableModel &&
            this._updateBetAmount(this._tableModel.getTwoThirdsPotBetAmount())
    },
    _onButtonPot: function () {
        this._tableModel && this._updateBetAmount(this._tableModel.getPotBetAmount())
    },
    _onButtonAllIn: function () {
        this._tableModel && this._updateBetAmount(this._tableModel.getMaximumBetAmount())
    },
    _onSliderUpdateBetAmount: function (a, b) {
        this._tableModel && this._updateBetAmount(this._uislider_bet.getValue())
    },
    _updateBetAmount: function (a) {
        this._tableModel && this._tableModel.getGameController().setCurrentBetAmount(a)
    },
    setTableModel: function (a) {
        this._tableModel !==
            a && (this._tableModel = a, null != this._tableModel && this._tableModel.getObservable("anyBetAction").subscribe(function () {
                this._uislider_bet.setRange(this._tableModel.getMinimumBetAmount(), this._tableModel.getMaximumBetAmount());
                this._uislider_bet.setIncrementValue(this._tableModel.getBetSliderIncrementAmount());
                this._uislider_bet.setValue(this._tableModel.getCurrentBet())
            }, this))
    }
});
pokerapp.UIRaiseSliderPopup = jui.Popup.extend({
    _betPanelSize: cc.size(100, 200),
    _tableModel: null,
    _uislider_bet: null,
    _uisliderValue: null,
    ctor: function (a) {
        this._super(this._betPanelSize.width, this._betPanelSize.height);
        this._tableModel = a;
        this._createControls();
        this.scale = jui.Globals.getPopupScale()
    },
    _createControls: function () {
        this._uislider_bet = new jui.Slider(new jui.Slider.Config({
            track: "game/bet-slider-track.png",
            handle: "game/bet-slider-handle.png",
            handlePadding: {
                l: 10,
                r: 10,
                t: 95,
                b: 45
            }
        }));
        var a = this._uislider_bet.height;
        this._uislider_bet.setMode(jui.ProgressBox.Mode.vertical);
        this._uislider_bet.on.valueChanged.add(this._onSliderUpdateBetAmount, this);
        this._uislider_bet.setRange(this._tableModel.getMinimumBetAmount(), this._tableModel.getMaximumBetAmount());
        this._uislider_bet.setIncrementValue(this._tableModel.getBetSliderIncrementAmount());
        this._uislider_bet.setValue(this._tableModel.getCurrentBet());
        this._uisliderValue = new jui.TextBox(this._betPanelSize.width, 20, this.getTheme().popup_buyin_slider_textStyle);
        this._uisliderValue.setPosition(cc.p(16,
            0.91 * a));
        this._uislider_bet.addChild(this._uisliderValue);
        this.setContentSize(this._betPanelSize.width, this._betPanelSize.height);
        this.addChild(this._uislider_bet);
        this._updateBetText()
    },
    _onSliderUpdateBetAmount: function (a, b) {
        if (this._tableModel) {
            var c = this._uislider_bet.getValue();
            this._updateBetAmount(c);
            this._updateBetText()
        }
    },
    _updateBetAmount: function (a) {
        this._tableModel && this._tableModel.getGameController().setCurrentBetAmount(a)
    },
    _updateBetText: function () {
        if (this._uisliderValue) {
            var a = this._tableModel.formatCurrency(this._tableModel.getCurrentBet());
            this._uisliderValue.setTextValue(a)
        }
    }
});
pokerapp.UIQuickBetPanel = jui.Panel.extend({
    _designGap: 6,
    _tableModel: null,
    _uibutton_raise: null,
    _uibutton_betBlind: null,
    _uibutton_betThird: null,
    _uibutton_betHalf: null,
    _uibutton_betPot: null,
    _blindMultiple: 1,
    ctor: function (a, b) {
        this._super(a, b, new jui.ColumnLayout(5));
        this._createControls()
    },
    _createControls: function () {
        this.getContentNodeSize();
        this._uibutton_raise = this._createRaiseButton("RAISE");
        this.addChild(this._uibutton_raise, jui.WidgetLayers.UI, new jui.ColumnLayoutProps(25));
        this._uibutton_betHalf =
            this._createQuickBetButton("1/2");
        this._uibutton_betHalf.bindClickEventListener(this._onButtonHalf, this);
        this.addChild(this._uibutton_betHalf, jui.WidgetLayers.UI, new jui.ColumnLayoutProps(25));
        this._uibutton_betThird = this._createQuickBetButton("2/3");
        this._uibutton_betThird.bindClickEventListener(this._onButtonTwoThird, this);
        this.addChild(this._uibutton_betThird, jui.WidgetLayers.UI, new jui.ColumnLayoutProps(25));
        this._uibutton_betPot = this._createQuickBetButton("POT");
        this._uibutton_betPot.bindClickEventListener(this._onButtonPot,
            this);
        this.addChild(this._uibutton_betPot, jui.WidgetLayers.UI, new jui.ColumnLayoutProps(25))
    },
    _createQuickBetButton: function (a) {
        var b = this._designGap / 2,
            c = new jui.ButtonLabel(new jui.Button.Config({
                normal: "game/button-quickbet.png",
                pressed: "game/button-quickbet-pressed.png",
                textStyle: this.getTheme().actionbuttons_textStyle
            }));
        c.setHorizontalAlignment(jui.HorizontalAlignment.stretch);
        c.setVerticalAlignment(jui.VerticalAlignment.stretch);
        c.setMargin(jui.Margin(b, b / 2, b, b / 2));
        c.setTextValue(a);
        return c
    },
    _createRaiseButton: function (a) {
        var b = this._designGap / 2,
            c = new jui.Button(new jui.Button.Config({
                normal: "game/button-raise.png",
                textStyle: this.getTheme().actionbuttons_textStyle
            }));
        c.setHorizontalAlignment(jui.HorizontalAlignment.stretch);
        c.setVerticalAlignment(jui.VerticalAlignment.stretch);
        c.setMargin(jui.Margin(b, b / 2, b, b / 2));
        c.bindClickEventListener(this._onButtonRaise, this);
        var d = new jui.Panel(c.width, c.height);
        d.setHorizontalAlignment(jui.HorizontalAlignment.stretch);
        d.setVerticalAlignment(jui.VerticalAlignment.stretch);
        var f = new jui.TextBox(c.width, 0.2 * c.height, this.getTheme().actionbuttons_textStyle);
        f.setHorizontalAlignment(jui.HorizontalAlignment.stretch);
        f.setVerticalAlignment(jui.VerticalAlignment.bottom);
        f.setMargin(jui.Margin(b / 2));
        f.setTextValue(a);
        d.addChild(c);
        d.addChild(f);
        return d
    },
    _onButtonRaise: function () {
        if (this._tableModel) {
            var a = new pokerapp.UIRaiseSliderPopup(this._tableModel);
            a.setPopupPosition(jui.PopupPositioning.relative_top_left, this._uibutton_raise);
            jui.PopupManager.getInstance().showPopup(a)
        }
    },
    _onButtonTwoThird: function () {
        this._tableModel && this._updateBetAmount(this._tableModel.getTwoThirdsPotBetAmount())
    },
    _onButtonHalf: function () {
        this._tableModel && this._updateBetAmount(this._tableModel.getHalfPotBetAmount())
    },
    _onButtonPot: function () {
        this._tableModel && this._updateBetAmount(this._tableModel.getPotBetAmount())
    },
    _updateBetAmount: function (a) {
        this._tableModel && this._tableModel.getGameController().setCurrentBetAmount(a)
    },
    setTableModel: function (a) {
        this._tableModel !== a && (this._tableModel = a, jcore.util.isNotNull(this._tableModel) &&
            this._tableModel.getObservable("anyBetAction").subscribe(function () {
                jcore.util.isNull(this._uislider_bet) || (this._uislider_bet.setRange(this._tableModel.getMinimumBetAmount(), this._tableModel.getMaximumBetAmount()), this._uislider_bet.setIncrementValue(this._tableModel.getBetSliderIncrementAmount()), this._uislider_bet.setValue(this._tableModel.getCurrentBet()))
            }, this))
    }
});
pokerapp.UITableInfo = jui.Panel.extend({
    _tableModel: null,
    _uiLine1: null,
    _uiLine2: null,
    _uiLine3: null,
    ctor: function () {
        this._super();
        this._createControls()
    },
    _createControls: function () {
        console.log("Create control ");
        var a = 138,
            b = 50,
            c = 3,
            d = 14,
            f = this.getTheme().tableinfo_textStyle;
        jui.Globals.isScreenLarge() && (a = 210, b = 60, c = 4, d = 18, f.size = 18);
        jui.Widget.configureAttachmentsWithConfig(this, a, b, this.getTheme().tableinfo_config);
        a -= 2 * c;
        this.setLayout(new jui.StackLayout(jui.StackLayout.VERTICAL));
        this.setHorizontalAlignment(jui.HorizontalAlignment.left);
        this.setVerticalAlignment(jui.VerticalAlignment.bottom);
        this.setMargin({
            b: 2
        });
        this.setPadding(c);
        this._uiLine1 = new jui.TextBox(a, d, f);
        this._uiLine1.setHorizontalAlignment(jui.HorizontalAlignment.left);
        this.addChild(this._uiLine1);
        this._uiLine2 = new jui.TextBox(a, d, f);
        this._uiLine2.setHorizontalAlignment(jui.HorizontalAlignment.left);
        this.addChild(this._uiLine2);
        this._uiLine3 = new jui.TextBox(a, d, f);
        this._uiLine3.setHorizontalAlignment(jui.HorizontalAlignment.left);
        this.addChild(this._uiLine3);
        this.setContentSizeToChildrenWidthAndHeight()
    },
    setTableModel: function (a) {
        this._tableModel !== a && (this._tableModel = a, jcore.util.isNotNull(this._tableModel) && (this._tableModel.getObservable("limitType").subscribe(this._updateText, this), this._tableModel.getObservable("currentStakes").subscribe(this._updateText, this), this._tableModel.getObservable("tableId").subscribe(this._updateText, this), this._tableModel.getObservable("currentHandId").subscribe(this._updateText, this), this._updateText()))
    },
    _updateText: function () {
        var a = "",
            b = "";
        this._tableModel.isTournament() ?
            (a = String.format("TID:{0}", this._tableModel.tournamentId), 0 < jcore.util.toNumber(this._tableModel.tableId, -1) && (a += " Table " + this._tableModel.tableId)) : a = String.format("Table {0}", this._tableModel.tableId);
        b = pokerapp.FormatUtil.formatShortLimitType(this._tableModel.limitType);
        0 < this._tableModel.currentStakes.smallBlind && 0 < this._tableModel.currentStakes.low ? b += "  " + pokerapp.FormatUtil.formatStake(this._tableModel.currentStakes, this._tableModel.limitType, !0, this._tableModel.isTournament()) : jcore.log.info("invalid stakes! " +
            this._tableModel.currentStakes.smallBlind + " " + this._tableModel.currentStakes.low);
        this._uiLine1.setTextValue(a);
        this._uiLine2.setTextValue(b);
        jcore.util.isNullOrEmpty(this._tableModel.currentHandId) ? this._uiLine3.setTextValue("") : this._uiLine3.setTextValue("" + this._tableModel.currentHandId)
    }
});
pokerapp.SeatVisualState = {
    EMPTY: "empty",
    RESERVED: "reserved",
    SITHERE: "sithere",
    NORMAL: jui.VisualState.visible,
    ACTIVE: "active",
    WINNER: "winner"
};
pokerapp.UITableSeat = jui.Panel.extend({
    _designSize: cc.size(154, 68),
    _labelDesignSize: cc.size(104, 22),
    _nameplate_config: {
        sprites: [{
            asset: "game/nameplate.png",
            depth: jui.WidgetLayers.background + 1,
            sizeMode: jui.SizeMode.stretch_allways
        }, {
            asset: "game/nameplate-shadow.png",
            depth: jui.WidgetLayers.background
        }, {
            asset: "game/nameplate-active.png",
            depth: jui.WidgetLayers.background + 1,
            visibility: jui.VisibilityMode.duringAnimation,
            sizeMode: jui.SizeMode.stretch_allways,
            animationTrigger: pokerapp.SeatVisualState.ACTIVE
        }]
    },
    _sithere_config: new jui.Button.Config({
        normal: "game/nameplate-sithere.png",
        pressed: "game/nameplate-sithere-pressed.png"
    }),
    _uifoldedCards: null,
    _uicards: null,
    _uinameplate: null,
    _uinameplate_content: null,
    _uinameplate_empty: null,
    _uinameplate_reserved: null,
    _uinameplate_sithere: null,
    _uinameplate_banner: null,
    _uinameplate_banner_text: null,
    _uiavatar: null,
    _uiname: null,
    _uichips: null,
    _uiaction: null,
    _uibounty: null,
    _uitimer: null,
    _lastSeatState: null,
    _seatModel: null,
    _currentAvatarId: null,
    ctor: function (a) {
        this._super(this._designSize.width,
            this._designSize.height, new jui.NoneLayout);
        this._createControls(a)
    },
    _initContentNode: function () {},
    _createControls: function (a) {
        this.beginInitChildren();
        this._uifoldedCards = new pokerapp.UICardCollection(jcore.util.orDefault(a, 2), 2 < a);
        this.addChild(this._uifoldedCards, jui.WidgetLayers.UI);
        jui.util.alignAndAnchorCenter(this._uifoldedCards);
        this._uifoldedCards.hide();
        this._uicards = new pokerapp.UICardCollection(jcore.util.orDefault(a, 2), 2 < a);
        this.addChild(this._uicards, jui.WidgetLayers.UI);
        jui.util.alignAndAnchorCenter(this._uicards);
        this._uinameplate = new jui.Panel(this._designSize.width, this._designSize.height, new jui.StackLayout(!1));
        this._uinameplate.addClickEventListener(_.bind(this._onClickedNameplate, this));
        this._uinameplate.setTouchEnabled(!0);
        this._createNameplateContent();
        this._uinameplate_empty = new jui.TextBox(null, null, this.getTheme().nameplate_empty_textStyle);
        this._uinameplate_empty.setBackground("game/nameplate-empty.png", !0);
        this._uinameplate_empty.setTextValue("EMPTY SEAT");
        this._uinameplate_empty.setOpacity(150);
        this.addChild(this._uinameplate_empty, jui.WidgetLayers.UI);
        jui.util.alignAndAnchorCenter(this._uinameplate_empty);
        this._uinameplate_reserved = new jui.TextBox(null, null, this.getTheme().nameplate_reserved_textStyle);
        this._uinameplate_reserved.setBackground("game/nameplate-reserved.png", !0);
        this._uinameplate_reserved.setTextValue("RESERVED");
        this.addChild(this._uinameplate_reserved, jui.WidgetLayers.UI);
        jui.util.alignAndAnchorCenter(this._uinameplate_reserved);
        this._sithere_config.textStyle = this.getTheme().nameplate_sithere_textStyle;
        this._uinameplate_sithere = new jui.ButtonLabel(this._sithere_config);
        this._uinameplate_sithere.setTextValue("SIT HERE");
        this._uinameplate_sithere.addClickEventListener(_.bind(this._onClickedSitHere, this));
        this.addChild(this._uinameplate_sithere, jui.WidgetLayers.UI);
        jui.util.alignAndAnchorCenter(this._uinameplate_sithere);
        this.endInitChildren()
    },
    _createNameplateContent: function () {
        this._uinameplate.beginInitChildren();
        this._uinameplate_content = new jui.Panel(this._designSize.width, this._designSize.height,
            new jui.DockLayout);
        jui.Widget.configureAttachmentsWithConfig(this._uinameplate_content, this._designSize.width, this._designSize.height, this._nameplate_config);
        var a = new jui.Panel(this._designSize.height, this._designSize.height);
        a.setPadding({
            l: 2,
            t: 2,
            r: 2,
            b: 2
        });
        a.setLayout(new jui.ScaledLayout);
        a.setBackground("game/avatar-background.png");
        this._uiavatar = new jui.Image("game/avatar.png");
        a.addChild(this._uiavatar);
        this._uibounty = new jui.TextBox(this._designSize.height, this._designSize.height, this.getTheme().nameplate_textStyle);
        this._uibounty.setHorizontalAlignment(jui.HorizontalAlignment.left);
        this._uibounty.setTextHorizontalAlignment(jui.TextHorizontalAlignment.center);
        a.addChild(this._uibounty);
        this._uinameplate_content.addChild(a, jui.WidgetLayers.UI, new jui.DockLayoutProps(jui.DockLayoutEdge.left));
        a = new jui.Panel(this._labelDesignSize.width, 3 * this._labelDesignSize.height, new jui.StackLayout(!1));
        a.setPadding(1);
        a.beginInitChildren();
        this._uiname = new jui.TextBox(this._labelDesignSize.width - 4, this._labelDesignSize.height -
            2, this.getTheme().nameplate_textStyle);
        this._uiname.setHorizontalAlignment(jui.HorizontalAlignment.left);
        this._uiname.setTextHorizontalAlignment(jui.TextHorizontalAlignment.left);
        a.addChild(this._uiname);
        this._uichips = new jui.TextBox(this._labelDesignSize.width, this._labelDesignSize.height, this.getTheme().nameplate_textStyle);
        this._uichips.setHorizontalAlignment(jui.HorizontalAlignment.left);
        this._uichips.setTextHorizontalAlignment(jui.TextHorizontalAlignment.left);
        a.addChild(this._uichips);
        this._uiaction =
            new jui.TextBox(this._labelDesignSize.width, this._labelDesignSize.height, this.getTheme().nameplate_textStyle);
        this._uiaction.setHorizontalAlignment(jui.HorizontalAlignment.left);
        this._uiaction.setTextHorizontalAlignment(jui.TextHorizontalAlignment.left);
        a.addChild(this._uiaction);
        a.endInitChildren();
        this._uinameplate_content.addChild(a, jui.WidgetLayers.UI, new jui.DockLayoutProps(jui.DockLayoutEdge.fill));
        this._uinameplate_banner = new jui.Panel(this._designSize.width, 1);
        jui.Widget.configureAttachmentsWithConfig(this._uinameplate_banner,
            this._designSize.width, null, this.getTheme().nameplate_win_banner_config);
        this._uinameplate_banner_text = new jui.TextBox(this._uinameplate_banner.width, this._uinameplate_banner.height, this._uinameplate_banner.getTextStyle());
        this._uinameplate_banner_text.setCenterAlignment();
        this._uinameplate_banner_text.setTextCenteredAlignment();
        this._uinameplate_banner.addChild(this._uinameplate_banner_text, jui.WidgetLayers.UI);
        a = new jui.DockLayoutProps(jui.DockLayoutEdge.bottom);
        a.allowOverlay = !0;
        this._uinameplate_content.addChild(this._uinameplate_banner,
            jui.WidgetLayers.UI, a);
        a = new jui.ProgressBox.Config({
            track: "game/action-timer-background.png",
            fill: "game/action-timer-green.png"
        });
        this._uitimer = new pokerapp.UIActionProgress(a, this._designSize.width, 5);
        this._uitimer.setMargin({
            l: 0,
            t: 0,
            r: 0,
            b: 0
        });
        this._uinameplate.addChild(this._uitimer, jui.WidgetLayers.UI);
        this._uinameplate.addChild(this._uinameplate_content);
        this._uinameplate.endInitChildren();
        this._uinameplate.setContentSizeToChildrenWidthAndHeight();
        this.addChild(this._uinameplate, jui.WidgetLayers.UI);
        jui.util.alignAndAnchorCenter(this._uinameplate);
        this._uiname.setTextValue("");
        this._uichips.setTextValue("");
        this._uiaction.setTextValue("");
        this._uibounty.setTextValue("");
        this._uinameplate_banner.hide()
    },
    updateModel: function (a, b, c) {
        this._seatModel = a;
        this._lastSeatState = a.seatState;
        var d = null;
        if (a.seatState === pokerapp.SeatState.Unavailable) this.hide();
        else {
            this.isShowing() || this.fadeIn(0.2);
            switch (a.seatState) {
            case pokerapp.SeatState.Empty:
                this._canSitHere() ? this.setVisualState(pokerapp.SeatVisualState.SITHERE) :
                    this.setVisualState(pokerapp.SeatVisualState.EMPTY);
                break;
            case pokerapp.SeatState.Reserved:
                this.setVisualState(pokerapp.SeatVisualState.RESERVED);
                break;
            case pokerapp.SeatState.SitOut:
            case pokerapp.SeatState.WaitBB:
            case pokerapp.SeatState.ReadyForNextHand:
            case pokerapp.SeatState.Playing:
            case pokerapp.SeatState.Sat:
                d = a.getPlayer()
            }
            if (jcore.util.isNotNull(d)) {
                d.isLocalPlayer() ? this.setScale(1.1) : this.setScale(1);
                if (d.isPlayersTurn()) {
                    var f = a.getTableModel().getCurrentTurn();
                    this._uitimer.setRange(0,
                        f.getSecondsToAct() + f.getExtraTimeoutSeconds());
                    this._uitimer.setValue(f.getRemainingSecondsToAct());
                    this.setVisualState(pokerapp.SeatVisualState.ACTIVE)
                } else d.isWinner ? this.setVisualState(pokerapp.SeatVisualState.WINNER) : this.setVisualState(pokerapp.SeatVisualState.NORMAL);
                0 < d.getBounty() && this._uibounty.setTextValue("$" + pokerapp.FormatUtil.formatCurrency("USD", d.getBounty()));
                this._uiname.setTextValue(this._trimText(d.getDisplayName()));
                this._uichips.setTextValue(this._trimText(a.getTableModel().formatCurrency(d.getChipStack())));
                a = d.getLastAction() !== this._uiaction.getTextValue();
                d.seatState === pokerapp.SeatState.SitOut ? (this._uiaction.setTextValue("Sitting Out"), this._uiaction.stopAllActions(), this._uiaction.show()) : a && (this._uiaction.setTextValue(d.getLastAction()), this._uiaction.setOpacity(0), jui.Effects.FadeInAndOut(this._uiaction, 0.2, 1));
                if ((a = d.getCards()) && 0 < a.length && a.length < this._uicards.getCount())
                    for (; a.length < this._uicards.getCount();) a.push(CardModel.create());
                d.hasCards() && this._uifoldedCards.hide();
                this._uicards.setCards(a,
                    b, c);
                this._uicards.isAnyFaceUp() ? this._uicards.y = this._uinameplate.height + 8 : this._uicards.y = this._uinameplate.height;
                d.avatarId !== this._currentAvatarId && (this._currentAvatarId = d.avatarId, jcore.App.getInstance().getCurrentSkin().getRequestAvatarUrl())
            } else this._currentAvatarId = null, this.setScale(1), this._uiname.setTextValue(""), this._uichips.setTextValue(""), this._uiaction.setTextValue(""), this._uicards.setCards(null)
        }
    },
    _trimText: function (a) {
        jcore.util.isNotNull(a) && 9 < a.length && (a = a.slice(0, 8), a +=
            "..");
        return a
    },
    _onAvatarLoaded: function (a) {
        a instanceof cc.Texture2D ? this._uiavatar.setBackground(a, !1) : jcore.log.warn("Fail to load remote avatar texture addImageAsync")
    },
    updateWinningCards: function (a) {
        this._uicards.updateWinningCards(a);
        this.updateModel(this._seatModel)
    },
    onUpdateVisualState: function (a, b) {
        this._super(a, b);
        this._uinameplate_content.setVisualState(b);
        this._uitimer.setVisible(b === pokerapp.SeatVisualState.ACTIVE);
        this._uinameplate_empty.setVisible(b === pokerapp.SeatVisualState.EMPTY);
        this._uinameplate_reserved.setVisible(b === pokerapp.SeatVisualState.RESERVED);
        this._uinameplate_sithere.setVisible(b === pokerapp.SeatVisualState.SITHERE);
        switch (b) {
        case pokerapp.SeatVisualState.EMPTY:
        case pokerapp.SeatVisualState.RESERVED:
        case pokerapp.SeatVisualState.SITHERE:
            this._uinameplate.hide();
            this._uinameplate_banner.isShowing() && this._uinameplate_banner.hide();
            break;
        case pokerapp.SeatVisualState.WINNER:
            this._uinameplate_banner_text.setTextValue("WINNER!");
            this._uinameplate_banner.isShowing() ||
                jui.Effects.FadeInAndOut(this._uinameplate_banner, 0.5, 3);
            break;
        default:
            this._uinameplate.isShowing() || this._uinameplate.fadeIn(), this._uinameplate_banner.isShowing() && this._uinameplate_banner.hide()
        }
    },
    _canSitHere: function () {
        return this._seatModel && this._seatModel.seatState === pokerapp.SeatState.Empty && !this._seatModel.getTableModel().isTournament() && !this._seatModel.getTableModel().hasLocalPlayer()
    },
    _onClickedSitHere: function () {
        this._canSitHere() && this._seatModel.getTableModel().getGameController().actionRequestSeat(this._seatModel.getSeatPosition())
    },
    _onClickedNameplate: function () {
        this._seatModel && (this._seatModel.hasPlayer() && this._seatModel.getPlayer().hasFoldedCards()) && this._uifoldedCards.isHidden() && (this._uifoldedCards.reset(), this._uifoldedCards.setCardsWithoutAnimation(this._seatModel.getPlayer().getFoldedCards()), this._uifoldedCards.setAllDimmed(), this._uifoldedCards.y = this._uinameplate.height + 8, this._uifoldedCards.show(), this._uifoldedCards.hideDelayed(3))
    }
});
pokerapp.UIChipStackLayout = {
    vertical_left: 0,
    vertical_right: 1,
    horizontal: 2
};
pokerapp.UIChipStack = jui.Panel.extend({
    _labelDesignSize: cc.size(120, 25),
    _chipsDesignSize: cc.size(60, 25),
    _uilabel: null,
    _uistacks: null,
    _valueConverter: null,
    _layoutMode: pokerapp.UIChipStackLayout.vertical,
    _chipValue: 0,
    ctor: function (a, b) {
        this._super(1, 1);
        this._layoutMode = b;
        this._valueConverter = new pokerapp.ChipStackToStringConverter(a);
        this._createControls()
    },
    _initContentNode: function () {},
    _createControls: function () {
        switch (this._layoutMode) {
        case pokerapp.UIChipStackLayout.horizontal:
            this.setLayout(new jui.StackLayout(!0));
            this._uistacks =
                new jui.Panel(this._chipsDesignSize.width, this._chipsDesignSize.height);
            this._uistacks.setMargin({
                l: 2,
                t: 2,
                r: 4,
                b: 2
            });
            this._uistacks.setVerticalAlignment(jui.VerticalAlignment.bottom);
            this.addChild(this._uistacks, jui.WidgetLayers.UI);
            this._uilabel = new jui.TextBox(this._labelDesignSize.width, this._labelDesignSize.height, this.getTheme().chipstack_textStyle);
            this._uilabel.setHorizontalAlignment(jui.HorizontalAlignment.left);
            this._uilabel.setVerticalAlignment(jui.VerticalAlignment.center);
            this._uilabel.setTextHorizontalAlignment(jui.TextHorizontalAlignment.left);
            this.addChild(this._uilabel, jui.WidgetLayers.UI);
            this.setContentSizeToChildrenWidthAndHeight();
            break;
        case pokerapp.UIChipStackLayout.vertical_right:
            this.setLayout(new jui.StackLayout(!1));
            this._uilabel = new jui.TextBox(this._labelDesignSize.width, this._labelDesignSize.height, this.getTheme().chipstack_textStyle);
            this._uilabel.setHorizontalAlignment(jui.HorizontalAlignment.right);
            this._uilabel.setTextHorizontalAlignment(jui.TextHorizontalAlignment.right);
            this._uilabel.setMargin({
                l: 0,
                t: 0,
                r: 0,
                b: 2
            });
            this.addChild(this._uilabel,
                jui.WidgetLayers.UI);
            this._uistacks = new jui.Panel(this._chipsDesignSize.width, this._chipsDesignSize.height);
            this._uistacks.setHorizontalAlignment(jui.HorizontalAlignment.right);
            this.addChild(this._uistacks, jui.WidgetLayers.UI);
            this.setContentSizeToChildrenWidthAndHeight();
            break;
        default:
            this.setLayout(new jui.StackLayout(!1)), this._uilabel = new jui.TextBox(this._labelDesignSize.width, this._labelDesignSize.height, this.getTheme().chipstack_textStyle), this._uilabel.setHorizontalAlignment(jui.HorizontalAlignment.left),
                this._uilabel.setTextHorizontalAlignment(jui.TextHorizontalAlignment.left), this._uilabel.setMargin({
                    l: 0,
                    t: 0,
                    r: 0,
                    b: 2
                }), this.addChild(this._uilabel, jui.WidgetLayers.UI), this._uistacks = new jui.Panel(this._chipsDesignSize.width, this._chipsDesignSize.height), this._uistacks.setHorizontalAlignment(jui.HorizontalAlignment.left), this.addChild(this._uistacks, jui.WidgetLayers.UI), this.setContentSizeToChildrenWidthAndHeight()
        }
    },
    getLayoutMode: function () {
        return this._layoutMode
    },
    setLayoutMode: function (a) {
        this._layoutMode !==
            a && (this._layoutMode = a, this.removeChild(this._uilabel), this.removeChild(this._uistacks), this._createControls())
    },
    getChipValue: function () {
        return this._chipValue
    },
    setChipValue: function (a) {
        if (this._chipValue !== a)
            if (this._chipValue = a, 0 < a) {
                this.beginInitChildren();
                this._uilabel.setTextValue(this._valueConverter.convertValue(a));
                var b = a = 0,
                    c = 0;
                this._layoutMode === pokerapp.UIChipStackLayout.horizontal && (a = this._uistacks.width, c = 1);
                this._uistacks.removeAllChildren();
                this._uistacks.setContentSize(cc.size(this._chipsDesignSize.width,
                    this._chipsDesignSize.height));
                for (var d = 0; 3 > d; d++) {
                    var f = new jui.Image("game/chip-blue.png");
                    f.setAnchorPoint(cc.p(c, 0));
                    f.setPosition(cc.p(a, b));
                    this._uistacks.addChild(f);
                    b += 0.28 * f.height
                }
                this._uistacks.setContentSizeToChildrenWidthAndHeight();
                this.endInitChildren();
                this.setContentSizeToChildrenWidthAndHeight()
            } else this._uilabel.setTextValue(""), this._uistacks.removeAllChildren()
    }
});
pokerapp.ChipStackToStringConverter = jui.ValueConverter.extend({
    _tableModel: null,
    ctor: function (a) {
        this._super();
        this._tableModel = a
    },
    convertValue: function (a) {
        return !jui.util.isValidNumber(a) || 0 == a ? "" : jui.util.isValidNumber(a) ? this._tableModel.formatCurrency(a) : "0"
    }
});
pokerapp.UITotalPot = jui.Panel.extend({
    _designSize: cc.size(200, 28),
    _uilabel: null,
    _valueConverter: null,
    _chipValue: 0,
    ctor: function (a) {
        this._super(this._designSize.width, this._designSize.height);
        this._valueConverter = new pokerapp.ChipStackToStringConverter(a);
        this._createControls()
    },
    _initContentNode: function () {},
    _createControls: function () {
        jui.Widget.configureAttachmentsWithConfig(this, this._designSize.width, this._designSize.height, this.getTheme().totalpot_config);
        this.setPadding({
            l: 8,
            t: 2,
            r: 8,
            b: 2
        });
        this._uilabel =
            new jui.TextBox(null, null, this.getTheme().totalpot_textStyle);
        this._uilabel.setCenterAlignment();
        this._uilabel.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
        this.addWidgetChild(this._uilabel, jui.WidgetLayers.UI);
        this.setChipValue(0)
    },
    setChipValue: function (a) {
        this._chipValue !== a && (this._chipValue = a, 0 < a ? this._uilabel.setTextValue("Total Pot: " + this._valueConverter.convertValue(a)) : this._uilabel.setTextValue(""))
    }
});
pokerapp.UICardCollection = jui.Panel.extend({
    _designCardGap: 4,
    _uicards: null,
    _cardSize: null,
    ctor: function (a, b) {
        this._super(null, null, new jui.NoneLayout);
        b && (this._designCardGap *= -4);
        this.beginInitChildren();
        this._uicards = [];
        for (var c = 0; c < a; c++) {
            var d = new pokerapp.UICard;
            d.setCard(CardModel.create());
            d.setAnchorPoint(cc.p(0.5, 0.5));
            d.x = d.width / 2;
            d.y = d.height / 2;
            this._cardSize = cc.size(d.width, d.height);
            this._uicards.push(d);
            this.addChild(d, jui.WidgetLayers.UI + c)
        }
        this.endInitChildren();
        jui.util.alignItemsHorizontally(this._uicards,
            this._designCardGap);
        this.setContentSizeToChildrenWidthAndHeight();
        for (c = 0; c < this._uicards.length; c++) this._uicards[c].reset(), this._uicards[c].setCard(null)
    },
    getCount: function () {
        return this._uicards.length
    },
    reset: function () {
        for (var a = 0; a < this._uicards.length; a++) this._uicards[a].x = this._cardSize.width / 2, this._uicards[a].y = this._cardSize.height / 2;
        jui.util.alignItemsHorizontally(this._uicards, this._designCardGap);
        for (a = 0; a < this._uicards.length; a++) this._uicards[a].reset()
    },
    _initContentNode: function () {},
    updateWinningCards: function (a) {
        for (var b = 0; b < this._uicards.length; b++) this._uicards[b].setDimmed(!1), this._uicards[b].setSelected(!1);
        for (b = 0; b < this._uicards.length; b++) {
            var c = this._uicards[b];
            if (jcore.util.isNotNull(a))
                for (var d = 0; d < a.length; d++)
                    if (c.getCard().equals(a[d])) {
                        c.setSelected(!0);
                        break
                    } c.isSelected() || c.setDimmed(!0)
        }
    },
    setAllDimmed: function () {
        for (var a = 0; a < this._uicards.length; a++) this._uicards[a].setDimmed(!0), this._uicards[a].setSelected(!1)
    },
    setCards: function (a, b, c) {
        var d = !1;
        b && (b =
            this.convertToNodeSpace(b));
        for (var f = 0; f < this._uicards.length; f++) {
            var g = this._uicards[f],
                h = g.getCard(),
                m = !1,
                n = null != a && f < a.length ? a[f] : null;
            g.setCard(n, !0) && (m = !0);
            d = d || m;
            null != n && m && (null == h && b ? g.runDealAnimation(b, c) : n.isValid() && g.setFaceUp(!0, !0, 0.1))
        }
        return d
    },
    setCardsWithoutAnimation: function (a) {
        for (var b = 0; b < this._uicards.length; b++) {
            var c = this._uicards[b],
                d = null != a && b < a.length ? a[b] : null;
            c.setCard(d);
            d.isValid() && c.setFaceUp(!0)
        }
    },
    isAnyFaceUp: function () {
        for (var a = 0; a < this._uicards.length; a++)
            if (this._uicards[a].isFaceUp()) return !0;
        return !1
    }
});
pokerapp.UITableMessage = jui.ItemsPanel.extend({
    _designSize: cc.size(445, 65),
    ctor: function () {
        this._super(this._designSize.width, this._designSize.height);
        this._createControls()
    },
    _createControls: function () {
        this.setTextStyle(this.getTheme().tablemessage_textStyle);
        jui.Widget.configureAttachmentsWithConfig(this, this._designSize.width, this._designSize.height, this.getTheme().tablemessage_config);
        this.setItemWidgetFactory(_.bind(this._createMessageItem, this));
        this._updateVisibility()
    },
    setTableModel: function (a) {
        if (this._tableModel !==
            a && (this.removeAllItems(), this._tableModel = a, null != this._tableModel)) {
            a = this._tableModel.getTableMessages().getMessagesObservableCollection();
            a.on.arrayAdded.add(this._onAdd, this);
            a.on.arrayRemoved.add(this._onRemove, this);
            var b = this;
            _.each(a.getArray(), function (a) {
                b.addItem(a)
            });
            this._updateVisibility()
        }
    },
    _onAdd: function (a, b) {
        this.addItem(b.value);
        this._updateVisibility()
    },
    _onRemove: function (a, b) {
        this.removeItem(b.value);
        this._updateVisibility()
    },
    _updateVisibility: function () {
        if (0 < this.getItemCount() &&
            !this.isShowing()) {
            var a = this.getPosition(),
                b = cc.spawn(cc.fadeTo(0.5, 240), cc.moveTo(1, a.x, a.y));
            this.show();
            this.setPosition(cc.pAdd(a, cc.p(0, -24)));
            this.setOpacity(0);
            this.runAction(b)
        } else 0 >= this.getItemCount() && this.isShowing() && this.hide()
    },
    _createMessageItem: function (a, b) {
        var c = this.getContentNodeSize(),
            d = new jui.Panel(c.width, 50, new jui.StackLayout(jui.StackLayout.HORIZONTAL));
        d.getLayout().setLayoutHiddenItems(!0);
        d.setMargin({
            t: 4,
            b: 4
        });
        var f = new jui.TextBox(null, null, this.getTextStyle());
        f.setVerticalAlignment(jui.VerticalAlignment.center);
        f.setHorizontalAlignment(jui.HorizontalAlignment.center);
        f.setMargin({
            t: 4,
            b: 4
        });
        f.setBoundingWidth(c.width - 50);
        f.setEnableSizeToContent(!0);
        f.bindTextValue(a.getObservable("text"));
        c = new jui.TextBox(null, null, this.getTextStyle());
        c.setVerticalAlignment(jui.VerticalAlignment.center);
        c.setTextHorizontalAlignment(jui.TextHorizontalAlignment.center);
        c.setTextVerticalAlignment(jui.TextVerticalAlignment.center);
        c.setMargin({
            t: 4,
            b: 4,
            l: 4,
            r: 4
        });
        c.setBoundingWidth(40);
        c.bindTextValue(a.getObservable("textTimeout"));
        jui.util.bindWidgetVisibility(c, a.getObservable("displayTimeout"));
        d.addChild(f, jui.WidgetLayers.UI);
        d.addChild(c, jui.WidgetLayers.UI);
        d.setContentSizeToChildrenWidthAndHeight();
        d.setAutoSizeToChildren(!0);
        return d
    }
});
pokerapp.TableLayout = cc.Class.extend({
    _pos: [{
        seat: cc.p(480, 402),
        chips: cc.p(476, 342),
        dealer: cc.p(380, 365),
        chips_layout: pokerapp.UIChipStackLayout.horizontal,
        layer: jui.WidgetLayers.UI
    }, {
        seat: cc.p(710, 370),
        chips: cc.p(638, 312),
        dealer: cc.p(605, 355),
        chips_layout: pokerapp.UIChipStackLayout.vertical_right,
        layer: jui.WidgetLayers.UI
    }, {
        seat: cc.p(864, 280),
        chips: cc.p(718, 262),
        dealer: cc.p(740, 300),
        chips_layout: pokerapp.UIChipStackLayout.vertical_right,
        layer: jui.WidgetLayers.UI
    }, {
        seat: cc.p(864, 150),
        chips: cc.p(718,
            190),
        dealer: cc.p(740, 152),
        chips_layout: pokerapp.UIChipStackLayout.vertical_right,
        layer: jui.WidgetLayers.UI + 1
    }, {
        seat: cc.p(710, 45),
        chips: cc.p(638, 147),
        dealer: cc.p(622, 108),
        chips_layout: pokerapp.UIChipStackLayout.vertical_right,
        layer: jui.WidgetLayers.UI + 2
    }, {
        seat: cc.p(480, 42),
        chips: cc.p(476, 146),
        dealer: cc.p(395, 100),
        chips_layout: pokerapp.UIChipStackLayout.horizontal,
        layer: jui.WidgetLayers.UI
    }, {
        seat: cc.p(250, 45),
        chips: cc.p(340, 147),
        dealer: cc.p(265, 135),
        chips_layout: pokerapp.UIChipStackLayout.vertical_left,
        layer: jui.WidgetLayers.UI + 2
    }, {
        seat: cc.p(100, 150),
        chips: cc.p(250, 190),
        dealer: cc.p(180, 202),
        chips_layout: pokerapp.UIChipStackLayout.vertical_left,
        layer: jui.WidgetLayers.UI + 1
    }, {
        seat: cc.p(100, 280),
        chips: cc.p(250, 262),
        dealer: cc.p(215, 300),
        chips_layout: pokerapp.UIChipStackLayout.vertical_left,
        layer: jui.WidgetLayers.UI
    }, {
        seat: cc.p(250, 370),
        chips: cc.p(340, 312),
        dealer: cc.p(265, 325),
        chips_layout: pokerapp.UIChipStackLayout.vertical_left,
        layer: jui.WidgetLayers.UI
    }],
    _createControls: function () {
        this.setBackground("game/game-table.png",
            !0);
        this.setCenterAlignment();
        var a = new jui.Image("game/game-table-logo.png");
        a.setOpacity(125);
        this.addWidgetChild(a);
        jui.util.alignAndAnchorCenter(a)
    },
    _getLayoutIndex: function (a, b) {
        switch (b) {
        case 2:
            switch (a) {
            case 2:
                return 0;
            case 7:
                return 5;
            default:
                return 0
            }
            case 3:
                switch (a) {
                case 1:
                    return 2;
                case 4:
                    return 5;
                case 8:
                    return 8;
                default:
                    return 0
                }
                case 4:
                    switch (a) {
                    case 1:
                        return 0;
                    case 2:
                        return 2;
                    case 7:
                        return 5;
                    case 8:
                        return 8;
                    default:
                        return 0
                    }
                    case 5:
                        switch (a) {
                        case 0:
                            return 2;
                        case 2:
                            return 3;
                        case 4:
                            return 5;
                        case 6:
                            return 7;
                        case 8:
                            return 8;
                        default:
                            return 0
                        }
                        case 6:
                            switch (a) {
                            case 0:
                                return 0;
                            case 1:
                                return 2;
                            case 2:
                                return 3;
                            case 7:
                                return 5;
                            case 8:
                                return 7;
                            case 9:
                                return 8;
                            default:
                                return 0
                            }
                            case 7:
                                switch (a) {
                                case 0:
                                    return 1;
                                case 2:
                                    return 2;
                                case 3:
                                    return 3;
                                case 5:
                                    return 4;
                                case 6:
                                    return 6;
                                case 8:
                                    return 7;
                                case 9:
                                    return 8;
                                default:
                                    return 0
                                }
                                case 8:
                                    switch (a) {
                                    case 0:
                                        return 1;
                                    case 1:
                                        return 2;
                                    case 2:
                                        return 3;
                                    case 3:
                                        return 4;
                                    case 6:
                                        return 6;
                                    case 7:
                                        return 7;
                                    case 8:
                                        return 8;
                                    case 9:
                                        return 9;
                                    default:
                                        return 0
                                    }
                                    case 9:
                                        switch (a) {
                                        case 0:
                                            return 1;
                                        case 1:
                                            return 2;
                                        case 2:
                                            return 3;
                                        case 3:
                                            return 4;
                                        case 4:
                                            return 5;
                                        case 6:
                                            return 6;
                                        case 7:
                                            return 7;
                                        case 8:
                                            return 8;
                                        case 9:
                                            return 9;
                                        default:
                                            return 0
                                        }
                                        case 10:
                                            switch (a) {
                                            case 0:
                                                return 0;
                                            case 1:
                                                return 1;
                                            case 2:
                                                return 2;
                                            case 3:
                                                return 3;
                                            case 4:
                                                return 4;
                                            case 5:
                                                return 5;
                                            case 6:
                                                return 6;
                                            case 7:
                                                return 7;
                                            case 8:
                                                return 8;
                                            case 9:
                                                return 9;
                                            default:
                                                return 0
                                            }
                                            default:
                                                return 0
        }
    },
    _getSeatLayoutPosition: function (a, b) {
        return this._pos[this._getLayoutIndex(a, b)].seat
    },
    _getSeatLayoutPosition: function (a, b) {
        return this._pos[this._getLayoutIndex(a,
            b)].seat
    },
    _getChipStackLayoutPosition: function (a, b) {
        return this._pos[this._getLayoutIndex(a, b)].chips
    },
    _getChipStackLayoutMode: function (a, b) {
        return this._pos[this._getLayoutIndex(a, b)].chips_layout
    },
    _getDealerChipLayoutPosition: function (a, b) {
        return this._pos[this._getLayoutIndex(a, b)].dealer
    },
    _getSeatLayoutLayer: function (a, b) {
        return this._pos[this._getLayoutIndex(a, b)].layer
    }
});
pokerapp.UICard = cc.Sprite.extend({
    _cardRender: null,
    _cardModel: null,
    _isFaceUp: !1,
    _isDimmed: !1,
    _isSelected: !1,
    _dealActive: !1,
    _targetPos: null,
    _origZOrder: null,
    _context: null,
    ctor: function () {
        this._super();
        this._context = new jcore.DisposableContext;
        this.reset();
        this.invalidate()
    },
    onEnter: function () {
        this._super();
        this._context.add(pokerapp.PokerGameGlobalOptions.getInstance().getObservable("fourColorDeck").subscribe(function (a) {
            this.invalidate()
        }, this))
    },
    onExit: function () {
        this._super();
        this._context.dispose()
    },
    reset: function () {
        this.stopAllActions();
        this._dealActive = this._isSelected = this._isDimmed = this._isFaceUp = !1;
        this._origZOrder = this.getLocalZOrder();
        this._targetPos = cc.p(this.x, this.y)
    },
    isSelected: function () {
        return this._isSelected
    },
    isFaceUp: function () {
        return this._isFaceUp
    },
    isDimmed: function () {
        return this._isDimmed
    },
    setSelected: function (a) {
        if (this._isSelected !== a) {
            this._isSelected = a;
            a = 6;
            this._isSelected ? (a = 6, this.setLocalZOrder(jui.WidgetLayers.UI + 5)) : (a = -6, this.setLocalZOrder(jcore.util.orDefault(this._origZOrder,
                jui.WidgetLayers.UI)));
            var b = null,
                b = jcore.util.isNotNull(this._targetPos) ? new cc.Sequence(new cc.MoveTo(0.075, this._targetPos.x, this._targetPos.y + a)) : new cc.Sequence(new cc.MoveBy(0.075, 0, a));
            this.runAction(b)
        }
    },
    setDimmed: function (a) {
        this._isDimmed !== a && (this._isDimmed = a, this.isFaceUp() && this.invalidate())
    },
    setFaceUp: function (a, b, c) {
        this._isFaceUp !== a && (b ? this._isFaceUp != a && (this._isFaceUp = a, a = null, a = c ? new cc.Sequence(new cc.DelayTime(c), new cc.ScaleTo(0.1, 0, 1), new cc.CallFunc(this.invalidate, this),
            new cc.ScaleTo(0.1, 1, 1)) : new cc.Sequence(new cc.ScaleTo(0.1, 0, 1), new cc.CallFunc(this.invalidate, this), new cc.ScaleTo(0.1, 1, 1)), this.runAction(a)) : (this._isFaceUp = a, this.invalidate()))
    },
    setCard: function (a) {
        return (null === a || !a.equals(this._cardModel)) && a !== this._cardModel ? (this._cardModel = a, this.stopAllActions(), this.scaleY = this.scaleX = 1, this.rotationY = this.rotationX = 0, jcore.util.isNotNull(this._targetPos) && this.setPosition(this._targetPos), this._dealActive = this._isSelected = this._isDimmed = this._isFaceUp = !1, jcore.util.isNotNull(this._origZOrder) && this.setLocalZOrder(jcore.util.orDefault(this._origZOrder, jui.WidgetLayers.UI)), this.invalidate(), !0) : !1
    },
    getCard: function () {
        return this._cardModel
    },
    isCardValid: function () {
        return this._cardModel ? this._cardModel.isValid() : !1
    },
    getNext: function () {
        return this.next
    },
    setNext: function (a) {
        this.next = a
    },
    setRender: function (a) {
        this._cardRender != a && (this._cardRender = a, this.invalidate())
    },
    runDealAnimation: function (a, b) {
        if (!this._dealActive) {
            this._dealActive = !0;
            var c = cc.sequence(cc.delayTime(b),
                cc.spawn(cc.fadeIn(0.1), cc.moveTo(0.45, this._targetPos.x, this._targetPos.y), cc.rotateBy(0.45, 720), cc.callFunc(_.bind(this._onDealAnimationEnd, this))));
            this.setOpacity(0);
            this.setPosition(a);
            this.runAction(c)
        }
    },
    _onDealAnimationEnd: function () {
        try {
            var a = this.isCardValid();
            this.setFaceUp(a, a, 0.5);
            this.setDimmed(!1);
            this.setSelected(!1)
        } finally {
            this._dealActive = !1
        }
    },
    invalidate: function () {
        this._cardModel && this._cardModel.getSuit();
        this._cardModel && this._cardModel.getRank();
        this.isCardValid();
        var a = this._findSpriteFrame();
        if (a) {
            var b = this.getSpriteFrame();
            a !== b && this.setSpriteFrame(a)
        } else cc.log("no frame for card!");
        null === this._cardModel ? this.setOpacity(0) : this.isDimmed() ? (this.setOpacity(255), this.setColor(cc.color(80, 80, 80, 255))) : (this.setOpacity(255), this.setColor(cc.color(255, 255, 255, 255)))
    },
    _findSpriteFrame: function () {
        var a = this._cardModel ? this._cardModel.getSuit() : CardSuit.Invalid,
            b = this._cardModel ? this._cardModel.getRank() : CardRank.Invalid,
            c = this._cardRender ? this._cardRender : pokerapp.CardRender.getInstance();
        return !this.isFaceUp() || a == CardSuit.Invalid && b == CardRank.Invalid ? c.getFrameForCardBack() : c.getFrameForCard(this._cardModel)
    }
});
pokerapp.CardRender = cc.Class.extend({
    _folderName: "cards/",
    _deckName: "regular/",
    _card_back_name: "Card_Back2",
    _card_blank_name: "Card_Blank",
    ctor: function () {},
    setDeckName: function (a) {
        this._deckName != a && (this._deckName = a)
    },
    getFrameForCardBack: function () {
        return cc.spriteFrameCache.getSpriteFrame(this._folderName + this._deckName + this._card_back_name + ".png")
    },
    getFrameForCard: function (a) {
        var b;
        b = a.getSuit();
        a = a.getRank();
        if (a != CardRank.Invalid && b != CardSuit.Invalid) {
            var c = this._folderName,
                c = c + this._deckName,
                c = c + CardModel.getSuitString(b),
                c = c + "_" + CardModel.getRankString(a),
                c = c + ".png";
            b = cc.spriteFrameCache.getSpriteFrame(c)
        } else b != kCardSuit_Invalid ? (c = this._folderName, c += this._deckName, c += CardModel.getSuitString(b), c += ".png", b = cc.spriteFrameCache.getSpriteFrame(c)) : b = cc.spriteFrameCache.getSpriteFrame(this._folderName + this._card_blank_name + ".png");
        return b
    }
});
var _gSharedDeck = new pokerapp.CardRender;
pokerapp.CardRender.getInstance = function () {
    return _gSharedDeck
};
pokerapp.UIConnectMessage = jui.Panel.extend({
    _designSize: cc.size(450, 95),
    _designLoadingIconPath: "loading/loading.png",
    _ui_container: null,
    _ui_label: null,
    _ui_loading: null,
    _ui_button: null,
    _callback: null,
    ctor: function () {
        this._super(this._designSize.width, this._designSize.height);
        this._createControls()
    },
    _createControls: function () {
        var a = jui.util.sprite.create(R.sprites.black);
        a.setOpacity(100);
        this.setBackground(a);
        this._ui_container = new jui.Panel(this._designSize.width, this._designSize.height, new jui.StackLayout(jui.StackLayout.VERTICAL));
        jui.Widget.configureAttachmentsWithConfig(this._ui_container, this._designSize.width, this._designSize.height, this.getTheme().connectmessage_config);
        this._ui_container.setCenterAlignment();
        this._ui_container.setPadding({
            l: 12,
            t: 12,
            r: 12,
            b: 8
        });
        this.addChild(this._ui_container);
        a = new jui.Panel(this._designSize.width, this._designSize.height, new jui.StackLayout(jui.StackLayout.HORIZONTAL));
        a.setPadding({
            l: 2,
            t: 2,
            r: 2,
            b: 5
        });
        this._ui_label = new jui.TextBox(390, 28, this.getTheme().connectmessage_textStyle);
        this._ui_label.setVerticalAlignment(jui.VerticalAlignment.center);
        this._ui_loading = new jui.Image(this._designLoadingIconPath);
        this._ui_loading.setVerticalAlignment(jui.VerticalAlignment.center);
        this._ui_loading.setMargin(jui.Margin(12));
        a.addChild(this._ui_loading);
        a.addChild(this._ui_label);
        this._ui_button = new jui.ButtonLabel(this.getTheme().connectaction_config);
        this._ui_button.setCenterAlignment();
        this._ui_button.bindClickEventListener(this._onActionClicked, this);
        this._ui_button.hide();
        this._ui_container.addChild(a);
        this._ui_container.addChild(this._ui_button);
        this._ui_container.setAutoSizeToChildren(!1, !0);
        this._ui_container.setTouchEnabled(!0, !0);
        this._ui_container.bindClickEventListener(this._onActionClicked, this)
    },
    setMessage: function (a) {
        this._ui_label.setTextValue(a) && (this._ui_loading.stopAllActions(), this._ui_loading.runAction(cc.repeatForever(cc.rotateBy(2, 360))))
    },
    setAction: function (a, b) {
        this._callback = b;
        this._ui_button.setTextValue(a) && (jcore.util.isNullOrEmpty(a) ? this._ui_button.hide() : this._ui_button.show())
    },
    _onActionClicked: function () {
        jcore.util.isNotNull(this._callback) &&
            this._callback(this)
    }
});
pokerapp.UIChatBox = jui.Panel.extend({
    CARDSYMBOLS: "^card_symbols^",
    MAX_LINES: 75,
    _tableModel: null,
    _textBox: null,
    _uibutton_expandChat: null,
    ctor: function (a, b, c) {
        this._super(a, b);
        this._createControls(c)
    },
    _createControls: function (a) {
        jui.Widget.configureAttachmentsWithConfig(this, this.width, this.height, this.getTheme().infoTab_config);
        this._textBox = new jui.RichTextBox;
        a ? this._textBox.setTextStyle(this.getTheme().chatbox_largeTextStyle) : this._textBox.setTextStyle(this.getTheme().chatbox_textStyle);
        jui.Widget.configureAttachmentsWithConfig(this._textBox,
            this.getContentNodeSize().width, this.getContentNodeSize().height, this.getTheme().chatbox_config);
        this._textBox.setHorizontalAlignment(jui.HorizontalAlignment.stretch);
        this._textBox.setVerticalAlignment(jui.VerticalAlignment.stretch);
        this.addChild(this._textBox, jui.WidgetLayers.UI);
        this._uibutton_expandChat = new jui.Image("game/icn-expand.png");
        this._uibutton_expandChat.setHorizontalAlignment(jui.HorizontalAlignment.right);
        this._uibutton_expandChat.setVerticalAlignment(jui.VerticalAlignment.top);
        this._uibutton_expandChat.setMargin(jui.Margin({
            t: 2,
            r: 6
        }));
        this._uibutton_expandChat.setTouchEnabled(!0);
        this._uibutton_expandChat.bindClickEventListener(this._onExpandChat, this);
        this.addChild(this._uibutton_expandChat, jui.WidgetLayers.UI_Overlay);
        return this
    },
    setExpandButtonVisible: function (a) {
        this._uibutton_expandChat.setVisible(a)
    },
    setTableModel: function (a) {
        if (this._tableModel !== a) {
            var b = this._tableModel;
            this._tableModel = a;
            null != b && this._textBox.removeAllTextLines();
            if (null != this._tableModel) {
                this._tableModel.getChatMessages().on.arrayAdded.add(this._onAdd,
                    this);
                a = this._tableModel.getChatMessages().getArray();
                for (b = Math.max(0, a.length - this.MAX_LINES - 1); b < a.length; b++) this._onAdd(this, a[b])
            }
        }
    },
    getTable: function () {
        return this._tableModel
    },
    isEnableTournamentChat: function () {
        return !0
    },
    setEnableTournamentChat: function () {},
    setChatDisabled: function (a) {},
    scrollToBottom: function () {
        this._textBox.scrollToBottom()
    },
    _onExpandChat: function () {
        cc.eventManager.dispatchCustomEvent(pokerapp.PokerAppEvents.event_popup_chat, this._tableModel)
    },
    _onAdd: function (a, b) {
        var c =
            null,
            d = null;
        if ((d = b && b.value ? b.value : b) && d.dealer) c = d.chatType, d = d.messageParameters, jcore.util.isNotNull(c) && jcore.util.isNotNull(d) && this._translateMessageParameters(c, d);
        else if (d && d.player) {
            var c = jcore.util.orDefault(d.chatType, pokerapp.PlayerChatType.None),
                f = jcore.util.orDefault(d.playerName, ""),
                d = jcore.util.orDefault(d.messageText, "");
            this._translatePlayerMessage(c, f, d)
        }
    },
    _translatePlayerMessage: function (a, b, c) {
        var d = cc.color(255, 255, 255);
        switch (a) {
        case pokerapp.PlayerChatType.OBS:
            this._outputChat(b +
                pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TitleObserver) + " " + c, d, !1);
            break;
        case pokerapp.PlayerChatType.SUP:
            this._outputChat(b + pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TitleOperator) + " " + c, d, !1);
            break;
        case pokerapp.PlayerChatType.SYS:
            this._outputChat(b + pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TitleSystem) + " " + c, d, !1);
            break;
        case pokerapp.PlayerChatType.CELP:
        case pokerapp.PlayerChatType.CELO:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TitleVIP) +
                b + ": " + c, d, !1);
            break;
        default:
            this._outputChat(b + ": " + c, d, !1)
        }
    },
    _translateMessageParameters: function (a, b) {
        var c = cc.color(0, 200, 0),
            d = cc.color(255, 255, 255);
        switch (a) {
        case pokerapp.DealerChatType.ClientGenerated:
            this._outputChat(b[0]);
            break;
        case pokerapp.DealerChatType.Turn:
            this._outputChat(String.format(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_DealerDealingTurn), this.CARDSYMBOLS), d, !1, b[0]);
            break;
        case pokerapp.DealerChatType.Flop:
            this._outputChat(String.format(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_DealerDealingFlop),
                this.CARDSYMBOLS), d, !1, b[0]);
            break;
        case pokerapp.DealerChatType.River:
            this._outputChat(String.format(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_DealerDealingRiver), this.CARDSYMBOLS), d, !1, b[0]);
            break;
        case pokerapp.DealerChatType.AbortHand:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_DealerHandCancelled));
            break;
        case pokerapp.DealerChatType.Addon:
            this._outputChat(String.format(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerAddsOnChips),
                b[1], b[2]));
            break;
        case pokerapp.DealerChatType.AllIn:
            this._outputChat(String.format(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerIsAllIn), b[1]));
            break;
        case pokerapp.DealerChatType.Bet:
            c = this.getTable().formatCurrency(pokerapp.ConvertUtil.toDecimal(b[2], 0));
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerBets, b[1], c));
            break;
        case pokerapp.DealerChatType.Bounty:
            this.getTable().isTournament() && this.isEnableTournamentChat() && this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentBountyWin,
                b[1], b[2]), c, !0);
            break;
        case pokerapp.DealerChatType.BreakEnd:
            this.getTable().isTournament() && this.isEnableTournamentChat() && this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentBreakHasEnded), c);
            break;
        case pokerapp.DealerChatType.BreakStart:
            this.getTable().isTournament() && this.isEnableTournamentChat() && (d = pokerapp.ConvertUtil.toInt(b[0], 0), this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentBreakHasStart, pokerapp.FormatUtil.formatTimeSpanSeconds(d)),
                c));
            break;
        case pokerapp.DealerChatType.BuyIn:
        case pokerapp.DealerChatType.BuyInHand:
            c = this.getTable().formatCurrency(pokerapp.ConvertUtil.toDecimal(b[2], 0));
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerBuyin, b[1], c));
            break;
        case pokerapp.DealerChatType.Call:
            2 < b.Length ? (c = this.getTable().formatCurrency(pokerapp.ConvertUtil.toDecimal(b[2], 0)), this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerCalls, b[1], c))) : this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerCallsNoAmount,
                b[1]));
            break;
        case pokerapp.DealerChatType.CancelTournament:
            this.getTable().isTournament() && this.isEnableTournamentChat() && this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentCancelled), c);
            break;
        case pokerapp.DealerChatType.Chat:
            break;
        case pokerapp.DealerChatType.ChatSuspended:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerChatSuspended));
            break;
        case pokerapp.DealerChatType.Check:
            this._outputChat(String.format(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerChecks),
                b[1]));
            break;
        case pokerapp.DealerChatType.CloseTable:
        case pokerapp.DealerChatType.DisconnectObserver:
            break;
        case pokerapp.DealerChatType.EliminateFromTournament:
            this.getTable().isTournament() && this.isEnableTournamentChat() && (-1 < pokerapp.ConvertUtil.toInt(b[2], -1) ? this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentEliminated, b[1], b[2]), c, !0) : this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatOutputControl_TourThankYouMsg), c, !0));
            break;
        case pokerapp.DealerChatType.Fold:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerFolds, b[1]));
            break;
        case pokerapp.DealerChatType.GetGC:
            break;
        case pokerapp.DealerChatType.HandForHandPause:
            this.getTable().isTournament() && this.isEnableTournamentChat() && this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentHandForHandInEffectChatDisabled), c);
            break;
        case pokerapp.DealerChatType.HandSaveProblem:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TablePaused),
                c);
            break;
        case pokerapp.DealerChatType.HFHChatDisabled:
            this.getTable().isTournament() && this.isEnableTournamentChat() && this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentHandForHandInEffectChatDisabled), c);
            break;
        case pokerapp.DealerChatType.HoleCards:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_DealerDealingHoleCards));
            break;
        case pokerapp.DealerChatType.Join:
            this.getTable().isTournament() ? this.isEnableTournamentChat() && this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentJoinTable,
                b[1]), c) : this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_JoinTable, b[1]));
            break;
        case pokerapp.DealerChatType.Leave:
            this.getTable().isTournament() ? this.isEnableTournamentChat() && this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentLeaveTable, b[1]), c) : this._outputChat(String.format(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_LeaveTable), b[1]));
            break;
        case pokerapp.DealerChatType.MoveBetToPot:
            break;
        case pokerapp.DealerChatType.Muck:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerMucks,
                b[1]));
            break;
        case pokerapp.DealerChatType.NewBlindLevel:
            this.getTable().isTournament() && this.isEnableTournamentChat() && (d = pokerapp.FormatUtil.formatStake(new pokerapp.Stake(pokerapp.ConvertUtil.toDecimal(b[1], 0), pokerapp.ConvertUtil.toDecimal(b[1], 0), pokerapp.ConvertUtil.toDecimal(b[2], 0), pokerapp.ConvertUtil.toDecimal(b[0], 0), this.getTable().getDisplayCurrency()), this.getTable().getGameHeader().limitType), this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentBlindsChanged,
                d), c));
            break;
        case pokerapp.DealerChatType.Pause:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TablePaused));
            break;
        case pokerapp.DealerChatType.PauseTournament:
            this.getTable().isTournament() && this.isEnableTournamentChat() && this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentPaused), c);
            break;
        case pokerapp.DealerChatType.PostAnte:
            c = this.getTable().formatCurrency(pokerapp.ConvertUtil.toDecimal(b[2], 0));
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerPostsAnte,
                b[1], c));
            break;
        case pokerapp.DealerChatType.PostBB:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerPostsBigBlind, b[1]));
            break;
        case pokerapp.DealerChatType.PostDB:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerPostsBigAndDeadBlind, b[1]));
            break;
        case pokerapp.DealerChatType.PostSB:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerPostsSmallBlind, b[1]));
            break;
        case pokerapp.DealerChatType.BringIn:
            c =
                this.getTable().formatCurrency(pokerapp.ConvertUtil.toDecimal(b[2], 0));
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerPostsBringIn, b[1], c));
            break;
        case pokerapp.DealerChatType.Raise_:
            d = this.getTable().formatCurrency(pokerapp.ConvertUtil.toDecimal(b[2], 0));
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerRaise, b[1], d));
            break;
        case pokerapp.DealerChatType.Rebuy:
            d = this.getTable().formatCurrency(pokerapp.ConvertUtil.toDecimal(b[2],
                0));
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerRebuy, b[1], d), c);
            break;
        case pokerapp.DealerChatType.RebuyCompleted:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_RebuyCompleted), c);
            break;
        case pokerapp.DealerChatType.RebuyRefunded:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.GameActions_RebuyRefunded), c);
            break;
        case pokerapp.DealerChatType.ThirdStreet:
            this._outputChat(String.format(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_DealerDealingThirdStreet)));
            break;
        case pokerapp.DealerChatType.FifthStreet:
            this._outputChat(String.format(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_DealerDealingFifthStreet)));
            break;
        case pokerapp.DealerChatType.FourthStreet:
            this._outputChat(String.format(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_DealerDealingFourthStreet)));
            break;
        case pokerapp.DealerChatType.Vela:
            this._outputChat(String.format(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_DealerDealingVela), this.CARDSYMBOLS),
                d, !1, b[0]);
            break;
        case pokerapp.DealerChatType.Resume:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TableResumed));
            break;
        case pokerapp.DealerChatType.ResumeTournament:
            this.getTable().isTournament() && this.isEnableTournamentChat() && this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentResumed), c);
            break;
        case pokerapp.DealerChatType.ReturnBet:
            c = this.getTable().formatCurrency(pokerapp.ConvertUtil.toDecimal(b[2], 0));
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerReturnBet,
                b[1], c));
            break;
        case pokerapp.DealerChatType.ShowCards:
            2 < b.Length ? this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerShowCardsWithHandInfo, b[0], this.CARDSYMBOLS, pokerapp.FormatUtil.formatHandInfo(b, 2)), d, !1, b[1]) : this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerShowCards, b[0], this.CARDSYMBOLS), d, !1, b[1]);
            break;
        case pokerapp.DealerChatType.SitIn:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerSitin,
                b[1]));
            break;
        case pokerapp.DealerChatType.SitOut:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerSitout, b[1]));
            break;
        case pokerapp.DealerChatType.StartDET:
            this.getTable().isTournament() && this.isEnableTournamentChat() && this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentDisconnectExtraTime, b[1]), c);
            break;
        case pokerapp.DealerChatType.StartExtraTime:
            this.getTable().isTournament() && this.isEnableTournamentChat() && this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentExtraTime,
                b[1]), c);
            break;
        case pokerapp.DealerChatType.StartGame:
            this.getTable().isTournament() ? this.isEnableTournamentChat() && (30 > pokerapp.ConvertUtil.toInt(b[0], 0) ? this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentStartingShortly), c) : this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentStartingInSecs, pokerapp.ConvertUtil.toInt(b[0], 0) / 60), c)) : 30 > pokerapp.ConvertUtil.toInt(b[0], 0) ? this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_NewGameStartingShortly)) :
                this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_NewGameStartingInSecs, pokerapp.ConvertUtil.toInt(b[0], 0) / 60));
            break;
        case pokerapp.DealerChatType.Table_ChatDisabled:
            if (null != b && 1 < b.Length) this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_AllInChatdisabled, b[1]), c);
            else if (null != b && 1 == b.Length && !Table.IsChatDisabled) {
                d = null;
                switch (b[0]) {
                case "2":
                    d = pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerChatdisabledAtFinalTable);
                    break;
                case "3":
                    d = pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerChatdisabledWhileInTheMoney);
                    break;
                case "4":
                    d = pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerChatdisabledforTournament);
                    break;
                case "5":
                    d = pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_ObserverChatdisabledAtFinalTable);
                    break;
                case "6":
                    d = pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_ObserverChatdisabledWhileInTheMoney);
                    break;
                case "7":
                    d = pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_ObserverChatdisabledForTournament);
                    break;
                case "8":
                    d = pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerChatDisabled);
                    break;
                case "9":
                    d = pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_ObserverChatDisabled)
                }
                null != d && this._outputChat(d, c)
            }
            this.setChatDisabled(!0);
            break;
        case pokerapp.DealerChatType.Table_ChatEnabled:
            if (null != b && 0 < b.Length) {
                d = null;
                switch (b[0]) {
                case "0":
                    d = pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_ChatEnabled);
                    break;
                case "1":
                    d = pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerChatEnabled);
                    break;
                case "2":
                    d = pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_ObserverChatEnabled)
                }
                null != d && this._outputChat(d, c)
            } else this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_ChatEnabled), c);
            this.setChatDisabled(!1);
            break;
        case pokerapp.DealerChatType.TablePlayerMoved:
            this.getTable().isTournament() && this.isEnableTournamentChat() && this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentMovedTable, b[1], b[2], pokerapp.ConvertUtil.toInt(b[0] +
                1, 0)), c);
            break;
        case pokerapp.DealerChatType.WaitButtonPass:
            this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_EligibleToPlayAfterButtonPass, b[1]));
            break;
        case pokerapp.DealerChatType.WaitForRebuy:
            this.isEnableTournamentChat() && (2 < b.length ? this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentRebuySecondsLeft, b[1], b[2])) : this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentRebuyFixedTime, b[1])));
            break;
        case pokerapp.DealerChatType.WaitListPosition:
            break;
        case pokerapp.DealerChatType.WinHiPot:
            pokerapp.ConvertUtil.toInt(b[0], -1);
            d = this.getTable().formatCurrency(pokerapp.ConvertUtil.toDecimal(b[2], 0));
            5 <= b.length ? this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerWinHighPot, b[1], d, pokerapp.FormatUtil.formatHandInfo(b, 4)), null, !0) : this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerWinHighPotNoCards, b[1], d), null, !0);
            break;
        case pokerapp.DealerChatType.WinLoPot:
            pokerapp.ConvertUtil.toInt(b[0], -1);
            d = this.getTable().formatCurrency(pokerapp.ConvertUtil.toDecimal(b[2], 0));
            5 <= b.length ? this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerWinLowPot, b[1], d, pokerapp.FormatUtil.formatHandInfo(b, 4)), null, !0) : this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerWinLowPot, b[1], d, b[3]), null, !0);
            break;
        case pokerapp.DealerChatType.WinPot:
            pokerapp.ConvertUtil.toInt(b[0],
                -1);
            d = this.getTable().formatCurrency(pokerapp.ConvertUtil.toDecimal(b[2], 0));
            5 <= b.length ? this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerWinPot, b[1], d, pokerapp.FormatUtil.formatHandInfo(b, 4)), null, !0) : this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_PlayerWinPotNoCards, b[1], d), null, !0);
            break;
        case pokerapp.DealerChatType.WinRound:
            this.getTable().isTournament() && this.isEnableTournamentChat() && this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentWinRound,
                b[1]), c, !0);
            break;
        case pokerapp.DealerChatType.WinTournament:
            this.getTable().isTournament() && this.isEnableTournamentChat() && this._outputChat(pokerapp.Translator.Translate(pokerapp.TranslationId.ChatMessage_TournamentWin, b[1]), c, !0);
            break;
        case pokerapp.DealerChatType.QueryRematch:
        case pokerapp.DealerChatType.RematchAccepted:
        case pokerapp.DealerChatType.RematchDeclined:
            break;
        default:
            c = "";
            for (d = 0; d < b.length; d++) c = null != b[d] ? c + b[d] : c + "<null> ";
            this._outputChat(String.format("{0}: {1}", a, c))
        }
    },
    _outputChat: function (a,
        b, c, d) {
        jcore.util.isNotNull(a) && jcore.util.isNotNull(d) && (a = a.replace(this.CARDSYMBOLS, d));
        if (jcore.util.isNotNull(a))
            for (this._textBox.appendTextLine(a); this._textBox.getTextLineCount() > this.MAX_LINES;) this._textBox.removeTextLineAt(0)
    }
});
pokerapp.UIRingGameInfoTab = jui.Panel.extend({
    _tableModel: null,
    ctor: function (a, b, c) {
        this._super(b, c);
        this._tableModel = a;
        this._createControls()
    },
    _createControls: function () {
        this.setLayout(new jui.WrapLayout);
        jui.Widget.configureAttachmentsWithConfig(this, this.width, this.height, this.getTheme().infoTab_config);
        var a = null,
            a = this._createfield();
        a.setPrefixValue("View Flop%: ");
        a.bindTextValue(this._tableModel.getTableStatistics().getObservable("viewFlopPercentage"));
        this.addChild(a);
        a = this._createfield();
        a.setPrefixValue("Avg Pot: ");
        a.bindTextValue(this._tableModel.getTableStatistics().getObservable("averagePot"));
        this.addChild(a);
        a = this._createfield();
        a.setPrefixValue("Hands/Hr: ");
        a.bindTextValue(this._tableModel.getTableStatistics().getObservable("handsPerHour"));
        this.addChild(a);
        a = this._createfield();
        a.setPrefixValue("Watching: ");
        a.bindTextValue(this._tableModel.getTableStatistics().getObservable("observerCount"));
        this.addChild(a)
    },
    _createfield: function () {
        var a = new jui.TextBox(100, 20, this.getTheme().infoTab_textStyle);
        a.setBackground("lobby/field-background.png");
        a.setPadding(2);
        a.setMargin(2);
        a.setHorizontalAlignment(jui.HorizontalAlignment.left);
        return a
    }
});
pokerapp.UITournamentGameInfoTab = jui.Panel.extend({
    _tableModel: null,
    ctor: function (a, b, c) {
        this._super(b, c);
        this._tableModel = a;
        this._createControls()
    },
    _createControls: function () {
        this.setLayout(new jui.WrapLayout);
        jui.Widget.configureAttachmentsWithConfig(this, this.width, this.height, this.getTheme().infoTab_config);
        var a = null,
            a = this._createfield();
        a.setPrefixValue("Rank: ");
        a.bindTextValue(this._tableModel.getTableStatistics().getObservable("currentRank"));
        this.addChild(a);
        a = this._createfield();
        a.setPrefixValue("Players: ");
        a.bindTextValue(this._tableModel.getTableStatistics().getObservable("activePlayers"));
        this.addChild(a);
        a = this._createfield();
        a.setPrefixValue("Level: ");
        a.bindTextValue(this._tableModel.getTableStatistics().getObservable("currentLevel"));
        this.addChild(a)
    },
    _createfield: function () {
        var a = new jui.TextBox(95, 20, this.getTheme().infoTab_textStyle);
        a.setBackground("lobby/field-background.png");
        a.setPadding(2);
        a.setMargin(2);
        a.setHorizontalAlignment(jui.HorizontalAlignment.left);
        return a
    }
});
pokerapp.PokerAppEvents = {
    event_open_lobby: "event_open_lobby",
    event_back: "event_back",
    event_open_lobby_ringgames: "event_open_lobby_ringgames",
    event_open_lobby_tournaments: "event_open_lobby_tournaments",
    event_open_lobby_tournaments_sng: "event_open_lobby_tournaments_sng",
    event_popup_profile: "event_popup_profile",
    event_popup_chat: "event_popup_chat",
    event_popup_buyin: "event_popup_buyin",
    event_popup_login: "event_popup_login",
    event_popup_filter: "event_popup_filter",
    event_popup_rebuy_addon: "event_popup_rebuy_addon",
    event_popup_menu_game: "event_popup_menu_game",
    event_popup_menu_tables: "event_popup_menu_tables",
    event_open_game: "event_open_game",
    event_popup_test: "event_popup_test",
    event_lobby_test: "event_lobby_test",
    event_open_cashier: "event_open_cashier",
    event_game_buychips: "event_game_buychips",
    event_game_rebuy: "event_game_rebuy",
    event_game_addon: "event_game_addon",
    event_popup_alert: "event_popup_alert",
    event_open_handhistory: "event_open_handhistory"
};
var PokerAppUIState = jcore.Enum.create({
    STATE_NONE: 0,
    STATE_LOADING_LOBBY: 1,
    STATE_LOADING_GAME: 3,
    STATE_LOADING_GAME_VIEW: 4,
    STATE_LOGIN: 5,
    STATE_OK: 6,
    STATE_WAITING: 8
});
pokerapp.PokerAppUI = jui.RootLayer.extend({
    _stateMachine: null,
    _state: PokerAppUIState.STATE_NONE,
    _targetState: 0,
    _transistionDelay: 0,
    _loadingPanel: null,
    _loadTime: 0,
    _min_game_loadTime: 1.5,
    _topBar: null,
    _bottomBar: null,
    _loginOk: !1,
    ctor: function () {
        this._super(cc.color(30, 30, 30, 255));
        this._stateMachine = new jcore.StateMachine("Lobby", PokerAppUIState, PokerAppUIState.STATE_WAITING);
        this._initEvents();
        cc.log("Creating PokerAppUI");
        var a = this.getUINode();
        a.setLayout(new jui.DockLayout);
        a.addChild(pokerapp.UIAppViewManager.getInstance(),
            jui.WidgetLayers.UI);
        pokerapp.UIAppViewManager.getInstance().on.activeViewChanged.add(this._onActiveViewChanged, this);
        cc.log("Creating LoadingLayer");
        this._loadingPanel = new pokerapp.LoadingPanel;
        this.getRootNode().addChild(this._loadingPanel, jui.WidgetLayers.Overlay)
    },
    _initEvents: function () {
        cc.log("Init Events");
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_open_lobby, _.bind(function (a) {
            this.openLobby()
        }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_popup_login,
            _.bind(function (a) {
                this._loginOk = !0;
                this.openLobby()
            }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_back, _.bind(function (a) {
                a = pokerapp.UIAppViewManager.getInstance().getActiveView();
                jcore.util.isNotNull(a) && a instanceof pokerapp.UIPokerGameView && (a = a.getPokerGame()) && (!a.isTournament() && jcore.util.isNull(a.getMe())) && a.closeGame(!1);
                jcore.App.getInstance().isRunningEmbeddedMode() ? this.openLobby() : pokerapp.UIAppViewManager.getInstance().canPopView() && pokerapp.UIAppViewManager.getInstance().popView()
            },
            this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_open_lobby_ringgames, _.bind(this.openRingGameList, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_open_lobby_tournaments, _.bind(this.openTournamentsList, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_open_lobby_tournaments_sng, _.bind(this.openTournamentsList, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_open_game, _.bind(function (a) {
            a = a.getUserData();
            jcore.util.isDefined(a.gameHeader) ?
                this.openGame(a.gameHeader, a.makeActive) : this.openGame(a, !0)
        }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_open_cashier, _.bind(function (a) {
            jcore.App.getInstance().isRunningEmbeddedMode() ? pokerapp.BridgeLobbyService.getInstance().showDepositView() : jcore.App.getInstance().showAlert("Test Cashier Popup")
        }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_popup_profile, _.bind(function (a) {
            jcore.App.getInstance().isRunningEmbeddedMode() ? (pokerapp.BridgeLobbyService.getInstance().showProfileView(),
                setTimeout(function () {
                    pokerapp.LobbyService.getInstance().refreshUserBalance()
                }, 4E3)) : (a = new pokerapp.ProfilePopup, jui.PopupManager.getInstance().showPopup(a))
        }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_popup_filter, _.bind(function (a) {
            a = new pokerapp.FilterPopup;
            jui.PopupManager.getInstance().showPopup(a)
        }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_popup_test, _.bind(function (a) {
            jcore.App.getInstance().showAlert("Test Popup")
        }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_popup_menu_game,
            _.bind(function (a) {
                a = a.getUserData();
                var b = pokerapp.UIAppViewManager.getInstance().getActiveView();
                if (b instanceof pokerapp.UIPokerGameView && (b = b.getPokerGame())) b = new pokerapp.GameMenuPopup(b), b.setPopupPosition(jui.PopupPositioning.relative_bottom_right, a), jui.PopupManager.getInstance().showPopup(b)
            }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_popup_menu_tables, _.bind(function (a) {
            a = a.getUserData();
            var b = new pokerapp.TableMenuPopup;
            b.setPopupPosition(jui.PopupPositioning.relative_bottom_right,
                a);
            jui.PopupManager.getInstance().showPopup(b)
        }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_popup_chat, _.bind(function (a) {
            a = a.getUserData();
            a = new pokerapp.ChatPopup(a);
            jui.PopupManager.getInstance().showPopup(a)
        }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_popup_buyin, _.bind(function (a) {
            a = a.getUserData();
            a = new pokerapp.BuyinPopup(a);
            jui.PopupManager.getInstance().showPopup(a)
        }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_popup_rebuy_addon,
            _.bind(function (a) {
                a = a.getUserData();
                a = new pokerapp.RebuyPopup(a);
                jui.PopupManager.getInstance().showPopup(a)
            }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_game_buychips, _.bind(function (a) {
            (a = a.getUserData()) && a instanceof pokerapp.TableModel && a.getGameController().beginRebuy()
        }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_game_rebuy, _.bind(function (a) {
            (a = a.getUserData()) && a instanceof pokerapp.TableModel && a.getGameController().beginRebuy()
        }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_game_addon, _.bind(function (a) {
            (a = a.getUserData()) && a instanceof pokerapp.TableModel && a.getGameController().beginAddon()
        }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_popup_alert, _.bind(function (a) {
            a = a.getUserData();
            a = new pokerapp.AlertPopup(a);
            jui.PopupManager.getInstance().showPopup(a)
        }, this));
        cc.eventManager.addCustomListener(pokerapp.PokerAppEvents.event_open_handhistory, _.bind(function (a) {
            var b = a.getUserData();
            b && b instanceof pokerapp.TableModel && (a = "" + jcore.util.orDefault(b.lastHandId, ""), b = "" + pokerapp.Currency.enumGetName(b.getGameHeader().currency, ""), !jcore.util.isNullOrEmpty(a) && !jcore.util.isNullOrEmpty(b) && (jcore.App.getInstance().isRunningEmbeddedMode() ? pokerapp.BridgeLobbyService.getInstance().showHandHistoryView(a, b) : (a = new pokerapp.AlertPopup("show hand history " + a + " " + b), jui.PopupManager.getInstance().showPopup(a))))
        }, this))
    },
    _onCreateTopBar: function () {
        return this._topBar = new pokerapp.TopBar
    },
    _getTopBarLayout: function () {
        return new jui.DockLayoutProps(jui.DockLayoutEdge.top)
    },
    _onCreateBottomBar: function () {
        return null
    },
    openLobby: function () {
        if (jcore.App.getInstance().isRunningEmbeddedMode()) pokerapp.BridgeLobbyService.getInstance().showLobbyView();
        else {
            pokerapp.LobbyService.getInstance().connect();
            var a = this.getState();
            if (a !== PokerAppUIState.STATE_OK && a != PokerAppUIState.STATE_LOGIN) return
        }
        this._loadTime = 0;
        this._stateMachine.transitionToState(PokerAppUIState.STATE_LOADING_LOBBY)
    },
    openGame: function (a,
        b) {
        b = jcore.util.orDefault(b, !0);
        jcore.util.isNotNull(a) && pokerapp.GameManagerService.getInstance().queueOpenGame(a, b);
        this.getState() === PokerAppUIState.STATE_OK && 0 < pokerapp.GameManagerService.getInstance().getQueueLength() && (this._loadTime = 0, this._stateMachine.transitionToState(PokerAppUIState.STATE_LOADING_GAME))
    },
    openRingGameList: function () {
        if (jcore.App.getInstance().isRunningEmbeddedMode()) this.openLobby();
        else {
            var a = pokerapp.UIAppViewManager.getInstance().findView("lobby-ringgames");
            null == a &&
                (a = new pokerapp.RingGameSelectionView);
            pokerapp.UIAppViewManager.getInstance().pushView(a)
        }
    },
    openTournamentsList: function () {
        if (jcore.App.getInstance().isRunningEmbeddedMode()) this.openLobby();
        else {
            var a = pokerapp.UIAppViewManager.getInstance().findView("lobby-tournaments");
            null == a && (a = new pokerapp.TournamentGameSelectionView);
            pokerapp.UIAppViewManager.getInstance().pushView(a)
        }
    },
    getState: function () {
        return this._stateMachine.getState()
    },
    _OnUpdate: function (a) {
        this._super(a);
        if (jcore.App.getInstance().getState() ==
            jcore.AppState.STATE_RUNNING) {
            this._stateMachine.update(a);
            switch (this.getState()) {
            case PokerAppUIState.STATE_NONE:
                this._loadTime += a;
                this._showLoadingPanel(!0);
                this._stateMachine.transitionToState(PokerAppUIState.STATE_LOADING_LOBBY);
                break;
            case PokerAppUIState.STATE_LOADING_LOBBY:
                this._loadTime += a;
                this._loadingPanel.onUpdateProgressStatus("LOADING...", 0, 1, null);
                this._stateMachine.transitionToState(PokerAppUIState.STATE_LOGIN);
                break;
            case PokerAppUIState.STATE_LOADING_GAME:
                this._loadTime += a;
                var b = !1,
                    c = pokerapp.UIAppViewManager.getInstance().getActiveView();
                if (c && c instanceof pokerapp.UIPokerGameView && (b = !0, c = pokerapp.GameManagerService.getInstance().peakOpenGame(), jcore.util.isNotNull(c))) {
                    var d = c.gameHeader,
                        c = c.makeActive,
                        d = pokerapp.UIAppViewManager.getInstance().findGameView(d);
                    null == d && c && (b = !1)
                }
                b ? this._stateMachine.transitionToState(PokerAppUIState.STATE_LOADING_GAME_VIEW) : (this._showLoadingPanel(!0), this._loadingPanel.onUpdateProgressStatus("LOADING...", 0, 1, null), this._stateMachine.transitionToState(PokerAppUIState.STATE_LOADING_GAME_VIEW,
                    0.5 * this._min_game_loadTime - this._loadTime), setTimeout(function () {
                    pokerapp.LobbyService.getInstance().refreshUserBalance()
                }, 5E3));
                break;
            case PokerAppUIState.STATE_LOADING_GAME_VIEW:
                this._loadTime += a;
                (c = pokerapp.UIAppViewManager.getInstance().getActiveView()) && c instanceof pokerapp.UIPokerGameView || this._showLoadingPanel(!0);
                c = pokerapp.GameManagerService.getInstance().dequeOpenGame();
                jcore.util.isNotNull(c) && (d = c.gameHeader, c = c.makeActive, jcore.util.isNotNull(d) && (b = pokerapp.GameManagerService.getInstance().openGame(d),
                    d = pokerapp.UIAppViewManager.getInstance().findGameView(b.getGameHeader()), null != d && d.getPokerGame().isClosed() && (pokerapp.UIAppViewManager.getInstance().removeView(d), d = null), null == d && (d = new pokerapp.UIPokerGameView(b), c = !0), c && pokerapp.UIAppViewManager.getInstance().pushView(d, jui.ViewTransition.fadeIn)));
                this._stateMachine.transitionToState(PokerAppUIState.STATE_OK, this._min_game_loadTime - this._loadTime);
                break;
            case PokerAppUIState.STATE_LOGIN:
                this._showLoadingPanel(!0);
                jcore.App.getInstance().isRunningEmbeddedMode() ||
                    this._loginOk ? this._stateMachine.transitionToState(PokerAppUIState.STATE_OK) : this._loadingPanel.showActionButtons();
                break;
            case PokerAppUIState.STATE_OK:
                if (pokerapp.UIAppViewManager.getInstance().hasActiveView())
                    if (0 < pokerapp.GameManagerService.getInstance().getQueueLength()) this.openGame(null);
                    else {
                        b = jcore.App.getInstance().isRunningEmbeddedMode();
                        c = pokerapp.UIAppViewManager.getInstance().getActiveView();
                        d = 6;
                        if (!b || c instanceof pokerapp.UIPokerGameView) d = 0;
                        this._loadTime += a;
                        this._loadTime >= d && this._showLoadingPanel(!1)
                    }
                else jcore.App.getInstance().isRunningEmbeddedMode() &&
                    this._showLoadingPanel(!0), b = pokerapp.UIAppViewManager.getInstance().findView("lobby"), null == b && (b = new pokerapp.LobbyView), b.setVisible(!1), pokerapp.UIAppViewManager.getInstance().pushView(b)
            }
            this._topBar && this._topBar.update(a);
            this._bottomBar && this._bottomBar.update(a)
        } else this._showLoadingPanel(!0), this._loadingPanel.onUpdateProgressStatus("", 0, 1, null)
    },
    _showLoadingPanel: function (a) {
        a && !this._loadingPanel.isShowing() ? (this._loadingPanel.hideActionButtons(), this._loadingPanel.fadeIn(0.1)) : !a &&
            this._loadingPanel.isShowing() && this._loadingPanel.fadeOut(0.5)
    },
    _onActiveViewChanged: function (a, b, c) {
        jcore.util.isNull(b) || (b instanceof pokerapp.UIPokerGameView ? this.changeBackground(jui.util.asset.createSpriteWithAsset("game/game-background.png")) : this.changeBackground(jui.util.asset.createSpriteWithAsset("lobby/lobby-background.png")))
    }
});
pokerapp.PokerApp = jcore.App.extend({
    _fontCache: null,
    _skinDefinition: null,
    ctor: function (a) {
        this._version = "v0.83";
        this._fontCache = [];
        this._skinDefinition = a
    },
    init: function () {
        this._super();
        jui.init();
        jcore.App.getInstance().isRunningEmbeddedMode() || pokerapp.SecurityUtil.updateLocalIP();
        this.registerService(pokerapp.BridgeService.getInstance());
        this.registerService(pokerapp.LobbyService.getInstance());
        this.registerService(pokerapp.GameManagerService.getInstance());
        this.registerService(pokerapp.DialogService.getInstance());
        this.registerService(pokerapp.AudioService.getInstance())
    },
    getCurrentSkin: function () {
        return this._skinDefinition
    },
    createRootLayer: function () {
        return new pokerapp.PokerAppUI
    },
    showAlert: function (a) {
        a = new pokerapp.AlertPopup(a);
        jui.PopupManager.getInstance().showPopup(a)
    },
    addPreloadedTTFFont: function (a) {
        a = new cc.LabelTTF(jui.Globals.preloadAlphabet, a);
        this._fontCache.push(a)
    },
    isRunningEmbeddedMode: function () {
        return cc.sys.isNative ? !1 : "true" === this.getAppParameter("embedded", "true")
    }
});
pokerapp.TestUI = jui.RootLayer.extend({
    ctor: function () {
        this._super(cc.color(255, 30, 30, 255));
        var a = this.getUINode();
        a.setLayout(new jui.DockLayout);
        var b = new jui.Panel,
            c = new pokerapp.TestTextBox;
        b.addChild(c);
        c.setCenterAlignment();
        a.addChild(b, jui.WidgetLayers.UI)
    },
    _onCreateTopBar: function () {
        return null
    },
    _onCreateBottomBar: function () {
        return null
    }
});
pokerapp.FormatUtil = pokerapp.FormatUtil || {};
pokerapp.FormatUtil.formatLimitType = function (a) {
    switch (jcore.util.toNumber(a, -1)) {
    case pokerapp.PokerLimitType.NoLimit:
        return pokerapp.Translator.Translate(pokerapp.TranslationId.GameLimits_NoLimit);
    case pokerapp.PokerLimitType.PotLimit:
        return pokerapp.Translator.Translate(pokerapp.TranslationId.GameLimits_PotLimit);
    case pokerapp.PokerLimitType.FixedLimit:
        return pokerapp.Translator.Translate(pokerapp.TranslationId.GameLimits_FixedLimit);
    default:
        return "" + a
    }
};
pokerapp.FormatUtil.formatShortLimitType = function (a) {
    switch (jcore.util.toNumber(a, -1)) {
    case pokerapp.PokerLimitType.NoLimit:
        return pokerapp.Translator.Translate(pokerapp.TranslationId.GameLimits_Short_NoLimit);
    case pokerapp.PokerLimitType.PotLimit:
        return pokerapp.Translator.Translate(pokerapp.TranslationId.GameLimits_Short_PotLimit);
    case pokerapp.PokerLimitType.FixedLimit:
        return pokerapp.Translator.Translate(pokerapp.TranslationId.GameLimits_Short_FixedLimit);
    default:
        return "" + a
    }
};
pokerapp.FormatUtil.formatShortGameType = function (a) {
    switch (jcore.util.toNumber(a, -1)) {
    case pokerapp.PokerGameType.TexasHoldem:
        return pokerapp.Translator.Translate(pokerapp.TranslationId.GameTypes_TexasHoldem);
    case pokerapp.PokerGameType.Omaha:
        return pokerapp.Translator.Translate(pokerapp.TranslationId.GameTypes_Omaha);
    case pokerapp.PokerGameType.OmahaHiLo:
        return pokerapp.Translator.Translate(pokerapp.TranslationId.GameTypes_OmahaHiLo);
    default:
        return "" + a
    }
};
pokerapp.FormatUtil.formatMoney = function (a) {
    return pokerapp.FormatUtil.formatCurrency(a.currency, a.amount)
};
pokerapp.FormatUtil.formatCurrency = function (a, b) {
    var c = jcore.util.orDefault(pokerapp.CurrencySymbols.get(a), "");
    b = jui.util.isValidNumber(b) ? b : 0;
    return 0 < b - Math.floor(b) ? String.format("{0}{1:#,0.00}", c, b) : String.format("{0}{1:#,0.}", c, b)
};
pokerapp.FormatUtil.formatStake = function (a, b, c, d) {
    var f = "",
        g = d ? "" : a.currency;
    if (0 >= a.low && 0 >= a.high && 0 < a.ante) return f = String.format("{0}", pokerapp.FormatUtil.formatCurrency(g, a.ante));
    f = b === pokerapp.PokerLimitType.FixedLimit && !d ? String.format("{0}/{1}", pokerapp.FormatUtil.formatCurrency(g, a.low), pokerapp.FormatUtil.formatCurrency(g, a.high)) : String.format("{0}/{1}", pokerapp.FormatUtil.formatCurrency(g, a.smallBlind), pokerapp.FormatUtil.formatCurrency(g, a.low));
    c && 0 < a.ante && (f += "/" + pokerapp.FormatUtil.formatCurrency(g,
        a.ante));
    return f
};
pokerapp.FormatUtil.formatTimeSpanSeconds = function (a) {
    if (60 < a) {
        var b = "",
            c = Math.floor(a / 60),
            d = Math.floor(c / 60),
            f = "";
        0 < d ? (b += "" + d + ":", f = String.format("{0:00}", c - 60 * d)) : f = String.format("{0}", c - 60 * d);
        return b += String.format("{0}:{1:00}", f, Math.floor(a - 60 * (c - 60 * d)))
    }
    return "" + a
};
pokerapp.FormatUtil.formatKickers = function (a, b) {
    var c = " ",
        d = b;
    if (a && a.length && a.length - 1 >= d && a[b] && "" !== a[b])
        if (c = CardModel.parse(a[b]).cardRankToString(!1), d++, d <= a.length - 1) {
            for (; d <= a.Length - 1; d++) a[d] && "" !== a[d] && (c = c + ", " + CardModel.parse(a[d]).cardRankToString(!1));
            c = pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_MultiKicker, c)
        } else c = pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_SingleKicker, c);
    return c
};
pokerapp.FormatUtil.formatHandInfo = function (a, b) {
    b = jcore.util.orDefault(b, 0);
    if (!a || !a.length || b > a.length - 1) return "";
    switch (pokerapp.ConvertUtil.toString(a[b], "-1")) {
    case "0":
    case "RoyalFlush":
        return pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_RoyalFlush);
    case "1":
    case "Straight Flush":
        return a.length > b + 1 ? pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_StraightFlush, CardModel.parse(a[b + 1]).cardRankToString(!1)) : pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_Short_StraightFlush);
    case "2":
    case "FourOfAKind":
        return a.length > b + 1 ? pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_FourofaKind, CardModel.parse(a[b + 1]).cardRankToString(!0), pokerapp.FormatUtil.formatKickers(a, b + 2)) : pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_Short_FourofaKind);
    case "3":
    case "FullHouse":
        return a.length > b + 1 ? pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_FullHouse, CardModel.parse(a[b + 1]).cardRankToString(!0), a.length <= b + 2 ? "" : CardModel.parse(a[b +
            2]).cardRankToString(!0)) : pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_Short_FullHouse);
    case "4":
    case "Flush":
        return a.length > b + 1 ? pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_Flush, CardModel.parse(a[b + 1]).cardRankToString(!1)) : pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_Short_Flush);
    case "5":
    case "Straight":
        return a.length > b + 1 ? pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_Straight, CardModel.parse(a[b + 1]).cardRankToString(!1)) :
            pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_Short_Straight);
    case "6":
    case "ThreeOfAKind":
        return a.length > b + 1 ? pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_ThreeofaKind, CardModel.parse(a[b + 1]).cardRankToString(!0), pokerapp.FormatUtil.formatKickers(a, b + 2)) : pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_Short_ThreeofaKind);
    case "7":
    case "TwoPair":
        return a.length > b + 1 ? pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_TwoPairs,
            CardModel.parse(a[b + 1]).cardRankToString(!0), a.length <= b + 2 ? "" : CardModel.parse(a[b + 2]).cardRankToString(!0), pokerapp.FormatUtil.formatKickers(a, b + 3)) : pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_Short_TwoPairs);
    case "8":
    case "Pair":
        return a.length > b + 1 ? pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_Pairof, CardModel.parse(a[b + 1]).cardRankToString(!0), pokerapp.FormatUtil.formatKickers(a, b + 2)) : pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_Short_Pairof);
    case "9":
    case "HighCard":
        return a.length > b + 1 ? pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_HighCard, CardModel.parse(a[b + 1]).cardRankToString(!1), pokerapp.FormatUtil.formatKickers(a, b + 2)) : pokerapp.Translator.Translate(pokerapp.TranslationId.HandStrength_Short_HighCard);
    default:
        return ""
    }
};
pokerapp.FormatUtil.formatPlace = function (a) {
    a = jcore.util.toNumber(a, 0);
    var b = "";
    if (1 <= a) {
        var b = jcore.util.toString(a),
            c = a % 10;
        a = 1 == parseInt(a % 100 / 10);
        b = 1 == c && !1 == a ? b + pokerapp.Translator.Translate(pokerapp.TranslationId.Numbers_Trailing_ST) : 2 == c && !1 == a ? b + pokerapp.Translator.Translate(pokerapp.TranslationId.Numbers_Trailing_ND) : 3 == c && !1 == a ? b + pokerapp.Translator.Translate(pokerapp.TranslationId.Numbers_Trailing_RD) : b + pokerapp.Translator.Translate(pokerapp.TranslationId.Numbers_Trailing_TH)
    }
    return b
};
pokerapp.ConvertUtil = pokerapp.ConvertUtil || {};
pokerapp.ConvertUtil.toString = function (a, b) {
    if (jcore.util.isNull(a)) return b;
    a instanceof pokerapp.NetMsgParameter && (a = a.toString());
    return "" + a
};
pokerapp.ConvertUtil.toInt = function (a, b) {
    if (jcore.util.isNull(a)) return b;
    a instanceof pokerapp.NetMsgParameter && (a = a.toString());
    return jcore.util.toNumber(a, b)
};
pokerapp.ConvertUtil.toDecimal = function (a, b) {
    if (jcore.util.isNull(a)) return b;
    a instanceof pokerapp.NetMsgParameter && (a = a.toString());
    return jcore.util.toDecimal(a, b)
};
pokerapp.ConvertUtil.toBoolean = function (a, b) {
    if (jcore.util.isNull(a)) return b;
    a instanceof pokerapp.NetMsgParameter && (a = a.toString());
    return jcore.util.isString(a) ? "True" === a || "true" === a || "1" === a : a ? !0 : !1
};
pokerapp.ConvertUtil.toLimitType = function (a, b) {
    if (jcore.util.isNull(a)) return b;
    a instanceof pokerapp.NetMsgParameter && (a = a.toString());
    var c = pokerapp.PokerLimitType.enumParseNameOrValue(a, b);
    if (c == pokerapp.PokerLimitType.Unknown) {
        if ("Pot" == a) return pokerapp.PokerLimitType.PotLimit;
        if ("Fixed" == a) return pokerapp.PokerLimitType.FixedLimit;
        if ("No" == a) return pokerapp.PokerLimitType.NoLimit;
        if ("Limit" == a) return pokerapp.PokerLimitType.FixedLimit
    }
    return c
};
pokerapp.ConvertUtil.toGameType = function (a, b) {
    if (jcore.util.isNull(a)) return b;
    a instanceof pokerapp.NetMsgParameter && (a = a.toString());
    return pokerapp.PokerGameType.enumParseNameOrValue(a, b)
};
pokerapp.ConvertUtil.toCurrency = function (a, b) {
    if (jcore.util.isNull(a)) return b;
    a instanceof pokerapp.NetMsgParameter && (a = a.toString());
    return pokerapp.Currency.enumParseNameOrValue(a, b)
};
pokerapp.ConvertUtil.toSeatState = function (a, b) {
    if (jcore.util.isNull(a)) return b;
    a instanceof pokerapp.NetMsgParameter && (a = a.toString());
    return pokerapp.SeatState.enumParseNameOrValue(a, b)
};
pokerapp.ConvertUtil.toPlayerActions = function (a, b) {
    if (jcore.util.isNull(a)) return b;
    a instanceof pokerapp.NetMsgParameter && (a = a.toString());
    var c = [];
    if (jcore.util.isString(a))
        for (var d = a.split(","), f = 0; f < d.length; f++) d[f] && "" !== d[f] && c.push(pokerapp.PokerPlayerActions.enumParseNameOrValue(d[f], pokerapp.PokerPlayerActions.None));
    else pokerapp.PokerPlayerActions.enumParseNameOrValue(a, pokerapp.PokerPlayerActions.None);
    return c
};
pokerapp.ConvertUtil.toCards = function (a, b) {
    if (jcore.util.isNull(a)) return b;
    a instanceof pokerapp.NetMsgParameter && (a = a.toString());
    var c = [];
    if (jcore.util.isString(a))
        for (var d = a.split(" "), f = 0; f < d.length; f++) d[f] && "" !== d[f] && c.push(CardModel.parse(d[f]));
    return c
};
pokerapp.ConvertUtil.toPots = function (a, b) {
    if (jcore.util.isNull(a)) return b;
    a instanceof pokerapp.NetMsgParameter && (a = a.toString());
    var c = [];
    if (jcore.util.isString(a))
        for (var d = a.split(","), f = 0; f < d.length; f++) d[f] && "" !== d[f] && c.push(pokerapp.ConvertUtil.toDecimal(d[f], 0));
    return c
};
pokerapp.ConvertUtil.toTournamentState = function (a, b) {
    if (jcore.util.isNull(a)) return b;
    a instanceof pokerapp.NetMsgParameter && (a = a.toString());
    return pokerapp.TournamentState.enumParseNameOrValue(a, b)
};
pokerapp.ConvertUtil.toWinType = function (a, b) {
    if (jcore.util.isNull(a)) return b;
    a instanceof pokerapp.NetMsgParameter && (a = a.toString());
    return pokerapp.WinType.enumParseNameOrValue(a, b)
};
pokerapp.ConvertUtil.toEntryType = function (a, b) {
    if (jcore.util.isNull(a)) return b;
    a instanceof pokerapp.NetMsgParameter && (a = a.toString());
    return pokerapp.EntryType.enumParseNameOrValue(a, b)
};
pokerapp.NetUtil = pokerapp.NetUtil || {};
pokerapp.NetUtil.getLocalIPString = function () {
    return pokerapp.SecurityUtil.getLocalIP()
};
pokerapp.SecurityUtil = pokerapp.SecurityUtil || {};
pokerapp.SecurityUtil._global_machine_id = null;
pokerapp.SecurityUtil._global_local_ip = "255.199.1.1";
pokerapp.SecurityUtil.getMachineID = function () {
    jcore.util.isNullOrEmpty(pokerapp.SecurityUtil._global_machine_id) && pokerapp.SecurityUtil.setMachineSignature(jcore.math.guid());
    return pokerapp.SecurityUtil._global_machine_id
};
pokerapp.SecurityUtil.getMachineSignature = function () {
    return pokerapp.SecurityUtil.getMachineID()
};
pokerapp.SecurityUtil.setMachineSignature = function (a) {
    pokerapp.SecurityUtil._global_machine_id = a
};
pokerapp.SecurityUtil.getLocalIP = function () {
    return pokerapp.SecurityUtil._global_local_ip
};
pokerapp.SecurityUtil.setLocalIP = function (a) {
    pokerapp.SecurityUtil._global_local_ip = a
};
pokerapp.SecurityUtil.updateLocalIP = function (a, b) {
    var c = new XMLHttpRequest;
    c.open("GET", "https://api.ipify.org", !0);
    c.setRequestHeader("Content-Type", "text/xml");
    c.onreadystatechange = function () {
        if (4 == c.readyState) {
            var d = c.responseText;
            200 == c.status && !jcore.util.isNullOrEmpty(d) ? (pokerapp.SecurityUtil.setLocalIP("" + d), a && a()) : b && b()
        }
    };
    c.send()
};
var AppScene = cc.Scene.extend({
    _rootLayer: null,
    ctor: function (a) {
        this._super();
        jcore.App.init(a);
        cc.log("INIT App DONE OK");
        this.scheduleUpdate();
        return !0
    },
    onEnter: function () {
        this._super();
        this._rootLayer || (this._rootLayer = jcore.App.getInstance().createRootLayer(), this.addChild(this._rootLayer))
    },
    update: function (a) {
        jcore.App.getInstance().update(a)
    }
});
var localStorage = cc.sys.localStorage,
    navigator = navigator || {};
window.s;
if (cc.sys.isNative) {
    if (!window.localStorage || !localStorage) window.localStorage = localStorage = cc.sys.localStorage;
    navigator.userAgent = "cocos2dx";
    navigator.platform = cc.sys.platform;
    navigator.appVersion = "1.0";
    navigator.vendor = "cocosapp";
    window && (window.navigator && !window.navigator.userAgent) && (window.navigator.userAgent = navigator.userAgent)
}
cc.game.onStart = function () {
    !cc.sys.isNative && document.getElementById("cocosLoading") && document.body.removeChild(document.getElementById("cocosLoading"));
    !cc.sys.isNative && (cc.sys.isMobile && cc.sys.browserType !== cc.sys.BROWSER_TYPE_BAIDU && cc.sys.browserType !== cc.sys.BROWSER_TYPE_WECHAT) && cc.view.enableAutoFullScreen(!0);
    cc.view.enableRetina(!1);
    if (cc.sys.platform == cc.sys.MOBILE_BROWSER || cc.sys.platform == cc.sys.DESKTOP_BROWSER) {
        var a = 1 < window.devicePixelRatio || window.matchMedia && window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches;
        cc.view.enableRetina(a)
    }
    cc.view.resizeWithBrowserSize(!0);
    cc.view.adjustViewPort(!0);
    cc.view.setOrientation(cc.ORIENTATION_LANDSCAPE);
    cc.director.setAnimationInterval(0.05);
    a = jcore.util.orDefault(jcore.util.getUrlParameter("SkinId"), "EVERYGAME");
    console.log("skinId=" + a);
    jui.Globals.updateScreenSize();
    cc.loader.resPath = "res/" + a;
    cc.log("loading skin " + a);
    a = pokerapp.SkinDefinition.load(a);
    cc.log("creating app...");
    var b = new pokerapp.PokerApp(a);
    cc.log("loading resources...");
    var c = g_resources || [];
    cc.LoaderScene.preload(c, function () {
        for (var a = 0; a < c.length; a++) {
            var f = c[a];
            f.spritesheet_list ? (cc.log("adding frames from: " + f.src), cc.spriteFrameCache.addSpriteFrames(f.src)) : f.spritesheet || "font" == f.type && f.preload && _.each(f.preload.sizes, function (a) {
                var c = f.preload.color,
                    d = new cc.FontDefinition;
                d.fontName = f.name;
                d.fontSize = jcore.util.orDefault(a, 14);
                d.fillStyle = jcore.util.orDefault(c, cc.color(255, 255, 255));
                cc.log("loading font " + d.fontName + " " + d.fontSize);
                b.addPreloadedTTFFont(d)
            })
        }
        cc.log("loading main scene...");
        cc.director.runScene(new cc.TransitionFade(2, new AppScene(b), cc.color(0, 0, 0, 0)))
    }, this)
};
cc.game.run();